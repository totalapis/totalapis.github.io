<!DOCTYPE html><html><head><meta charset="utf-8"><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="content-language" content="en"><meta name="last-modified" content="Mon Jun 19 2017 15:49:43 GMT-0700 (Pacific Daylight Time)"><meta name="product" content="js-api-arcgis"><meta name="version" content="4.x"><meta name="subject" content="DEVELOPER,WEB,WEB APPLICATIONS,MOBILE"><meta name="subject_label" content="DEVELOPER,WEB,WEB APPLICATIONS,MOBILE"><meta name="sub_category" content="JavaScript API"><meta name="sub_category_label" content="ArcGIS API for JavaScript"><meta name="content_type" content="Guide"><meta name="content_type_label" content="Guide"><meta name="search-collection" content="help"><meta name="search-category" content="help-api,help-api-guide"><title>Arcade | ArcGIS API for JavaScript 4.4</title><link rel="shortcut icon" href="../../assets/img/favicon.ico"><link rel="stylesheet" href="../../assets/css/default.css"><script src="https://assets.adobedtm.com/2e9cd01e19dc5ac4867e752f17a2f1ea1923e5af/satelliteLib-0ed1001fd441a838aefe8e755be42aaafddcc46b.js"></script></head><body><developers-account-notifications></developers-account-notifications><div class="wrapper"><header class="top-nav top-nav-hover-top"><div class="grid-container"><div class="column-24 tablet-show"><div class="dropdown js-dropdown left"><a href="#" class="icon-ui-menu top-nav-title js-drawer-toggle top-nav-title-tablet" data-drawer="top-nav">ArcGIS API for JavaScript</a></div></div><div class="column-24 leader-1 trailer-1 tablet-leader-0">Go to <a href="https://developers.arcgis.com/javascript/">Latest version (official documentation)</a></div></div></header><header class="sub-nav sub-nav-purple"><div class="grid-container"><nav class="breadcrumbs breadcrumbs-white clearfix padding-leader-1"><a href="/web-api/" class="crumb">ArcGIS Web API</a> <a href="../.." class="crumb">JavaScript API</a> <a href="../.." class="crumb">4.4</a> <a href="../../guide/index.html" class="crumb">Guide</a></nav><h1 class="sub-nav-title text-white leader-1">ArcGIS API for JavaScript</h1><nav class="sub-nav-list leader-0 tablet-hide"><a class="sub-nav-link" href="../../index.html">Home</a> <a class="sub-nav-link is-active" href="../../guide/index.html">Guide</a> <a class="sub-nav-link" href="../../api-reference/index.html">API Reference</a> <a class="sub-nav-link" href="../../sample-code/index.html">Sample Code</a> <a class="sub-nav-link sub-nav-link-external icon-ui-link-external" href="https://geonet.esri.com/community/developers/web-developers/arcgis-api-for-javascript">Forum</a></nav><select class="select-full trailer-half tablet-show js-select-nav"><option value="../../index.html">Home</option><option selected="selected" value="../../guide/index.html">Guide</option><option value="../../api-reference/index.html">API Reference</option><option value="../../sample-code/index.html">Sample Code</option><option value="https://geonet.esri.com/community/developers/web-developers/arcgis-api-for-javascript">Forum</option></select></div></header><div id="skip-to-content"><div class="grid-container leader-1"><div class="column-6 trailer-2 tablet-hide"><aside class="accordion side-nav column-6 js-accordion guide"><div class="accordion-section"><h4 class="accordion-title">Get Started</h4><nav class="accordion-content"><a href="../../guide/index.html" class="side-nav-link">Overview</a></nav><nav class="accordion-content"><a href="../../guide/release-notes/index.html" class="side-nav-link">Release notes</a></nav><nav class="accordion-content"><a href="../../guide/system-requirements/index.html" class="side-nav-link">System requirements</a></nav><nav class="accordion-content"><a href="../../guide/faq/index.html" class="side-nav-link">FAQ</a></nav><nav class="accordion-content"><a href="../../guide/community/index.html" class="side-nav-link">Community</a></nav></div><div class="accordion-section is-active"><h4 class="accordion-title">Working with the API</h4><nav class="accordion-content"><a href="../../guide/discover/index.html" class="side-nav-link">Discover 4.x</a></nav><nav class="accordion-content"><a href="../../guide/working-with-props/index.html" class="side-nav-link">Properties</a></nav><nav class="accordion-content"><a href="../../guide/working-with-promises/index.html" class="side-nav-link">Promises</a></nav><nav class="accordion-content"><a href="../../guide/autocasting/index.html" class="side-nav-link">Autocasting</a></nav><nav class="accordion-content"><a href="../../guide/loadable/index.html" class="side-nav-link">Loadable</a></nav><nav class="accordion-content"><a href="../../guide/cors/index.html" class="side-nav-link">CORS</a></nav><nav class="accordion-content"><a href="../../guide/proxies/index.html" class="side-nav-link">Proxy pages</a></nav><nav class="accordion-content"><a href="../../guide/arcade/index.html" class="side-nav-link is-active">Arcade</a></nav><nav class="accordion-content"><a href="../../guide/using-fromjson/index.html" class="side-nav-link">Using fromJSON()</a></nav><nav class="accordion-content"><a href="../../guide/localization/index.html" class="side-nav-link">Localization</a></nav><nav class="accordion-content"><a href="../../guide/get-api/index.html" class="side-nav-link">Get the API</a></nav><nav class="accordion-content"><a href="../../guide/view-ui/index.html" class="side-nav-link">View UI</a></nav><nav class="accordion-content"><a href="../../guide/styling/index.html" class="side-nav-link">Styling</a></nav><nav class="accordion-content"><a href="../../guide/get-started-visualization/index.html" class="side-nav-link">Visualization Overview</a></nav><nav class="accordion-content"><a href="../../guide/creating-visualizations-manually/index.html" class="side-nav-link">Creating visualizations manually</a></nav><nav class="accordion-content"><a href="../../guide/visualizing-points-3d/index.html" class="side-nav-link">Visualizing points with 3D symbols</a></nav><nav class="accordion-content"><a href="../../guide/esri-web-style-symbols/index.html" class="side-nav-link">Esri Web Style Symbols</a></nav><nav class="accordion-content"><a href="../../guide/get-started-workflows/index.html" class="side-nav-link">Get started with workflows</a></nav><nav class="accordion-content"><a href="../../guide/typescript-setup/index.html" class="side-nav-link">TypeScript Setup</a></nav><nav class="accordion-content"><a href="../../guide/implementing-accessor/index.html" class="side-nav-link">Implementing Accessor</a></nav><nav class="accordion-content"><a href="../../guide/custom-widget/index.html" class="side-nav-link">Widget Development</a></nav><nav class="accordion-content"><a href="../../guide/esri-icon-font/index.html" class="side-nav-link">Esri Icon Font</a></nav><nav class="accordion-content"><a href="../../guide/using-bower/index.html" class="side-nav-link">Using Bower</a></nav><nav class="accordion-content"><a href="../../guide/using-frameworks/index.html" class="side-nav-link">Using Frameworks</a></nav><nav class="accordion-content"><a href="../../guide/using-phonegap/index.html" class="side-nav-link">Using PhoneGap</a></nav></div><div class="accordion-section"><h4 class="accordion-title">Migrating from 3.x</h4><nav class="accordion-content"><a href="../../guide/choose-version/index.html" class="side-nav-link">Choose a version</a></nav><nav class="accordion-content"><a href="../../guide/migrating/index.html" class="side-nav-link">Migrating from 3.x to 4.4</a></nav><nav class="accordion-content"><a href="../../guide/functionality-matrix/index.html" class="side-nav-link">3.x to 4.x functionality matrix</a></nav></div></aside><div class="column-6 js-sticky scroll-show tablet-hide" data-top="46"><a href="#" class="btn btn-fill btn-clear">Back to Top</a></div></div><div class="column-24 trailer-1 tablet-show"><select class="select-full trailer-half js-select-nav"><optgroup label="Get Started"><option value="../../guide/index.html">Overview</option><option value="../../guide/release-notes/index.html">Release notes</option><option value="../../guide/system-requirements/index.html">System requirements</option><option value="../../guide/faq/index.html">FAQ</option><option value="../../guide/community/index.html">Community</option></optgroup><optgroup label="Working with the API"><option value="../../guide/discover/index.html">Discover 4.x</option><option value="../../guide/working-with-props/index.html">Properties</option><option value="../../guide/working-with-promises/index.html">Promises</option><option value="../../guide/autocasting/index.html">Autocasting</option><option value="../../guide/loadable/index.html">Loadable</option><option value="../../guide/cors/index.html">CORS</option><option value="../../guide/proxies/index.html">Proxy pages</option><option value="../../guide/arcade/index.html" selected="selected">Arcade</option><option value="../../guide/using-fromjson/index.html">Using fromJSON()</option><option value="../../guide/localization/index.html">Localization</option><option value="../../guide/get-api/index.html">Get the API</option><option value="../../guide/view-ui/index.html">View UI</option><option value="../../guide/styling/index.html">Styling</option><option value="../../guide/get-started-visualization/index.html">Visualization Overview</option><option value="../../guide/creating-visualizations-manually/index.html">Creating visualizations manually</option><option value="../../guide/visualizing-points-3d/index.html">Visualizing points with 3D symbols</option><option value="../../guide/esri-web-style-symbols/index.html">Esri Web Style Symbols</option><option value="../../guide/get-started-workflows/index.html">Get started with workflows</option><option value="../../guide/typescript-setup/index.html">TypeScript Setup</option><option value="../../guide/implementing-accessor/index.html">Implementing Accessor</option><option value="../../guide/custom-widget/index.html">Widget Development</option><option value="../../guide/esri-icon-font/index.html">Esri Icon Font</option><option value="../../guide/using-bower/index.html">Using Bower</option><option value="../../guide/using-frameworks/index.html">Using Frameworks</option><option value="../../guide/using-phonegap/index.html">Using PhoneGap</option></optgroup><optgroup label="Migrating from 3.x"><option value="../../guide/choose-version/index.html">Choose a version</option><option value="../../guide/migrating/index.html">Migrating from 3.x to 4.4</option><option value="../../guide/functionality-matrix/index.html">3.x to 4.x functionality matrix</option></optgroup></select></div><main class="column-17 tablet-column-12 pre-1 content-face"><h1 id="arcade-expression-language">Arcade - expression language</h1><p></p><div class="table-of-contents"><ul><li><a href="#overview">Overview</a></li><li><a href="#syntax">Syntax</a></li><li><a href="#profiles">Profiles</a><ul><li><a href="#visualization">Visualization</a></li><li><a href="#popups">Popups</a></li></ul></li></ul></div><p></p><h2 id="overview">Overview</h2><p><a href="https://developers.arcgis.com/arcade/">Arcade</a> is a lightweight and secure expression language written for use in the ArcGIS platform. Like other expression languages, it can perform mathematical calculations and evaluate logical statements. It was designed specifically for creating custom visualizations and labeling expressions in the ArcGIS Platform, allowing users to write, share, and execute custom expressions in <a href="http://www.esri.com/en/software/arcgis-pro">ArcGIS Pro</a>, <a href="https://arcgis.com">ArcGIS Online</a>, the <a href="https://developers.arcgis.com/arcgis-runtime/">ArcGIS Runtime APIs</a>, and the ArcGIS API for JavaScript.</p><p>What makes Arcade particularly unique to other expression and scripting languages is its inclusion of geometry functions. In the initial release of Arcade, geometries can be created and referenced. In future releases, other geometry functions may be added allowing you to calculate areas and lengths, and perform simple overlay operations in more complex expressions.</p><h2 id="syntax">Syntax</h2><p>In many respects Arcade's syntax is similar to JavaScript, allowing you to declare variables, perform logical operations, take advantage of built-in functions, and write custom functions. However, there are key differences between the two languages. Read the full <a href="https://developers.arcgis.com/arcade/">Arcade documentation</a> including <a href="https://developers.arcgis.com/arcade/guide/">guides</a> and the <a href="https://developers.arcgis.com/arcade/function-reference/">function reference</a> for more details on how to write an Arcade expression. You also have access to a <a href="https://developers.arcgis.com/arcade/playground/">playground</a> that provides an environment for testing custom scripts based on your data.</p><p>Global variables may be used within Arcade expressions, giving them access to external data. Global variables contain external values that are passed to a script during its execution – based on the execution <a href="#profiles">profile</a>. The <code>$feature</code> global variable allows you to access field values for features in a FeatureLayer. Each field value is also considered a global variable. Field values are referenced using the following syntax:</p><pre><code class="js">$feature.fieldName
</code></pre><p>This makes it easy to perform simple calculations using field values at runtime.</p><pre><code class="js"><span class="hljs-comment">// calculates the % of voters who voted for a</span>
<span class="hljs-comment">// democratic candidate</span>
($feature.DEM_VOTES / $feature.TURNOUT ) * <span class="hljs-number">100</span>
</code></pre><p>Arcade is only executed within the context, or <a href="#profiles">profile</a>, in which it is understood. Within JavaScript apps, Arcade expressions are always referenced as a string value. You may use Arcade to write simple single-line expressions, or more complex multi-line epxressions.</p><p>When writing single-line expressions, you can simply wrap it in double or single quotes.</p><pre><code class="js">renderer.valueExpression = <span class="hljs-string">"Round( ($feature.AGE_18UP / $feature.TOTAL_POP) * 100 )"</span>;
</code></pre><p>When writing multi-line expressions, we recommend you place it in a separate <code>&lt;script&gt;</code> tag outside the JavaScript portion of the app, and set the type to <code>text/plain</code> with a unique ID you can use to reference the script in the appropriate place within JavaScript.</p><pre><code class="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/plain"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"adult-population"</span>&gt;</span><span class="actionscript">
  <span class="hljs-comment">// place multi-line Arcade expression here</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><p>Then you can refrence the script as a string value by calling the <code>document.getElementById()</code> method.</p><pre><code class="js">renderer.valueExpression = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"adult-population"</span>).text;
</code></pre><p>See the example snippets below and the <a href="../../sample-code/visualization-arcade/index.html">Create a custom visualization using Arcade</a> sample for more context.</p><h2 id="profiles">Profiles</h2><p>Arcade was designed for use in several profiles. A profile is a context in which the expression is understood and used. In the ArcGIS API 4.4 for JavaScript, Arcade supports two profiles: <a href="#visualization">visualization</a> and <a href="#popups">popups</a>. Other profiles considered for future releases include labeling and feature filtering.</p><h3 id="visualization">Visualization</h3><p>In the visualization profile, Arcade allows you to calculate values for each feature in a <a href="../../api-reference/esri-layers-FeatureLayer.html">FeatureLayer</a> or <a href="../../api-reference/esri-layers-SceneLayer.html">SceneLayer</a> at runtime and use those values as the basis for a data-driven visualization. This is an alternative approach to creating data-driven visualizations based on a single field value in the layer. To accomplish this, an Arcade expression may be passed to the <code>valueExpression</code> property in <a href="../../api-reference/esri-renderers-ClassBreaksRenderer.html#valueExpression">ClassBreaksRenderer</a>, <a href="../../api-reference/esri-renderers-UniqueValueRenderer.html#valueExpression">UniqueValueRenderer</a> or any of the visual variables: <a href="../../api-reference/esri-renderers-Renderer.html#ColorVisualVariable">color</a>, <a href="../../api-reference/esri-renderers-Renderer.html#SizeVisualVariable">size</a>, <a href="../../api-reference/esri-renderers-Renderer.html#OpacityVisualVariable">opacity</a>, and <a href="../../api-reference/esri-renderers-Renderer.html#RotationVisualVariable">rotation</a> instead of referencing a <code>field</code>/<code>normalizationField</code> or a JavaScript function.</p><div class="esri-md panel trailer-1"><p>Arcade supports creating visualizations for <a href="../../api-reference/esri-layers-FeatureLayer.html">FeatureLayer</a> and <a href="../../api-reference/esri-layers-SceneLayer.html">SceneLayer</a> only.</p><p>Other layer types that accept <a href="../../api-reference/esri-renderers-ClassBreaksRenderer.html">ClassBreaksRenderer</a> and <a href="../../api-reference/esri-renderers-UniqueValueRenderer.html">UniqueValueRenderer</a>, such as <a href="../../api-reference/esri-layers-MapImageLayer.html">MapImageLayer</a>, do not support Arcade.</p></div><p>When used in a ClassBreaksRenderer or any of the visual variables, the expression must evaluate to a number. Expressions may evaluate to either strings or numbers in UniqueValueRenderer.</p><p>In the example below, an Arcade expression is used in the <a href="../../api-reference/esri-renderers-UniqueValueRenderer.html#valueExpression">valueExpression</a> property of a UniqueValueRenderer. In this case, we are creating a visualization for a FeatureLayer representing U.S. counties. The service has three fields that identify the number of republicans, democrats, and independent/non-party voters in each county. We would like to visualize each county based on which party outnumbers the others. Since the service does not contain a field indicating the predominant party, we can write an Arcade expression to identify that for each feature.</p><p>First, write the Arcade expression in a script tag with a unique ID.</p><pre><code class="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/plain"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"winning-party"</span>&gt;</span><span class="actionscript">
  <span class="hljs-comment">// Write the expression and reference the value</span>
  <span class="hljs-comment">// of each field with a meaningful variable name within</span>
  <span class="hljs-comment">// the expression. Then calculate the max number with</span>
  <span class="hljs-comment">// the Max() function and use Decode() to return a string</span>
  <span class="hljs-comment">// value representing the party whose field value matches</span>
  <span class="hljs-comment">// the max value.</span>

  <span class="hljs-keyword">var</span> republican = $feature.MP06025a_B;
  <span class="hljs-keyword">var</span> democrat = $feature.MP06024a_B;
  <span class="hljs-keyword">var</span> independent = $feature.MP06026a_B;
  <span class="hljs-keyword">var</span> parties = [republican, democrat, independent];
  <span class="hljs-comment">// Decode() and Max() are built-in Arcade functions</span>
  <span class="hljs-keyword">return</span> Decode( Max(parties),
    republican, <span class="hljs-string">'republican'</span>,
    democrat, <span class="hljs-string">'democrat'</span>,
    independent, <span class="hljs-string">'independent'</span>,
    <span class="hljs-string">'n/a'</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><p>Then reference the script as a string value using <code>document.getElementById()</code> within the appropriate <code>valueExpression</code> property in the JavaScript.</p><pre><code class="js"><span class="hljs-comment">// Assign the expression to the `valueExpression` property and</span>
<span class="hljs-comment">// set up the unique value infos based on the decode values</span>
<span class="hljs-comment">// you set up in the expression.</span>

<span class="hljs-keyword">var</span> winnerArcade = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"winning-party"</span>).text;

<span class="hljs-keyword">var</span> renderer = <span class="hljs-keyword">new</span> UniqueValueRenderer({
  <span class="hljs-attr">valueExpression</span>: winnerArcade,
  <span class="hljs-attr">valueExpressionTitle</span>: <span class="hljs-string">"Counties by dominant party among registered voters"</span>,
  <span class="hljs-attr">uniqueValueInfos</span>: [{
    <span class="hljs-attr">value</span>: <span class="hljs-string">"democrat"</span>,
    <span class="hljs-attr">symbol</span>: createSymbol(<span class="hljs-string">"#00c3ff"</span>),
    <span class="hljs-attr">label</span>: <span class="hljs-string">"Democrat"</span>
  }, {
    <span class="hljs-attr">value</span>: <span class="hljs-string">"republican"</span>,
    <span class="hljs-attr">symbol</span>: createSymbol(<span class="hljs-string">"#ff002e"</span>),
    <span class="hljs-attr">label</span>: <span class="hljs-string">"Republican"</span>
  }, {
    <span class="hljs-attr">value</span>: <span class="hljs-string">"independent"</span>,
    <span class="hljs-attr">symbol</span>: createSymbol(<span class="hljs-string">"#faff00"</span>),
    <span class="hljs-attr">label</span>: <span class="hljs-string">"Independent/non-affiliated"</span>
  }]
});
</code></pre><p>You can also add an opacity visual variable to the renderer to visualize the relative strength of the predominant party in each county. Counties where more people come from a single party will be drawn with high opacity, while those where the proportion of people from each party are relatively equal will be drawn with low opacity.</p><p>First, write the expression in a <code>&lt;script&gt;</code> tag.</p><pre><code class="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/plain"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"strength"</span>&gt;</span><span class="actionscript">
  <span class="hljs-comment">// Write the expression and reference the value</span>
  <span class="hljs-comment">// of each field with a meaningful variable name within</span>
  <span class="hljs-comment">// the expression. Then calculate the max number with</span>
  <span class="hljs-comment">// the Max() function and the total using Sum().</span>
  <span class="hljs-comment">// Calculate the share of the max population within the</span>
  <span class="hljs-comment">// county. This value will be between 33 - 100 and will</span>
  <span class="hljs-comment">// be used to determine the feature's opacity.</span>
  <span class="hljs-comment">// Note the value is explicitly returned; it could also</span>
  <span class="hljs-comment">// be implicitly returned like the previous example</span>

  <span class="hljs-keyword">var</span> republican = $feature.MP06025a_B;
  <span class="hljs-keyword">var</span> democrat = $feature.MP06024a_B;
  <span class="hljs-keyword">var</span> independent = $feature.MP06026a_B;
  <span class="hljs-keyword">var</span> parties = [republican, democrat, independent];
  <span class="hljs-keyword">var</span> total = Sum(parties);
  <span class="hljs-keyword">var</span> max = Max(parties);

  <span class="hljs-keyword">return</span> (max / total) * <span class="hljs-number">100</span>;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><p>Then reference it in JavaScript as a string value.</p><pre><code class="js"><span class="hljs-comment">// Assign the expression to the `valueExpression` property and</span>
<span class="hljs-comment">// set up the unique value infos based on the decode values</span>
<span class="hljs-comment">// you set up in the expression.</span>

<span class="hljs-keyword">var</span> strengthArcade = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"strength"</span>).text;

<span class="hljs-keyword">var</span> opacityVV = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">"opacity"</span>,
  <span class="hljs-attr">valueExpression</span>: strengthArcade,
  <span class="hljs-attr">stops</span>: [
    { <span class="hljs-attr">value</span>: <span class="hljs-number">33</span>, <span class="hljs-attr">opacity</span>: <span class="hljs-number">0.1</span> },
    { <span class="hljs-attr">value</span>: <span class="hljs-number">50</span>, <span class="hljs-attr">opacity</span>: <span class="hljs-number">1.0</span> }
  ]
};

<span class="hljs-comment">// Add the visual variable to the renderer</span>

renderer.visualVariables = [ opacityVV ];
</code></pre><p>Note that if Arcade expressions are set on a layer's renderer <strong>after</strong> it loads, the fields referenced in the expression must be manually included in the layer's <a href="../../api-reference/esri-layers-FeatureLayer.html#outFields">outFields</a>. However, if a renderer uses an Arcade expression and is set within a layer's constructor, then the fields referenced in the expression are automatically included in a layer's <a href="../../api-reference/esri-layers-FeatureLayer.html#outFields">outFields</a>.</p><p>View the <a href="../../sample-code/visualization-arcade/index.html">Create a custom visualization using Arcade</a> sample to see this example in context.</p><h3 id="popups">Popups</h3><p>Arcade expressions can also be referenced within the <a href="../../api-reference/esri-PopupTemplate.html#content">content</a> of a <a href="../../api-reference/esri-PopupTemplate.html">PopupTemplate</a>. Similar to the <a href="#visualization">visualization</a> profile, this is useful for situations when you want to display data that isn't present as an attribute value in your <a href="../../api-reference/esri-layers-FeatureLayer.html">FeatureLayer</a> instance.</p><p>For example, the <a href="../../sample-code/popuptemplate-arcade/index.html">Reference Arcade expressions in PopupTemplate</a> sample displays a layer containing labor statistics for each U.S. county. Some attributes include unemployment rate, population, and the number of people participating in the labor force. It does not have an attribute for labor force participation rate. We can use Arcade to calculate that for us at runtime.</p><pre><code class="js"><span class="hljs-comment">// labor force participation rate</span>
Round(($feature.CIVLBFR_CY / $feature.POP_16UP)*<span class="hljs-number">100</span>,<span class="hljs-number">2</span>)
</code></pre><p>The values returned from this expression can be used to visualize the layer and/or displayed in the layer's <a href="../../api-reference/esri-layers-FeatureLayer.html#popupTemplate">popupTemplate</a>. To view the value in the popup, we must reference it in the <a href="../../api-reference/esri-PopupTemplate.html#expressionInfos">expressionInfos</a> property of the PopupTemplate and assign it a <code>name</code> and a <code>title</code>.</p><pre><code class="js">layer.popupTemplate = {
  <span class="hljs-attr">expressionInfos</span>: [{
    <span class="hljs-attr">name</span>: <span class="hljs-string">"participation-rate"</span>,
    <span class="hljs-attr">title</span>: <span class="hljs-string">"% of population 16+ participating in the labor force"</span>,
    <span class="hljs-attr">expression</span>: <span class="hljs-string">"Round(($feature.CIVLBFR_CY / $feature.POP_16UP)*100,2)"</span>
  }],
  <span class="hljs-attr">content</span>: <span class="hljs-string">"In {NAME} county, {expression/participation-rate}% of the population"</span>
    + <span class="hljs-string">" participates in the labor force."</span>
};
</code></pre><p>Notice that once the expression exists in the <code>expressionInfos</code> property, you can reference the value returned from the expression using the <code>{expession/expression-name}</code> placeholder template within the content of the PopupTemplate. The Popup's content would display the following after the user clicked a feature representing Greenlee, AZ:</p><p><img src="../../assets/img/guide/arcade/arcade-popup-text.png" alt="arcade-popup-text"></p><p>You can also reference values returned from Arcade expressions inside the <a href="../../api-reference/esri-PopupTemplate.html#fieldInfos">fieldInfos</a> property of the PopupTemplate's <code>content</code> so they can be displayed in tabular format. Just reference the name of the expression in the <code>fieldName</code> property of the object. Remember to use the <code>expression/expression-name</code> syntax.</p><pre><code class="js">layer.popupTemplate = {
  <span class="hljs-attr">expressionInfos</span>: [{
    <span class="hljs-attr">name</span>: <span class="hljs-string">"participation-rate"</span>,
    <span class="hljs-attr">title</span>: <span class="hljs-string">"% of population 16+ participating in the labor force"</span>,
    <span class="hljs-attr">expression</span>: <span class="hljs-string">"Round(($feature.CIVLBFR_CY / $feature.POP_16UP)*100,2)"</span>
  }],
  <span class="hljs-attr">content</span>: [{
    <span class="hljs-attr">type</span>: <span class="hljs-string">"fields"</span>,
    <span class="hljs-attr">fieldInfos</span>: [{
      <span class="hljs-attr">fieldName</span>: <span class="hljs-string">"expression/participation-rate"</span>
    }]
  }]
};
</code></pre><p>The popup will display the following:</p><p><img src="../../assets/img/guide/arcade/arcade-popup-table.png" alt="arcade-popup-table"></p><p>Note that you can also take advantage of the formatting options of the PopupTemplate's <a href="../../api-reference/esri-PopupTemplate.html#fieldInfos">fieldInfos</a> property to format numbers returned from expressions.</p><p>View the <a href="../../sample-code/popuptemplate-arcade/index.html">Reference Arcade expressions in PopupTemplate</a> sample to see this workflow in the context of a live sample application.</p></main></div><div class="footnote feedback right trailer-1"><a class="icon-ui-contact js-feedback" href="mailto:js_feedback@esri.com?subject=Feedback%20on%204.4%20-%20guide:%20Arcade&body=Hello,%0A%0AI%20was%20reading%20the%20ArcGIS%20API%20for%20JavaScript%20version%204.4%20documentation%20and%20have%20some%20feedback.%0A%0ADocumentation%20details:%0APage%20title:%20%7BREPLACE_TITLE%7D%0APage%20URL:%20%7BREPLACE_URL%7D%0A%0A">Feedback on this topic?</a></div></div></div><footer class="footer leader- link-dark-gray" role="contentinfo"><div class="grid-container"><nav class="column-6"><h6>ArcGIS for Developers</h6><ul class="list-plain"><li><a href="/">Home</a></li><li><a href="/features/">Features</a></li><li><a href="/documentation/">Documentation</a></li><li><a href="/support/">Support</a></li><li><a href="/pricing/">Pricing</a></li><li><a href="/startups/">Startups</a></li><li><a href="https://blogs.esri.com/esri/arcgis/category/developer/">Blog</a></li></ul></nav><nav class="column-6"><h6>ArcGIS Platform</h6><ul class="list-plain"><li><a href="http://arcgis.com">ArcGIS Online</a></li><li><a href="http://desktop.arcgis.com">ArcGIS Desktop</a></li><li><a href="http://server.arcgis.com">ArcGIS Enterprise</a></li><li><a href="http://developers.arcgis.com">ArcGIS for Developers</a></li><li><a href="http://solutions.arcgis.com">ArcGIS Solutions</a></li><li><a href="http://marketplace.arcgis.com">ArcGIS Marketplace</a></li></ul></nav><nav class="column-6"><h6>About Esri</h6><ul class="list-plain"><li><a href="http://www.esri.com/about-esri/">About Us</a></li><li><a href="http://www.esri.com/careers/">Careers</a></li><li><a href="https://blogs.esri.com/esri/esri-insider/">Insiders Blog</a></li><li><a href="http://www.esri.com/events/user-conference/index.html">User Conference</a></li><li><a href="http://www.esri.com/events/devsummit/index.html">Developer Summit</a></li></ul></nav><nav class="column-6"><a class="esri-logo" href="http://esri.com" aria-label="Esri Home"></a><div class="footer-social-nav leader-1"><a class="icon-social-twitter" aria-label="Esri on Twitter" href="https://twitter.com/Esri/"></a> <a class="icon-social-facebook" aria-label="Esri on Facebook" href="https://www.facebook.com/esrigis/"></a> <a class="icon-social-github" aria-label="Esri on GitHub" href="http://esri.github.com/"></a> <a class="icon-social-contact" aria-label="Contact Esri" href="http://www.esri.com/about-esri/contact/"></a></div></nav><div class="column-24 leader-1"><p><small><a href="http://www.esri.com/legal/copyright-trademarks">Copyright © 2017 Esri</a>. All rights reserved. | <a href="http://www.esri.com/legal/privacy">Privacy</a> | <a href="http://www.esri.com/legal/software-license">Terms of use</a> | <a href="/terms/">Plain English</a> | <a href="/terms/faq/">FAQ</a></small></p></div></div></footer><script></script><script src="../../assets/js/config.js"></script><script src="../../assets/js/preparse.js"></script><script src="../../assets/js/libs/FileSaver.js"></script><script src="../../assets/js/libs/url-search-params.js"></script><script src="../../assets/js/calcite-web.js"></script><script src="../../assets/js/calcite-web-extend.js"></script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-NJGGV5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJGGV5');</script><script type="text/javascript">if (_satellite && _satellite.pageBottom) { _satellite.pageBottom(); }</script><script type="text/javascript" src="https://go.pardot.com/dcjs/82202/1182/dc.js"></script></body></html>