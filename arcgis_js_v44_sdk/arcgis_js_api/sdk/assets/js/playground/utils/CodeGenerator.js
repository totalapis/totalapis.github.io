/*! ArcGIS API for JavaScript 4.4 | Copyright (c) 2017 Esri. All rights reserved. | http://www.esri.com/legal/privacy | https://developers.arcgis.com/terms/faq */
define(["esri-playground-js/utils/ASTClasses"],function(e){function r(t,n){var s,p=t.type;if("Number"===p)return s=n>=0?e.getLiteral(Number(n)):o(Number(n));if("Boolean"===p)return s=e.getLiteral(n);if("String"===p)return s=t.options&&"constants"===t.options.type?i(t.options.className,n,!1):e.getLiteral(n);if("Color"===p){var f=e.getArrayExpression();return n.forEach(function(r){var t=e.getLiteral(r);f.elements.push(t)}),f}if("Object"===p){var u=e.getObjectExpression();if(n instanceof Object){var c=t.config,g=c?c.properties:t.properties;g.forEach(function(t){var i=t.name;if(null!=n[i]){var a=r(t,n[i]);if(a){var o=e.getProperty(e.getIdentifier(i),a);u.properties.push(o)}}})}return u.properties.length&&u}if("Array"===p){var f=e.getArrayExpression();return n.forEach(function(e,n){var i=r(t.properties[n],e);f.elements.push(i)}),f}if("Class"===p){s=a(t.className||t.name);var g=t.config.properties,u=e.getObjectExpression();return n instanceof Object&&g.forEach(function(t){var i=t.name;if(null!=n[i]){var a=r(t,n[i]);if(a){var o=e.getProperty(e.getIdentifier(i),a);u.properties.push(o)}}}),u.properties.length&&s.arguments.push(u),s}}function t(e){if(Array.isArray(e))return!e.length;var r=!0;for(var n in e)e.hasOwnProperty(n)&&"_watchCallbacks"!==n&&"className"!==n&&(e[n]instanceof Object?r=t(e[n]):null!=e[n]&&(r=!1));return r}var n=function(r,t){var n=e.getVariableDeclaration(e.Kind.VAR),i=e.getVariableDeclarator(),a=e.getNewExpression();return a.callee=e.getIdentifier(r),i.id=e.getIdentifier(t),i.init=a,n.declarations.push(i),n},i=function(r,t,n){var i=e.getMemberExpression(),a=e.getIdentifier(r),o=e.getIdentifier(t);return i.object=a,i.property=o,i.computed=n,i},a=function(r){var t=e.getNewExpression(),n=e.getIdentifier(r);return t.callee=n,t},o=function(r){var t=e.getUnaryExpression("-",!0),n=e.getLiteral(Math.abs(r));return t.argument=n,t},s={},p=function(r,t){var i=e.getProgram();return i.body.push(n(r,t)),i},f=function(n){if(n.ast){var i=n.ast,a=n.config,o=n.statefulObject,s=i.body[0].declarations[0].init.arguments=[];return a.properties.forEach(function(n){var i,a=n.name,p=o[a];null==p||p instanceof Object&&t(p)||(0===s.length&&s.push(e.getObjectExpression()),i=e.getProperty(e.getIdentifier(a),r(n,p)),s[0].properties.push(i))}),i}},u=function(e,r,t){if(e.className!==r)for(var n=0;n<e.properties.length;n++){var i=e.properties[n];if(r===i.name)return i;if("Class"===i.type&&i.className===r){if(u(i.config,r,t))return i}else if("Array"===i.type)for(var a=0;a<i.properties.length;a++){var o=i.properties[a];if(u(o.config,r,t))return i}}else for(var a=0;a<e.properties.length;a++){var o=e.properties[a];if(o.name===t)return o}return!1},c=function(e){return escodegen.generate(e,{format:{quotes:"double",compact:!0}})};return s.getAST=p,s.constructAST=f,s.getProperty=u,s.generateCode=c,s});