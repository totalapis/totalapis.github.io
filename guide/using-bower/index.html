<!DOCTYPE html><html><head><meta charset="utf-8"><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="content-language" content="en"><meta name="last-modified" content="Sat Jun 17 2017 13:40:13 GMT-0700 (Pacific Daylight Time)"><meta name="product" content="js-api-arcgis"><meta name="version" content="4.x"><meta name="subject" content="DEVELOPER,WEB,WEB APPLICATIONS,MOBILE"><meta name="subject_label" content="DEVELOPER,WEB,WEB APPLICATIONS,MOBILE"><meta name="sub_category" content="JavaScript API"><meta name="sub_category_label" content="ArcGIS API for JavaScript"><meta name="content_type" content="Guide"><meta name="content_type_label" content="Guide"><meta name="search-collection" content="help"><meta name="search-category" content="help-api,help-api-guide"><title>Using Bower for Custom Builds | ArcGIS API for JavaScript 4.4</title><link rel="shortcut icon" href="../../assets/img/favicon.ico"><link rel="stylesheet" href="../../assets/css/default.css"><script src="https://assets.adobedtm.com/2e9cd01e19dc5ac4867e752f17a2f1ea1923e5af/satelliteLib-0ed1001fd441a838aefe8e755be42aaafddcc46b.js"></script></head><body><developers-account-notifications></developers-account-notifications><div class="wrapper"><header class="top-nav top-nav-hover-top"><div class="grid-container"><div class="column-24 tablet-show"><div class="dropdown js-dropdown left"><a href="#" class="icon-ui-menu top-nav-title js-drawer-toggle top-nav-title-tablet" data-drawer="top-nav">ArcGIS API for JavaScript</a></div></div><div class="column-24 leader-1 trailer-1 tablet-leader-0">Go to <a href="https://developers.arcgis.com/javascript/">Latest version (official documentation)</a></div></div></header><header class="sub-nav sub-nav-purple"><div class="grid-container"><nav class="breadcrumbs breadcrumbs-white clearfix padding-leader-1"><a href="/web-api/" class="crumb">ArcGIS Web API</a> <a href="../.." class="crumb">JavaScript API</a> <a href="../.." class="crumb">4.4</a> <a href="../../guide/index.html" class="crumb">Guide</a></nav><h1 class="sub-nav-title text-white leader-1">ArcGIS API for JavaScript</h1><nav class="sub-nav-list leader-0 tablet-hide"><a class="sub-nav-link" href="../../index.html">Home</a> <a class="sub-nav-link is-active" href="../../guide/index.html">Guide</a> <a class="sub-nav-link" href="../../api-reference/index.html">API Reference</a> <a class="sub-nav-link" href="../../sample-code/index.html">Sample Code</a> <a class="sub-nav-link sub-nav-link-external icon-ui-link-external" href="https://geonet.esri.com/community/developers/web-developers/arcgis-api-for-javascript">Forum</a></nav><select class="select-full trailer-half tablet-show js-select-nav"><option value="../../index.html">Home</option><option selected="selected" value="../../guide/index.html">Guide</option><option value="../../api-reference/index.html">API Reference</option><option value="../../sample-code/index.html">Sample Code</option><option value="https://geonet.esri.com/community/developers/web-developers/arcgis-api-for-javascript">Forum</option></select></div></header><div id="skip-to-content"><div class="grid-container leader-1"><div class="column-6 trailer-2 tablet-hide"><aside class="accordion side-nav column-6 js-accordion guide"><div class="accordion-section"><h4 class="accordion-title">Get Started</h4><nav class="accordion-content"><a href="../../guide/index.html" class="side-nav-link">Overview</a></nav><nav class="accordion-content"><a href="../../guide/release-notes/index.html" class="side-nav-link">Release notes</a></nav><nav class="accordion-content"><a href="../../guide/system-requirements/index.html" class="side-nav-link">System requirements</a></nav><nav class="accordion-content"><a href="../../guide/faq/index.html" class="side-nav-link">FAQ</a></nav><nav class="accordion-content"><a href="../../guide/community/index.html" class="side-nav-link">Community</a></nav></div><div class="accordion-section is-active"><h4 class="accordion-title">Working with the API</h4><nav class="accordion-content"><a href="../../guide/discover/index.html" class="side-nav-link">Discover 4.x</a></nav><nav class="accordion-content"><a href="../../guide/working-with-props/index.html" class="side-nav-link">Properties</a></nav><nav class="accordion-content"><a href="../../guide/working-with-promises/index.html" class="side-nav-link">Promises</a></nav><nav class="accordion-content"><a href="../../guide/autocasting/index.html" class="side-nav-link">Autocasting</a></nav><nav class="accordion-content"><a href="../../guide/loadable/index.html" class="side-nav-link">Loadable</a></nav><nav class="accordion-content"><a href="../../guide/cors/index.html" class="side-nav-link">CORS</a></nav><nav class="accordion-content"><a href="../../guide/proxies/index.html" class="side-nav-link">Proxy pages</a></nav><nav class="accordion-content"><a href="../../guide/arcade/index.html" class="side-nav-link">Arcade</a></nav><nav class="accordion-content"><a href="../../guide/using-fromjson/index.html" class="side-nav-link">Using fromJSON()</a></nav><nav class="accordion-content"><a href="../../guide/localization/index.html" class="side-nav-link">Localization</a></nav><nav class="accordion-content"><a href="../../guide/get-api/index.html" class="side-nav-link">Get the API</a></nav><nav class="accordion-content"><a href="../../guide/view-ui/index.html" class="side-nav-link">View UI</a></nav><nav class="accordion-content"><a href="../../guide/styling/index.html" class="side-nav-link">Styling</a></nav><nav class="accordion-content"><a href="../../guide/get-started-visualization/index.html" class="side-nav-link">Visualization Overview</a></nav><nav class="accordion-content"><a href="../../guide/creating-visualizations-manually/index.html" class="side-nav-link">Creating visualizations manually</a></nav><nav class="accordion-content"><a href="../../guide/visualizing-points-3d/index.html" class="side-nav-link">Visualizing points with 3D symbols</a></nav><nav class="accordion-content"><a href="../../guide/esri-web-style-symbols/index.html" class="side-nav-link">Esri Web Style Symbols</a></nav><nav class="accordion-content"><a href="../../guide/get-started-workflows/index.html" class="side-nav-link">Get started with workflows</a></nav><nav class="accordion-content"><a href="../../guide/typescript-setup/index.html" class="side-nav-link">TypeScript Setup</a></nav><nav class="accordion-content"><a href="../../guide/implementing-accessor/index.html" class="side-nav-link">Implementing Accessor</a></nav><nav class="accordion-content"><a href="../../guide/custom-widget/index.html" class="side-nav-link">Widget Development</a></nav><nav class="accordion-content"><a href="../../guide/esri-icon-font/index.html" class="side-nav-link">Esri Icon Font</a></nav><nav class="accordion-content"><a href="../../guide/using-bower/index.html" class="side-nav-link is-active">Using Bower</a></nav><nav class="accordion-content"><a href="../../guide/using-frameworks/index.html" class="side-nav-link">Using Frameworks</a></nav><nav class="accordion-content"><a href="../../guide/using-phonegap/index.html" class="side-nav-link">Using PhoneGap</a></nav></div><div class="accordion-section"><h4 class="accordion-title">Migrating from 3.x</h4><nav class="accordion-content"><a href="../../guide/choose-version/index.html" class="side-nav-link">Choose a version</a></nav><nav class="accordion-content"><a href="../../guide/migrating/index.html" class="side-nav-link">Migrating from 3.x to 4.4</a></nav><nav class="accordion-content"><a href="../../guide/functionality-matrix/index.html" class="side-nav-link">3.x to 4.x functionality matrix</a></nav></div></aside><div class="column-6 js-sticky scroll-show tablet-hide" data-top="46"><a href="#" class="btn btn-fill btn-clear">Back to Top</a></div></div><div class="column-24 trailer-1 tablet-show"><select class="select-full trailer-half js-select-nav"><optgroup label="Get Started"><option value="../../guide/index.html">Overview</option><option value="../../guide/release-notes/index.html">Release notes</option><option value="../../guide/system-requirements/index.html">System requirements</option><option value="../../guide/faq/index.html">FAQ</option><option value="../../guide/community/index.html">Community</option></optgroup><optgroup label="Working with the API"><option value="../../guide/discover/index.html">Discover 4.x</option><option value="../../guide/working-with-props/index.html">Properties</option><option value="../../guide/working-with-promises/index.html">Promises</option><option value="../../guide/autocasting/index.html">Autocasting</option><option value="../../guide/loadable/index.html">Loadable</option><option value="../../guide/cors/index.html">CORS</option><option value="../../guide/proxies/index.html">Proxy pages</option><option value="../../guide/arcade/index.html">Arcade</option><option value="../../guide/using-fromjson/index.html">Using fromJSON()</option><option value="../../guide/localization/index.html">Localization</option><option value="../../guide/get-api/index.html">Get the API</option><option value="../../guide/view-ui/index.html">View UI</option><option value="../../guide/styling/index.html">Styling</option><option value="../../guide/get-started-visualization/index.html">Visualization Overview</option><option value="../../guide/creating-visualizations-manually/index.html">Creating visualizations manually</option><option value="../../guide/visualizing-points-3d/index.html">Visualizing points with 3D symbols</option><option value="../../guide/esri-web-style-symbols/index.html">Esri Web Style Symbols</option><option value="../../guide/get-started-workflows/index.html">Get started with workflows</option><option value="../../guide/typescript-setup/index.html">TypeScript Setup</option><option value="../../guide/implementing-accessor/index.html">Implementing Accessor</option><option value="../../guide/custom-widget/index.html">Widget Development</option><option value="../../guide/esri-icon-font/index.html">Esri Icon Font</option><option value="../../guide/using-bower/index.html" selected="selected">Using Bower</option><option value="../../guide/using-frameworks/index.html">Using Frameworks</option><option value="../../guide/using-phonegap/index.html">Using PhoneGap</option></optgroup><optgroup label="Migrating from 3.x"><option value="../../guide/choose-version/index.html">Choose a version</option><option value="../../guide/migrating/index.html">Migrating from 3.x to 4.4</option><option value="../../guide/functionality-matrix/index.html">3.x to 4.x functionality matrix</option></optgroup></select></div><main class="column-17 tablet-column-12 pre-1 content-face"><h1 id="using-bower-for-custom-builds">Using Bower for Custom Builds</h1><p>Using <a href="http://bower.io/">Bower</a> (A package manager for the front-end web development) is another option for developers of the JavaScript API to generate custom builds of the ArcGIS API for JavaScript. You would use the Bower download of the ArcGIS API for JavaScript if you wanted to create local builds of your application. This is similar to what you can do with the JavaScript Optimizer but locally.</p><div class="panel is-active trailer-1"><span class="icon icon-ui-notice-triangle"><strong>Note</strong></span>: See the <a href="#prereq">prerequisites</a> section on configuring your system before proceeding. If you system is already configured with Git, Node.js, Grunt.js, Bower and Java you may proceed to the <a href="#get-started">Getting Started</a> section.</div><ul><li><a href="#prereq">Prerequisites</a></li><li><a href="#get-started">Getting started</a></li><li><a href="#usage">Understanding Bower and npm</a><ul><li><a href="#understanding-bower">Bower</a></li><li><a href="#understanding-npm">Npm</a></li></ul></li><li><a href="#build-dojo">Generate a custom build (Dojo)</a></li><li><a href="#build-requirejs">Generate a custom build (RequireJS)</a></li></ul><p><a name="prereq"></a></p><h2 id="prerequisites">Prerequisites</h2><ol><li><a href="https://nodejs.org/en">Node.js</a> (includes npm, the node package manager)</li><li><a href="http://www.git-scm.com">git</a></li><li><a href="http://gruntjs.com/getting-started">Grunt</a> - The JavaScript Task Runner</li><li><a href="http://bower.io">Bower</a> - A package manager for the front-end web development</li><li><a href="https://java.com/en/download">Java 7 or greater</a> - required by <a href="https://github.com/google/closure-compiler">Closure Compiler</a> (Dojo build)</li></ol><p>To check if these are installed:</p><pre><code class="bash">node --version
git --version
grunt --version
bower --version
java -version
</code></pre><p><span class="icon icon-ui-description"><strong>Tip</strong></span>: if you have issues with <code>ssh</code> on your machine, which is common on Windows or due to firewall settings, you can tell git to use <code>https</code> over <code>ssh</code>.</p><pre><code class="bash">git config --global url.<span class="hljs-string">"https://github.com"</span>.insteadOf git://github.com
</code></pre><p><a name="get-started"></a></p><h2 id="getting-started">Getting Started</h2><p>Now that your system is configured, it is time to make a decision on whether you are going to use the <a href="https://dojotoolkit.org">Dojo Toolkit</a> or <a href="http://requirejs.org">RequireJS</a>.</p><div class="panel trailer-1"><span class="icon icon-ui-notice-triangle"><strong>Note</strong></span>: There are some limitations in choosing the RequireJS AMD loader over the Dojo AMD loader. The RequireJS loader is missing some methods that might be required at runtime, one of which is a cross-domain loader. You can view the provided <a href="https://github.com/Esri/jsapi-resources/blob/master/4.x/bower/dojo/Gruntfile.js">Gruntfile</a> for information on some build limitations. These mainly have to do with limitations in how the <a href="https://github.com/jrburke/r.js">r.js optimizer</a> performs builds.</div><p>Clone the jsapi-resources repository (code below) to your local machine or <a href="https://github.com/Esri/jsapi-resources/archive/master.zip">download the repository</a> to your local machine.</p><pre><code class="bash">git <span class="hljs-built_in">clone</span> https://github.com/Esri/jsapi-resources.git
</code></pre><p><a name="usage"></a></p><h2 id="understanding-bower-and-npm">Understanding Bower and npm</h2><p><a name="understanding-bower"></a></p><h3 id="understanding-bower">Understanding Bower</h3><p><a href="http://bower.io">Bower</a> requires <a href="https://nodejs.org/en/about">Node.js</a> so they naturally work well together. In the <a href="#build-dojo">Generate a custom build (Dojo)</a> and <a href="#build-requirejs">Generate a custom build (RequireJS)</a> sections, you will be asked to issue a command <code>npm install</code>. You can read more about <a href="https://docs.npmjs.com/misc/scripts">npm-scripts</a>, but essentially this tells node to download any <code>dependencies</code> and/or <code>devDependencies</code> listed in the <code>package.json</code> file. See the <a href="https://github.com/Esri/jsapi-resources/blob/master/4.x/bower/dojo/package.json">package.json</a> file in the <a href="https://github.com/Esri/jsapi-resources/blob/master/4.x/bower/dojo">dojo</a> or <a href="https://github.com/Esri/jsapi-resources/blob/master/4.x/bower/requirejs">RequireJS</a> samples for more information.</p><p>The <a href="https://docs.npmjs.com/misc/scripts">npm-scripts</a> field in the <code>package.json</code> file is special in the fact that some of the named scripts such as <code>install</code> have the option to run special <code>pre</code> and <code>post</code> hooks. This is important because it allows you to perform operations before or after a given command. In our instance, we want to run the <code>bower install</code> command on our <code>preinstall</code> hook.</p><p>When using Bower, you can predefine what Bower packages you want to install via a file called <code>bower.json</code>. Take a look at the example below:</p><pre><code class="js">{
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"arcgis-js-api-sample-app"</span>,
  <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,
  <span class="hljs-string">"dependencies"</span>: {
    <span class="hljs-string">"esri"</span>: <span class="hljs-string">"arcgis-js-api#4.4.0"</span>
  },
  <span class="hljs-string">"resolutions"</span>: {
    <span class="hljs-string">"dojo"</span>: <span class="hljs-string">"v1.10.4/esri-3.14.0"</span>
  }
}
</code></pre><p>What this file is saying is that when you do <code>bower install</code> it will download version 4.4 of the ArcGIS API for JavaScript.</p><p>The default folder all Bower dependencies are downloaded to is called <code>bower_components</code>. Notice how we have a dependency called esri that is pointing the <code>arcgis-js-api</code> Bower package. This means it will name the folder <code>esri</code> that the Bower package is downloaded, so it will look like <code>bower_components/esri</code>.</p><p>The ArcGIS JS API package has some of its own predefined dependencies that will also be downloaded. This is why there is a resolution for the <code>dojo</code> dependency to use our version. You can see a list of the dependencies in the <a href="https://github.com/Esri/arcgis-js-api#requirements">README</a> for the Bower package. When everything is downloaded, you should have a folder structure that looks like this.</p><pre><code class="dos">bower_components
├── dgrid
├── dijit
├── dojo
├── dojox
├── dstore
├── esri
├── moment
└── util
</code></pre><p>When you develop your application, you can set up your <code>dojoConfig</code> to point to these folders.</p><pre><code class="js"><span class="hljs-keyword">var</span> dojoConfig = {
  <span class="hljs-attr">baseUrl</span>: <span class="hljs-string">'.'</span>,
  <span class="hljs-attr">packages</span>: [
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'dgrid'</span>,
      <span class="hljs-attr">location</span>: <span class="hljs-string">'bower_components/dgrid'</span>,
    },
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'dijit'</span>,
      <span class="hljs-attr">location</span>: <span class="hljs-string">'bower_components/dijit'</span>,
    },
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'dojo'</span>,
      <span class="hljs-attr">location</span>: <span class="hljs-string">'bower_components/dojo'</span>,
    },
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'dojox'</span>,
      <span class="hljs-attr">location</span>: <span class="hljs-string">'bower_components/dojox'</span>,
    },
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'dstore'</span>,
      <span class="hljs-attr">location</span>: <span class="hljs-string">'bower_components/dstore'</span>,
    },
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'esri'</span>,
      <span class="hljs-attr">location</span>: <span class="hljs-string">'bower_components/esri'</span>,
    }
  ]
};
</code></pre><p>Now you have full access to the ArcGIS API for JavaScript and its dependencies.</p><p>You could take this one step further and have the Bower packages installed into a different folder. Let's assume you are writing your application in a <code>src/app</code> folder. You can have the Bower packages downloaded into the <code>src</code> folder by default by creating a <code>.bowerrc</code> file in the root of your application that looks like this.</p><pre><code class="js">{
  <span class="hljs-string">"directory"</span>:<span class="hljs-string">"src/"</span>
}
</code></pre><p>When you do <code>bower install</code> it will download all the same packages into the <code>src</code> directory. This allows you to simplify your <code>dojoConfig</code> inside your <code>src</code> folder.</p><pre><code class="js"><span class="hljs-keyword">var</span> dojoConfig = {
  <span class="hljs-attr">baseUrl</span>: <span class="hljs-string">'.'</span>,
  <span class="hljs-attr">packages</span>: [
    <span class="hljs-string">'app'</span>,
    <span class="hljs-string">'dijit'</span>,
    <span class="hljs-string">'dojo'</span>,
    <span class="hljs-string">'dojox'</span>,
    <span class="hljs-string">'dstore'</span>,
    <span class="hljs-string">'dgrid'</span>,
    <span class="hljs-string">'esri'</span>
  ]
};
</code></pre><p>This will make it easier to do local custom builds of your application.</p><p><a name="understanding-npm"></a></p><h4 id="understanding-npm">Understanding npm</h4><p>Since Bower is run under the <code>preinstall</code> hook of the <a href="https://docs.npmjs.com/misc/scripts">npm-scripts</a> it precedes the <code>install</code> script. So when you issue the command <code>npm install</code>, <code>preinstall</code> runs first which is actually the command <code>bower install</code>. Then <code>npm install</code> runs looking for dependencies listed in the <code>package.json</code> file. Npm will then download and install any dependencies listed in the <code>dependencies</code> and/or <code>devDependencies</code> section in the <code>package.json</code> file. Finally, the <code>npm install</code> sequence is where <a href="http://gruntjs.com">Grunt</a> and the supporting plugins <a href="https://www.npmjs.com/package/grunt-contrib-clean">grunt-contrib-clean</a> and <a href="https://www.npmjs.com/package/grunt-contrib-copy">grunt-contrib-copy</a> are installed.</p><p>See the <code>package.json</code> file in the <a href="https://github.com/Esri/jsapi-resources/blob/master/4.x/bower/dojo/package.json">Dojo</a> or <a href="https://github.com/Esri/jsapi-resources/blob/master/4.x/bower/requirejs/package.json">RequireJS</a> samples for more information.</p><p><a name="build-dojo"></a></p><h2 id="generate-a-custom-build-dojo">Generate a custom build (Dojo)</h2><p>For both options (clone or download), you need to copy the source files from <code>https://github.com/Esri/jsapi-resources/tree/master/4.x/bower/dojo</code> to a new directory. In the following steps, we'll name the new directory <code>esrijs-bower-dojo</code>.</p><p>The contents of your directory should appear as follows:</p><pre><code class="bash">esrijs-bower-dojo
├── .bowerrc
├── Gruntfile.js
├── README.md
├── bower.json
├── build.profile.js
├── package.json
└── src
    ├── app
    │   ├── main.js
    │   ├── package.js
    │   └── package.json
    ├── built.html
    └── index.html
</code></pre><ol><li>Open a terminal window or shell command window</li><li>Change directory to <code>esrijs-bower-dojo</code><ul><li>In the terminal window run: <code>npm install</code></li><li>The first time this is run it may take a while</li><li>The <code>arcgis-js-api</code> will be downloaded by bower</li><li>Subsequent times when bower runs, the <code>arcgis-js-api</code> repository will be cached by bower and take less time to download</li><li><code>dependencies</code> and/or <code>devDependencies</code> will download via npm (Grunt plugins including <code>grunt-dojo</code>)</li></ul></li><li>In the terminal window type <code>npm run build</code> and press return</li><li>The command will run the dojo build system against the ArcGIS API for JavaScript library and your application</li><li><strong>Note</strong>: (This will delete the built application!). In the terminal window type <code>npm run clean</code> and press return to delete the built application</li></ol><h3 id="dojo-technical-details">Dojo technical details</h3><p>The <a href="https://dojotoolkit.org/reference-guide/1.10/build/buildSystem.html">Dojo build system</a> accepts a <a href="https://dojotoolkit.org/reference-guide/1.10/build/profiles.html">build configuration profile</a>. A <a href="https://github.com/Esri/jsapi-resources/blob/master/4.x/bower/dojo/build.profile.js">sample build profile</a> is available in the <a href="https://github.com/Esri/jsapi-resources/tree/master/4.x/bower/dojo">Bower dojo sample</a> in the <a href="https://github.com/Esri/jsapi-resources/tree/master/4.x">jsapi-resources</a> repository on GitHub. The key is to define your build packages, which you can learn more about in this <a href="https://dojotoolkit.org/documentation/tutorials/1.10/modules_advanced">AMD loader tutorial</a>. In addition to packages, you should understand what a layer file is, which is essentially a single file that is composed of many modules and their dependencies.</p><pre><code class="js">layers: {
  <span class="hljs-string">'dojo/dojo'</span>: {
    <span class="hljs-attr">include</span>: [
      <span class="hljs-string">'app/main'</span>, <span class="hljs-comment">// Your application entry point</span>
      <span class="hljs-string">'esri/widgets/Attribution'</span> <span class="hljs-comment">// a dynamically loaded module</span>
    ]
  }
}
</code></pre><p>This tells the Dojo build system to build the <code>dojo/dojo.js</code> file and to include other files into it. This will get you an optimized single-file that you can use to deploy your application. Please see the <a href="https://github.com/Esri/jsapi-resources/blob/master/4.x/bower/dojo/build.profile.js">sample build profile</a> for more details.</p><p><a name="build-requirejs"></a></p><h2 id="generate-a-custom-build-requirejs">Generate a custom build (RequireJS)</h2><p>For both options (clone or download), you need to copy the source files from <code>https://github.com/Esri/jsapi-resources/tree/master/4.x/bower/requirejs</code> to your <code>esrijs-bower-requirejs</code> directory.</p><p>The contents of your directory should appear as follows:</p><pre><code class="bash">esrijs-bower-requirejs
├── .bowerrc
├── Gruntfile.js
├── README.md
├── bower.json
├── package.json
└── src
    ├── app
    │   └── main.js
    ├── built.html
    └── index.html
</code></pre><ol><li>Open a terminal window or shell command window</li><li>Change directory to <code>esrijs-bower-requirejs</code></li><li>In the terminal window run: <code>npm install</code><ul><li>The first time this is run it may take a while</li><li>The <code>arcgis-js-api</code> will be downloaded by bower</li><li>Subsequent times when bower runs, the <code>arcgis-js-api</code> repository will be cached by bower and take less time to download</li><li><code>dependencies</code> and/or <code>devDependencies</code> will download via npm (Grunt plugins including <a href="https://www.npmjs.com/package/grunt-contrib-requirejs">grunt-contrib-requirejs</a> and <a href="https://www.npmjs.com/package/uglify-js">uglify-js</a></li></ul></li><li>In the terminal window type <code>npm run build</code> and press return</li><li>The command will run the requirejs build system against the ArcGIS API for JavaScript library and your application</li><li><strong>Note</strong>: (This will delete the built application!). In the terminal window type <code>npm run clean</code> and press return to delete the built application</li></ol><p><strong>RequireJS technical details:</strong> The RequireJS Optimizer has some limitations when trying to build some of the Esri and Dojo modules. What this means is that you can get pretty close to a single-file release; however, some modules will still need to be dynamically loaded.</p><p>Many of the issues related to using the RequireJS Optimizer have to do with how it handles loader plugins during the build process.</p><p>An example of a loader plugin is the <a href="http://dojotoolkit.org/reference-guide/1.10/dojo/has.html">dojo/has</a> plugin, that can do conditional loading of modules. The RequireJS Optimizer will attempt to execute these plugins as it sees them in a module.</p><p>However, the RequireJS Optimizer by default runs in a Node environment and does not have JavaScript host objects such as document that may be used by a loader plugin. The Dojo build tools work around this issue. You can setup the build configuration to work around most of these use cases. You would need to tell the RequireJS Optimizer to ignore modules that will cause an error with loader plugins.</p><pre><code class="js">paths: {
  <span class="hljs-string">'dojox/gfx'</span>: <span class="hljs-string">'empty'</span>
}
</code></pre><p>This is the syntax you would use to tell the RequireJS Optimizer to not load the module during the build process. Some Dojo plugins have RequireJS counterparts that can be swapped out during the build process, so you can do something like this.</p><pre><code class="js">paths: {
  <span class="hljs-string">'dojo/text'</span>: <span class="hljs-string">'text/text'</span>
}
</code></pre><p>This syntax tells the RequireJS Optimizer to load the <code>text/text</code> module in place of the <code>dojo/text</code> module allowing your build to complete.</p><p>Attempting to build many modules into a single file may require a little trial and error. Some modules will attempt to dynamically load modules when they are needed, which means they are not picked up by the build process. If you notice some files dynamically loaded after you do a build, you can try and force them into your built file.</p><pre><code class="js">include: [
  <span class="hljs-string">'esri/widgets/Attribution'</span>
]
</code></pre><p>This syntax will tell the RequireJS Optimizer to add this module and its dependencies to your output file. You can find more details in the RequireJS <a href="https://github.com/Esri/jsapi-resources/blob/master/4.x/bower/requirejs/Gruntfile.js">build configuration file</a>.</p></main></div><div class="footnote feedback right trailer-1"><a class="icon-ui-contact js-feedback" href="mailto:js_feedback@esri.com?subject=Feedback%20on%204.4%20-%20guide:%20Using%20Bower%20for%20Custom%20Builds&body=Hello,%0A%0AI%20was%20reading%20the%20ArcGIS%20API%20for%20JavaScript%20version%204.4%20documentation%20and%20have%20some%20feedback.%0A%0ADocumentation%20details:%0APage%20title:%20%7BREPLACE_TITLE%7D%0APage%20URL:%20%7BREPLACE_URL%7D%0A%0A">Feedback on this topic?</a></div></div></div><footer class="footer leader- link-dark-gray" role="contentinfo"><div class="grid-container"><nav class="column-6"><h6>ArcGIS for Developers</h6><ul class="list-plain"><li><a href="/">Home</a></li><li><a href="/features/">Features</a></li><li><a href="/documentation/">Documentation</a></li><li><a href="/support/">Support</a></li><li><a href="/pricing/">Pricing</a></li><li><a href="/startups/">Startups</a></li><li><a href="https://blogs.esri.com/esri/arcgis/category/developer/">Blog</a></li></ul></nav><nav class="column-6"><h6>ArcGIS Platform</h6><ul class="list-plain"><li><a href="http://arcgis.com">ArcGIS Online</a></li><li><a href="http://desktop.arcgis.com">ArcGIS Desktop</a></li><li><a href="http://server.arcgis.com">ArcGIS Enterprise</a></li><li><a href="http://developers.arcgis.com">ArcGIS for Developers</a></li><li><a href="http://solutions.arcgis.com">ArcGIS Solutions</a></li><li><a href="http://marketplace.arcgis.com">ArcGIS Marketplace</a></li></ul></nav><nav class="column-6"><h6>About Esri</h6><ul class="list-plain"><li><a href="http://www.esri.com/about-esri/">About Us</a></li><li><a href="http://www.esri.com/careers/">Careers</a></li><li><a href="https://blogs.esri.com/esri/esri-insider/">Insiders Blog</a></li><li><a href="http://www.esri.com/events/user-conference/index.html">User Conference</a></li><li><a href="http://www.esri.com/events/devsummit/index.html">Developer Summit</a></li></ul></nav><nav class="column-6"><a class="esri-logo" href="http://esri.com" aria-label="Esri Home"></a><div class="footer-social-nav leader-1"><a class="icon-social-twitter" aria-label="Esri on Twitter" href="https://twitter.com/Esri/"></a> <a class="icon-social-facebook" aria-label="Esri on Facebook" href="https://www.facebook.com/esrigis/"></a> <a class="icon-social-github" aria-label="Esri on GitHub" href="http://esri.github.com/"></a> <a class="icon-social-contact" aria-label="Contact Esri" href="http://www.esri.com/about-esri/contact/"></a></div></nav><div class="column-24 leader-1"><p><small><a href="http://www.esri.com/legal/copyright-trademarks">Copyright © 2017 Esri</a>. All rights reserved. | <a href="http://www.esri.com/legal/privacy">Privacy</a> | <a href="http://www.esri.com/legal/software-license">Terms of use</a> | <a href="/terms/">Plain English</a> | <a href="/terms/faq/">FAQ</a></small></p></div></div></footer><script></script><script src="../../assets/js/config.js"></script><script src="../../assets/js/preparse.js"></script><script src="../../assets/js/libs/FileSaver.js"></script><script src="../../assets/js/libs/url-search-params.js"></script><script src="../../assets/js/calcite-web.js"></script><script src="../../assets/js/calcite-web-extend.js"></script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-NJGGV5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJGGV5');</script><script type="text/javascript">if (_satellite && _satellite.pageBottom) { _satellite.pageBottom(); }</script><script type="text/javascript" src="https://go.pardot.com/dcjs/82202/1182/dc.js"></script></body></html>