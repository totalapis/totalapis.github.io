<!DOCTYPE html><html><head><meta charset="utf-8"><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="content-language" content="en"><meta name="last-modified" content="Mon Sep 19 2016 14:14:48 GMT-0700 (Pacific Daylight Time)"><meta name="product" content="js-api-arcgis"><meta name="version" content="4.x"><meta name="subject" content="DEVELOPER,WEB,WEB APPLICATIONS,MOBILE"><meta name="subject_label" content="DEVELOPER,WEB,WEB APPLICATIONS,MOBILE"><meta name="sub_category" content="JavaScript API"><meta name="sub_category_label" content="ArcGIS API for JavaScript"><meta name="content_type" content="Guide"><meta name="content_type_label" content="Guide"><meta name="search-collection" content="help"><meta name="search-category" content="help-api,help-api-guide"><title>Understanding the loadable pattern | ArcGIS API for JavaScript 4.4</title><link rel="shortcut icon" href="../../assets/img/favicon.ico"><link rel="stylesheet" href="../../assets/css/default.css"><script src="https://assets.adobedtm.com/2e9cd01e19dc5ac4867e752f17a2f1ea1923e5af/satelliteLib-0ed1001fd441a838aefe8e755be42aaafddcc46b.js"></script></head><body><developers-account-notifications></developers-account-notifications><div class="wrapper"><header class="top-nav top-nav-hover-top"><div class="grid-container"><div class="column-24 tablet-show"><div class="dropdown js-dropdown left"><a href="#" class="icon-ui-menu top-nav-title js-drawer-toggle top-nav-title-tablet" data-drawer="top-nav">ArcGIS API for JavaScript</a></div></div><div class="column-24 leader-1 trailer-1 tablet-leader-0">Go to <a href="https://developers.arcgis.com/javascript/">Latest version (official documentation)</a></div></div></header><header class="sub-nav sub-nav-purple"><div class="grid-container"><nav class="breadcrumbs breadcrumbs-white clearfix padding-leader-1"><a href="/web-api/" class="crumb">ArcGIS Web API</a> <a href="../.." class="crumb">JavaScript API</a> <a href="../.." class="crumb">4.4</a> <a href="../../guide/index.html" class="crumb">Guide</a></nav><h1 class="sub-nav-title text-white leader-1">ArcGIS API for JavaScript</h1><nav class="sub-nav-list leader-0 tablet-hide"><a class="sub-nav-link" href="../../index.html">Home</a> <a class="sub-nav-link is-active" href="../../guide/index.html">Guide</a> <a class="sub-nav-link" href="../../api-reference/index.html">API Reference</a> <a class="sub-nav-link" href="../../sample-code/index.html">Sample Code</a> <a class="sub-nav-link sub-nav-link-external icon-ui-link-external" href="https://geonet.esri.com/community/developers/web-developers/arcgis-api-for-javascript">Forum</a></nav><select class="select-full trailer-half tablet-show js-select-nav"><option value="../../index.html">Home</option><option selected="selected" value="../../guide/index.html">Guide</option><option value="../../api-reference/index.html">API Reference</option><option value="../../sample-code/index.html">Sample Code</option><option value="https://geonet.esri.com/community/developers/web-developers/arcgis-api-for-javascript">Forum</option></select></div></header><div id="skip-to-content"><div class="grid-container leader-1"><div class="column-6 trailer-2 tablet-hide"><aside class="accordion side-nav column-6 js-accordion guide"><div class="accordion-section"><h4 class="accordion-title">Get Started</h4><nav class="accordion-content"><a href="../../guide/index.html" class="side-nav-link">Overview</a></nav><nav class="accordion-content"><a href="../../guide/release-notes/index.html" class="side-nav-link">Release notes</a></nav><nav class="accordion-content"><a href="../../guide/system-requirements/index.html" class="side-nav-link">System requirements</a></nav><nav class="accordion-content"><a href="../../guide/faq/index.html" class="side-nav-link">FAQ</a></nav><nav class="accordion-content"><a href="../../guide/community/index.html" class="side-nav-link">Community</a></nav></div><div class="accordion-section is-active"><h4 class="accordion-title">Working with the API</h4><nav class="accordion-content"><a href="../../guide/discover/index.html" class="side-nav-link">Discover 4.x</a></nav><nav class="accordion-content"><a href="../../guide/working-with-props/index.html" class="side-nav-link">Properties</a></nav><nav class="accordion-content"><a href="../../guide/working-with-promises/index.html" class="side-nav-link">Promises</a></nav><nav class="accordion-content"><a href="../../guide/autocasting/index.html" class="side-nav-link">Autocasting</a></nav><nav class="accordion-content"><a href="../../guide/loadable/index.html" class="side-nav-link is-active">Loadable</a></nav><nav class="accordion-content"><a href="../../guide/cors/index.html" class="side-nav-link">CORS</a></nav><nav class="accordion-content"><a href="../../guide/proxies/index.html" class="side-nav-link">Proxy pages</a></nav><nav class="accordion-content"><a href="../../guide/arcade/index.html" class="side-nav-link">Arcade</a></nav><nav class="accordion-content"><a href="../../guide/using-fromjson/index.html" class="side-nav-link">Using fromJSON()</a></nav><nav class="accordion-content"><a href="../../guide/localization/index.html" class="side-nav-link">Localization</a></nav><nav class="accordion-content"><a href="../../guide/get-api/index.html" class="side-nav-link">Get the API</a></nav><nav class="accordion-content"><a href="../../guide/view-ui/index.html" class="side-nav-link">View UI</a></nav><nav class="accordion-content"><a href="../../guide/styling/index.html" class="side-nav-link">Styling</a></nav><nav class="accordion-content"><a href="../../guide/get-started-visualization/index.html" class="side-nav-link">Visualization Overview</a></nav><nav class="accordion-content"><a href="../../guide/creating-visualizations-manually/index.html" class="side-nav-link">Creating visualizations manually</a></nav><nav class="accordion-content"><a href="../../guide/visualizing-points-3d/index.html" class="side-nav-link">Visualizing points with 3D symbols</a></nav><nav class="accordion-content"><a href="../../guide/esri-web-style-symbols/index.html" class="side-nav-link">Esri Web Style Symbols</a></nav><nav class="accordion-content"><a href="../../guide/get-started-workflows/index.html" class="side-nav-link">Get started with workflows</a></nav><nav class="accordion-content"><a href="../../guide/typescript-setup/index.html" class="side-nav-link">TypeScript Setup</a></nav><nav class="accordion-content"><a href="../../guide/implementing-accessor/index.html" class="side-nav-link">Implementing Accessor</a></nav><nav class="accordion-content"><a href="../../guide/custom-widget/index.html" class="side-nav-link">Widget Development</a></nav><nav class="accordion-content"><a href="../../guide/esri-icon-font/index.html" class="side-nav-link">Esri Icon Font</a></nav><nav class="accordion-content"><a href="../../guide/using-bower/index.html" class="side-nav-link">Using Bower</a></nav><nav class="accordion-content"><a href="../../guide/using-frameworks/index.html" class="side-nav-link">Using Frameworks</a></nav><nav class="accordion-content"><a href="../../guide/using-phonegap/index.html" class="side-nav-link">Using PhoneGap</a></nav></div><div class="accordion-section"><h4 class="accordion-title">Migrating from 3.x</h4><nav class="accordion-content"><a href="../../guide/choose-version/index.html" class="side-nav-link">Choose a version</a></nav><nav class="accordion-content"><a href="../../guide/migrating/index.html" class="side-nav-link">Migrating from 3.x to 4.4</a></nav><nav class="accordion-content"><a href="../../guide/functionality-matrix/index.html" class="side-nav-link">3.x to 4.x functionality matrix</a></nav></div></aside><div class="column-6 js-sticky scroll-show tablet-hide" data-top="46"><a href="#" class="btn btn-fill btn-clear">Back to Top</a></div></div><div class="column-24 trailer-1 tablet-show"><select class="select-full trailer-half js-select-nav"><optgroup label="Get Started"><option value="../../guide/index.html">Overview</option><option value="../../guide/release-notes/index.html">Release notes</option><option value="../../guide/system-requirements/index.html">System requirements</option><option value="../../guide/faq/index.html">FAQ</option><option value="../../guide/community/index.html">Community</option></optgroup><optgroup label="Working with the API"><option value="../../guide/discover/index.html">Discover 4.x</option><option value="../../guide/working-with-props/index.html">Properties</option><option value="../../guide/working-with-promises/index.html">Promises</option><option value="../../guide/autocasting/index.html">Autocasting</option><option value="../../guide/loadable/index.html" selected="selected">Loadable</option><option value="../../guide/cors/index.html">CORS</option><option value="../../guide/proxies/index.html">Proxy pages</option><option value="../../guide/arcade/index.html">Arcade</option><option value="../../guide/using-fromjson/index.html">Using fromJSON()</option><option value="../../guide/localization/index.html">Localization</option><option value="../../guide/get-api/index.html">Get the API</option><option value="../../guide/view-ui/index.html">View UI</option><option value="../../guide/styling/index.html">Styling</option><option value="../../guide/get-started-visualization/index.html">Visualization Overview</option><option value="../../guide/creating-visualizations-manually/index.html">Creating visualizations manually</option><option value="../../guide/visualizing-points-3d/index.html">Visualizing points with 3D symbols</option><option value="../../guide/esri-web-style-symbols/index.html">Esri Web Style Symbols</option><option value="../../guide/get-started-workflows/index.html">Get started with workflows</option><option value="../../guide/typescript-setup/index.html">TypeScript Setup</option><option value="../../guide/implementing-accessor/index.html">Implementing Accessor</option><option value="../../guide/custom-widget/index.html">Widget Development</option><option value="../../guide/esri-icon-font/index.html">Esri Icon Font</option><option value="../../guide/using-bower/index.html">Using Bower</option><option value="../../guide/using-frameworks/index.html">Using Frameworks</option><option value="../../guide/using-phonegap/index.html">Using PhoneGap</option></optgroup><optgroup label="Migrating from 3.x"><option value="../../guide/choose-version/index.html">Choose a version</option><option value="../../guide/migrating/index.html">Migrating from 3.x to 4.4</option><option value="../../guide/functionality-matrix/index.html">3.x to 4.x functionality matrix</option></optgroup></select></div><main class="column-17 tablet-column-12 pre-1 content-face"><h1 id="understanding-the-loadable-pattern">Understanding the loadable pattern</h1><p></p><div class="table-of-contents"><ul><li><a href="#loadable-api">Loadable API</a><ul><li><a href="#load-status">Load status</a><ul><li><a href="#loading">Loading</a></li><li><a href="#cancel-loading">Cancel loading</a></li></ul></li></ul></li><li><a href="#conveniences">Conveniences</a><ul><li><a href="#cascading-load-dependencies">Cascading load dependencies</a></li></ul></li></ul></div><p></p><p>Resources such as layers, maps, portal items, tasks, and so on, commonly rely on remote services or datasets on disk to initialize their state. Accessing such data requires the resources to initialize their state asynchronously. The loadable design pattern unifies this behavior, and resources that adopt this pattern are referred to as &quot;loadable.&quot;</p><p>Loadable resources handle concurrent and repeated requests to allow sharing the same resource instance among various parts of an application. This pattern permits the cancellation of loading a resource for scenarios such as when the service is slow to respond. Finally, loadable resources provide information about their initialization status through explicit states that can be inspected and monitored.</p><h2 id="loadable-api">Loadable API</h2><p>Classes that conform to the loadable pattern implement the Loadable interface.</p><h3 id="load-status">Load status</h3><p>The <a href="../../api-reference/esri-portal-PortalItem.html#loadStatus">loadStatus</a> property on loadable classes returns the state of the loadable resource. Four states are possible.</p><ul><li><code>not-loaded</code> — the resource has not been asked to load its metadata and its state isn't properly initialized.</li><li><code>loading</code> — the resource is in the process of loading its metadata asynchronously.</li><li><code>failed</code> — the resource failed to load its metadata (for example, due to network outage, or the operation was cancelled, and so on.) The error encountered is available from the <code>loadError</code> property.</li><li><code>loaded</code> — the resource successfully loaded its metadata and its state is properly initialized.</li></ul><p>The following state transitions represent the stages that a loadable resource goes through.</p><p><img src="../../assets/img/guide/loadable-pattern.png" alt="loadable-pattern"></p><p>The Loadable interface includes listeners that make it easy to monitor the status of loadable resources, display progress, and take action when the state changes.</p><h4 id="loading">Loading</h4><p>A resource commences loading its metadata asynchronously when <a href="../../api-reference/esri-portal-PortalItem.html#load">load()</a> is invoked. At that time, the load status changes from <code>not-loaded</code> to <code>loading</code>. When the asynchronous operation completes, the callback is invoked. If the operation encounters an error, the error argument in the callback is populated, and <code>loadStatus</code> is set to <code>failed</code>. If the operation completes successfully, the error argument is null and the load status is set to <code>loaded</code>, which means the resource has finished loading its metadata and is now properly initialized.</p><p>Many times, the same resource instance is shared by different parts of the application. For example, a legend component and a table of contents component may have access to the same layer, and they both may want to access the layer's properties to populate their UI. Or the same portal instance may be shared across the application to display the user's items and groups in different parts of the application. <code>load()</code> supports multiple &quot;listeners&quot; to simplify this type of application development. It can be called concurrently and repeatedly, but only one attempt is made to load the metadata. If a load operation is already in progress (<code>loading</code> state) when <code>load()</code> is called, it simply piggy-backs on the outstanding operation and the callback is enqueued to be invoked when that operation completes.</p><p>If the operation has already completed (<code>loaded</code> or <code>failed</code> state) when <code>load()</code> is called, the callback is immediately invoked with the past result of the operation, be it success or failure, and the state remains unchanged. This makes it safe to liberally invoke <code>load()</code> on a loadable resource without having to check whether the resource is loaded and without worrying that it will make unnecessary network requests every time.</p><p>If a resource has failed to load, calling <code>load()</code> on it subsequently will not change its state. The callback will be invoked immediately with the past load error.</p><h4 id="cancel-loading">Cancel loading</h4><p>A resource cancels any outstanding asynchronous operation to load its metadata when <a href="../../api-reference/esri-portal-PortalItem.html#cancelLoad">cancelLoad()</a> is invoked. This transitions the state from <code>loading</code> to <code>failed</code>. The <a href="../../api-reference/esri-portal-PortalItem.html#loadError">loadError</a> property will return information that reflects the operation was cancelled.</p><p>This method should be used carefully because all enqueued callbacks for that resource instance will get invoked with an error stating that the operation was cancelled. Thus, one component in the application can cancel the load initiated by other components when sharing the same resource instance.</p><p>The <code>cancelLoad()</code> method does nothing if the resource is not in the <code>loading</code> state.</p><h2 id="conveniences">Conveniences</h2><h3 id="cascading-load-dependencies">Cascading load dependencies</h3><p>It is common for a loadable resource to depend on loading other loadable resources to properly initialize its state. For example, a portal item cannot finish loading until its parent portal finishes loading. A feature layer cannot be loaded until its associated feature service is first loaded. This situation is referred to as a load dependency.</p><p>Loadable operations invoked on any resource transparently cascade through its dependency graph. This helps simplify using loadable resources and puts the responsibility on the resource to correctly establish and manage its load dependencies.</p><p>The following code example shows how this cascading behavior leads to concise code. Loading the map causes the portal item to begin loading, which in turn initiates loading its portal. You do not have to load each one of them explicitly.</p><pre><code class="js"><span class="hljs-comment">// create a Map loaded from a webmap</span>
<span class="hljs-keyword">var</span> view = <span class="hljs-keyword">new</span> MapView({
  <span class="hljs-attr">container</span>: <span class="hljs-string">"viewDiv"</span>
});

<span class="hljs-keyword">var</span> myPortal = <span class="hljs-keyword">new</span> Portal({
  <span class="hljs-attr">url</span>: <span class="hljs-string">"https://myportal/"</span>
});

<span class="hljs-keyword">var</span> webmap = <span class="hljs-keyword">new</span> WebMap({
  <span class="hljs-attr">portalItem</span>: {
    <span class="hljs-comment">// loads as a dependency of WebMap</span>
    portal: myPortal,
    <span class="hljs-attr">id</span>: <span class="hljs-string">"f2e9b762544945f390ca4ac3671cfa72"</span>
  }
});

webmap.load()
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-comment">// the webmap successfully loaded</span>
    view.map = webmap;
  })
  .otherwise(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>)</span>{
    <span class="hljs-comment">// the webmap or portal failed to load</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"The resource failed to load: "</span>, error);
  });
</code></pre><p>It is possible that dependencies may fail to load. Some dependencies might be critical, such as a portal item's dependency on its portal. If a failure is encountered while loading such a dependency, that error would bubble up to the resource that initiated the load cycle, which would also fail to load. Other load dependencies may be incidental, such as a map's dependency on one of its operational layers, and the resource may be able to load successfully even if one of its dependency fails to load.</p></main></div><div class="footnote feedback right trailer-1"><a class="icon-ui-contact js-feedback" href="mailto:js_feedback@esri.com?subject=Feedback%20on%204.4%20-%20guide:%20Understanding%20the%20loadable%20pattern&body=Hello,%0A%0AI%20was%20reading%20the%20ArcGIS%20API%20for%20JavaScript%20version%204.4%20documentation%20and%20have%20some%20feedback.%0A%0ADocumentation%20details:%0APage%20title:%20%7BREPLACE_TITLE%7D%0APage%20URL:%20%7BREPLACE_URL%7D%0A%0A">Feedback on this topic?</a></div></div></div><footer class="footer leader- link-dark-gray" role="contentinfo"><div class="grid-container"><nav class="column-6"><h6>ArcGIS for Developers</h6><ul class="list-plain"><li><a href="/">Home</a></li><li><a href="/features/">Features</a></li><li><a href="/documentation/">Documentation</a></li><li><a href="/support/">Support</a></li><li><a href="/pricing/">Pricing</a></li><li><a href="/startups/">Startups</a></li><li><a href="https://blogs.esri.com/esri/arcgis/category/developer/">Blog</a></li></ul></nav><nav class="column-6"><h6>ArcGIS Platform</h6><ul class="list-plain"><li><a href="http://arcgis.com">ArcGIS Online</a></li><li><a href="http://desktop.arcgis.com">ArcGIS Desktop</a></li><li><a href="http://server.arcgis.com">ArcGIS Enterprise</a></li><li><a href="http://developers.arcgis.com">ArcGIS for Developers</a></li><li><a href="http://solutions.arcgis.com">ArcGIS Solutions</a></li><li><a href="http://marketplace.arcgis.com">ArcGIS Marketplace</a></li></ul></nav><nav class="column-6"><h6>About Esri</h6><ul class="list-plain"><li><a href="http://www.esri.com/about-esri/">About Us</a></li><li><a href="http://www.esri.com/careers/">Careers</a></li><li><a href="https://blogs.esri.com/esri/esri-insider/">Insiders Blog</a></li><li><a href="http://www.esri.com/events/user-conference/index.html">User Conference</a></li><li><a href="http://www.esri.com/events/devsummit/index.html">Developer Summit</a></li></ul></nav><nav class="column-6"><a class="esri-logo" href="http://esri.com" aria-label="Esri Home"></a><div class="footer-social-nav leader-1"><a class="icon-social-twitter" aria-label="Esri on Twitter" href="https://twitter.com/Esri/"></a> <a class="icon-social-facebook" aria-label="Esri on Facebook" href="https://www.facebook.com/esrigis/"></a> <a class="icon-social-github" aria-label="Esri on GitHub" href="http://esri.github.com/"></a> <a class="icon-social-contact" aria-label="Contact Esri" href="http://www.esri.com/about-esri/contact/"></a></div></nav><div class="column-24 leader-1"><p><small><a href="http://www.esri.com/legal/copyright-trademarks">Copyright © 2017 Esri</a>. All rights reserved. | <a href="http://www.esri.com/legal/privacy">Privacy</a> | <a href="http://www.esri.com/legal/software-license">Terms of use</a> | <a href="/terms/">Plain English</a> | <a href="/terms/faq/">FAQ</a></small></p></div></div></footer><script></script><script src="../../assets/js/config.js"></script><script src="../../assets/js/preparse.js"></script><script src="../../assets/js/libs/FileSaver.js"></script><script src="../../assets/js/libs/url-search-params.js"></script><script src="../../assets/js/calcite-web.js"></script><script src="../../assets/js/calcite-web-extend.js"></script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-NJGGV5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJGGV5');</script><script type="text/javascript">if (_satellite && _satellite.pageBottom) { _satellite.pageBottom(); }</script><script type="text/javascript" src="https://go.pardot.com/dcjs/82202/1182/dc.js"></script></body></html>