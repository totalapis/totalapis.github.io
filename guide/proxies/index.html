<!DOCTYPE html><html><head><meta charset="utf-8"><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="content-language" content="en"><meta name="last-modified" content="Sat Jul 01 2017 13:57:38 GMT-0700 (Pacific Daylight Time)"><meta name="product" content="js-api-arcgis"><meta name="version" content="4.x"><meta name="subject" content="DEVELOPER,WEB,WEB APPLICATIONS,MOBILE"><meta name="subject_label" content="DEVELOPER,WEB,WEB APPLICATIONS,MOBILE"><meta name="sub_category" content="JavaScript API"><meta name="sub_category_label" content="ArcGIS API for JavaScript"><meta name="content_type" content="Guide"><meta name="content_type_label" content="Guide"><meta name="search-collection" content="help"><meta name="search-category" content="help-api,help-api-guide"><title>Proxy pages with the API | ArcGIS API for JavaScript 4.4</title><link rel="shortcut icon" href="../../assets/img/favicon.ico"><link rel="stylesheet" href="../../assets/css/default.css"><script src="https://assets.adobedtm.com/2e9cd01e19dc5ac4867e752f17a2f1ea1923e5af/satelliteLib-0ed1001fd441a838aefe8e755be42aaafddcc46b.js"></script></head><body><developers-account-notifications></developers-account-notifications><div class="wrapper"><header class="top-nav top-nav-hover-top"><div class="grid-container"><div class="column-24 tablet-show"><div class="dropdown js-dropdown left"><a href="#" class="icon-ui-menu top-nav-title js-drawer-toggle top-nav-title-tablet" data-drawer="top-nav">ArcGIS API for JavaScript</a></div></div><div class="column-24 leader-1 trailer-1 tablet-leader-0">Go to <a href="https://developers.arcgis.com/javascript/">Latest version (official documentation)</a></div></div></header><header class="sub-nav sub-nav-purple"><div class="grid-container"><nav class="breadcrumbs breadcrumbs-white clearfix padding-leader-1"><a href="/web-api/" class="crumb">ArcGIS Web API</a> <a href="../.." class="crumb">JavaScript API</a> <a href="../.." class="crumb">4.4</a> <a href="../../guide/index.html" class="crumb">Guide</a></nav><h1 class="sub-nav-title text-white leader-1">ArcGIS API for JavaScript</h1><nav class="sub-nav-list leader-0 tablet-hide"><a class="sub-nav-link" href="../../index.html">Home</a> <a class="sub-nav-link is-active" href="../../guide/index.html">Guide</a> <a class="sub-nav-link" href="../../api-reference/index.html">API Reference</a> <a class="sub-nav-link" href="../../sample-code/index.html">Sample Code</a> <a class="sub-nav-link sub-nav-link-external icon-ui-link-external" href="https://geonet.esri.com/community/developers/web-developers/arcgis-api-for-javascript">Forum</a></nav><select class="select-full trailer-half tablet-show js-select-nav"><option value="../../index.html">Home</option><option selected="selected" value="../../guide/index.html">Guide</option><option value="../../api-reference/index.html">API Reference</option><option value="../../sample-code/index.html">Sample Code</option><option value="https://geonet.esri.com/community/developers/web-developers/arcgis-api-for-javascript">Forum</option></select></div></header><div id="skip-to-content"><div class="grid-container leader-1"><div class="column-6 trailer-2 tablet-hide"><aside class="accordion side-nav column-6 js-accordion guide"><div class="accordion-section"><h4 class="accordion-title">Get Started</h4><nav class="accordion-content"><a href="../../guide/index.html" class="side-nav-link">Overview</a></nav><nav class="accordion-content"><a href="../../guide/release-notes/index.html" class="side-nav-link">Release notes</a></nav><nav class="accordion-content"><a href="../../guide/system-requirements/index.html" class="side-nav-link">System requirements</a></nav><nav class="accordion-content"><a href="../../guide/faq/index.html" class="side-nav-link">FAQ</a></nav><nav class="accordion-content"><a href="../../guide/community/index.html" class="side-nav-link">Community</a></nav></div><div class="accordion-section is-active"><h4 class="accordion-title">Working with the API</h4><nav class="accordion-content"><a href="../../guide/discover/index.html" class="side-nav-link">Discover 4.x</a></nav><nav class="accordion-content"><a href="../../guide/working-with-props/index.html" class="side-nav-link">Properties</a></nav><nav class="accordion-content"><a href="../../guide/working-with-promises/index.html" class="side-nav-link">Promises</a></nav><nav class="accordion-content"><a href="../../guide/autocasting/index.html" class="side-nav-link">Autocasting</a></nav><nav class="accordion-content"><a href="../../guide/loadable/index.html" class="side-nav-link">Loadable</a></nav><nav class="accordion-content"><a href="../../guide/cors/index.html" class="side-nav-link">CORS</a></nav><nav class="accordion-content"><a href="../../guide/proxies/index.html" class="side-nav-link is-active">Proxy pages</a></nav><nav class="accordion-content"><a href="../../guide/arcade/index.html" class="side-nav-link">Arcade</a></nav><nav class="accordion-content"><a href="../../guide/using-fromjson/index.html" class="side-nav-link">Using fromJSON()</a></nav><nav class="accordion-content"><a href="../../guide/localization/index.html" class="side-nav-link">Localization</a></nav><nav class="accordion-content"><a href="../../guide/get-api/index.html" class="side-nav-link">Get the API</a></nav><nav class="accordion-content"><a href="../../guide/view-ui/index.html" class="side-nav-link">View UI</a></nav><nav class="accordion-content"><a href="../../guide/styling/index.html" class="side-nav-link">Styling</a></nav><nav class="accordion-content"><a href="../../guide/get-started-visualization/index.html" class="side-nav-link">Visualization Overview</a></nav><nav class="accordion-content"><a href="../../guide/creating-visualizations-manually/index.html" class="side-nav-link">Creating visualizations manually</a></nav><nav class="accordion-content"><a href="../../guide/visualizing-points-3d/index.html" class="side-nav-link">Visualizing points with 3D symbols</a></nav><nav class="accordion-content"><a href="../../guide/esri-web-style-symbols/index.html" class="side-nav-link">Esri Web Style Symbols</a></nav><nav class="accordion-content"><a href="../../guide/get-started-workflows/index.html" class="side-nav-link">Get started with workflows</a></nav><nav class="accordion-content"><a href="../../guide/typescript-setup/index.html" class="side-nav-link">TypeScript Setup</a></nav><nav class="accordion-content"><a href="../../guide/implementing-accessor/index.html" class="side-nav-link">Implementing Accessor</a></nav><nav class="accordion-content"><a href="../../guide/custom-widget/index.html" class="side-nav-link">Widget Development</a></nav><nav class="accordion-content"><a href="../../guide/esri-icon-font/index.html" class="side-nav-link">Esri Icon Font</a></nav><nav class="accordion-content"><a href="../../guide/using-bower/index.html" class="side-nav-link">Using Bower</a></nav><nav class="accordion-content"><a href="../../guide/using-frameworks/index.html" class="side-nav-link">Using Frameworks</a></nav><nav class="accordion-content"><a href="../../guide/using-phonegap/index.html" class="side-nav-link">Using PhoneGap</a></nav></div><div class="accordion-section"><h4 class="accordion-title">Migrating from 3.x</h4><nav class="accordion-content"><a href="../../guide/choose-version/index.html" class="side-nav-link">Choose a version</a></nav><nav class="accordion-content"><a href="../../guide/migrating/index.html" class="side-nav-link">Migrating from 3.x to 4.4</a></nav><nav class="accordion-content"><a href="../../guide/functionality-matrix/index.html" class="side-nav-link">3.x to 4.x functionality matrix</a></nav></div></aside><div class="column-6 js-sticky scroll-show tablet-hide" data-top="46"><a href="#" class="btn btn-fill btn-clear">Back to Top</a></div></div><div class="column-24 trailer-1 tablet-show"><select class="select-full trailer-half js-select-nav"><optgroup label="Get Started"><option value="../../guide/index.html">Overview</option><option value="../../guide/release-notes/index.html">Release notes</option><option value="../../guide/system-requirements/index.html">System requirements</option><option value="../../guide/faq/index.html">FAQ</option><option value="../../guide/community/index.html">Community</option></optgroup><optgroup label="Working with the API"><option value="../../guide/discover/index.html">Discover 4.x</option><option value="../../guide/working-with-props/index.html">Properties</option><option value="../../guide/working-with-promises/index.html">Promises</option><option value="../../guide/autocasting/index.html">Autocasting</option><option value="../../guide/loadable/index.html">Loadable</option><option value="../../guide/cors/index.html">CORS</option><option value="../../guide/proxies/index.html" selected="selected">Proxy pages</option><option value="../../guide/arcade/index.html">Arcade</option><option value="../../guide/using-fromjson/index.html">Using fromJSON()</option><option value="../../guide/localization/index.html">Localization</option><option value="../../guide/get-api/index.html">Get the API</option><option value="../../guide/view-ui/index.html">View UI</option><option value="../../guide/styling/index.html">Styling</option><option value="../../guide/get-started-visualization/index.html">Visualization Overview</option><option value="../../guide/creating-visualizations-manually/index.html">Creating visualizations manually</option><option value="../../guide/visualizing-points-3d/index.html">Visualizing points with 3D symbols</option><option value="../../guide/esri-web-style-symbols/index.html">Esri Web Style Symbols</option><option value="../../guide/get-started-workflows/index.html">Get started with workflows</option><option value="../../guide/typescript-setup/index.html">TypeScript Setup</option><option value="../../guide/implementing-accessor/index.html">Implementing Accessor</option><option value="../../guide/custom-widget/index.html">Widget Development</option><option value="../../guide/esri-icon-font/index.html">Esri Icon Font</option><option value="../../guide/using-bower/index.html">Using Bower</option><option value="../../guide/using-frameworks/index.html">Using Frameworks</option><option value="../../guide/using-phonegap/index.html">Using PhoneGap</option></optgroup><optgroup label="Migrating from 3.x"><option value="../../guide/choose-version/index.html">Choose a version</option><option value="../../guide/migrating/index.html">Migrating from 3.x to 4.4</option><option value="../../guide/functionality-matrix/index.html">3.x to 4.x functionality matrix</option></optgroup></select></div><main class="column-17 tablet-column-12 pre-1 content-face"><h1 id="proxy-pages">Proxy pages</h1><p>Before <a href="../cors/index.html">CORS</a>, it was necessary to work with a <a href="https://en.wikipedia.org/wiki/Proxy_server">proxy</a> page. This was helpful as it was used to bypass the issue many applications had when accessing resources that were not on the same origin.</p><p>Even though enabling and using CORS is the preferred method, it should also be noted that proxies are still required if:</p><ul><li>the web server/browser are not enabled for CORS or do not support <a href="https://en.wikipedia.org/wiki/JSONP">JSONP</a> format</li><li>needing anoymous access to secured services within an application.</li></ul><div class="esri-md panel trailer-1"><p>This topic specifically discusses working with proxies, additional information on working with CORS can be found in the <a href="../cors/index.html">CORS</a> guide topic.</p></div><p>The following use cases discuss when it is appropriate to use a proxy.</p><h2 id="example-server-is-not-enabled-for-cors-and-the-resource-response-is-not-in-jsonp-format">Example: Server is not enabled for CORS and the resource response is not in JSONP format</h2><p>There may be instances where CORS is not enabled on the server and <a href="https://en.wikipedia.org/wiki/JSONP">JSONP</a> is not supported. In this case, a proxy is needed to bypass security on these resources.</p><p>For example, all requests to WMS services initially go through a <code>GetCapabilities</code> request. This initial response loads a XML file. If the server is not enabled for CORS, a proxy is required since the response is not in JSONP format.</p><pre><code class="js">/proxy.php?https:<span class="hljs-comment">//oceanwatch.pfeg.noaa.gov/thredds/wms/satellite/PP/bfp1/8day?SERVICE=WMS&amp;REQUEST=GetCapabilities</span>
</code></pre><h2 id="example-server-is-not-enabled-for-cors-although-services-support-jsonp">Example: Server is not enabled for CORS although services support JSONP</h2><p>If using a <code>GET</code> request, there is no need for a proxy, (see the <a href="../cors/index.html#example-server-without-cors-support">CORS guide topic</a>). Whereas using a <code>POST</code> request requires the need for a proxy. Generally, this is seen in instances where:</p><ul><li>The application performs editing.</li><li>The response returned from the request is very large, i.e. approximately 2000+ characters. This was once common in applications that performed intensive geometry functions, (e.g. buffering). This is not so common anymore as much of this is now handled on the client.</li></ul><h2 id="example-services-are-behind-a-firewall">Example: Services are behind a firewall</h2><p>There may be instances where there are security settings that prevent cross domain access. In these cases, the proxy page should be used all the time. This can be set using <a href="../../api-reference/esri-config.html#request">esriConfig.request's forceProxy</a> property.</p><h2 id="example-building-an-application-that-targets-end-users-not-known-to-the-arcgis-platform">Example: Building an application that targets end users not known to the ArcGIS platform</h2><p>There may be scenarios where you need to create an application to allow anonymous access to features requiring credentials to the ArcGIS platform. Some premium features include routing, batch geocoding, and analysis. In this situation, the application logs in to the platform using the credentials stored in the proxy. Please see <a href="https://developers.arcgis.com/authentication/#app-login">ArcGIS Security and Authentication</a> for details.</p><hr><p>The following steps details how to get started working with the proxy.</p><h3 id="get-the-proxy">Get the proxy</h3><p>The proxy runs on your local web server, not on an Esri server or on the computer where ArcGIS Server is installed (unless your web server also hosts the ArcGIS Server instance). <a href="https://github.com/Esri/resource-proxy/releases">Three proxies are available for download</a>, each targeting a specific server-side platform:</p><ul><li><a href="https://github.com/Esri/resource-proxy/tree/master/DotNet">ASP.NET</a></li><li><a href="https://github.com/Esri/resource-proxy/tree/master/Java">Java/JSP</a></li><li><a href="https://github.com/Esri/resource-proxy/tree/master/PHP">PHP</a></li></ul><p><a href="https://github.com/Esri/resource-proxy/releases">Download</a> the appropriate proxy for your platform. Each proxy download includes installation instructions and information on any system requirements make sure you follow these instructions in order to setup and configure the proxy on your web server.</p><h3 id="use-the-proxy">Use the proxy</h3><p>In order for your appliction to route requests through the proxy, you must add code to your application defining the location of where the proxy is hosted.</p><ul><li>If all requests in your application use the same proxy, specify the location using the <a href="../../api-reference/esri-config.html#request">request object's <code>proxyUrl</code> property</a>. You can also specify if requests should always go through the proxy using the <a href="../../api-reference/esri-config.html#request">request object's <code>forceProxy</code> property</a>. This forces the application to use the proxy for all AJAX requests made using <a href="../../api-reference/esri-config.html#request">request</a> and any images added via the <code>&lt;img&gt;</code> element.</li></ul><pre><code class="js"><span class="hljs-built_in">require</span>([<span class="hljs-string">"esri/config"</span>], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">esriConfig</span>) </span>{
  esriConfig.request.proxyUrl = <span class="hljs-string">"/resource-proxy/Java/proxy.jsp"</span>;
  esriConfig.request.forceProxy = <span class="hljs-literal">true</span>;
});
</code></pre><ul><li>It is also possible to configure your application with specific proxy rules. These rules define the proxy for specific resources that have an identical URL prefix. When the application tries to access a resource via this URL, the request is sent through the specified proxy. The <a href="../../api-reference/esri-config.html#request">request's <code>proxyRules</code> property</a> is an object listing all these proxy rules. To populate this, use the <a href="../../api-reference/esri-core-urlUtils.html#addProxyRule">urlUtils.addProxyRule()</a>.</li></ul><pre><code class="js"><span class="hljs-built_in">require</span>([<span class="hljs-string">"esri/core/urlUtils"</span>], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">urlUtils</span>) </span>{
  urlUtils.addProxyRule({
    <span class="hljs-attr">urlPrefix</span>: <span class="hljs-string">"route.arcgis.com"</span>,
    <span class="hljs-attr">proxyUrl</span>: <span class="hljs-string">"/resource-proxy/Java/proxy.php"</span>
  });
});
</code></pre><h3 id="testing-and-deploying-the-application">Testing and deploying the application</h3><p>Once you have configured the proxy page wqith the application, test the application to ensure that requests are processed correctly. The application should function normally as it did before the proxy page was implemented. If not, you may need to troubleshoot the proxy.</p><ul><li><p>If your application environment supports debugging mode, you may be able to set a breakpoint in the proxy page and detect whether it is operating correctly. For example in IIS/ASP.NET environment, you can open the application in Visual Studio and set a break point in the <code>ProcessRequest</code> method in the proxy.ashx., then run the application in debug mode. The execution should halt at the breakpoint, and you should be able to detect where the problem is. You can also set break points in the JavaScript functions of your application, or insert console statements to display values during execution.</p></li><li><p>Each proxy has an associated <code>config</code> file. Set this file's, <code>mustMatch</code> attribute to <em>false</em> to proxy all requests. If the application works now, you may not have listed the service in the <code>serverUrls</code> section or you may have a typo in the serverUrl. Don't forget to set this attribute back to <em>true</em> when you have finished troubleshooting the proxy.</p></li><li><p>Enable logging for the proxy. Once enabled, messages are written to the log that may be useful when troubleshooting the issue.</p></li><li><p>Make sure you've specified the correct location for your proxy in your application code. You can use browser developer tools to determine if the proxy is successfully located. To do this, activate your browser debugging tools then examine the network requests. Look specifically for requests that <code>POST</code> to the proxy. If you see a 404 error this means that the proxy was not found. Inspect the request properties to view the path where the application is looking for the proxy.</p></li></ul><h3 id="securing-the-proxy-application">Securing the proxy application</h3><p>If the application uses services with token-based security, and the proxy is configured with the <code>username</code> and <code>password</code> or <code>client_id</code> and <code>client_secret</code> the proxy application needs to be secured so that only authorized applications have access. Please refer to <a href="https://developers.arcgis.com/authentication/">ArcGIS Security and Authentication</a> documentation for additional details.</p><h2 id="additional-information">Additional Information</h2><ul><li><a href="https://github.com/Esri/resource-proxy/releases">Esri-provided resource proxies</a></li><li><a href="https://developers.arcgis.com/authentication/working-with-proxies/">Working with proxy services</a></li><li><a href="https://developers.arcgis.com/authentication/working-with-proxies/#self-hosted-proxy-service">Working with self-hosted proxies</a></li><li><a href="../../sample-code/tasks-route/index.html">Sample - Routing sample</a></li><li><a href="../../sample-code/elevation-query/index.html">Sample - Query Elevation (lines)</a></li></ul></main></div><div class="footnote feedback right trailer-1"><a class="icon-ui-contact js-feedback" href="mailto:js_feedback@esri.com?subject=Feedback%20on%204.4%20-%20guide:%20Proxy%20pages%20with%20the%20API&body=Hello,%0A%0AI%20was%20reading%20the%20ArcGIS%20API%20for%20JavaScript%20version%204.4%20documentation%20and%20have%20some%20feedback.%0A%0ADocumentation%20details:%0APage%20title:%20%7BREPLACE_TITLE%7D%0APage%20URL:%20%7BREPLACE_URL%7D%0A%0A">Feedback on this topic?</a></div></div></div><footer class="footer leader- link-dark-gray" role="contentinfo"><div class="grid-container"><nav class="column-6"><h6>ArcGIS for Developers</h6><ul class="list-plain"><li><a href="/">Home</a></li><li><a href="/features/">Features</a></li><li><a href="/documentation/">Documentation</a></li><li><a href="/support/">Support</a></li><li><a href="/pricing/">Pricing</a></li><li><a href="/startups/">Startups</a></li><li><a href="https://blogs.esri.com/esri/arcgis/category/developer/">Blog</a></li></ul></nav><nav class="column-6"><h6>ArcGIS Platform</h6><ul class="list-plain"><li><a href="http://arcgis.com">ArcGIS Online</a></li><li><a href="http://desktop.arcgis.com">ArcGIS Desktop</a></li><li><a href="http://server.arcgis.com">ArcGIS Enterprise</a></li><li><a href="http://developers.arcgis.com">ArcGIS for Developers</a></li><li><a href="http://solutions.arcgis.com">ArcGIS Solutions</a></li><li><a href="http://marketplace.arcgis.com">ArcGIS Marketplace</a></li></ul></nav><nav class="column-6"><h6>About Esri</h6><ul class="list-plain"><li><a href="http://www.esri.com/about-esri/">About Us</a></li><li><a href="http://www.esri.com/careers/">Careers</a></li><li><a href="https://blogs.esri.com/esri/esri-insider/">Insiders Blog</a></li><li><a href="http://www.esri.com/events/user-conference/index.html">User Conference</a></li><li><a href="http://www.esri.com/events/devsummit/index.html">Developer Summit</a></li></ul></nav><nav class="column-6"><a class="esri-logo" href="http://esri.com" aria-label="Esri Home"></a><div class="footer-social-nav leader-1"><a class="icon-social-twitter" aria-label="Esri on Twitter" href="https://twitter.com/Esri/"></a> <a class="icon-social-facebook" aria-label="Esri on Facebook" href="https://www.facebook.com/esrigis/"></a> <a class="icon-social-github" aria-label="Esri on GitHub" href="http://esri.github.com/"></a> <a class="icon-social-contact" aria-label="Contact Esri" href="http://www.esri.com/about-esri/contact/"></a></div></nav><div class="column-24 leader-1"><p><small><a href="http://www.esri.com/legal/copyright-trademarks">Copyright © 2017 Esri</a>. All rights reserved. | <a href="http://www.esri.com/legal/privacy">Privacy</a> | <a href="http://www.esri.com/legal/software-license">Terms of use</a> | <a href="/terms/">Plain English</a> | <a href="/terms/faq/">FAQ</a></small></p></div></div></footer><script></script><script src="../../assets/js/config.js"></script><script src="../../assets/js/preparse.js"></script><script src="../../assets/js/libs/FileSaver.js"></script><script src="../../assets/js/libs/url-search-params.js"></script><script src="../../assets/js/calcite-web.js"></script><script src="../../assets/js/calcite-web-extend.js"></script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-NJGGV5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJGGV5');</script><script type="text/javascript">if (_satellite && _satellite.pageBottom) { _satellite.pageBottom(); }</script><script type="text/javascript" src="https://go.pardot.com/dcjs/82202/1182/dc.js"></script></body></html>