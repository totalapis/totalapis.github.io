// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.4/esri/copyright.txt for details.
//>>built
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Logger ../core/collectionUtils ../core/Warning ../core/urlUtils ./Symbol ./Symbol3DLayer ./IconSymbol3DLayer ./ObjectSymbol3DLayer ./LineSymbol3DLayer ./PathSymbol3DLayer ./FillSymbol3DLayer ./ExtrudeSymbol3DLayer ./TextSymbol3DLayer ./support/Thumbnail ./support/StyleOrigin ../portal/Portal ../core/accessorSupport/decorators".split(" "),function(c,F,p,d,q,r,t,g,e,u,h,v,w,x,y,
z,A,B,C,k,D,b){var E={icon:v,object:w,line:x,path:y,fill:z,extrude:A,text:B},m=q.ofType(h),n=r.getLogger("esri.symbols.Symbol3D");c=function(c){function b(a){a=c.call(this)||this;a.styleOrigin=null;a.thumbnail=null;a.type=null;a._set("symbolLayers",a._createSymbolLayersCollection());return a}p(b,c);Object.defineProperty(b.prototype,"symbolLayers",{set:function(a){var b=this._get("symbolLayers");b?(b.removeAll(),b.addMany(a)):(b=this._createSymbolLayersCollection(a),this._set("symbolLayers",b))},enumerable:!0,
configurable:!0});b.prototype.readSymbolLayers=function(a,b,f){b=this._createSymbolLayersCollection();for(var c=0;c<a.length;c++){var d=a[c],l=h.typeJSONDictionary.read(d.type),e=E[l];e?(d=new e,d.read(a[c],f),b.add(d)):(n.warn("Unknown symbol layer type: "+l),f&&f.messages&&f.messages.push(new g("symbol-layer:unsupported","Symbol layers of type '"+(l||"unknown")+"' are not supported",{definition:d,context:f})))}return b};b.prototype.readStyleOrigin=function(a,b,c){if(a.styleUrl&&a.name)return b=
e.read(a.styleUrl,c),new k({styleUrl:b,name:a.name});if(a.styleName&&a.name)return new k({portal:c&&c.portal||D.getDefault(),styleName:a.styleName,name:a.name});c&&c.messages&&c.messages.push(new g("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:c,definition:a}))};b.prototype.writeStyleOrigin=function(a,b,c,d){a.styleUrl&&a.name?(c=e.write(a.styleUrl,d),b.styleOrigin={styleUrl:c,name:a.name}):a.styleName&&a.name&&(a.portal&&
d&&d.portal&&!e.hasSamePortal(a.portal.restUrl,d.portal.restUrl)?d&&d.messages&&d.messages.push(new g("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):b.styleOrigin={styleName:a.styleName,name:a.name})};b.prototype.normalizeCtorArgs=function(a){return a instanceof h?{symbolLayers:this._createSymbolLayersCollection([a])}:Array.isArray(a)?{symbolLayers:this._createSymbolLayersCollection(a)}:
a};b.prototype._createSymbolLayersCollection=function(a){var b=this;a=new m(a);a.on("before-add",function(a){return b._onSymbolLayersBeforeAdd(a)});return a};b.prototype._onSymbolLayersBeforeAdd=function(a){0>this._allowedLayerTypes.indexOf(a.item.type)&&(n.error("Symbol layer of type '"+a.item.type+"' is not allowed for symbol of type '"+this.type+"'"),a.preventDefault())};return b}(b.declared(u));d([b.property({json:{write:!1}})],c.prototype,"color",void 0);d([b.property({type:m,json:{write:!0}}),
b.cast(t.castForReferenceSetter)],c.prototype,"symbolLayers",null);d([b.reader("symbolLayers")],c.prototype,"readSymbolLayers",null);d([b.property({type:k})],c.prototype,"styleOrigin",void 0);d([b.reader("styleOrigin")],c.prototype,"readStyleOrigin",null);d([b.writer("styleOrigin")],c.prototype,"writeStyleOrigin",null);d([b.property({type:C.default,json:{read:!1}})],c.prototype,"thumbnail",void 0);d([b.property({type:String,readOnly:!0,json:{read:!1}})],c.prototype,"type",void 0);return c=d([b.subclass("esri.symbols.Symbol3D")],
c)});