// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.4/esri/copyright.txt for details.
//>>built
define("require exports dojo/_base/lang ./utils ./metadata ./ensureType ./extensions ./decorators/cast".split(" "),function(y,n,r,p,f,m,q,t){Object.defineProperty(n,"__esModule",{value:!0});var u=Object.prototype.hasOwnProperty,v=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Writer|Caster)$/,w={Getter:"get",Setter:"set",Reader:"json.read.reader",Writer:"json.write.writer",Caster:"cast"},x=/^_(set|get)([a-zA-Z0-9]+)Attr$/;n.processPrototype=function(c){for(var k=c.declaredClass,e=c.properties||{},d=0,g=Object.getOwnPropertyNames(e);d<
g.length;d++){var a=g[d],b=e[a],h=typeof b;null==b?f.setPropertyMetadata(c,a,{value:b}):Array.isArray(b)?f.setPropertyMetadata(c,a,{type:[b[0]],value:null}):"object"===h?p.getProperties(b)||b instanceof Date?f.setPropertyMetadata(c,a,{type:b.constructor,value:b}):f.setPropertyMetadata(c,a,b):"boolean"===h?f.setPropertyMetadata(c,a,{type:Boolean,value:b}):"string"===h?f.setPropertyMetadata(c,a,{type:String,value:b}):"number"===h?f.setPropertyMetadata(c,a,{type:Number,value:b}):"function"===h&&f.setPropertyMetadata(c,
a,{type:b,value:null})}d=0;for(g=Object.getOwnPropertyNames(c);d<g.length;d++){var h=g[d],b=c[h],l=void 0,e=a=void 0;if(l=v.exec(h))a=l[1],e=w[l[2]];else if(l=x.exec(h))a=l[2][0].toLowerCase()+l[2].substr(1),e=l[1].toLowerCase();a&&e&&(a=f.getPropertyMetadata(c,a),r.setObject(e,b,a))}d=0;for(g=Object.getOwnPropertyNames(f.getPropertiesMetadata(c));d<g.length;d++)if(a=g[d],b=f.getPropertyMetadata(c,a),e=b.type,void 0===b.value&&u.call(c,a)&&(b.value=c[a]),!b.cast&&e)switch(e){case Number:b.cast=m.ensureNumber;
break;case Boolean:b.cast=m.ensureBoolean;break;case String:b.cast=m.ensureString;break;case Date:b.cast=m.ensureDate;break;default:Array.isArray(e)?b.cast=m.ensureArray(e[0]):b.cast=m.ensureType(e)}q.processPrototypeMetadatas(f.getPropertiesMetadata(c),k);return f.getPropertiesMetadata(c)};n.processClass=function(c){for(var k=c.prototype,e=k.declaredClass,d=c._meta.bases,g={},a=d.length-1;0<=a;a--)p.merge(g,f.getMetadata(d[a].prototype));var b=g.properties;q.processClassMetadatas(b,e);Object.defineProperty(c,
"__accessorMetadata__",{value:b});for(var h={},e=function(a){var c=b[a];h[a]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(a):c.value},set:function(b){var d=this.__accessor__;if(!d)Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b});else if(!Object.isFrozen(this)){if(d.initialized&&c.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+a+"' of "+this.declaredClass);d.set(a,b)}}}},d=0,a=Object.getOwnPropertyNames(b);d<
a.length;d++)e(a[d]);Object.defineProperties(c.prototype,h);if(g.parameters)for(c=0,e=Object.getOwnPropertyNames(g.parameters);c<e.length;c++)d=e[c],a=Object.getOwnPropertyDescriptor(k,d)||{value:k[d]},(a=t.autocastMethod(k,d,a))&&Object.defineProperty(k,d,a);return g}});