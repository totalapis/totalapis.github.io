// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.4/esri/copyright.txt for details.
//>>built
define("require exports ../../../symbols/Symbol3D ../../../symbols/SimpleMarkerSymbol ../../../symbols/PictureMarkerSymbol ../../../symbols/SimpleLineSymbol ../../../symbols/support/symbolUtils ../../../core/numberUtils ./utils".split(" "),function(P,v,D,E,F,y,t,p,G){function H(a,b){var c=null,d=null;if("simple"===a.type)c=a.symbol;else if("uniqueValue"===a.type||"classBreaks"===a.type)c=(c=(a=a.classBreakInfos||a.uniqueValueInfos)&&a[0])&&c.symbol,d=1<a.length;if(!c||I(c))return null;c=c.clone();
if(b||d)-1<c.type.indexOf("3d")?J(c):(b=c,-1!==b.type.indexOf("line-symbol")?b.color=r:(b.color=z,"simple-marker-symbol"===b.type&&(b.outline={color:r,width:1.5})));return c}function I(a){if(a)return-1<a.type.indexOf("3d")?(a=a.symbolLayers)?a.some(function(a){return a&&"fill"===a.type}):!1:-1!==a.type.indexOf("fill-symbol")}function J(a){t.isVolumetricSymbol(a)||(-1!==a.type.indexOf("line-symbol-3d")?a.symbolLayers.forEach(function(a){a.material={color:r}}):a.symbolLayers.forEach(function(a){"icon"!==
a.type||a.resource&&a.resource.href?a.material={color:K}:(a.material={color:z},a.outline={color:r,size:1.5})}))}function L(a,b,c,d){var e=a.getSizeRangeAtScale(b,d),g=e&&M(e);if(e||g){for(var h=g.map(function(a){var c=e.minSize,d=e.maxSize,f=b.minDataValue,g=b.maxDataValue;return a<=c?f:a>=d?g:(a-c)/(d-c)*(g-f)+f}),h=p.round(h),f=1;f<h.length-1;f++){var m=N(a,b,c,h[f],h[f-1],d);m&&(h[f]=m[0],g[f]=m[1])}return h}}function M(a){var b=a.minSize;a=(a.maxSize-b)/4;for(var c=[],d=0;5>d;d++)c.push(b+a*d);
return c}function N(a,b,c,d,e,g){var h=u(a,b,c,d,g);e=u(a,b,c,e,g);var f=p.numDigits(d),m=f.fractional,n=f.integer,k=f=null;0<d&&1>d&&(f=Math.pow(10,m),d*=f,n=p.numDigits(d).integer);for(m=n-1;0<=m;m--){var l=Math.pow(10,m),n=Math.floor(d/l)*l,l=Math.ceil(d/l)*l;null!=f&&(n/=f,l/=f);var q=(n+l)/2,q=p.round([n,q,l],{indexes:[1]}),q=q[1],A=u(a,b,c,n,g),B=u(a,b,c,l,g),C=u(a,b,c,q,g),r=p.percentChange(h,A,e,null),t=p.percentChange(h,B,e,null),v=p.percentChange(h,C,e,null),w=20>=r.previous,x=20>=t.previous;
w&&x&&(r.previous<=t.previous?(w=!0,x=!1):(x=!0,w=!1));w?k=[n,A]:x?k=[l,B]:20>=v.previous&&(k=[q,C]);if(k)break}return k}function u(a,b,c,d,e){return a.getSize(d,{sizeInfo:b,scale:e,shape:-1!==c.type.indexOf("marker-symbol")?c.style:null})}function O(a,b){a=a.clone();if(a.isInstanceOf(D))t.isVolumetricSymbol(a)||a.symbolLayers.forEach(function(a){"fill"!==a.type&&(a.size=b)});else if(a.isInstanceOf(E))a.size=b;else if(a.isInstanceOf(F)){var c=a.width,d=a.height;a.height=b;a.width=c/d*b}else a.isInstanceOf(y)?
a.width=b:a.isInstanceOf(y)&&a.font&&(a.font.size=b);return a}Object.defineProperty(v,"__esModule",{value:!0});var z=[255,255,255],K=[200,200,200],r=[128,128,128];v.getRampStops=function(a,b,c,d){var e=b.legendOptions,e=e&&e.customValues,g=H(a,c);c=null!=b.minSize&&null!=b.maxSize;var h=b.stops&&1<b.stops.length,f=!!b.target;if(g&&(e||c||h&&!f)){var m=t.isVolumetricSymbol(g),n=null,k=null,l=null,k=m&&!h?[b.minDataValue,b.maxDataValue]:e||L(a,b,g,d);!k&&h&&(k=b.stops.map(function(a){return a.value}),
(n=b.stops.some(function(a){return!!a.label}))&&(l=b.stops.map(function(a){return a.label})));e=!m||k&&2===k.length;if(!k||!e)return null;var q=[12,30];return k.map(function(c,e){var f=m?q[e]:u(a,b,g,c,d),h=O(g,f);e=n?l[e]:G.getLabelPrefix(e,k.length-1)+p.format(c);return{value:c,symbol:h,label:e,size:f}}).reverse()}}});