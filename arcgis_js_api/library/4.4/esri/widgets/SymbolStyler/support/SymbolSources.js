// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.4/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/assignHelper ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/promiseUtils ../../../core/screenUtils ../../../symbols/support/symbolUtils ../../../symbols/support/symbolPreview ../../../Color ../../../core/Accessor ../../../request ../../../symbols/support/jsonUtils ../../../symbols/support/gfxUtils dojo/dom-construct dojo/i18n!../nls/SymbolStyler".split(" "),function(c,
k,w,l,d,a,g,x,q,r,y,f,z,t,u,v,e){function A(b){b=b.thumbnail.href;var m=v.create("div");return z(b,{responseType:"image"}).then(function(b){return m.appendChild(b.data)}).otherwise(function(){var b=x.pt2px(24);v.create("img",{src:B,width:b,height:b,alt:""},m)}).then(function(){return m})}function C(b,m,n){b={data:b,base:n.itemUrl,filename:"data",styleName:q.styleNameFromItem(n)};return q.fetchSymbolFromStyle(b,m,{portal:n.portal})}Object.defineProperty(k,"__esModule",{value:!0});var B=c.toUrl("../../../themes/base/images/broken-file-64.svg"),
D=[{name:"Circle",type:"esriSMS",style:"esriSMSCircle",color:[0,0,128,128],size:18,outline:{color:[0,0,128,255],width:1}},{name:"Square",type:"esriSMS",style:"esriSMSSquare",color:[0,0,128,128],size:18,outline:{color:[0,0,128,255],width:1}},{name:"Diamond",type:"esriSMS",style:"esriSMSDiamond",color:[0,0,128,128],size:18,outline:{color:[0,0,128,255],width:1}},{name:"Cross",type:"esriSMS",style:"esriSMSCross",color:[0,0,128,128],size:18,outline:{color:[0,0,128,255],width:1}},{name:"X",type:"esriSMS",
style:"esriSMSX",color:[0,0,128,128],size:18,outline:{color:[0,0,128,255],width:1}}];c=[{name:e.sphere,primitive:"sphere"},{name:e.tallCylinder,primitive:"cylinder",mixins:{width:5,height:10,depth:5}},{name:e.cylinder,primitive:"cylinder"},{name:e.tallCube,primitive:"cube",mixins:{width:5,height:10,depth:5,anchor:"bottom"}},{name:e.cube,primitive:"cube"},{name:e.tallCone,primitive:"cone",mixins:{width:5,height:10,depth:5}},{name:e.cone,primitive:"cone"},{name:e.invertedCone,primitive:"inverted-cone"},
{name:e.diamond,primitive:"diamond"},{name:e.tetrahedron,primitive:"tetrahedron"}];var E=[{name:e.circle,primitive:"circle"},{name:e.square,primitive:"square"},{name:e.cross,primitive:"cross"},{name:e.x,primitive:"x"},{name:e.kite,primitive:"kite"}].map(function(b){return{dimensionality:"flat",title:b.name,type:"PointSymbol3D",symbolLayers:[{type:"Icon",resource:{primitive:b.primitive},material:{color:u.defaultThematicColor},outline:{color:[0,0,0]}}]}}),F=c.map(function(b){return{dimensionality:"volumetric",
title:b.name,type:"PointSymbol3D",symbolLayers:[w({type:"Object",resource:{primitive:b.primitive}},b.mixins)]}}),G={getSymbol:function(b){return C(b.parentData,b.data.name,b.portalItem).then(function(b){"point-symbol-3d"===b.type&&b.symbolLayers.forEach(function(b){b.get("material.color")&&("icon"===b.type?b.material.color=u.defaultThematicColor.clone():"object"===b.type&&(b.material.color=new y([255,255,255])))});return b})},getThumbnail:function(b){return A(b.data)}},H={getSymbol:function(b){return g.resolve(t.fromJSON(b.data))},
getThumbnail:function(b){return b.getSymbol().then(function(b){return r.renderPreviewHTML(b,{size:24})})}},I={getSymbol:function(b){return g.resolve(t.fromJSON(b.data))},getThumbnail:function(b){return b.getSymbol().then(function(b){return r.renderPreviewHTML(b,{size:48})})}},h=function(b){function a(){return null!==b&&b.apply(this,arguments)||this}l(a,b);a.prototype.getSymbol=function(){var b=this;return this._symbol?g.resolve(this._symbol):this.strategy.getSymbol(this).then(function(a){return b._symbol=
a})};a.prototype.getThumbnail=function(b){var a=this;return this._thumbnail?(b.appendChild(this._thumbnail),g.resolve()):this.strategy.getThumbnail(this).then(function(n){a._thumbnail=n;b.appendChild(a._thumbnail)})};return a}(a.declared(f));d([a.property()],h.prototype,"strategy",void 0);d([a.property()],h.prototype,"data",void 0);d([a.property()],h.prototype,"parentData",void 0);d([a.property()],h.prototype,"portalItem",void 0);h=d([a.subclass("esri.widgets.SymbolStyler.SymbolItem")],h);k.SymbolItem=
h;c=function(b){function a(){return null!==b&&b.apply(this,arguments)||this}l(a,b);a.prototype.fetchData=function(){var b=this;return this.data?g.resolve(this.data):this.portalItem.fetchData().then(function(a){b._set("data",a);return a})};return a}(a.declared(f));d([a.property({readOnly:!0})],c.prototype,"data",void 0);d([a.property({aliasOf:"portalItem.id"})],c.prototype,"id",void 0);d([a.property({aliasOf:"portalItem.name"})],c.prototype,"name",void 0);d([a.property({aliasOf:"portalItem.title"})],
c.prototype,"title",void 0);d([a.property()],c.prototype,"portalItem",void 0);c=d([a.subclass("esri.widgets.SymbolStyler.PortalItemSymbolSourceBase")],c);var p=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.type="symbol-set";return a}l(a,b);a.prototype.getItems=function(){return g.resolve(null)};return a}(a.declared(c));d([a.property({readOnly:!0})],p.prototype,"type",void 0);p=d([a.subclass("esri.widgets.SymbolStyler.SymbolSetSymbolSource")],p);k.SymbolSetSymbolSource=p;
c=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.type="web-style";return a}l(a,b);a.prototype.getItems=function(){var b=this;return this._items?g.resolve(this._items):this.fetchData().then(function(a){return a.items.map(function(c){return new h({data:c,parentData:a,portalItem:b.portalItem,strategy:G})})}).then(function(a){return b._items=a})};return a}(a.declared(c));d([a.property({readOnly:!0})],c.prototype,"type",void 0);c=d([a.subclass("esri.widgets.SymbolStyler.WebStyleSymbolSource")],
c);k.WebStyleSymbolSource=c;c=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.data=D;a.id="basic-symbol-set";a.name="Basic";a.title=e.basic;a.type="symbol-set";return a}l(a,b);a.prototype.getItems=function(){return g.resolve(null)};return a}(a.declared(f));d([a.property()],c.prototype,"data",void 0);d([a.property()],c.prototype,"id",void 0);d([a.property()],c.prototype,"name",void 0);d([a.property()],c.prototype,"title",void 0);d([a.property({readOnly:!0})],c.prototype,"type",
void 0);c=d([a.subclass("esri.widgets.SymbolStyler.BasicSymbolSetSource")],c);k.BasicSymbolSetSource=c;c=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.data={items:E};b.id="basic-web-style:flat";b.name="Basic";b.title=e.basic;b.type="web-style";return b}l(b,a);b.prototype.getItems=function(){if(this._items)return g.resolve(this._items);var b=this.data.items.map(function(b){return new h({data:b,strategy:H})});return g.resolve(this._items=b)};return b}(a.declared(f));d([a.property()],
c.prototype,"data",void 0);d([a.property()],c.prototype,"id",void 0);d([a.property()],c.prototype,"name",void 0);d([a.property()],c.prototype,"title",void 0);d([a.property({readOnly:!0})],c.prototype,"type",void 0);c=d([a.subclass("esri.widgets.SymbolStyler.IconPrimitiveWebStyleSource")],c);k.IconPrimitiveWebStyleSource=c;f=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.data={items:F};a.id="basic-web-style:volumetric";a.name="Basic";a.title=e.basic;a.type="web-style";return a}
l(a,b);a.prototype.getItems=function(){var a=this;if(this._items)return g.resolve(this._items);var b=this.data.items.map(function(b){return new h({data:b,parentData:a.data,strategy:I})});return g.resolve(this._items=b)};return a}(a.declared(f));d([a.property()],f.prototype,"data",void 0);d([a.property()],f.prototype,"id",void 0);d([a.property()],f.prototype,"name",void 0);d([a.property()],f.prototype,"title",void 0);d([a.property({readOnly:!0})],f.prototype,"type",void 0);f=d([a.subclass("esri.widgets.SymbolStyler.ObjectPrimitiveWebStyleSource")],
f);k.ObjectPrimitiveWebStyleSource=f});