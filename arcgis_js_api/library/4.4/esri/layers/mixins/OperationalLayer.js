// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.4/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/MultiOriginJSONSupport ../../core/Error ../../core/urlUtils ../../core/accessorSupport/read".split(" "),function(c,p,g,d,a,h,k,e,f,l){c=function(c){function a(){var a=null!==c&&c.apply(this,arguments)||this;a.title="Layer";return a}g(a,c);a.prototype.writeListMode=function(a,b){a&&(b.listMode=a)};a.prototype.writeTitle=function(a,
b){b.title=a||"Layer"};a.prototype.writeUrl=function(a,b){a&&f.isProtocolRelative(a)&&(a="https:"+a);b.url=a?f.normalize(a):a};a.prototype.writeOperationalLayerType=function(a,b){a&&(b.layerType=a)};a.prototype.readOpacity=function(a,b,c){if(void 0!==b.opacity&&(!c||"web-map"===c.origin||"web-scene"===c.origin))return b.opacity;if((!c||"service"===c.origin)&&b.drawingInfo&&void 0!==b.drawingInfo.transparency)return 1-b.drawingInfo.transparency/100;if(b.layerDefinition&&b.layerDefinition.drawingInfo&&
void 0!==b.layerDefinition.drawingInfo.transparency)return 1-b.layerDefinition.drawingInfo.transparency/100};a.prototype.readVisible=function(a,b){return!!b.visibility};a.prototype.read=function(a,b){var c=this,d=arguments;b&&(b.layer=this);l.readLoadable(this,a,function(b){return c.inherited(d,[a,b])},b);return this};a.prototype.write=function(a,b){if(b&&b.origin){var c=b.origin+"/"+(b.layerContainerType||"operational-layers"),d=m[c];if(d&&!d[this.operationalLayerType])return b.messages&&b.messages.push(new e("layer:unsupported",
"Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' are not supported in the context of '"+c+"'",{layer:this})),null;if(!this.url&&!n[this.operationalLayerType])return b.messages&&b.messages.push(new e("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' require a url to a service to be written to a '"+b.origin+"'",{layer:this})),null}return this.inherited(arguments,[a,b])};return a}(a.declared(h,k));d([a.property({json:{write:{ignoreOrigin:!0}}})],
c.prototype,"id",void 0);d([a.property()],c.prototype,"listMode",void 0);d([a.writer("listMode")],c.prototype,"writeListMode",null);d([a.property({json:{write:{ignoreOrigin:!0,allowNull:!0}}})],c.prototype,"title",void 0);d([a.writer("title")],c.prototype,"writeTitle",null);d([a.property({json:{write:{ignoreOrigin:!0}}})],c.prototype,"url",void 0);d([a.writer("url")],c.prototype,"writeUrl",null);d([a.property({json:{write:{target:"layerType",ignoreOrigin:!0}}})],c.prototype,"operationalLayerType",
void 0);d([a.writer("operationalLayerType")],c.prototype,"writeOperationalLayerType",null);d([a.property({json:{write:{ignoreOrigin:!0}}})],c.prototype,"opacity",void 0);d([a.reader("opacity",["opacity","layerDefinition.drawingInfo.transparency","drawingInfo.transparency"])],c.prototype,"readOpacity",null);d([a.property({json:{write:{target:"visibility",ignoreOrigin:!0}}})],c.prototype,"visible",void 0);d([a.reader("visible",["visibility"])],c.prototype,"readVisible",null);c=d([a.subclass("esri.layers.mixins.OperationalLayer")],
c);var n={GroupLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,ArcGISFeatureLayer:!0,CSV:!0,VectorTileLayer:!0},m={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,VectorTileLayer:!0},"web-scene/basemap":{ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,
ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0},"web-map/operational-layers":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGSFeatureLayer:!0,CSV:!0,GeoRSS:!0,KML:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,
ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,bingLayer:!0}};return c});