// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.4/esri/copyright.txt for details.
//>>built
define("require exports dojo/_base/lang ../../core/Accessor ../../core/Collection ../../core/accessorSupport/utils".split(" "),function(z,h,g,v,k,w){function t(a){return a instanceof k?Object.keys(a.items):a instanceof v?w.getProperties(a).keys():a?Object.keys(a):[]}function q(a,b){return a instanceof k?a.items[b]:a[b]}function x(a,b){return Array.isArray(a)&&Array.isArray(b)?a.length!==b.length:!1}function l(a){return a?a.declaredClass:null}function u(a,b){var f=a.diff;if(f&&g.isFunction(f))return f(a,
b);var m=t(a),n=t(b);if(0!==m.length||0!==n.length){if(!m.length||!n.length||x(a,b))return{type:"complete",oldValue:a,newValue:b};var p=n.filter(function(a){return-1===m.indexOf(a)}),c=m.filter(function(a){return-1===n.indexOf(a)}),p=m.filter(function(c){return-1<n.indexOf(c)&&q(a,c)!==q(b,c)}).concat(p,c).sort();if((c=l(a))&&-1<y.indexOf(c)&&p.length)return{type:"complete",oldValue:a,newValue:b};var r,h;for(h in p){var c=p[h],d=q(a,c),e=q(b,c),k=void 0;g.isFunction(d)||g.isFunction(e)||d===e||null==
d&&null==e||!(k=f&&f[c]&&g.isFunction(f[c])?f[c](d,e):"object"===typeof d&&"object"===typeof e&&l(d)===l(e)?u(d,e):{type:"complete",oldValue:d,newValue:e})||(r=r||{type:"partial",diff:{}},r.diff[c]=k)}return r}}Object.defineProperty(h,"__esModule",{value:!0});var y=["esri.Color","esri.portal.Portal"];h.diff=function(a,b){if(!g.isFunction(a)&&!g.isFunction(b)&&(a||b))return!a||!b||"object"===typeof a&&"object"===typeof a&&l(a)!==l(b)?{type:"complete",oldValue:a,newValue:b}:u(a,b)}});