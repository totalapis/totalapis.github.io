// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.4/esri/copyright.txt for details.
//>>built
define("require exports ../core/tsSupport/extendsHelper ../core/tsSupport/decorateHelper ../core/typescript ../geometry/SpatialReference ../geometry/support/jsonUtils ./core/messageHandler ./core/MessageReceiver ./GraphicsLayerProxy".split(" "),function(c,n,h,e,f,k,g,d,l,m){c=function(c){function b(a){a=c.call(this)||this;a._listeningToMap=!1;a.id=null;a.name=null;a.spatialReference=null;return a}h(b,c);b.prototype._setConfig=function(a){this.inherited(arguments);this.spatialReference=new k(a.spatialReference)};
b.prototype._messageReceived=function(a){if(void 0!==a.args&&void 0!==a.args.mapWidgetId&&this.id===a.args.mapWidgetId)switch(a.functionName.toLowerCase()){case "extentchanged":return this._mapExtentChanged(a.args)}};b.prototype._mapExtentChanged=function(a){a=g.fromJSON(a.extent);this.mapExtentChanged(a);this.emit("map-extent-change",{extent:a})};b.prototype.subscribeToMapEvents=function(){this._listeningToMap||(this._listeningToMap=!0,d._sendMessage({functionName:"subscribeToMapEvents",args:{mapWidgetId:this.id}}))};
b.prototype.unsubscribeFromMapEvents=function(){this._listeningToMap&&(this._listeningToMap=!1,d._sendMessage({functionName:"unsubscribeFromMapEvents",args:{mapWidgetId:this.id}}))};b.prototype.mapExtentChanged=function(a){};b.prototype.getMapExtent=function(){return d._sendMessageWithReply({functionName:"getExtent",args:{mapWidgetId:this.id}}).then(function(a){return g.fromJSON(a.extent)})};b.prototype.setExtent=function(a){a&&a.type&&"extent"===a.type&&d._sendMessage({functionName:"setExtent",args:{mapWidgetId:this.id,
extent:a.toJSON()}})};b.prototype.panTo=function(a){a&&a.type&&"point"===a.type&&d._sendMessage({functionName:"panTo",proxyName:"MapWidgetProxy",args:{mapWidgetId:this.id,mapPoint:a.toJSON()}})};b.prototype.createGraphicsLayerProxy=function(a){var b=this,c={functionName:"createGraphicsLayer",args:{mapWidgetId:this.id,visible:a&&a.visible?a.visible:!0,opacity:a&&a.opacity?a.opacity:1,minScale:a&&a.minScale?a.minScale:0,maxScale:a&&a.maxScale?a.maxScale:0,renderer:a&&a.renderer?a.renderer.toJson():
void 0}};return d._sendMessageWithReply(c).then(function(c){return new m(b,c.graphicsLayerId,a)})};b.prototype.destroyGraphicsLayerProxy=function(a){a&&d._sendMessage({functionName:"removeGraphicsLayer",args:{mapWidgetId:this.id,graphicsLayerId:a._id}})};return b}(l);e([f.shared("esri.opsdashboard.MapWidgetProxy")],c.prototype,"declaredClass",void 0);return c=e([f.subclass()],c)});