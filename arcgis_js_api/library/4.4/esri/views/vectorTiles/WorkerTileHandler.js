// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.4/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/vectorTiles/WorkerTile":function(){define("require exports dojo/Deferred ../../core/promiseUtils ../../core/executeAsync ../../core/ObjectPool ./VertexMemoryBuffer ./IndexMemoryBuffer ./TileParser ./BackgroundBucket ./FillBucket ./LineBucket ./SymbolBucket ./Placement ./GeometryUtils".split(" "),function(u,a,b,r,n,l,k,c,d,h,g,m,C,y,F){u=function(){function a(){this.status=this.rotation=0;this._symbolBuckets=[];this.placementEngine=new y.PlacementEngine;this.polygonVertexBuffer=
new k.PolygonMemoryBuffer;this.polygonOutlineVertexBuffer=new k.PolygonOutlineMemoryBuffer;this.polygonIndexBuffer=new c.TriangleElementMemoryBuffer;this.polygonOutlineIndexBuffer=new c.TriangleElementMemoryBuffer;this.lineVertexBuffer=new k.LineMemoryBuffer;this.lineIndexBuffer=new c.TriangleElementMemoryBuffer;this.markerVertexBuffer=new k.SymbolMemoryBuffer;this.markerIndexBuffer=new c.TriangleElementMemoryBuffer;this.textVertexBuffer=new k.SymbolMemoryBuffer;this.textIndexBuffer=new c.TriangleElementMemoryBuffer}
a.prototype.initialize=function(a,c,d,g){void 0===g&&(g=0);this.tileKey=a;this.refKey=c;this._workerTileHandler=d;this.rotation=g;this.placementEngine.setAngle(F.C_DEG_TO_RAD*g)};a.prototype.release=function(){this.tileKey=this.refKey="";this.rotation=this.status=0;this.polygonVertexBuffer.reset();this.polygonOutlineVertexBuffer.reset();this.polygonIndexBuffer.reset();this.polygonOutlineIndexBuffer.reset();this.lineVertexBuffer.reset();this.lineIndexBuffer.reset();this.markerVertexBuffer.reset();
this.markerIndexBuffer.reset();this.textVertexBuffer.reset();this.textIndexBuffer.reset();this.placementEngine.reset();this._symbolBuckets.length=0;this._workerTileHandler=null};a.prototype.setDataAndParse=function(a,c){var d=this,k=new b(function(a){d.status=6});this._parse(a,c).then(function(a){d.status=4;for(var c=new Uint32Array([2,d.polygonVertexBuffer.sizeInBytes,3,d.polygonOutlineVertexBuffer.sizeInBytes,6,d.polygonIndexBuffer.sizeInBytes,7,d.polygonOutlineIndexBuffer.sizeInBytes,0,d.lineVertexBuffer.sizeInBytes,
8,d.lineIndexBuffer.sizeInBytes,4,d.markerVertexBuffer.sizeInBytes,9,d.markerIndexBuffer.sizeInBytes,5,d.textVertexBuffer.sizeInBytes,10,d.textIndexBuffer.sizeInBytes]),b=[],l=a.length,r=0;r<l;r++){var y=a[r];if(y instanceof g)b.push(y.layerIndex),b.push(1),b.push(y.polygonIndexStart),b.push(y.polygonIndexCount),b.push(y.polygonOutlineIndexStart),b.push(y.polygonOutlineIndexCount);else if(y instanceof m)b.push(y.layerIndex),b.push(2),b.push(y.triangleIndexStart),b.push(y.triangleIndexCount),b.push(y.connectorStart),
b.push(y.connectorCount);else if(y instanceof C){b.push(y.layerIndex);b.push(3);b.push(y.sdfMarker?1:0);var B=y.markerPageMap;b.push(B.size);B.forEach(function(a,c){b.push(c);b.push(a[0]);b.push(a[1])});y=y.glyphsPageMap;b.push(y.size);y.forEach(function(a,c){b.push(c);b.push(a[0]);b.push(a[1])})}else y instanceof h&&(b.push(y.layerIndex),b.push(0))}a=new Uint32Array(b);var l=d.polygonVertexBuffer.toBuffer(),r=d.polygonOutlineVertexBuffer.toBuffer(),y=d.polygonIndexBuffer.toBuffer(),B=d.polygonOutlineIndexBuffer.toBuffer(),
A=d.lineVertexBuffer.toBuffer(),D=d.lineIndexBuffer.toBuffer(),n=d.markerVertexBuffer.toBuffer(),p=d.markerIndexBuffer.toBuffer(),F=d.textVertexBuffer.toBuffer(),w=d.textIndexBuffer.toBuffer();k.resolve({data:{bufferDataInfo:c.buffer,bucketDataInfo:a.buffer,bufferData:[l,r,y,B,A,D,n,p,F,w]},buffers:[l,y,r,B,A,D,n,p,F,w,c.buffer,a.buffer]})});return k.promise};a.prototype.addBucket=function(a){this._symbolBuckets.push(a)};a.prototype.updateSymbols=function(a){var c=this,d=this._symbolBuckets;if(!d||
0===d.length)return r.resolve({data:null});this.rotation=a;var g=this.placementEngine;g.reset();g.setAngle(a/256*360*F.C_DEG_TO_RAD);var h=this.markerVertexBuffer;h.reset();var b=this.markerIndexBuffer;b.reset();var k=this.textVertexBuffer;k.reset();var m=this.textIndexBuffer;m.reset();var y=[],C=d.length,B=0;return n(function(){if(6===c.status||0===c.status)return!0;if(B<C){var a=d[B++].copy(h,b,k,m,g);a&&(y.push(a),a.updateSymbols())}return B>=C},5).then(function(){if(6===c.status||0===c.status||
0===h.sizeInBytes&&0===b.sizeInBytes&&0===k.sizeInBytes&&0===m.sizeInBytes)return{data:null};var a=new Uint32Array([4,h.sizeInBytes,9,b.sizeInBytes,5,k.sizeInBytes,10,m.sizeInBytes]),d=[];C=y.length;for(var g=0;g<C;g++){var B=y[g];d.push(B.layerIndex);d.push(3);d.push(B.sdfMarker?1:0);var v=B.markerPageMap;d.push(v.size);v.forEach(function(a,c){d.push(c);d.push(a[0]);d.push(a[1])});B=B.glyphsPageMap;d.push(B.size);B.forEach(function(a,c){d.push(c);d.push(a[0]);d.push(a[1])})}var g=new Uint32Array(d),
B=h.toBuffer(),v=b.toBuffer(),l=k.toBuffer(),r=m.toBuffer();return{data:{bufferDataInfo:a.buffer,bucketDataInfo:g.buffer,bufferData:[B,v,l,r]},buffers:[B,v,l,r,a.buffer,g.buffer]}}).otherwise(function(a){return r.resolve({data:null})})};a.prototype.setObsolete=function(){this.status=6};a.prototype.getLayers=function(){return this._workerTileHandler.getLayers()};a.prototype.getWorkerTileHandler=function(){return this._workerTileHandler};a.prototype._parse=function(a,c){if(!a||0===a.byteLength)return r.resolve([]);
this.status=2;return(new d(a,this,c)).parse()};return a}();u.pool=new l(u);return u})},"esri/core/executeAsync":function(){define(["require","exports","dojo/Deferred","./now"],function(u,a,b,r){return function(a,l){var k;if(!l||0>=l)l=500;var c=new b(function(){k&&clearTimeout(k)}),d=function(){if(!c.isFulfilled()){for(var h=r(),g=!1;!g&&r()-h<l;)g=!0===a();g?c.resolve():k=setTimeout(d,0)}};k=setTimeout(d,0);return c.promise}})},"esri/views/vectorTiles/VertexMemoryBuffer":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./MemoryBuffer ./GeometryUtils".split(" "),
function(u,a,b,r,n,l){Object.defineProperty(a,"__esModule",{value:!0});u=function(a){function c(){return a.call(this,12)||this}b(c,a);c.prototype.add=function(a,c,g,b,k,y,l){var d=this.array,h=this.index;a=n.i1616to32(a,c);d.push(a);a=n.i8888to32(Math.round(31*g),Math.round(31*b),Math.round(31*k),Math.round(31*y));d.push(a);a=n.i1616to32(l,0);d.push(a);return h};return c}(n);a.LineMemoryBuffer=u;u=function(a){function c(){return a.call(this,4)||this}b(c,a);c.prototype.add=function(a,c){var d=this.index;
this.array.push(n.i1616to32(a,c));return d};return c}(n);a.LineJoinMemoryBuffer=u;u=function(a){function c(){return a.call(this,4)||this}b(c,a);c.prototype.add=function(a,c){this.array.push(n.i1616to32(a,c))};return c}(n);a.PolygonMemoryBuffer=u;u=function(a){function c(){return a.call(this,8)||this}b(c,a);c.prototype.add=function(a,c,g,b,k,y){var d=this.array,h=this.index;a=n.i1616to32(a,c);d.push(a);a=n.i8888to32(Math.round(15*g),Math.round(15*b),k,y);d.push(a);return h};return c}(n);a.PolygonOutlineMemoryBuffer=
u;u=function(a){function c(){return a.call(this,16)||this}b(c,a);c.prototype.add=function(a,c,g,b,k,y,r,t,p,x){var d=this.array,h=this.index;a=n.i1616to32(a,c);d.push(a);a=n.i1616to32(Math.round(32*g),Math.round(32*b));d.push(a);a=n.i8888to32(k/4,y/4,0,0);d.push(a);a=n.i8888to32(Math.ceil(10*x),l.radToByte(r),10*t,10*Math.min(p,25));d.push(a);return h};return c}(n);a.SymbolMemoryBuffer=u})},"esri/views/vectorTiles/MemoryBuffer":function(){define(["require","exports"],function(u,a){return function(){function a(a){this._array=
[];0>=a&&console.error("strideInBytes must be positive!");this._stride=a}Object.defineProperty(a.prototype,"array",{get:function(){return this._array},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sizeInBytes",{get:function(){return 4*
this._array.length},enumerable:!0,configurable:!0});a.prototype.reset=function(){this.array.length=0};a.prototype.toBuffer=function(){return(new Uint32Array(this._array)).buffer};a.i1616to32=function(a,b){return 65535&a|b<<16};a.i8888to32=function(a,b,l,k){return a&255|(b&255)<<8|(l&255)<<16|k<<24};a.i8816to32=function(a,b,l){return a&255|(b&255)<<8|l<<16};return a}()})},"esri/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(u,a){function b(a,b){a%=b;return 0<=a?a:
a+b}Object.defineProperty(a,"__esModule",{value:!0});a.C_INFINITY=Number.POSITIVE_INFINITY;a.C_PI=Math.PI;a.C_2PI=2*a.C_PI;a.C_PI_BY_2=a.C_PI/2;a.C_RAD_TO_256=128/a.C_PI;a.C_256_TO_RAD=a.C_PI/128;a.C_DEG_TO_256=256/360;a.C_DEG_TO_RAD=a.C_PI/180;a.C_SQRT2=1.414213562;a.C_SQRT2_INV=1/a.C_SQRT2;var r=1/Math.LN2;a.positiveMod=b;a.radToByte=function(r){return b(r*a.C_RAD_TO_256,256)};a.degToByte=function(r){return b(r*a.C_DEG_TO_256,256)};a.log2=function(a){return Math.log(a)*r};a.sqr=function(a){return a*
a};a.clamp=function(a,b,k){return Math.min(Math.max(a,b),k)};a.interpolate=function(a,b,k){return a*(1-k)+b*k};a.between=function(a,b,k){return a>=b&&a<=k||a>=k&&a<=b}})},"esri/views/vectorTiles/IndexMemoryBuffer":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./MemoryBuffer"],function(u,a,b,r,n){Object.defineProperty(a,"__esModule",{value:!0});u=function(a){function k(){return a.call(this,12)||this}b(k,a);k.prototype.add=function(a,
d,h){var c=this.array;c.push(a);c.push(d);c.push(h)};return k}(n);a.TriangleElementMemoryBuffer=u;n=function(a){function k(){return a.call(this,4)||this}b(k,a);k.prototype.add=function(a){this.array.push(a)};return k}(n);a.PointElementMemoryBuffer=n})},"esri/views/vectorTiles/TileParser":function(){define("require exports dojo/promise/all ../../core/promiseUtils ../../core/executeAsync ../../core/pbf ./SourceLayerData ./Feature ./BackgroundBucket ./FillBucket ./LineBucket ./SymbolBucket ./TileClipper".split(" "),
function(u,a,b,r,n,l,k,c,d,h,g,m,C){return function(){function a(a,c,d){this._pbfTile=new l(new Uint8Array(a),new DataView(a));this._tile=c;this._connection=d;this._layers=c.getLayers();d=c.tileKey.split("/").map(parseFloat);var g=d[0];a=d[1];d=d[2];this._level=g;c.refKey&&(c=c.refKey.split("/").map(parseFloat)[0],c=g-c,0<c&&(g=(1<<c)-1,this._tileClipper=new C.TileClipper(c,a&g,d&g)));this._tileClipper||(this._tileClipper=new C.SimpleBuilder)}a.prototype.parse=function(){for(var a=this,d=this._parseTileData(this._pbfTile),
g=this._layers,h=g.length,k=this._level,m,y=[],v={},C=new Set,h=h-1;0<=h;h--)if(m=g[h],!(m.minzoom&&k<m.minzoom||m.maxzoom&&k>=m.maxzoom||m.layout&&"none"===m.layout.visibility))if(0===m.type)m=this._createBucket(m),y.push(m);else{var l=m.sourceLayer,I=d[l];I&&(C.add(l),m=this._createBucket(m))&&(m.layerIndex=h,m.layerExtent=I.extent,(I=v[l])||(I=v[l]=[]),I.push(m))}var M=10*(this._level+1),B=[],A=[],D=[],ba=[],aa=this._tileClipper,S=new Set,w={},U=[];C.forEach(function(a){return U.push(a)});var u=
0,N=0,P=U.length;return n(function(){if(6===a._tile.status)return!0;switch(u){case 0:if(N<P){var g=U[N++],h=d[g],b=v[g];if(b&&0!==b.length)for(g=h.getData();g.next(2);){var k=new c(g.getMessage(),h),m=k.values;if(m&&(m=m._minzoom)&&m>=M)continue;for(var y=0,C=b;y<C.length;y++)m=C[y],m.pushFeature(k)}}else{h=a._tile;for(g in v)for(b=v[g],k=0;k<b.length;k++)m=b[k],m.hasFeatures()&&(3===m.layer.type?(B.push(m),h.addBucket(m)):m.layer.refLayerId?D.push(m):(A.push(m),ba[m.layer.id]=m));u=1;N=0;P=B.length}break;
case 1:N<P?B[N++].getResources(aa,S,w):u=2}return 2===u},50).then(function(){if(6===a._tile.status)return[];var c=[],d=a._tile.getWorkerTileHandler(),g;0<S.size&&(g=d.fetchSprites(S,a._connection),c.push(g));for(var h in w)g=w[h],0<g.size&&(g=d.fetchGlyphs(a._tile.tileKey,h,g,a._connection),c.push(g));return b(c).then(function(c){if(6===a._tile.status)return[];var d=0,g=0,h=A.length;return n(function(){if(6===a._tile.status)return!0;switch(d){case 0:if(g<h){var c=A[g++];c.processFeatures(aa,a._tile);
y.push(c)}else d=1,g=0,h=D.length;break;case 1:for(var b=0;b<D.length;b++){var c=D[b],m=ba[c.layer.refLayerId];m&&(m.assignBufferInfo(c),y.push(c))}d=2;g=0;h=B.length;break;case 2:g<h?(c=B[g++],c.processFeatures(aa,a._tile),y.push(c)):d=3}return 3===d},50).then(function(){y.sort(function(a,c){return a.layerIndex-c.layerIndex});return y})}).otherwise(function(a){return r.reject(Error(a))})}).otherwise(function(a){return r.reject(Error(a))})};a.prototype._parseTileData=function(a){for(var c={};a.next();)switch(a.tag()){case 3:var d=
new k(a.getMessage());c[d.name]=d;break;default:a.skip()}return c};a.prototype._createBucket=function(a){switch(a.type){case 0:return this._createBackgroundBucket(a);case 1:return this._createFillBucket(a);case 2:return this._createLineBucket(a);case 3:return this._createSymbolBucket(a)}};a.prototype._createBackgroundBucket=function(a){return new d(a,this._level)};a.prototype._createFillBucket=function(a){var c=this._tile;return new h(a,this._level,c.polygonVertexBuffer,c.polygonIndexBuffer,c.polygonOutlineVertexBuffer,
c.polygonOutlineIndexBuffer)};a.prototype._createLineBucket=function(a){var c=this._tile;return new g(a,this._level,c.lineVertexBuffer,c.lineIndexBuffer)};a.prototype._createSymbolBucket=function(a){var c=this._tile;return new m(a,this._level,c.markerVertexBuffer,c.markerIndexBuffer,c.textVertexBuffer,c.textIndexBuffer,c.placementEngine,c.getWorkerTileHandler())};return a}()})},"esri/core/pbf":function(){define(["require","exports"],function(u,a){return function(){function a(a,b,l,k){this._tag=0;
this._dataType=99;this._data=a;this._dataView=b;this._pos=l||0;this._end=k||a.byteLength}a.prototype.clone=function(){return new a(this._data,this._dataView,this._pos,this._end)};a.prototype.next=function(a){for(;;){if(this._pos===this._end)return!1;var b=this._decodeVarint();this._tag=b>>3;this._dataType=b&7;if(!a||a===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=function(){return this._decodeVarint()};
a.prototype.getInt64=function(){return this._decodeVarint()};a.prototype.getUInt32=function(){return this._decodeVarint()};a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=function(){return this._decodeSVarint()};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=function(){var a=0!==this._data[this._pos];this._skip(1);return a};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=function(){var a=this._dataView,
b=this._pos,a=a.getUint32(b,!0)+4294967296*a.getUint32(b+4,!0);this._skip(8);return a};a.prototype.getSFixed64=function(){var a=this._dataView,b=this._pos,a=a.getUint32(b,!0)+4294967296*a.getInt32(b+4,!0);this._skip(8);return a};a.prototype.getDouble=function(){var a=this._dataView.getFloat64(this._pos,!0);this._skip(8);return a};a.prototype.getFixed32=function(){var a=this._dataView.getUint32(this._pos,!0);this._skip(4);return a};a.prototype.getSFixed32=function(){var a=this._dataView.getInt32(this._pos,
!0);this._skip(4);return a};a.prototype.getFloat=function(){var a=this._dataView.getFloat32(this._pos,!0);this._skip(4);return a};a.prototype.getString=function(){var a=this._getLength(),b=this._pos,b=this._toString(this._data,b,b+a);this._skip(a);return b};a.prototype.getBytes=function(){var a=this._getLength(),b=this._pos,b=this._toBytes(this._data,b,b+a);this._skip(a);return b};a.prototype.getMessage=function(){var b=this._getLength(),n=this._pos,n=new a(this._data,this._dataView,n,n+b);this._skip(b);
return n};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(a){if(this._pos+a>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=a};a.prototype._decodeVarint=function(){var a=this._data,b=this._pos,l=0,k;if(10<=this._end-b){if(k=a[b++],l|=k&127,0!==(k&128)&&(k=a[b++],l|=(k&
127)<<7,0!==(k&128)&&(k=a[b++],l|=(k&127)<<14,0!==(k&128)&&(k=a[b++],l|=(k&127)<<21,0!==(k&128)&&(k=a[b++],l+=268435456*(k&127),0!==(k&128)&&(k=a[b++],l+=34359738368*(k&127),0!==(k&128)&&(k=a[b++],l+=4398046511104*(k&127),0!==(k&128)&&(k=a[b++],l+=562949953421312*(k&127),0!==(k&128)&&(k=a[b++],l+=72057594037927936*(k&127),0!==(k&128)&&(k=a[b++],l+=0x7fffffffffffffff*(k&127),0!==(k&128)))))))))))throw Error("Varint too long!");}else{for(var c=1;b!==this._end;){k=a[b];if(0===(k&128))break;++b;l+=(k&
127)*c;c*=128}if(b===this._end)throw Error("Varint overrun!");++b;l+=k*c}this._pos=b;return l};a.prototype._decodeSVarint=function(){var a=this._decodeVarint();return a%2?-(a+1)/2:a/2};a.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(a,b,l){var k="",c="";for(l=Math.min(this._end,l);b<l;++b){var d=a[b];d&128?c+="%"+d.toString(16):(k+=decodeURIComponent(c)+String.fromCharCode(d),c="")}c.length&&
(k+=decodeURIComponent(c));return k};a.prototype._toBytes=function(a,b,l){l=Math.min(this._end,l);return new Uint8Array(a.buffer,b,l-b)};return a}()})},"esri/views/vectorTiles/SourceLayerData":function(){define(["require","exports"],function(u,a){return function(){function a(b){this.extent=4096;this.keys=[];this.values=[];for(this._pbfLayer=b.clone();b.next();)switch(b.tag()){case 1:this.name=b.getString();break;case 3:this.keys.push(b.getString());break;case 4:this.values.push(a._parseValue(b.getMessage()));
break;case 5:this.extent=b.getUInt32();break;default:b.skip()}}a.prototype.getData=function(){return this._pbfLayer};a._parseValue=function(a){for(;a.next();)switch(a.tag()){case 1:return a.getString();case 2:return a.getFloat();case 3:return a.getDouble();case 4:return a.getInt64();case 5:return a.getUInt64();case 6:return a.getSInt64();case 7:return a.getBool();default:a.skip()}return null};return a}()})},"esri/views/vectorTiles/Feature":function(){define(["require","exports","./Geometry"],function(u,
a,b){return function(){function a(a,b){this.values={};var k=b.keys;for(b=b.values;a.next();)switch(a.tag()){case 1:this.id=a.getUInt64();break;case 2:for(var c=a.getMessage(),d=this.values;!c.empty();){var h=c.getUInt32(),g=c.getUInt32();d[k[h]]=b[g]}break;case 3:this.type=a.getUInt32();break;case 4:this._pbfGeometry=a.getMessage();break;default:a.skip()}}a.prototype.getGeometry=function(a){if(void 0!==this._geometry)return this._geometry;var l=this._pbfGeometry,k,c;a?a.reset(this.type):k=[];for(var d=
1,h=0,g=0,m=0;!l.empty();)switch(0===h&&(h=l.getUInt32(),d=h&7,h>>=3),h--,d){case 1:g+=l.getSInt32();m+=l.getSInt32();a?a.moveTo(g,m):(c&&k.push(c),c=[],c.push(new b.Point(g,m)));break;case 2:g+=l.getSInt32();m+=l.getSInt32();a?a.lineTo(g,m):c.push(new b.Point(g,m));break;case 7:a?a.close():c&&!c[0].equals(g,m)&&c.push(c[0].clone());break;default:throw Error("Invalid path operation");}a?a=a.result():(c&&k.push(c),a=k);return this._geometry=a};return a}()})},"esri/views/vectorTiles/Geometry":function(){define(["require",
"exports"],function(u,a){Object.defineProperty(a,"__esModule",{value:!0});u=function(){function a(a,b){this.x=a;this.y=b}a.prototype.clone=function(){return new a(this.x,this.y)};a.prototype.equals=function(a,b){return a===this.x&&b===this.y};a.prototype.isEqual=function(a){return a.x===this.x&&a.y===this.y};a.prototype.setCoords=function(a,b){this.x=a;this.y=b};a.prototype.normalize=function(){var a=this.x,b=this.y,a=Math.sqrt(a*a+b*b);this.x/=a;this.y/=a};a.prototype.rightPerpendicular=function(){var a=
this.x;this.x=this.y;this.y=-a};a.prototype.move=function(a,b){this.x+=a;this.y+=b};a.prototype.assign=function(a){this.x=a.x;this.y=a.y};a.prototype.assignAdd=function(a,b){this.x=a.x+b.x;this.y=a.y+b.y};a.prototype.assignSub=function(a,b){this.x=a.x-b.x;this.y=a.y-b.y};a.prototype.rotate=function(a,b){var l=this.x,k=this.y;this.x=l*a-k*b;this.y=l*b+k*a};a.prototype.scale=function(a){this.x*=a;this.y*=a};a.prototype.length=function(){var a=this.x,b=this.y;return Math.sqrt(a*a+b*b)};a.distance=function(a,
b){var l=b.x-a.x;a=b.y-a.y;return Math.sqrt(l*l+a*a)};a.add=function(b,n){return new a(b.x+n.x,b.y+n.y)};a.sub=function(b,n){return new a(b.x-n.x,b.y-n.y)};return a}();a.Point=u})},"esri/views/vectorTiles/BackgroundBucket":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./Bucket"],function(u,a,b,r,n){return function(a){function k(c,d){return a.call(this,c,d)||this}b(k,a);return k}(n)})},"esri/views/vectorTiles/Bucket":function(){define(["require",
"exports"],function(u,a){return function(){function a(a,b){this.layerExtent=4096;this._features=[];this.layer=a;this.zoom=b;this._filter=a.getFeatureFilter()}a.prototype.pushFeature=function(a){this._filter.filter(a)&&this._features.push(a)};a.prototype.hasFeatures=function(){return 0<this._features.length};a.prototype.processFeatures=function(a,b){};a.prototype.assignBufferInfo=function(a){};return a}()})},"esri/views/vectorTiles/FillBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./Geometry ../../core/libs/earcut/earcut".split(" "),
function(u,a,b,r,n,l,k){return function(a){function c(c,d,b,k,y,l){c=a.call(this,c,d)||this;c.polygonVertexBuffer=b;c.polygonIndexBuffer=k;c.polygonOutlineVertexBuffer=y;c.polygonOutlineIndexBuffer=l;return c}b(c,a);Object.defineProperty(c.prototype,"polygonIndexStart",{get:function(){return this._triangleElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"polygonIndexCount",{get:function(){return this._triangleElementsNum},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"polygonOutlineIndexStart",{get:function(){return this._outlineElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"polygonOutlineIndexCount",{get:function(){return this._outlineElementsNum},enumerable:!0,configurable:!0});c.prototype.assignBufferInfo=function(a){a._triangleElementsStart=this._triangleElementsStart;a._triangleElementsNum=this._triangleElementsNum;a.layer.hasPaintProperty("fill-outline-color")?(a._outlineElementsStart=this._outlineElementsStart,a._outlineElementsNum=
this._outlineElementsNum):(a._outlineElementsStart=0,a._outlineElementsNum=0)};c.prototype.processFeatures=function(a,c){this._triangleElementsStart=this.polygonIndexBuffer.index;this._triangleElementsNum=0;this._outlineElementsStart=this.polygonOutlineIndexBuffer.index;this._outlineElementsNum=0;a&&a.setExtent(this.layerExtent);c=this.layer.getPaintValue("fill-pattern",this.zoom);c=this.layer.getPaintValue("fill-antialias",this.zoom)&&void 0===c;for(var d=0,g=this._features;d<g.length;d++){var b=
g[d].getGeometry(a);this._processFeature(b,c)}};c.prototype._processFeature=function(a,d){if(a){var g=a.length;if(d)for(d=0;d<g;d++)this._processOutline(a[d]);var b;for(d=0;d<g;d++){var h=c._area(a[d]);128<h?(void 0!==b&&this._processFill(a,b),b=[d]):-128>h&&void 0!==b&&b.push(d)}void 0!==b&&this._processFill(a,b)}};c.prototype._processOutline=function(a){var c=this.polygonOutlineVertexBuffer,d=this.polygonOutlineIndexBuffer,b=d.index,h,k,t,p=new l.Point(0,0),x=new l.Point(0,0),E=new l.Point(0,0),
z=-1,G=-1,v=h=-1,L=-1,H=a.length;if(!(2>H)){var I=a[0];for(h=a[H-1];H&&h.isEqual(I);)--H,h=a[H-1];if(!(2>H-0)){for(I=0;I<H;++I){0===I?(h=a[H-1],k=a[0],t=a[1],p.assignSub(k,h),p.normalize(),p.rightPerpendicular()):(h=k,k=t,t=I!==H-1?a[I+1]:a[0],p.assign(x));x.assignSub(t,k);x.normalize();x.rightPerpendicular();h=p.x*x.y-p.y*x.x;E.assignAdd(p,x);E.normalize();var r=-E.x*-p.x+-E.y*-p.y,r=Math.abs(0!==r?1/r:1);8<r&&(r=8);0<=h?(h=c.add(k.x,k.y,p.x,p.y,0,1),-1===v&&(v=h),0<=z&&0<=G&&0<=h&&d.add(z,G,h),
G=c.add(k.x,k.y,r*-E.x,r*-E.y,0,-1),-1===L&&(L=G),0<=z&&0<=G&&0<=h&&d.add(z,G,h),z=G,G=h,h=c.add(k.x,k.y,E.x,E.y,0,1),0<=z&&0<=G&&0<=h&&d.add(z,G,h),G=c.add(k.x,k.y,x.x,x.y,0,1)):(h=c.add(k.x,k.y,r*E.x,r*E.y,0,1),-1===v&&(v=h),0<=z&&0<=G&&0<=h&&d.add(z,G,h),G=c.add(k.x,k.y,-p.x,-p.y,0,-1),-1===L&&(L=G),0<=z&&0<=G&&0<=h&&d.add(z,G,h),z=G,G=h,h=c.add(k.x,k.y,-E.x,-E.y,0,-1),0<=z&&0<=G&&0<=h&&d.add(z,G,h),z=c.add(k.x,k.y,-x.x,-x.y,0,-1));0<=z&&0<=G&&0<=h&&d.add(z,G,h)}0<=z&&0<=G&&0<=v&&d.add(z,G,v);
0<=z&&0<=v&&0<=L&&d.add(z,L,v);this._outlineElementsNum+=3*(d.index-b)}}};c.prototype._processFill=function(a,c){var d;1<c.length&&(d=[]);for(var g=0,b=0;b<c.length;b++){var h=c[b];0!==g&&d.push(g);g+=a[h].length}for(var g=2*g,b=new Float64Array(g),l=0,p=0;p<c.length;p++)for(var h=c[p],h=a[h],x=h.length,E=0;E<x;++E)b[l++]=h[E].x,b[l++]=h[E].y;a=k(b,d,2);c=a.length;if(0<c){d=this.polygonVertexBuffer.index;for(l=0;l<g;)this.polygonVertexBuffer.add(b[l++],b[l++]);for(g=0;g<c;)this.polygonIndexBuffer.add(d+
a[g++],d+a[g++],d+a[g++]);this._triangleElementsNum+=c}};c._area=function(a){for(var c=0,d=a.length-1,b=0;b<d;b++)c+=(a[b].x-a[b+1].x)*(a[b].y+a[b+1].y);c+=(a[d].x-a[0].x)*(a[d].y+a[0].y);return.5*c};return c}(n)})},"esri/core/libs/earcut/earcut":function(){define([],function(){function u(c,g,h){h=h||2;z=c.length/h+(g?2*g.length:0);G=!1;var m=g&&g.length,v=m?g[0]*h:c.length,B=a(c,0,v,h,!0),A=[];if(!B)return A;var D,C,y,p;if(m)a:{var w=h,m=[],L,H,t;p=0;for(L=g.length;p<L;p++)H=g[p]*w,t=p<L-1?g[p+1]*
w:c.length,H=a(c,H,t,w,!1),H===H.next&&(H.steiner=!0),m.push(d(H));m.sort(l);for(p=0;p<m.length;p++){if(!B){B=null;break a}g=m[p];w=B;if(w=k(g,w))g=F(w,g),b(g,g.next);B=b(B,B.next)}}if(G)return A;if(c.length>80*h){D=y=c[0];C=m=c[1];for(w=h;w<v;w+=h)p=c[w],g=c[w+1],p<D&&(D=p),g<C&&(C=g),p>y&&(y=p),g>m&&(m=g);y=Math.max(y-D,m-C)}r(B,A,h,D,C,y);return A}function a(a,c,d,g,b){var h;if(b===0<E(a,c,d,g))for(b=c;b<d;b+=g)h=t(b,a[b],a[b+1],h);else for(b=d-g;b>=c;b-=g)h=t(b,a[b],a[b+1],h);h&&m(h,h.next)&&
(p(h),h=h.next);return h}function b(a,c){if(!a)return a;c||(c=a);var d,b=0,h=z*z/2;do{d=!1;if(a.steiner||!m(a,a.next)&&0!==g(a.prev,a,a.next))a=a.next;else{p(a);a=c=a.prev;if(a===a.next)return null;d=!0}if(b++>h)return G=!0,null}while(d||a!==c);return c}function r(a,d,k,l,z,B,A){if(a){if(!A&&B){var D=a,v=D;do null===v.z&&(v.z=c(v.x,v.y,l,z,B)),v.prevZ=v.prev,v=v.nextZ=v.next;while(v!==D);v.prevZ.nextZ=null;v.prevZ=null;var D=v,L,t,w,H,x,E,I=1;do{v=D;w=D=null;for(H=0;v;){H++;t=v;for(L=x=0;L<I&&(x++,
t=t.nextZ,t);L++);for(E=I;0<x||0<E&&t;)0===x?(L=t,t=t.nextZ,E--):0!==E&&t?v.z<=t.z?(L=v,v=v.nextZ,x--):(L=t,t=t.nextZ,E--):(L=v,v=v.nextZ,x--),w?w.nextZ=L:D=L,L.prevZ=w,w=L;v=t}w.nextZ=null;I*=2}while(1<H)}for(D=a;a.prev!==a.next;){v=a.prev;t=a.next;if(B)a:{w=a;E=l;var M=z,u=B;H=w.prev;x=w;I=w.next;if(0<=g(H,x,I))w=!1;else{var ia=H.x>x.x?H.x>I.x?H.x:I.x:x.x>I.x?x.x:I.x,da=H.y>x.y?H.y>I.y?H.y:I.y:x.y>I.y?x.y:I.y;L=c(H.x<x.x?H.x<I.x?H.x:I.x:x.x<I.x?x.x:I.x,H.y<x.y?H.y<I.y?H.y:I.y:x.y<I.y?x.y:I.y,E,
M,u);E=c(ia,da,E,M,u);for(M=w.nextZ;M&&M.z<=E;){if(M!==w.prev&&M!==w.next&&h(H.x,H.y,x.x,x.y,I.x,I.y,M.x,M.y)&&0<=g(M.prev,M,M.next)){w=!1;break a}M=M.nextZ}for(M=w.prevZ;M&&M.z>=L;){if(M!==w.prev&&M!==w.next&&h(H.x,H.y,x.x,x.y,I.x,I.y,M.x,M.y)&&0<=g(M.prev,M,M.next)){w=!1;break a}M=M.prevZ}w=!0}}else w=n(a);if(w)d.push(v.i/k),d.push(a.i/k),d.push(t.i/k),p(a),D=a=t.next;else{if(G)break;a=t;if(a===D){if(!A)r(b(a),d,k,l,z,B,1);else if(1===A){A=d;D=k;v=a;do t=v.prev,w=v.next.next,!m(t,w)&&C(t,v,v.next,
w)&&y(t,w)&&y(w,t)&&(A.push(t.i/D),A.push(v.i/D),A.push(w.i/D),p(v),p(v.next),v=a=w),v=v.next;while(v!==a);a=v;r(a,d,k,l,z,B,2)}else if(2===A)a:{A=a;do{for(D=A.next.next;D!==A.prev;){if(v=A.i!==D.i){v=A;t=D;w=void 0;if(w=v.next.i!==t.i&&v.prev.i!==t.i){w=void 0;b:{w=v;do{if(w.i!==v.i&&w.next.i!==v.i&&w.i!==t.i&&w.next.i!==t.i&&C(w,w.next,v,t)){w=!0;break b}w=w.next}while(w!==v);w=!1}w=!w}H=void 0;if(H=w&&y(v,t)&&y(t,v)){w=v;H=!1;x=(v.x+t.x)/2;t=(v.y+t.y)/2;do w.y>t!==w.next.y>t&&x<(w.next.x-w.x)*
(t-w.y)/(w.next.y-w.y)+w.x&&(H=!H),w=w.next;while(w!==v)}v=H}if(v){a=F(A,D);A=b(A,A.next);a=b(a,a.next);r(A,d,k,l,z,B);r(a,d,k,l,z,B);break a}D=D.next}A=A.next}while(A!==a)}break}}}}}function n(a){var c=a.prev,d=a.next;if(0<=g(c,a,d))return!1;for(var b=a.next.next,k=0;b!==a.prev;){if(h(c.x,c.y,a.x,a.y,d.x,d.y,b.x,b.y)&&0<=g(b.prev,b,b.next))return!1;b=b.next;if(k++>z)return G=!0,!1}return!0}function l(a,c){return a.x-c.x}function k(a,c){var d=c,b=a.x,g=a.y,k=-Infinity,m;do{if(!d)return null;if(g<=
d.y&&g>=d.next.y){var D=d.x+(g-d.y)*(d.next.x-d.x)/(d.next.y-d.y);if(D<=b&&D>k){k=D;if(D===b){if(g===d.y)return d;if(g===d.next.y)return d.next}m=d.x<d.next.x?d:d.next}}d=d.next}while(d!==c);if(!m)return null;if(b===k)return m.prev;c=m;for(var D=m.x,v=m.y,l=Infinity,C,d=m.next;d!==c;)b>=d.x&&d.x>=D&&h(g<v?b:k,g,D,v,g<v?k:b,g,d.x,d.y)&&(C=Math.abs(g-d.y)/(b-d.x),(C<l||C===l&&d.x>m.x)&&y(d,a)&&(m=d,l=C)),d=d.next;return m}function c(a,c,d,b,g){a=32767*(a-d)/g;c=32767*(c-b)/g;a=(a|a<<8)&16711935;a=(a|
a<<4)&252645135;a=(a|a<<2)&858993459;c=(c|c<<8)&16711935;c=(c|c<<4)&252645135;c=(c|c<<2)&858993459;return(a|a<<1)&1431655765|((c|c<<1)&1431655765)<<1}function d(a){var c=a,d=a;do c.x<d.x&&(d=c),c=c.next;while(c!==a);return d}function h(a,c,d,g,b,h,k,m){return 0<=(b-k)*(c-m)-(a-k)*(h-m)&&0<=(a-k)*(g-m)-(d-k)*(c-m)&&0<=(d-k)*(h-m)-(b-k)*(g-m)}function g(a,c,d){return(c.y-a.y)*(d.x-c.x)-(c.x-a.x)*(d.y-c.y)}function m(a,c){return a.x===c.x&&a.y===c.y}function C(a,c,d,b){return m(a,c)&&m(d,b)||m(a,b)&&
m(d,c)?!0:0<g(a,c,d)!==0<g(a,c,b)&&0<g(d,b,a)!==0<g(d,b,c)}function y(a,c){return 0>g(a.prev,a,a.next)?0<=g(a,c,a.next)&&0<=g(a,a.prev,c):0>g(a,c,a.prev)||0>g(a,a.next,c)}function F(a,c){var d=new x(a.i,a.x,a.y),b=new x(c.i,c.x,c.y),g=a.next,h=c.prev;a.next=c;c.prev=a;d.next=g;g.prev=d;b.next=d;d.prev=b;h.next=b;b.prev=h;return b}function t(a,c,d,b){a=new x(a,c,d);b?(a.next=b.next,a.prev=b,b.next.prev=a,b.next=a):(a.prev=a,a.next=a);return a}function p(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&
(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function x(a,c,d){this.i=a;this.x=c;this.y=d;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function E(a,c,d,b){for(var g=0,h=d-b;c<d;c+=b)g+=(a[h]-a[c])*(a[c+1]+a[h+1]),h=c;return g}var z,G;u.deviation=function(a,c,d,b){var g=c&&c.length,h=Math.abs(E(a,0,g?c[0]*d:a.length,d));if(g)for(var g=0,k=c.length;g<k;g++)h-=Math.abs(E(a,c[g]*d,g<k-1?c[g+1]*d:a.length,d));for(g=c=0;g<b.length;g+=3){var k=b[g]*d,m=b[g+1]*d,l=b[g+
2]*d;c+=Math.abs((a[k]-a[l])*(a[m+1]-a[k+1])-(a[k]-a[m])*(a[l+1]-a[k+1]))}return 0===h&&0===c?0:Math.abs((c-h)/h)};u.flatten=function(a){for(var c=a[0][0].length,d={vertices:[],holes:[],dimensions:c},b=0,g=0;g<a.length;g++){for(var h=0;h<a[g].length;h++)for(var k=0;k<c;k++)d.vertices.push(a[g][h][k]);0<g&&(b+=a[g-1].length,d.holes.push(b))}return d};return u})},"esri/views/vectorTiles/LineBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./LineTess ./style/StyleLayer".split(" "),
function(u,a,b,r,n,l,k){return function(a){function c(c,d,b,k){c=a.call(this,c,d)||this;c.extrudeVectorsDoubleBuffer=[l.allocExtrudeVectors(),l.allocExtrudeVectors()];c.firstExtrudeVectors=l.allocExtrudeVectors();c.recycledTriangleBridge=l.allocTriangles(20);c.recycledTrianglePie=l.allocTriangles(20);c.lineVertexBuffer=b;c.lineIndexBuffer=k;return c}b(c,a);Object.defineProperty(c.prototype,"triangleIndexStart",{get:function(){return this.triangleElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"triangleIndexCount",{get:function(){return this.triangleElementsCount},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"connectorStart",{get:function(){return 0},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"connectorCount",{get:function(){return 0},enumerable:!0,configurable:!0});c.prototype.assignBufferInfo=function(a){a.triangleElementsStart=this.triangleElementsStart;a.triangleElementsCount=this.triangleElementsCount};c.prototype.processFeatures=function(a,
c){this.triangleElementsStart=this.lineIndexBuffer.index;this.triangleElementsCount=0;a&&a.setExtent(this.layerExtent);c=new k.LineLayout(this.layer,this.zoom);for(var d=0,b=this._features;d<b.length;d++){var g=b[d].getGeometry(a);this._processFeature(c,g)}};c.prototype._processFeature=function(a,c){if(c){var d=c.length,b;for(b=0;b<d;b++)this._processGeometry(c[b],a)}};c.prototype._processGeometry=function(a,c){if(!(2>a.length)){var d=a[0],b=a[a.length-1],g=b.x-d.x,b=b.y-d.y,d=1E-6>g*g+b*b;if(!(2>
a.length)){for(var h=a[0],k=1;k<a.length;)g=a[k].x-h.x,b=a[k].y-h.y,1E-6>g*g+b*b?a.splice(k,1):(h=a[k],++k);if(!(2>a.length)){this.vertices=a;this.verticesLen=a.length;this.isClosed=d;this.cap=c.cap;this.join=c.join;this.almostParallelRads=.05;this.veryShallowRads=.1;this.miterSafeRads=l.MITER_SAFE_RADS;this.miterLimitMag=Math.min(c.miterLimit,l.SYSTEM_MAG_LIMIT);this.roundLimitRads=Math.min(c.roundLimit,.5);this.newRoundJoinsSafeRads=2.3;c=this.lineIndexBuffer.index;for(var g=0,p=void 0,b=this.verticesLen,
h=0;h<b;++h){var x=a[h],k=p===this.extrudeVectorsDoubleBuffer[h%2]?this.extrudeVectorsDoubleBuffer[(h+1)%2]:this.extrudeVectorsDoubleBuffer[h%2];h<b||!d?(this._computeExtrudeVectors(k,h),this._writeGPUVertices(x.x,x.y,g,k),!k.capCenter||d&&h===b-1||this._writeGPUPieElements(k),d&&0===h&&l.copyExtrudeVectors(this.firstExtrudeVectors,k)):l.copyExtrudeVectors(k,this.firstExtrudeVectors);p&&this._writeGPUBridgeElements(p,k);h<b-1&&(p=a[h+1],x=l.length([p.x-x.x,p.y-x.y]),g+=x);p=k}this.triangleElementsCount+=
3*(this.lineIndexBuffer.index-c)}}}};c.prototype._computeExtrudeVectors=function(a,c){var d=this.vertices,b=this.verticesLen,g=this.isClosed,h=d[c],k=[void 0,void 0],p=[void 0,void 0];if(0<c&&c<b-1){var x=d[(c+b-1)%b],E=d[(c+1)%b];l.normalize(k,[h.x-x.x,h.y-x.y]);l.normalize(p,[E.x-h.x,E.y-h.y])}else if(0===c)E=d[(c+1)%b],l.normalize(p,[E.x-h.x,E.y-h.y]),g?(d=d[b-2],l.normalize(k,[h.x-d.x,h.y-d.y])):k=p;else if(c===b-1)x=d[(c+b-1)%b],l.normalize(k,[h.x-x.x,h.y-x.y]),g?(d=d[1],l.normalize(p,[d.x-h.x,
d.y-h.y])):p=k;else{console.error("Vertex index 'i' out of range.");return}g||0!==c?g||c!==b-1?this._computeJoinExtrudeVectors(a,k,p):this._computeCapExtrudeVectors(a,k,p,l.CapPosition.END):this._computeCapExtrudeVectors(a,k,p,l.CapPosition.START)};c.prototype._computeCapExtrudeVectors=function(a,c,d,b){0===this.cap?l.buttCap(a,c,d):1===this.cap?l.roundCap(a,c,d,b,l.getNumberOfSlices(Math.PI),b===l.CapPosition.START?-1:1):2===this.cap?l.squareCap(a,c,d,b):(l.buttCap(a,c,d),console.error("Unknown cap type!"))};
c.prototype._computeJoinExtrudeVectors=function(a,c,d){var b=l.getRads(c,d);if(b>Math.PI-this.almostParallelRads)l.rectJoin(a,c,d);else if(2===this.join||b<this.veryShallowRads)b<this.almostParallelRads?l.fastMiterJoin(a,c,d):b<this.miterSafeRads?l.miterJoin(a,c,d):l.bevelJoin(a,c,d,this.miterLimitMag);else if(0===this.join)l.bevelJoin(a,c,d,1);else if(1===this.join){var g=l.getNumberOfSlices(b);b<this.newRoundJoinsSafeRads?2>g||b<this.roundLimitRads?l.bevelJoin(a,c,d,1):l.roundJoin(a,c,d,g):l.unitRoundJoin(a,
c,d,g)}};c.prototype._writeGPUVertices=function(a,c,d,b){var g;for(g=0;g<b.vectors.count;++g){var k=this.lineVertexBuffer.add(a,c,b.vectors.items[g].vector[0],b.vectors.items[g].vector[1],b.vectors.items[g].texCoords[0],b.vectors.items[g].texCoords[1],d);b.vectors.items[g].base=k}};c.prototype._writeGPUBridgeElements=function(a,c){l.bridge(this.recycledTriangleBridge,a,c);for(a=0;a<this.recycledTriangleBridge.count;++a)c=this.recycledTriangleBridge.items[a],this.lineIndexBuffer.add(c.v1.base,c.v2.base,
c.v3.base)};c.prototype._writeGPUPieElements=function(a){l.pie(this.recycledTrianglePie,a);for(a=0;a<this.recycledTrianglePie.count;++a){var c=this.recycledTrianglePie.items[a];this.lineIndexBuffer.add(c.v1.base,c.v2.base,c.v3.base)}};return c}(n)})},"esri/views/vectorTiles/LineTess":function(){define(["require","exports"],function(u,a){function b(a){var c={items:[],count:0},d;for(d=0;d<a;++d)c.items.push(void 0);return c}function r(a,c){return a[0]*c[0]+a[1]*c[1]}function n(a){return Math.sqrt(r(a,
a))}function l(a,c){var d=n(c);a[0]=c[0]/d;a[1]=c[1]/d;return a}function k(a,c){a[0]=-c[1];a[1]=c[0];return a}function c(a,c){return a[0]*c[1]-a[1]*c[0]}function d(a,c){a[0]=-c[0];a[1]=-c[1];return a}function h(a,c,d){a[0]=c[0]*d;a[1]=c[1]*d;return a}function g(a,c,d){a[0]=c[0]+d[0];a[1]=c[1]+d[1];return a}function m(a,c){a=r(a,c);return.999<a?0:-.999>a?Math.PI:Math.acos(a)}function C(a,c,d,b,g){if(0===b)a.count=0;else{var k=n(c),D=h(z[0],c,1/k);d=h(z[1],d,1/k);D=m(D,d);D=(g?-1:1)*D/b;g=Math.cos(D);
D=Math.sin(D);d=c[0];var l=c[1];for(c=0;c<b-1;++c)k=d,d=g*k-D*l,l=D*k+g*l,a.items[c][0]=d,a.items[c][1]=l;a.count=b-1}}function y(a){var c=a.count,d=Math.floor(c/2),b;for(b=0;b<d;++b){var g=a.items[b];a.items[b]=a.items[c-b-1];a.items[c-b-1]=g}}function F(a,c,b){b=k(z[0],b);c=d(z[1],b);var g=a.vectors.items[0];g.vector[0]=b[0];g.vector[1]=b[1];g.texCoords[0]=0;g.texCoords[1]=-1;b=a.vectors.items[1];b.vector[0]=c[0];b.vector[1]=c[1];b.texCoords[0]=0;b.texCoords[1]=1;a.vectors.count=2;c=a.lists[t.ENTRY];
c.items[0]=0;c.items[1]=1;c.count=2;c=a.lists[t.EXIT];c.items[0]=0;c.items[1]=1;c.count=2;a.lists[t.CAP].count=0;a.capCenter=void 0}Object.defineProperty(a,"__esModule",{value:!0});var t;(function(a){a[a.ENTRY=1]="ENTRY";a[a.EXIT=2]="EXIT";a[a.CAP=3]="CAP"})(t=a.VectorRole||(a.VectorRole={}));var p;(function(a){a[a.START=1]="START";a[a.END=2]="END"})(p=a.CapPosition||(a.CapPosition={}));a.SYSTEM_MAG_LIMIT=3.8;a.MITER_SAFE_RADS=2*Math.acos(1/a.SYSTEM_MAG_LIMIT);var x=a.SYSTEM_MAG_LIMIT*a.SYSTEM_MAG_LIMIT,
E=16/(2*Math.PI);a.allocTriangles=function(a){var c={items:[],count:0},d;for(d=0;d<a;++d)c.items.push({v1:{vector:[void 0,void 0],texCoords:[void 0,void 0]},v2:{vector:[void 0,void 0],texCoords:[void 0,void 0]},v3:{vector:[void 0,void 0],texCoords:[void 0,void 0]}});return c};a.allocExtrudeVectors=function(){var a={items:[],count:0},c;for(c=0;30>c;++c)a.items.push({vector:[void 0,void 0],texCoords:[void 0,void 0]});c={};c[t.ENTRY]=b(20);c[t.EXIT]=b(20);c[t.CAP]=b(20);return{vectors:a,lists:c}};a.copyExtrudeVectors=
function(a,c){var d;for(d=0;d<c.vectors.count;++d)a.vectors.items[d].vector[0]=c.vectors.items[d].vector[0],a.vectors.items[d].vector[1]=c.vectors.items[d].vector[1],a.vectors.items[d].texCoords[0]=c.vectors.items[d].texCoords[0],a.vectors.items[d].texCoords[1]=c.vectors.items[d].texCoords[1],a.vectors.items[d].base=c.vectors.items[d].base;a.vectors.count=c.vectors.count;a.capCenter=c.capCenter};var z=[];for(u=0;32>u;++u)z.push([void 0,void 0]);var G=function(a){var c={items:[],count:0},d;for(d=0;d<
a;++d)c.items.push([void 0,void 0]);return c}(16);a.length=n;a.normalize=l;a.getNumberOfSlices=function(a){return Math.round(a*E)};a.getRads=m;var v=[void 0,void 0],L=[void 0,void 0];a.bridge=function(a,c,d){var b=c.vectors;c=c.lists[t.EXIT];var g=d.vectors,k=d.lists[t.ENTRY],h,m;if(c.count===k.count+1)d=c.items,h=b.items,m=k.items,g=g.items;else if(k.count===c.count+1)d=k.items,h=g.items,m=c.items,g=b.items;else if(c.count===k.count)d=k.items,h=g.items,m=c.items,g=b.items;else{console.error("Cannot bridge "+
c.count+" to "+k.count+".");a.count=0;return}b=c.count+k.count-2;a.count=b;v[0]=d;v[1]=m;L[0]=h;L[1]=g;for(c=0;c<b;++c)d=a.items[c],h=(c+0)%2,h=L[h][v[h][Math.floor((c+0)/2)]],d.v1.vector[0]=h.vector[0],d.v1.vector[1]=h.vector[1],d.v1.texCoords[0]=h.texCoords[0],d.v1.texCoords[1]=h.texCoords[1],d.v1.base=h.base,h=(c+1)%2,h=L[h][v[h][Math.floor((c+1)/2)]],d.v2.vector[0]=h.vector[0],d.v2.vector[1]=h.vector[1],d.v2.texCoords[0]=h.texCoords[0],d.v2.texCoords[1]=h.texCoords[1],d.v2.base=h.base,h=(c+2)%
2,h=L[h][v[h][Math.floor((c+2)/2)]],d.v3.vector[0]=h.vector[0],d.v3.vector[1]=h.vector[1],d.v3.texCoords[0]=h.texCoords[0],d.v3.texCoords[1]=h.texCoords[1],d.v3.base=h.base};a.pie=function(a,c){if(0===c.lists[t.CAP].count)a.count=0;else if(1===c.lists[t.CAP].count)console.error("A single vector is not enough to define a pie."),a.count=0;else{a.count=c.lists[t.CAP].count-1;var d;for(d=0;d<a.count;++d){var b=a.items[d],g=c.vectors.items[c.lists[t.CAP].items[d]];b.v1.vector[0]=g.vector[0];b.v1.vector[1]=
g.vector[1];b.v1.texCoords[0]=g.texCoords[0];b.v1.texCoords[1]=g.texCoords[1];b.v1.base=g.base;g=c.vectors.items[c.lists[t.CAP].items[d+1]];b.v2.vector[0]=g.vector[0];b.v2.vector[1]=g.vector[1];b.v2.texCoords[0]=g.texCoords[0];b.v2.texCoords[1]=g.texCoords[1];b.v2.base=g.base;g=c.vectors.items[c.capCenter];b.v3.vector[0]=g.vector[0];b.v3.vector[1]=g.vector[1];b.v3.texCoords[0]=g.texCoords[0];b.v3.texCoords[1]=g.texCoords[1];b.v3.base=g.base}}};a.buttCap=function(a,c,d){F(a,c,d)};a.roundCap=function(a,
c,d,b,g,k){void 0===k&&(k=0);F(a,c,d);d=b===p.START?0:1;b=b===p.START?1:0;a.capCenter=a.vectors.count;c=a.vectors.items[a.capCenter];c.vector[0]=0;c.vector[1]=0;c.texCoords[0]=0;c.texCoords[1]=0;++a.vectors.count;C(G,a.vectors.items[d].vector,a.vectors.items[b].vector,g,!1);g=a.vectors.count;c=a.lists[t.CAP];c.items[0]=d;d=a.vectors.items[d].texCoords[1];var h=a.vectors.items[b].texCoords[1],m;for(m=0;m<G.count;++m){var l=k*(1-Math.abs(G.count/2-m)/(G.count/2)),D=d+m/(G.count-1)*(h-d),y=G.items[m],
B=a.vectors.items[g+m];B.vector[0]=y[0];B.vector[1]=y[1];B.texCoords[0]=l;B.texCoords[1]=D;c.items[m+1]=g+m}c.items[G.count+1]=b;c.count=G.count+2;a.vectors.count=g+G.count};var H=Math.cos(Math.PI/4),I=Math.sin(Math.PI/4),M=Math.sqrt(2);a.squareCap=function(a,c,d,b){F(a,c,d);c=b===p.START?0:1;d=b===p.START?1:0;var g=z[0],k=z[1],m=z[2],l=z[3];b=z[4];var D=a.vectors.items[c].vector;g[0]=H*D[0]-I*D[1];g[1]=I*D[0]+H*D[1];h(l,g,M);k[0]=H*g[0]-I*g[1];k[1]=I*g[0]+H*g[1];m[0]=H*k[0]-I*k[1];m[1]=I*k[0]+H*
k[1];h(b,m,M);c=a.vectors.items[c];c.vector[0]=l[0];c.vector[1]=l[1];a=a.vectors.items[d];a.vector[0]=b[0];a.vector[1]=b[1]};a.fastMiterJoin=F;a.miterJoin=function(a,c,b){c=k(z[0],c);b=k(z[1],b);var g=z[2];g[0]=c[0]+b[0];g[1]=c[1]+b[1];b=l(z[3],g);c=r(b,c);b=h(z[4],b,1/c);c=d(z[5],b);g=a.vectors.items[0];g.vector[0]=b[0];g.vector[1]=b[1];g.texCoords[0]=0;g.texCoords[1]=-1;b=a.vectors.items[1];b.vector[0]=c[0];b.vector[1]=c[1];b.texCoords[0]=0;b.texCoords[1]=1;a.vectors.count=2;c=a.lists[t.ENTRY];
c.items[0]=0;c.items[1]=1;c.count=2;c=a.lists[t.EXIT];c.items[0]=0;c.items[1]=1;c.count=2;a.lists[t.CAP].count=0;a.capCenter=void 0};a.bevelJoin=function(a,b,m,p){var C=p*p;p=c(b,m);var v=0<p?[-1,1]:[1,-1],w=v[0],v=v[1],D=0<p?d(z[0],k(z[1],b)):k(z[2],b),E=0<p?d(z[3],k(z[4],m)):k(z[5],m),B=z[6];B[0]=D[0]+E[0];B[1]=D[1]+E[1];var B=l(z[7],B),G=d(z[8],B),H=r(B,D),F=c(B,D),n=Math.abs(F/H),L=1+n*n,A=L<x?[n,!1]:[Math.sqrt(x-1),!0],F=A[0],A=A[1],n=L<C?[n,!1]:[Math.sqrt(C-1),!0],C=n[0];(n=n[1])&&A?(A=a.vectors.items[0],
g(A.vector,d(z[9],D),h(z[10],d(z[11],b),F)),A.texCoords[0]=0,A.texCoords[1]=w,G=a.vectors.items[1],g(G.vector,d(z[12],E),h(z[13],m,F)),G.texCoords[0]=0,G.texCoords[1]=w,w=a.vectors.items[2],w.vector[0]=0,w.vector[1]=0,w.texCoords[0]=0,w.texCoords[1]=0,w=a.vectors.items[3],g(w.vector,D,h(z[14],b,C)),w.texCoords[0]=0,w.texCoords[1]=v,b=a.vectors.items[4],g(b.vector,E,h(z[15],d(z[16],m),C)),b.texCoords[0]=0,b.texCoords[1]=v,a.vectors.count=5,m=a.lists[t.ENTRY],m.items[0]=0,m.items[1]=2,m.items[2]=3,
m.count=3,m=a.lists[t.EXIT],m.items[0]=1,m.items[1]=2,m.items[2]=4,m.count=3,m=a.lists[t.CAP],m.items[0]=3,m.items[1]=4,m.count=2,a.capCenter=2):!n&&A?(A=a.vectors.items[0],g(A.vector,d(z[9],D),h(z[10],d(z[11],b),F)),A.texCoords[0]=0,A.texCoords[1]=w,G=a.vectors.items[1],g(G.vector,d(z[12],E),h(z[13],m,F)),G.texCoords[0]=0,G.texCoords[1]=w,w=a.vectors.items[2],w.vector[0]=0,w.vector[1]=0,w.texCoords[0]=0,w.texCoords[1]=0,w=a.vectors.items[3],h(w.vector,B,1/H),w.texCoords[0]=0,w.texCoords[1]=v,a.vectors.count=
4,m=a.lists[t.ENTRY],m.items[0]=0,m.items[1]=2,m.items[2]=3,m.count=3,m=a.lists[t.EXIT],m.items[0]=1,m.items[1]=2,m.items[2]=3,m.count=3,a.lists[t.CAP].count=0,a.capCenter=void 0):n&&!A?(A=a.vectors.items[0],h(A.vector,G,1/H),A.texCoords[0]=0,A.texCoords[1]=w,G=a.vectors.items[1],G.vector[0]=0,G.vector[1]=0,G.texCoords[0]=0,G.texCoords[1]=0,w=a.vectors.items[2],g(w.vector,D,h(z[9],b,C)),w.texCoords[0]=0,w.texCoords[1]=v,w=a.vectors.items[3],g(w.vector,E,h(z[10],d(z[11],m),C)),w.texCoords[0]=0,w.texCoords[1]=
v,a.vectors.count=4,m=a.lists[t.ENTRY],m.items[0]=0,m.items[1]=1,m.items[2]=2,m.count=3,m=a.lists[t.EXIT],m.items[0]=0,m.items[1]=1,m.items[2]=3,m.count=3,m=a.lists[t.CAP],m.items[0]=2,m.items[1]=3,m.count=2,a.capCenter=1):n||A||(A=a.vectors.items[0],h(A.vector,G,1/H),A.texCoords[0]=0,A.texCoords[1]=w,G=a.vectors.items[1],h(G.vector,B,1/H),G.texCoords[0]=0,G.texCoords[1]=v,a.vectors.count=2,m=a.lists[t.ENTRY],m.items[0]=0,m.items[1]=1,m.count=2,m=a.lists[t.EXIT],m.items[0]=0,m.items[1]=1,m.count=
2,a.lists[t.CAP].count=0,a.capCenter=void 0);0>p&&(y(a.lists[t.ENTRY]),y(a.lists[t.EXIT]))};a.roundJoin=function(a,b,m,p){var v=c(b,m),E=0<v?[-1,1]:[1,-1],w=E[0],E=E[1],D=0<v?d(z[0],k(z[1],b)):k(z[2],b),B=0<v?d(z[3],k(z[4],m)):k(z[5],m),H=z[6];H[0]=D[0]+B[0];H[1]=D[1]+B[1];var n=l(z[7],H),H=d(z[8],n),F=r(n,D),n=c(n,D),n=Math.abs(n/F),A=1+n*n<x?[n,!1]:[Math.sqrt(x-1),!0],n=A[0];A[1]?(A=a.vectors.items[0],A.vector[0]=D[0],A.vector[1]=D[1],A.texCoords[0]=0,A.texCoords[1]=E,A=a.vectors.items[1],A.vector[0]=
B[0],A.vector[1]=B[1],A.texCoords[0]=0,A.texCoords[1]=E,A=a.vectors.items[2],g(A.vector,d(z[9],D),h(z[10],d(z[11],b),n)),A.texCoords[0]=0,A.texCoords[1]=w,b=a.vectors.items[3],g(b.vector,d(z[12],B),h(z[13],m,n)),b.texCoords[0]=0,b.texCoords[1]=w,m=a.vectors.items[4],m.vector[0]=0,m.vector[1]=0,m.texCoords[0]=0,m.texCoords[1]=0,a.vectors.count=5,m=a.lists[t.ENTRY],m.items[0]=2,m.items[1]=4,m.items[2]=0,m.count=3,m=a.lists[t.EXIT],m.items[0]=3,m.items[1]=4,m.items[2]=1,m.count=3,a.capCenter=4):(A=a.vectors.items[0],
A.vector[0]=D[0],A.vector[1]=D[1],A.texCoords[0]=0,A.texCoords[1]=E,A=a.vectors.items[1],A.vector[0]=B[0],A.vector[1]=B[1],A.texCoords[0]=0,A.texCoords[1]=E,A=a.vectors.items[2],h(A.vector,H,1/F),A.texCoords[0]=0,A.texCoords[1]=w,b=a.vectors.items[3],b.vector[0]=0,b.vector[1]=0,b.texCoords[0]=0,b.texCoords[1]=0,a.vectors.count=4,m=a.lists[t.ENTRY],m.items[0]=2,m.items[1]=3,m.items[2]=0,m.count=3,m=a.lists[t.EXIT],m.items[0]=2,m.items[1]=3,m.items[2]=1,m.count=3,a.capCenter=3);C(G,D,B,p,0>v);p=a.vectors.count;
D=a.lists[t.CAP];for(B=D.items[0]=0;B<G.count;++B)m=G.items[B],w=a.vectors.items[p+B],w.vector[0]=m[0],w.vector[1]=m[1],w.texCoords[0]=0,w.texCoords[1]=E,D.items[B+1]=p+B;D.items[G.count+1]=1;D.count=G.count+2;a.vectors.count=p+G.count;0>v&&(y(a.lists[t.ENTRY]),y(a.lists[t.EXIT]))};a.unitRoundJoin=function(a,b,g,h){var m=c(b,g),l=0<m?[-1,1]:[1,-1],p=l[0],l=l[1];b=0<m?d(z[0],k(z[1],b)):k(z[2],b);g=0<m?d(z[3],k(z[4],g)):k(z[5],g);var v=a.vectors.items[0];v.vector[0]=b[0];v.vector[1]=b[1];v.texCoords[0]=
0;v.texCoords[1]=l;v=a.vectors.items[1];v.vector[0]=g[0];v.vector[1]=g[1];v.texCoords[0]=0;v.texCoords[1]=l;v=a.vectors.items[2];d(v.vector,b);v.texCoords[0]=0;v.texCoords[1]=p;v=a.vectors.items[3];d(v.vector,g);v.texCoords[0]=0;v.texCoords[1]=p;p=a.vectors.items[4];p.vector[0]=0;p.vector[1]=0;p.texCoords[0]=0;p.texCoords[1]=0;a.vectors.count=5;p=a.lists[t.ENTRY];p.items[0]=2;p.items[1]=0;p.count=2;p=a.lists[t.EXIT];p.items[0]=3;p.items[1]=1;p.count=2;a.capCenter=4;C(G,b,g,h,0>m);h=a.vectors.count;
b=a.lists[t.CAP];for(p=b.items[0]=0;p<G.count;++p)g=G.items[p],v=a.vectors.items[h+p],v.vector[0]=g[0],v.vector[1]=g[1],v.texCoords[0]=0,v.texCoords[1]=l,b.items[p+1]=h+p;b.items[G.count+1]=1;b.count=G.count+2;a.vectors.count=h+G.count;0>m&&(y(a.lists[t.ENTRY]),y(a.lists[t.EXIT]))};a.rectJoin=function(a,c,b){c=k(z[0],c);b=k(z[1],b);var g=a.vectors.items[0];g.vector[0]=c[0];g.vector[1]=c[1];g.texCoords[0]=0;g.texCoords[1]=-1;g=a.vectors.items[1];g.vector[0]=b[0];g.vector[1]=b[1];g.texCoords[0]=0;g.texCoords[1]=
-1;g=a.vectors.items[2];d(g.vector,c);g.texCoords[0]=0;g.texCoords[1]=1;c=a.vectors.items[3];d(c.vector,b);c.texCoords[0]=0;c.texCoords[1]=1;a.vectors.count=4;c=a.lists[t.ENTRY];c.items[0]=0;c.items[1]=2;c.count=2;c=a.lists[t.EXIT];c.items[0]=1;c.items[1]=3;c.count=2;a.capCenter=void 0}})},"esri/views/vectorTiles/style/StyleLayer":function(){define(["require","exports","./StyleDefinition","./StyleProperty","./Filter"],function(u,a,b,r,n){Object.defineProperty(a,"__esModule",{value:!0});u=function(){function a(a,
c,d){this.type=a;this.id=c.id;this.source=c.source;this.sourceLayer=c["source-layer"];this.minzoom=c.minzoom;this.maxzoom=c.maxzoom;this.filter=c.filter;this.layout=c.layout;this.paint=c.paint;this.z=d;switch(a){case 0:this._layoutDefinition=b.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=b.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=b.StyleDefinition.fillLayoutDefinition;this._paintDefinition=b.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=
b.StyleDefinition.lineLayoutDefinition;this._paintDefinition=b.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=b.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=b.StyleDefinition.symbolPaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}a.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=n.createFilter(this.filter)};a.prototype.hasLayoutProperty=
function(a){var c=this._layoutProperties;return c&&c[a]?!0:!1};a.prototype.hasPaintProperty=function(a){var c=this._paintProperties;return c?void 0!==c[a]:!1};a.prototype.getLayoutValue=function(a,c){var d,b=this._layoutProperties;b&&(b=b[a])&&(d=b.getValue(c));a=this._layoutDefinition[a];void 0===d&&(d=a["default"]);"enum"===a.type&&(d=a.values.indexOf(d));return d};a.prototype.getPaintValue=function(a,c){var d,b=this._paintProperties;b&&(b=b[a])&&(d=b.getValue(c));a=this._paintDefinition[a];void 0===
d&&(d=a["default"]);"enum"===a.type&&(d=a.values.indexOf(d));return d};a.prototype._parseLayout=function(a){var c={},d;for(d in a)c[d]=new r(this._layoutDefinition[d],a[d]);return c};a.prototype._parsePaint=function(a){var c={},d;for(d in a)c[d]=new r(this._paintDefinition[d],a[d]);return c};return a}();a.StyleLayer=u;u=function(){return function(a,b){this.cap=a.getLayoutValue("line-cap",b);this.join=a.getLayoutValue("line-join",b);this.miterLimit=a.getLayoutValue("line-miter-limit",b);this.roundLimit=
a.getLayoutValue("line-round-limit",b)}}();a.LineLayout=u;u=function(){return function(a,b,c){this.allowOverlap=a.getLayoutValue("icon-allow-overlap",b);this.ignorePlacement=a.getLayoutValue("icon-ignore-placement",b);this.optional=a.getLayoutValue("icon-optional",b);this.rotationAlignment=a.getLayoutValue("icon-rotation-alignment",b);this.size=a.getLayoutValue("icon-size",b);this.rotate=a.getLayoutValue("icon-rotate",b);this.padding=a.getLayoutValue("icon-padding",b);this.keepUpright=a.getLayoutValue("icon-keep-upright",
b);this.offset=a.getLayoutValue("icon-offset",b);c&&1===this.rotationAlignment&&!a.hasLayoutProperty("icon-rotation-alignment")&&(this.rotationAlignment=0)}}();a.IconLayout=u;u=function(){return function(a,b,c){this.allowOverlap=a.getLayoutValue("text-allow-overlap",b);this.ignorePlacement=a.getLayoutValue("text-ignore-placement",b);this.optional=a.getLayoutValue("text-optional",b);this.rotationAlignment=a.getLayoutValue("text-rotation-alignment",b);this.font=a.getLayoutValue("text-font",b);this.maxWidth=
a.getLayoutValue("text-max-width",b);this.lineHeight=a.getLayoutValue("text-line-height",b);this.letterSpacing=a.getLayoutValue("text-letter-spacing",b);this.justify=a.getLayoutValue("text-justify",b);this.anchor=a.getLayoutValue("text-anchor",b);this.maxAngle=a.getLayoutValue("text-max-angle",b);this.size=a.getLayoutValue("text-size",b);this.rotate=a.getLayoutValue("text-rotate",b);this.padding=a.getLayoutValue("text-padding",b);this.keepUpright=a.getLayoutValue("text-keep-upright",b);this.transform=
a.getLayoutValue("text-transform",b);this.offset=a.getLayoutValue("text-offset",b);c&&1===this.rotationAlignment&&!a.hasLayoutProperty("text-rotation-alignment")&&(this.rotationAlignment=0)}}();a.TextLayout=u})},"esri/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(u,a){Object.defineProperty(a,"__esModule",{value:!0});u=function(){return function(){}}();u.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};u.fillLayoutDefinition=
{visibility:{type:"enum",values:["visible","none"],"default":"visible"}};u.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"line-cap":{type:"enum",values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],"default":"miter"},"line-miter-limit":{type:"number","default":2},"line-round-limit":{type:"number","default":1.05}};u.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},
"symbol-placement":{type:"enum",values:["point","line"],"default":"point"},"symbol-spacing":{type:"number",minimum:1,"default":250},"symbol-avoid-edges":{type:"boolean","default":!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean","default":!1},"icon-ignore-placement":{type:"boolean","default":!1},"icon-optional":{type:"boolean","default":!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport"],"default":"viewport"},"icon-size":{type:"number",minimum:0,"default":1},"icon-rotate":{type:"number",
"default":0},"icon-padding":{type:"number",minimum:0,"default":2},"icon-keep-upright":{type:"boolean","default":!0},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport"],"default":"viewport"},"text-font":{type:"array",value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,"default":16},"text-max-width":{type:"number",minimum:0,"default":10},
"text-line-height":{type:"number","default":1.2},"text-letter-spacing":{type:"number","default":0},"text-justify":{type:"enum",values:["left","center","right"],"default":"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),"default":"center"},"text-max-angle":{type:"number",minimum:0,"default":45},"text-rotate":{type:"number","default":0},"text-padding":{type:"number",minimum:0,"default":2},"text-keep-upright":{type:"boolean",
"default":!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],"default":"none"},"text-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-allow-overlap":{type:"boolean","default":!1},"text-ignore-placement":{type:"boolean","default":!1},"text-optional":{type:"boolean","default":!1}};u.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,"default":1},"background-color":{type:"color","default":[0,0,0,1]},"background-pattern":{type:"string"}};
u.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,"default":1},"fill-antialias":{type:"boolean","default":!0},"fill-color":{type:"color","default":[0,0,0,1]},"fill-outline-color":{type:"color","default":[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"fill-pattern":{type:"string"}};u.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,"default":1},
"line-color":{type:"color","default":[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,"default":[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"line-width":{type:"number",minimum:0,"default":1},"line-gap-width":{type:"number",minimum:0,"default":0},"line-offset":{type:"number","default":0},"line-blur":{type:"number",minimum:0,"default":0},"line-dasharray":{type:"array",value:"number","default":[]},"line-pattern":{type:"string"}};u.symbolPaintDefinition=
{"icon-opacity":{type:"number",minimum:0,maximum:1,"default":1},"icon-color":{type:"color","default":[0,0,0,1]},"icon-halo-color":{type:"color","default":[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,"default":0},"icon-halo-blur":{type:"number",minimum:0,"default":0},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"text-opacity":{type:"number",minimum:0,maximum:1,"default":1},"text-color":{type:"color",
"default":[0,0,0,1]},"text-halo-color":{type:"color","default":[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,"default":0},"text-halo-blur":{type:"number",minimum:0,"default":0},"text-translate":{type:"array",value:"number",length:2,"default":[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};u.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,"default":1},"raster-hue-rotate":{type:"number","default":0},"raster-brightness-min":{type:"number",
minimum:0,maximum:1,"default":0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,"default":1},"raster-saturation":{type:"number",minimum:-1,maximum:1,"default":0},"raster-contrast":{type:"number",minimum:-1,maximum:1,"default":0},"raster-fade-duration":{type:"number",minimum:0,"default":300}};u.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,"default":1},"circle-radius":{type:"number",minimum:0,"default":5},"circle-color":{type:"color","default":[0,0,0,1]},"circle-blur":{type:"number",
minimum:0,"default":0},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};a.StyleDefinition=u})},"esri/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(u,a,b,r){return function(){function a(b,k){switch(b.type){case "number":b=!0;break;case "color":b=!0;k=a._parseColor(k);break;case "array":b="number"===b.value;break;default:b=
!1}this.getValue=b?this._interpolate(k):this._piecewise(k)}a.prototype._piecewise=function(a){var b=a.stops;return b?function(a){var c=b.length;if(0!==c){for(var h=0,g=0;g<c;g++)if(b[g][0]<=a)h=g;else break;return b[h][1]}}:function(){return a}};a.prototype._interpolate=function(a){var b=a.stops;if(b){var c=a.base||1;return function(a){for(var d,g,m=b.length,k=0;k<m;k++){var l=b[k];if(l[0]<=a)d=l;else{g=l;break}}if(d&&g){k=g[0]-d[0];a-=d[0];a=1===c?a/k:(Math.pow(c,a)-1)/(Math.pow(c,k)-1);if(Array.isArray(d[1])){d=
d[1];g=g[1];m=[];for(k=0;k<d.length;k++)m.push(r.interpolate(d[k],g[k],a));return m}return r.interpolate(d[1],g[1],a)}if(d)return d[1];if(g)return g[1]}}return function(){return a}};a._parseColor=function(l){if(Array.isArray(l))return l;if("string"===typeof l)return l=new b(l),[l.r/255,l.g/255,l.b/255,l.a||1];if(l&&l.stops)return l.stops=l.stops.map(function(b){return[b[0],a._parseColor(b[1])]}),l;throw Error("Incorrect color definition "+l);};return a}()})},"esri/views/vectorTiles/style/Filter":function(){define(["require",
"exports"],function(u,a){u=function(){function a(b,n,l){this._op=b;"$type"===n?(this._val=l instanceof Array?l.map(function(b){return a._types.indexOf(b)}):a._types.indexOf(l),this._op+=11):(this._key=n,this._val=l)}a.prototype.filter=function(a){switch(this._op){case 0:return this._val;case 1:return a.values[this._key]===this._val;case 2:return a.values[this._key]!==this._val;case 3:return a.values[this._key]<this._val;case 4:return a.values[this._key]>this._val;case 5:return a.values[this._key]<=
this._val;case 6:return a.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(a.values[this._key]);case 8:return-1===this._val.indexOf(a.values[this._key]);case 9:for(var b=0,l=this._val;b<l.length;b++){var k=l[b];if(k.filter(a))return!0}return!1;case 10:b=0;for(l=this._val;b<l.length;b++)if(k=l[b],!k.filter(a))return!1;return!0;case 11:b=0;for(l=this._val;b<l.length;b++)if(k=l[b],k.filter(a))return!1;return!0;case 12:return a.type===this._val;case 13:return a.type!==this._val;case 14:return a.type<
this._val;case 15:return a.type>this._val;case 16:return a.type>=this._val;case 17:return a.type<=this._val;case 18:return-1!==this._val.indexOf(a.type);case 19:return-1===this._val.indexOf(a.type)}};a.createFilter=function(b){if(!b)return new a(0,void 0,!0);var n=b[0];if(1>=b.length)return new a(0,void 0,"any"!==n);switch(n){case "\x3d\x3d":return new a(1,b[1],b[2]);case "!\x3d":return new a(2,b[1],b[2]);case "\x3e":return new a(4,b[1],b[2]);case "\x3c":return new a(3,b[1],b[2]);case "\x3e\x3d":return new a(6,
b[1],b[2]);case "\x3c\x3d":return new a(5,b[1],b[2]);case "in":return new a(7,b[1],b.slice(2));case "!in":return new a(8,b[1],b.slice(2));case "any":return new a(9,void 0,b.slice(1).map(a.createFilter.bind(this)));case "all":return new a(10,void 0,b.slice(1).map(a.createFilter.bind(this)));case "none":return new a(11,void 0,b.slice(1).map(a.createFilter.bind(this)));default:throw Error("invalid operator: "+n);}};return a}();u._types=["Unknown","Point","LineString","Polygon"];return u})},"esri/views/vectorTiles/SymbolBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./Geometry ./style/StyleLayer ./Placement ./GeometryUtils ./TextShaping dojox/string/BidiEngine".split(" "),
function(u,a,b,r,n,l,k,c,d,h,g){function m(a,c){if(a.iconMosaicItem&&c.iconMosaicItem){if(a.iconMosaicItem.page!==c.iconMosaicItem.page)return a.iconMosaicItem.page<c.iconMosaicItem.page?-1:1}else{if(a.iconMosaicItem&&!c.iconMosaicItem)return 1;if(!a.iconMosaicItem&&c.iconMosaicItem)return-1}return 0}var C=function(){return function(){}}(),y=function(){return function(a,c,b,d){this.line=c;this.shaping=a;this.iconMosaicItem=b;this.anchor=d}}();(function(){return function(){}})();u=function(a){function g(c,
b,d,g,h,m,k,l){c=a.call(this,c,b)||this;c._markerRatio=1;c._markerMap=new Map;c._glyphMap=new Map;c._glyphBufferDataStorage=new Map;c._markerVertexBuffer=d;c._markerIndexBuffer=g;c._textVertexBuffer=h;c._textIndexBuffer=m;c._placementEngine=k;c._workerTileHandler=l;return c}b(g,a);Object.defineProperty(g.prototype,"markerPageMap",{get:function(){return this._markerMap},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"glyphsPageMap",{get:function(){return this._glyphMap},enumerable:!0,
configurable:!0});Object.defineProperty(g.prototype,"textIndexStart",{get:function(){return this._textTriangleElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"textIndexCount",{get:function(){return this._textTriangleElementsNum},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"sdfMarker",{get:function(){return!1},enumerable:!0,configurable:!0});g.prototype.copy=function(a,c,b,d,h){h=new g(this.layer,this.zoom,a,c,b,d,h,this._workerTileHandler);h.layerIndex=
this.layerIndex;h.layerExtent=this.layerExtent;h._markerVertexStart=a.index;h._markerTriangleElementsStart=c.index;h._textVertexStart=b.index;h._textTriangleElementsStart=d.index;h._markerTriangleElementsNum=0;h._textTriangleElementsNum=0;h._symbolInstances=this._symbolInstances;h._workerTileHandler=this._workerTileHandler;h._font=this._font;h._textLayout=this._textLayout;h._markerLayout=this._markerLayout;h._isLinePlacement=this._isLinePlacement;h._avoidEdges=this._avoidEdges;return h};g.prototype.getResources=
function(a,c,b){var d=this.layer,h=this.zoom;a&&a.setExtent(this.layerExtent);for(var m=d.getLayoutValue("icon-image",h),k=d.getLayoutValue("text-field",h),p=d.getLayoutValue("text-font",h),d=d.getLayoutValue("text-transform",h),h=[],l=0,y=this._features;l<y.length;l++){var x=y[l],E=x.getGeometry(a);if(E&&0!==E.length){var t=void 0;m&&(t=this._replaceKeys(m,x.values))&&c.add(t);var n=void 0,F=!1;if(k){n=this._replaceKeys(k,x.values);switch(d){case 2:n=n.toLowerCase();break;case 1:n=n.toUpperCase()}g._bidiEngine.hasBidiChar(n)&&
(F=void 0,F="rtl"===g._bidiEngine.checkContextual(n)?"IDNNN":"ICNNN",n=g._bidiEngine.bidiTransform(n,F,"VLYSN"),F=!0);x=n.length;if(0<x){var r=b[p];r||(r=b[p]=new Set);for(var w=0;w<x;w++){var u=n.charCodeAt(w);r.add(u)}}}if(t||n)x=new C,x.sprite=t,x.label=n,x.rtl=F,x.geometry=E,h.push(x)}}this._symbolFeatures=h};g.prototype.processFeatures=function(a,b){a&&a.setExtent(this.layerExtent);var l=this.layer,p=this.zoom;b=this._isLinePlacement=1===l.getLayoutValue("symbol-placement",p);a=this._avoidEdges=
l.getLayoutValue("symbol-avoid-edges",p)&&!b;var C=8*l.getLayoutValue("symbol-spacing",p),v=l.getLayoutValue("icon-image",p),x=l.getLayoutValue("text-field",p),t=this._workerTileHandler,n;v&&(this._markerLayout=new k.IconLayout(l,p,b),n=t.getSpriteItems());var F,B;if(x){var A=this._textLayout=new k.TextLayout(l,p,b);F=void 0;A.font&&A.font.length&&(this._font=F=A.font[0]);B=.5;switch(A.anchor){case 5:case 1:case 7:B=0;break;case 6:case 2:case 8:B=1}l=.5;switch(A.anchor){case 5:case 3:case 6:l=0;break;
case 7:case 4:case 8:l=1}p=.5;switch(A.justify){case 0:p=0;break;case 2:p=1}var v=24*A.letterSpacing,x=b?0:24*A.maxWidth,D=24*A.lineHeight,A=[24*A.offset[0],24*A.offset[1]];F=t.getGlyphItems(F);B=new h(F,x,D,v,A,B,l,p)}this._markerVertexStart=this._markerVertexBuffer.index;this._markerTriangleElementsStart=this._markerIndexBuffer.index;this._textVertexStart=this._textVertexBuffer.index;this._textTriangleElementsStart=this._textIndexBuffer.index;this._textTriangleElementsNum=this._markerTriangleElementsNum=
0;this._markerMap.clear();this._glyphMap.clear();this._symbolInstances=t=[];l=this._textLayout;p=1;l&&l.size&&(p=l.size/24);v=l?l.maxAngle*d.C_DEG_TO_RAD:0;x=l?8*l.size:0;D=0;for(A=this._symbolFeatures;D<A.length;D++){var r=A[D],u=void 0;r.sprite&&(u=n[r.sprite]);var S=void 0,w=r.label,U=0;if(w&&(S=B.getShaping(w,r.rtl))&&0<S.length){for(var U=1E30,w=-1E30,Q=0,N=S;Q<N.length;Q++)var P=N[Q],U=Math.min(U,P.x),w=Math.max(w,P.x);U=(w-U+48)*p*8}w=0;for(r=r.geometry;w<r.length;w++)for(Q=r[w],P=void 0,b?
(S&&0<S.length&&l&&l.size&&g._smoothVertices(Q,8*l.size*(2+Math.min(2,4*Math.abs(l.offset[1])))),P=g._findAnchors(Q,C,U)):P=[new c.Anchor(Q[0].x,Q[0].y)],N=0;N<P.length;N++){var O=P[N];0>O.x||4096<O.x||0>O.y||4096<O.y||b&&0<U&&0===l.rotationAlignment&&!g._honorsTextMaxAngle(Q,O,U,v,x)||t.push(new y(S,Q,u,O))}}t.sort(m);for(n=0;n<t.length;n++)this._processFeature(t[n],F,a);this._addPlacedGlyphs()};g.prototype.updateSymbols=function(){this._markerVertexStart=this._markerVertexBuffer.index;this._markerTriangleElementsStart=
this._markerIndexBuffer.index;this._textVertexStart=this._textVertexBuffer.index;this._textTriangleElementsStart=this._textIndexBuffer.index;this._textTriangleElementsNum=this._markerTriangleElementsNum=0;this._markerMap.clear();this._glyphMap.clear();for(var a=this._workerTileHandler.getGlyphItems(this._font),c=this._avoidEdges,b=0,d=this._symbolInstances;b<d.length;b++)this._processFeature(d[b],a,c);this._addPlacedGlyphs()};g.prototype._replaceKeys=function(a,c){return a.replace(/{([^{}]+)}/g,function(a,
b){return b in c?c[b]:""})};g.prototype._processFeature=function(a,c,b){var g=a.line,h=a.iconMosaicItem,m=a.shaping,k=a.anchor,p=(a=this._markerLayout)&&!!h,y=!0,C=1;p&&(C=a.size/(1/this._markerRatio)*8,y=a.optional||!h);var x=this._textLayout,t=x&&m&&0<m.length,n;n=1;var F=!0;t&&(n=x.size/24,n*=8,F=x.optional||!m||0===m.length);var E=new l.Point(0,-17),r;if(p){r=this._placementEngine.getIconPlacement(k,h,C,g,a,b);if(r.footprint.minzoom===d.C_INFINITY&&!y)return;k.minzoom>r.footprint.minzoom&&(r.footprint.minzoom=
k.minzoom)}var w;if(t&&(w=this._placementEngine.getTextPlacement(k,E,m,c,n,g,x,b))){if(w.footprint.minzoom===d.C_INFINITY&&!F)return;k.minzoom>w.footprint.minzoom&&(w.footprint.minzoom=k.minzoom)}if(!F&&!y||!y&&w&&w.footprint.minzoom!==d.C_INFINITY||!F&&r&&r.footprint.minzoom!==d.C_INFINITY)c=Math.max(r.footprint.minzoom,w.footprint.minzoom),r.footprint.minzoom=c,w.footprint.minzoom=c;w&&w.footprint.minzoom!==d.C_INFINITY&&(x.ignorePlacement||this._placementEngine.add(w),this._storePlacedGlyphs(w.shapes,
w.footprint.minzoom,this.zoom));r&&r.footprint.minzoom!==d.C_INFINITY&&(a.ignorePlacement||this._placementEngine.add(r),this._addPlacedIcons(r.shapes,r.footprint.minzoom,this.zoom,h.page))};g.prototype._addPlacedIcons=function(a,c,b,g){c=Math.max(b+d.log2(c),0);for(var h=this._markerVertexBuffer,m=this._markerIndexBuffer,k=0;k<a.length;k++){var l=a[k],p=Math.max(b+d.log2(l.minzoom),c),y=Math.min(b+d.log2(l.maxzoom),25);if(!(y<=p)){var C=l.tl,t=l.tr,x=l.bl,z=l.br,n=l.mosaicRect,F=-l.labelAngle,l=l.anchor,
w=h.index,E=n.x,r=n.y,u=E+n.width,n=r+n.height;h.add(l.x,l.y,C.x,C.y,E,r,F,p,y,c);h.add(l.x,l.y,t.x,t.y,u,r,F,p,y,c);h.add(l.x,l.y,x.x,x.y,E,n,F,p,y,c);h.add(l.x,l.y,z.x,z.y,u,n,F,p,y,c);m.add(w+0,w+1,w+2);m.add(w+1,w+2,w+3);this._markerMap.has(g)?this._markerMap.get(g)[1]+=6:this._markerMap.set(g,[this._markerTriangleElementsStart+this._markerTriangleElementsNum/3,6]);this._markerTriangleElementsNum+=6}}};g.prototype._addPlacedGlyphs=function(){var a=this,c=this._textVertexBuffer,b=this._textIndexBuffer;
this._glyphBufferDataStorage.forEach(function(d,g){for(var h=0;h<d.length;h++){var m=d[h],k=c.index;c.add(m.glyphAnchor[0],m.glyphAnchor[1],m.tl[0],m.tl[1],m.xmin,m.ymin,m.labelAngle,m.minLod,m.maxLod,m.placementLod);c.add(m.glyphAnchor[0],m.glyphAnchor[1],m.tr[0],m.tr[1],m.xmax,m.ymin,m.labelAngle,m.minLod,m.maxLod,m.placementLod);c.add(m.glyphAnchor[0],m.glyphAnchor[1],m.bl[0],m.bl[1],m.xmin,m.ymax,m.labelAngle,m.minLod,m.maxLod,m.placementLod);c.add(m.glyphAnchor[0],m.glyphAnchor[1],m.br[0],m.br[1],
m.xmax,m.ymax,m.labelAngle,m.minLod,m.maxLod,m.placementLod);b.add(k+0,k+1,k+2);b.add(k+1,k+2,k+3);a._glyphMap.has(g)?a._glyphMap.get(g)[1]+=6:a._glyphMap.set(g,[a._textTriangleElementsStart+a._textTriangleElementsNum/3,6]);a._textTriangleElementsNum+=6}});this._glyphBufferDataStorage.clear()};g.prototype._storePlacedGlyphs=function(a,c,b){c=Math.max(b+d.log2(c),0);for(var g=0;g<a.length;g++){var h=a[g],m=Math.max(b+d.log2(h.minzoom),c),k=Math.min(b+d.log2(h.maxzoom),25);if(!(k<=m)){var l=h.tl,p=
h.tr,y=h.bl,C=h.br,t=-h.labelAngle,x=h.anchor,n=h.mosaicRect;this._glyphBufferDataStorage.has(h.page)||this._glyphBufferDataStorage.set(h.page,[]);this._glyphBufferDataStorage.get(h.page).push({glyphAnchor:[x.x,x.y],tl:[l.x,l.y],tr:[p.x,p.y],bl:[y.x,y.y],br:[C.x,C.y],xmin:n.x,ymin:n.y,xmax:n.x+n.width,ymax:n.y+n.height,labelAngle:t,minLod:m,maxLod:k,placementLod:c})}}};g._findAnchors=function(a,b,g){b+=g;for(var h=0,m=a.length-1,k=0;k<m;k++)h+=l.Point.distance(a[k],a[k+1]);k=.5*(g||b);if(h<=k)return[];
g=k/h;b=h/Math.max(Math.round(h/b),1);for(var h=0,m=-b/2,y=[],p=a.length-1,k=0;k<p;k++){for(var C=a[k],t=a[k+1],n=t.x-C.x,x=t.y-C.y,F=Math.sqrt(n*n+x*x),r=void 0;m+b<h+F;){var m=m+b,E=(m-h)/F,u=d.interpolate(C.x,t.x,E),E=d.interpolate(C.y,t.y,E);void 0===r&&(r=Math.atan2(x,n));y.push(new c.Anchor(u,E,r,k,g))}h+=F}return y};g.deviation=function(a,c,b){return Math.atan2((c.x-a.x)*(b.y-c.y)-(c.y-a.y)*(b.x-c.x),(c.x-a.x)*(b.x-c.x)+(c.y-a.y)*(b.y-c.y))};g._honorsTextMaxAngle=function(a,c,b,d,g){var h=
0;b/=2;for(var m=new l.Point(c.x,c.y),k=c.segment+1;h>-b;){--k;if(0>k)return!1;h-=l.Point.distance(a[k],m);m=a[k]}h+=l.Point.distance(a[k],a[k+1]);c=[];for(var m=0,y=a.length;h<b;){var p=a[k],C=void 0;do{++k;if(k===y)return!1;C=a[k]}while(C.isEqual(p));var t=k,n=void 0;do{++t;if(t===y)return!1;n=a[t]}while(n.isEqual(C));p=this.deviation(p,C,n);c.push({deviation:p,distToAnchor:h});for(m+=p;h-c[0].distToAnchor>g;)m-=c.shift().deviation;if(Math.abs(m)>d)return!1;h+=l.Point.distance(C,n)}return!0};g._smoothVertices=
function(a,c){if(!(0>=c)){var b=a.length;if(!(3>b)){var d=[],g=0;d.push(0);for(var h=1;h<b;h++)g+=l.Point.distance(a[h],a[h-1]),d.push(g);c=Math.min(c,.2*g);g=[];g.push(a[0].x);g.push(a[0].y);var m=a[b-1].x,k=a[b-1].y,h=l.Point.sub(a[0],a[1]);h.normalize();a[0].x+=c*h.x;a[0].y+=c*h.y;h.assignSub(a[b-1],a[b-2]);h.normalize();a[b-1].x+=c*h.x;a[b-1].y+=c*h.y;for(h=1;h<b;h++)d[h]+=c;d[b-1]+=c;for(var y=.5*c,h=1;h<b-1;h++){for(var C=0,p=0,t=0,n=h-1;0<=n&&!(d[n+1]<d[h]-y);n--){var F=y+d[n+1]-d[h],x=d[n+
1]-d[n],r=d[h]-d[n]<y?1:F/x;if(1E-6>Math.abs(r))break;var w=r*r,u=r*F-.5*w*x,Q=r*x/c,N=a[n+1],P=a[n].x-N.x,O=a[n].y-N.y,C=C+Q/u*(N.x*r*F+.5*w*(F*P-x*N.x)-w*r*x*P/3),p=p+Q/u*(N.y*r*F+.5*w*(F*O-x*N.y)-w*r*x*O/3),t=t+Q}for(n=h+1;n<b&&!(d[n-1]>d[h]+y);n++){F=y-d[n-1]+d[h];x=d[n]-d[n-1];r=d[n]-d[h]<y?1:F/x;if(1E-6>Math.abs(r))break;w=r*r;u=r*F-.5*w*x;Q=r*x/c;N=a[n-1];P=a[n].x-N.x;O=a[n].y-N.y;C+=Q/u*(N.x*r*F+.5*w*(F*P-x*N.x)-w*r*x*P/3);p+=Q/u*(N.y*r*F+.5*w*(F*O-x*N.y)-w*r*x*O/3);t+=Q}g.push(C/t);g.push(p/
t)}g.push(m);g.push(k);for(n=h=0;h<b;h++)a[h].x=g[n++],a[h].y=g[n++]}}};return g}(n);u._bidiEngine=new g;return u})},"esri/views/vectorTiles/Placement":function(){define(["require","exports","./Geometry","./GeometryUtils","./Conflict"],function(u,a,b,r,n){Object.defineProperty(a,"__esModule",{value:!0});u=function(){return function(a,c,b,k,l){void 0===b&&(b=0);void 0===k&&(k=-1);void 0===l&&(l=d);this.x=a;this.y=c;this.angle=b;this.segment=k;this.minzoom=l}}();a.Anchor=u;u=function(){return function(a,
c,b){this.glyph=a;this.x=c;this.y=b}}();a.ShapedGlyph=u;var l=function(){return function(a,c,b,k,l,n,t){void 0===l&&(l=!1);void 0===n&&(n=d);void 0===t&&(t=r.C_INFINITY);this.anchor=a;this.labelAngle=c;this.glyphAngle=b;this.page=k;this.upsideDown=l;this.minzoom=n;this.maxzoom=t}}(),k=function(){return function(a,c,b,d,k,l,n,p,x,r){this.tl=a;this.tr=c;this.bl=b;this.br=d;this.mosaicRect=k;this.labelAngle=l;this.anchor=n;this.minzoom=p;this.maxzoom=x;this.page=r}}();a.PlacedSymbol=k;var c=function(){return function(a,
c){this.footprint=a;this.shapes=c}}();a.Placement=c;var d=.5;u=function(){function a(){this.mapAngle=0;this._conflictEngine=new n.ConflictEngine}a.prototype.reset=function(){this._conflictEngine.reset()};a.prototype.setAngle=function(a){this.mapAngle=a;this._conflictEngine.setAngle(a)};a.prototype.getIconPlacement=function(a,h,l,y,F,t){var g=h.width/h.pixelRatio,m=h.height/h.pixelRatio;y=F.offset[0]-g/2;var C=F.offset[1]-m/2,g=y+g,m=C+m,z=h.rect,u=y-2,v=C-2,L=u+z.width/h.pixelRatio,H=v+z.height/h.pixelRatio;
h=new b.Point(u,v);var I=new b.Point(L,H),u=new b.Point(u,H),L=new b.Point(L,v),H=F.rotate*r.C_DEG_TO_RAD,v=1===F.rotationAlignment;0<=a.segment&&!v&&(H+=a.angle);if(0!==H){var M=Math.cos(H),B=Math.sin(H);h.rotate(M,B);I.rotate(M,B);u.rotate(M,B);L.rotate(M,B)}M=8*F.padding;B=new b.Point(a.x,a.y);a=new n.Footprint(this.mapAngle,M,v);a.addBox(B,new n.Box(y,C,g,m),l,H,d,r.C_INFINITY);l=new k(h,L,u,I,z,0,B,d,r.C_INFINITY,0);l=new c(a,[l]);y=d;F.allowOverlap||(y=this._conflictEngine.getMinZoom(l.footprint,
y,t,v));a.minzoom=y;return l};a.prototype.getTextPlacement=function(a,h,C,y,F,t,p,x){for(var g=new b.Point(a.x,a.y),m=p.rotate*r.C_DEG_TO_RAD,u=0===p.rotationAlignment,v=p.keepUpright,L=d,H=!u,I=H?0:a.angle,M=0<=a.segment&&u,B=new n.Footprint(this.mapAngle,8*p.padding,H),A=[],D=!M,ba=Number.POSITIVE_INFINITY,aa=Number.NEGATIVE_INFINITY,S=ba,w=aa,U=M?v:u&&v,Q=[],N,P=0;P<C.length;P++){var O=C[P],V=y[O.glyph];if(V&&!V.rect.isEmpty){var ia=V.rect,da=V.metrics,ca=V.page;D&&(N&&N!==O.y&&(B.addBox(g,new n.Box(ba,
S,aa,w),F,m,d,r.C_INFINITY),ba=Number.POSITIVE_INFINITY,aa=Number.NEGATIVE_INFINITY,S=ba,w=aa),N=O.y);var fa=[];if(M){if(V=(h.x+O.x+da.left-4+.5*V.metrics.width)*F,L=this._placeGlyph(a,L,V,t,a.segment,1,ca,fa),v&&(L=this._placeGlyph(a,L,V,t,a.segment,-1,ca,fa)),2<=L)break}else fa.push(new l(g,I,I,ca)),u&&v&&fa.push(new l(g,I+r.C_PI,I+r.C_PI,ca,!0));for(var ca=O.x+h.x+da.left,O=O.y+h.y-da.top,V=ca+da.width,da=O+da.height,ea=new b.Point(ca-4,O-4),W=new b.Point(ea.x+ia.width,ea.y+ia.height),ga=new b.Point(ea.x,
W.y),T=new b.Point(W.x,ea.y),ha=0;ha<fa.length;ha++){var X=fa[ha],ka=ea.clone(),la=ga.clone(),ma=T.clone(),na=W.clone(),oa=O,Z=da,J=X.glyphAngle+m;if(0!==J){var R=Math.cos(J),e=Math.sin(J);ka.rotate(R,e);na.rotate(R,e);la.rotate(R,e);ma.rotate(R,e)}A.push(new k(ka,ma,la,na,ia,X.labelAngle,X.anchor,X.minzoom,X.maxzoom,X.page));if(!U||this._legible(X.labelAngle))D?(ca<ba&&(ba=ca),oa<S&&(S=oa),V>aa&&(aa=V),Z>w&&(w=Z)):2>X.minzoom&&B.addBox(X.anchor,new n.Box(ca,oa,V,Z),F,J,X.minzoom,X.maxzoom);Q.push(X)}}}if(2<=
L)return null;D&&B.addBox(g,new n.Box(ba,S,aa,w),F,m,d,r.C_INFINITY);a=new c(B,A);p.allowOverlap||(L=this._conflictEngine.getMinZoom(a.footprint,L,x,H));B.minzoom=L;return a};a.prototype.add=function(a){this._conflictEngine.add(a.footprint)};a.prototype._legible=function(a){a=r.radToByte(a);return 65>a||193<=a};a.prototype._placeGlyph=function(a,c,d,h,k,n,p,x){var g=0>n?r.positiveMod(a.angle+r.C_PI,r.C_2PI):a.angle,m=this._legible(g),y=0;0>d&&(n*=-1,d*=-1,y=r.C_PI);0<n&&++k;a=new b.Point(a.x,a.y);
var C=h[k],t=r.C_INFINITY;if(h.length<=k)return t;for(;;){var F=C.x-a.x,u=C.y-a.y,M=Math.sqrt(F*F+u*u),B=Math.max(d/M,c),F=r.positiveMod(Math.atan2(u/M,F/M)+y,r.C_2PI);x.push(new l(a,g,F,p,m,B,t));if(B<=c)return B;a=C.clone();do{k+=n;if(h.length<=k||0>k)return B;C=h[k]}while(a.isEqual(C));t=C.x-a.x;F=C.y-a.y;u=Math.sqrt(t*t+F*F);t*=M/u;F*=M/u;a.x-=t;a.y-=F;t=B}};return a}();a.PlacementEngine=u})},"esri/views/vectorTiles/Conflict":function(){define(["require","exports","./Geometry","./GeometryUtils"],
function(u,a,b,r){Object.defineProperty(a,"__esModule",{value:!0});u=function(){function a(a,b,h,g){this.left=a;this.top=b;this.right=h;this.bottom=g}a.prototype.clone=function(){return new a(this.left,this.top,this.right,this.bottom)};a.prototype.move=function(a,b){this.left+=a;this.top+=b;this.right+=a;this.bottom+=b};a.prototype.rotate=function(a,b){var c=this.left,d=this.right,m=this.top,k=this.bottom,l=c*a-m*b,n=c*b+m*a,t=d*a-m*b,m=d*b+m*a,p=c*a-k*b,c=c*b+k*a,r=d*a-k*b;a=d*b+k*a;this.left=Math.min(l,
t,p,r);this.top=Math.min(n,m,c,a);this.right=Math.max(l,t,p,r);this.bottom=Math.max(n,m,c,a)};a.overlaps=function(a,b){return a.right>b.left&&a.left<b.right&&a.bottom>b.top&&a.top<b.bottom};return a}();a.Box=u;var n=function(){function a(a,b,h,g){this.anchor=a;this.corners=b;this.minzoom=h;this.maxzoom=g}a.prototype.left=function(){return this.corners[0].x};a.prototype.right=function(){return this.corners[2].x};a.prototype.top=function(){return this.corners[1].y};a.prototype.bottom=function(){return this.corners[3].y};
return a}();a.Obstacle=n;u=function(){function a(a,b,h){this.obstacles=[];this.mapAngle=a;this.padding=b;this.isScreenAligned=h;this.minzoom=l}a.prototype.addBox=function(a,d,h,g,m,k){var c=d.left*h-this.padding,l=d.top*h-this.padding,C=d.right*h+this.padding;d=d.bottom*h+this.padding;c=[new b.Point(c,l),new b.Point(C,l),new b.Point(C,d),new b.Point(c,d)];0!==this.mapAngle&&(l=Math.cos(this.mapAngle),C=Math.sin(this.mapAngle),a=a.clone(),a.rotate(l,C));this.isScreenAligned||(g+=this.mapAngle);if(0!==
g){l=Math.cos(g);C=Math.sin(g);c[0].rotate(l,C);c[1].rotate(l,C);c[2].rotate(l,C);c[3].rotate(l,C);g=0;for(l=1;4>l;l++)c[l].x<c[g].x?g=l:c[l].x===c[g].x&&c[l].y<c[g].y&&(g=l);if(g){C=[];for(l=0;4>l;l++)C.push(c[(l+g)%4]);c=C}}this.obstacles.push(new n(a,c,m,k))};return a}();a.Footprint=u;var l=.5;u=function(){function a(){this._grid=[]}a.prototype.setAngle=function(a){this._angle=a;this._c=Math.cos(a);this._s=Math.sin(a)};a.prototype.reset=function(){this._angle=this._s=0;this._c=1;this._grid=[]};
a.prototype.add=function(c){var b=this._grid,h=0;for(c=c.obstacles;h<c.length;h++)for(var g=c[h],m=g.anchor,k=a._gridClamp(Math.min(g.left()+m.x,m.x)),l=a._gridClamp(Math.max(g.right()+m.x,m.x)),n=a._gridClamp(Math.min(g.top()+m.y,m.y)),m=a._gridClamp(Math.max(g.bottom()+m.y,m.y));n<=m;n++)for(var t=k;t<=l;t++){var p=b[16*n+t];p||(p=b[16*n+t]=[]);p.push(g)}};a.prototype.getMinZoom=function(c,b,h,g){if(0===c.obstacles.length)return r.C_INFINITY;h=this._grid;g=0;for(c=c.obstacles;g<c.length;g++)for(var d=
c[g],k=d.anchor,l=a._gridClamp(Math.min(d.left()+k.x,k.x)),n=a._gridClamp(Math.max(d.right()+k.x,k.x)),t=a._gridClamp(Math.min(d.top()+k.y,k.y)),k=a._gridClamp(Math.max(d.bottom()+k.y,k.y));t<=k;t++)for(var p=l;p<=n;p++){var x=h[16*t+p];if(x)for(var u=0;u<x.length;u++){var z=x[u];if(!(d.minzoom>=z.maxzoom||z.minzoom>=d.maxzoom)&&(b=a._calcPlacementZoom(d,z,b),2<=b))return r.C_INFINITY}}return 2>b?b:r.C_INFINITY};a._gridClamp=function(a){return r.clamp(a>>9,-7,8)};a._calcPlacementZoom=function(c,b,
h){var d=b.anchor.x-c.anchor.x;if(0===d&&(c.right()<b.left()||b.right()<c.left()))return h;var m=b.anchor.y-c.anchor.y;if(0===m&&(c.bottom()<b.top()||b.bottom()<c.top()))return h;var k=r.C_INFINITY;if(0!==d){var l=(0<d?c.right()-b.left():c.left()-b.right())/d;l<k&&(k=l);d=0<d?a._calcExtZoomX(c,b,l):a._calcExtZoomX(b,c,l);d<k&&(k=d)}0!==m&&(d=(0<m?c.bottom()-b.top():c.top()-b.bottom())/m,d<k&&(k=d),m=0<m?a._calcExtZoomY(c,b,d):a._calcExtZoomY(b,c,d),m<k&&(k=m));if(k<c.minzoom||k<b.minzoom)return h;
k=Math.min(k,c.maxzoom,b.maxzoom);k<h&&(k=h);return k};a._calcExtZoomX=function(a,b,h){var c,d,k;if(a.anchor.y+a.corners[2].y/h<b.anchor.y+b.corners[0].y/h){c=a.corners[2].x-a.corners[3].x;k=a.corners[2].y-a.corners[3].y;var l=b.corners[1].x-b.corners[0].x;d=b.corners[1].y-b.corners[0].y;0<=c*d-k*l?a.anchor.y+a.corners[3].y/h<b.anchor.y+b.corners[0].y/h?(h=a.corners[3],c=b.corners[0],d=b.corners[1],k=1):(h=b.corners[0],c=a.corners[3],d=a.corners[2],k=-1):a.anchor.y+a.corners[2].y/h>b.anchor.y+b.corners[1].y/
h?(h=a.corners[2],c=b.corners[0],d=b.corners[1],k=1):(h=b.corners[1],c=a.corners[3],d=a.corners[2],k=-1)}else c=a.corners[2].x-a.corners[1].x,k=a.corners[2].y-a.corners[1].y,l=b.corners[3].x-b.corners[0].x,d=b.corners[3].y-b.corners[0].y,0>c*d-k*l?a.anchor.y+a.corners[1].y/h>b.anchor.y+b.corners[0].y/h?(h=a.corners[1],c=b.corners[0],d=b.corners[3],k=1):(h=b.corners[0],c=a.corners[1],d=a.corners[2],k=-1):a.anchor.y+a.corners[2].y/h<b.anchor.y+b.corners[3].y/h?(h=a.corners[2],c=b.corners[0],d=b.corners[3],
k=1):(h=b.corners[3],c=a.corners[1],d=a.corners[2],k=-1);l=d.x-c.x;d=d.y-c.y;return k*((h.y-c.y)*l-(h.x-c.x)*d)/((a.anchor.x-b.anchor.x)*d-(a.anchor.y-b.anchor.y)*l)};a._calcExtZoomY=function(a,b,h){var c,d,k;if(a.anchor.x+a.corners[3].x/h<b.anchor.x+b.corners[1].x/h){c=a.corners[3].x-a.corners[2].x;k=a.corners[3].y-a.corners[2].y;var l=b.corners[0].x-b.corners[1].x;d=b.corners[0].y-b.corners[1].y;0>c*d-k*l?a.anchor.x+a.corners[2].x/h<b.anchor.x+b.corners[1].x/h?(h=a.corners[2],c=b.corners[1],d=b.corners[0],
k=1):(h=b.corners[1],c=a.corners[2],d=a.corners[3],k=-1):a.anchor.x+a.corners[3].x/h>b.anchor.x+b.corners[0].x/h?(h=a.corners[3],c=b.corners[1],d=b.corners[0],k=1):(h=b.corners[0],c=a.corners[2],d=a.corners[3],k=-1)}else c=a.corners[3].x-a.corners[0].x,k=a.corners[3].y-a.corners[0].y,l=b.corners[2].x-b.corners[1].x,d=b.corners[2].y-b.corners[1].y,0<c*d-k*l?a.anchor.x+a.corners[0].x/h>b.anchor.x+b.corners[1].x/h?(h=a.corners[0],c=b.corners[1],d=b.corners[2],k=1):(h=b.corners[1],c=a.corners[0],d=a.corners[3],
k=-1):a.anchor.x+a.corners[3].x/h<b.anchor.x+b.corners[2].x/h?(h=a.corners[3],c=b.corners[1],d=b.corners[2],k=1):(h=b.corners[2],c=a.corners[0],d=a.corners[3],k=-1);l=d.x-c.x;d=d.y-c.y;return k*((h.y-c.y)*l-(h.x-c.x)*d)/((a.anchor.x-b.anchor.x)*d-(a.anchor.y-b.anchor.y)*l)};return a}();a.ConflictEngine=u})},"esri/views/vectorTiles/TextShaping":function(){define(["require","exports","./Placement"],function(u,a,b){return function(){function a(a,b,k,c,d,h,g,m){this._glyphItems=a;this._maxWidth=b;this._lineHeight=
k;this._letterSpacing=c;this._offset=d;this._hAnchor=h;this._vAnchor=g;this._justify=m}a.prototype.getShaping=function(a,l){for(var k=this._glyphItems,c=this._letterSpacing,d=this._offset[0],h=this._offset[1],g=[],m=a.length,n=0;n<m;n++){var y=a.charCodeAt(n),r=k[y];r&&(g.push(new b.ShapedGlyph(y,d,h)),d+=r.metrics.advance+c)}if(0<g.length){y=this._maxWidth;a=this._lineHeight;c=this._justify;d=g.length;m=h=k=0;if(0!==y)for(var t=r=0,n=0;n<d;n++){var p=g[n];p.x-=t;p.y=l?p.y-a*k:p.y+a*k;if(p.x>y&&0<
r){for(var x=g[r+1].x,m=Math.max(x,m),u=r+1;u<=n;u++)g[u].y=l?g[u].y-a:g[u].y+a,g[u].x-=x;c&&this._applyJustification(g,h,r-1);h=r+1;r=0;t+=x;k++}32===p.glyph&&(r=n)}n=g[d-1];m=Math.max(m,n.x+this._glyphItems[n.glyph].metrics.advance);c&&this._applyJustification(g,h,d-1);n=(c-this._hAnchor)*m;c=(-this._vAnchor*(k+1)+.5)*a;l&&k&&(c+=k*a);for(l=0;l<g.length;l++)a=g[l],a.x+=n,a.y+=c}return g};a.prototype._applyJustification=function(a,b,k){for(var c=a[k],c=(c.x+this._glyphItems[c.glyph].metrics.advance)*
this._justify;b<=k;b++)a[b].x-=c};return a}()})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/Stateful"],function(u,a,b){function r(a,b,d,e,f){var h=a;void 0===b&&(b=f.defInFormat);void 0===d&&(d=f.defOutFormat);void 0===e&&(e=f.defSwap);if(b!==d){var g,k=b.substring(0,1);g=b.substring(1,4);var m=d.substring(0,1),p=d.substring(1,4);"C"===g.charAt(0)&&(g=n(h),g="ltr"===g||"rtl"===g?g.toUpperCase():"L"===b.charAt(2)?"LTR":"RTL",b=k+g);"C"===p.charAt(0)&&
(g=n(h),"rtl"===g?p="RTL":"ltr"===g?(h=h.split(""),h.reverse(),g=n(h.join("")),p=g.toUpperCase()):p="L"===d.charAt(2)?"LTR":"RTL",d=m+p)}if(b===d)return a;m=b.substring(0,1);h=b.substring(1,4);k=d.substring(0,1);p=d.substring(1,4);f.inFormat=b;f.outFormat=d;f.swap=e;if("L"===m&&"VLTR"===d){if("LTR"===h)return f.dir=H,l(a,f);if("RTL"===h)return f.dir=I,l(a,f)}if("V"===m&&"V"===k)return f.dir="RTL"===h?I:H,c(a,f);if("L"===m&&"VRTL"===d)return f.dir="LTR"===h?H:I,a=l(a,f),c(a);if("VLTR"===b&&"LLTR"===
d)return f.dir=H,l(a,f);if("V"===m&&"L"===k&&h!==p)return a=c(a),"RTL"===h?r(a,"LLTR","VLTR",e,f):r(a,"LRTL","VRTL",e,f);if("VRTL"===b&&"LRTL"===d)return r(a,"LRTL","VRTL",e,f);if("L"===m&&"L"===k)return b=f.swap,f.swap=b.substr(0,1)+"N","RTL"===h?(f.dir=I,a=l(a,f),f.swap="N"+b.substr(1,2),f.dir=H,a=l(a,f)):(f.dir=H,a=l(a,f),f.swap="N"+b.substr(1,2),a=r(a,"VLTR","LRTL",f.swap,f)),a}function n(a){return(a=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(a))?"z">=a[0]?
"ltr":"rtl":""}function l(a,c){a=a.split("");var b=[];k(a,b,c);if(0!==c.hiLevel&&c.swap.substr(0,1)!==c.swap.substr(1,2))for(var d=0;d<a.length;d++)if(1===b[d]){var f=d,e;b:{e=a[d];for(var h=void 0,m=0,l=A.length-1;m<=l;)if(h=Math.floor((m+l)/2),e<A[h][0])l=h-1;else if(e>A[h][0])m=h+1;else{e=A[h][1];break b}}a[f]=e}g(2,a,b,c);g(1,a,b,c);z=b;return a.join("")}function k(a,c,b){var d=a.length,e=b.dir?ca:da,f=null,h=null,g=null,f=0,h=h=null,k=-1,l=h=null,n=[],p=[];b.hiLevel=b.dir;b.lastArabic=!1;b.hasUbatAl=
!1;b.hasUbatB=!1;b.hasUbatS=!1;for(h=0;h<d;h++){var l=h,g=a[h].charCodeAt(0),y=qa[g>>8];n[l]=y<Z?y:ra[y-Z][g&255]}for(l=0;l<d;l++){p[l]=h=m(a,n,p,l,b);f=e[f][h];h=f&240;f&=15;c[l]=g=e[f][v];if(0<h){if(16===h)for(h=k;h<l;h++)c[h]=1;k=-1}if(h=e[f][L])-1===k&&(k=l);else if(-1<k){for(h=k;h<l;h++)c[h]=g;k=-1}n[l]===ha&&(c[l]=0);b.hiLevel|=g}if(b.hasUbatS)for(a=0;a<d;a++)if(n[a]===X)for(c[a]=b.dir,e=a-1;0<=e;e--)if(n[e]===la)c[e]=b.dir;else break}function c(a,c){a=a.split("");if(c){var b=[];k(a,b,c);z=
b}a.reverse();x.reverse();return a.join("")}function d(a){for(var c=0;c<V.length;c++)if(a>=V[c]&&a<=ia[c])return!0;return!1}function h(a,c,b,e){for(;c*b<e&&y(a[c]);)c+=b;return c*b<e&&d(a[c])?!0:!1}function g(a,c,b,d){if(!(d.hiLevel<a))if(1!==a||d.dir!==I||d.hasUbatB){d=c.length;for(var e=0,f,h,g;e<d;){if(b[e]>=a){for(f=e+1;f<d&&b[f]>=a;)f++;for(h=f-1;e<h;e++,h--)g=c[e],c[e]=c[h],c[h]=g,g=x[e],x[e]=x[h],x[h]=g;e=f}e++}}else c.reverse(),x.reverse()}function m(a,c,b,d,e){return{UBAT_L:function(){e.lastArabic=
!1;return fa},UBAT_R:function(){e.lastArabic=!1;return ea},UBAT_ON:function(){return T},UBAT_AN:function(){return ga},UBAT_EN:function(){return e.lastArabic?ga:W},UBAT_AL:function(){e.lastArabic=!0;e.hasUbatAl=!0;return ea},UBAT_WS:function(){return T},UBAT_CS:function(){var a,f;if(1>d||d+1>=c.length||(a=b[d-1])!==W&&a!==ga||(f=c[d+1])!==W&&f!==ga)return T;e.lastArabic&&(f=ga);return f===a?f:T},UBAT_ES:function(){return(0<d?b[d-1]:ha)===W&&d+1<c.length&&c[d+1]===W?W:T},UBAT_ET:function(){if(0<d&&
b[d-1]===W)return W;if(e.lastArabic)return T;for(var a=d+1,f=c.length;a<f&&c[a]===ma;)a++;return a<f&&c[a]===W?W:T},UBAT_NSM:function(){if("VLTR"===e.inFormat){for(var f=c.length,h=d+1;h<f&&c[h]===na;)h++;if(h<f&&(f=a[d],h=c[h],(1425<=f&&2303>=f||64286===f)&&(h===ea||h===ka)))return ea}return 1>d||c[d-1]===ha?T:b[d-1]},UBAT_B:function(){e.lastArabic=!0;e.hasUbatB=!0;return e.dir},UBAT_S:function(){e.hasUbatS=!0;return T},UBAT_LRE:function(){e.lastArabic=!1;return T},UBAT_RLE:function(){e.lastArabic=
!1;return T},UBAT_LRO:function(){e.lastArabic=!1;return T},UBAT_RLO:function(){e.lastArabic=!1;return T},UBAT_PDF:function(){e.lastArabic=!1;return T},UBAT_BN:function(){return T}}[oa[c[d]]]()}function C(a,c){for(var b=0;b<S.length;b++)if(a===S[b])return c[b];return a}function y(a){return"\u064b"<=a&&"\u0655">=a?!0:!1}function F(a){if("L"===a)return"LTR";if("R"===a)return"RTL";if("C"===a)return"CLR";if("D"===a)return"CRL"}function t(a,c){for(var b=0;b<D.length;b++)if(a===D[b])return c[b];return a}
function p(a,c,b,d){for(var e=0;e<a.length;e++)if(a[e]>c||!b&&a[e]===c)a[e]+=d}u.getObject("string",!0,dojox);u=a("dojox.string.BidiEngine",b,{inputFormat:"ILYNN",outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(a,c,b){this.sourceToTarget=[];this.targetToSource=[];if(!a)return"";var e=this.sourceToTarget,f=this.targetToSource,g=a.length;x=[];z=[];for(var k=0;k<g;k++)e[k]=k,f[k]=k,x[k]=k;if(!this.checkParameters(c,b))return a;c=this.inputFormat;b=this.outputFormat;
var e=a,e=G,k=F(c.charAt(1)),f=F(b.charAt(1)),m="I"===c.charAt(0)?"L":c.charAt(0),g="I"===b.charAt(0)?"L":b.charAt(0),k=m+k,f=g+f,g=c.charAt(2)+b.charAt(2);e.defInFormat=k;e.defOutFormat=f;e.defSwap=g;a=r(a,k,f,g,e);e=!1;if("R"===b.charAt(1))e=!0;else if("C"===b.charAt(1)||"D"===b.charAt(1))e=this.checkContextual(a);f=this.sourceToTarget=x;g=Array(f.length);for(k=0;k<f.length;k++)g[f[k]]=k;E=this.targetToSource=g;if(c.charAt(3)===b.charAt(3))e=a;else if("S"===b.charAt(3))if(c=e,b=!0,0===a.length)e=
void 0;else{void 0===c&&(c=!0);void 0===b&&(b=!0);a=String(a);a=a.split("");var l=0,f=1,e=a.length;c||(l=a.length-1,f=-1,e=1);for(var g=e,k=b,n=0,e=[],m=0;l*f<g;l+=f)if(d(a[l])||y(a[l])){var q;if(q="\u0644"===a[l])b:{for(var v=a,u=l+f,A=f,B=g;u*A<B&&y(v[u]);)u+=A;q=" ";if(u*A<B)for(q=v[u],v=0;v<D.length;v++)if(D[v]===q){q=!0;break b}q=!1}if(q){a[l]=0===n?t(a[l+f],ba):t(a[l+f],aa);l+=f;n=a;q=l;v=f;for(u=g;q*v<u&&y(n[q]);)q+=v;q*v<u&&(n[q]=" ");k&&(e[m]=l,m++);n=0}else{q=a[l];if(1===n){v=l;if(h(a,l+
f,f,g))b:for(u=a[l],A=0;A<S.length;A++){if(u===S[A]){u=Q[A];break b}}else u=C(a[l],U);a[v]=u}else!0===h(a,l+f,f,g)?a[l]=C(a[l],N):a[l]=C(a[l],w);y(q)||(n=1);b:{for(v=0;v<P.length;v++)if(P[v]===q){q=!0;break b}q=!1}!0===q&&(n=0)}}else n=0;f="";for(g=0;g<a.length;g++){if(k=b){b:{for(k=0;k<e.length;k++)if(e[k]===g)break b;k=-1}k=-1<k}k?(p(E,g,!c,-1),x.splice(g,1)):f+=a[g]}e=f}else if(c=a,b=e,a=!0,0===c.length)e=void 0;else for(void 0===a&&(a=!0),void 0===b&&(b=!0),c=String(c),e="",f=[],f=c.split(""),
g=0;g<c.length;g++)k=!1,"\ufe70"<=f[g]&&"\ufeff">f[g]?(m=c.charCodeAt(g),"\ufef5"<=f[g]&&"\ufefc">=f[g]?(b?(0<g&&a&&" "===f[g-1]?e=e.substring(0,e.length-1)+"\u0644":(e+="\u0644",k=!0),e+=D[(m-65269)/2]):(e+=D[(m-65269)/2],e+="\u0644",g+1<c.length&&a&&" "===f[g+1]?g++:k=!0),k&&(p(E,g,!0,1),x.splice(g,0,x[g]))):e+=O[m-65136]):e+=f[g];this.sourceToTarget=x;this.targetToSource=E;this.levels=z;return e},_inputFormatSetter:function(a){if(!M.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");
this.inputFormat=a},_outputFormatSetter:function(a){if(!M.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=a},checkParameters:function(a,c){a?this.set("inputFormat",a):a=this.inputFormat;c?this.set("outputFormat",c):c=this.outputFormat;return a===c?!1:!0},checkContextual:function(a){a=n(a);if("ltr"!==a&&"rtl"!==a){try{a=document.dir.toLowerCase()}catch(sa){}"ltr"!==a&&"rtl"!==a&&(a="ltr")}return a},hasBidiChar:function(a){return B.test(a)}});var x=
[],E=[],z=[],G={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},v=5,L=6,H=0,I=1,M=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,B=/[\u0591-\u06ff\ufb1d-\ufefc]/,A=[["(",")"],[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]","["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],
["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],D=["\u0622","\u0623","\u0625","\u0627"],ba=["\ufef5","\ufef7","\ufef9","\ufefb"],aa=["\ufef6","\ufef8","\ufefa","\ufefc"],S="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),
w="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),U="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),
Q="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),N="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),
P="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),O="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
V=["\u0621","\u0641"],ia=["\u063a","\u064a"],da=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],ca=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],fa=0,ea=1,W=2,ga=3,T=4,ha=5,X=6,ka=7,la=8,ma=11,na=12,oa="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),Z=100;a=fa;b=ea;var J=W,R=ga,e=T,ja=ha,pa=X,f=ka,Y=la,K=ma,
q=na,qa=[Z+0,a,a,a,a,Z+1,Z+2,Z+3,b,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,Z+4,e,e,e,a,e,a,e,a,e,e,e,a,a,e,e,a,a,a,a,a,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,a,a,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,a,a,a,a,a,a,a,a,a,a,a,a,a,a,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,a,a,e,e,a,a,e,e,a,a,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,
e,e,e,e,e,e,e,a,a,a,Z+5,f,f,Z+6,Z+7],ra=[[18,18,18,18,18,18,18,18,18,pa,ja,pa,Y,ja,18,18,18,18,18,18,18,18,18,18,18,18,18,18,ja,ja,ja,pa,Y,e,e,K,K,K,e,e,e,e,e,10,9,10,9,9,J,J,J,J,J,J,J,J,J,J,9,e,e,e,e,e,e,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,e,e,e,e,e,e,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,e,e,e,e,18,18,18,18,18,18,ja,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,e,K,K,K,K,e,e,e,e,a,e,e,18,e,e,K,K,J,J,e,a,e,e,e,J,a,e,e,e,e,e,a,a,a,a,
a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,e,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,e,a,a,a,a,a,a,a,a],[a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,e,e,e,e,e,e,e,e,e,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,e,e,a,a,a,a,a,a,a,e,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,e,a,e,e,e,e,e,e,e,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,
b,q,b,q,q,b,q,q,b,q,e,e,e,e,e,e,e,e,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,e,e,e,e,e,b,b,b,b,b,e,e,e,e,e,e,e,e,e,e,e],[R,R,R,R,e,e,e,e,f,K,K,f,9,f,e,e,q,q,q,q,q,q,q,q,q,q,q,f,e,e,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,R,R,R,R,R,R,R,R,R,R,K,R,R,f,f,f,q,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,
f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,q,q,q,q,q,q,q,R,e,q,q,q,q,q,q,f,f,q,q,e,q,q,q,q,f,f,J,J,J,J,J,J,J,J,J,J,f,f,f,f,f,f],[f,f,f,f,f,f,f,f,f,f,f,f,f,f,e,f,f,q,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,e,e,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,q,q,q,q,q,q,q,q,q,q,q,f,
e,e,e,e,e,e,e,e,e,e,e,e,e,e,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,q,q,q,q,q,q,q,q,q,b,b,e,e,e,e,b,e,e,e,e,e],[Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,18,18,18,a,b,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,Y,ja,13,14,15,16,17,9,K,K,K,K,K,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,9,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,Y,18,18,18,18,18,e,e,e,e,e,18,18,18,18,18,18,J,a,e,e,J,J,J,J,J,J,10,10,e,e,e,a,J,J,J,J,J,J,J,J,J,J,10,10,e,e,e,e,a,a,a,a,a,a,a,a,a,a,a,a,a,e,e,e,
K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e],[a,a,a,a,a,a,a,e,e,e,e,e,e,e,e,e,e,e,e,a,a,a,a,a,e,e,e,e,e,b,q,b,b,b,b,b,b,b,b,b,b,10,b,b,b,b,b,b,b,b,b,b,b,b,b,e,b,b,b,b,b,e,b,e,b,b,e,b,b,e,b,b,b,b,b,b,b,b,b,b,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,
f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],[q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,q,q,q,q,q,q,q,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,9,e,9,e,e,9,e,e,e,e,e,e,e,e,e,K,e,e,10,10,e,e,e,e,e,K,K,e,e,e,e,e,f,f,f,f,f,e,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,
f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,e,e,18],[e,e,e,K,K,K,e,e,e,e,e,10,9,10,9,9,J,J,J,J,J,J,J,J,J,J,9,e,e,e,e,e,e,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,e,e,e,e,e,e,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,e,e,e,e,e,e,e,e,e,e,e,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,
a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,e,e,e,a,a,a,a,a,a,e,e,a,a,a,a,a,a,e,e,a,a,a,a,a,a,e,e,a,a,a,e,e,e,K,K,e,e,e,K,K,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e]];return u})},"esri/views/vectorTiles/TileClipper":function(){define(["require","exports","./Geometry","./GeometryUtils"],function(u,a,b,r){Object.defineProperty(a,"__esModule",{value:!0});var n=function(){return function(a,c,b){this.ratio=a;this.x=c;this.y=b}}();u=
function(){function a(a,b,h){this.dz=a;this.yPos=b;this.xPos=h}a.prototype.setExtent=function(a){this.finalRatio=4096/a*(1<<this.dz);var c;c=64/this.finalRatio;a>>=this.dz;c>a&&(c=a);this.margin=c;this.xmin=a*this.xPos-c;this.ymin=a*this.yPos-c;this.xmax=this.xmin+a+2*c;this.ymax=this.ymin+a+2*c};a.prototype.reset=function(a){this.type=a;this._prevIsIn=!1;this.lines=[];this.line=null};a.prototype.moveTo=function(a,d){this._pushLine();this._prevIsIn=this._isIn(a,d);this._moveTo(a,d,this._prevIsIn);
this._prevPt=new b.Point(a,d);this._firstPt=new b.Point(a,d)};a.prototype.lineTo=function(a,d){var c=this._isIn(a,d),g,k,l,y,r,t;if(c)this._prevIsIn?this._lineTo(a,d,!0):(g=this._prevPt,k=new b.Point(a,d),l=this._intersect(k,g),this._lineTo(l.x,l.y,!0),this._lineTo(k.x,k.y,!0));else{if(this._prevIsIn)k=this._prevPt,g=new b.Point(a,d),l=this._intersect(k,g),this._lineTo(l.x,l.y,!0);else{var p=this._prevPt;g=new b.Point(a,d);if(!(p.x<=this.xmin&&g.x<=this.xmin||p.x>=this.xmax&&g.x>=this.xmax||p.y<=
this.ymin&&g.y<=this.ymin||p.y>=this.ymax&&g.y>=this.ymax)){k=[];if(p.x<this.xmin&&g.x>this.xmin||p.x>this.xmin&&g.x<this.xmin)l=(this.xmin-p.x)/(g.x-p.x),t=p.y+l*(g.y-p.y),t<=this.ymin?r=!1:t>=this.ymax?r=!0:k.push(new n(l,this.xmin,t));if(p.x<this.xmax&&g.x>this.xmax||p.x>this.xmax&&g.x<this.xmax)l=(this.xmax-p.x)/(g.x-p.x),t=p.y+l*(g.y-p.y),t<=this.ymin?r=!1:t>=this.ymax?r=!0:k.push(new n(l,this.xmax,t));if(p.y<this.ymin&&g.y>this.ymin||p.y>this.ymin&&g.y<this.ymin)l=(this.ymin-p.y)/(g.y-p.y),
t=p.x+l*(g.x-p.x),t<=this.xmin?y=!1:t>=this.xmax?y=!0:k.push(new n(l,t,this.ymin));if(p.y<this.ymax&&g.y>this.ymax||p.y>this.ymax&&g.y<this.ymax)l=(this.ymax-p.y)/(g.y-p.y),t=p.x+l*(g.x-p.x),t<=this.xmin?y=!1:t>=this.xmax?y=!0:k.push(new n(l,t,this.ymax));if(0===k.length)y?r?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):r?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(1<k.length&&k[0].ratio>k[1].ratio)this._lineTo(k[1].x,k[1].y,!0),this._lineTo(k[0].x,
k[0].y,!0);else for(l=0;l<k.length;l++)this._lineTo(k[l].x,k[l].y,!0)}}this._lineTo(g.x,g.y,!1)}this._prevIsIn=c;this._prevPt=new b.Point(a,d)};a.prototype.close=function(){var a,b;0<this.line.length&&(a=this._firstPt,b=this._prevPt,a.x===b.x&&a.y===b.y||this.lineTo(a.x,a.y),a=this.line,b=a.length,4<=b&&(a[0].x===a[1].x&&a[0].x===a[b-2].x||a[0].y===a[1].y&&a[0].y===a[b-2].y)&&(a.pop(),a[0].x=a[b-2].x,a[0].y=a[b-2].y))};a.prototype.result=function(){this._pushLine();if(0===this.lines.length)return null;
3===this.type&&l.simplify(this.margin*this.finalRatio,this.lines);return this.lines};a.prototype._isIn=function(a,b){return a>=this.xmin&&a<=this.xmax&&b>=this.ymin&&b<=this.ymax};a.prototype._intersect=function(a,d){var c,g;if(d.x>=this.xmin&&d.x<=this.xmax)g=d.y<=this.ymin?this.ymin:this.ymax,c=a.x+(g-a.y)/(d.y-a.y)*(d.x-a.x);else if(d.y>=this.ymin&&d.y<=this.ymax)c=d.x<=this.xmin?this.xmin:this.xmax,g=a.y+(c-a.x)/(d.x-a.x)*(d.y-a.y);else{g=d.y<=this.ymin?this.ymin:this.ymax;c=d.x<=this.xmin?this.xmin:
this.xmax;var k=(c-a.x)/(d.x-a.x),l=(g-a.y)/(d.y-a.y);k<l?g=a.y+k*(d.y-a.y):c=a.x+l*(d.x-a.x)}return new b.Point(c,g)};a.prototype._pushLine=function(){this.line&&(1===this.type?0<this.line.length&&this.lines.push(this.line):2===this.type?1<this.line.length&&this.lines.push(this.line):3===this.type&&3<this.line.length&&this.lines.push(this.line));this.line=[]};a.prototype._moveTo=function(a,d,h){3!==this.type?h&&(a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),d=Math.round((d-(this.ymin+
this.margin))*this.finalRatio),this.line.push(new b.Point(a,d))):(h||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),d<this.ymin&&(d=this.ymin),d>this.ymax&&(d=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),d=Math.round((d-(this.ymin+this.margin))*this.finalRatio),this.line.push(new b.Point(a,d)),this._is_v=this._is_h=!1)};a.prototype._lineTo=function(a,d,h){if(3!==this.type)if(h){a=Math.round((a-(this.xmin+this.margin))*this.finalRatio);d=Math.round((d-(this.ymin+this.margin))*
this.finalRatio);if(0<this.line.length&&(h=this.line[this.line.length-1],h.equals(a,d)))return;this.line.push(new b.Point(a,d))}else this.line&&0<this.line.length&&this._pushLine();else if(h||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),d<this.ymin&&(d=this.ymin),d>this.ymax&&(d=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),d=Math.round((d-(this.ymin+this.margin))*this.finalRatio),this.line&&0<this.line.length){h=this.line[this.line.length-1];var c=h.x===a,k=h.y===
d;c&&k||(this._is_h&&c?(h.x=a,h.y=d,h=this.line[this.line.length-2],this._is_h=h.x===a,this._is_v=h.y===d):this._is_v&&k?(h.x=a,h.y=d,h=this.line[this.line.length-2],this._is_h=h.x===a,this._is_v=h.y===d):(this.line.push(new b.Point(a,d)),this._is_h=c,this._is_v=k))}else this.line.push(new b.Point(a,d))};return a}();a.TileClipper=u;u=function(){function a(){}a.prototype.setExtent=function(a){this._ratio=4096===a?1:4096/a};a.prototype.reset=function(a){this.type=a;this.lines=[];this.line=null};a.prototype.moveTo=
function(a,d){this.line&&this.lines.push(this.line);this.line=[];var c=this._ratio;this.line.push(new b.Point(Math.round(a*c),Math.round(d*c)))};a.prototype.lineTo=function(a,d){var c=this._ratio;this.line.push(new b.Point(Math.round(a*c),Math.round(d*c)))};a.prototype.close=function(){var a=this.line;a&&!a[0].isEqual(a[a.length-1])&&a.push(a[0])};a.prototype.result=function(){this.line&&this.lines.push(this.line);if(0===this.lines.length)return null;3===this.type&&1!==this._ratio&&l.simplify(64,
this.lines);return this.lines};return a}();a.SimpleBuilder=u;var l=function(){function a(){}a.simplify=function(b,d){if(d){var c=-b,g=4096+b,k=-b,l=4096+b;b=[];for(var n=[],r=d.length,t=0;t<r;++t){var p=d[t];if(p&&!(2>p.length))for(var u=p[0],E=void 0,z=p.length,G=1;G<z;++G)E=p[G],u.x===E.x&&(u.x<=c&&(u.y>E.y?(b.push(t),b.push(G),b.push(0),b.push(-1)):(n.push(t),n.push(G),n.push(0),n.push(-1))),u.x>=g&&(u.y<E.y?(b.push(t),b.push(G),b.push(1),b.push(-1)):(n.push(t),n.push(G),n.push(1),n.push(-1)))),
u.y===E.y&&(u.y<=k&&(u.x<E.x?(b.push(t),b.push(G),b.push(2),b.push(-1)):(n.push(t),n.push(G),n.push(2),n.push(-1))),u.y>=l&&(u.x>E.x?(b.push(t),b.push(G),b.push(3),b.push(-1)):(n.push(t),n.push(G),n.push(3),n.push(-1)))),u=E}0!==b.length&&0!==n.length&&(a.fillParent(d,n,b),a.fillParent(d,b,n),c=[],a.calcDeltas(c,n,b),a.calcDeltas(c,b,n),a.addDeltas(c,d))}};a.fillParent=function(a,b,h){for(var c=h.length,d=b.length,k=0;k<d;k+=4){for(var l=b[k],n=b[k+1],t=b[k+2],p=a[l][n-1],l=a[l][n],n=8092,u=-1,E=
0;E<c;E+=4)if(h[E+2]===t){var z=h[E],G=h[E+1],v=a[z][G-1],z=a[z][G];switch(t){case 0:case 1:r.between(p.y,v.y,z.y)&&r.between(l.y,v.y,z.y)&&(v=Math.abs(z.y-v.y),v<n&&(n=v,u=E));break;case 2:case 3:r.between(p.x,v.x,z.x)&&r.between(l.x,v.x,z.x)&&(v=Math.abs(z.x-v.x),v<n&&(n=v,u=E))}}b[k+3]=u}};a.calcDeltas=function(b,d,h){for(var c=d.length,k=0;k<c;k+=4){var l=a.calcDelta(k,d,h,[]);b.push(d[k]);b.push(d[k+1]);b.push(d[k+2]);b.push(l)}};a.calcDelta=function(b,d,h,g){b=d[b+3];if(-1===b)return 0;var c=
g.length;if(1<c&&g[c-2]===b)return 0;g.push(b);return a.calcDelta(b,h,d,g)+1};a.addDeltas=function(a,b){for(var c=a.length,d=0,k=0;k<c;k+=4){var l=a[k+3];l>d&&(d=l)}for(k=0;k<c;k+=4){var n=b[a[k]],r=a[k+1],l=d-a[k+3];switch(a[k+2]){case 0:n[r-1].x-=l;n[r].x-=l;break;case 1:n[r-1].x+=l;n[r].x+=l;break;case 2:n[r-1].y-=l;n[r].y-=l;break;case 3:n[r-1].y+=l,n[r].y+=l}}a=b.length;for(c=0;c<a;++c)n=b[c],!n||2>n.length||n[n.length-1].x!==n[0].x&&n[n.length-1].y!==n[0].y&&n.push(n[0])};return a}()})},"esri/views/vectorTiles/style/StyleRepository":function(){define(["require",
"exports","./StyleLayer","dojo/has"],function(u,a,b,r){return function(){function a(b,k){this.styleJSON=b;this.version=parseFloat(b.version);this.sprite=k?k.spriteUrl:b.sprite;this.glyphs=k?k.glyphsUrl:b.glyphs;if(r("stable-symbol-rendering")){var c=(b.layers||[]).filter(function(a){return a.layout&&a.layout["text-font"]})[0];c&&(b.layers||[]).forEach(function(a){a.layout&&a.layout["text-font"]&&(a.layout["text-font"]=c.layout["text-font"])})}this.layers=(b.layers||[]).map(a._create);this._identifyRefLayers()}
a.prototype._identifyRefLayers=function(){for(var a=[],b=[],c=0,d=this.layers;c<d.length;c++){var h=d[c];if(1===h.type){var g=h.sourceLayer,g=g+("|"+JSON.stringify(h.minzoom)),g=g+("|"+JSON.stringify(h.maxzoom)),g=g+("|"+JSON.stringify(h.filter));a.push({key:g,layer:h})}2===h.type&&(g=h.sourceLayer,g+="|"+JSON.stringify(h.minzoom),g+="|"+JSON.stringify(h.maxzoom),g+="|"+JSON.stringify(h.filter),g+="|"+JSON.stringify(h.layout["line-cap"]),g+="|"+JSON.stringify(h.layout["line-join"]),b.push({key:g,
layer:h}))}this._assignRefLayers(a);this._assignRefLayers(b)};a.prototype._assignRefLayers=function(a){a.sort(function(a,b){return a.key<b.key?-1:a.key>b.key?1:0});for(var b,c,d=a.length,h=0;h<d;h++){var g=a[h];if(g.key===b)g.layer.refLayerId=c;else if(b=g.key,c=g.layer.id,1===g.layer.type&&!g.layer.hasPaintProperty("fill-outline-color"))for(var l=h+1;l<d;l++){var n=a[l];if(n.key===b){if(n.layer.hasPaintProperty("fill-outline-color")){a[h]=n;a[l]=g;c=n.layer.id;break}}else break}}};a._create=function(a,
k,c){k=1-1/(c.length+1)*(1+k);switch(a.type){case "background":return new b.StyleLayer(0,a,k);case "fill":return new b.StyleLayer(1,a,k);case "line":return new b.StyleLayer(2,a,k);case "symbol":return new b.StyleLayer(3,a,k);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":throw Error("Unsupported vector tile circle layer");}throw Error("Unknown vector tile layer");};return a}()})},"*noref":1}});
define("require exports dojo/Deferred ../../core/promiseUtils ./WorkerTile ./style/StyleRepository".split(" "),function(u,a,b,r,n,l){return function(){function a(){this._tiles=new Map;this._spriteInfo={};this._glyphInfo={}}a.prototype.reset=function(){var a=new b;this._spriteInfo={};this._glyphInfo={};var d=this._tiles;d.forEach(function(a){return a.setObsolete()});d.clear();a.resolve();return a.promise};a.prototype.getLayers=function(){return this._layers};a.prototype.setLayers=function(a){this._layers=
(new l(a)).layers;return r.resolve({data:""})};a.prototype.getTile=function(a,b){var c=this,d=a.key,k=n.pool.acquire();k.initialize(a.key,a.refKey,this,a.rotation);var l=a.cacheTile;return b.invoke("fetchTileData",a.refKey).then(function(a){return k.setDataAndParse(a.protobuff,b).then(function(a){l&&6!==k.status&&c._tiles.set(d,k);return a}).otherwise(function(a){k.setObsolete();n.pool.release(k);c._tiles["delete"](k.tileKey);return r.reject(a)})}).otherwise(function(a){k.setObsolete();if(c._tiles.has(k.tileKey))c._tiles["delete"](k.tileKey);
return r.reject(a)}).always(function(a){l||n.pool.release(k);return a})};a.prototype.update=function(a){var b=this._tiles.get(a.key);return b?b.updateSymbols(a.rotation):r.reject()};a.prototype.destructTileData=function(a){this._tiles.has(a.key)&&(n.pool.release(this._tiles.get(a.key)),this._tiles["delete"](a.key));return r.resolve()};a.prototype.fetchSprites=function(a,b){var c=[],d=this._spriteInfo;a.forEach(function(a){void 0===d[a]&&c.push(a)});return 0===c.length?r.resolve():b.invoke("getSprites",
{sprites:c}).then(function(a){a=a.spriteItems;for(var b in a)d[b]=a[b]})};a.prototype.getSpriteItems=function(){return this._spriteInfo};a.prototype.fetchGlyphs=function(a,b,h,g){var c=[],d=this._glyphInfo[b];d?h.forEach(function(a){d[a]||c.push(a)}):(d=this._glyphInfo[b]=[],h.forEach(function(a){return c.push(a)}));return 0===c.length?r.resolve():g.invoke("getGlyphs",{tileID:a,font:b,codePoints:c}).then(function(a){a=a.glyphItems;for(var b in a)d[b]=a[b]})};a.prototype.getGlyphItems=function(a){return this._glyphInfo[a]};
return a}()});