// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.4/esri/copyright.txt for details.
//>>built
define(["require","exports","../../core/tsSupport/extendsHelper","./InputHandler","../../geometry/ScreenPoint"],function(g,h,m,n,p){function k(c){return!!q[c]}function r(c){for(var b=0;b<c.length;b++)if(!k(c[b]))return!1;return!0}Object.defineProperty(h,"__esModule",{value:!0});var q={click:!0,"double-click":!0,hold:!0,drag:!0,"key-down":!0,"key-up":!0,"pointer-down":!0,"pointer-move":!0,"pointer-up":!0,"mouse-wheel":!0},l;(function(c){c[c.Left=0]="Left";c[c.Middle=1]="Middle";c[c.Right=2]="Right"})(l||
(l={}));g=function(){function c(b){this.handlers=new Map;this.counter=0;this.view=b;this.inputManager=null}c.prototype.connect=function(b){var a=this;b&&this.disconnect();this.inputManager=b;this.handlers.forEach(function(b,e){return a.inputManager.installHandlers(e,[b])})};c.prototype.disconnect=function(){var b=this;this.inputManager&&this.handlers.forEach(function(a,c){return b.inputManager.uninstallHandlers(c)});this.inputManager=null};c.prototype.destroy=function(){this.disconnect();this.handlers.clear();
this.view=null};c.prototype.register=function(b,a,c){var e=this;b=Array.isArray(b)?b:b.split(",");if(!r(b))return b.some(k)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;var t=Array.isArray(a)?a:[];c=Array.isArray(a)?c:a;var d=this.createUniqueGroupName();a=new u(this.view,b,t,c);this.handlers.set(d,a);this.inputManager&&this.inputManager.installHandlers(d,[a]);return{remove:function(){return e.removeHandler(d)}}};c.prototype.removeHandler=
function(b){this.handlers.has(b)&&this.handlers.delete(b);this.inputManager&&this.inputManager.uninstallHandlers(b)};c.prototype.createUniqueGroupName=function(){this.counter+=1;return"viewEvents_"+this.counter};return c}();h.ViewEvents=g;var u=function(c){function b(a,b,e,f){var d=c.call(this,"esri.views.input.ViewEventHandler",!0)||this;d.view=a;for(a=0;a<b.length;a++)switch(b[a]){case "click":d.registerIncoming("click",e,function(a){return f(d.wrapClick(a))});break;case "double-click":d.registerIncoming("double-click",
e,function(a){return f(d.wrapDoubleClick(a))});break;case "hold":d.registerIncoming("hold",e,function(a){return f(d.wrapHold(a))});break;case "drag":d.registerIncoming("drag",e,function(a){return f(d.wrapDrag(a))});break;case "key-down":d.registerIncoming("key-down",e,function(a){return f(d.wrapKeyDown(a))});break;case "key-up":d.registerIncoming("key-up",e,function(a){return f(d.wrapKeyUp(a))});break;case "pointer-down":d.registerIncoming("pointer-down",e,function(a){return f(d.wrapPointer(a,"pointer-down"))});
break;case "pointer-move":d.registerIncoming("pointer-move",e,function(a){return f(d.wrapPointer(a,"pointer-move"))});break;case "pointer-up":d.registerIncoming("pointer-up",e,function(a){return f(d.wrapPointer(a,"pointer-up"))});break;case "mouse-wheel":d.registerIncoming("mouse-wheel",e,function(a){return f(d.wrapMouseWheel(a))})}return d}m(b,c);b.prototype.wrapClick=function(a){var b=a.data.x,c=a.data.y;return{type:"click",button:"touch"===a.data.native.pointerType?0:a.data.native.button,x:b,y:c,
native:a.data.native,timestamp:a.timestamp,screenPoint:new p(b,c),mapPoint:this.view.toMap(b,c),stopPropagation:function(){return a.stopPropagation()}}};b.prototype.wrapDoubleClick=function(a){var b=a.data.x,c=a.data.y;return{type:"double-click",button:"touch"===a.data.native.pointerType?0:a.data.native.button,x:b,y:c,native:a.data.native,timestamp:a.timestamp,mapPoint:this.view.toMap(b,c),stopPropagation:function(){return a.stopPropagation()}}};b.prototype.wrapHold=function(a){var b=a.data.x,c=a.data.y;
return{type:"hold",button:"touch"===a.data.native.pointerType?0:a.data.native.button,x:b,y:c,native:a.data.native,timestamp:a.timestamp,mapPoint:this.view.toMap(b,c),stopPropagation:function(){return a.stopPropagation()}}};b.prototype.wrapDrag=function(a){return{type:"drag",action:a.data.action,x:a.data.currentState.center.x,y:a.data.currentState.center.y,origin:{x:a.data.startState.center.x,y:a.data.startState.center.y},native:a.data.pointers[0].currentEvent.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};
b.prototype.wrapKeyDown=function(a){return{type:"key-down",key:a.data.key,repeat:a.data.repeat,native:a.data.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};b.prototype.wrapKeyUp=function(a){return{type:"key-up",key:a.data.key,native:a.data.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};b.prototype.wrapPointer=function(a,b){return{type:b,x:a.data.x,y:a.data.y,pointerId:a.data.native.pointerId,pointerType:a.data.native.pointerType,
native:a.data.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};b.prototype.wrapMouseWheel=function(a){return{type:"mouse-wheel",x:a.data.x,y:a.data.y,deltaY:a.data.deltaY,native:a.data.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};return b}(n.InputHandler)});