// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.4/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/MapViewBase":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/_base/lang ../core/accessorSupport/decorators ../core/HandleRegistry ../core/Logger ../core/promiseUtils ../Viewpoint ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/SpatialReference ../geometry/support/scaleUtils ../geometry/support/webMercatorUtils ./View ./ViewAnimation ./2d/FrameTask ./2d/PaddedViewState ./2d/MapViewConstraints ./2d/AnimationManager ./2d/viewpointUtils".split(" "),
function(h,l,g,c,a,b,e,k,f,m,d,r,n,t,u,w,p,q,x,A,C,z,B){var D=k.getLogger("esri.views.MapView");h=function(b){function k(a){var d=b.call(this,a)||this;d._frameTask=new x(d);d._mapViewBaseHandles=new e;d._setup=!1;d.fullOpacity=1;d.interacting=!1;d.initialExtent=null;d.resizeAlign="center";d.type="2d";d.constraints=new C;d.padding={top:0,right:0,bottom:0,left:0};var f=function(){this._set("updating",this.layerViewManager.factory.working||this.allLayerViews.some(function(a){return!0===a.updating}))}.bind(d),
k=d._mapViewBaseHandles;k.add([d.watch("viewpoint",function(a){return d._flipStationary()},!0),d.on("resize",function(a){return d._resizeHandler(a)}),d.watch("animationManager.animation",function(a){d.animation=a}),d.allLayerViews.on("change",function(){f();k.remove("layerViewsUpdating");k.add(d.allLayerViews.map(function(a){return a.watch("updating",f)}).toArray(),"layerViewsUpdating")})]);d.watch("ready",function(a){a?d._startup():d._tearDown()});return d}g(k,b);k.prototype.destroy=function(){this.destroyed||
(this._set("ready",!1),this._mapViewBaseHandles.removeAll(),this.layerViewManager.empty(),this._frameTask.destroy(),this._tearDown(),this._gotoTask=this._mapViewBaseHandles=this._frameTask=null)};Object.defineProperty(k.prototype,"animation",{set:function(a){var b=this,d=this._get("animation");a!==d&&(d&&d.stop(),!a||a.isFulfilled()?this._set("animation",null):(this._set("animation",a),d=function(){a===b._get("animation")&&(b._set("animation",null),b._frameTask.requestFrame())},a.then(d,d,function(a){b.state&&
(b.state.viewpoint=a)})))},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"center",{get:function(){if(!this.ready)return this._get("center");var a=this.content.center;return new d({x:a[0],y:a[1],spatialReference:this.content.spatialReference})},set:function(a){if(null!=a)if(this._normalizeInput(a))if(this.ready){var b=this.viewpoint;B.centerAt(b,b,a);this.viewpoint=b}else this._set("center",a),this.notifyChange("initialExtentRequired");else D.error("#center","incompatible spatialReference "+
JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"constraints",{set:function(a){var b=this,d=this._get("constraints");d&&(this._mapViewBaseHandles.remove("constraints"),d.destroy());this._set("constraints",a);a&&(this.ready&&(a.view=this,this.state.viewpoint=a.fit(this.content.viewpoint)),this._mapViewBaseHandles.add(a.on("update",function(){b.ready&&b.state&&(b.state.viewpoint=
a.fit(b.content.viewpoint))}),"constraints"))},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"extent",{get:function(){return this.ready?this.content.extent.clone():this._get("extent")},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?b.width&&b.height?this.ready?(a=this.viewpoint,B.setExtent(a,a,b,this.size,{constraints:this.constraints}),this.viewpoint=a):(this._set("extent",b),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",
-1),this.notifyChange("initialExtentRequired")):D.error("#extent","invalid extent size"):D.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))}},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"initialExtentRequired",{get:function(){var a=this.extent,b=this.center,d=this.scale,f=this.viewpoint,e=this.zoom;return this.get("map.initialViewProperties.viewpoint")||a||b&&(0!==d||-1!==
e)||f?!1:!0},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"padding",{get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(a){this.ready?(this.state.padding=a,this._set("padding",this.state.padding)):this._set("padding",a)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"rotation",{get:function(){return this.ready?this.content.rotation:this._get("rotation")},set:function(a){if(!isNaN(a))if(this.ready){var b=this.viewpoint;B.rotateTo(b,
b,a);this.viewpoint=b}else this._set("rotation",a)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"scale",{get:function(){return this.ready?this.content.scale:this._get("scale")},set:function(a){if(a&&!isNaN(a))if(this.ready){var b=this.viewpoint;B.scaleTo(b,b,a);this.viewpoint=b}else{this._set("scale",a);this._set("zoom",-1);if(a=this._get("extent"))this._set("extent",null),this._set("center",a.center);this.notifyChange("initialExtentRequired")}},enumerable:!0,configurable:!0});
Object.defineProperty(k.prototype,"stationary",{get:function(){return!this.animation&&!this.interacting&&!this._get("resizing")&&!this._stationaryTimer},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"viewpoint",{get:function(){return this.ready?this.content.viewpoint.clone():this._get("viewpoint")},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?this.ready?(a=B.create(),B.copy(a,b),this.constraints.constrain(a,this.content.viewpoint),this.state.viewpoint=a,this._frameTask.requestFrame(),
this._set("viewpoint",a)):(this._set("viewpoint",b),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")):!a.scale||isNaN(a.scale)?D.error("#viewpoint","invalid scale value of "+a.scale):a.targetGeometry?D.error("#viewpoint","incompatible spatialReference "+JSON.stringify(a.targetGeometry.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference)):D.error("#viewpoint","geometry not defined")}},
enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"zoom",{get:function(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(a){if(null!=a){if(!this.ready){this.notifyChange("initialExtentRequired");this._set("zoom",a);this._set("scale",0);var b=this._get("extent");b&&(this._set("extent",null),this._set("center",b.center))}this.constraints.effectiveLODs&&(b=this.viewpoint,B.scaleTo(b,b,this.constraints.zoomToScale(a)),this.viewpoint=b,this._set("zoom",
this.constraints.scaleToZoom(this.scale)))}},enumerable:!0,configurable:!0});k.prototype.goTo=function(b,d){if(this.ready)return d=a.mixin({animate:!0},d),b=B.createAsync(b,this),this._gotoTask={},d.animate?this._gotoAnimated(b,d):this._gotoImmediate(b,d);D.error("#goTo()","MapView cannot be used before it is ready")};k.prototype.hitTest=function(a,b){return f.reject("Should be implemented by subclasses")};k.prototype.toMap=function(a,b,f){if(!this.ready)return null;a&&null!=a.x&&(f=b,b=a.y,a=a.x);
var e=[0,0];this.state.toMap(e,[a,b]);f=f||new d;f.x=e[0];f.y=e[1];f.spatialReference=this.spatialReference;return f};k.prototype.isTileInfoRequired=function(){return!0};k.prototype.toScreen=function(a,b,d,f){if(!this.ready)return null;a&&null!=a.x&&(f=b,b=a.y,a=a.x);f=d||f||new r;a=[a,b];this.state.toScreen(a,a);f.x=a[0];f.y=a[1];return f};k.prototype.pixelSizeAt=function(a,b){if(!this.ready)return NaN;a&&null!=a.x&&(b=a.y,a=a.x);return this.content.pixelSizeAt([a,b])};k.prototype.requestLayerViewUpdate=
function(a){this.ready&&this._frameTask.requestLayerViewUpdate(a)};k.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null};k.prototype.isSpatialReferenceSupported=function(a,b){if(b||this._get("ready"))return!0;b=this._normalizeInput(this._get("center"),a);var d=this._normalizeInput(this._get("extent"),a),f=this._normalizeInput(this._get("viewpoint"),a),e=this._userSpatialReference,k=null,
c=null;(f=f&&f.targetGeometry)&&("extent"===f.type?k=f:"point"===f.type&&(c=f));f=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"),a);a=this._normalizeInput(this.initialExtent,a);a=d||k||f||a;return b||c||a&&a.center?!0:(e&&D.error("The view could not be initialized with the spatialReference "+e.wkid+".","Try specifying an extent or a center and scale"),!1)};k.prototype._gotoImmediate=function(a,b){var d=this,f=this._gotoTask;!this.animation||"running"!==
this.animation.state&&"waiting-for-target"!==this.animation.state?this.animation=new q({target:a}):this.animation.target=a;a.then(function(a){f===d._gotoTask&&(d.viewpoint=d.animation.target=a,d.animation.finish())});return this.animation};k.prototype._gotoAnimated=function(a,b){var d=this;!this.animation||"running"!==this.animation.state&&"waiting-for-target"!==this.animation.state?this.animation=new q({target:a}):this.animation.target=a;var f=this.animation;f.state="waiting-for-target";a.then(function(e){f.target===
a&&d.animation===f&&(f.target=e,f.state="running",d.animationManager.animate(f,d.viewpoint,b),f.state===q.State.STOPPED&&f.stop())}).otherwise(function(){f.target===a&&d.animation===f&&(d.animation=null,f.finish())});return f};k.prototype._resizeHandler=function(a){var b=this.state;if(b){var d=this.content.viewpoint,f=this.content.size.concat();b.size=[a.width,a.height];B.resize(d,d,f,this.content.size,this.resizeAlign);d=this.constraints.constrain(d,null);this.state.viewpoint=d}};k.prototype._startup=
function(){if(!this._setup){this._setup=!0;var a=this.constraints,b=this._get("zoom"),d=this._get("scale"),f=this._normalizeInput(this._get("center")),e=this._normalizeInput(this._get("extent")),k=this._get("rotation"),c=this._normalizeInput(this._get("viewpoint"));a.view=this;a.effectiveLODs?-1!==b&&(d=a.zoomToScale(b)):b=-1;var n=null,r=null,g=0,b=c&&c.rotation,t=c&&c.targetGeometry;t&&("extent"===t.type?n=t:"point"===t.type&&(r=t,g=c.scale));c=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));
t=this._normalizeInput(this.initialExtent);e=e||n||c||t;f=f||r||e&&e.center;d=d||g||e&&u.getScale({width:this.size[0]},e);k=new m({targetGeometry:f,scale:d,rotation:k||b||0});a.fit(k);this._set("animationManager",new z);this._set("state",new A({padding:this._get("padding"),size:this.size,viewpoint:k}));this._set("content",this.state.content)}};k.prototype._tearDown=function(){this._setup&&(this._setup=!1,this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null,this.notifyChange("stationary")),
this.constraints.view=null,this.animationManager.destroy(),this._set("animationManager",null),this._set("state",null),this._set("content",null),this.animation=null)};k.prototype._flipStationary=function(){var a=this;this._stationaryTimer&&clearTimeout(this._stationaryTimer);this._stationaryTimer=setTimeout(function(){a._stationaryTimer=null;a.notifyChange("stationary")},160);this.notifyChange("stationary")};k.prototype._normalizeInput=function(a,b){void 0===b&&(b=this.spatialReference);var d=a&&a.targetGeometry||
a;return b?d?b.equals(d.spatialReference)?a:w.canProject(d,b)?a&&"esri.Viewpoint"===a.declaredClass?(a.targetGeometry=w.project(d,b),a):w.project(d,b):null:null:a};return k}(b.declared(p));c([b.property()],h.prototype,"animation",null);c([b.property({readOnly:!0})],h.prototype,"animationManager",void 0);c([b.property({value:null,type:d,dependsOn:["content.center"]})],h.prototype,"center",null);c([b.property({type:C})],h.prototype,"constraints",null);c([b.property({readOnly:!0})],h.prototype,"content",
void 0);c([b.property({value:null,type:n,dependsOn:["content.extent"]})],h.prototype,"extent",null);c([b.property()],h.prototype,"fullOpacity",void 0);c([b.property({readOnly:!0})],h.prototype,"interacting",void 0);c([b.property({type:n})],h.prototype,"initialExtent",void 0);c([b.property({dependsOn:["map.initialViewProperties.viewpoint"]})],h.prototype,"initialExtentRequired",null);c([b.property({value:{top:0,right:0,bottom:0,left:0},cast:function(b){return a.mixin({top:0,right:0,bottom:0,left:0},
b)}})],h.prototype,"padding",null);c([b.property()],h.prototype,"resizeAlign",void 0);c([b.property({value:0,type:Number,dependsOn:["content.rotation"]})],h.prototype,"rotation",null);c([b.property({value:0,type:Number,dependsOn:["content.scale"]})],h.prototype,"scale",null);c([b.property({type:t,dependsOn:["map.initialViewProperties.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],h.prototype,"spatialReference",void 0);c([b.property({readOnly:!0})],h.prototype,"state",void 0);c([b.property()],
h.prototype,"stationary",null);c([b.property({readOnly:!0})],h.prototype,"type",void 0);c([b.property({value:null,type:m,dependsOn:["content.viewpoint"]})],h.prototype,"viewpoint",null);c([b.property({value:-1,dependsOn:["content.scale"]})],h.prototype,"zoom",null);return h=c([b.subclass("esri.views.MapViewBase")],h)})},"esri/geometry/ScreenPoint":function(){define(["./Point"],function(h){return h.createSubclass({declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}})})},"esri/views/2d/FrameTask":function(){define(["require",
"exports","../../core/Scheduler","./FrameBudget"],function(h,l,g,c){return function(){function a(a){var b=this;this.view=a;this._frameTaskHandle=null;this._budget=new c(6);this.budget=6;this.updateEnabled=this.stationary=!0;this.prepare=function(){b._updateParameters.state=b.view.state;b._updateParameters.stationary=b.view.stationary;b._updateParameters.devicePixelRatio=window.devicePixelRatio;b._budget.reset(b.budget)};this.update=function(){if(b.updateEnabled){for(var a=b._budget,f=b.view,e=f.allLayerViews.toArray().filter(function(a){return a.isFulfilled()&&
null==a.layerViews}),d=e.length,c=f.state,n=0;n<e.length;n++)if(f=e[n],f.attached){var g=b._layerViewsState[f.uid];if(null==g||!b.stationary&&!f.moving)f.moving=!0,f.moveStart();g!==c.id&&f.viewChange();b.stationary&&f.moving&&(f.moving=!1,f.moveEnd());b._layerViewsState[f.uid]=c.id}c=b._layerViewsTrash;for(n=0;n<c.length;n++)f=c[n],b._detachLayerView(f);for(n=c.length=0;n<d;n++)f=e[n],f.isFulfilled()&&!f.attached&&b._attachLayerView(f);e=b._layerViewsToUpdate;d=e.slice();f=b._updateParameters;for(b._layerViewsToUpdate.length=
0;!a.done&&0<d.length;)d.shift().processUpdate(f);0<d.length&&e.unshift.apply(e,d);0===e.length&&0===c.length&&b._frameTaskHandle.pause()}};a.watch("ready",function(a){a?b.start():b.stop()})}a.prototype.destroy=function(){this.stop()};a.prototype.start=function(){var a=this;this._updateParameters={budget:this._budget,state:this.view.state,devicePixelRatio:window.devicePixelRatio,stationary:!0};this._layerViewsTrash=[];this._layerViewsToUpdate=[];this._layerViewsState={};this._allLayerViewsChangeHandle=
this.view.allLayerViews.on("change",function(b){Array.prototype.push.apply(a._layerViewsTrash,b.removed);a.requestFrame()});this._stationaryHandle=this.view.watch("stationary",function(b){a.stationary=b;a.requestFrame()});this._frameTaskHandle=g.addFrameTask(this)};a.prototype.stop=function(){var a=this;this._frameTaskHandle&&(this.view.allLayerViews.forEach(function(b){return a._detachLayerView(b)}),this._stationaryHandle.remove(),this._allLayerViewsChangeHandle.remove(),this._frameTaskHandle.remove(),
this._updateParameters=this._stationaryHandle=this._allLayerViewsChangeHandle=this._frameTaskHandle=this._layerViewsTrash=this._layerViewsToUpdate=this._layerViewsState=null,this.stationary=!0)};a.prototype.requestLayerViewUpdate=function(a){this._layerViewsToUpdate.push(a);this.requestFrame()};a.prototype.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.isPaused()&&this._frameTaskHandle.resume()};a.prototype._attachLayerView=function(a){a.attached||(a.attached=!0,a.moving=!1,
a.attach())};a.prototype._detachLayerView=function(a){a.attached&&(a.detach(),a.attached=!1,a.moving=!1)};return a}()})},"esri/views/2d/FrameBudget":function(){define(["require","exports","../../core/now"],function(h,l,g){return function(){function c(a){void 0===a&&(a=Number.MAX_VALUE);this._budget=this._begin=0;this.enabled=!0;this.reset(a)}c.now=function(){return g()};Object.defineProperty(c.prototype,"done",{get:function(){return this.enabled&&this.elapsed>=this._budget},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"elapsed",{get:function(){return g()-this._begin},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"remaining",{get:function(){return Math.max(this._budget-this.elapsed,0)},enumerable:!0,configurable:!0});c.prototype.reset=function(a){void 0===a&&(a=Number.MAX_VALUE);this._begin=g();this._budget=this.enabled?a:Number.MAX_VALUE};return c}()})},"esri/views/2d/PaddedViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./viewpointUtils ./ViewState ./libs/gl-matrix/vec2 ./libs/gl-matrix/mat2d ./libs/gl-matrix/common ../../core/Accessor".split(" "),
function(h,l,g,c,a,b,e,k,f,m,d){var r=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.left=0;b.top=0;b.right=0;b.bottom=0;return b}g(b,a);return b}(a.declared(d)),r=c([a.subclass("esri.views.2d.PaddedViewState.Padding")],r);h=function(a){function d(){for(var b=[],d=0;d<arguments.length;d++)b[d]=arguments[d];b=a.apply(this,b)||this;b.content=new e;b.padding=new r;b.size=k.fromValues(0,0);return b}g(d,a);Object.defineProperty(d.prototype,"clipRect",{get:function(){var a=this.worldScreenWidth;
if(!a)return null;var b=m.toRadian(this.rotation),d=this.width*Math.abs(Math.cos(b))+this.height*Math.abs(Math.sin(b));if(a>d)return null;var e=k.clone(this.screenCenter),c=f.fromTranslation(f.create(),e);f.rotate(c,c,b);k.negate(e,e);f.translate(c,c,e);k.transformMat2d(e,this.paddedScreenCenter,c);return{top:-Math.round(d),left:Math.round(e[0]-.5*a),right:Math.round(e[0]+.5*a),bottom:+Math.round(d)}},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"padding",{set:function(a){this._set("padding",
a||new r);this._updateContent()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"size",{set:function(a){this._set("size",a);this._updateContent()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"paddedScreenCenter",{get:function(){var a=this.content.size,b=this.padding,a=k.scale(k.create(),a,.5);a[0]+=b.left;a[1]+=b.top;return a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"viewpoint",{set:function(a){var d=a.clone();this.content.viewpoint=
a;b.addPadding(d,a,this._get("size"),this._get("padding"));this._set("viewpoint",b.addPadding(d.clone(),a,this._get("size"),this._get("padding")))},enumerable:!0,configurable:!0});d.prototype._updateContent=function(){var a=k.create(),b=this._get("size"),d=this._get("padding");if(b&&d){var f=this.content;k.set(a,d.left+d.right,d.top+d.bottom);k.subtract(a,b,a);f.size=a;if(a=f.viewpoint)this.viewpoint=a}};return d}(a.declared(e));c([a.shared({transform:{dependsOn:["padding"]}})],h.prototype,"properties",
void 0);c([a.property({dependsOn:["worldScreenWidth","rotation","paddedScreenCenter","screenCenter"],readOnly:!0})],h.prototype,"clipRect",null);c([a.property()],h.prototype,"content",void 0);c([a.property({type:r})],h.prototype,"padding",null);c([a.property()],h.prototype,"size",null);c([a.property({dependsOn:["size","padding"],readOnly:!0})],h.prototype,"paddedScreenCenter",null);c([a.property()],h.prototype,"viewpoint",null);return h=c([a.subclass("esri.views.2d.PaddedViewState")],h)})},"esri/views/2d/viewpointUtils":function(){define("require exports ./libs/gl-matrix/common ./libs/gl-matrix/mat2d ./libs/gl-matrix/vec2 ../../Viewpoint ../../core/promiseUtils ../../core/Error ../../geometry/SpatialReference ../../geometry/Geometry ../../geometry/Point ../../geometry/Extent ../../geometry/support/webMercatorUtils ../../geometry/support/scaleUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils".split(" "),
function(h,l,g,c,a,b,e,k,f,m,d,r,n,t,u,w){function p(b,d,f,e){return e&&f&&!e.equals(f)&&n.canProject(e,f)&&e.isWebMercator?(e.isWebMercator?(f=d[1],89.99999<f?f=89.99999:-89.99999>f&&(f=-89.99999),f=Math.sin(g.toRadian(f)),b=a.set(b,6378137*g.toRadian(d[0]),3189068.5*Math.log((1+f)/(1-f)))):(f=g.toDegree(d[0]/6378137),b=a.set(b,f-360*Math.floor((f+180)/360),g.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*d[1]/6378137))))),b):a.copy(b,d)}function q(a){return a.wkid?a:a.spatialReference||f.WGS84}function x(b,
d){return d.type?a.set(b,d.x,d.y):a.copy(b,d)}function A(a,b){return Math.max(a.width/b[0],a.height/b[1])*F(a.spatialReference)}function C(a,b,f){var e;if(!a)return null;if(Array.isArray(a)&&2===a.length&&"number"===typeof a[0]&&"number"===typeof a[1])return new d(a);if(a.reduce)return a.reduce(function(a,d){return C(d,b,a)},f);a instanceof m?e=a:a.geometry&&(e=a.geometry);if(!e)return null;a="point"===e.type?new r({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference}):e.extent;
if(!a)return null;e=n.canProject(a,b);if(!a.spatialReference.equals(b)&&e)a=n.project(a,b);else if(!e)return null;return f=f?f.union(a):a.clone()}function z(f,e){if(!f)return new b({targetGeometry:new d,scale:0,rotation:0});var k=e.spatialReference,c=e.size,n=e.viewpoint,r=e.constraints,g=null;"esri.Viewpoint"===f.declaredClass?g=f:f.viewpoint?g=f.viewpoint:f.target&&"esri.Viewpoint"===f.target.declaredClass&&(g=f.target);var u=null;if(g&&g.targetGeometry)u=g.targetGeometry;else if(f instanceof m)u=
f;else if(f||f&&(f.hasOwnProperty("center")||f.hasOwnProperty("extent")||f.hasOwnProperty("target")))u=C(f.center,k)||C(f.extent,k)||C(f.target,k)||C(f,k);!u&&n&&n.targetGeometry?u=n.targetGeometry:!u&&e.extent&&(u=e.extent);var t=q(u);k||(k=q(e.spatialReference||e.extent||u));if(!w.canProject(u,k)&&t&&!t.equals(k))return null;var h=x(a.create(),u.center?u.center:u),k=new d(p(h,h,t,k),k),t=null,t=g&&g.targetGeometry&&"point"===g.targetGeometry.type?g.scale:f.hasOwnProperty("scale")&&f.scale?f.scale:
f.hasOwnProperty("zoom")&&-1!==f.zoom&&r&&r.effectiveLODs?r.zoomToScale(f.zoom):Array.isArray(u)||"point"===u.type||"extent"===u.type&&0===u.width&&0===u.height?e.extent?A(e.extent,c):n.scale:A(u.extent,c);e=0;g?e=g.rotation:f.hasOwnProperty("rotation")?e=f.rotation:n&&(e=n.rotation);r&&(r.rotationEnabled||(e=0),r.snapToZoom&&(t=r.snapScale(t)),0!==r.effectiveMinScale&&(t=Math.min(r.effectiveMinScale,t)),0!==r.effectiveMaxScale&&(t=Math.max(r.effectiveMaxScale,t)));return new b({targetGeometry:k,
scale:t,rotation:e})}function B(a,b){var d=a.targetGeometry,f=b.targetGeometry;d.x=f.x;d.y=f.y;d.spatialReference=f.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a}function D(b,d,f){return f?a.set(b,.5*(d[0]-f.right+f.left),.5*(d[1]-f.bottom+f.top)):a.scale(b,d,.5)}function H(a,b,d,f){l.getTransform(a,b,d,f);return c.invert(a,a)}function y(b,d,f){var e=g.toRadian(d.rotation)||0;d=Math.abs(Math.cos(e));e=Math.abs(Math.sin(e));return a.set(b,Math.round(f[1]*e+f[0]*d),Math.round(f[1]*
d+f[0]*e))}function v(a){return a.scale*(1/(39.37*(t.getUnitValueForSR(a.targetGeometry.spatialReference)||I)*96))}function F(a){return 39.37*(t.getUnitValueForSR(a)||I)*96}function E(a){return a.isWrappable?(a=u.getInfo(a),a.valid[1]-a.valid[0]):0}function G(a,b){return Math.round(E(a)/b)}Object.defineProperty(l,"__esModule",{value:!0});var I=6370997*Math.PI/180,L=180/Math.PI;l.create=z;l.copy=B;l.getAnchor=D;l.getExtent=function(){var b=a.create();return function(a,d,f){var e=d.targetGeometry;x(b,
e);d=.5*v(d);a.xmin=b[0]-d*f[0];a.ymin=b[1]-d*f[1];a.xmax=b[0]+d*f[0];a.ymax=b[1]+d*f[1];a.spatialReference=e.spatialReference;return a}}();l.setExtent=function(a,b,d,f,e){l.centerAt(a,b,d.center);a.scale=A(d,f);e&&e.constraints&&e.constraints.constrain(a);return a};l.getOuterExtent=function(){var b=a.create(),d=a.create();return function(a,f,e){x(b,f.targetGeometry);y(d,f,e);e=.5*v(f);a.set({xmin:b[0]-e*d[0],ymin:b[1]-e*d[1],xmax:b[0]+e*d[0],ymax:b[1]+e*d[1],spatialReference:f.targetGeometry.spatialReference});
return a}}();l.getClippedExtent=function(){var b=a.create(),d=a.create();return function(a,f,e){var k=v(f),c=f.targetGeometry.spatialReference,n=G(c,k);x(b,f.targetGeometry);y(d,f,e);c.isWrappable&&d[0]>n&&(d[0]=n);f=.5*k;a.set({xmin:b[0]-f*d[0],ymin:b[1]-f*d[1],xmax:b[0]+f*d[0],ymax:b[1]+f*d[1],spatialReference:c});return a}}();l.getOuterSize=y;l.getPaddingScreenTranslation=function(){var b=a.create();return function(d,f,e){return a.sub(d,a.scale(d,f,.5),D(b,f,e))}}();var M=function(){var b=c.create(),
d=a.create();return function(f,e,k,n){var m=v(e);e=g.toRadian(e.rotation)||0;a.set(d,m,m);c.fromScaling(b,d);c.rotate(b,b,e);c.translate(b,b,l.getPaddingScreenTranslation(d,k,n));c.translate(b,b,[0,n.top-n.bottom]);return a.set(f,b[4],b[5])}}();l.getResolution=v;l.getResolutionToScaleFactor=F;l.getMatrix=function(){var b=a.create(),d=a.create(),f=a.create();return function(e,k,n,m,r,g){a.negate(b,k);a.scale(d,n,.5*g);a.set(f,1/m*g,-1/m*g);c.identity(e);c.translate(e,e,d);r&&c.rotate(e,e,r);c.scale(e,
e,f);c.translate(e,e,b);return e}}();l.getTransform=function(){var b=a.create();return function(a,d,f,e){var k=v(d),c=g.toRadian(d.rotation)||0;x(b,d.targetGeometry);return l.getMatrix(a,b,f,k,c,e)}}();l.getTransformNoRotation=function(){var b=a.create();return function(a,d,f,e){var k=v(d);x(b,d.targetGeometry);return l.getMatrix(a,b,f,k,0,e)}}();l.getWorldWidth=E;l.getWorldScreenWidth=G;l.createAsync=function(a,b){if(a=z(a,b))return e.resolve(a);a=new k("viewpointUtils-createAsync:different-spatialReference",
"Target spatialReference cannot be projected and is different from out spatialReference");return e.reject(a)};l.angleBetween=function(){var b=a.create(),d=a.create(),f=a.create();return function(e,k,c){a.subtract(b,e,k);a.normalize(b,b);a.subtract(d,e,c);a.normalize(d,d);a.cross(f,b,d);e=Math.acos(a.dot(b,d)/(a.length(b)*a.length(d)))*L;0>f[2]&&(e=-e);isNaN(e)&&(e=0);return e}}();l.addPadding=function(){var b=a.create();return function(a,d,f,e){var k=a.targetGeometry;B(a,d);M(b,d,f,e);k.x+=b[0];k.y+=
b[1];return a}}();l.removePadding=function(){var b=a.create();return function(a,d,f,e){var k=a.targetGeometry;B(a,d);M(b,d,f,e);k.x-=b[0];k.y-=b[1];return a}}();l.centerAt=function(){var b=a.create();return function(a,d,f){B(a,d);d=a.targetGeometry;var e=q(f),k=q(d);x(b,f);p(b,b,e,k);d.x=b[0];d.y=b[1];return a}}();l.pixelSizeAt=function(a,b,d){return v(b)};l.resize=function(){var b=a.create();return function(d,f,e,k,c){c||(c="center");a.sub(b,e,k);a.scale(b,b,.5);e=b[0];k=b[1];switch(c){case "center":a.set(b,
0,0);break;case "left":a.set(b,-e,0);break;case "top":a.set(b,0,k);break;case "right":a.set(b,e,0);break;case "bottom":a.set(b,0,-k);break;case "top-left":a.set(b,-e,k);break;case "bottom-left":a.set(b,-e,-k);break;case "top-right":a.set(b,e,k);break;case "bottom-right":a.set(b,e,-k)}l.translateBy(d,f,b);return d}}();l.rotateBy=function(a,b,d){B(a,b);a.rotation+=d;return a};l.rotateTo=function(a,b,d){B(a,b);a.rotation=d;return a};l.scaleBy=function(){var b=a.create();return function(d,f,e,k,c){B(d,
f);0!==e&&(l.toMap(b,k,f,c),d.scale=f.scale*e,l.toScreen(b,b,d,c),l.translateBy(d,d,a.set(b,b[0]-k[0],k[1]-b[1])));return d}}();l.scaleTo=function(a,b,d){B(a,b);a.scale=d;return a};l.scaleAndRotateBy=function(){var b=a.create();return function(d,f,e,k,c,n){B(d,f);0!==e&&(l.toMap(b,c,f,n),d.scale=f.scale*e,d.rotation+=k,l.toScreen(b,b,d,n),l.translateBy(d,d,a.set(b,b[0]-c[0],c[1]-b[1])));return d}}();l.padAndScaleAndRotateBy=function(){var b=a.create(),d=a.create();return function(f,e,k,c,n,m,r){l.getPaddingScreenTranslation(d,
m,r);a.add(b,n,d);return c?l.scaleAndRotateBy(f,e,k,c,b,m):l.scaleBy(f,e,k,b,m)}}();l.toMap=function(){var b=c.create();return function(d,f,e,k){return a.transformMat2d(d,f,H(b,e,k,1))}}();l.toScreen=function(){var b=c.create();return function(d,f,e,k){return a.transformMat2d(d,f,l.getTransform(b,e,k,1))}}();l.translateBy=function(){var b=a.create(),d=c.create();return function(f,e,k){B(f,e);var n=v(e),m=f.targetGeometry;c.fromRotation(d,g.toRadian(e.rotation)||0);c.scale(d,d,a.fromValues(n,n));a.transformMat2d(b,
k,d);m.x+=b[0];m.y+=b[1];return f}}()})},"esri/views/2d/libs/gl-matrix/common":function(){define([],function(){if(!h)var h=1E-6;if(!l)var l="undefined"!==typeof Float32Array?Float32Array:Array;if(!g)var g=Math.random;var c={GLMAT_EPSILON:h,GLMAT_ARRAY_TYPE:l,GLMAT_RANDOM:g,setMatrixArrayType:function(a){c.GLMAT_ARRAY_TYPE=a}},a=Math.PI/180,b=180/Math.PI;c.toRadian=function(b){return b*a};c.toDegree=function(a){return a*b};c.setMatrixArrayType(Array);return c})},"esri/views/2d/libs/gl-matrix/mat2d":function(){define(["./common"],
function(h){var l=h.GLMAT_ARRAY_TYPE;h={create:function(){var g=new l(6);g[0]=1;g[1]=0;g[2]=0;g[3]=1;g[4]=0;g[5]=0;return g},clone:function(g){var c=new l(6);c[0]=g[0];c[1]=g[1];c[2]=g[2];c[3]=g[3];c[4]=g[4];c[5]=g[5];return c},copy:function(g,c){g[0]=c[0];g[1]=c[1];g[2]=c[2];g[3]=c[3];g[4]=c[4];g[5]=c[5];return g},identity:function(g){g[0]=1;g[1]=0;g[2]=0;g[3]=1;g[4]=0;g[5]=0;return g},invert:function(g,c){var a=c[0],b=c[1],e=c[2],k=c[3],f=c[4];c=c[5];var m=a*k-b*e;if(!m)return null;m=1/m;g[0]=k*
m;g[1]=-b*m;g[2]=-e*m;g[3]=a*m;g[4]=(e*c-k*f)*m;g[5]=(b*f-a*c)*m;return g},determinant:function(g){return g[0]*g[3]-g[1]*g[2]},multiply:function(g,c,a){var b=c[0],e=c[1],k=c[2],f=c[3],m=c[4];c=c[5];var d=a[0],r=a[1],n=a[2],t=a[3],u=a[4];a=a[5];g[0]=b*d+k*r;g[1]=e*d+f*r;g[2]=b*n+k*t;g[3]=e*n+f*t;g[4]=b*u+k*a+m;g[5]=e*u+f*a+c;return g}};h.mul=h.multiply;h.rotate=function(g,c,a){var b=c[0],e=c[1],k=c[2],f=c[3],m=c[4];c=c[5];var d=Math.sin(a);a=Math.cos(a);g[0]=b*a+k*d;g[1]=e*a+f*d;g[2]=b*-d+k*a;g[3]=
e*-d+f*a;g[4]=m;g[5]=c;return g};h.scale=function(g,c,a){var b=c[1],e=c[2],k=c[3],f=c[4],m=c[5],d=a[0];a=a[1];g[0]=c[0]*d;g[1]=b*d;g[2]=e*a;g[3]=k*a;g[4]=f;g[5]=m;return g};h.translate=function(g,c,a){var b=c[0],e=c[1],k=c[2],f=c[3],m=c[4];c=c[5];var d=a[0];a=a[1];g[0]=b;g[1]=e;g[2]=k;g[3]=f;g[4]=b*d+k*a+m;g[5]=e*d+f*a+c;return g};h.fromRotation=function(g,c){var a=Math.sin(c);c=Math.cos(c);g[0]=c;g[1]=a;g[2]=-a;g[3]=c;g[4]=0;g[5]=0;return g};h.fromScaling=function(g,c){g[0]=c[0];g[1]=0;g[2]=0;g[3]=
c[1];g[4]=0;g[5]=0;return g};h.fromTranslation=function(g,c){g[0]=1;g[1]=0;g[2]=0;g[3]=1;g[4]=c[0];g[5]=c[1];return g};h.str=function(g){return"mat2d("+g[0]+", "+g[1]+", "+g[2]+", "+g[3]+", "+g[4]+", "+g[5]+")"};h.frob=function(g){return Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2)+Math.pow(g[2],2)+Math.pow(g[3],2)+Math.pow(g[4],2)+Math.pow(g[5],2)+1)};return h})},"esri/views/2d/libs/gl-matrix/vec2":function(){define(["./common"],function(h){var l=h.GLMAT_ARRAY_TYPE,g=h.GLMAT_RANDOM,c={create:function(){var a=
new l(2);a[0]=0;a[1]=0;return a},clone:function(a){var b=new l(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,b){var e=new l(2);e[0]=a;e[1]=b;return e},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,e){a[0]=b;a[1]=e;return a},add:function(a,b,e){a[0]=b[0]+e[0];a[1]=b[1]+e[1];return a},subtract:function(a,b,e){a[0]=b[0]-e[0];a[1]=b[1]-e[1];return a}};c.sub=c.subtract;c.multiply=function(a,b,e){a[0]=b[0]*e[0];a[1]=b[1]*e[1];return a};c.mul=c.multiply;c.divide=function(a,b,
e){a[0]=b[0]/e[0];a[1]=b[1]/e[1];return a};c.div=c.divide;c.min=function(a,b,e){a[0]=Math.min(b[0],e[0]);a[1]=Math.min(b[1],e[1]);return a};c.max=function(a,b,e){a[0]=Math.max(b[0],e[0]);a[1]=Math.max(b[1],e[1]);return a};c.scale=function(a,b,e){a[0]=b[0]*e;a[1]=b[1]*e;return a};c.scaleAndAdd=function(a,b,e,k){a[0]=b[0]+e[0]*k;a[1]=b[1]+e[1]*k;return a};c.distance=function(a,b){var e=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(e*e+a*a)};c.dist=c.distance;c.squaredDistance=function(a,b){var e=b[0]-a[0];
a=b[1]-a[1];return e*e+a*a};c.sqrDist=c.squaredDistance;c.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};c.len=c.length;c.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};c.sqrLen=c.squaredLength;c.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};c.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};c.normalize=function(a,b){var e=b[0],k=b[1],e=e*e+k*k;0<e&&(e=1/Math.sqrt(e),a[0]=b[0]*e,a[1]=b[1]*e);return a};c.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};c.cross=
function(a,b,e){b=b[0]*e[1]-b[1]*e[0];a[0]=a[1]=0;a[2]=b;return a};c.lerp=function(a,b,e,k){var f=b[0];b=b[1];a[0]=f+k*(e[0]-f);a[1]=b+k*(e[1]-b);return a};c.random=function(a,b){b=b||1;var e=2*g()*Math.PI;a[0]=Math.cos(e)*b;a[1]=Math.sin(e)*b;return a};c.transformMat2=function(a,b,e){var k=b[0];b=b[1];a[0]=e[0]*k+e[2]*b;a[1]=e[1]*k+e[3]*b;return a};c.transformMat2d=function(a,b,e){var k=b[0];b=b[1];a[0]=e[0]*k+e[2]*b+e[4];a[1]=e[1]*k+e[3]*b+e[5];return a};c.transformMat3=function(a,b,e){var k=b[0];
b=b[1];a[0]=e[0]*k+e[3]*b+e[6];a[1]=e[1]*k+e[4]*b+e[7];return a};c.transformMat4=function(a,b,e){var k=b[0];b=b[1];a[0]=e[0]*k+e[4]*b+e[12];a[1]=e[1]*k+e[5]*b+e[13];return a};c.forEach=function(){var a=c.create();return function(b,e,k,f,c,d){e||(e=2);k||(k=0);for(f=f?Math.min(f*e+k,b.length):b.length;k<f;k+=e)a[0]=b[k],a[1]=b[k+1],c(a,a,d),b[k]=a[0],b[k+1]=a[1];return b}}();c.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};return c})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../geometry/Extent ./viewpointUtils ./libs/gl-matrix/vec2 ./libs/gl-matrix/mat2d".split(" "),
function(h,l,g,c,a,b,e,k,f,m){h=d=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.pixelRatio=1;b.size=[0,0];return b}g(b,a);Object.defineProperty(b.prototype,"center",{get:function(){var a=this.viewpoint.targetGeometry;return f.set(f.create(),a.x,a.y)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"extent",{get:function(){return k.getExtent(new e,this.viewpoint,this.size)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"height",{get:function(){return this.size?
this.size[1]:0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"id",{get:function(){return this._get("id")+1},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"inverseTransform",{get:function(){return m.invert(m.create(),this.transform)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"latitude",{get:function(){return this.viewpoint.targetGeometry.latitude},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"longitude",{get:function(){return this.viewpoint.targetGeometry.longitude},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"resolution",{get:function(){return k.getResolution(this.viewpoint)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"rotation",{get:function(){return this.viewpoint.rotation},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"scale",{get:function(){return this.viewpoint.scale},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"screenCenter",{get:function(){return f.scale(f.create(),
this.size,.5)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"spatialReference",{get:function(){return this.viewpoint.targetGeometry.spatialReference},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"transform",{get:function(){return k.getTransform(m.create(),this.viewpoint,this.size,this.pixelRatio)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"transformNoRotation",{get:function(){return k.getTransformNoRotation(m.create(),this.viewpoint,
this.size,this.pixelRatio)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"clippedExtent",{get:function(){return k.getClippedExtent(new e,this.viewpoint,this.size)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"width",{get:function(){return this.size?this.size[0]:0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"worldScreenWidth",{get:function(){return k.getWorldScreenWidth(this.spatialReference,this.resolution)},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"worldWidth",{get:function(){return k.getWorldWidth(this.spatialReference)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"wrappable",{get:function(){return!!this.spatialReference&&this.spatialReference.isWrappable},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"x",{get:function(){return this.center[0]},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"y",{get:function(){return this.center[1]},enumerable:!0,
configurable:!0});b.prototype.copy=function(a){this.viewpoint&&this.size?(this._set("viewpoint",k.copy(this.viewpoint,a.viewpoint)),this._set("size",f.copy(this.size,a.size))):(this.viewpoint=a.viewpoint.clone(),f.copy(this.size,a.size));this._set("pixelRatio",a.pixelRatio);return this};b.prototype.clone=function(){return new d({viewpoint:this.viewpoint.clone(),size:f.clone(this.size)})};b.prototype.toMap=function(a,b){return f.transformMat2d(a,b,this.inverseTransform)};b.prototype.toScreen=function(a,
b){return f.transformMat2d(a,b,this.transform)};b.prototype.pixelSizeAt=function(a){return k.pixelSizeAt(a,this.viewpoint,this.size)};return b}(a.declared(b));c([a.property({dependsOn:["viewpoint"]})],h.prototype,"center",null);c([a.property({readOnly:!0,dependsOn:["viewpoint","size"]})],h.prototype,"extent",null);c([a.property({readOnly:!0,dependsOn:["size"]})],h.prototype,"height",null);c([a.property({value:0,readOnly:!0,dependsOn:["transform"]})],h.prototype,"id",null);c([a.property({readOnly:!0,
dependsOn:["transform"]})],h.prototype,"inverseTransform",null);c([a.property({readOnly:!0,dependsOn:["viewpoint"]})],h.prototype,"latitude",null);c([a.property({readOnly:!0,dependsOn:["viewpoint"]})],h.prototype,"longitude",null);c([a.property()],h.prototype,"pixelRatio",void 0);c([a.property({readOnly:!0,dependsOn:["viewpoint"]})],h.prototype,"resolution",null);c([a.property({readOnly:!0,dependsOn:["viewpoint"]})],h.prototype,"rotation",null);c([a.property({readOnly:!0,dependsOn:["viewpoint"]})],
h.prototype,"scale",null);c([a.property({readOnly:!0,dependsOn:["size"]})],h.prototype,"screenCenter",null);c([a.property()],h.prototype,"size",void 0);c([a.property({readOnly:!0,dependsOn:["viewpoint"]})],h.prototype,"spatialReference",null);c([a.property({readOnly:!0,dependsOn:["viewpoint","size","pixelRatio"]})],h.prototype,"transform",null);c([a.property({readOnly:!0,dependsOn:["viewpoint","size","pixelRatio"]})],h.prototype,"transformNoRotation",null);c([a.property()],h.prototype,"viewpoint",
void 0);c([a.property({readOnly:!0,dependsOn:["viewpoint","size"]})],h.prototype,"clippedExtent",null);c([a.property({readOnly:!0,dependsOn:["size"]})],h.prototype,"width",null);c([a.property({readOnly:!0,dependsOn:["worldWidth","resolution"]})],h.prototype,"worldScreenWidth",null);c([a.property({readOnly:!0,dependsOn:["spatialReference"]})],h.prototype,"worldWidth",null);c([a.property({readOnly:!0,dependsOn:["spatialReference"]})],h.prototype,"wrappable",null);c([a.property({readOnly:!0,dependsOn:["center"]})],
h.prototype,"x",null);c([a.property({readOnly:!0,dependsOn:["center"]})],h.prototype,"y",null);h=d=c([a.subclass("esri.views.2d.ViewState")],h);var d;return h})},"esri/views/2d/MapViewConstraints":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/Evented ../../layers/support/LOD ./constraints/ZoomConstraint ./constraints/RotationConstraint".split(" "),function(h,l,g,
c,a,b,e,k,f,m){h=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.enabled=!0;b.lods=null;b.minScale=0;b.maxScale=0;b.minZoom=-1;b.maxZoom=-1;b.rotationEnabled=!0;b.snapToZoom=!0;return b}g(b,a);b.prototype.initialize=function(){this.watch("_zoom, _rotation",this.emit.bind(this,"update"),!0)};b.prototype.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)};Object.defineProperty(b.prototype,"_rotation",{get:function(){return new m({rotationEnabled:this.rotationEnabled})},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_defaultLODs",{get:function(){var a=this.get("view.defaultsFromMap.tileInfo"),b=this.get("view.spatialReference");return a&&b&&a.spatialReference.equals(b)?a.lods:null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_zoom",{get:function(){return new f({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})},enumerable:!0,
configurable:!0});b.prototype.canZoomInTo=function(a){var b=this.effectiveMaxScale;return 0===b||a>=b};b.prototype.canZoomOutTo=function(a){var b=this.effectiveMinScale;return 0===b||a<=b};b.prototype.constrain=function(a,b){if(!this.enabled)return a;this._zoom.constrain(a,b);this._rotation.constrain(a,b);return a};b.prototype.fit=function(a){if(!this.enabled||!this.snapToZoom)return a;this._zoom.fit(a);return a};b.prototype.zoomToScale=function(a){return this._zoom.zoomToScale(a)};b.prototype.scaleToZoom=
function(a){return this._zoom.scaleToZoom(a)};b.prototype.snapScale=function(a){return this._zoom.snapToClosestScale(a)};b.prototype.snapToNextScale=function(a){return this._zoom.snapToNextScale(a)};b.prototype.snapToPreviousScale=function(a){return this._zoom.snapToPreviousScale(a)};return b}(a.declared(b,e));c([a.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],h.prototype,"effectiveLODs",void 0);c([a.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],h.prototype,"effectiveMinScale",
void 0);c([a.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],h.prototype,"effectiveMaxScale",void 0);c([a.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],h.prototype,"effectiveMinZoom",void 0);c([a.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],h.prototype,"effectiveMaxZoom",void 0);c([a.property()],h.prototype,"enabled",void 0);c([a.property({type:[k]})],h.prototype,"lods",void 0);c([a.property()],h.prototype,"minScale",void 0);c([a.property()],h.prototype,"maxScale",
void 0);c([a.property()],h.prototype,"minZoom",void 0);c([a.property()],h.prototype,"maxZoom",void 0);c([a.property()],h.prototype,"rotationEnabled",void 0);c([a.property()],h.prototype,"snapToZoom",void 0);c([a.property()],h.prototype,"view",void 0);c([a.property({type:m,dependsOn:["rotationEnabled"]})],h.prototype,"_rotation",null);c([a.property({dependsOn:["view.spatialReference","view.defaultsFromMap.tileInfo"]})],h.prototype,"_defaultLODs",null);c([a.property({readOnly:!0,type:f,dependsOn:"lods minZoom maxZoom minScale maxScale snapToZoom _defaultLODs".split(" ")})],
h.prototype,"_zoom",null);return h=c([a.subclass("esri.views.2d.MapViewConstraints")],h)})},"esri/views/2d/constraints/ZoomConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor ../../../layers/support/LOD".split(" "),function(h,l,g,c,a,b,e){h=k=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b._lodByScale={};b._scales=[];b.effectiveLODs=
null;b.effectiveMinZoom=-1;b.effectiveMaxZoom=-1;b.effectiveMinScale=0;b.effectiveMaxScale=0;b.enabled=!0;b.lods=null;b.minZoom=-1;b.maxZoom=-1;b.minScale=0;b.maxScale=0;b.snapToZoom=!0;return b}g(b,a);b.prototype.initialize=function(){var a=this,b=this.lods,f=this.minScale,e=this.maxScale,k=this.minZoom,c=this.maxZoom,m=-1,g=-1,h=!1,l=!1;0!==f&&0!==e&&f<e&&(e=[e,f],f=e[0],e=e[1]);if(b&&b.length){b=b.map(function(a){return a.clone()});b.sort(function(a,b){return b.scale-a.scale});b.forEach(function(a,
b){return a.level=b});for(var C,z=0,B=b;z<B.length;z++){var D=B[z];!h&&0<f&&f>=D.scale&&(m=D.level,h=!0);!l&&0<e&&e>=D.scale&&(g=C?C.level:-1,l=!0);C=D}-1===k&&(k=0===f?0:m);-1===c&&(c=0===e?b.length-1:g);k=Math.max(k,0);k=Math.min(k,b.length-1);c=Math.max(c,0);c=Math.min(c,b.length-1);k>c&&(f=[c,k],k=f[0],c=f[1]);f=b[k].scale;e=b[c].scale;b.splice(0,k);b.splice(c-k+1,b.length);b.forEach(function(b,d){a._lodByScale[b.scale]=b;a._scales[d]=b.scale});this._set("effectiveLODs",b);this._set("effectiveMinZoom",
k);this._set("effectiveMaxZoom",c)}this._set("effectiveMinScale",f);this._set("effectiveMaxScale",e)};b.prototype.constrain=function(a,b){if(!this.enabled||b&&a.scale===b.scale)return a;var d=this.effectiveMinScale,f=this.effectiveMaxScale,e=a.targetGeometry,k=b&&b.targetGeometry,c=0!==d&&a.scale>d;if(0!==f&&a.scale<f||c)d=c?d:f,k&&(b=(d-b.scale)/(a.scale-b.scale),e.x=k.x+(e.x-k.x)*b,e.y=k.y+(e.y-k.y)*b),a.scale=d;this.snapToZoom&&this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale));return a};
b.prototype.fit=function(a){if(!this.effectiveLODs)return this.constrain(a,null);var b=a.scale,d=Math.round(this.scaleToZoom(b));a.scale=.95<Math.abs(d-Math.round(d))?this.snapToPreviousScale(b):this.zoomToScale(Math.round(d));return a};b.prototype.zoomToScale=function(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,a);var b=this._scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var d=Math.round(a);return b[d]+(d-a)*(b[Math.round(a-.5)]-b[d])};b.prototype.scaleToZoom=
function(a){if(!this.effectiveLODs)return-1;var b=this._scales,d=0,f=b.length-1,e,k;for(d;d<f;d++){e=b[d];k=b[d+1];if(e<=a)return d+this.effectiveMinZoom;if(k===a)return d+1+this.effectiveMinZoom;if(e>a&&k<a)return d+1-(a-k)/(e-k)+this.effectiveMinZoom}return d};b.prototype.snapToClosestScale=function(a){if(!this.effectiveLODs)return a;a=this.scaleToZoom(a);return this.zoomToScale(Math.round(a))};b.prototype.snapToNextScale=function(a,b){void 0===b&&(b=.5);if(!this.effectiveLODs)return a*b;a=Math.round(this.scaleToZoom(a));
return this.zoomToScale(a+1)};b.prototype.snapToPreviousScale=function(a,b){void 0===b&&(b=2);if(!this.effectiveLODs)return a*b;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a-1)};b.prototype.clone=function(){return new k({enabled:this.enabled,lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})};b.prototype._getClosestScale=function(a){if(this._lodByScale[a])return this._lodByScale[a].scale;a=this._scales.reduce(function(b,d,f,e){return Math.abs(d-
a)<=Math.abs(b-a)?d:b},this._scales[0]);return this._lodByScale[a].scale};return b}(a.declared(b));c([a.property({readOnly:!0})],h.prototype,"effectiveLODs",void 0);c([a.property({readOnly:!0})],h.prototype,"effectiveMinZoom",void 0);c([a.property({readOnly:!0})],h.prototype,"effectiveMaxZoom",void 0);c([a.property({readOnly:!0})],h.prototype,"effectiveMinScale",void 0);c([a.property({readOnly:!0})],h.prototype,"effectiveMaxScale",void 0);c([a.property()],h.prototype,"enabled",void 0);c([a.property({type:[e]})],
h.prototype,"lods",void 0);c([a.property()],h.prototype,"minZoom",void 0);c([a.property()],h.prototype,"maxZoom",void 0);c([a.property()],h.prototype,"minScale",void 0);c([a.property()],h.prototype,"maxScale",void 0);c([a.property()],h.prototype,"snapToZoom",void 0);h=k=c([a.subclass("esri.views.2d.constraints.ZoomConstraint")],h);var k;return h})},"esri/views/2d/constraints/RotationConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor".split(" "),
function(h,l,g,c,a,b){h=e=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.enabled=!0;b.rotationEnabled=!0;return b}g(b,a);b.prototype.constrain=function(a,b){if(!this.enabled)return a;this.rotationEnabled||(a.rotation=0);return a};b.prototype.clone=function(){return new e({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};return b}(a.declared(b));c([a.property()],h.prototype,"enabled",void 0);c([a.property()],h.prototype,"rotationEnabled",void 0);h=e=c([a.subclass("esri.views.2d.constraints.RotationConstraint")],
h);var e;return h})},"esri/views/2d/AnimationManager":function(){define("../../core/Accessor ../../core/Scheduler ../../core/now ../ViewAnimation ./unitBezier ./viewpointUtils".split(" "),function(h,l,g,c,a,b){var e=function(b,f,e,d){var k=b.targetGeometry,c=f.targetGeometry;d?"string"===typeof d&&(d=a.parse(d)||a.ease):d=a.ease;this.easing=d;this.duration=e;this.sCenterX=k.x;this.sCenterY=k.y;this.sScale=b.scale;this.sRotation=b.rotation;this.tCenterX=c.x;this.tCenterY=c.y;this.tScale=f.scale;this.tRotation=
f.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)};e.prototype.applyRatio=function(a,b){var f=this.easing(b),d,e;1<=b?(b=this.tCenterX,d=this.tCenterY,e=this.tRotation,f=this.tScale):(b=this.sCenterX+f*this.dCenterX,d=this.sCenterY+f*this.dCenterY,e=this.sRotation+f*this.dRotation,f=this.sScale+
f*this.dScale);a.targetGeometry.x=b;a.targetGeometry.y=d;a.scale=f;a.rotation=e};return h.createSubclass({constructor:function(){this._updateTask=l.addFrameTask({postRender:this._postRender.bind(this)});this._updateTask.pause()},getDefaults:function(){return{viewpoint:b.create()}},properties:{animation:null,duration:{value:200},transition:{value:null},easing:{value:a.ease},viewpoint:null},animate:function(a,f,c){this.stop();b.copy(this.viewpoint,f);this.transition=new e(this.viewpoint,a.target,c&&
c.duration||this.duration,c&&c.easing||this.easing);a.always(function(){this.animation===a&&this._updateTask&&(this._updateTask.pause(),this.updateFunction=this.animation=null)}.bind(this));this._startTime=g();this._updateTask.resume();return this.animation=a},animateContinous:function(a,b){this.stop();this.updateFunction=b;this.viewpoint=a;var f=new c({target:a.clone()});f.always(function(){this.animation===f&&this._updateTask&&(this._updateTask.pause(),this.updateFunction=this.animation=null)}.bind(this));
this._startTime=g();this._updateTask.resume();return this.animation=f},stop:function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)},_postRender:function(a){var b=this.animation;b&&b.state!==c.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,a.deltaTime):(a=(g()-this._startTime)/this.transition.duration,b=1<=a,this.transition.applyRatio(this.viewpoint,a),b&&this.animation.finish()),this.animation._dfd.progress(this.viewpoint)):this._updateTask.pause()}})})},
"esri/views/2d/unitBezier":function(){define([],function(){var h=function(g,c,a,b){function e(a,b){var d,e,c,n;b=null==b?1E-6:b;c=a;for(e=0;8>e;e++){n=((m*c+f)*c+k)*c-a;if(Math.abs(n)<b)return c;d=(3*m*c+2*f)*c+k;if(1E-6>Math.abs(d))break;c-=n/d}d=0;e=1;c=a;if(c<d)return d;if(c>e)return e;for(;d<e;){n=((m*c+f)*c+k)*c;if(Math.abs(n-a)<b)break;a>n?d=c:e=c;c=.5*(e-d)+d}return c}var k=3*g,f=3*(a-g)-k,m=1-k-f,d=3*c,r=3*(b-c)-d,n=1-d-r;return function(a,b){a=e(a,b);return((n*a+r)*a+d)*a}},l=/^cubic-bezier\((.*)\)/;
h.parse=function(g){var c=h[g]||null;!c&&(g=l.exec(g))&&(g=g[1].split(",").map(function(a){return parseFloat(a.trim())}),4!==g.length||g.some(function(a){return isNaN(a)})||(c=h.apply(h,g)));return c};h.ease=h(.25,.1,.25,1);h.linear=h(0,0,1,1);h.easeIn=h["ease-in"]=h(.42,0,1,1);h.easeOut=h["ease-out"]=h(0,0,.58,1);h.easeInOut=h["ease-in-out"]=h(.42,0,.58,1);return h})},"esri/views/DOMContainer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/_base/lang dojo/on dojo/dom dojo/dom-construct ../core/Accessor ../core/HandleRegistry ../core/Scheduler ../core/watchUtils ../widgets/Popup ./PopupManager ./ui/DefaultUI ../core/accessorSupport/decorators".split(" "),
function(h,l,g,c,a,b,e,k,f,m,d,r,n,t,u,w){var p=[0,0];h=function(f){function c(){var a=f.call(this)||this;a.height=0;a.position=null;a.resizing=!1;a.root=null;a.surface=null;a.suspended=!0;a.width=0;Object.defineProperty(a,"_measureInfo",{enumerable:!1,writable:!1,value:{task:null,freq:16,time:750}});a._domHandles=new m;a.watch("interacting",function(b){var d=a.surface;d&&d.setAttribute("data-interacting",b.toString())});return a}g(c,f);c.prototype.getDefaults=function(){return a.mixin(this.inherited(arguments),
{popup:{},ui:{}})};c.prototype.initialize=function(){var a=this,f=this._measureInfo,e=null;r.init(this,"container",function(k,c,m,n){if(null!=k||null!=c)e&&(e.remove(),e=null,f.freq=16,f.time=750),f.task&&(f.task.remove(),f.task=null),k?(e=b(window,"resize",function(){f.freq=16;f.time=750}),f.task=d.addFrameTask({prepare:function(b){var d=a._measureInfo;d.time+=b.deltaTime;d.time<d.freq||(d.time=0,a._measure()?(d.freq=16,a._set("resizing",!0)):(d.freq=Math.min(750,2*d.freq),512<=d.freq&&a._set("resizing",
!1)))}})):a._set("resizing",!1),a._measure(),k=a.root,c=a.surface,m=a.width,n=a.height,k&&c&&m&&n&&(k.style.width=c.style.width=m+"px",k.style.height=c.style.height=n+"px")})};c.prototype.destroy=function(){this.ui.destroy();this.popup&&this.popup.destroy();this.container=null};Object.defineProperty(c.prototype,"container",{set:function(a){var b=this._get("container");if(b!==a){b&&(b.classList.remove("esri-view"),this.popupManager.destroy(),this.popupManager=null,k.destroy(this.root),this._set("root",
null));if(a){a.classList.add("esri-view");b=document.createElement("div");b.className="esri-view-root";a.insertBefore(b,a.firstChild);this._set("root",b);var d=document.createElement("div");d.className="esri-view-surface";e.setSelectable(d,!1);b.appendChild(d);this._set("surface",d);this._forceReadyCycle();this.popupManager=new t({enabled:!0,view:this})}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null);this._set("container",
a)}},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"popup",{set:function(a){var b=this._get("popup");a!==b&&(this._domHandles.remove("view-popup"),b&&b.destroy(),a&&(a.viewModel.view=this,a._started||a.startup(),this._domHandles.add([r.init(this,"root",function(b,d){var f=a.domNode;e.isDescendant(f.parentNode,d)&&f.parentNode.removeChild(f);b&&!f.parentNode&&a.placeAt(b)})],"view-popup")),this._set("popup",a))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"size",{get:function(){return[this.width,this.height]},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"ui",{set:function(a){var b=this._get("ui");a!==b&&(this._domHandles.remove("ui"),b&&b.destroy(),a&&(a.view=this,this._domHandles.add([r.init(this,"root",function(b){a.container=b?k.create("div",null,b):null})],"ui")),this._set("ui",a))},enumerable:!0,configurable:!0});c.prototype.pageToContainer=function(a,b,d){var f=this.position;a-=f[0];b-=f[1];d?(d[0]=a,d[1]=b):d=[a,b];return d};
c.prototype.containerToPage=function(a,b,d){var f=this.position;a+=f[0];b+=f[1];d?(d[0]=a,d[1]=b):d=[a,b];return d};c.prototype._measure=function(){var a=this.container,b=a?a.clientWidth:0,d=a?a.clientHeight:0;if(0===b||0===d||"hidden"===window.getComputedStyle(a).visibility)return this._set("suspended",!0),!1;var f=this.root,e=this.surface,k=this.width,c=this.height,m=this.position;if(b===k&&d===c)return this._set("suspended",!1),!1;f&&e&&(f.style.width=e.style.width=b+"px",f.style.height=e.style.height=
d+"px");this._set("width",b);this._set("height",d);this._set("suspended",!1);f=(a.ownerDocument||window.document).defaultView;a=a.getBoundingClientRect();p[0]=a.left+f.pageXOffset;p[1]=a.top+f.pageYOffset;m&&p[0]===m[0]&&p[1]===m[1]||this._set("position",p.slice());this.emit("resize",{oldWidth:k,oldHeight:c,width:b,height:d});return!0};return c}(w.declared(f));c([w.property({value:null,cast:function(a){return e.byId(a)}})],h.prototype,"container",null);c([w.property({readOnly:!0})],h.prototype,"height",
void 0);c([w.property({type:n})],h.prototype,"popup",null);c([w.property({readOnly:!0})],h.prototype,"position",void 0);c([w.property({readOnly:!0})],h.prototype,"resizing",void 0);c([w.property({readOnly:!0})],h.prototype,"root",void 0);c([w.property({value:null,dependsOn:["width","height"],readOnly:!0})],h.prototype,"size",null);c([w.property({readOnly:!0})],h.prototype,"surface",void 0);c([w.property({readOnly:!0})],h.prototype,"suspended",void 0);c([w.property({type:u})],h.prototype,"ui",null);
c([w.property({readOnly:!0})],h.prototype,"width",void 0);return h=c([w.subclass("esri.views.DOMContainer")],h)})},"esri/widgets/Popup":function(){define("./support/viewModelWiring ./Widgette ./Popup/PopupViewModel ../core/HandleRegistry ../core/watchUtils ../views/2d/viewpointUtils dijit/a11yclick dijit/_TemplatedMixin dojo/keys dojo/on dojo/query dojo/Deferred dojo/i18n!./Popup/nls/Popup dojo/text!./Popup/templates/Popup.html ../core/lang dojo/_base/lang dojo/dom-class dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style ./Popup/PopupRenderer ./Popup/PopupRendererViewModel ./Spinner require".split(" "),
function(h,l,g,c,a,b,e,k,f,m,d,r,n,t,u,w,p,q,x,A,C,z,B,D,H){var y=H.toUrl("./Popup/images/default-action.svg"),v={hidden:"esri-hidden",invisible:"esri-invisible",iconText:"esri-icon-font-fallback-text",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",
iconPaginationMenu:"esri-icon-layer-list",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-rotating esri-icon-loading-indicator",iconZoom:"esri-icon-zoom-in-magnifying-glass",base:"esri-popup",container:"esri-popup__position-container",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",shadow:"esri-popup--shadow",showDock:"esri-popup--dock-button-visible",showContent:"esri-popup--content-visible",showFooter:"esri-popup--footer-visible",showTitle:"esri-popup--title-visible",
showPagination:"esri-popup--pagination-visible",hasPopupRenderer:"esri-popup--has-popup-renderer",hasPromiseFeatures:"esri-popup--has-promise-features",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",
canDockToLeft:"esri-popup--can-dock-to-left",canDockToRight:"esri-popup--can-dock-to-right",canDockToTop:"esri-popup--can-dock-to-top",canDockToBottom:"esri-popup--can-dock-to-bottom",hasPaginationMenuOpen:"esri-popup--feature-menu-open",alignTop:"esri-popup--top-aligned",alignBottom:"esri-popup--bottom-aligned",alignLeftTop:"esri-popup--left-top-aligned",alignLeftBottom:"esri-popup--left-bottom-aligned",alignRightTop:"esri-popup--right-top-aligned",alignRightBottom:"esri-popup--right-bottom-aligned",
hasPendingPromises:"esri-popup--has-pending-promises",isPendingPromisesResult:"esri-popup--is-pending-promises-result",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerTitle:"esri-popup__header-title",content:"esri-popup__content",footer:"esri-popup__footer",button:"esri-popup__button",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",actions:"esri-popup__actions",action:"esri-popup__action",
actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",pagination:"esri-popup__pagination",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",
paginationText:"esri-popup__pagination-page-text",paginationDocked:"esri-popup__pagination-docked",paginationDockedButtons:"esri-popup__pagination-docked-buttons",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",
featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title"},F={auto:"auto",topLeft:"top-left",topCenter:"top-center",topRight:"top-right",bottomLeft:"bottom-left",bottomCenter:"bottom-center",bottomRight:"bottom-right"},E={buttonEnabled:!0,position:F.auto,breakpoint:{width:544}},G={popupRenderer:"popup-renderer",acions:"actions",actionsChange:"actions-change",paginationTitles:"pagination-titles",view:"view"};return l.createSubclass([k],{declaredClass:"esri.widgets.Popup",
baseClass:v.base,templateString:t,constructor:function(){this._handleRegistry=new c;this._contentStorage=x.create("div");this._repositionTimeoutHandle=0},postCreate:function(){var b=this;this.inherited(arguments);var d=this.viewModel;this.own(a.init(d,"visible",function(a){p.remove(this._containerNode,v.hasPaginationMenuOpen);p.toggle(this.domNode,v.invisible,!a);this._togglePopupLocationRepositioning(a);this._toggleContentVisibility(a);this._autoAlign();this.reposition()}.bind(this)),a.watch(this,
"viewModel.view",function(a,b){a&&b&&(this.close(),this.clear())}.bind(this)),a.watch(this,"viewModel.view.ready",function(a,b){a?this._wireUpView(this.viewModel.view):b&&(this.close(),this.clear())}.bind(this)),a.init(d,"pendingPromisesCount,featureCount,promises,location",function(){var a=this.viewModel;this._displayPendingFeaturesStatus(a.pendingPromisesCount,a.featureCount,a.promises,a.location)}.bind(this)),a.init(d,"features",this._updateFeatures.bind(this)),a.init(d,"selectedFeatureIndex,selectedFeature",
function(){var a=this.viewModel;this._updateSelectedFeature(a.selectedFeature);this._updateActions(a.actions,a.features,a.selectedFeature);this._updatePageText(a.features,a.selectedFeatureIndex);this._createPaginationNodes(a.features,a.selectedFeatureIndex);this._bodyContentNode.scrollTop=0}.bind(this)),a.init(d,"title",function(a){this._updateTitle(a);this.reposition()}.bind(this)),a.watch(this,"viewModel.waitingForResult, _popupRenderer.viewModel.waitingForContent",function(){this._repositionTimeoutHandle||
(this._repositionTimeoutHandle=setTimeout(function(){this._repositionTimeoutHandle=0;this._autoAlign();this.reposition()}.bind(this),50))}.bind(this)),a.init(d,"actions",function(a){var b=this.viewModel;this._updateActions(a,b.features,b.selectedFeature);this._actionChangeListener(a)}.bind(this)),a.init(d,"content",function(a){this._updateContent(a);this.reposition()}.bind(this)),a.init(d,"location",function(a){this._togglePopupLocationRepositioning(this.visible);this._autoAlign();this.reposition()}.bind(this)),
m(this._dockNode,e,this._toggleDock.bind(this)),m(this._closeNode,e,this.close.bind(this)),m(this._previousNode,e,d.previous.bind(d)),m(this._previousDockedNode,e,d.previous.bind(d)),m(this._nextNode,e,d.next.bind(d)),m(this._nextDockedNode,e,d.next.bind(d)),m(this._pageMenuNode,e,this._togglePageMenu.bind(this)),m(this._pageMenuDockedNode,e,this._togglePageMenu.bind(this)),m(this._pageMenuInfoNode,e,this._togglePageMenu.bind(this)),m(this._paginationNode,m.selector("li",e),function(){b._selectFeature(this)}),
m(this._paginationNode,m.selector("li","keyup"),function(a){b._keyupFeature(a,this)}),m(this._actionsNode,m.selector("[data-action-index]",e),function(){b._actionEvent(this)}),m(d,"trigger-action",function(a){a.action&&"zoom-to"===a.action.id&&this.viewModel.zoomToLocation()}.bind(this)));h.setUpEventDelegates(this,"trigger-action")},destroy:function(){this._destroyPopupRendererVMs();this._destroySpinner();this._destroyPopupRenderer();this._handleRegistry.destroy();this._handleRegistry=null;this._repositionTimeoutHandle&&
(clearTimeout(this._repositionTimeoutHandle),this._repositionTimeoutHandle=0);this._repositionTimeoutHandle=0},properties:{_popupRenderer:{readOnly:!0,value:null},actions:{aliasOf:"viewModel.actions"},alignment:{value:"top",set:function(a){this._set("alignment",a);this.reposition()}},autoPanEnabled:!0,autoAlignmentEnabled:!1,content:{aliasOf:"viewModel.content"},closeOnViewChangeEnabled:!1,currentDockPosition:{readOnly:!0,value:null},dockOptions:{value:E,set:function(a){var b=w.clone(E),d=this.viewModel.get("view.breakpoints"),
f={};d&&(f.width=d.xsmall,f.height=d.xsmall);a=w.mixin({},b,a);b=w.mixin({},b.breakpoint,f);!0===a.breakpoint?a.breakpoint=b:"object"===typeof a.breakpoint&&(a.breakpoint=w.mixin({},b,a.breakpoint));this._set("dockOptions",a);this._toggleDockButton(a)}},dockEnabled:{value:!1,set:function(a){this._set("dockEnabled",a);this._togglePopupDocking(a);this._togglePopupLocationRepositioning(this.visible);this._autoAlign();this.reposition()}},featureCount:{aliasOf:"viewModel.featureCount"},features:{aliasOf:"viewModel.features"},
highlightEnabled:{aliasOf:"viewModel.highlightEnabled"},location:{aliasOf:"viewModel.location"},paginationEnabled:{value:!0,set:function(a){var b=this.viewModel;this._set("paginationEnabled",a);this._updatePagination(b.features,b.selectedFeatureIndex);this._updateFooterVisibility(b.features,b.actions);this.reposition()}},promises:{aliasOf:"viewModel.promises"},selectedFeature:{aliasOf:"viewModel.selectedFeature"},selectedFeatureIndex:{aliasOf:"viewModel.selectedFeatureIndex"},spinnerEnabled:{value:!0,
set:function(a){this._set("spinnerEnabled",a);this._createSpinner(a,this.viewModel.view)}},title:{aliasOf:"viewModel.title"},view:{aliasOf:"viewModel.view"},viewModel:{type:g},visible:{aliasOf:"viewModel.visible"}},_css:v,_i18n:n,_hideActionsTextNum:3,_animationDelay:10,_pointerOffset:16,_popupRendererVMs:[],clear:h.createMethodDelegate("clear"),close:function(){this.set("visible",!1)},next:h.createMethodDelegate("next"),previous:h.createMethodDelegate("previous"),reposition:function(){this._positionPopup();
return this._moveIntoView()},open:function(a){var b=w.mixin({updateLocationEnabled:!1},a);this.viewModel.set(b);a&&a.promises?this.set("visible",!1):this.set("visible",!0)},triggerAction:h.createMethodDelegate("triggerAction"),_actionChangeListener:function(a){this._handleRegistry.remove(G.actionsChange);a&&this._handleRegistry.add([a.on("change",function(){var a=this.viewModel;this._updateActions(a.actions,a.features,a.selectedFeature)}.bind(this))],G.actionsChange)},_actionEvent:function(a){var b=
this.viewModel;if(a=q.get(a,"data-action-index"))a=parseInt(a,10),b.triggerAction(a)},_addContent:function(){var a=this.viewModel;this._updateSelectedFeature(a.selectedFeature);this._updateContent(a.content);this._updateTitle(a.title);this._updatePageText(a.features,a.selectedFeatureIndex)},_updateActions:function(a,b,d){this._updateActionButtons(a,d);this._updateFooterVisibility(b,a);this.reposition()},_contentIsPopupRenderer:function(){var a=this.get("viewModel.content"),b=this.get("_popupRenderer.domNode");
return!(!a||!b||a!==b)},_updateActionButtons:function(b,d){this._handleRegistry.remove(G.actions);if(this._actionsNode){var f=document.createDocumentFragment(),e=b.length;e&&b.forEach(function(b,k){"zoom-to"===b.id&&(b.title=this._i18n.zoom,b.className=v.iconZoom);var c=b.title,m=b.className,n=b.image;n||m||(n=y);var g=d&&d.attributes;g&&(c=c?u.substitute(g,c):"",m=m?u.substitute(g,m):null,n=n?u.substitute(g,n):null);var r=x.create("div",{tabindex:"0",title:c},f);q.set(r,"data-action-index",k);p.add(r,
[v.button,v.action]);var h=x.create("span",{"aria-hidden":!0},r);p.add(h,v.icon);m&&p.add(h,m);n&&(p.add(h,v.actionImage),C.set(h,"background-image","url("+n+")"));k={className:v.actionText,textContent:c};e>=this._hideActionsTextNum&&(k.className=v.iconText);var t=x.create("span",k,r);this._handleRegistry.add([a.init(b,"visible",function(a){p.toggle(r,v.hidden,!a)}),a.init(b,"className",function(a,b){g&&(a=u.substitute(g,a),b=u.substitute(g,b));p.remove(h,b);p.add(h,a)}),a.init(b,"image",function(a){g&&
(a=u.substitute(g,a));p.toggle(h,v.actionImage,!!a);C.set(h,"background-image",a?"url("+a+")":"")}),a.init(b,"title",function(a){g&&(a=u.substitute(g,a));a=a||"";q.set(r,"title",a);q.set(t,"textContent",a)})],G.actions)},this);x.place(f,this._actionsNode,"only")}},_getLocationScreenPoint:function(){var a=this.viewModel,b;if(a.location&&this.visible){var d=a.location;d&&a.get("view.ready")&&(b=a.view.toScreen(d))}return b},_calculatePosition:function(a,b,d){var f=this.alignment,e,k=this._pointerOffset,
c=null,m=null,n=null,g=null;if(a&&b&&d){e=b.h;if("top"===f||"bottom"===f)e+=k;b=b.w;if("left-top"===f||"left-bottom"===f||"right-top"===f||"right-bottom"===f)b+=k,e+=k;var r=b/2,u=a.y,h=a.x,p=d.height-u,t=d.width-h,w=b;switch(f){case "bottom":c=u+k;m=h-r;w=r;break;case "left-top":n=p+k;g=t+k;break;case "left-bottom":c=u+k;g=t+k;break;case "right-top":n=p+k;m=h+k;break;case "right-bottom":c=u+k;m=h+k;break;default:n=p+k,m=h-r,w=r}d=d.padding;d=this.dockEnabled?{left:d.left?d.left+"px":"",top:d.top?
d.top+"px":"",right:d.right?d.right+"px":"",bottom:d.bottom?d.bottom+"px":""}:{top:null!==c?c+"px":"auto",left:null!==m?m+"px":"auto",bottom:null!==n?n+"px":"auto",right:null!==g?g+"px":"auto"};return{height:e,width:b,box:{top:null!==c?c:a.y-e,left:null!==m?m:a.x-w,bottom:null!==n?n:a.y+e,right:null!==g?g:a.x+w},style:d}}},_createPopupRendererVMs:function(a){this._destroyPopupRendererVMs();a&&1<a.length&&a.forEach(function(a,b){a=new B({contentEnabled:!1,graphic:a});this._popupRendererVMs.push(a)},
this)},_destroyPopupRendererVMs:function(){this._handleRegistry.remove(G.paginationTitles);this._popupRendererVMs.forEach(function(a){a.destroy()});this._popupRendererVMs.length=0},_createPaginationNodes:function(b,d){this._handleRegistry.remove(G.paginationTitles);if(b){var f=b.length;this._paginationNode&&q.set(this._paginationNode,"innerHTML","");1<f&&(f=u.substitute({total:f},this._i18n.selectedFeatures),q.set(this._pageMenuInfoNode,"textContent",f),b.forEach(function(b,f){b=this._i18n.untitled;
var e=x.create("li",{role:"menuitem",className:v.featureMenuItem},this._paginationNode);f===d?(q.set(e,"aria-label",n.selectedFeature),p.add(e,v.featureMenuSelected)):q.set(e,"data-feature-index",f);var k=x.create("span",{className:v.featureMenuTitle,innerHTML:b},e);if(b=this._popupRendererVMs[f])b=a.init(b,"title",function(a){q.set(k,"innerHTML",a)}),this._handleRegistry.add(b,G.paginationTitles);f===d&&x.create("span",{className:v.iconCheckMark},k)},this))}},_createSpinner:function(a,b){this._destroySpinner();
a&&b&&(this._spinner=new D({container:document.createElement("div"),view:b}),x.place(this._spinner.container,b.root))},_updateContent:function(a){a&&a.nodeName?(x.place(a,this._contentStorage),x.place(a,this._bodyContentNode,"only")):"string"===typeof a&&(this._destroyPopupRenderer(),q.set(this._bodyContentNode,"innerHTML",a));this._bodyContentNode.scrollTop=0;p.toggle(this._containerNode,v.hasPopupRenderer,this._contentIsPopupRenderer());p.toggle(this._containerNode,v.showContent,!!a);p.remove(this._containerNode,
v.hasPaginationMenuOpen);this._autoAlign()},_destroyPopupRenderer:function(){this._popupRenderer&&!this._popupRenderer._destroyed&&(this._handleRegistry.remove(G.popupRenderer),this._popupRenderer.destroy(),this._set("_popupRenderer",null))},_destroySpinner:function(){this._spinner&&(this._spinner.destroy(),this._spinner=null)},_setDockEnabledForViewSize:function(a){a.breakpoint&&this.set("dockEnabled",this._shouldDockAtCurrentViewSize(a))},_togglePopupDocking:function(a){p.remove(this._containerNode,
v.hasPaginationMenuOpen);p.toggle(this._containerNode,v.isDocked,!!a);q.set(this._dockNode,"title",a?this._i18n.undock:this._i18n.dock);this._updateDockPosition(this.dockOptions)},_dockingThresholdCrossed:function(a,b,d){var f=a[0];a=a[1];var e=b[0];b=b[1];var k=d.width;d=d.height;return f<=k&&e>k||f>k&&e<=k||a<=d&&b>d||a>d&&b<=d},_determineDockPosition:function(a){var b=this.viewModel,d=b.view,f=d&&d.padding,f=d&&d.width-f.left-f.right;return(b=d&&b.get("view.breakpoints"))&&f<=b.xsmall?a.bottomCenter:
this.isLeftToRight()?a.topRight:a.topLeft},_updateDockPosition:function(a){p.remove(this._containerNode,[v.isDockedTopLeft,v.isDockedTopCenter,v.isDockedTopRight,v.isDockedBottomLeft,v.isDockedBottomCenter,v.isDockedBottomRight,v.canDockToTop,v.canDockToBottom,v.canDockToLeft,v.canDockToRight]);var b,d,f;b=a.position;b=b===F.auto?this._determineDockPosition(F):"function"===typeof b?b.call(this):b;switch(b){case F.topLeft:d=v.isDockedTopLeft;f=v.canDockToLeft;break;case F.topCenter:d=v.isDockedTopCenter;
f=v.canDockToTop;break;case F.bottomLeft:d=v.isDockedBottomLeft;f=v.canDockToLeft;break;case F.bottomCenter:d=v.isDockedBottomCenter;f=v.canDockToBottom;break;case F.bottomRight:d=v.isDockedBottomRight;f=v.canDockToRight;break;default:d=v.isDockedTopRight,f=v.canDockToRight}p.toggle(this._containerNode,f,!!a.buttonEnabled);this.dockEnabled?(p.add(this._containerNode,d),this._set("currentDockPosition",b)):this._set("currentDockPosition",null);this._popupRenderer&&this._popupRenderer.resize();this.reposition()},
_toggleDockButton:function(a){var b=this._containerNode;p.toggle(b,v.showDock,!!a.buttonEnabled);p.toggle(b,v.isDocked,!!this.dockEnabled);this._updateDockPosition(a)},_updateFooterVisibility:function(a,b){a=this._isPaginationEnabled(a)||b&&b.length;p.toggle(this._containerNode,v.showFooter,!!a)},_isPaginationEnabled:function(a){return this.paginationEnabled&&a&&1<a.length},_updatePagination:function(a,b){this._updatePageText(a,b);this._createPaginationNodes(a,b);p.toggle(this._containerNode,v.showPagination,
this._isPaginationEnabled(a))},_displayPendingFeaturesStatus:function(a,b,d,f){var e=0<a&&0===b;d=d&&d.length;a&&d&&a===d&&this.set("visible",!1);p.toggle(this._containerNode,v.hasPendingPromises,!!a);p.toggle(this._containerNode,v.isPendingPromisesResult,!!e);p.toggle(this._containerNode,v.hasPromiseFeatures,!!b);e?this._spinner&&this._spinner.show({location:f}):(this._spinner&&this._spinner.hide(),d&&b&&!this.visible?this.set("visible",!0):d&&!b&&this.visible&&this.set("visible",!1))},_moveIntoView:function(){var a=
new r;setTimeout(a.resolve.bind(this),this._animationDelay);return a.then(function(){if(!this._destroyed){var a=this.viewModel,d=this.get("viewModel.view");if(a&&d&&d.stationary){var f=this._getLocationScreenPoint();if(f){var e=this._sizePopup(),e=this._calculatePosition(f,e,d),k=d.width,c=d.height,m=d.padding,n=d.ui.padding;if(this.autoPanEnabled&&!this.autoAlignmentEnabled){if(f.y<m.top||f.y>c-m.bottom||f.x<m.left||f.x>k-m.right)return a.centerAtLocation();if(!this.dockEnabled&&e&&e.width<d.width&&
e.height<d.height){var g=f=0;e.box.top<m.top?g=-e.box.top+n.top+m.top:e.box.bottom>c-m.bottom&&(g=-(e.box.bottom-c+m.bottom)-n.bottom);e.box.left<m.left?f=e.box.left-n.left-m.left:e.box.right>k-m.right&&(f=e.box.right-k+m.right+n.right);if(f||g)return e=b.translateBy(b.create(),d.viewpoint,[f,g]),d.goTo(e,a.animationOptions)}}}}}}.bind(this))},_isScreenPointWithinView:function(a,b){return b&&a&&-1<a.x&&-1<a.y&&a.x<=b.width&&a.y<=b.height},_autoAlign:function(){if(this.autoAlignmentEnabled&&this.visible){var a=
this.get("viewModel.view"),b=this._getLocationScreenPoint();if(this._isScreenPointWithinView(b,a)){var d=this._sizePopup(),f=this._pointerOffset,e=d.h+f,d=(d.w+f)/2,k,c,m,n,f=a.padding;b.x-d<0+f.left&&(c=!0);b.x+d>a.width-f.right&&(k=!0);b.y-e<0+f.top&&(m=!0);b.y+e>a.height-f.bottom&&(n=!0);c?this._set("alignment",m?"right-bottom":"right-top"):k?this._set("alignment",m?"left-bottom":"left-top"):m?this._set("alignment",n?"top":"bottom"):this._set("alignment","top")}}},_positionPopup:function(){var a=
this.viewModel.view;if(a){p.remove(this._containerNode,[v.alignTop,v.alignBottom,v.alignLeftTop,v.alignLeftBottom,v.alignRightTop,v.alignRightBottom]);this._triggerOffset();var b;switch(this.alignment){case "bottom":b=v.alignBottom;break;case "right-top":b=v.alignRightTop;break;case "right-bottom":b=v.alignRightBottom;break;case "left-top":b=v.alignLeftTop;break;case "left-bottom":b=v.alignLeftBottom;break;default:b=v.alignTop}p.add(this._containerNode,b);b=this._getLocationScreenPoint();var d=this._sizePopup();
(a=(a=this._calculatePosition(b,d,a))&&a.style)&&C.set(this._containerNode,a)}},_removeContent:function(){this._destroyPopupRenderer();q.set(this._bodyContentNode,"innerHTML","");q.set(this._titleNode,"innerHTML","");q.set(this._pageTextNode,"innerHTML","");q.set(this._pageTextDockedNode,"innerHTML","");p.remove(this._containerNode,[v.showTitle,v.showContent])},_keyupFeature:function(a,b){var e=a.keyCode;if(e===f.UP_ARROW||e===f.DOWN_ARROW){a.stopPropagation();a.preventDefault();a=d("li",this._paginationNode);
var k=a.length;b=a.indexOf(b);var c;e===f.UP_ARROW?c=b-1:e===f.DOWN_ARROW&&(c=b+1);0>c?c=k-1:c>=k&&(c=0);a[c].focus()}},_selectFeature:function(a){var b=this.viewModel,d=-1;(a=q.get(a,"data-feature-index"))&&(d=parseInt(a,10));-1!==d&&(b.selectedFeatureIndex=d);p.remove(this._containerNode,v.hasPaginationMenuOpen);this._pageMenuNode.focus()},_updateSelectedFeature:function(b){var d=this.viewModel,f,e="",k="";if(b){if(f=b.layer)e=f.id||"",k=f.title||"";if(!this._popupRenderer||this._popupRenderer&&
this._popupRenderer._destroyed){this._handleRegistry.remove(G.popupRenderer);this._set("_popupRenderer",new z({container:x.create("div")}));f=a.init(this._popupRenderer.viewModel,"title",function(a){d.title=a});var c=a.init(this._popupRenderer.viewModel,"content",function(a){d.content=this._popupRenderer.domNode}.bind(this)),n=m(this._popupRenderer,"resize",this.reposition.bind(this));this._handleRegistry.add([f,c,n],G.popupRenderer)}this._popupRenderer.graphic=b}this._toggleFeatureUpdatedClass();
q.set(this._containerNode,"data-layer-title",k);q.set(this._containerNode,"data-layer-id",e);this.reposition()},_updateFeatures:function(a){var b=this.viewModel;this._createPopupRendererVMs(a);this._updatePagination(a,b.selectedFeatureIndex);this._updateFooterVisibility(a,b.actions);this.reposition()},_shouldDockAtCurrentViewSize:function(a){var b=this.viewModel;a=a.breakpoint;return b.view&&(a.hasOwnProperty("width")&&b.view.ui.width<=a.width||a.hasOwnProperty("height")&&b.view.ui.height<=a.height)},
_sizePopup:function(){return A.getContentBox(this._containerNode)},_updateTitle:function(a){a=a||"";q.set(this._titleNode,"innerHTML",a);p.toggle(this._containerNode,v.showTitle,!!a);p.remove(this._containerNode,v.hasPaginationMenuOpen)},_toggleDock:function(){this.set("dockEnabled",!this.dockEnabled)},_togglePageMenu:function(){p.toggle(this._containerNode,v.hasPaginationMenuOpen);var a=p.contains(this._containerNode,v.hasPaginationMenuOpen);q.set(this._pageMenuSectionNode,"aria-hidden",!a);var b=
d("li",this._paginationNode),f=b[0];b.forEach(function(b){q.set(b,"tabIndex",a?"0":"")});a?f&&f.focus():this._pageMenuNode.focus()},_updatePageText:function(a,b){var d="";this._isPaginationEnabled(a)&&(d=u.substitute({index:b+1,total:a.length},this._i18n.pageText));this._pageTextNode&&q.set(this._pageTextNode,{textContent:d});this._pageTextDockedNode&&q.set(this._pageTextDockedNode,{textContent:d})},_triggerOffset:function(){this._containerNode.offsetWidth=this._containerNode.offsetWidth},_toggleFeatureUpdatedClass:function(){p.remove(this._containerNode,
v.hasFeatureUpdated);this._triggerOffset();p.add(this._containerNode,v.hasFeatureUpdated)},_viewPointChanged:function(){this.closeOnViewChangeEnabled?this.close():this._positionPopup()},_wireUpView:function(b){this._handleRegistry.remove(G.view);this._viewPointEvent=null;if(b){var d="viewpoint";"3d"===b.type&&(d="camera");this._viewPointEvent=a.pausable(b,d,this._viewPointChanged.bind(this));this._handleRegistry.add([b.watch("padding",this.reposition.bind(this)),b.watch("size",this._updateDockEnabledForViewSize.bind(this)),
m(b,"resize",this.reposition.bind(this)),this._viewPointEvent],G.view);this._togglePopupLocationRepositioning(this.visible);this._createSpinner(this.spinnerEnabled,b);this._setDockEnabledForViewSize(this.dockOptions);this._toggleDockButton(this.dockOptions);this.reposition()}},_updateDockEnabledForViewSize:function(a,b){var d=this.get("viewModel.view.padding"),f=d.left+d.right,e=d.top+d.bottom,d=[],k=[];d[0]=a[0]-f;d[1]=a[1]-e;k[0]=b[0]-f;k[1]=b[1]-e;a=this.dockOptions;this._dockingThresholdCrossed(d,
k,a.breakpoint)&&this._setDockEnabledForViewSize(a);this._updateDockPosition(a)},_togglePopupLocationRepositioning:function(a){var b=this.viewModel;this._viewPointEvent&&(a&&b.location&&!this.dockEnabled?this._viewPointEvent.resume():this._viewPointEvent.pause())},_toggleContentVisibility:function(a){a?this._addContent():this._removeContent()}})})},"esri/widgets/support/viewModelWiring":function(){define(["../../core/watchUtils"],function(h){function l(g,c){Array.isArray(c)||(c=[c]);return c.map(function(a){return g.viewModel.on(a,
function(b){g.emit(a,b)})})}return{createGetterDelegate:function(g){var c="viewModel."+g;return function(){return this.get(c)}},createSetterDelegate:function(g){return function(c){var a=this.get("viewModel");a&&a.set(g,c)}},createMethodDelegate:function(g){var c="viewModel."+g;return function(){var a=this.get(c);if(a)return a.apply(this.viewModel,arguments)}},setUpEventDelegates:function(g,c){var a=l(g,c),b=h.init(g,"viewModel",function(b,k){a.forEach(function(a){a.remove()});a.length=0;b&&(a=l(g,
c));g.own.apply(g,a)});g.own(b)}}})},"esri/widgets/Widgette":function(){define("../core/Accessor ../core/declare ../core/accessorSupport/metadata dijit/_WidgetBase dijit/Destroyable dijit/registry dojo/_base/lang dojo/_base/window dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/on".split(" "),function(h,l,g,c,a,b,e,k,f,m,d,r,n){function t(a){return function(b){this._set(a,b)}}function u(a,b){return function(d){w.call(this,a,b,d);this._set(a,d)}}function w(a,b,f){(Array.isArray(b)?b:[b]).forEach(function(b){var k=
this[b.node||b||"domNode"];switch(b.type||"attribute"){case "attribute":e.isFunction(f)&&(f=f.bind(this));b=b.attribute?b.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;k.tagName?d.set(k,b,f):k.set(b,f);break;case "innerText":k.innerHTML="";k.appendChild(this.ownerDocument.createTextNode(f));break;case "innerHTML":k.innerHTML=f;break;case "class":b=this._get(a),r.replace(k,f,b)}},this)}function p(a,b,d){f.around(a,b,function(b){return function(){d(a)||b.apply(a)}})}l.before(function(a,b){if(b.declaredClass===
q||l.hasMixin(a,q)){var d=g.getPropertiesMetadata(b);Object.keys(d).forEach(function(a){var b=d[a];var f=b.set;a="function"===typeof f?f:null===f?t(b.name):"string"===typeof f||"object"===typeof f?u(a,f):void 0;b.set=a})}});var q="esri.widgets._WidgetBase";return h.createSubclass([a],{declaredClass:q,postscript:function(a){var f=this.__accessor__;a=f.ctorArgs||a;var e;(e=this.getDefaults?a?this.getDefaults(a):this.getDefaults({}):null)&&Object.getOwnPropertyNames(e).forEach(function(a){f.set(a,e[a])},
this);this.postMixInProperties();this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=k.body(this.ownerDocument);b.add(this);this.buildRendering();f.initialize();a&&(this.set(a),f.ctorArgs=null);f.initialize();this.initialize();this.postCreate();if(this.domNode){var c;(a=this.srcNodeRef)&&a.parentNode&&this.domNode!==a&&(a.parentNode.replaceChild(this.domNode,a),c=!0);d.set(this.domNode,{widgetId:this.id,id:this.id});c&&(this.srcNodeRef=
null)}this._created=!0;this.notifyChange("container");p(this,"startup",function(a){return a._started});p(this,"destroy",function(a){return a._beingDestroyed||a._destroyed});this.autoStart&&this.startup()},getDefaults:function(a){var d={};d.id=a.id?a.id:a.srcNodeRef&&a.srcNodeRef.id||b.getUniqueId(this.declaredClass.replace(/\./g,"_"));delete a.id;a.srcNodeRef&&(d.srcNodeRef=a.srcNodeRef,delete a.srcNodeRef);return e.mixin(this.inherited(arguments),d)},normalizeCtorArgs:function(a,b){a=a||{};if(b=
a.container||a.srcNodeRef||b)a.srcNodeRef=m.byId(b);return a},destroy:function(){this._customWidgetBaseDestroy()},postMixInProperties:c.prototype.postMixInProperties,buildRendering:c.prototype.buildRendering,postCreate:c.prototype.postCreate,startup:c.prototype.startup,_beingDestroyed:!1,_destroyed:!1,_created:!1,properties:{autoStart:!0,"class":{value:"",set:{node:"domNode",type:"class"}},domNode:{value:null},focused:!1,id:{value:""},srcNodeRef:{value:null},style:{value:null,set:c.prototype._setStyleAttr},
widgetId:{}},destroyDescendants:c.prototype.destroyDescendants,destroyRecursive:c.prototype.destroyRecursive,destroyRendering:c.prototype.destroyRendering,emit:c.prototype.emit,on:function(a,b){return this.own(n(this.domNode,a,b))[0]},toString:c.prototype.toString,getChildren:c.prototype.getChildren,getParent:c.prototype.getParent,isLeftToRight:c.prototype.isLeftToRight,placeAt:c.prototype.placeAt,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()},
dojoAttachEvent:"",dojoAttachPoint:"",_customWidgetBaseDestroy:function(a){function d(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a)}this._beingDestroyed=!0;this.domNode&&b.findWidgets(this.domNode,this.containerNode).forEach(d);this.destroyRendering(a);b.remove(this.id);this._destroyed=!0}}).createSubclass({declaredClass:"esri.widgets.Widgette",getDefaults:function(){return e.mixin(this.inherited(arguments),{viewModel:{}})},buildRendering:function(){this.inherited(arguments);
r.add(this.domNode,"esri-widget")},destroy:function(){this.viewModel.destroy&&this.viewModel.destroy();this.viewModel=null},properties:{container:{get:function(){return this._created?this.domNode:this._get("container")},set:function(a){var b=this._get("container");this._created||b||!a||this._set("container",m.byId(a))}},viewModel:{value:null},visible:{value:!0,set:function(a){this._set("visible",a);r.toggle(this.domNode,"esri-hidden",!a)}}}})})},"esri/widgets/Popup/PopupViewModel":function(){define("../../core/Accessor ../../core/Collection ../../core/Error ../../core/Evented ../../core/HandleRegistry ../../core/promiseUtils ../../core/watchUtils ../../geometry/support/webMercatorUtils ../../geometry/Point ../../support/Action dojo/fx/easing dojo/_base/lang".split(" "),
function(h,l,g,c,a,b,e,k,f,m,d,r){function n(a,b){return b.allLayerViews.find(function(b){return b.layer===a})}var t={id:"zoom-to"};return h.createSubclass([c],{declaredClass:"esri.widgets.Popup.PopupViewModel",properties:{actions:{type:l.ofType(m)},animationOptions:{},content:{},featureCount:{readOnly:!0},features:{},location:{type:f},pendingPromisesCount:{readOnly:!0},promises:{},selectedFeature:{readOnly:!0},selectedFeatureIndex:{},state:{dependsOn:["view.ready"],readOnly:!0},title:{},updateLocationEnabled:{},
view:{},visible:{},waitingForResult:{dependsOn:["pendingPromisesCount","featureCount"],readOnly:!0},zoomFactor:{},zoomScale:{readOnly:!0}},_handles:null,constructor:function(){this._handles=new a},getDefaults:function(a){return r.mixin(this.inherited(arguments),{actions:[t],animationOptions:{duration:300,easing:d.quadInOut},promises:[]})},initialize:function(){this._handles.add([e.init(this,"view.scale",this._scaleWatcher),e.whenFalse(this,"visible",this._visibleWatcher)])},destroy:function(){this._handles.destroy();
this.view=this._handles=null},actions:[t],animationOptions:{duration:300,easing:d.quadInOut},content:null,featureCount:0,features:null,_featuresSetter:function(a){this._set("features",a);this._updateFeatureCount(a);this.pendingPromisesCount||(this.selectedFeatureIndex=-1,a.length&&(this.selectedFeatureIndex=0))},highlightEnabled:!0,_highlightEnabledSetter:function(a){this._set("highlightEnabled",a);this._highlightFeature(this.selectedFeature,this.view)},location:null,_locationSetter:function(a){var b=
this.get("view.spatialReference.isWebMercator");a&&a.get("spatialReference.isWGS84")&&b&&(a=k.geographicToWebMercator(a));this._set("location",a)},pendingPromisesCount:0,waitingForResult:!1,_waitingForResultGetter:function(){return 0<this.pendingPromisesCount&&0===this.featureCount},promises:[],_promisesSetter:function(a){var b=this._get("promises");b&&b.forEach(function(a){a.cancel()});this.features=[];this._set("pendingPromisesCount",0);this._set("promises",a);a&&a.length&&(this._set("pendingPromisesCount",
a.length),a=a.slice(0),a.forEach(function(a){a.always(function(b){a.isCanceled()||(this._set("pendingPromisesCount",this.pendingPromisesCount-1),this._updateFeatures(a,b))}.bind(this))},this))},selectedFeature:null,selectedFeatureIndex:-1,_selectedFeatureIndexSetter:function(a){if(isNaN(a)||-1>a)a=-1;var b=null,d=this.features;d&&d.length&&(a=(a+d.length)%d.length,b=d[a]);this._set("selectedFeature",b);this._set("selectedFeatureIndex",a);this._selectedFeatureChange(b,this.updateLocationEnabled)},
state:"disabled",_stateGetter:function(){return this.get("view.ready")?"ready":"disabled"},title:null,updateLocationEnabled:!1,_updateLocationEnabledSetter:function(a){this._selectedFeatureChange(this.selectedFeature,a);this._set("updateLocationEnabled",a)},view:null,visible:!1,zoomFactor:4,_zoomFactorSetter:function(a){var b=this.view;b&&null!=b.scale&&this._setZoomScale(b.scale,a);this._set("zoomFactor",a)},zoomScale:0,centerAtLocation:function(){return this.location&&this.view?this.view.goTo({target:this.location,
scale:this.view.scale},this.animationOptions):b.reject(new g(this.declaredClass+"::Cannot center at location without a location and view."))},clear:function(){this.set({promises:[],features:[],content:null,title:null,location:null})},triggerAction:function(a){(a=this.actions.getItemAt(a))&&this.emit("trigger-action",{action:a})},next:function(){this.selectedFeatureIndex+=1;return this},previous:function(){--this.selectedFeatureIndex;return this},zoomToLocation:function(){var a=this.view,d=this.location,
f=this.zoomScale;if(!d||!a)return b.reject(new g(this.declaredClass+"::Cannot zoom to location without a location and view."));var e=this.selectedFeature,k=e&&e.geometry,c=e&&"3d"===a.type;k||c?(d={target:e},k&&"point"===k.type&&this._isScreenSize(e)&&(d.scale=f,this.location=k)):d={target:d,scale:f};return a.goTo(d,this.animationOptions)},_isScreenSize:function(a){if("3d"!==this.view.type||"esri.Graphic"!==a.declaredClass)return!0;var b=!0,d=this.view.getViewForGraphic(a);d&&d.whenGraphicBounds&&
d.whenGraphicBounds(a).then(function(a){b=!a||a[0]===a[3]&&a[1]===a[4]&&a[2]===a[5]});return b},_getSelectedFeatureActions:function(){this._originalActions&&(this.actions=this._originalActions,this._originalActions=null);var a=this.actions.filter(function(a){return!a.temporary},this),b=a,d=this.selectedFeature.getEffectivePopupTemplate();if(d&&d.actions){for(var b=d.actions,f=0;f<b.length;f++)b.getItemAt(f).temporary=!0;d.overwriteActions?this._originalActions=a:b=a.concat(b)}this.actions=b},_scaleWatcher:function(a){null!=
a&&this._setZoomScale(a,this.zoomFactor)},_getPointFromGeometry:function(a){switch(a&&a.type){case "point":return a;case "extent":return a.center;case "polygon":return a.centroid;case "multipoint":case "polyline":return a.extent.center;default:return null}},_visibleWatcher:function(a){this._handles.remove("highlight")},_highlightFeature:function(a,b){this._handles.remove("highlight");if(a&&b&&this.highlightEnabled){var d=a.layer,f=b.type;d&&"3d"===f&&(b=n(d,b))&&"function"===typeof b.highlight&&(d=
d.objectIdField,f=a.attributes,a=b.highlight(f&&f[d]||a),this._handles.add(a,"highlight"))}},_selectedFeatureChange:function(a,b){this._highlightFeature(a,this.view);a&&(b&&(this.location=this._getPointFromGeometry(this.selectedFeature.geometry)),this._getSelectedFeatureActions())},_updateFeatureCount:function(a){var b=0;a&&a.length&&(b=a.length);this._set("featureCount",b)},_setZoomScale:function(a,b){this._set("zoomScale",a/b)},_updateFeatures:function(a,b){a&&this.promises&&!(!this._validatePromise(a)||
b instanceof g||b instanceof Error)&&b&&b.length&&(a={},this.features&&this.features.length?(b=b.filter(function(a){return-1===this.features.indexOf(a)},this),a.features=this.features.concat(b)):(a.features=b,a.selectedFeatureIndex=0),this.set(a))},_validatePromise:function(a){return-1<this.promises.indexOf(a)}})})},"dojo/fx/easing":function(){define(["../_base/lang"],function(h){var l={linear:function(g){return g},quadIn:function(g){return Math.pow(g,2)},quadOut:function(g){return g*(g-2)*-1},quadInOut:function(g){g*=
2;return 1>g?Math.pow(g,2)/2:-1*(--g*(g-2)-1)/2},cubicIn:function(g){return Math.pow(g,3)},cubicOut:function(g){return Math.pow(g-1,3)+1},cubicInOut:function(g){g*=2;return 1>g?Math.pow(g,3)/2:(Math.pow(g-2,3)+2)/2},quartIn:function(g){return Math.pow(g,4)},quartOut:function(g){return-1*(Math.pow(g-1,4)-1)},quartInOut:function(g){g*=2;return 1>g?Math.pow(g,4)/2:-.5*(Math.pow(g-2,4)-2)},quintIn:function(g){return Math.pow(g,5)},quintOut:function(g){return Math.pow(g-1,5)+1},quintInOut:function(g){g*=
2;return 1>g?Math.pow(g,5)/2:(Math.pow(g-2,5)+2)/2},sineIn:function(g){return-1*Math.cos(Math.PI/2*g)+1},sineOut:function(g){return Math.sin(Math.PI/2*g)},sineInOut:function(g){return-1*(Math.cos(Math.PI*g)-1)/2},expoIn:function(g){return 0==g?0:Math.pow(2,10*(g-1))},expoOut:function(g){return 1==g?1:-1*Math.pow(2,-10*g)+1},expoInOut:function(g){if(0==g)return 0;if(1==g)return 1;g*=2;if(1>g)return Math.pow(2,10*(g-1))/2;--g;return(-1*Math.pow(2,-10*g)+2)/2},circIn:function(g){return-1*(Math.sqrt(1-
Math.pow(g,2))-1)},circOut:function(g){return Math.sqrt(1-Math.pow(g-1,2))},circInOut:function(g){g*=2;return 1>g?-.5*(Math.sqrt(1-Math.pow(g,2))-1):.5*(Math.sqrt(1-Math.pow(g-2,2))+1)},backIn:function(g){return Math.pow(g,2)*(2.70158*g-1.70158)},backOut:function(g){--g;return Math.pow(g,2)*(2.70158*g+1.70158)+1},backInOut:function(g){g*=2;if(1>g)return Math.pow(g,2)*(3.5949095*g-2.5949095)/2;g-=2;return(Math.pow(g,2)*(3.5949095*g+2.5949095)+2)/2},elasticIn:function(g){if(0==g||1==g)return g;--g;
return-1*Math.pow(2,10*g)*Math.sin(2*(g-.075)*Math.PI/.3)},elasticOut:function(g){return 0==g||1==g?g:Math.pow(2,-10*g)*Math.sin(2*(g-.075)*Math.PI/.3)+1},elasticInOut:function(g){if(0==g)return 0;g*=2;if(2==g)return 1;var c=.3*1.5,a=c/4;if(1>g)return--g,-.5*Math.pow(2,10*g)*Math.sin(2*(g-a)*Math.PI/c);--g;return.5*Math.pow(2,-10*g)*Math.sin(2*(g-a)*Math.PI/c)+1},bounceIn:function(g){return 1-l.bounceOut(1-g)},bounceOut:function(g){return g<1/2.75?7.5625*Math.pow(g,2):g<2/2.75?7.5625*Math.pow(g-1.5/
2.75,2)+.75:g<2.5/2.75?7.5625*Math.pow(g-2.25/2.75,2)+.9375:7.5625*Math.pow(g-2.625/2.75,2)+.984375},bounceInOut:function(g){return.5>g?l.bounceIn(2*g)/2:l.bounceOut(2*g-1)/2+.5}};h.setObject("dojo.fx.easing",l);return l})},"esri/widgets/Popup/PopupRenderer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../support/widget ../Widget ./PopupRendererViewModel ../../core/requireUtils dojo/i18n!./nls/PopupRenderer".split(" "),
function(h,l,g,c,a,b,e,k,f,m){function d(a,b){return void 0===b?"esri-popup-renderer__"+a:"esri-popup-renderer__"+a+"-"+b}var r=/^\s*(https?:\/\/[^\s]+)\s*$/i;l=function(a){function c(b){b=a.call(this)||this;b._chartMap=new Map;b._activeMediaMap=new Map;b._chartRequirePromise=null;b._chartResizeTimer=null;b.graphic=null;b.title=null;b.viewModel=new k;return b}g(c,a);c.prototype.destroy=function(){clearTimeout(this._chartResizeTimer);this._chartResizeTimer=null;this._activeMediaMap.clear();this._activeMediaMap=
null;this._cancelChartModules();this._destroyCharts()};c.prototype.resize=function(){this._resizeCharts();this.emit("resize")};c.prototype.render=function(){var a=b.tsx("div",{key:d("loading-container"),class:"esri-popup-renderer__loading-container"},b.tsx("span",{class:b.join("esri-icon-loading-indicator esri-rotating","esri-popup-renderer__loading-spinner")})),a=this.viewModel.waitingForContent?a:this._renderContent();return b.tsx("div",{class:"esri-popup-renderer"},b.tsx("div",{class:"esri-popup-renderer__size-container"},
b.tsx("div",{class:"esri-popup-renderer__main-container"},a)))};c.prototype.goToMedia=function(a,b){this._activeMediaMap.set(a,b);this.scheduleRender()};c.prototype.nextMedia=function(a){this._pageContentElementMedia(a,"next")};c.prototype.previousMedia=function(a){this._pageContentElementMedia(a,"previous")};c.prototype._cancelChartModules=function(){this._chartRequirePromise&&this._chartRequirePromise.cancel()};c.prototype._destroyChart=function(a){var b=this._chartMap.get(a);b&&(b.chart.destroy(),
b.tooltip.destroy());this._chartMap.delete(a)};c.prototype._destroyCharts=function(){this._chartMap.forEach(function(a){a.chart.destroy();a.tooltip.destroy()});this._chartMap.clear()};c.prototype._resizeCharts=function(){this._chartMap.forEach(function(a){a=a.chart;var b=a.node;b&&b.offsetWidth&&b.offsetHeight&&a.resize()})};c.prototype._renderContent=function(){this._destroyCharts();var a=this.viewModel.content;if("string"===typeof a){var f=document.createElement("div");f.innerHTML=a;return b.tsx("div",
{key:d("content"),bind:f,afterCreate:this._attachToNode})}if(a&&a.isInstanceOf&&a.isInstanceOf(e))return b.tsx("div",{key:d("content")},a.render());if(a instanceof HTMLElement)return b.tsx("div",{key:d("content"),bind:a,afterCreate:this._attachToNode});if(a&&"function"===typeof a.postMixInProperties&&"function"===typeof a.buildRendering&&"function"===typeof a.postCreate&&"function"===typeof a.startup)return b.tsx("div",{key:d("content"),bind:a.domNode,afterCreate:this._attachToNode});if(Array.isArray(a))return a.length?
b.tsx("div",{key:d("content")},a.map(this._renderContentElement,this)):null};c.prototype._renderContentElement=function(a,b){var d=this.viewModel.contentTypes;switch(a.type){case d.attachments:return this._renderAttachments(a,b);case d.fields:return this._renderFields(a,b);case d.media:return this._renderMedia(a,b);case d.text:return this._renderText(a,b);default:return null}};c.prototype._renderAttachmentInfo=function(a,f){return b.tsx("li",{class:"esri-popup-renderer__attachments-item",key:d("attachment",
f)},b.tsx("a",{class:"esri-popup-renderer__attachments-item-link",href:a.url,target:"_blank"},b.tsx("span",{class:b.join("esri-icon-download","esri-popup-renderer__attachments-item-icon")}),b.tsx("span",{class:"esri-popup-renderer__attachments-item-title"},a.name||m.noTitle)))};c.prototype._renderAttachments=function(a,f){return(a=a.attachmentInfos)&&a.length?b.tsx("div",{key:d("attachments-element"),class:b.join("esri-popup-renderer__attachments","esri-popup-renderer__content-element")},b.tsx("div",
{class:"esri-popup-renderer__attachments-title"},m.attach),b.tsx("ul",{class:"esri-popup-renderer__attachments-items"},a.map(this._renderAttachmentInfo))):null};c.prototype._renderFieldInfo=function(a,f){var e=this.viewModel,c=e.formattedAttributes.content[f]||e.formattedAttributes.global,k=a.fieldName,e=a.label||k,c=null==c[k]?"":c[k];a=!(!a.format||!a.format.dateFormat);k='\x3ca target\x3d"_blank" href\x3d"$1" title\x3d"'+e+'"\x3e'+m.view+"\x3c/a\x3e";c=c&&"string"===typeof c?c.replace(r,k):c;a=
(n={},n["esri-popup-renderer__field-data--date"]=a,n);return b.tsx("tr",{key:d("fields-element-info-row",f)},b.tsx("th",{key:d("fields-element-info-row-header",f),class:"esri-popup-renderer__field-header"},e),b.tsx("td",{key:d("fields-element-info-row-data",f),class:"esri-popup-renderer__field-data",classes:a,innerHTML:c}));var n};c.prototype._renderFields=function(a,f){var e=this;return(a=a.fieldInfos)?b.tsx("div",{key:d("fields-element",f),class:b.join("esri-popup-renderer__fields","esri-popup-renderer__content-element")},
b.tsx("table",{summary:m.fieldsSummary,key:d("fields-element-table",f)},b.tsx("tbody",{key:d("fields-element-table-body",f)},a.map(function(a){return e._renderFieldInfo(a,f)})))):null};c.prototype._shouldOpenInNewTab=function(a){void 0===a&&(a="");return!/^(?:mailto:|tel:)/.test(a.trim().toLowerCase())};c.prototype._renderMediaInfoType=function(a,f){var e=a.value,c=a.title,c=void 0===c?"":c,k=a.type,m=e.sourceURL,e=e.linkURL,n=this._shouldOpenInNewTab(e)?"_self":"_blank";if("image"===k)return a=b.tsx("img",
{alt:c,src:m}),(f=e?b.tsx("a",{title:c,href:e,target:n},a):null)?f:a;if(-1!==k.indexOf("chart"))return b.tsx("div",{key:d("chart",f),bind:this,"data-media-info":a,"data-content-element-index":f,class:"esri-popup-renderer__media-chart",afterCreate:this._getChartDependencies,afterUpdate:this._getChartDependencies})};c.prototype._getChartDependencies=function(a){var b=this,d=a["data-media-info"],e=a["data-content-element-index"],c=d.value,k=c.theme||"Claro",m=d.type,d=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"],
n=k;"string"===typeof k&&(n=k.replace(/\./g,"/"),-1===n.indexOf("/")&&(n="dojox/charting/themes/"+n));d.push(n);this._cancelChartModules();this._chartRequirePromise=f.when(h,d).then(function(d){b._renderChart(a,e,m,c,d[0],d[1],d[2]);clearTimeout(b._chartResizeTimer);b._chartResizeTimer=setTimeout(function(){return b.resize()},0);b._chartRequirePromise=null})};c.prototype._renderChart=function(a,b,d,f,e,c,k){a=new e(a,{margins:{l:4,t:4,r:4,b:4}});k&&a.setTheme(k);switch(d){case "pie-chart":a.addPlot("default",
{type:"Pie",labels:!1});a.addSeries("Series A",f.fields);break;case "line-chart":a.addPlot("default",{type:"Markers"});a.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});a.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});f.fields.forEach(function(a,b){a.x=b+1});a.addSeries("Series A",f.fields);break;case "column-chart":a.addPlot("default",{type:"Columns",gap:3});a.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});a.addSeries("Series A",f.fields);break;
case "bar-chart":a.addPlot("default",{type:"Bars",gap:3}),a.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),a.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),a.addSeries("Series A",f.fields)}d=new c(a);a.render();this._chartMap.set(b,{chart:a,tooltip:d})};c.prototype._renderMediaInfo=function(a,f){this._destroyChart(f);var e=this._renderMediaInfoType(a,f),c=a.title?b.tsx("div",{key:d("media-title",f),class:"esri-popup-renderer__media-item-title",
innerHTML:a.title}):null;a=a.caption?b.tsx("div",{key:d("media-caption",f),class:"esri-popup-renderer__media-item-caption",innerHTML:a.caption}):null;return b.tsx("div",{key:d("media-container",f),class:"esri-popup-renderer__media-item-container",bind:this,afterCreate:this.resize,afterUpdate:this.resize},b.tsx("div",{key:d("media-itme-container",f),class:"esri-popup-renderer__media-item"},e),c,a)};c.prototype._renderMediaStatsItem=function(a,d,f){f="chart"===f?b.join("esri-popup-renderer__media-chart-icon",
"esri-icon-chart"):b.join("esri-popup-renderer__media-image-icon","esri-icon-media");return b.tsx("li",{class:"esri-popup-renderer__media-image-summary"},b.tsx("span",{class:"esri-popup-renderer__media-count","aria-label":a},"("+d+")"),b.tsx("span",{"aria-hidden":"true",class:f}))};c.prototype._renderMediaPageButton=function(a,f){var e=(a="previous"===a)?m.previous:m.next,c=a?b.join("esri-popup-renderer__button","esri-popup-renderer__media-previous"):b.join("esri-popup-renderer__button","esri-popup-renderer__media-next"),
k=a?b.join("esri-popup-renderer__icon","esri-popup-renderer__media-previous-icon","esri-icon-left-triangle-arrow"):b.join("esri-popup-renderer__icon","esri-popup-renderer__media-next-icon","esri-icon-right-triangle-arrow"),n=a?b.join("esri-popup-renderer__icon","esri-popup-renderer__media-previous-icon--rtl","esri-icon-right-triangle-arrow"):b.join("esri-popup-renderer__icon","esri-popup-renderer__media-next-icon--rtl","esri-icon-left-triangle-arrow"),g=a?this._previousClick:this._nextClick;return b.tsx("div",
{key:d(a?"previous":"next",f),title:e,tabIndex:0,role:"button",class:c,"data-content-element-index":f,bind:this,onclick:g},b.tsx("span",{"aria-hidden":"true",class:k}),b.tsx("span",{"aria-hidden":"true",class:n}),b.tsx("span",{class:"esri-icon-font-fallback-text"},e))};c.prototype._renderMedia=function(a,f){a=a.mediaInfos;var e=this._getMediaStats(a),c=e.total,k=(n={},n["esri-popup-renderer--media-pagination-visible"]=1<e.total,n),n=this._renderMediaStatsItem(m.numImages,e.images,"image"),e=this._renderMediaStatsItem(m.numCharts,
e.charts,"chart"),g=this._renderMediaPageButton("previous",f),r=this._renderMediaPageButton("next",f),h=this._activeMediaMap.get(f);isNaN(h)&&(this._activeMediaMap.set(f,0),h=0);return c?b.tsx("div",{key:d("media-element",f),class:b.join("esri-popup-renderer__media","esri-popup-renderer__content-element"),classes:k},b.tsx("ul",{class:"esri-popup-renderer__media-summary"},n,e),b.tsx("div",{key:d("media-element-container",f),class:"esri-popup-renderer__media-container"},g,this._renderMediaInfo(a[h],
f),r)):null;var n};c.prototype._renderText=function(a,f){return a.text?b.tsx("div",{key:d("text-element",f),innerHTML:a.text,class:b.join("esri-popup-renderer__text","esri-popup-renderer__content-element")}):null};c.prototype._attachToNode=function(a){a.appendChild(this)};c.prototype._getMediaStats=function(a){var b=0,d=0;a.forEach(function(a){a=a.type;"image"===a?b++:-1!==a.indexOf("chart")&&d++});return{total:d+b,images:b,charts:d}};c.prototype._pageContentElementMedia=function(a,b){var d=this.viewModel.content;
(d=(d=d&&d[a])&&d.mediaInfos)&&d.length&&(b="previous"===b?-1:1,b=(this._activeMediaMap.get(a)+b+d.length)%d.length,this._activeMediaMap.set(a,b),this.scheduleRender())};c.prototype._previousClick=function(a){this.previousMedia(a.currentTarget["data-content-element-index"])};c.prototype._nextClick=function(a){this.nextMedia(a.currentTarget["data-content-element-index"])};return c}(a.declared(e));c([a.aliasOf("viewModel.graphic")],l.prototype,"graphic",void 0);c([a.aliasOf("viewModel.title")],l.prototype,
"title",void 0);c([a.property({type:k}),b.renderable(["viewModel.waitingForContent","viewModel.content"])],l.prototype,"viewModel",void 0);c([b.accessibleHandler()],l.prototype,"_previousClick",null);c([b.accessibleHandler()],l.prototype,"_nextClick",null);return l=c([a.subclass("esri.widgets.Popup.PopupRenderer")],l)})},"esri/widgets/support/widget":function(){define(["require","exports","./decorators","./jsxFactory","./widgetUtils"],function(h,l,g,c,a){function b(a){for(var b in a)l.hasOwnProperty(b)||
(l[b]=a[b])}Object.defineProperty(l,"__esModule",{value:!0});b(g);b(c);b(a)})},"esri/widgets/support/decorators":function(){define("require exports ./decorators/accessibleHandler ./decorators/renderable ./decorators/triggerWithSpaceOrEnter ./decorators/vmEvent ./decorators/vmMethod ./decorators/vmProperty".split(" "),function(h,l,g,c,a,b,e,k){function f(a){for(var b in a)l.hasOwnProperty(b)||(l[b]=a[b])}Object.defineProperty(l,"__esModule",{value:!0});f(g);f(c);f(a);f(b);f(e);f(k)})},"esri/widgets/support/decorators/accessibleHandler":function(){define(["require",
"exports","dojo/keys"],function(h,l,g){function c(a){return function(b){for(var e=[],c=1;c<arguments.length;c++)e[c-1]=arguments[c];c=b.type;if(b instanceof KeyboardEvent||"keyup"===c||"keydown"===c||"keypress"===c){if(b.keyCode===g.ENTER||b.keyCode===g.SPACE)b.preventDefault(),b.target.click()}else a.call.apply(a,[this,b].concat(e))}}Object.defineProperty(l,"__esModule",{value:!0});l.accessibleHandler=function(){return function(a,b){return{value:c(a[b])}}}})},"esri/widgets/support/decorators/renderable":function(){define(["require",
"exports","./propUtils"],function(h,l,g){Object.defineProperty(l,"__esModule",{value:!0});l.renderable=function(c){var a="string"===typeof c?g.splitProps(c):c;return function(b,e){b._renderableProps||(b._renderableProps=[]);b=b._renderableProps;a?b.push.apply(b,g.normalizePropNames(a,e)):b.push(e)}}})},"esri/widgets/support/decorators/propUtils":function(){define(["require","exports"],function(h,l){Object.defineProperty(l,"__esModule",{value:!0});l.splitProps=function(g){return g.split(",").map(function(c){return c.trim()})};
l.normalizePropNames=function(g,c){return g.map(function(a){a=0===a.indexOf(c)?a:c+"."+a;return a})}})},"esri/widgets/support/decorators/triggerWithSpaceOrEnter":function(){define(["require","exports","../../../core/Logger","./accessibleHandler"],function(h,l,g,c){Object.defineProperty(l,"__esModule",{value:!0});l.triggerWithSpaceOrEnter=function(){g.getLogger("esri.widgets.support.decorators.triggerWithSpaceOrEnter").warn("@triggerWithSpaceOrEnter is deprecated, use @accessibleHandler instead.");
return c.accessibleHandler.apply(this,arguments)}})},"esri/widgets/support/decorators/vmEvent":function(){define(["require","exports","./propUtils"],function(h,l,g){Object.defineProperty(l,"__esModule",{value:!0});l.vmEvent=function(c){return function(a){a._delegatedEventNames||(a._delegatedEventNames=[]);var b=Array.isArray(c)?c:g.splitProps(c);a._delegatedEventNames=a._delegatedEventNames.concat(b)}}})},"esri/widgets/support/decorators/vmMethod":function(){define(["require","exports","../../../core/accessorSupport/get"],
function(h,l,g){Object.defineProperty(l,"__esModule",{value:!0});l.vmMethod=function(){console.warn("@vmMethod is deprecated, use @aliasOf instead");return function(c,a,b){var e="viewModel."+a,k;b.value=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(b=g.default(this,e))return k||(k=e.split(".").slice(0,-1).join(".")),b=b.bind(g.default(this,k)),b.call.apply(b,[this].concat(a))}}}})},"esri/widgets/support/decorators/vmProperty":function(){define(["require","exports","../../../core/accessorSupport/decorators"],
function(h,l,g){Object.defineProperty(l,"__esModule",{value:!0});l.vmProperty=function(c){var a=this;console.warn("@vmProperty is deprecated, use @aliasOf instead");return function(b,e){g.property.call(a,{aliasOf:"viewModel."+(c||e)}).call(a,b,e)}}})},"esri/widgets/support/jsxFactory":function(){define(["require","exports","../libs/maquette/maquette"],function(h,l,g){Object.defineProperty(l,"__esModule",{value:!0});l.tsx=g.h})},"esri/widgets/support/widgetUtils":function(){define(["require","exports",
"../../core/Logger"],function(h,l,g){function c(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return a.join(" ")}Object.defineProperty(l,"__esModule",{value:!0});l.classes=function(){g.getLogger("esri.widgets.support.widgetUtils").warn("classes is deprecated, use join instead.");return c.apply(this,arguments)};l.join=c;l.isRtl=function(){return"rtl"===document.head.dir}})},"esri/widgets/Spinner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./support/widget ../core/accessorSupport/decorators ./Widget ../core/promiseUtils ../core/watchUtils ./support/AnchorElementViewModel".split(" "),
function(h,l,g,c,a,b,e,k,f,m){h=function(b){function d(a){a=b.call(this)||this;a._animationDelay=500;a._animationPromise=null;a.location=null;a.view=null;a.visible=!1;a.viewModel=new m;return a}g(d,b);d.prototype.postInitialize=function(){var a=this;this.own([f.watch(this,"visible",function(b){return a._visibleChange(b)})])};d.prototype.destroy=function(){this._cancelAnimationPromise()};d.prototype.show=function(a){var b=this,d=a.location;a=a.promise;d&&(this.viewModel.location=d);this.visible=!0;
a&&a.always(function(){return b.hide()})};d.prototype.hide=function(){this.visible=!1};d.prototype.render=function(){var b=this.visible,d=!!this.viewModel.screenLocation,b=(f={},f["esri-spinner--start"]=b&&d,f["esri-spinner--finish"]=!b&&d,f),f=this._getPositionStyles();return a.tsx("div",{class:"esri-spinner",classes:b,styles:f});var f};d.prototype._cancelAnimationPromise=function(){this._animationPromise&&(this._animationPromise.cancel(),this._animationPromise=null)};d.prototype._visibleChange=
function(a){var b=this;a?this.viewModel.screenLocationEnabled=!0:(this._cancelAnimationPromise(),this._animationPromise=k.after(this._animationDelay).then(function(){b.viewModel.screenLocationEnabled=!1;b._animationPromise=null}))};d.prototype._getPositionStyles=function(){var a=this.viewModel.screenLocation;return a?{left:a.x+"px",top:a.y+"px"}:{}};return d}(b.declared(e));c([b.aliasOf("viewModel.location")],h.prototype,"location",void 0);c([b.aliasOf("viewModel.view")],h.prototype,"view",void 0);
c([b.property(),a.renderable()],h.prototype,"visible",void 0);c([b.property({type:m}),a.renderable(["viewModel.screenLocation","viewModel.screenLocationEnabled"])],h.prototype,"viewModel",void 0);return h=c([b.subclass("esri.widgets.Spinner")],h)})},"esri/widgets/support/AnchorElementViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/watchUtils ../../core/Accessor ../../core/Evented ../../core/HandleRegistry ../../core/watchUtils".split(" "),
function(h,l,g,c,a,b,e,k,f,m){h=function(a){function d(){var b=a.call(this)||this;b._handles=new f;b.location=null;b.screenLocation=null;b.screenLocationEnabled=!1;b.view=null;b._handles.add([m.watch(b,"screenLocationEnabled,location",function(){return b._updateScreenPointAndHandle()}),m.watch(b,"view, view.ready",function(){return b._wireUpView()})]);return b}g(d,a);d.prototype.destroy=function(){this.view=null;this._handles.destroy();this._viewpointHandle=this._handles=null};d.prototype._wireUpView=
function(){var a=this;this._handles.remove("view");this._viewpointHandle=null;if(this.get("view.ready")){this._setScreenLocation();var d=this.view,d=b.pausable(d,"3d"===d.type?"camera":"viewpoint",function(){return a._viewpointChange()});this._handles.add(d,"view");this._viewpointHandle=d;this._toggleWatchingViewpoint()}};d.prototype._viewpointChange=function(){this._setScreenLocation();this.emit("view-change")};d.prototype._updateScreenPointAndHandle=function(){this._setScreenLocation();this._toggleWatchingViewpoint()};
d.prototype._toggleWatchingViewpoint=function(){var a=this._viewpointHandle,b=this.screenLocationEnabled;a&&(this.location&&b?a.resume():a.pause())};d.prototype._setScreenLocation=function(){var a=this.location,b=this.view,d=this.screenLocationEnabled,f=this.get("view.ready"),a=d&&a&&f?b.toScreen(a.x,a.y,a.z):null;this._set("screenLocation",a)};return d}(a.declared(e,k));c([a.property()],h.prototype,"location",void 0);c([a.property({readOnly:!0})],h.prototype,"screenLocation",void 0);c([a.property()],
h.prototype,"screenLocationEnabled",void 0);c([a.property()],h.prototype,"view",void 0);return h=c([a.subclass("esri.widgets.support.AnchorElementViewModel")],h)})},"esri/views/ui/DefaultUI":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/watchUtils ./UI ./Component ../../widgets/Attribution ../../widgets/Compass ../../widgets/Zoom ../../widgets/NavigationToggle dojo/dom-geometry".split(" "),
function(h,l,g,c,a,b,e,k,f,m,d,r,n){h=function(a){function e(b){b=a.call(this)||this;b._defaultPositionLookup=null;b.components=[];return b}g(e,a);e.prototype.initialize=function(){this._handles.add([b.init(this,"components",this._componentsWatcher.bind(this)),b.init(this,"view",this._updateViewAwareWidgets.bind(this))])};e.prototype._findComponentPosition=function(a){if(!this._defaultPositionLookup){var b=n.isBodyLtr();this._defaultPositionLookup={attribution:"manual",compass:b?"top-left":"top-right",
"navigation-toggle":b?"top-left":"top-right",zoom:b?"top-left":"top-right"}}return this._defaultPositionLookup[a]};e.prototype._removeComponents=function(a){var b=this;a.forEach(function(a){if(a=b.find(a))b.remove(a),a.destroy()})};e.prototype._updateViewAwareWidgets=function(a){var b=this;this.components.forEach(function(d){(d=(d=b.find(d))&&d.widget)&&void 0!==d.view&&d.set("view",a)})};e.prototype._componentsWatcher=function(a,b){this._removeComponents(b);this._addComponents(a)};e.prototype._addComponents=
function(a){var b=this;this.initialized&&a.forEach(function(a){return b.add(b._createComponent(a),b._findComponentPosition(a))})};e.prototype._createComponent=function(a){var b=this._createWidget(a);if(b)return new k({id:a,node:b})};e.prototype._createWidget=function(a){if("attribution"===a)return this._createAttribution();if("compass"===a)return this._createCompass();if("navigation-toggle"===a)return this._createNavigationToggle();if("zoom"===a)return this._createZoom()};e.prototype._createAttribution=
function(){return new f({view:this.view})};e.prototype._createCompass=function(){return new m({view:this.view})};e.prototype._createNavigationToggle=function(){return new r({view:this.view})};e.prototype._createZoom=function(){return new d({view:this.view})};return e}(a.declared(e));c([a.property()],h.prototype,"components",void 0);return h=c([a.subclass("esri.views.ui.DefaultUI")],h)})},"esri/views/ui/UI":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Component ../../core/Accessor ../../core/HandleRegistry ../../core/watchUtils dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style".split(" "),
function(h,l,g,c,a,b,e,k,f,m,d,r,n){function t(a){return"object"!==typeof a||a&&a.isInstanceOf&&a.isInstanceOf(b)||!("component"in a||"index"in a||"position"in a)?null:a}var u={left:0,top:0,bottom:0,right:0},w={bottom:30,top:15,right:15,left:15};h=function(a){function e(){var b=a.call(this)||this;b._cornerNameToContainerLookup={};b._positionNameToContainerLookup={};b._components=[];b._handles=new k;b.padding=w;b.view=null;b._initContainers();return b}g(e,a);e.prototype.initialize=function(){this._handles.add([f.init(this,
"view.padding, container",this._applyViewPadding.bind(this)),f.init(this,"padding",this._applyUIPadding.bind(this))])};e.prototype.destroy=function(){this.container=null;this._components.forEach(function(a){a.destroy()});this._components.length=0;this._handles.destroy()};Object.defineProperty(e.prototype,"container",{set:function(a){var b=this._get("container");a!==b&&(a&&(d.add(a,"esri-ui"),this._attachContainers(a)),b&&(d.remove(b,"esri-ui"),n.set(b,{top:"",bottom:"",left:"",right:""}),r.empty(b)),
this._set("container",a))},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"height",{get:function(){var a=this.get("view.height")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.top+b.bottom),0)},enumerable:!0,configurable:!0});e.prototype.castPadding=function(a){return"number"===typeof a?{bottom:a,top:a,right:a,left:a}:m.mixin({},w,a)};Object.defineProperty(e.prototype,"width",{get:function(){var a=this.get("view.width")||0;if(0===a)return a;var b=this._getViewPadding();
return Math.max(a-(b.left+b.right),0)},enumerable:!0,configurable:!0});e.prototype.add=function(a,d){var f=this,e;if(Array.isArray(a))a.forEach(function(a){return f.add(a,d)});else{var c=t(a);c&&(e=c.index,d=c.position,a=c.component);d&&"object"===typeof d&&(e=d.index,d=d.position);!a||d&&!this._isValidPosition(d)||(a&&a.isInstanceOf&&a.isInstanceOf(b)||(a=new b({node:a})),this._place({component:a,position:d,index:e}),this._components.push(a))}};e.prototype.remove=function(a){if(a){if(Array.isArray(a))return a.map(this.remove,
this);if(a=this.find(a)){var b=this._components.indexOf(a);a.node.parentNode&&a.node.parentNode.removeChild(a.node);return this._components.splice(b,1)[0]}}};e.prototype.empty=function(a){var b=this;if(Array.isArray(a))return a.map(function(a){return b.empty(a)}).reduce(function(a,b){return a.concat(b)});a=a||"manual";if("manual"===a)return Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!d.contains(a,"esri-ui-corner")}).map(function(a){return b.remove(a)});if(this._isValidPosition(a))return Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,
this)};e.prototype.move=function(a,b){var d=this;Array.isArray(a)&&a.forEach(function(a){return d.move(a,b)});if(a){var f,e=t(a)||t(b);e&&(f=e.index,b=e.position,a=e.component||a);(!b||this._isValidPosition(b))&&(a=this.remove(a))&&this.add(a,{position:b,index:f})}};e.prototype.find=function(a){return a?a&&a.isInstanceOf&&a.isInstanceOf(b)?this._findByComponent(a):"string"===typeof a?this._findById(a):this._findByNode(a.domNode||a):null};e.prototype._getViewPadding=function(){return this.get("view.padding")||
u};e.prototype._attachContainers=function(a){r.place(this._manualContainer,a);r.place(this._innerContainer,a)};e.prototype._initContainers=function(){var a=r.create("div",{className:"esri-ui-inner-container esri-ui-corner-container"}),b=r.create("div",{className:"esri-ui-inner-container esri-ui-manual-container"}),d=r.create("div",{className:"esri-ui-top-left esri-ui-corner"},a),f=r.create("div",{className:"esri-ui-top-right esri-ui-corner"},a),e=r.create("div",{className:"esri-ui-bottom-left esri-ui-corner"},
a),c=r.create("div",{className:"esri-ui-bottom-right esri-ui-corner"},a);this._innerContainer=a;this._manualContainer=b;this._cornerNameToContainerLookup={"top-left":d,"top-right":f,"bottom-left":e,"bottom-right":c};this._positionNameToContainerLookup=m.mixin({manual:b},this._cornerNameToContainerLookup)};e.prototype._isValidPosition=function(a){return!!this._positionNameToContainerLookup[a]};e.prototype._place=function(a){var b=a.component,d=a.index;a=this._positionNameToContainerLookup[a.position||
"manual"];var f;-1<d?(f=Array.prototype.slice.call(a.children),0===d?this._placeComponent(b,a,"first"):d>=f.length?this._placeComponent(b,a,"last"):this._placeComponent(b,f[d],"before")):this._placeComponent(b,a,"last")};e.prototype._placeComponent=function(a,b,d){var f=a.widget;f&&!f._started&&"function"===typeof f.postMixInProperties&&"function"===typeof f.buildRendering&&"function"===typeof f.postCreate&&"function"===typeof f.startup&&a.widget.startup();r.place(a.node,b,d)};e.prototype._applyViewPadding=
function(){var a=this.container;a&&n.set(a,this._toPxPosition(this._getViewPadding()))};e.prototype._applyUIPadding=function(){this._innerContainer&&n.set(this._innerContainer,this._toPxPosition(this.padding))};e.prototype._toPxPosition=function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}};e.prototype._toPxUnit=function(a){return 0===a?0:a+"px"};e.prototype._findByComponent=function(a){var b=null,d;this._components.some(function(f){(d=
f===a)&&(b=f);return d});return b};e.prototype._findById=function(a){var b=null,d;this._components.some(function(f){(d=f.id===a)&&(b=f);return d});return b};e.prototype._findByNode=function(a){var b=null,d;this._components.some(function(f){(d=f.node===a)&&(b=f);return d});return b};return e}(a.declared(e));c([a.property()],h.prototype,"container",null);c([a.property()],h.prototype,"height",null);c([a.property()],h.prototype,"padding",void 0);c([a.cast("padding")],h.prototype,"castPadding",null);c([a.property()],
h.prototype,"view",void 0);c([a.property()],h.prototype,"width",null);return h=c([a.subclass("esri.views.ui.UI")],h)})},"esri/views/ui/Component":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor dojo/dom dojo/dom-class".split(" "),function(h,l,g,c,a,b,e,k){h=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.widget=null;return b}g(b,a);b.prototype.destroy=
function(){this.widget&&this.widget.destroy();this.node=null};Object.defineProperty(b.prototype,"id",{get:function(){return this._get("id")||this.get("node.id")},set:function(a){this._set("id",a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"node",{set:function(a){var b=this._get("node");a!==b&&(a&&k.add(a,"esri-component"),b&&k.remove(b,"esri-component"),this._set("node",a))},enumerable:!0,configurable:!0});b.prototype.castNode=function(a){if(!a)return this._set("widget",null),
null;if("string"===typeof a||a&&"nodeType"in a)return this._set("widget",null),e.byId(a);a&&"function"===typeof a.render&&!a.domNode&&(a.domNode=document.createElement("div"));this._set("widget",a);return a.domNode};return b}(a.declared(b));c([a.property()],h.prototype,"id",null);c([a.property()],h.prototype,"node",null);c([a.cast("node")],h.prototype,"castNode",null);c([a.property({readOnly:!0})],h.prototype,"widget",void 0);return h=c([a.subclass("esri.views.ui.Component")],h)})},"esri/widgets/Attribution":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./support/widget ./Widget ./Attribution/AttributionViewModel".split(" "),
function(h,l,g,c,a,b,e,k){h=function(a){function f(b){b=a.call(this)||this;b._isOpen=!1;b._attributionTextOverflowed=!1;b._prevSourceNodeHeight=0;b.view=null;b.viewModel=new k;return b}g(f,a);f.prototype.render=function(){var a=(f={},f["esri-attribution--open"]=this._isOpen,f);return b.tsx("div",{bind:this,class:"esri-attribution esri-widget",classes:a,onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),b.tsx("div",{class:"esri-attribution__powered-by"},"Powered by ",
b.tsx("a",{target:"_blank",href:"http://www.esri.com/",class:"esri-attribution__link"},"Esri")));var f};f.prototype._renderSourcesNode=function(){var a=this._isOpen,f=this._isInteractive(),e=f?0:-1,c=this.get("viewModel.attributionText"),a=(k={},k["esri-attribution__sources--open"]=a,k["esri-interactive"]=f,k);return b.tsx("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:"esri-attribution__sources",classes:a,innerHTML:c,role:f?"button":void 0,
tabIndex:e});var k};f.prototype._afterSourcesNodeCreate=function(a){this._prevSourceNodeHeight=a.clientWidth};f.prototype._afterSourcesNodeUpdate=function(a){var b=!1,d=a.clientHeight;a=a.scrollWidth>=a.clientWidth;var f=this._attributionTextOverflowed!==a;this._attributionTextOverflowed=a;f&&(b=!0);this._isOpen&&(a=d<this._prevSourceNodeHeight,this._prevSourceNodeHeight=d,a&&(this._isOpen=!1,b=!0));b&&this.scheduleRender()};f.prototype._toggleState=function(){this._isInteractive()&&(this._isOpen=
!this._isOpen)};f.prototype._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed};return f}(a.declared(e));c([a.aliasOf("viewModel.view")],h.prototype,"view",void 0);c([a.property({type:k}),b.renderable(["attributionText","state","view.size"])],h.prototype,"viewModel",void 0);c([b.accessibleHandler()],h.prototype,"_toggleState",null);return h=c([a.subclass("esri.widgets.Attribution")],h)})},"esri/widgets/Attribution/AttributionViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../geometry/support/webMercatorUtils ../../core/HandleRegistry ../../core/Accessor ../../core/lang ../../core/watchUtils ../../geometry/Extent".split(" "),
function(h,l,g,c,a,b,e,k,f,m,d){h=function(a){function c(b){b=a.call(this,b)||this;b._handles=new e;b._pendingAttributionItemsByLayerId={};b._attributionDataByLayerId={};b.itemDelimiter=" | ";b.items=[];b.view=null;b._updateAttributionItems=b._updateAttributionItems.bind(b);return b}g(c,a);c.prototype.initialize=function(){this._handles.add(m.init(this,"view",this._viewWatcher))};c.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(c.prototype,
"attributionText",{get:function(){return this.items.join(this.itemDelimiter)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});c.prototype._viewWatcher=function(a){var b=this,d=this._handles;d&&d.remove();a&&(d.add([a.allLayerViews.on("change",function(a){b._addLayerViews(a.added);0<a.removed.length&&(a.removed.forEach(function(a){d.remove(a.uid)}),b._updateAttributionItems())}),
m.init(a,"stationary",this._updateAttributionItems)]),this._addLayerViews(a.allLayerViews))};c.prototype._addLayerViews=function(a){var b=this;a.forEach(function(a){b._handles.has(a.uid)||b._handles.add(m.init(a,"suspended",b._updateAttributionItems),a.uid)})};c.prototype._updateAttributionItems=function(){var a=this,b=[];this._getActiveLayerViews().forEach(function(d){var f=d.layer;if(!f.hasAttributionData)d=f.get("copyright"),a._isUnique(b,d)&&b.push(d);else if(f&&f.tileInfo){var e=a._attributionDataByLayerId;
if(e[f.uid])d=a._getDynamicAttribution(e[f.uid],a.view,f),a._isUnique(b,d)&&b.push(d);else{var c=a._pendingAttributionItemsByLayerId;a._inProgress(c[f.uid])||(c[f.uid]=f.fetchAttributionData().then(function(b){b=a._createContributionIndex(b,a._isBingLayer(f));delete c[f.uid];e[f.uid]=b;a._updateAttributionItems()}))}}});this._itemsChanged(this.items,b)&&this._set("items",b)};c.prototype._itemsChanged=function(a,b){return a.length!==b.length||a.some(function(a,d){return a!==b[d]})};c.prototype._inProgress=
function(a){return a&&!a.isFulfilled()};c.prototype._getActiveLayerViews=function(){return this.get("view.allLayerViews").filter(function(a){return!a.suspended&&a.get("layer.attributionVisible")})};c.prototype._isUnique=function(a,b){return b&&-1===a.indexOf(b)};c.prototype._isBingLayer=function(a){return-1!==a.declaredClass.toLowerCase().indexOf("vetiledlayer")};c.prototype._createContributionIndex=function(a,e){a=a.contributors;var c={};if(!a)return c;a.forEach(function(a,k){var m=a.coverageAreas;
m&&m.forEach(function(m){var g=m.bbox,n=m.zoomMin-(e&&m.zoomMin?1:0),r=m.zoomMax-(e&&m.zoomMax?1:0);a={extent:b.geographicToWebMercator(new d({xmin:g[1],ymin:g[0],xmax:g[3],ymax:g[2]})),attribution:a.attribution||"",score:f.isDefined(m.score)?m.score:100,id:k};for(m=n;m<=r;m++)c[m]=c[m]||[],c[m].push(a)})});c.maxKey=Math.max.apply(null,Object.keys(c));return c};c.prototype._getDynamicAttribution=function(a,b,d){var e=b.extent;b=d.tileInfo.scaleToZoom(b.scale);b=Math.min(a.maxKey,Math.round(b));if(!e||
!f.isDefined(b)||-1>=b)return"";a=a[b];var c=e.center.clone().normalize(),k={};return a.filter(function(a){var b=!k[a.id]&&a.extent.contains(c);b&&(k[a.id]=!0);return b}).sort(function(a,b){return b.score-a.score||a.objectId-b.objectId}).map(function(a){return a.attribution}).join(", ")};return c}(a.declared(k));c([a.property({dependsOn:["items","itemDelimiter"],readOnly:!0})],h.prototype,"attributionText",null);c([a.property()],h.prototype,"itemDelimiter",void 0);c([a.property({readOnly:!0})],h.prototype,
"items",void 0);c([a.property({dependsOn:["view.ready"],readOnly:!0})],h.prototype,"state",null);c([a.property()],h.prototype,"view",void 0);return h=c([a.subclass("esri.widgets.Attribution.AttributionViewModel")],h)})},"esri/widgets/Compass":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./support/widget ./Widget ./Compass/CompassViewModel dojo/i18n!./Compass/nls/Compass".split(" "),function(h,l,g,c,a,
b,e,k,f){h=function(a){function d(b){b=a.call(this)||this;b.view=null;b.viewModel=new k;return b}g(d,a);d.prototype.reset=function(){};d.prototype.render=function(){var a=this.viewModel.orientation,d=this.viewModel.state,e="disabled"===d,c="compass"===("rotation"===d?"rotation":"compass"),d=(k={},k["esri-disabled"]=e,k["esri-interactive"]=!e,k),k=(m={},m["esri-icon-compass"]=c,m["esri-icon-dial"]=!c,m);return b.tsx("div",{bind:this,class:"esri-compass esri-widget-button esri-widget",classes:d,onclick:this._reset,
onkeydown:this._reset,role:"button",tabIndex:e?-1:0},b.tsx("span",{"aria-hidden":"true",class:"esri-compass__icon",classes:k,styles:this._toRotationTransform(a),title:f.reset}),b.tsx("span",{class:"esri-icon-font-fallback-text"},f.reset));var k,m};d.prototype._reset=function(){this.reset()};d.prototype._toRotationTransform=function(a){return{transform:"rotateZ("+a.z+"deg)"}};return d}(a.declared(e));c([a.aliasOf("viewModel.view")],h.prototype,"view",void 0);c([a.property({type:k}),b.renderable(["viewModel.orientation",
"viewModel.state"])],h.prototype,"viewModel",void 0);c([a.aliasOf("viewModel.reset")],h.prototype,"reset",null);c([b.accessibleHandler()],h.prototype,"_reset",null);return h=c([a.subclass("esri.widgets.Compass")],h)})},"esri/widgets/Compass/CompassViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/HandleRegistry ../../core/Accessor ../../core/watchUtils".split(" "),function(h,
l,g,c,a,b,e,k){h=function(a){function f(d){d=a.call(this,d)||this;d._handles=new b;d.orientation={x:0,y:0,z:0};d.view=null;d._updateForCamera=d._updateForCamera.bind(d);d._updateForRotation=d._updateForRotation.bind(d);d._updateRotationWatcher=d._updateRotationWatcher.bind(d);return d}g(f,a);f.prototype.initialize=function(){this._handles.add(k.init(this,"view",this._updateRotationWatcher))};f.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(f.prototype,
"canShowNorth",{get:function(){var a=this.get("view.spatialReference");return a&&(a.isWebMercator||4326===a.wkid)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"state",{get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"},enumerable:!0,configurable:!0});f.prototype.reset=function(){if(this.get("view.ready")){var a={};"2d"===this.view.type?a.rotation=0:a.heading=0;this.view.goTo(a)}};f.prototype._updateForRotation=function(a){void 0!==
a&&null!==a&&(this.orientation={z:a})};f.prototype._updateForCamera=function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})};f.prototype._updateRotationWatcher=function(a){this._handles.removeAll();a&&("2d"===a.type?this._handles.add(k.init(this,"view.rotation",this._updateForRotation)):this._handles.add(k.init(this,"view.camera",this._updateForCamera)))};return f}(a.declared(e));c([a.property({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],readOnly:!0})],h.prototype,
"canShowNorth",null);c([a.property()],h.prototype,"orientation",void 0);c([a.property({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],h.prototype,"state",null);c([a.property()],h.prototype,"view",void 0);return h=c([a.subclass("esri.widgets.CompassViewModel")],h)})},"esri/widgets/Zoom":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./support/widget ./Widget ./Zoom/IconButton ./Zoom/ZoomViewModel dojo/i18n!./Zoom/nls/Zoom".split(" "),
function(h,l,g,c,a,b,e,k,f,m){h=function(a){function d(b){b=a.call(this)||this;b.layout="vertical";b.view=null;b.viewModel=new f;return b}g(d,a);d.prototype.postInitialize=function(){this._zoomInButton=new k({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus",title:m.zoomIn});this._zoomOutButton=new k({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus",title:m.zoomOut})};d.prototype.render=function(){var a=this.viewModel,d=(f={},f["esri-zoom--horizontal"]="horizontal"===this.layout,
f);this._zoomInButton.enabled="ready"===a.state&&a.canZoomIn;this._zoomOutButton.enabled="ready"===a.state&&a.canZoomOut;return b.tsx("div",{class:"esri-zoom esri-widget",classes:d},this._zoomInButton.render(),this._zoomOutButton.render());var f};d.prototype.zoomIn=function(){};d.prototype.zoomOut=function(){};return d}(a.declared(e));c([a.property(),b.renderable()],h.prototype,"layout",void 0);c([a.aliasOf("viewModel.view"),b.renderable()],h.prototype,"view",void 0);c([a.property({type:f}),b.renderable(["viewModel.canZoomIn",
"viewModel.canZoomOut","viewModel.state"])],h.prototype,"viewModel",void 0);c([a.aliasOf("viewModel.zoomIn")],h.prototype,"zoomIn",null);c([a.aliasOf("viewModel.zoomOut")],h.prototype,"zoomOut",null);return h=c([a.subclass("esri.widgets.Zoom")],h)})},"esri/widgets/Zoom/IconButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../support/widget ../Widget".split(" "),function(h,l,g,c,a,b,e){h=function(a){function f(){var b=
null!==a&&a.apply(this,arguments)||this;b.enabled=!0;b.iconClass="";b.title="";return b}g(f,a);f.prototype.render=function(){var a=this.enabled?0:-1,d=(f={},f["esri-disabled"]=!this.enabled,f["esri-interactive"]=this.enabled,f),f=(e={},e[this.iconClass]=!!this.iconClass,e);return b.tsx("div",{bind:this,class:"esri-widget-button esri-widget",classes:d,onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:a,title:this.title},b.tsx("span",{"aria-hidden":"true",role:"presentation",
class:"esri-icon",classes:f}),b.tsx("span",{class:"esri-icon-font-fallback-text"},this.title));var f,e};f.prototype._triggerAction=function(){this.action.call(this)};return f}(a.declared(e));c([a.property()],h.prototype,"action",void 0);c([a.property(),b.renderable()],h.prototype,"enabled",void 0);c([a.property(),b.renderable()],h.prototype,"iconClass",void 0);c([a.property(),b.renderable()],h.prototype,"title",void 0);c([b.accessibleHandler()],h.prototype,"_triggerAction",null);return h=c([a.subclass("esri.widgets.IconButton")],
h)})},"esri/widgets/Zoom/ZoomViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor".split(" "),function(h,l,g,c,a,b){h=function(a){function b(b){b=a.call(this,b)||this;b.view=null;b.zoomIn=b.zoomIn.bind(b);b.zoomOut=b.zoomOut.bind(b);return b}g(b,a);b.prototype.destroy=function(){this.view=null};Object.defineProperty(b.prototype,"canZoomIn",{get:function(){if("2d"!==this.get("view.type"))return!0;
var a=this.get("view.scale"),b=this.get("view.constraints.effectiveMaxScale");return 0===b||a>b},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"canZoomOut",{get:function(){if("2d"!==this.get("view.type"))return!0;var a=this.get("view.scale"),b=this.get("view.constraints.effectiveMinScale");return 0===b||a<b},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});
b.prototype.zoomIn=function(){this.canZoomIn&&this._zoomToFactor(.5)};b.prototype.zoomOut=function(){this.canZoomOut&&this._zoomToFactor(2)};b.prototype._zoomToFactor=function(a){"ready"===this.state&&this.view.goTo({scale:this.get("view.scale")*a})};return b}(a.declared(b));c([a.property({dependsOn:["view.ready","view.scale"],readOnly:!0})],h.prototype,"canZoomIn",null);c([a.property({dependsOn:["view.ready","view.scale"],readOnly:!0})],h.prototype,"canZoomOut",null);c([a.property({dependsOn:["view.ready"],
readOnly:!0})],h.prototype,"state",null);c([a.property()],h.prototype,"view",void 0);return h=c([a.subclass("esri.widgets.Zoom.ZoomViewModel")],h)})},"esri/widgets/NavigationToggle":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./support/widget ./Widget ./NavigationToggle/NavigationToggleViewModel dojo/i18n!./NavigationToggle/nls/NavigationToggle".split(" "),function(h,l,g,c,a,b,e,k,f){h=function(a){function d(b){b=
a.call(this)||this;b.view=null;b.viewModel=new k;return b}g(d,a);Object.defineProperty(d.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});d.prototype.toggle=function(){};d.prototype.render=function(){var a="disabled"===this.get("viewModel.state"),d="pan"===this.get("viewModel.navigationMode"),e=(c={},c["esri-disabled"]=a,c),c=(k={},k["esri-navigation-toggle__button--active"]=d,k),d=(m={},m["esri-navigation-toggle__button--active"]=
!d,m);return b.tsx("div",{bind:this,class:"esri-navigation-toggle esri-widget",classes:e,onclick:this._toggle,onkeydown:this._toggle,tabIndex:a?-1:0,title:f.toggle},b.tsx("div",{class:b.join("esri-navigation-toggle__button esri-widget-button","esri-navigation-toggle__button--pan"),classes:c},b.tsx("span",{class:"esri-icon-pan"})),b.tsx("div",{class:b.join("esri-navigation-toggle__button esri-widget-button","esri-navigation-toggle__button--rotate"),classes:d},b.tsx("span",{class:"esri-icon-rotate"})));
var c,k,m};d.prototype._toggle=function(){this.toggle()};return d}(a.declared(e));c([a.property({value:"vertical"}),b.renderable()],h.prototype,"layout",null);c([a.aliasOf("viewModel.view"),b.renderable()],h.prototype,"view",void 0);c([a.property({type:k}),b.renderable(["viewModel.state","viewModel.navigationMode"])],h.prototype,"viewModel",void 0);c([a.aliasOf("viewModel.toggle")],h.prototype,"toggle",null);c([b.accessibleHandler()],h.prototype,"_toggle",null);return h=c([a.subclass("esri.widgets.NavigationToggle")],
h)})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/watchUtils ../../core/Accessor ../../core/HandleRegistry".split(" "),function(h,l,g,c,a,b,e,k){h=function(a){function f(b){b=a.call(this,b)||this;b._handles=new k;b.navigationMode="pan";b.view=null;b.toggle=b.toggle.bind(b);return b}g(f,a);f.prototype.initialize=function(){this._handles.add(b.when(this,
"view.inputManager",this._setNavigationMode.bind(this)))};f.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(f.prototype,"state",{get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"},enumerable:!0,configurable:!0});f.prototype.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};f.prototype._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction=
"pan"===this.navigationMode?"pan":"rotate"};return f}(a.declared(e));c([a.property({dependsOn:["view.ready"],readOnly:!0})],h.prototype,"state",null);c([a.property()],h.prototype,"navigationMode",void 0);c([a.property()],h.prototype,"view",void 0);return h=c([a.subclass("esri.widgets.NavigationToggleViewModel")],h)})},"esri/views/ui/2d/DefaultUI2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../DefaultUI dojo/_base/lang".split(" "),
function(h,l,g,c,a,b,e){h=function(a){function b(){return a.call(this)||this}g(b,a);b.prototype.getDefaults=function(){return e.mixin(this.inherited(arguments),{components:["attribution","zoom"]})};return b}(a.declared(b));return h=c([a.subclass("esri.views.ui.2d.DefaultUI2D")],h)})},"esri/views/2d/engine/Stage":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/promiseUtils ../../../core/Scheduler ../FrameBudget ./DOMContainer ./StageGL ./Container".split(" "),
function(h,l,g,c,a,b,e,k,f){function m(a){if(a instanceof k)return a;if(a instanceof f){var b=0;for(a=a.children;b<a.length;b++){var d=m(a[b]);if(d)return d}}return null}return function(d){function f(f){var e=d.call(this)||this;e.element=f;e._budget=new b;e._renderParameters={budget:e._budget,state:e.state,devicePixelRatio:window.devicePixelRatio,stationary:!1};e._renderRequested=!1;e._taskHandle=a.addFrameTask({render:function(){return e.renderFrame()}});e._stationary=!0;e.attached=!0;e._taskHandle.pause();
return e}g(f,d);f.prototype.destroy=function(){this.removeAllChildren();this.renderFrame();this._taskHandle.remove();this._taskHandle=null};Object.defineProperty(f.prototype,"state",{get:function(){return this._state},set:function(a){this._state=a;this.requestRender()},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"stationary",{get:function(){return this._stationary},set:function(a){this._stationary!==a&&(this._stationary=a,this.requestRender())},enumerable:!0,configurable:!0});
f.prototype.start=function(){this._taskHandle.resume()};f.prototype.stop=function(){this._taskHandle.isPaused()||this._taskHandle.pause()};f.prototype.requestRender=function(){this._renderRequested=!0;this._taskHandle&&this._taskHandle.isPaused()&&this._taskHandle.resume()};f.prototype.takeScreenshot=function(a){var b=m(this);return b?b.takeScreenshot(a):c.reject("Could not find an object capable of capturing screenshot!")};f.prototype.renderFrame=function(){this._renderRequested&&(this._renderRequested=
!1,this._renderParameters.state=this._state,this._renderParameters.stationary=this.stationary,this._renderParameters.devicePixelRatio=window.devicePixelRatio,this.processRender(this._renderParameters));this._renderRequested||this._taskHandle.pause()};return f}(e)})},"esri/views/2d/engine/DOMContainer":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./Container"],function(h,l,g,c){return function(a){function b(){return null!==a&&a.apply(this,arguments)||this}g(b,a);
b.prototype.createElement=function(){var a=document.createElement("div");a.setAttribute("class","esri-display-object");return a};b.prototype.setElement=function(a){this.element=a};b.prototype.doRender=function(b){var e=this.element.style;this.visible?(e.display="block",e.opacity=""+this.opacity,a.prototype.doRender.call(this,b)):e.display="none"};b.prototype.prepareChildrenRenderParameters=function(a){return a};b.prototype.attachChild=function(a,b){var f=a.element;f||(f=a.createElement(),a.setElement(f));
return a.attach(b)};b.prototype.detachChild=function(a,b){a.detach(b);this.element.removeChild(a.element);a.setElement(null)};b.prototype.renderChildren=function(b){for(var e=this.children,f=this.element.childNodes,c=0,d=e.length,g=0;g<d;g++)if(e[g].attached){var n=e[g].element;f[c]!==n&&(null!=f[c+1]?this.element.insertBefore(n,f[c]):this.element.appendChild(n));c+=1}a.prototype.renderChildren.call(this,b)};return b}(c)})},"esri/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper",
"./DisplayObject"],function(h,l,g,c){var a;(function(a){a[a.BEFORE=0]="BEFORE";a[a.ATTACHING=1]="ATTACHING";a[a.DETACHING=2]="DETACHING";a[a.RENDERING=3]="RENDERING";a[a.AFTER=4]="AFTER";a[a.DONE=5]="DONE"})(a||(a={}));return function(b){function e(){var e=null!==b&&b.apply(this,arguments)||this;e._childrenSet=new Set;e._childrenToAttach=[];e._childrenToDetach=[];e._renderPhase=a.DONE;e.children=[];return e}g(e,b);Object.defineProperty(e.prototype,"numChildren",{get:function(){return this.children.length},
enumerable:!0,configurable:!0});e.prototype.detach=function(a){var b=this.children;a=this.prepareChildrenRenderParameters(a);for(var e=b.length,d=0;d<e;d++){var c=b[d];c.attached&&(this.detachChild(c,a),c.attached=!1,c.parent=null)}};e.prototype.doRender=function(b){var f=this.prepareChildrenRenderParameters(b);this._renderPhase=a.BEFORE;this.beforeRenderChildren(b,f);this._renderPhase=a.ATTACHING;this.attachChildren(f)||this.requestRender();this._renderPhase=a.DETACHING;for(var e=this._childrenToDetach;0<
e.length;){var d=e.shift();this.detachChild(d,f);d.attached=!1;d.parent=null}this._renderPhase=a.RENDERING;this.renderChildren(f);this._renderPhase=a.AFTER;this.afterRenderChildren(b,f);this._renderPhase=a.DONE};e.prototype.addChild=function(a){return this.addChildAt(a,this.children.length)};e.prototype.addChildAt=function(b,f){void 0===f&&(f=this.numChildren);if(!b||this.contains(b))return b;var e=b.parent;e&&e!==this&&e.removeChild(b);f>=this.numChildren?this.children.push(b):this.children.splice(f,
0,b);this._childrenSet.add(b);f=this._childrenToDetach.indexOf(b);-1<f&&this._childrenToDetach.splice(f,1);this._childrenToAttach.push(b);this._renderPhase>=a.RENDERING&&this.requestRender();return b};e.prototype.contains=function(a){return this._childrenSet.has(a)};e.prototype.getChildIndex=function(a){return this.children.indexOf(a)};e.prototype.getChildAt=function(a){return 0>a||a>this.children.length?null:this.children[a]};e.prototype.removeAllChildren=function(){for(var a=this.numChildren;a--;)this.removeChildAt(0)};
e.prototype.removeChild=function(a){return this.contains(a)?this.removeChildAt(this.getChildIndex(a)):a};e.prototype.removeChildAt=function(b){if(0>b||b>=this.children.length)return null;b=this.children.splice(b,1)[0];this._childrenSet["delete"](b);if(b.attached)this._childrenToDetach.push(b),this._renderPhase>=a.RENDERING&&this.requestRender();else{var f=this._childrenToAttach.indexOf(b);-1<f&&this._childrenToAttach.splice(f,1)}return b};e.prototype.requestChildRender=function(b){b&&b.parent===this&&
this._renderPhase>=a.RENDERING&&this.requestRender()};e.prototype.setChildIndex=function(b,f){var e=this.getChildIndex(b);-1<e&&(this.children.splice(e,1),this.children.splice(f,0,b),this._renderPhase>=a.RENDERING&&this.requestRender())};e.prototype.sortChildren=function(b){this._renderPhase>a.RENDERING&&this.requestRender();return this.children.sort(b)};e.prototype.attachChildren=function(a){var b=this._childrenToAttach;if(0===b.length)return!0;for(var e=0===b.length;!e;)e=b.shift(),this.attachChild(e,
a)&&(e.attached=!0,e.parent=this),e=0===b.length;return 0===b.length};e.prototype.renderChildren=function(a){for(var b=this.children,e=b.length,d=0;d<e;d++){var c=b[d];c.attached&&this.renderChild(c,a)}};e.prototype.beforeRenderChildren=function(a,b){};e.prototype.attachChild=function(a,b){return a.attach(b)};e.prototype.detachChild=function(a,b){a.detach(b)};e.prototype.renderChild=function(a,b){a.processRender(b)};e.prototype.afterRenderChildren=function(a,b){};return e}(c)})},"esri/views/2d/engine/DisplayObject":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","./Evented"],function(h,l,g,c){return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b._renderRequestedCalled=!1;b._attached=!1;b._opacity=1;b.renderRequested=!1;b._visible=!0;return b}g(b,a);Object.defineProperty(b.prototype,"attached",{get:function(){return this._attached},set:function(a){this._attached!==a&&((this._attached=a)?this.hasEventListener("attach")&&this.emit("attach"):this.hasEventListener("detach")&&this.emit("detach"))},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"opacity",{get:function(){return this._opacity},set:function(a){this._opacity!==a&&(this._opacity=a,this.requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"visible",{get:function(){return this._visible},set:function(a){this._visible!==a&&(this._visible=a,this.requestRender())},enumerable:!0,configurable:!0});b.prototype.attach=function(a){return!0};b.prototype.detach=function(a){};b.prototype.processRender=
function(a){this._renderRequestedCalled=!1;this.doRender(a);this._renderRequestedCalled||(this.renderRequested=!1);this.hasEventListener("post-render")&&this.emit("post-render")};b.prototype.requestRender=function(){var a=this.renderRequested;this.renderRequested=this._renderRequestedCalled=!0;this.parent&&this.parent.requestChildRender(this);a!==this.renderRequested&&this.hasEventListener("will-render")&&this.emit("will-render")};b.prototype.dispose=function(){};return b}(c.Evented)})},"esri/views/2d/engine/Evented":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","dojo/aspect","dojo/on"],function(h,l,g,c,a){Object.defineProperty(l,"__esModule",{value:!0});h=function(){function b(){}b.prototype.on=function(a,b){return c.after(this,"on"+a,b,!0)};b.prototype.once=function(b,c){return a.once(this,b,c)};b.prototype.emit=function(b){a.emit(this,b,this)};b.prototype.hasEventListener=function(a){a="on"+a;return!(!this[a]||!this[a].after)};return b}();l.Evented=h;l.EventedMixin=function(b){return function(b){function e(){return null!==
b&&b.apply(this,arguments)||this}g(e,b);e.prototype.on=function(a,b){return c.after(this,"on"+a,b,!0)};e.prototype.once=function(b,e){return a.once(this,b,e)};e.prototype.emit=function(b,e){a.emit(this,b,e)};e.prototype.hasEventListener=function(a){a="on"+a;return!(!this[a]||!this[a].after)};return e}(b)}})},"esri/views/2d/engine/StageGL":function(){define("require exports ../../../core/tsSupport/extendsHelper ../libs/gl-matrix/common ../libs/gl-matrix/vec2 ../libs/gl-matrix/mat2d ./webgl/BitBlitRenderer ../../support/screenshotUtils ../../../core/promiseUtils ./Container ../../webgl/RenderingContext ../../webgl/FramebufferObject ../../webgl/webgl-utils ../../webgl/Program ../../webgl/VertexArrayObject ../../webgl/BufferObject ./webgl/glShaderSnippets".split(" "),
function(h,l,g,c,a,b,e,k,f,m,d,r,n,t,u,w,p){function q(a){return{budget:a.budget,state:a.state,devicePixelRatio:a.devicePixelRatio,stationary:a.stationary}}var x={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"};return function(m){function h(){var d=null!==m&&m.apply(this,arguments)||this;d._clipData=new Float32Array(8);d._upperLeft=a.create();d._upperRight=a.create();d._lowerLeft=a.create();d._lowerRight=a.create();d._mat2=b.create();d._clipRendererInitialized=!1;return d}g(h,m);h.prototype.createElement=
function(){var a=document.createElement("canvas");a.setAttribute("class","esri-display-object");return a};h.prototype.setElement=function(a){this.element=a};h.prototype.attach=function(a){this._resizeCanvas(a);var b=n.setupWebGL(this.element,{alpha:!0,antialias:!1,depth:!0,stencil:!0});this._renderingContext=new d(b[0]);this.attached=!0;this._cachedRenderParams=q(a);return m.prototype.attach.call(this,a)};h.prototype.detach=function(a){m.prototype.detach.call(this,a);this._renderingContext&&(this._renderingContext.dispose(),
this._renderingContext=null);this._cachedRenderParams=null};h.prototype.beforeRenderChildren=function(d,f){var e=d.state;if(e.spatialReference&&(e.spatialReference._isWrappable?e.spatialReference._isWrappable():e.spatialReference.isWrappable)){var k=e.width;f=e.height;var g=e.rotation,m=this._renderingContext,k=Math.round(k*d.devicePixelRatio);f=Math.round(f*d.devicePixelRatio);var n=c.toRadian(g),h=Math.abs(Math.cos(n)),t=Math.abs(Math.sin(n)),l=Math.round(e.worldScreenWidth);if(Math.round(k*h+f*
t)<=l)this._clipFrame=!1;else{this._clipFBO&&this._clipFBO.width===k&&this._clipFBO.height===f||(this._clipFBO=new r(m,{colorTarget:0,depthStencilTarget:3,width:k,height:f}));var p=.5*k,u=.5*f,e=1/k,w=1/f;d=.5*l*d.devicePixelRatio;var q=.5*(k*t+f*h),k=this._upperLeft,h=this._upperRight,t=this._lowerLeft,l=this._lowerRight;a.set(k,-d,-q);a.set(h,d,-q);a.set(t,-d,q);a.set(l,d,q);b.identity(this._mat2);b.translate(this._mat2,this._mat2,[p,u]);0!==g&&b.rotate(this._mat2,this._mat2,n);a.transformMat2d(k,
k,this._mat2);a.transformMat2d(h,h,this._mat2);a.transformMat2d(t,t,this._mat2);a.transformMat2d(l,l,this._mat2);g=this._clipData;g.set([2*t[0]*e-1,2*(f-t[1])*w-1,2*l[0]*e-1,2*(f-l[1])*w-1,2*k[0]*e-1,2*(f-k[1])*w-1,2*h[0]*e-1,2*(f-h[1])*w-1]);this._clipRendererInitialized||this._initializeClipRenderer(m);this._clipVBO.setData(g);this._boundFBO=m.getBoundFramebufferObject();m.bindFramebuffer(this._clipFBO);m.setDepthWriteEnabled(!0);m.setStencilWriteMask(255);m.setClearColor(0,0,0,0);m.setClearDepth(1);
m.setClearStencil(0);m.clear(m.gl.COLOR_BUFFER_BIT|m.gl.DEPTH_BUFFER_BIT|m.gl.STENCIL_BUFFER_BIT);m.setDepthWriteEnabled(!1);this._clipFrame=!0}}else this._clipFrame=!1};h.prototype.afterRenderChildren=function(a,b){this._clipFrame&&this._clipRendererInitialized&&(a=this._renderingContext,a.bindFramebuffer(this._boundFBO),this._boundFBO=null,a.bindVAO(this._clipVAO),a.bindProgram(this._clipStencilProgram),a.setDepthWriteEnabled(!1),a.setDepthTestEnabled(!1),a.setStencilTestEnabled(!0),a.setBlendingEnabled(!1),
a.setColorMask(!1,!1,!1,!1),a.setStencilOp(7680,7680,7681),a.setStencilWriteMask(255),a.setStencilFunction(519,1,255),a.drawElements(4,6,5123,0),a.bindVAO(),a.setColorMask(!0,!0,!0,!0),a.setBlendingEnabled(!0),a.setStencilFunction(514,1,255),this._blitRenderer.render(a,this._clipFBO.colorTexture,9728,1),a.setStencilTestEnabled(!1))};h.prototype.doRender=function(a){var b=this.element.style;this.visible?(b.display="block",b.opacity=""+this.opacity,this._resizeCanvas(a),m.prototype.doRender.call(this,
a),this._cachedRenderParams=q(a)):b.display="none"};h.prototype.takeScreenshot=function(a){void 0===a&&(a={});var b=a.pixelRatio||1;this._cachedRenderParams.devicePixelRatio=b;var d=Math.round(b*this._cachedRenderParams.state.width),e=Math.round(b*this._cachedRenderParams.state.height),c=0,g=0,m=d,n=e,h=d,t=e;if(h=a.area)c=Math.round(b*h.x),g=Math.round(b*h.y),m=Math.round(b*h.width),n=Math.round(b*h.height);void 0!==a.width&&void 0!==a.height?(h=a.width/a.height,n*h<m?(h*=n,c+=Math.floor((m-h)/2),
m=Math.floor(h)):(h=m/h,g+=Math.floor((n-h)/2),n=Math.floor(h)),h=a.width,t=a.height):(h=m,t=n);b=document.createElement("canvas");b.width=h;b.height=t;var l=b.getContext("2d"),p=new Uint8Array(m*n*4),u=this._renderingContext,w=r.create(u,{colorTarget:1,depthStencilTarget:3,width:d,height:e});u.bindFramebuffer(w);u.setViewport(0,0,d,e);this._cachedRenderParams.budget&&this._cachedRenderParams.budget.reset(Number.MAX_VALUE);var q=this._cachedRenderParams,A=this._renderingContext.gl;this._renderingContext.setClearColor(0,
0,0,0);this._renderingContext.setClearDepth(1);this._renderingContext.setClearStencil(0);this._renderingContext.clear(A.COLOR_BUFFER_BIT|A.DEPTH_BUFFER_BIT|A.STENCIL_BUFFER_BIT);q.context=this._renderingContext;this.beforeRenderChildren(q,q);if(void 0!==a.rotation&&null!==a.rotation){var A=q.state,z=A.clone();z.viewpoint.rotation=a.rotation;q.state=z;this.renderChildren(q);q.state=A}else this.renderChildren(q);this.afterRenderChildren(q,q);w.readPixels(c,e-(g+n),m,n,6408,5121,p);u.bindFramebuffer();
u=l.getImageData(0,0,h,t);if(0!==c||0!==g||m!==d||n!==e||h!==d||t!==e)k.resampleHermite(p,m,n,u.data,h,t,!0);else{g=n-1;n=0;w=4*m;for(z=A=c=e=d=m=q=void 0;n<g;){A=n*w;z=g*w;for(q=0;q<w;q+=4)m=p[A+q],d=p[A+q+1],e=p[A+q+2],c=p[A+q+3],p[A+q]=p[z+q],p[A+q+1]=p[z+q+1],p[A+q+2]=p[z+q+2],p[A+q+3]=p[z+q+3],p[z+q]=m,p[z+q+1]=d,p[z+q+2]=e,p[z+q+3]=c;n++;g--}m=u.data;d=p.length;for(g=0;g<d;g++)m[g]=p[g]}p=u.data;n=p.length;for(g=0;g<n;g+=4)c=p[g+3],0<c&&(e=c/255,m=Math.floor(p[g+0]/e),d=Math.floor(p[g+1]/e),
e=Math.floor(p[g+2]/e),p[g+0]=255>=m?m:255,p[g+1]=255>=d?d:255,p[g+2]=255>=e?e:255);l.putImageData(u,0,0);l=x[a.format?a.format.toLowerCase():"png"];p=1;void 0!==a.quality&&(p=a.quality/100);a=b.toDataURL(l,p);return f.resolve({dataURL:a,x:0,y:0,width:h,height:t})};h.prototype.prepareChildrenRenderParameters=function(a){if(!this.attached||!this._renderingContext)return null;a=q(a);var b=this._renderingContext,d=b.gl;b.setDepthWriteEnabled(!0);b.setStencilWriteMask(255);b.setClearColor(0,0,0,0);b.setClearDepth(1);
b.setClearStencil(0);b.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT|d.STENCIL_BUFFER_BIT);b.setViewport(0,0,this.element.width,this.element.height);b.setDepthWriteEnabled(!1);a.context=b;return a};h.prototype.attachChild=function(a,b){return a.attach(b)};h.prototype.detachChild=function(a,b){return a.detach(b)};h.prototype.renderChild=function(a,b){return a.processRender(b)};h.prototype._resizeCanvas=function(a){var b=this.element,d=b.style,f=a.state,e=a.devicePixelRatio;a=Math.round(f.width*e);e=
Math.round(f.height*e);if(b.width!==a||b.height!==e)b.width=a,b.height=e;d.width=f.width+"px";d.height=f.height+"px"};h.prototype._initializeClipRenderer=function(a){if(this._clipRendererInitialized)return!0;this._blitRenderer=new e;var b={a_pos:0},d=new t(a,p.stencilVS,p.stencilFS,b);if(!d)return!1;var f=w.createVertex(a,35040,32),c=new Uint16Array([0,1,2,2,1,3]),c=w.createIndex(a,35044,c);a=new u(a,b,{geometry:[{name:"a_pos",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},{geometry:f},
c);this._clipStencilProgram=d;this._clipVBO=f;this._clipVAO=a;return this._clipRendererInitialized=!0};return h}(m)})},"esri/views/2d/engine/webgl/BitBlitRenderer":function(){define("require exports ../../../webgl/Program ../../../webgl/VertexArrayObject ../../../webgl/BufferObject ./glShaderSnippets".split(" "),function(h,l,g,c,a,b){return function(){function e(){this._initialized=!1}e.prototype.render=function(a,b,e,d){a&&b&&(this._initialized||this._initialize(a),a.setBlendFunctionSeparate(1,771,
1,771),a.bindVAO(this._vertexArrayObject),a.bindProgram(this._program),b.setSamplingMode(e),a.bindTexture(b,0),this._program.setUniform1i("u_tex",0),this._program.setUniform1f("u_opacity",d),a.drawArrays(5,0,4),a.bindVAO())};e.prototype._initialize=function(e){if(this._initialized)return!0;var f={a_pos:0,a_tex:1},k=new g(e,b.bitblitVS,b.bitblitFS,f);if(!k)return!1;var d=new Int8Array(16);d[0]=-1;d[1]=-1;d[2]=0;d[3]=0;d[4]=1;d[5]=-1;d[6]=1;d[7]=0;d[8]=-1;d[9]=1;d[10]=0;d[11]=1;d[12]=1;d[13]=1;d[14]=
1;d[15]=1;e=new c(e,f,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,stride:4,normalized:!1,divisor:0}]},{geometry:a.createVertex(e,35044,d)});this._program=k;this._vertexArrayObject=e;return this._initialized=!0};return e}()})},"esri/views/webgl/Program":function(){define(["require","exports","dojo/has"],function(h,l,g){h=function(){function c(a,b,e,k,f){void 0===f&&(f={});this._glName=this._context=null;this._locations=
{};this._id=void 0;this._initialized=!1;this._fShader=this._vShader=null;this._defines={};this._nameToUniformLocation={};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform2={};this._nameToUniform3={};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4={};a||console.error("RenderingContext isn't initialized!");0===b.length&&console.error("Shaders source should not be empty!");this._context=a;this._vertexShaderSource=b;this._fragmentShaderSource=e;
if(Array.isArray(f))for(a=0;a<f.length;a++)this._defines[f[a]]="1";else this._defines=f;this._id=c._nextId++;this._locations=k}Object.defineProperty(c.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});c.prototype.getDefine=function(a){return this._defines[a]};
c.prototype.dispose=function(){if(this._context){var a=this._context.gl;this._vShader&&(a.deleteShader(this._vShader),this._vShader=null);this._fShader&&(a.deleteShader(this._fShader),this._fShader=null);this._glName&&(a.deleteProgram(this._glName),this._glName=null);this._context=null}};c.prototype.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633);this._fShader=this._loadShader(35632);this._vShader&&this._fShader||console.error("Error loading shaders!");var a=this._context.gl,
b=a.createProgram();a.attachShader(b,this._vShader);a.attachShader(b,this._fShader);for(var e in this._locations)a.bindAttribLocation(b,this._locations[e],e);a.linkProgram(b);a.getProgramParameter(b,a.LINK_STATUS)||console.error("Could not initialize shader\nVALIDATE_STATUS: "+a.getProgramParameter(b,a.VALIDATE_STATUS)+", gl error ["+a.getError()+"]infoLog: "+a.getProgramInfoLog(b));this._glName=b;this._initialized=!0}};c.prototype.getUniformLocation=function(a){this.initialize();void 0===this._nameToUniformLocation[a]&&
(this._nameToUniformLocation[a]=this._context.gl.getUniformLocation(this._glName,a));return this._nameToUniformLocation[a]};c.prototype.hasUniform=function(a){return null!==this.getUniformLocation(a)};c.prototype.getAttribLocation=function(a){this.initialize();void 0===this._nameToAttribLocation[a]&&(this._nameToAttribLocation[a]=this._context.gl.getAttribLocation(this._glName,a));return this._nameToAttribLocation[a]};c.prototype.setUniform1i=function(a,b){var e=this._nameToUniform1[a];if(void 0===
e||b!==e)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(a),b),this._nameToUniform1[a]=b};c.prototype.setUniform1f=function(a,b){var e=this._nameToUniform1[a];if(void 0===e||b!==e)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(a),b),this._nameToUniform1[a]=b};c.prototype.setUniform1fv=function(a,b){var e=this._nameToUniform2[a];void 0!==e&&c._arraysEqual(b,e)||(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(a),
b),void 0===e?this._nameToUniform2[a]=new Float32Array(b):e.set(b))};c.prototype.setUniform2f=function(a,b,e){var c=this._nameToUniform2[a];if(void 0===c||b!==c[0]||e!==c[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(a),b,e),void 0===c?this._nameToUniform2[a]=new Float32Array([b,e]):(c[0]=b,c[1]=e)};c.prototype.setUniform2fv=function(a,b){var e=this._nameToUniform2[a];void 0!==e&&c._arraysEqual(b,e)||(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(a),
b),void 0===e?this._nameToUniform2[a]=new Float32Array(b):e.set(b))};c.prototype.setUniform3f=function(a,b,e,c){var f=this._nameToUniform3[a];if(void 0===f||b!==f[0]||e!==f[1]||c!==f[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(a),b,e,c),void 0===f?this._nameToUniform3[a]=new Float32Array([b,e,c]):(f[0]=b,f[1]=e,f[2]=c)};c.prototype.setUniform3fv=function(a,b){var e=this._nameToUniform3[a];void 0!==e&&c._arraysEqual(b,e)||(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(a),
b),void 0===e?this._nameToUniform3[a]=new Float32Array(b):e.set(b))};c.prototype.setUniform4f=function(a,b,e,c,f){var k=this._nameToUniform4[a];if(void 0===k||b!==k[0]||e!==k[1]||c!==k[2]||f!==k[3])this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(a),b,e,c,f),void 0===k?this._nameToUniform4[a]=new Float32Array([b,e,c,f]):(k[0]=b,k[1]=e,k[2]=c,k[3]=f)};c.prototype.setUniform4fv=function(a,b){var e=this._nameToUniform4[a];void 0!==e&&c._arraysEqual(b,e)||(this._context.bindProgram(this),
this._context.gl.uniform4fv(this.getUniformLocation(a),b),void 0===e?this._nameToUniform4[a]=new Float32Array(b):e.set(b))};c.prototype.setUniformMatrix3fv=function(a,b,e){void 0===e&&(e=!1);var k=this._nameToUniformMatrix3[a];void 0!==k&&(9===k.length?c._matrix3Equal(k,b):c._arraysEqual(b,k))||(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(a),e,b),void 0===k?this._nameToUniformMatrix3[a]=new Float32Array(b):k.set(b))};c.prototype.setUniformMatrix4fv=function(a,
b,e){void 0===e&&(e=!1);var k=this._nameToUniformMatrix4[a];void 0!==k&&(16===k.length?c._matrix4Equal(k,b):c._arraysEqual(b,k))||(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(a),e,b),void 0===k?this._nameToUniformMatrix4[a]=new Float32Array(b):k.set(b))};c._padToThree=function(a){var b=a.toString();1E3>a&&(b=("  "+a).slice(-3));return b};c.prototype._addLineNumbers=function(a){var b=2;return a.replace(/\n/g,function(){return"\n"+c._padToThree(b++)+":"})};
c.prototype._loadShader=function(a){var b=35633===a?this._vertexShaderSource:this._fragmentShaderSource,e="",c;for(c in this._defines)e+="#define "+c+" "+this._defines[c]+"\n";b=e+b;e=this._context.gl;a=e.createShader(a);e.shaderSource(a,b);e.compileShader(a);e.getShaderParameter(a,e.COMPILE_STATUS)||(console.error(e.getShaderInfoLog(a)),console.error(this._addLineNumbers(b)));return a};c._matrix4Equal=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&
a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};c._matrix3Equal=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]};c._arraysEqual=function(a,b){if(a.length!==b.length)return!1;for(var e=0;e<a.length;++e)if(a[e]!==b[e])return!1;return!0};return c}();h._nextId=0;return h})},"esri/views/webgl/VertexArrayObject":function(){define(["require",
"exports"],function(h,l){h=function(){function g(c,a,b,e,k){this._locations=this._layout=this._glName=this._context=null;this._indexBuffer=this._buffers=void 0;this._initialized=!1;this._context=c;this._layout=b;this._buffers=e;this._locations=a;k&&(this._indexBuffer=k);this._id=g._nextId++}Object.defineProperty(g.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});
Object.defineProperty(g.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});g.prototype.dispose=function(c){void 0===
c&&(c=!0);if(this._context){var a=this._context.extensions.vao;a&&this._glName&&(a.deleteVertexArrayOES(this._glName),this._glName=null);this._context.getBoundVAO()===this&&this._context.bindVAO(null);if(c){for(var b in this._buffers)this._buffers[b].dispose(),delete this._buffers[b];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}this._context=null}};g.prototype.initialize=function(){if(!this._initialized){var c=this._context.extensions.vao;if(c){var a=c.createVertexArrayOES();
c.bindVertexArrayOES(a);this._bindLayout();c.bindVertexArrayOES(null);this._glName=a}this._initialized=!0}};g.prototype.bind=function(){this.initialize();var c=this._context.extensions.vao;c?c.bindVertexArrayOES(this.glName):(this._context.bindVAO(null),this._bindLayout())};g.prototype._bindLayout=function(){var c=this._buffers,a=this._context.extensions.vao,b=this._layout,e=this._indexBuffer;c||console.error("Vertex buffer dictionary is empty!");var k=this._context.gl,f,g,d=0,h;for(h in c)for((f=
c[h])||console.error("Vertex buffer is uninitialized!"),(g=b[h])||console.error("Vertex element descriptor is empty!"),this._context.bindBuffer(f),d=0;d<g.length;++d){f=g[d];var n=this._locations[f.name],t=f.baseInstance?f.baseInstance*f.stride:0;void 0===n&&console.error("There is no location for vertex attribute '"+f.name+"' defined.");f.baseInstance&&!f.divisor&&console.error("Vertex attribute '"+f.name+"' uses baseInstanceOffset without divisor.");if(4>=f.count){if(k.enableVertexAttribArray(n),
k.vertexAttribPointer(n,f.count,f.type,f.normalized,f.stride,f.offset+t),f.divisor&&0<f.divisor){var l=this._context.extensions.angleInstancedArrays;l&&l.vertexAttribDivisorANGLE(n,f.divisor)}}else if(16===f.count&&5126===f.type)for(var w=0;4>w;w++)k.enableVertexAttribArray(n+w),k.vertexAttribPointer(n+w,4,f.type,f.normalized,f.stride,f.offset+16*w+t),f.divisor&&0<f.divisor&&(l=this._context.extensions.angleInstancedArrays)&&l.vertexAttribDivisorANGLE(n+w,f.divisor);else console.error("Unsupported vertex attribute element count: "+
f.count)}e&&(a?k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,e.glName):this._context.bindBuffer(e))};g.prototype.unbind=function(){this.initialize();var c=this._context.extensions.vao;c?c.bindVertexArrayOES(null):this._unbindLayout()};g.prototype._unbindLayout=function(){var c=this._buffers,a=this._layout,b=this._locations,e=this._context;c||console.error("Vertex buffer dictionary is empty!");var k=e.gl,f,g,d,h=0,n=0,t;for(t in c){(f=c[t])||console.error("Vertex buffer is uninitialized!");g=a[t];h=0;for(n=
g.length;h<n;++h)d=g[h],k.disableVertexAttribArray(b[d.name]);e.unbindBuffer(f.bufferType)}(c=this._indexBuffer)&&e.unbindBuffer(c.bufferType)};return g}();h._nextId=0;return h})},"esri/views/webgl/BufferObject":function(){define(["require","exports"],function(h,l){h=function(){function g(c,a,b,e){this._glName=this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=void 0;this._context=c;this._bufferType=a;this._usage=b;this._id=g._nextId++;this._glName=this._context.gl.createBuffer();
e&&this.setData(e)}g.createIndex=function(c,a,b){return new g(c,34963,a,b)};g.createVertex=function(c,a,b){return new g(c,34962,a,b)};Object.defineProperty(g.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"usage",{get:function(){return this._usage},
enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"indexType",{get:function(){return this._indexType},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"byteSize",{get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0});g.prototype.dispose=function(){this._context&&
(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context=null)};g.prototype.setData=function(c){if(c){if("number"===typeof c)0>c&&console.error("Buffer size cannot be negative!"),this._size=c;else{var a=c.byteLength;c instanceof Uint16Array&&(a/=2,this._indexType=5123);c instanceof Uint32Array&&(a/=4,this._indexType=5125);this._size=a}a=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,
c,this._usage);this._context.bindVAO(a)}};g.prototype.setSubData=function(c,a,b,e){void 0===a&&(a=0);void 0===b&&(b=0);if(c){(0>a||a>=this._size)&&console.error("offset is out of range!");var k=a,f=b,g=e,d=c.byteLength;c instanceof Uint16Array&&(d/=2,k*=2,f*=2,g*=2);c instanceof Uint32Array&&(d/=4,k*=4,f*=4,g*=2);void 0===e&&(e=d-1);b>=e&&console.error("end must be bigger than start!");a+b-e>this._size&&console.error("An attempt to write beyond the end of the buffer!");a=this._context.getBoundVAO();
this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferSubData(this._bufferType,k,(c instanceof ArrayBuffer?c:c.buffer).slice(f,g));this._context.bindVAO(a)}};return g}();h._nextId=0;return h})},"esri/views/2d/engine/webgl/glShaderSnippets":function(){define("require exports ../../../webgl/ShaderSnippets dojo/text!./Shaders.xml dojo/text!./bitblit.vs.glsl dojo/text!./bitblit.fs.glsl dojo/text!./stencil.vs.glsl dojo/text!./stencil.fs.glsl".split(" "),function(h,l,g,c,a,b,
e,k){function f(a,b){m+='\x3csnippet name\x3d"'+a+'"\x3e\x3c![CDATA[';m+=b;m+="]]\x3e\x3c/snippet\x3e"}var m="",m=m+'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e',m=m+"\x3csnippets\x3e";f("bitblitVS",a);f("bitblitFS",b);f("stencilVS",e);f("stencilFS",k);m+="\x3c/snippets\x3e";h=new g;g.parse(m,h);g.parse(c,h);return h})},"esri/views/webgl/ShaderSnippets":function(){define(["require","exports","dojox/xml/parser"],function(h,l,g){return function(){function c(a){if(a)for(var b in a)this[b]=a[b]}
c.parse=function(a,b){a=g.parse(a).getElementsByTagName("snippet");for(var e=/\$[a-zA-Z][a-zA-Z0-9]*(?:\([^\(\)]*\))?[ \t]*/,c=/[\$\s]+/g,f=/\(([^\(\)]*)\)/,m=0;m<a.length;m++){for(var d=a[m].getAttribute("name"),h=a[m].textContent,n=void 0;null!==(n=h.match(e));){var t=n[0].replace(c,""),l=t.match(f),w=void 0;l&&(w=l[1].split(",").map(function(a){return a.trim()}));t=t.replace(f,"");w=b._instantiate(t,w);h=h.replace(n[0],w)}b[d]=h}};c.prototype._instantiate=function(a,b){a=this[a];b||(b=[]);for(var e;e=
a.match(/\$(\d+)/);){var c=parseInt(e[1],10);a=a.replace(e[0],b[c])}return a};return c}()})},"dojox/xml/parser":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(h){h.getObject("xml.parser",!0,dojox);dojox.xml.parser.parse=function(l,g){var c=h.doc,a;g=g||"text/xml";if(l&&h.trim(l)&&"DOMParser"in h.global){a=(new DOMParser).parseFromString(l,g);l=a.documentElement;if("parsererror"==l.nodeName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"==
l.namespaceURI){if(c=l.getElementsByTagNameNS("http://www.mozilla.org/newlayout/xml/parsererror.xml","sourcetext")[0])c=c.firstChild.data;throw Error("Error parsing text "+l.firstChild.data+" \n"+c);}return a}if("ActiveXObject"in h.global){c=function(a){return"MSXML"+a+".DOMDocument"};c=["Microsoft.XMLDOM",c(6),c(4),c(3),c(2)];h.some(c,function(b){try{a=new ActiveXObject(b)}catch(k){return!1}return!0});if(l&&a&&(a.async=!1,a.loadXML(l),l=a.parseError,0!==l.errorCode))throw Error("Line: "+l.line+"\nCol: "+
l.linepos+"\nReason: "+l.reason+"\nError Code: "+l.errorCode+"\nSource: "+l.srcText);if(a)return a}else if(c.implementation&&c.implementation.createDocument){if(l&&h.trim(l)&&c.createElement){g=c.createElement("xml");g.innerHTML=l;var b=c.implementation.createDocument("foo","",null);h.forEach(g.childNodes,function(a){b.importNode(a,!0)});return b}return c.implementation.createDocument("","",null)}return null};dojox.xml.parser.textContent=function(l,g){if(1<arguments.length)return dojox.xml.parser.replaceChildren(l,
(l.ownerDocument||h.doc).createTextNode(g)),g;if(void 0!==l.textContent)return l.textContent;var c="";l&&h.forEach(l.childNodes,function(a){switch(a.nodeType){case 1:case 5:c+=dojox.xml.parser.textContent(a);break;case 3:case 2:case 4:c+=a.nodeValue}});return c};dojox.xml.parser.replaceChildren=function(l,g){var c=[];h.isIE&&h.forEach(l.childNodes,function(a){c.push(a)});dojox.xml.parser.removeChildren(l);h.forEach(c,h.destroy);h.isArray(g)?h.forEach(g,function(a){l.appendChild(a)}):l.appendChild(g)};
dojox.xml.parser.removeChildren=function(h){for(var g=h.childNodes.length;h.hasChildNodes();)h.removeChild(h.firstChild);return g};dojox.xml.parser.innerXML=function(h){return h.innerXML?h.innerXML:h.xml?h.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(h):null};return dojox.xml.parser})},"esri/views/support/screenshotUtils":function(){define(["require","exports","dojo/_base/lang"],function(h,l,g){Object.defineProperty(l,"__esModule",{value:!0});l.adjustScreenshotSettings=
function(c,a){c=g.mixin({format:"png",quality:100},c||{});var b,e;c.includePadding?(b=a.width,e=a.height):(b=a.width-a.padding.left-a.padding.right,e=a.height-a.padding.top-a.padding.bottom);var k=b/e;void 0!==c.width&&void 0===c.height?c.height=c.width/k:void 0!==c.height&&void 0===c.width&&(c.width=k*c.height);void 0!==c.height&&(c.height=Math.floor(c.height));void 0!==c.width&&(c.width=Math.floor(c.width));c.area||c.includePadding||(c.area={x:a.padding.left,y:a.padding.top,width:b,height:e});return c};
l.resampleHermite=function(c,a,b,e,k,f,g){void 0===g&&(g=!0);var d=a/k;b/=f;for(var m=Math.ceil(d/2),n=Math.ceil(b/2),h=0;h<f;h++)for(var l=0;l<k;l++){for(var w=4*(l+(g?f-h-1:h)*k),p=0,q=0,x=0,A=0,C=0,z=0,B=0,D=(h+.5)*b,H=Math.floor(h*b);H<(h+1)*b;H++)for(var y=Math.abs(D-(H+.5))/n,v=(l+.5)*d,y=y*y,F=Math.floor(l*d);F<(l+1)*d;F++){var E=Math.abs(v-(F+.5))/m,p=Math.sqrt(y+E*E);-1<=p&&1>=p&&(p=2*p*p*p-3*p*p+1,0<p&&(E=4*(F+H*a),B+=p*c[E+3],x+=p,255>c[E+3]&&(p=p*c[E+3]/250),A+=p*c[E],C+=p*c[E+1],z+=p*
c[E+2],q+=p))}e[w]=A/q;e[w+1]=C/q;e[w+2]=z/q;e[w+3]=B/x}}})},"esri/views/webgl/RenderingContext":function(){define(["require","exports","./enums","./Extensions"],function(h,l,g,c){h=function(){function a(a,e){this.gl=null;this._extensions=void 0;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=!1;
this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,
zPass:7680};this._lineWidth=1;this._clearColor={r:0,g:0,b:0,a:0};this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap={};this.gl=a;this._extensions=new c(a,e);e=a.getParameter(a.VIEWPORT);this._viewport={x:e[0],y:e[1],width:e[2],height:e[3]};e=this.extensions.textureFilterAnisotropic;this._parameters={versionString:a.getParameter(a.VERSION),maxVertexTextureImageUnits:a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
maxVertexAttributes:a.getParameter(a.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:e?a.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT):void 0,maxTextureImageUnits:a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS)};this.enforceState()}Object.defineProperty(a.prototype,"extensions",{get:function(){return this._extensions},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"contextAttributes",{get:function(){return this.gl.getContextAttributes()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"parameters",{get:function(){return this._parameters},enumerable:!0,configurable:!0});a.prototype.dispose=function(){this.bindVAO(null);this.unbindBuffer(34962);this.unbindBuffer(34963);this._textureUnitMap={};this.gl=null};a.prototype.setBlendingEnabled=function(a){this._blendEnabled!==a&&(!0===a?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=a)};a.prototype.setBlendColor=function(a,e,c,f){if(a!==this._blendColorState.r||e!==this._blendColorState.g||c!==this._blendColorState.b||
f!==this._blendColorState.a)this.gl.blendColor(a,e,c,f),this._blendColorState.r=a,this._blendColorState.g=e,this._blendColorState.b=c,this._blendColorState.a=f};a.prototype.setBlendFunction=function(a,e){if(a!==this._blendFunctionState.srcRGB||e!==this._blendFunctionState.dstRGB)this.gl.blendFunc(a,e),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=a,this._blendFunctionState.dstRGB=e,this._blendFunctionState.dstAlpha=e};a.prototype.setBlendFunctionSeparate=function(a,e,c,f){if(this._blendFunctionState.srcRGB!==
a||this._blendFunctionState.srcAlpha!==c||this._blendFunctionState.dstRGB!==e||this._blendFunctionState.dstAlpha!==f)this.gl.blendFuncSeparate(a,e,c,f),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=c,this._blendFunctionState.dstRGB=e,this._blendFunctionState.dstAlpha=f};a.prototype.setBlendEquation=function(a){this._blendEquationState.mode!==a&&(this.gl.blendEquation(a),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=a)};a.prototype.setBlendEquationSeparate=
function(a,e){if(this._blendEquationState.mode!==a||this._blendEquationState.modeAlpha!==e)this.gl.blendEquationSeparate(a,e),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=e};a.prototype.setColorMask=function(a,e,c,f){if(this._colorMaskState.r!==a||this._colorMaskState.g!==e||this._colorMaskState.b!==c||this._colorMaskState.a!==f)this.gl.colorMask(a,e,c,f),this._colorMaskState.r=a,this._colorMaskState.g=e,this._colorMaskState.b=c,this._colorMaskState.a=f};a.prototype.setClearColor=
function(a,e,c,f){if(this._clearColor.r!==a||this._clearColor.g!==e||this._clearColor.b!==c||this._clearColor.a!==f)this.gl.clearColor(a,e,c,f),this._clearColor.r=a,this._clearColor.g=e,this._clearColor.b=c,this._clearColor.a=f};a.prototype.setFaceCullingEnabled=function(a){this._polygonCullingEnabled!==a&&(!0===a?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=a)};a.prototype.setPolygonOffsetFillEnabled=function(a){this._polygonOffsetFillEnabled!==
a&&(!0===a?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=a)};a.prototype.setPolygonOffset=function(a,e){if(this._polygonOffset[0]!==a||this._polygonOffset[1]!==e)this._polygonOffset[0]=a,this._polygonOffset[1]=e,this.gl.polygonOffset(a,e)};a.prototype.setCullFace=function(a){this._cullFace!==a&&(this.gl.cullFace(a),this._cullFace=a)};a.prototype.setFrontFace=function(a){this._frontFace!==a&&(this.gl.frontFace(a),this._frontFace=
a)};a.prototype.setScissorTestEnabled=function(a){this._scissorTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=a)};a.prototype.setScissorRect=function(a,e,c,f){if(this._scissorRect.x!==a||this._scissorRect.y!==e||this._scissorRect.width!==c||this._scissorRect.height!==f)this.gl.scissor(a,e,c,f),this._scissorRect.x=a,this._scissorRect.y=e,this._scissorRect.width=c,this._scissorRect.height=f};a.prototype.setDepthTestEnabled=
function(a){this._depthTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=a)};a.prototype.setClearDepth=function(a){this._clearDepth!==a&&(this.gl.clearDepth(a),this._clearDepth=a)};a.prototype.setDepthFunction=function(a){this._depthFunction!==a&&(this.gl.depthFunc(a),this._depthFunction=a)};a.prototype.setDepthWriteEnabled=function(a){this._depthWriteEnabled!==a&&(this.gl.depthMask(a),this._depthWriteEnabled=a)};a.prototype.setDepthRange=
function(a,e){if(this._depthRange.zNear!==a||this._depthRange.zFar!==e)this.gl.depthRange(a,e),this._depthRange.zNear=a,this._depthRange.zFar=e};a.prototype.setStencilTestEnabled=function(a){this._stencilTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=a)};a.prototype.setClearStencil=function(a){a!==this._clearStencil&&(this.gl.clearStencil(a),this._clearStencil=a)};a.prototype.setStencilFunction=function(a,e,c){if(this._stencilFunction.func!==
a||this._stencilFunction.ref!==e||this._stencilFunction.mask!==c)this.gl.stencilFunc(a,e,c),this._stencilFunction.face=1032,this._stencilFunction.func=a,this._stencilFunction.ref=e,this._stencilFunction.mask=c};a.prototype.setStencilFunctionSeparate=function(a,e,c,f){if(this._stencilFunction.face!==a||this._stencilFunction.func!==e||this._stencilFunction.ref!==c||this._stencilFunction.mask!==f)this.gl.stencilFuncSeparate(a,e,c,f),this._stencilFunction.face=a,this._stencilFunction.func=e,this._stencilFunction.ref=
c,this._stencilFunction.mask=f};a.prototype.setStencilWriteMask=function(a){this._stencilWriteMask!==a&&(this.gl.stencilMask(a),this._stencilWriteMask=a)};a.prototype.setStencilOp=function(a,e,c){if(this._stencilOperation.fail!==a||this._stencilOperation.zFail!==e||this._stencilOperation.zPass!==c)this.gl.stencilOp(a,e,c),this._stencilOperation.face=1032,this._stencilOperation.fail=a,this._stencilOperation.zFail=e,this._stencilOperation.zPass=c};a.prototype.setStencilOpSeparate=function(a,e,c,f){if(this._stencilOperation.face!==
a||this._stencilOperation.fail!==e||this._stencilOperation.zFail!==c||this._stencilOperation.zPass!==f)this.gl.stencilOpSeparate(a,e,c,f),this._stencilOperation.face=a,this._stencilOperation.face=a,this._stencilOperation.fail=e,this._stencilOperation.zFail=c,this._stencilOperation.zPass=f};a.prototype.setLineWidth=function(a){var b=this._lineWidth;this._lineWidth!==a&&(this.gl.lineWidth(a),this._lineWidth=a);return b};a.prototype.setActiveTexture=function(a){var b=this._activeTextureUnit;0<=a&&a!==
this._activeTextureUnit&&(this.gl.activeTexture(g.BASE_TEXTURE_UNIT+a),this._activeTextureUnit=a);return b};a.prototype.clear=function(a){a&&this.gl.clear(a)};a.prototype.drawArrays=function(a,e,c){this.gl.drawArrays(a,e,c)};a.prototype.drawElements=function(a,e,c,f){5123===c?this.gl.drawElements(a,e,c,f):5125===c&&this._extensions.elementIndexUint?this.gl.drawElements(a,e,c,f):console.warn("Data type is uint however extension OES_Element_index_unit is not supported therefore this draw call cannot be made")};
a.prototype.drawArraysInstanced=function(a,e,c,f){this._extensions.angleInstancedArrays?this._extensions.angleInstancedArrays.drawArraysInstancedANGLE(a,e,c,f):console.error("Extension ANGLE_instanced_arrays isn't supported!")};a.prototype.drawElementsInstanced=function(a,e,c,f,g){this._extensions.angleInstancedArrays?this._extensions.angleInstancedArrays.drawElementsInstancedANGLE(a,e,c,f,g):console.error("Extension ANGLE_instanced_arrays isn't supported!")};a.prototype.setViewport=function(a,e,
c,f){var b=this._viewport;if(b.x!==a||b.y!==e||b.width!==c||b.height!==f)b.x=a,b.y=e,b.width=c,b.height=f,this.gl.viewport(a,e,c,f)};a.prototype.getViewport=function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}};a.prototype.bindProgram=function(a){a?this._activeShaderProgram!==a&&(a.initialize(),this.gl.useProgram(a.glName),this._activeShaderProgram=a):(this.gl.useProgram(null),this._activeShaderProgram=null)};a.prototype.bindTexture=function(b,
e){void 0===e&&(e=0);-1===a._MAX_TEXTURE_IMAGE_UNITS&&(a._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));(e>=a._MAX_TEXTURE_IMAGE_UNITS||0>e)&&console.error("Input texture unit is out of range of available units!");var c=this._textureUnitMap[e];this.setActiveTexture(e);null==b||null==b.glName?(null!=c&&(this.gl.bindTexture(c.descriptor.target,null),c.setBoundToUnit(e,!1)),this._textureUnitMap[e]=null):c&&c.id===b.id?b.applyChanges():(this.gl.bindTexture(b.descriptor.target,
b.glName),b.setBoundToUnit(e,!0),b.applyChanges(),this._textureUnitMap[e]=b)};a.prototype.bindFramebuffer=function(a){a?this._activeFramebuffer!==a&&(a.initialize()||this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,a.glName),this._activeFramebuffer=a):(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null)};a.prototype.bindBuffer=function(b){b&&(34962===b.bufferType?this._activeVertexBuffer=a._bindBuffer(this.gl,b,b.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=
a._bindBuffer(this.gl,b,b.bufferType,this._activeIndexBuffer))};a.prototype.unbindBuffer=function(b){34962===b?this._activeVertexBuffer=a._bindBuffer(this.gl,null,b,this._activeVertexBuffer):this._activeIndexBuffer=a._bindBuffer(this.gl,null,b,this._activeIndexBuffer)};a.prototype.bindVAO=function(a){a?this._activeVertexArrayObject&&this._activeVertexArrayObject.id===a.id||(a.bind(),this._activeVertexArrayObject=a):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=
null)};a.prototype.getBoundTexture=function(a){return this._textureUnitMap[a]};a.prototype.getBoundFramebufferObject=function(){return this._activeFramebuffer};a.prototype.getBoundVAO=function(){return this._activeVertexArrayObject};a.prototype.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);for(var a=0;a<this.parameters.maxTextureImageUnits;a++)this.bindTexture(null,a);this.setBlendingEnabled(!1);this.setBlendFunction(1,
0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);this.setClearColor(0,0,
0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};a.prototype.enforceState=function(){var a=this.gl,e=this._extensions.vao;e&&e.bindVertexArrayOES(null);for(var c=0;c<this.parameters.maxVertexAttributes;c++)a.disableVertexAttribArray(c);this._activeVertexBuffer?a.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):
a.bindBuffer(34962,null);this._activeIndexBuffer?a.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):a.bindBuffer(34963,null);if(e&&this._activeVertexArrayObject){if(e=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null;this.bindVAO(e)}a.bindFramebuffer(a.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null);a.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);a.blendColor(this._blendColorState.r,
this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);!0===this._blendEnabled?a.enable(this.gl.BLEND):a.disable(this.gl.BLEND);a.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);a.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);a.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a);a.clearDepth(this._clearDepth);
a.clearStencil(this._clearStencil);a.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);a.cullFace(this._cullFace);a.depthFunc(this._depthFunction);a.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST);a.depthMask(this._depthWriteEnabled);a.frontFace(this._frontFace);a.lineWidth(this._lineWidth);!0===this._polygonCullingEnabled?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE);
a.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?a.enable(a.POLYGON_OFFSET_FILL):a.disable(a.POLYGON_OFFSET_FILL);a.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?a.enable(a.SCISSOR_TEST):a.disable(a.SCISSOR_TEST);a.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);a.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,
this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST);a.stencilMask(this._stencilWriteMask);for(e=0;e<this.parameters.maxTextureImageUnits;e++)a.activeTexture(g.BASE_TEXTURE_UNIT+e),a.bindTexture(3553,null),(c=this._textureUnitMap[e])&&a.bindTexture(c.descriptor.target,c.glName);a.activeTexture(g.BASE_TEXTURE_UNIT+this._activeTextureUnit);a.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)};
a._bindBuffer=function(a,e,c,f){if(!e)return a.bindBuffer(c,null),null;if(f===e)return f;a.bindBuffer(c,e.glName);return e};return a}();h._MAX_TEXTURE_IMAGE_UNITS=-1;return h})},"esri/views/webgl/enums":function(){define(["require","exports"],function(h,l){Object.defineProperty(l,"__esModule",{value:!0});l.BASE_TEXTURE_UNIT=33984})},"esri/views/webgl/Extensions":function(){define(["require","exports"],function(h,l){return function(){function g(c,a){this._disjointTimerQueryInit=this._compressedTextureS3TCInit=
this._shaderTextureLODInit=this._textureFilterAnisotropicInit=this._depthTextureInit=this._elementIndexUintInit=this._standardDerivativesInit=this._angleInstancedArraysInit=this._vaoInit=!1;this._gl=c;a&&a.disabledExtensions&&(c=a.disabledExtensions,c.vao&&(this._vao=null,this._vaoInit=!0),c.angleInstancedArrays&&(this._angleInstancedArrays=null,this._angleInstancedArraysInit=!0),c.standardDerivatives&&(this._standardDerivatives=null,this._standardDerivativesInit=!0),c.elementIndexUint&&(this._elementIndexUint=
null,this._elementIndexUintInit=!0),c.depthTexture&&(this._depthTexture=null,this._depthTextureInit=!0),c.textureFilterAnisotropic&&(this._textureFilterAnisotropic=null,this._textureFilterAnisotropicInit=!0),c.compressedTextureS3TC&&(this._compressedTextureS3TC=null,this._compressedTextureS3TCInit=!0),c.shaderTextureLOD&&(this._shaderTextureLOD=null,this._shaderTextureLODInit=!0),c.disjointTimerQuery&&(this._disjointTimerQuery=null,this._disjointTimerQueryInit=!0))}Object.defineProperty(g.prototype,
"vao",{get:function(){this._vaoInit||(this._vao=this._gl.getExtension("OES_vertex_array_object")||this._gl.getExtension("MOZ_OES_vertex_array_object")||this._gl.getExtension("WEBKIT_OES_vertex_array_object"),this._vaoInit=!0);return this._vao},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"angleInstancedArrays",{get:function(){this._angleInstancedArraysInit||(this._angleInstancedArrays=this._gl.getExtension("ANGLE_instanced_arrays"),this._angleInstancedArraysInit=!0);return this._angleInstancedArrays},
enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"standardDerivatives",{get:function(){this._standardDerivativesInit||(this._standardDerivatives=this._gl.getExtension("OES_standard_derivatives"),this._standardDerivativesInit=!0);return this._standardDerivatives},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"elementIndexUint",{get:function(){this._elementIndexUintInit||(this._elementIndexUint=this._gl.getExtension("OES_element_index_uint"),this._elementIndexUintInit=
!0);return this._elementIndexUint},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"depthTexture",{get:function(){this._depthTextureInit||(this._depthTexture=this._gl.getExtension("WEBGL_depth_texture")||this._gl.getExtension("MOZ_WEBGL_depth_texture")||this._gl.getExtension("WEBKIT_WEBGL_depth_texture"),this._depthTextureInit=!0);return this._depthTexture},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"textureFilterAnisotropic",{get:function(){this._textureFilterAnisotropicInit||
(this._textureFilterAnisotropic=this._gl.getExtension("EXT_texture_filter_anisotropic")||this._gl.getExtension("MOZ_EXT_texture_filter_anisotropic")||this._gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this._textureFilterAnisotropicInit=!0);return this._textureFilterAnisotropic},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"shaderTextureLOD",{get:function(){this._shaderTextureLODInit||(this._shaderTextureLOD=this._gl.getExtension("EXT_shader_texture_lod"),this._shaderTextureLODInit=
!0);return this._shaderTextureLOD},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"compressedTextureS3TC",{get:function(){this._compressedTextureS3TCInit||(this._compressedTextureS3TC=this._gl.getExtension("WEBGL_compressed_texture_s3tc"),this._compressedTextureS3TCInit=!0);return this._compressedTextureS3TC},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"disjointTimerQuery",{get:function(){this._disjointTimerQueryInit||(this._disjointTimerQuery=this._gl.getExtension("EXT_disjoint_timer_query"),
this._disjointTimerQueryInit=!0);return this._disjointTimerQuery},enumerable:!0,configurable:!0});return g}()})},"esri/views/webgl/FramebufferObject":function(){define(["require","exports","./Texture"],function(h,l,g){h=function(){function c(a,b,e,k){this._colorAttachment=this._stencilAttachment=this._depthAttachment=this._glName=this._context=null;this._initialized=!1;this._context=a;this._desc={colorTarget:b.colorTarget,depthStencilTarget:b.depthStencilTarget,width:b.width,height:b.height,multisampled:b.multisampled};
this._id=c._nextId++;e&&(a=void 0,e instanceof g?(this._colorAttachment=e,a=e.descriptor):(a=e,this._colorAttachment=new g(this._context,a)),0!==this._desc.colorTarget&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),c._validateTextureDimensions(a,this._desc));k&&(this._context.extensions.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),
e=void 0,k instanceof g?(this._depthStencilTexture=k,e=this._depthStencilTexture.descriptor):(e=k,this._depthStencilTexture=new g(this._context,e)),c._validateTextureDimensions(e,this._desc))}c.create=function(a,b){return new c(a,b)};c.createWithAttachments=function(a,b,e,k){return new c(a,e,b,k)};Object.defineProperty(c.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"colorTexture",{get:function(){return this._colorAttachment instanceof g?this._colorAttachment:null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"width",{get:function(){return this._desc.width},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"height",{get:function(){return this._desc.height},enumerable:!0,configurable:!0});c.prototype.dispose=function(){this._context&&this._glName&&(this._disposeColorAttachment(),this._disposeDepthStencilAttachments(),this._context.gl.deleteFramebuffer(this._glName),this._glName=null)};c.prototype.attachColorTexture=function(a){if(a){c._validateTextureDimensions(a.descriptor,this._desc);this._disposeColorAttachment();if(this._initialized){this._context.bindFramebuffer(this);
var b=this._context.gl;b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,a.glName,0)}this._colorAttachment=a}};c.prototype.detachColorTexture=function(){var a=void 0;if(this._colorAttachment instanceof g){a=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var b=this._context.gl;this._context.gl.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)}this._colorAttachment=null}return a};c.prototype.attachDepthStencilTexture=function(a){if(a){var b=
a.descriptor;34041!==b.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!");34042!==b.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8_WEBGL!");this._context.extensions.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!");c._validateTextureDimensions(b,this._desc);4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();
this._initialized&&(this._context.bindFramebuffer(this),b=this._context.gl,b.framebufferTexture2D(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.TEXTURE_2D,a.glName,0));this._depthStencilTexture=a}};c.prototype.detachDepthStencilTexture=function(){var a=this._depthStencilTexture;if(a&&this._initialized){this._context.bindFramebuffer(this);var b=this._context.gl;this._context.gl.framebufferTexture2D(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return a};
c.prototype.copyToTexture=function(a,b,e,c,f,g,d){(0>a||0>b||0>f||0>g)&&console.error("Offsets cannot be negative!");(0>=e||0>=c)&&console.error("Copy width and height must be greater than zero!");var k=this._desc,m=d.descriptor;3553!==d.descriptor.target&&console.error("Texture target must be TEXTURE_2D!");(a+e>k.width||b+c>k.height||f+e>m.width||g+c>m.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");k=this._context;k.bindTexture(d);k.bindFramebuffer(this);
k.gl.copyTexSubImage2D(3553,0,f,g,a,b,e,c)};c.prototype.readPixels=function(a,b,e,c,f,g,d){(0>=e||0>=c)&&console.error("Copy width and height must be greater than zero!");d||console.error("Target memory is not initialized!");this._context.bindFramebuffer(this);this._context.gl.readPixels(a,b,e,c,f,g,d)};c.prototype.resize=function(a,b){var e=this._desc;if(e.width!==a||e.height!==b)if(this._initialized)e.width=a,e.height=b,this._colorAttachment instanceof g?(k=this._colorAttachment,e=k.descriptor,
e.width=a,e.height=b,this._colorAttachment.dispose(),this._colorAttachment=new g(this._context,e),c._validateTextureDimensions(k.descriptor,this._desc)):this._colorAttachment&&this._disposeColorAttachment(),null!=this._depthStencilTexture?(e=this._depthStencilTexture.descriptor,e.width=a,e.height=b,this._depthStencilTexture.dispose(),this._depthStencilTexture=new g(this._context,e)):(this._depthAttachment||this._stencilAttachment)&&this._disposeDepthStencilAttachments(),this._initialized=!1;else{e.width=
a;e.height=b;if(this._colorAttachment instanceof g){var k=this._colorAttachment;k.resize(a,b)}this._depthStencilTexture&&this._depthStencilTexture.resize(a,b)}};c.prototype.initialize=function(){if(this._initialized)return!1;var a=this._context.gl;this._glName&&a.deleteFramebuffer(this._glName);var b=a.createFramebuffer(),e=this._desc;a.bindFramebuffer(a.FRAMEBUFFER,b);if(!this._colorAttachment)if(0===e.colorTarget)this._colorAttachment=new g(this._context,{target:3553,pixelFormat:6408,dataType:5121,
samplingMode:9728,wrapMode:33071,width:e.width,height:e.height});else{var c=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,c);a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,e.width,e.height);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,c);this._colorAttachment=c}this._colorAttachment instanceof g&&a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this._colorAttachment.glName,0);switch(e.depthStencilTarget){case 1:case 3:c=a.createRenderbuffer();
a.bindRenderbuffer(a.RENDERBUFFER,c);var f=1===e.depthStencilTarget?a.DEPTH_ATTACHMENT:a.DEPTH_STENCIL_ATTACHMENT;a.renderbufferStorage(a.RENDERBUFFER,1===e.depthStencilTarget?a.DEPTH_COMPONENT16:a.DEPTH_STENCIL,e.width,e.height);a.framebufferRenderbuffer(a.FRAMEBUFFER,f,a.RENDERBUFFER,c);this._depthAttachment=c;break;case 2:c=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,c);a.renderbufferStorage(a.RENDERBUFFER,a.STENCIL_INDEX8,e.width,e.height);a.framebufferRenderbuffer(a.FRAMEBUFFER,
a.STENCIL_ATTACHMENT,a.RENDERBUFFER,c);this._stencilAttachment=c;break;case 4:this._depthStencilTexture||(this._context.extensions.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),this._depthStencilTexture=new g(this._context,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:e.width,height:e.height})),a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,
a.TEXTURE_2D,this._depthStencilTexture.glName,0)}a.checkFramebufferStatus(a.FRAMEBUFFER)!==a.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!");this._glName=b;return this._initialized=!0};c.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof g){var a=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var b=this._context.gl;b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)}a.dispose()}else this._colorAttachment instanceof
WebGLRenderbuffer&&(a=this._colorAttachment,b=this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),b.framebufferRenderbuffer(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(a));this._colorAttachment=null};c.prototype._disposeDepthStencilAttachments=function(){var a=this._context.gl;if(this._depthAttachment){if(this._initialized){this._context.bindFramebuffer(this);var b=this._context.gl;b.framebufferRenderbuffer(b.FRAMEBUFFER,1===this._desc.depthStencilTarget?
b.DEPTH_ATTACHMENT:b.DEPTH_STENCIL_ATTACHMENT,b.RENDERBUFFER,null)}a.deleteRenderbuffer(this._depthAttachment);this._depthAttachment=null}this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),b=this._context.gl,b.framebufferRenderbuffer(b.FRAMEBUFFER,b.STENCIL_ATTACHMENT,b.RENDERBUFFER,null)),a.deleteRenderbuffer(this._stencilAttachment),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),a=this._context.gl,
a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)};c._validateTextureDimensions=function(a,b){console.assert(0<=a.width&&0<=a.height);3553!==a.target&&console.error("Texture type must be TEXTURE_2D!");void 0!==b.width&&0<=b.width&&void 0!==b.height&&0<=b.height?b.width===a.width&&b.height===a.height||console.error("Color attachment texture must match the framebuffer's!"):(b.width=a.width,b.height=
a.height)};return c}();h._nextId=0;return h})},"esri/views/webgl/Texture":function(){define(["require","exports"],function(h,l){h=function(){function g(c,a,b){this._glName=this._context=null;this._id=-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;this._context=c;this._desc={pixelFormat:a.pixelFormat,dataType:a.dataType,target:a.target?a.target:3553,samplingMode:a.samplingMode?a.samplingMode:9729,wrapMode:a.wrapMode?a.wrapMode:10497,maxAnisotropy:a.maxAnisotropy,
flipped:void 0!==a.flipped?a.flipped:!1,hasMipmap:void 0!==a.hasMipmap?a.hasMipmap:!1,level:void 0!==a.level?a.level:0,unpackAlignment:a.unpackAlignment?a.unpackAlignment:4,width:a.width,height:a.height,preMultiplyAlpha:void 0!==a.preMultiplyAlpha?a.preMultiplyAlpha:!1};this._id=++g._nextId;this.setData(b)}Object.defineProperty(g.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"glName",{get:function(){return this._glName},enumerable:!0,
configurable:!0});Object.defineProperty(g.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});g.prototype.dispose=function(){var c=this;if(this._context){if(this._glName){var a=this._context.gl;this._boundToUnits.forEach(function(a){c._context.bindTexture(null,a)});a.deleteTexture(this._glName);this._glName=null}this._context=null}};g.prototype.resize=function(c,a){var b=this._desc;if(b.width!==c||b.height!==a)b.width=c,b.height=a,this.setData(null)};g.prototype.setData=
function(c){var a=this._context.gl;this._glName||(this._glName=a.createTexture());void 0===c&&(c=null);null===c&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var b=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var e=this._desc;g._validateTexture(e);a.pixelStorei(a.UNPACK_ALIGNMENT,e.unpackAlignment);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,e.flipped?1:0);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.preMultiplyAlpha);c instanceof ImageData||c instanceof
HTMLImageElement||c instanceof HTMLCanvasElement||c instanceof HTMLVideoElement?(e.width&&e.height&&console.assert(c.width===e.width&&c.height===e.height),a.texImage2D(a.TEXTURE_2D,e.level,e.pixelFormat,e.pixelFormat,e.dataType,c),void 0===this._desc.width&&(this._desc.width=c.width),void 0===this._desc.height&&(this._desc.height=c.height)):(null!=e.width&&null!=e.height||console.error("Width and height must be specified!"),a.texImage2D(a.TEXTURE_2D,e.level,e.pixelFormat,e.width,e.height,0,e.pixelFormat,
e.dataType,c));e.hasMipmap&&this.generateMipmap();g._applySamplingMode(a,this._desc);g._applyWrapMode(a,this._desc);g._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(b,0)};g.prototype.updateData=function(c,a,b,e,k,f){f||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");var g=this._context.gl,d=this._desc,h=this._context.getBoundTexture(0);this._context.bindTexture(this,0);(0>a||
0>b||e>d.width||k>d.height||a+e>d.width||b+k>d.height)&&console.error("An attempt to update out of bounds of the texture!");f instanceof ImageData||f instanceof HTMLImageElement||f instanceof HTMLCanvasElement||f instanceof HTMLVideoElement?(console.assert(f.width===e&&f.height===k),g.texSubImage2D(g.TEXTURE_2D,c,a,b,d.pixelFormat,d.dataType,f)):g.texSubImage2D(g.TEXTURE_2D,c,a,b,e,k,d.pixelFormat,d.dataType,f);this._context.bindTexture(h,0)};g.prototype.generateMipmap=function(){var c=this._desc;
c.hasMipmap||(c.hasMipmap=!0,g._validateTexture(c));9729===c.samplingMode?(this._samplingModeDirty=!0,c.samplingMode=9985):9728===c.samplingMode&&(this._samplingModeDirty=!0,c.samplingMode=9984);c=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var a=this._context.gl;a.generateMipmap(a.TEXTURE_2D);this._context.bindTexture(c,0)};g.prototype.setSamplingMode=function(c){c!==this._desc.samplingMode&&(this._desc.samplingMode=c,g._validateTexture(this._desc),this._samplingModeDirty=
!0)};g.prototype.setWrapMode=function(c){c!==this._desc.wrapMode&&(this._desc.wrapMode=c,g._validateTexture(this._desc),this._wrapModeDirty=!0)};g.prototype.applyChanges=function(){var c=this._context.gl,a=this._desc;this._samplingModeDirty&&(g._applySamplingMode(c,a),this._samplingModeDirty=!1);this._wrapModeDirty&&(g._applyWrapMode(c,a),this._wrapModeDirty=!1)};g.prototype.setBoundToUnit=function(c,a){a?this._boundToUnits.add(c):this._boundToUnits.delete(c)};g._isPowerOfTwo=function(c){return 0===
(c&c-1)};g._validateTexture=function(c){(0>c.width||0>c.height)&&console.error("Negative dimension parameters are not allowed!");g._isPowerOfTwo(c.width)&&g._isPowerOfTwo(c.height)||(33071!==c.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),c.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))};g._applySamplingMode=function(c,a){var b=a.samplingMode;if(9985===b||9987===b)b=9729;else if(9984===b||9986===b)b=9728;c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_MAG_FILTER,b);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,a.samplingMode)};g._applyWrapMode=function(c,a){c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,a.wrapMode);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,a.wrapMode)};g._applyAnisotropicFilteringParameters=function(c,a){if(null!=a.maxAnisotropy){var b=c.extensions.textureFilterAnisotropic;b&&(c=c.gl,c.texParameterf(c.TEXTURE_2D,b.TEXTURE_MAX_ANISOTROPY_EXT,a.maxAnisotropy))}};return g}();h._nextId=0;return h})},"esri/views/webgl/webgl-utils":function(){define([],
function(){var h=function(h,g){for(var c=["webgl","experimental-webgl","webkit-3d","moz-webgl"],a=null,b=0;b<c.length;++b){try{a=h.getContext(c[b],g)}catch(e){}if(a)break}return a};return{create3DContext:h,setupWebGL:function(l,g){function c(a){var b=l.parentNode;b&&(b.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+a+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}
if(!window.WebGLRenderingContext)return c('This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),[null,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'];g=h(l,g);return g?[g]:(c('It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'),
[null,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'])},detectWebGL:function(){var l;try{l=window.WebGLRenderingContext}catch(c){l=[!1,0]}var g;try{g=h(document.createElement("canvas"))}catch(c){g=[!1,1]}l?g?(l=g,l=[!0,{VERSION:l.getParameter(l.VERSION),SHADING_LANGUAGE_VERSION:l.getParameter(l.SHADING_LANGUAGE_VERSION),VENDOR:l.getParameter(l.VENDOR),RENDERER:l.getParameter(l.RENDERER),
EXTENSIONS:l.getSupportedExtensions(),MAX_TEXTURE_SIZE:l.getParameter(l.MAX_TEXTURE_SIZE),MAX_RENDERBUFFER_SIZE:l.getParameter(l.MAX_RENDERBUFFER_SIZE),MAX_VERTEX_TEXTURE_IMAGE_UNITS:l.getParameter(l.MAX_VERTEX_TEXTURE_IMAGE_UNITS)}]):l=[!1,1]:l=[!1,0];return l}}})},"esri/views/2d/layers/support/GraphicsView2D":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Collection ../../../../core/HandleRegistry ../../../../core/promiseUtils ../../../../Graphic ../../../layers/GraphicsView ../../engine/graphics/GFXSurface ../../engine/graphics/GFXGroup ../../engine/graphics/GFXObject".split(" "),
function(h,l,g,c,a,b,e,k,f,m,d,r,n){h=function(a){function b(){for(var b=[],f=0;f<arguments.length;f++)b[f]=arguments[f];var c=a.apply(this,b)||this;c._frontGroup=new r;c._handles=new e;c._objects=new Map;c.container=new d;c.container.addChild(c._frontGroup);c.watch("graphics",function(){return c._reset()},!0);return c}g(b,a);b.prototype.hitTest=function(a,b){if(!this.view||!this.view.position)return null;a+=this.view.position[0]-window.pageXOffset;b+=this.view.position[1]-window.pageYOffset;return(a=
this.container.hitTest(a,b))?k.resolve(a.graphic):null};b.prototype._reset=function(){var a=this;this._handles.remove("graphics");this.graphics&&(this.graphics.forEach(this._add,this),this._handles.add(this.graphics.on("change",function(b){return a._graphicsChangeHandler(b)}),"graphics"))};b.prototype._add=function(a){if(!this._objects.has(a)){var b=new n;b.graphic=a;b.renderingInfo={symbol:a.symbol};this._objects.set(a,b);this._frontGroup.addChild(b)}};b.prototype._remove=function(a){var b=this._objects.get(a);
b&&(this._objects.delete(a),this._frontGroup.removeChild(b))};b.prototype._graphicsChangeHandler=function(a){for(var b=a.removed,d=0,f=a.added;d<f.length;d++)a=f[d],this._add(a);for(d=0;d<b.length;d++)a=b[d],this._remove(a)};return b}(a.declared(m));c([a.cast(b.ofType(f))],h.prototype,"graphics",void 0);c([a.property()],h.prototype,"view",void 0);return h=c([a.subclass("esri.views.2d.layers.support.GraphicsView2D")],h)})},"esri/views/layers/GraphicsView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/Collection ../../Graphic".split(" "),
function(h,l,g,c,a,b,e,k){h=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.graphics=null;b.renderer=null;b.view=null;return b}g(b,a);return b}(a.declared(b));c([a.property({type:e.ofType(k)})],h.prototype,"graphics",void 0);c([a.property()],h.prototype,"renderer",void 0);c([a.property()],h.prototype,"view",void 0);return h=c([a.subclass("esri.views.layers.GraphicsView")],h)})},"esri/views/2d/engine/graphics/GFXSurface":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/assignHelper ../../libs/gl-matrix/mat2d ../../libs/gl-matrix/common ../../libs/gfx ../../viewpointUtils ../Container ./Projector ../cssUtils".split(" "),
function(h,l,g,c,a,b,e,k,f,m,d){var r=a.identity(a.create());return function(f){function n(){var b=null!==f&&f.apply(this,arguments)||this;b._transform=a.create();b._projector=new m;return b}g(n,f);n.prototype.createElement=function(){var a=document.createElement("div");a.setAttribute("class","esri-display-object");return a};n.prototype.setElement=function(a){this.surface&&(this.surface.destroy(),this.surface=null);if(this.element=a)this.surface=e.createSurface(this.element,400,400)};n.prototype.doRender=
function(e){var c=this.element.style;if(this.visible){c.display="block";c.opacity=""+this.opacity;var g=this._transform,m=e.state;if(e.stationary)k.getMatrix(g,m.center,m.size,m.resolution,b.toRadian(m.rotation),1),this.surface.setDimensions(m.size[0],m.size[1]),this._projector.update(g,m.resolution),this.children.forEach(function(a){a.g&&a.g.setTransform(r)}),f.prototype.doRender.call(this,e);else{var n=a.invert(a.create(),g);a.multiply(n,m.transform,n);this.children.forEach(function(a){a.g&&a.g.setTransform(n)})}d.clip(c,
m.clipRect);c.transform=d.cssMatrix3d(a.fromRotation(a.create(),b.toRadian(m.rotation)));this.surface.rawNode.style.transform=d.cssMatrix(a.fromRotation(a.create(),b.toRadian(-m.rotation)))}else c.display="none"};n.prototype.hitTest=function(a,b){if(!this.attached)return null;var d=this.surface.rawNode,d=d.parentElement||d.parentNode;d.style.zIndex="9000";a=document.elementFromPoint(a,b);d.style.zIndex="";return a&&a.gfxObject||null};n.prototype.prepareChildrenRenderParameters=function(a){return c({},
a,{projector:this._projector,surface:this.surface})};n.prototype.beforeRenderChildren=function(a,b){this.surface.openBatch()};n.prototype.attachChild=function(a,b){return a.attach(b)};n.prototype.detachChild=function(a,b){return a.detach()};n.prototype.renderChild=function(a,b){return a.processRender(b)};n.prototype.afterRenderChildren=function(a,b){this.surface.closeBatch()};return n}(f)})},"esri/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(h){for(var l,
g=1,c=arguments.length;g<c;g++){l=arguments[g];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(h[a]=l[a])}return h}})},"esri/views/2d/libs/gfx":function(){define("require exports ./gfx/svg ./gfx/Circle ./gfx/Group ./gfx/Path ./gfx/Image ./gfx/Rect ./gfx/Shape ./gfx/Surface ./gfx/Text".split(" "),function(h,l,g,c,a,b,e,k,f,m,d){Object.defineProperty(l,"__esModule",{value:!0});l.createSurface=g.createSurface;l.Circle=c.default;l.Group=a.default;l.Path=b.default;l.Image=e.default;l.Rect=k.default;
l.Shape=f.default;l.Surface=m.default;l.Text=d.default})},"esri/views/2d/libs/gfx/svg":function(){define(["require","exports","dojo/dom","./Surface"],function(h,l,g,c){function a(a,e){return document.createElementNS?document.createElementNS(a,e):document.createElement(e)}Object.defineProperty(l,"__esModule",{value:!0});l.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};l.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,
1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};l._createElementNS=a;l._setAttributeNS=function(a,e,c,f){return a.setAttributeNS?a.setAttributeNS(e,c,f):a.setAttribute(c,f)};l._createTextNode=function(a){return document.createTextNode(a)};l._createFragment=function(){return document.createDocumentFragment()};l.getRef=function(a){return a&&"none"!==a?a.match(/^url\(#.+\)$/)?g.byId(a.slice(5,-1)):a.match(/^#dojoUnique\d+$/)?g.byId(a.slice(1)):
null:null};l.createSurface=function(b,e,k){var f=new c.default;f.rawNode=a(l.xmlns.svg,"svg");f.rawNode.setAttribute("overflow","hidden");e&&f.rawNode.setAttribute("width",0>e?0:e);k&&f.rawNode.setAttribute("height",0>k?0:k);e=a(l.xmlns.svg,"defs");f.rawNode.appendChild(e);f.defNode=e;f._parent=g.byId(b);f._parent.appendChild(f.rawNode);return f}})},"esri/views/2d/libs/gfx/Surface":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojo/has dojo/_base/array dojo/dom-construct dojox/gfx/_base ./svg ./Container ./Circle ./Group ./Path ./Image ./Rect ./Text".split(" "),
function(h,l,g,c,a,b,e,k,f,m,d,r,n,t,u){Object.defineProperty(l,"__esModule",{value:!0});var w=navigator.userAgent,p=534<function(){var a=/WebKit\/(\d*)/.exec(w);return a?parseInt(a[1],10):0}();h=function(f){function h(){var a=null!==f&&f.apply(this,arguments)||this;a.rawNode=null;a._parent=null;a._nodes=[];a._events=[];return a}g(h,f);h.prototype.destroy=function(){a.forEach(this._nodes,b.destroy);this._nodes=[];a.forEach(this._events,function(a){a&&a.remove()});this._events=[];this.rawNode=null;
if(c("ie"))for(;this._parent.lastChild;)b.destroy(this._parent.lastChild);else this._parent.innerHTML="";this.defNode=this._parent=null};h.prototype.setDimensions=function(a,b){if(!this.rawNode)return this;a=0>a?0:a;b=0>b?0:b;this.rawNode.setAttribute("width",a);this.rawNode.setAttribute("height",b);p&&(this.rawNode.style.width=a,this.rawNode.style.height=b);return this};h.prototype.getDimensions=function(){return this.rawNode?{width:e.normalizedLength(this.rawNode.getAttribute("width")),height:e.normalizedLength(this.rawNode.getAttribute("height"))}:
null};h.prototype.getEventSource=function(){return this.rawNode};h.prototype._getRealMatrix=function(){return null};h.prototype.createShape=function(a){switch(a.type){case e.defaultPath.type:return this.createPath(a);case e.defaultRect.type:return this.createRect(a);case e.defaultCircle.type:return this.createCircle(a);case e.defaultImage.type:return this.createImage(a);case e.defaultText.type:return this.createText(a)}console.error("[gfx] unknown shape",a);return null};h.prototype.createGroup=function(){return this.createObject(d.default)};
h.prototype.createRect=function(a){return this.createObject(t.default,a)};h.prototype.createCircle=function(a){return this.createObject(m.default,a)};h.prototype.createImage=function(a){return this.createObject(n.default,a)};h.prototype.createText=function(a){return this.createObject(u.default,a)};h.prototype.createPath=function(a){return this.createObject(r.default,a)};h.prototype.createObject=function(a,b){if(!this.rawNode)return null;var d=new a;a=k._createElementNS(k.xmlns.svg,a.nodeType);d.setRawNode(a);
d.setShape(b);this.add(d);return d};return h}(f.default);l.default=h})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(h,l,g,c,a,b,e,k,f){var m=l.getObject("dojox.gfx",!0),d=m._base={};m._hasClass=function(a,b){return(a=a.getAttribute("className"))&&0<=(" "+a+" ").indexOf(" "+b+" ")};m._addClass=function(a,b){var d=a.getAttribute("className")||
"";(!d||0>(" "+d+" ").indexOf(" "+b+" "))&&a.setAttribute("className",d+(d?" ":"")+b)};m._removeClass=function(a,b){var d=a.getAttribute("className");d&&a.setAttribute("className",d.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)"),"$1$2"))};d._getFontMeasurements=function(){var b={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},d,f;c("ie")&&(f=a.doc.documentElement.style.fontSize||"",f||(a.doc.documentElement.style.fontSize="100%"));
var e=k.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},a.body());for(d in b)e.style.fontSize=d,b[d]=16*Math.round(12*e.offsetHeight/16)/12/1E3;c("ie")&&(a.doc.documentElement.style.fontSize=f);a.body().removeChild(e);return b};var r=null;d._getCachedFontMeasurements=function(a){if(a||!r)r=d._getFontMeasurements();return r};var n=null,t={};d._getTextBox=function(b,d,
e){var c,g,m=arguments.length,h;n||(n=k.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},a.body()));c=n;c.className="";g=c.style;g.borderWidth="0";g.margin="0";g.padding="0";g.outline="0";if(1<m&&d)for(h in d)h in t||(g[h]=d[h]);2<m&&e&&(c.className=e);c.innerHTML=b;c.getBoundingClientRect?(g=c.getBoundingClientRect(),g={l:g.left,t:g.top,w:g.width||g.right-g.left,h:g.height||g.bottom-g.top}):g=f.getMarginBox(c);c.innerHTML="";return g};d._computeTextLocation=
function(a,b,d,f){var e={};switch(a.align){case "end":e.x=a.x-b;break;case "middle":e.x=a.x-b/2;break;default:e.x=a.x}e.y=a.y-d*(f?.75:1);return e};d._computeTextBoundingBox=function(a){if(!m._base._isRendered(a))return{x:0,y:0,width:0,height:0};var b;b=a.getShape();var f=a.getFont()||m.defaultFont;a=a.getTextWidth();f=m.normalizedLength(f.size);b=d._computeTextLocation(b,a,f,!0);return{x:b.x,y:b.y,width:a,height:f}};d._isRendered=function(a){for(a=a.parent;a&&a.getParent;)a=a.parent;return null!==
a};var u=0;d._getUniqueId=function(){var a;do a=h._scopeName+"xUnique"+ ++u;while(e.byId(a));return a};var w=c("pointer-events")?"touchAction":c("MSPointer")?"msTouchAction":null;d._fixMsTouchAction=w?function(a){a.rawNode.style[w]="none"}:function(){};l.mixin(m,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},
defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},
defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var a={};return function(b){var d=a[b];if(d)return new d;d=a[b]=new Function;d.prototype=m["default"+b];return new d}}(),normalizeColor:function(a){return a instanceof g?a:new g(a)},normalizeParameters:function(a,
b){var d;if(b){var f={};for(d in a)d in b&&!(d in f)&&(a[d]=b[d])}return a},makeParameters:function(a,b){var d=null;if(!b)return l.delegate(a);var f={};for(d in a)d in f||(f[d]=l.clone(d in b?b[d]:a[d]));return f},formatNumber:function(a,b){var d=a.toString();if(0<=d.indexOf("e"))d=a.toFixed(4);else{var f=d.indexOf(".");0<=f&&5<d.length-f&&(d=a.toFixed(4))}return 0>a?d:b?" "+d:d},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(a){var b=
m.getDefault("Font");a=a.split(/\s+/);if(!(5>a.length)){b.style=a[0];b.variant=a[1];b.weight=a[2];var d=a[3].indexOf("/");b.size=0>d?a[3]:a[3].substring(0,d);var f=4;0>d&&("/"==a[4]?f=6:"/"==a[4].charAt(0)&&(f=5));f<a.length&&(b.family=a.slice(f).join(" "))}return b},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return m._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(a){return a*m.px_in_pt()},px2pt:function(a){return a/m.px_in_pt()},normalizedLength:function(a){if(0===a.length)return 0;
if(2<a.length){var b=m.px_in_pt(),d=parseFloat(a);switch(a.slice(-2)){case "px":return d;case "pt":return d*b;case "in":return 72*d*b;case "pc":return 12*d*b;case "mm":return d*m.mm_in_pt*b;case "cm":return d*m.cm_in_pt*b}}return parseFloat(a)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(a,b){return a&&b&&a===b},switchTo:function(a){var d="string"==typeof a?m[a]:a;d&&(b.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath EsriPath Surface createSurface fixTarget".split(" "),
function(a){m[a]=d[a]}),"string"==typeof a?m.renderer=a:b.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(a){return m.renderer=m[a]&&m[a].Surface===m.Surface?a:null}))}});return m})},"esri/views/2d/libs/gfx/Container":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojox/gfx/matrix ./Shape ./svg".split(" "),function(h,l,g,c,a,b){Object.defineProperty(l,"__esModule",{value:!0});h=function(a){function e(){var b=null!==a&&a.apply(this,arguments)||this;
b.children=[];b._batch=0;return b}g(e,a);e.prototype.openBatch=function(){this._batch||(this.fragment=b._createFragment());++this._batch;return this};e.prototype.closeBatch=function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),this.fragment=null);return this};e.prototype.add=function(a){if(this===a.getParent())return this;this.fragment?this.fragment.appendChild(a.rawNode):this.rawNode.appendChild(a.rawNode);var b=a.getParent();b&&
b.remove(a,!0);this.children.push(a);a._setParent(this,this._getRealMatrix());return this};e.prototype.remove=function(a,b){void 0===b&&(b=!1);if(this!==a.getParent())return this;this.rawNode===a.rawNode.parentNode&&this.rawNode.removeChild(a.rawNode);this.fragment&&this.fragment===a.rawNode.parentNode&&this.fragment.removeChild(a.rawNode);for(var d=0;d<this.children.length;++d)if(this.children[d]===a){b||(a.parent=null,a.parentMatrix=null);this.children.splice(d,1);break}return this};e.prototype.clear=
function(a){void 0===a&&(a=!1);for(var b=this.rawNode;b.lastChild;)b.removeChild(b.lastChild);var d=this.defNode;if(d){for(;d.lastChild;)d.removeChild(d.lastChild);b.appendChild(d)}for(d=0;d<this.children.length;++d)b=this.children[d],b.parent=null,b.parentMatrix=null,a&&b.destroy();this.children=[];return this};e.prototype.getBoundingBox=function(){if(!this.children)return null;var a=null;this.children.forEach(function(b){var d=b.getBoundingBox();d&&((b=b.getTransform())&&(d=c.multiplyRectangle(b,
d)),a?(a.x=Math.min(a.x,d.x),a.y=Math.min(a.y,d.y),a.endX=Math.max(a.endX,d.x+d.width),a.endY=Math.max(a.endY,d.y+d.height)):a={x:d.x,y:d.y,endX:d.x+d.width,endY:d.y+d.height,width:0,height:0})});a&&(a.width=a.endX-a.x,a.height=a.endY-a.y);return a};e.prototype._moveChildToFront=function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]===a){this.children.splice(b,1);this.children.push(a);break}return this};e.prototype._moveChildToBack=function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]===
a){this.children.splice(b,1);this.children.unshift(a);break}return this};return e}(a.default);l.default=h})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(h,l){var g=h.matrix={},c={};g._degToRad=function(a){return c[a]||(c[a]=Math.PI*a/180)};g._radToDeg=function(a){return a/Math.PI*180};g.Matrix2D=function(a){if(a)if("number"==typeof a)this.xx=this.yy=a;else if(a instanceof Array){if(0<a.length){for(var b=g.normalize(a[0]),e=1;e<a.length;++e){var c=b,f=g.normalize(a[e]),
b=new g.Matrix2D;b.xx=c.xx*f.xx+c.xy*f.yx;b.xy=c.xx*f.xy+c.xy*f.yy;b.yx=c.yx*f.xx+c.yy*f.yx;b.yy=c.yx*f.xy+c.yy*f.yy;b.dx=c.xx*f.dx+c.xy*f.dy+c.dx;b.dy=c.yx*f.dx+c.yy*f.dy+c.dy}l.mixin(this,b)}}else l.mixin(this,a)};l.extend(g.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});l.mixin(g,{identity:new g.Matrix2D,flipX:new g.Matrix2D({xx:-1}),flipY:new g.Matrix2D({yy:-1}),flipXY:new g.Matrix2D({xx:-1,yy:-1}),translate:function(a,b){return 1<arguments.length?new g.Matrix2D({dx:a,dy:b}):new g.Matrix2D({dx:a.x,
dy:a.y})},scale:function(a,b){return 1<arguments.length?new g.Matrix2D({xx:a,yy:b}):"number"==typeof a?new g.Matrix2D({xx:a,yy:a}):new g.Matrix2D({xx:a.x,yy:a.y})},rotate:function(a){var b=Math.cos(a);a=Math.sin(a);return new g.Matrix2D({xx:b,xy:-a,yx:a,yy:b})},rotateg:function(a){return g.rotate(g._degToRad(a))},skewX:function(a){return new g.Matrix2D({xy:Math.tan(a)})},skewXg:function(a){return g.skewX(g._degToRad(a))},skewY:function(a){return new g.Matrix2D({yx:Math.tan(a)})},skewYg:function(a){return g.skewY(g._degToRad(a))},
reflect:function(a,b){1==arguments.length&&(b=a.y,a=a.x);var c=a*a,k=b*b,f=c+k,m=2*a*b/f;return new g.Matrix2D({xx:2*c/f-1,xy:m,yx:m,yy:2*k/f-1})},project:function(a,b){1==arguments.length&&(b=a.y,a=a.x);var c=a*a,k=b*b,f=c+k,m=a*b/f;return new g.Matrix2D({xx:c/f,xy:m,yx:m,yy:k/f})},normalize:function(a){return a instanceof g.Matrix2D?a:new g.Matrix2D(a)},isIdentity:function(a){return 1==a.xx&&0==a.xy&&0==a.yx&&1==a.yy&&0==a.dx&&0==a.dy},clone:function(a){var b=new g.Matrix2D,c;for(c in a)"number"==
typeof a[c]&&"number"==typeof b[c]&&b[c]!=a[c]&&(b[c]=a[c]);return b},invert:function(a){a=g.normalize(a);var b=a.xx*a.yy-a.xy*a.yx;return a=new g.Matrix2D({xx:a.yy/b,xy:-a.xy/b,yx:-a.yx/b,yy:a.xx/b,dx:(a.xy*a.dy-a.yy*a.dx)/b,dy:(a.yx*a.dx-a.xx*a.dy)/b})},_multiplyPoint:function(a,b,c){return{x:a.xx*b+a.xy*c+a.dx,y:a.yx*b+a.yy*c+a.dy}},multiplyPoint:function(a,b,c){a=g.normalize(a);return"number"==typeof b&&"number"==typeof c?g._multiplyPoint(a,b,c):g._multiplyPoint(a,b.x,b.y)},multiplyRectangle:function(a,
b){var c=g.normalize(a);b=b||{x:0,y:0,width:0,height:0};if(g.isIdentity(c))return{x:b.x,y:b.y,width:b.width,height:b.height};a=g.multiplyPoint(c,b.x,b.y);var k=g.multiplyPoint(c,b.x,b.y+b.height),f=g.multiplyPoint(c,b.x+b.width,b.y);b=g.multiplyPoint(c,b.x+b.width,b.y+b.height);var c=Math.min(a.x,k.x,f.x,b.x),m=Math.min(a.y,k.y,f.y,b.y);return{x:c,y:m,width:Math.max(a.x,k.x,f.x,b.x)-c,height:Math.max(a.y,k.y,f.y,b.y)-m}},multiply:function(a){for(var b=g.normalize(a),c=1;c<arguments.length;++c){var k=
b,f=g.normalize(arguments[c]),b=new g.Matrix2D;b.xx=k.xx*f.xx+k.xy*f.yx;b.xy=k.xx*f.xy+k.xy*f.yy;b.yx=k.yx*f.xx+k.yy*f.yx;b.yy=k.yx*f.xy+k.yy*f.yy;b.dx=k.xx*f.dx+k.xy*f.dy+k.dx;b.dy=k.yx*f.dx+k.yy*f.dy+k.dy}return b},_sandwich:function(a,b,c){return g.multiply(g.translate(b,c),a,g.translate(-b,-c))},scaleAt:function(a,b,c,k){switch(arguments.length){case 4:return g._sandwich(g.scale(a,b),c,k);case 3:return"number"==typeof c?g._sandwich(g.scale(a),b,c):g._sandwich(g.scale(a,b),c.x,c.y)}return g._sandwich(g.scale(a),
b.x,b.y)},rotateAt:function(a,b,c){return 2<arguments.length?g._sandwich(g.rotate(a),b,c):g._sandwich(g.rotate(a),b.x,b.y)},rotategAt:function(a,b,c){return 2<arguments.length?g._sandwich(g.rotateg(a),b,c):g._sandwich(g.rotateg(a),b.x,b.y)},skewXAt:function(a,b,c){return 2<arguments.length?g._sandwich(g.skewX(a),b,c):g._sandwich(g.skewX(a),b.x,b.y)},skewXgAt:function(a,b,c){return 2<arguments.length?g._sandwich(g.skewXg(a),b,c):g._sandwich(g.skewXg(a),b.x,b.y)},skewYAt:function(a,b,c){return 2<arguments.length?
g._sandwich(g.skewY(a),b,c):g._sandwich(g.skewY(a),b.x,b.y)},skewYgAt:function(a,b,c){return 2<arguments.length?g._sandwich(g.skewYg(a),b,c):g._sandwich(g.skewYg(a),b.x,b.y)}});h.Matrix2D=g.Matrix2D;return g})},"esri/views/2d/libs/gfx/Shape":function(){define("require exports dojox/gfx/_base dojo/_base/lang dojo/_base/Color dojo/dom dojo/dom-attr ./svg ./Surface ../gl-matrix/mat2d".split(" "),function(h,l,g,c,a,b,e,k,f,m){Object.defineProperty(l,"__esModule",{value:!0});h=function(){function d(){this.parentMatrix=
this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null}d.prototype.destroy=function(){if(this.fillStyle&&"type"in this.fillStyle){var a=this.rawNode.getAttribute("fill");(a=k.getRef(a))&&a.parentNode.removeChild(a)}this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null};d.prototype.getNode=function(){return this.rawNode};d.prototype.getShape=function(){return this.shape};d.prototype.getTransform=function(){return this.matrix};
d.prototype.getFill=function(){return this.fillStyle};d.prototype.getStroke=function(){return this.strokeStyle};d.prototype.getParent=function(){return this.parent};d.prototype.getBoundingBox=function(){return this.bbox};d.prototype.setTransform=function(a){this.matrix=this.matrix?m.copy(this.matrix,a):m.clone(a);return this._applyTransform()};d.prototype.setFill=function(a){if(!a)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;
var b;if("object"===typeof a&&"type"in a){switch(a.type){case "linear":b=g.makeParameters(g.defaultLinearGradient,a);a=this._setFillObject(b,"linearGradient");a.setAttribute("x1",b.x1.toFixed(8));a.setAttribute("y1",b.y1.toFixed(8));a.setAttribute("x2",b.x2.toFixed(8));a.setAttribute("y2",b.y2.toFixed(8));break;case "radial":b=g.makeParameters(g.defaultRadialGradient,a);a=this._setFillObject(b,"radialGradient");a.setAttribute("cx",b.cx.toFixed(8));a.setAttribute("cy",b.cy.toFixed(8));a.setAttribute("r",
b.r.toFixed(8));break;case "pattern":b=g.makeParameters(g.defaultPattern,a),a=this._setFillObject(b,"pattern"),a.setAttribute("x",b.x.toFixed(8)),a.setAttribute("y",b.y.toFixed(8)),a.setAttribute("width",b.width.toFixed(8)),a.setAttribute("height",b.height.toFixed(8))}this.fillStyle=b;return this}this.fillStyle=b=g.normalizeColor(a);this.rawNode.setAttribute("fill",b.toCss());this.rawNode.setAttribute("fill-opacity",b.a);this.rawNode.setAttribute("fill-rule","evenodd");return this};d.prototype.setStroke=
function(b){var d=this.rawNode;if(!b)return this.strokeStyle=null,d.setAttribute("stroke","none"),d.setAttribute("stroke-opacity",0),this;if("string"===typeof b||c.isArray(b)||b instanceof a)b={color:b};b=this.strokeStyle=g.makeParameters(g.defaultStroke,b);b.color=g.normalizeColor(b.color);if(b){var f=0>b.width?0:b.width;d.setAttribute("stroke",b.color.toCss());d.setAttribute("stroke-opacity",b.color.a);d.setAttribute("stroke-width",f);d.setAttribute("stroke-linecap",b.cap);"number"===typeof b.join?
(d.setAttribute("stroke-linejoin","miter"),d.setAttribute("stroke-miterlimit",b.join)):d.setAttribute("stroke-linejoin",b.join);var e=b.style.toLowerCase();e in k.dasharray&&(e=k.dasharray[e]);if(e instanceof Array){for(var e=c._toArray(e),m=0;m<e.length;++m)e[m]*=f;if("butt"!==b.cap){for(m=0;m<e.length;m+=2)e[m]-=f,1>e[m]&&(e[m]=1);for(m=1;m<e.length;m+=2)e[m]+=f}e=e.join(",")}d.setAttribute("stroke-dasharray",e);d.setAttribute("dojoGfxStrokeStyle",b.style)}return this};d.prototype._getParentSurface=
function(){for(var a=this.parent;a&&!(a instanceof f.default);a=a.parent);return a};d.prototype._setFillObject=function(a,b){var d=k.xmlns.svg;this.fillStyle=a;var c=this._getParentSurface().defNode,f=this.rawNode.getAttribute("fill");if(f=k.getRef(f))if(f.tagName.toLowerCase()!==b.toLowerCase()){var e=f.id;f.parentNode.removeChild(f);f=k._createElementNS(d,b);f.setAttribute("id",e);c.appendChild(f)}else for(;f.childNodes.length;)f.removeChild(f.lastChild);else f=k._createElementNS(d,b),f.setAttribute("id",
g._base._getUniqueId()),c.appendChild(f);if("pattern"===b)f.setAttribute("patternUnits","userSpaceOnUse"),d=k._createElementNS(d,"image"),d.setAttribute("x",0),d.setAttribute("y",0),d.setAttribute("width",(0>a.width?0:a.width).toFixed(8)),d.setAttribute("height",(0>a.height?0:a.height).toFixed(8)),k._setAttributeNS(d,k.xmlns.xlink,"xlink:href",a.src),f.appendChild(d);else for(f.setAttribute("gradientUnits","userSpaceOnUse"),b=0;b<a.colors.length;++b){var c=a.colors[b],e=k._createElementNS(d,"stop"),
m=c.color=g.normalizeColor(c.color);e.setAttribute("offset",c.offset.toFixed(8));e.setAttribute("stop-color",m.toCss());e.setAttribute("stop-opacity",m.a);f.appendChild(e)}this.rawNode.setAttribute("fill","url(#"+f.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return f};d.prototype._applyTransform=function(){var a=this.matrix;a?this.rawNode.setAttribute("transform","matrix("+a[0].toFixed(8)+","+a[1].toFixed(8)+","+a[2].toFixed(8)+
","+a[3].toFixed(8)+","+a[4].toFixed(8)+","+a[5].toFixed(8)+")"):this.rawNode.removeAttribute("transform");return this};d.prototype.setRawNode=function(a){a=this.rawNode=a;"image"!==this.shape.type&&a.setAttribute("fill","none");a.setAttribute("fill-opacity",0);a.setAttribute("stroke","none");a.setAttribute("stroke-opacity",0);a.setAttribute("stroke-width",1);a.setAttribute("stroke-linecap","butt");a.setAttribute("stroke-linejoin","miter");a.setAttribute("stroke-miterlimit",4);a.__gfxObject__=this};
d.prototype.setShape=function(a){this.shape=g.makeParameters(this.shape,a);for(var b in this.shape)if("type"!==b){a=this.shape[b];if("width"===b||"height"===b)a=0>a?0:a;this.rawNode.setAttribute(b,a)}this.bbox=null;return this};d.prototype._moveToFront=function(){this.rawNode.parentNode.appendChild(this.rawNode);return this};d.prototype._moveToBack=function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this};d.prototype._removeClipNode=function(){var a,
d=e.get(this.rawNode,"clip-path");d&&(a=b.byId(d.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);return a};d.prototype.moveToFront=function(){var a=this.getParent();a&&(a._moveChildToFront(this),this._moveToFront());return this};d.prototype.moveToBack=function(){var a=this.getParent();a&&(a._moveChildToBack(this),this._moveToBack());return this};d.prototype.removeShape=function(a){this.parent&&this.parent.remove(this,a);return this};d.prototype._setParent=function(a,b){this.parent=a;return this._updateParentMatrix(b)};
d.prototype._updateParentMatrix=function(a){this.parentMatrix=a?m.clone(a):null;return this._applyTransform()};d.prototype._getRealMatrix=function(){for(var a=m.clone(this.matrix||m.create()),b=this.parent;b;)b.matrix&&a&&m.multiply(a,b.matrix,a),b=b.parent;return a};return d}();l.default=h})},"esri/views/2d/libs/gfx/Circle":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","./Shape","dojox/gfx/_base"],function(h,l,g,c,a){Object.defineProperty(l,"__esModule",{value:!0});
h=function(b){function c(c){var f=b.call(this)||this;f.shape=a.getDefault("Circle");f.rawNode=c;return f}g(c,b);c.prototype.getBoundingBox=function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox};return c}(c.default);h.nodeType="circle";l.default=h})},"esri/views/2d/libs/gfx/Group":function(){define("require exports ../../../../core/tsSupport/extendsHelper ./Container dojox/gfx/_base ./svg ./Circle ./Path ./Image ./Rect ./Text".split(" "),
function(h,l,g,c,a,b,e,k,f,m,d){Object.defineProperty(l,"__esModule",{value:!0});h=function(c){function h(){return null!==c&&c.apply(this,arguments)||this}g(h,c);h.prototype.setRawNode=function(a){this.rawNode=a;this.rawNode.__gfxObject__=this};h.prototype.destroy=function(){c.prototype.clear.call(this,!0);c.prototype.destroy.call(this)};h.prototype.createShape=function(b){switch(b.type){case a.defaultPath.type:return this.createPath(b);case a.defaultRect.type:return this.createRect(b);case a.defaultCircle.type:return this.createCircle(b);
case a.defaultImage.type:return this.createImage(b);case a.defaultText.type:return this.createText(b)}console.error("[gfx] unknown shape",b);return null};h.prototype.createGroup=function(){return this.createObject(h)};h.prototype.createRect=function(a){return this.createObject(m.default,a)};h.prototype.createCircle=function(a){return this.createObject(e.default,a)};h.prototype.createImage=function(a){return this.createObject(f.default,a)};h.prototype.createText=function(a){return this.createObject(d.default,
a)};h.prototype.createPath=function(a){return this.createObject(k.default,a)};h.prototype.createObject=function(a,d){if(!this.rawNode)return null;var c=new a;a=b._createElementNS(b.xmlns.svg,a.nodeType);c.setRawNode(a);c.setShape(d);this.add(c);return c};return h}(c.default);h.nodeType="g";l.default=h})},"esri/views/2d/libs/gfx/Path":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojo/_base/lang dojox/gfx/_base dojox/gfx/matrix ./Shape".split(" "),function(h,l,g,c,a,b,
e){Object.defineProperty(l,"__esModule",{value:!0});h=function(e){function f(b){var d=e.call(this)||this;d.segments=[];d.tbbox=null;d.absolute=!0;d.last={};d.segmented=!1;d._validSegments={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0};d._2PI=2*Math.PI;d.rawNode=b;d.shape=c.clone(a.defaultPath);return d}g(f,e);f.prototype.setAbsoluteMode=function(a){this._confirmSegmented();this.absolute="string"===typeof a?"absolute"===a:a;return this};f.prototype.getAbsoluteMode=function(){this._confirmSegmented();return this.absolute};
f.prototype.getBoundingBox=function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null};f.prototype._getRealBBox=function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var a=this.bbox,b=this._getRealMatrix();this.bbox=null;for(var c=this.segments.length,f=0;f<c;++f)this._updateWithSegment(this.segments[f],b);b=this.bbox;this.bbox=a;return this.tbbox=b?[{x:b.l,y:b.t},{x:b.r,y:b.t},
{x:b.r,y:b.b},{x:b.l,y:b.b}]:null};f.prototype.getLastPosition=function(){this._confirmSegmented();return"x"in this.last?this.last:null};f.prototype._applyTransform=function(){this.tbbox=null;e.prototype._applyTransform.call(this);return this};f.prototype._updateBBox=function(a,d,c){c&&(d=b.multiplyPoint(c,a,d),a=d.x,d=d.y);this.bbox&&"l"in this.bbox?(this.bbox.l>a&&(this.bbox.l=a),this.bbox.r<a&&(this.bbox.r=a),this.bbox.t>d&&(this.bbox.t=d),this.bbox.b<d&&(this.bbox.b=d)):this.bbox={l:a,b:d,r:a,
t:d}};f.prototype._updateWithSegment=function(b,d){var c=b.args,f=c.length,e;switch(b.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(e=0;e<f;e+=2)this._updateBBox(c[e],c[e+1],d);this.last.x=c[f-2];this.last.y=c[f-1];this.absolute=!0;break;case "H":for(e=0;e<f;++e)this._updateBBox(c[e],this.last.y,d);this.last.x=c[f-1];this.absolute=!0;break;case "V":for(e=0;e<f;++e)this._updateBBox(this.last.x,c[e],d);this.last.y=c[f-1];this.absolute=!0;break;case "m":e=0;"x"in this.last||(this._updateBBox(this.last.x=
c[0],this.last.y=c[1],d),e=2);for(;e<f;e+=2)this._updateBBox(this.last.x+=c[e],this.last.y+=c[e+1],d);this.absolute=!1;break;case "l":case "t":for(e=0;e<f;e+=2)this._updateBBox(this.last.x+=c[e],this.last.y+=c[e+1],d);this.absolute=!1;break;case "h":for(e=0;e<f;++e)this._updateBBox(this.last.x+=c[e],this.last.y,d);this.absolute=!1;break;case "v":for(e=0;e<f;++e)this._updateBBox(this.last.x,this.last.y+=c[e],d);this.absolute=!1;break;case "c":for(e=0;e<f;e+=6)this._updateBBox(this.last.x+c[e],this.last.y+
c[e+1],d),this._updateBBox(this.last.x+c[e+2],this.last.y+c[e+3],d),this._updateBBox(this.last.x+=c[e+4],this.last.y+=c[e+5],d);this.absolute=!1;break;case "s":case "q":for(e=0;e<f;e+=4)this._updateBBox(this.last.x+c[e],this.last.y+c[e+1],d),this._updateBBox(this.last.x+=c[e+2],this.last.y+=c[e+3],d);this.absolute=!1;break;case "A":for(e=0;e<f;e+=7)this._updateBBox(c[e+5],c[e+6],d);this.last.x=c[f-2];this.last.y=c[f-1];this.absolute=!0;break;case "a":for(e=0;e<f;e+=7)this._updateBBox(this.last.x+=
c[e+5],this.last.y+=c[e+6],d);this.absolute=!1}b=[b.action];for(e=0;e<f;++e)b.push(a.formatNumber(c[e],!0));if("string"===typeof this.shape.path)this.shape.path+=b.join("");else for(e=0,f=b.length;e<f;++e)this.shape.path.push(b[e]);"string"===typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)};f.prototype._pushSegment=function(a,b){this.tbbox=null;var d=this._validSegments[a.toLowerCase()];"number"===typeof d&&(d?b.length>=d&&(a={action:a,args:b.slice(0,b.length-b.length%d)},this.segments.push(a),
this._updateWithSegment(a)):(a={action:a,args:[]},this.segments.push(a),this._updateWithSegment(a)))};f.prototype._collectArgs=function(a,b){for(var d=0;d<b.length;++d){var c=b[d];"boolean"===typeof c?a.push(c?1:0):"number"===typeof c?a.push(c):c instanceof Array?this._collectArgs(a,c):"x"in c&&"y"in c&&a.push(c.x,c.y)}};f.prototype._confirmSegmented=function(){if(!this.segmented){var a=this.shape.path;this.shape.path=[];this._setPath(a);this.shape.path=this.shape.path.join("");this.segmented=!0}};
f.prototype._setPath=function(b){b=c.isArray(b)?b:b.match(a.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(b){for(var d="",f=[],e=b.length,g=0;g<e;++g){var k=b[g],m=parseFloat(k);isNaN(m)?(d&&this._pushSegment(d,f),f=[],d=k):f.push(m)}this._pushSegment(d,f)}};f.prototype.setShape=function(a){e.prototype.setShape.call(this,"string"===typeof a?{path:a}:a);this.segmented=!1;this.segments=[];this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");
return this};return f}(e.default);h.nodeType="path";l.default=h})},"esri/views/2d/libs/gfx/Image":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojox/gfx/_base ./Shape ./svg".split(" "),function(h,l,g,c,a,b){Object.defineProperty(l,"__esModule",{value:!0});h=function(a){function e(b){var f=a.call(this)||this;f.shape=c.getDefault("Image");f.rawNode=b;return f}g(e,a);e.prototype.setShape=function(a){this.shape=c.makeParameters(this.shape,a);this.bbox=null;a=this.rawNode;
for(var f in this.shape)if("type"!==f&&"src"!==f){var d=this.shape[f];if("width"===f||"height"===f)d=0>d?0:d;a.setAttribute(f,d)}a.setAttribute("preserveAspectRatio","none");b._setAttributeNS(a,b.xmlns.xlink,"xlink:href",this.shape.src);a.__gfxObject__=this;return this};e.prototype.getBoundingBox=function(){return this.shape};e.prototype.setStroke=function(){return this};e.prototype.setFill=function(){return this};return e}(a.default);h.nodeType="image";l.default=h})},"esri/views/2d/libs/gfx/Rect":function(){define(["require",
"exports","../../../../core/tsSupport/extendsHelper","dojox/gfx/_base","./Shape"],function(h,l,g,c,a){Object.defineProperty(l,"__esModule",{value:!0});h=function(a){function b(b){var f=a.call(this)||this;f.shape=c.getDefault("Rect");f.rawNode=b;return f}g(b,a);b.prototype.getBoundingBox=function(){return this.shape};b.prototype.setShape=function(a){this.shape=c.makeParameters(this.shape,a);this.bbox=null;for(var b in this.shape)if("type"!==b&&"r"!==b){a=this.shape[b];if("width"===b||"height"===b)a=
0>a?0:a;this.rawNode.setAttribute(b,a)}null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r));return this};return b}(a.default);h.nodeType="rect";l.default=h})},"esri/views/2d/libs/gfx/Text":function(){define("require exports ../../../../core/tsSupport/extendsHelper dojo/has dojox/gfx/_base ./Shape ./svg".split(" "),function(h,l,g,c,a,b,e){Object.defineProperty(l,"__esModule",{value:!0});h=c("android");var k=c("chrome")||h&&4<=h?"auto":"optimizeLegibility";
c=function(b){function c(d){var c=b.call(this)||this;c.fontStyle=null;c.shape=a.getDefault("Text");c.rawNode=d;return c}g(c,b);c.prototype.getFont=function(){return this.fontStyle};c.prototype.setFont=function(b){this.fontStyle="string"===typeof b?a.splitFontString(b):a.makeParameters(a.defaultFont,b);this._setFont();return this};c.prototype._setFont=function(){var a=this.fontStyle;this.rawNode.setAttribute("font-style",a.style);this.rawNode.setAttribute("font-variant",a.variant);this.rawNode.setAttribute("font-weight",
a.weight);this.rawNode.setAttribute("font-size",a.size);this.rawNode.setAttribute("font-family",a.family)};c.prototype.setShape=function(b){this.shape=a.makeParameters(this.shape,b);this.bbox=null;b=this.rawNode;var d=this.shape;b.setAttribute("x",d.x);b.setAttribute("y",d.y);b.setAttribute("text-anchor",d.align);b.setAttribute("text-decoration",d.decoration);b.setAttribute("rotate",d.rotated?90:0);b.setAttribute("kerning",d.kerning?"auto":0);b.setAttribute("text-rendering",k);b.firstChild?b.firstChild.nodeValue=
d.text:b.appendChild(e._createTextNode(d.text));return this};c.prototype.getTextWidth=function(){var a=this.rawNode,b=a.parentNode,a=a.cloneNode(!0);a.style.visibility="hidden";var c=0,f=a.firstChild.nodeValue;b.appendChild(a);if(""!==f)for(;!c;)c=a.getBBox?parseInt(a.getBBox().width,10):68;b.removeChild(a);return c};c.prototype.getBoundingBox=function(){var a=null;if(this.getShape().text)try{a=this.rawNode.getBBox()}catch(r){a={x:0,y:0,width:0,height:0}}return a};return c}(b.default);c.nodeType=
"text";l.default=c})},"esri/views/2d/engine/graphics/Projector":function(){define(["require","exports"],function(h,l){function g(c,k,f,h,d){void 0===h&&(h=0);void 0===d&&(d=c.length);for(var e=c[h],m=c[d-1],l=0,u=0,w,p=h+1;p<d-1;p++){var q=c[p];w=q[0];var q=q[1],x=e[0],A=e[1],C=m[0],z=m[1];x===C?w=a(w-x):(C=(z-A)/(C-x),w=a(C*w-q+(A-C*x))/b(C*C+1));w>l&&(u=p,l=w)}l>k?(g(c,k,f,h,u+1),g(c,k,f,u,d)):(f(e[0],e[1]),f(m[0],m[1]))}var c=Math.round,a=Math.abs,b=Math.sqrt;return function(){function a(){this._transform=
null}a.prototype.update=function(a,b){this._transform=a;this._resolution=b};a.prototype.toScreenPoint=function(a,b,c){this.transformPoint(b.x+c*this._resolution,b.y,function(b,c){a.x=b;a.y=c});return a};a.prototype.toScreenPath=function(a,b){var c=this,d=null!=a.paths;a=d?a.paths:a.rings;var f="",e=function(a,d){a+=b*c._resolution;c.transformPoint(a,d,function(a,b){isNaN(a)||isNaN(b)||(f+=a,f+=",",f+=b,f+=" ")})};if(a)for(var k=a.length,h=0;h<k;h++)f+="M ",g(a[h],this._resolution,e),d||(f+="Z ");
return f};a.prototype.transformPoint=function(a,b,e){var d=this._transform,f=d[1],g=d[3],k=d[5];e(c(d[0]*a+d[2]*b+d[4]),c(f*a+g*b+k))};return a}()})},"esri/views/2d/engine/cssUtils":function(){define(["require","exports","dojo/has"],function(h,l,g){function c(a){return"matrix3d(\n                    "+a[0].toFixed(10)+", "+a[1].toFixed(10)+", 0, 0,\n                    "+a[2].toFixed(10)+", "+a[3].toFixed(10)+", 0, 0,\n                    0, 0, 1, 0,\n                    "+Math.round(a[4]).toFixed(10)+
", "+Math.round(a[5]).toFixed(10)+", 0, 1\n                  )"}function a(a){return"translate("+Math.round(a[0])+"px, "+Math.round(a[1])+"px)"}function b(a){return"rotateZ( "+a+" deg)"}Object.defineProperty(l,"__esModule",{value:!0});h=g("ff");var e=g("ie"),k=g("webkit");g=g("opera");var f=k&&"-webkit-transform"||h&&"-moz-transform"||g&&"-o-transform"||e&&"-ms-transform"||"transform";l.clip=function(a,b){a.clip=b?"rect( "+b.top+"px, "+b.right+"px, "+b.bottom+"px, "+b.left+"px)":""};l.setTransform=
function(b,d){var e=null;2===d.length&&(e=a(d));6===d.length&&(e=c(d));b.transform=b[f]=e};l.setOrigin=function(a,b){a.transformOrigin=b[0]+"px "+b[1]+"px 0"};l.cssMatrix=function(a){return"matrix(\n                  "+a[0].toFixed(10)+", "+a[1].toFixed(10)+",\n                  "+a[2].toFixed(10)+", "+a[3].toFixed(10)+",\n                  "+a[4]+", "+a[5]+"\n                )"};l.cssMatrix3d=c;l.translate=a;l.rotate=function(a){return b(a.toFixed(3))};l.rotateZ=b})},"esri/views/2d/engine/graphics/GFXGroup":function(){define(["require",
"exports","../../../../core/tsSupport/extendsHelper","dojo/_base/lang","../Container"],function(h,l,g,c,a){return function(a){function b(){return null!==a&&a.apply(this,arguments)||this}g(b,a);b.prototype.attach=function(b){this.g=b.surface.createGroup();return a.prototype.attach.call(this,b)};b.prototype.detach=function(b){a.prototype.detach.call(this,b);this.g.destroy();this.g=null};b.prototype.prepareChildrenRenderParameters=function(a){return c.mixin({},a,{surface:this.g})};b.prototype.detachChild=
function(a,b){return a.detach(b)};b.prototype.attachChild=function(a,b){return a.attach(b)};b.prototype.renderChild=function(a,b){return a.processRender(b)};return b}(a)})},"esri/views/2d/engine/graphics/GFXObject":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../geometry/Extent ../../../../geometry/support/webMercatorUtils ../../../../geometry/support/spatialReferenceUtils ../DisplayObject ./gfxUtils".split(" "),function(h,l,g,c,a,b,e,k){var f=new Set,m=[];
return function(d){function e(){var a=null!==d&&d.apply(this,arguments)||this;a.visible=!0;return a}g(e,d);Object.defineProperty(e.prototype,"graphic",{get:function(){return this._graphic},set:function(a){this._geometry=(this._graphic=a)&&a.geometry||null;this._projected=null;this.requestRender()},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"isPolygonMarkerSymbol",
{get:function(){var a=this.renderingInfo.symbol.type,b=this.geometry;return b&&"polygon"===b.type&&("simple-marker-symbol"===a||"picture-marker-symbol"===a||"text-symbol"===a)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"renderingInfo",{get:function(){return this._renderingInfo},set:function(a){this._renderingInfo=a;this.requestRender()},enumerable:!0,configurable:!0});e.prototype.detach=function(){this._removeShape();this._drawInfo=this._projected=null};e.prototype.doRender=
function(a){var b=a.surface,d=a.state,c=a.projector,f=this.visible&&this._projectGeometry(this.geometry,a.state.spatialReference);a=this._getScreenOffsets([],a.state);k.isShapeInvalid(this.renderingInfo.symbol,this._shape)&&this._removeShape();if(a.length){var e=this._shape,g=f.type;if(!e||this._showRedraw(a,d))"point"===g?(e=k.drawPoint(c,b,f,e,this.renderingInfo,d.rotation,a),k.stylePoint(e,this.renderingInfo)):"multipoint"===g?(e=k.drawMarkers(c,b,f,e,this.renderingInfo,d.rotation,a),k.styleMarkers(e,
this.renderingInfo)):(e=k.drawShape(c,b,f,e,a),k.styleShape(e,this.renderingInfo)),this._shape=e,e.getNode().gfxObject=this}else this._removeShape()};e.prototype._getScreenOffsets=function(a,d){var c=d.clippedExtent,e=this._projected.outExtent,g=d.spatialReference;a.length=0;if(!e)return a;if(g.isWrappable){var g=b.getInfo(g),k=e.cache._partwise,c=c._getParts(g);m.length=0;if(k&&k.length)for(e=0;e<k.length;e++)m.push.apply(m,k[e]._getParts(g));else m.push.apply(m,e._getParts(g));d=d.worldScreenWidth;
a.length=0;f.clear();e=m.length;for(g=0;g<e;g++)for(var h=m[g],k=h.extent,h=h.frameIds,n=h.length,l=c.length,r=0;r<l;r++){var t=c[r];if(t.extent.intersects(k))for(var D=n,H=0;H<D;H++){var y=(t.frameIds[0]-h[H])*d;f.has(y)||(a.push(y),f.add(y))}}a.sort()}else c.intersects(e)&&a.push(0);return a};e.prototype._projectGeometry=function(b,d){var c=this._projected;b=this.isPolygonMarkerSymbol?b.centroid:b;if(c&&c.inGeometry===b&&c.outSpatialReference===d)return c.outGeometry;b&&b.spatialReference.equals(d)?
this._projected={inGeometry:b,outGeometry:b,outSpatialReference:d,outExtent:this._getExtent(b)}:a.canProject(b,d)?this._projected={inGeometry:b,outGeometry:a.project(b,d),outSpatialReference:d,outExtent:this._getExtent(b)}:this._projected={inGeometry:b,outGeometry:null,outSpatialReference:d,outExtent:null};return this._projected.outGeometry};e.prototype._getExtent=function(a){var b=a.extent;if(!b){var d=b=void 0;"esri.geometry.Point"===a.declaredClass?(b=a.x,d=a.y):"esri.geometry.Multipoint"===a.declaredClass&&
(b=a.points[0][0],d=a.points[0][1]);b=new c(b,d,b,d,a.spatialReference)}return b};e.prototype._removeShape=function(){var a=this._shape;a&&(a.removeShape(),a.getNode().gfxObject=null,a.destroy());this._shape=this._drawInfo=null};e.prototype._showRedraw=function(a,b){return!0};return e}(e)})},"esri/views/2d/engine/graphics/gfxUtils":function(){define("require exports dojo/_base/lang ../../libs/gl-matrix/mat2d ../../libs/gl-matrix/mat2dExtras ../../../../core/screenUtils ../../../../geometry/Polygon ../../../../symbols/SimpleMarkerSymbol ../../../../symbols/support/gfxUtils".split(" "),
function(h,l,g,c,a,b,e,k,f){function m(a,b){b.toRgba?(a[0]=b.r,a[1]=b.g,a[2]=b.b,a[3]=b.a):(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3]);return a}function d(a,b,d){null!=d&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=d);return a}function r(a,b,d){var c=b[0]/b[1];a[0]=a[1]=1;isNaN(d)||(1<c?(a[0]=d/b[0],a[1]=d/c/b[1]):(a[1]=d/b[1],a[0]=d*c/b[0]));return a}function n(d,e,g,h,m,n,l){var q=m.symbol;g=d.toScreenPoint(C,g,l[0]);l=[g.x,g.y];d=g.x;g=g.y;var A=m.heading;m=m.size&&m.size[0];var v,y;c.identity(z);"number"===
typeof m&&(y=isFinite(m)&&m);y=(m=y&&isFinite(y)&&!isNaN(y))?b.pt2px(y):NaN;n&&a.rotategAt(z,z,n,l);A&&a.rotategAt(z,z,A,l);n=b.pt2px(q.xoffset);A=b.pt2px(q.yoffset);0===n&&0===A||c.translate(z,z,[n,-A]);0!==q.angle&&a.rotategAt(z,z,q.angle,l);if("simple-marker-symbol"===q.type)switch(v=q.style,n=Math.round,y=m?y:b.pt2px(q.size),m=void 0,v){case k.STYLE_SQUARE:case k.STYLE_CROSS:case k.STYLE_X:case k.STYLE_DIAMOND:m=isNaN(y)?16:.5*y;v=w(e,h,x(v,d,g,n(d-m),n(d+m),n(g-m),n(g+m)));break;case k.STYLE_PATH:v=
q=w(e,h,q.path);q=q.getBoundingBox();y=r(c.create(),[q.width,q.height],y);1===y[0]&&1===y[3]||a.scaleAt(z,z,y,l);c.translate(z,z,[-(q.x+.5*q.width)+d,-(q.y+.5*q.height)+g]);break;default:m=isNaN(y)?16:.5*y,v=u(e,h,{cx:d,cy:g,r:m})}else if("picture-marker-symbol"===q.type)v=m?y:b.pt2px(q.width),y=m?y:b.pt2px(q.height),v=t(e,h,{x:d-.5*v,y:g-.5*y,width:v,height:y,src:q.url});else if("text-symbol"===q.type){if(l=q.font&&q.font.clone())l.size=m?y:b.pt2px(l.size);v=p(e,h,{type:"text",text:q.text,x:d,y:g,
align:f.getSVGAlign(q),decoration:q.decoration||l&&l.decoration,rotated:q.rotated,kerning:q.kerning});l&&v.setFont(l);y=v.getNode();e=f.getSVGBaseline(q);q=f.getSVGBaselineShift(q);y&&(y.setAttribute("dominant-baseline",e),q&&y.setAttribute("baseline-shift",q))}v.setTransform(z);return v}function t(a,b,d){return b?b.setShape(d):a.createImage(d)}function u(a,b,d){return b?b.setShape(d):a.createCircle(d)}function w(a,b,d){d=Array.isArray(d)?d.join(" "):d;return b?b.setShape(d):a.createPath(d)}function p(a,
b,d){return b?b.setShape(d):a.createText(d)}function q(a,b){b=b&&b.shape&&b.shape.type;var d=a&&a.type;a=a&&a.style;d&&(a=B[d]||a);D[a]&&(a="path");return!(!b||!a||b===a)}function x(a,b,d,c,f,e,g,h){switch(a){case k.STYLE_SQUARE:return["M",c+","+e,f+","+e,f+","+g,c+","+g,"Z"];case k.STYLE_CROSS:return["M",b+","+e,b+","+g,"M",c+","+d,f+","+d];case k.STYLE_X:return["M",c+","+e,f+","+g,"M",c+","+g,f+","+e];case k.STYLE_DIAMOND:return["M",b+","+e,f+","+d,b+","+g,c+","+d,"Z"];case k.STYLE_TARGET:return["M",
c+","+e,f+","+e,f+","+g,c+","+g,c+","+e,"M",c-h+","+d,c+","+d,"M",b+","+(e-h),b+","+e,"M",f+h+","+d,f+","+d,"M",b+","+(g+h),b+","+g]}}function A(a,b){var c=b.symbol;if("picture-marker-symbol"!==c.type){var e=f.getFill(c);if("simple-marker-symbol"===c.type){var h=c.style,n=(c=f.getStroke(c))&&c.color,h=h===k.STYLE_X||h===k.STYLE_CROSS,l=b.opacity;(b=b.color||m([0,0,0,0],h?n:e))&&null!=l&&(b=d([0,0,0,0],b,l));b&&(h?b!==n&&(c=c?g.mixin({},c):{},c.color=b):b!==e&&(e=b));a.setFill(e).setStroke(c)}else"text-symbol"===
c.type&&(l=b.opacity,(b=b.color||m([0,0,0,0],e))&&null!=l&&(b=d([0,0,0,0],b,l)),b&&b!==e&&(e=b),a.setFill(e))}}Object.defineProperty(l,"__esModule",{value:!0});l.getScalingVector=r;var C={x:0,y:0},z=c.create();l.drawPoint=n;l.drawMarkers=function(a,b,d,c,e,f,g){var k=e.symbol;d=d.points;b=c||b.createGroup();c=[0];b.children[0]&&q(k,b.children[0])&&b.clear();for(var h=0,m=d.length,k=0;k<m;k++)for(var l=d[k],r=g.length,p=0;p<r;p++)c[0]=g[p],b.add(n(a,b,{x:l[0],y:l[1]},b.children[h++],e,f,c));a=b.children.length;
if(d.length*g.length<a)for(g=d.length*g.length,k=a-1;k>=g;k--)b.children[k].removeShape();return b};l.drawShape=function(a,b,d,c,f){var g=[];"extent"===d.type&&(d=e.fromExtent(d));if("polyline"===d.type||"polygon"===d.type){for(var k=f.length,h=0;h<k;h++)g=g.concat(a.toScreenPath(d,f[h]));c=w(b,c,g)}return c};l.drawRect=function(a,b,d){return b?b.setShape(d):a.createRect(d)};l.drawImage=t;l.drawCircle=u;l.drawPath=w;l.drawText=p;var B={"picture-marker-symbol":"image","picture-fill-symbol":"path",
"simple-fill-symbol":"path","simple-line-symbol":"path","text-symbol":"text"},D={square:1,cross:1,x:1,diamond:1,target:1};l.isShapeInvalid=q;l.smsToPath=x;l.stylePoint=A;l.styleMarkers=function(a,b){for(var d=a.children.length,c=0;c<d;c++)A(a.children[c],b)};l.styleShape=function(a,c){var e=c.symbol,k=c.size,h=c.color;c=c.opacity;var n=f.getStroke(e),l=f.getFill(e),r=!1,p;"simple-line-symbol"===e.type?(r=!0,p="none"!==e.style):p=e.outline&&"none"!==e.outline.style;var t,q,u;k&&(u=isFinite(k[0])&&
k[0]);null!=k&&(u=b.pt2px(u));!h&&null==c||"picture-fill-symbol"===e.type||(r?(t=h||n&&n.color&&m([0,0,0,0],n.color))&&null!=c&&(t=d(t,t,c)):l&&(q=h||m([0,0,0,0],l))&&null!=c&&(q=d(q,q,c)));!p||null==k&&!t?a.setStroke(n):a.setStroke(g.mixin({},n,null!=u?{width:u}:null,t&&{color:t}));a.setFill(q||l);a.rawNode.setAttribute("vector-effect","non-scaling-stroke")}})},"esri/views/2d/libs/gl-matrix/mat2dExtras":function(){define(["require","exports","./mat2d","./vec2","./common"],function(h,l,g,c,a){Object.defineProperty(l,
"__esModule",{value:!0});var b=function(){var a=g.create(),b=c.create();return function(e,k,d){g.fromTranslation(a,d);g.multiply(e,a,k);c.negate(b,d);g.translate(e,e,b);return e}}();l.rotategAt=function(){var c=g.create();return function(e,f,h,d){g.fromRotation(c,a.toRadian(h));b(c,c,d);g.multiply(e,c,f);return e}}();l.scaleAt=function(){var a=g.create();return function(c,e,h,d){g.fromScaling(a,h);b(a,a,d);g.multiply(c,a,e);return c}}()})},"esri/symbols/support/gfxUtils":function(){define("require exports dojo/_base/lang dojox/gfx/_base ../../Color ../../core/screenUtils".split(" "),
function(h,l,g,c,a,b){function e(a){var d=a.style,e=null;if(a){var k=a.constructor;switch(a.type){case "simple-marker-symbol":d!==k.STYLE_CROSS&&d!==k.STYLE_X&&(e=a.color);break;case "simple-fill-symbol":d===k.STYLE_SOLID?e=a.color:d!==k.STYLE_NULL&&(e=g.mixin({},c.defaultPattern,{src:f+d+".png",width:10,height:10}));break;case "picture-fill-symbol":e=g.mixin({},c.defaultPattern,{src:a.url,width:b.pt2px(a.width)*a.xscale,height:b.pt2px(a.height)*a.yscale,x:b.pt2px(a.xoffset),y:b.pt2px(a.yoffset)});
break;case "text-symbol":e=a.color}}return e}function k(a){if(!a)return null;var d,c=a.constructor,e=b.pt2px(a.width);switch(a.type){case "simple-fill-symbol":case "picture-fill-symbol":case "simple-marker-symbol":d=k(a.outline);break;case "simple-line-symbol":a.style!==c.STYLE_NULL&&0!==e&&(d={color:a.color,style:r(a.style),width:e,cap:a.cap,join:a.join===c.JOIN_MITER?b.pt2px(a.miterLimit):a.join});break;default:d=null}return d}Object.defineProperty(l,"__esModule",{value:!0});var f=h.toUrl("../../symbols/patterns/"),
m={left:"start",center:"middle",right:"end",justify:"start"},d={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"};l.getSVGAlign=function(a){return a=(a=a.horizontalAlignment)&&m[a.toLowerCase()]||"middle"};l.getSVGBaseline=function(a){return(a=a.verticalAlignment)&&d[a.toLowerCase()]||"alphabetic"};l.getSVGBaselineShift=function(a){return"bottom"===a.verticalAlignment?"super":null};l.getFill=e;l.getStroke=k;var r=function(){var a={};return function(b){if(a[b])return a[b];
var d=b.replace(/-/g,"");return a[b]=d}}();l.getShapeDescriptors=function(a){if(!a)return{defaultShape:null,fill:null,font:null,stroke:null};var d={defaultShape:null,fill:e(a),font:null,stroke:k(a)},c=a.constructor,f=c.defaultProps,g=null;switch(a.type){case "simple-marker-symbol":var h=a.style,f=.5*b.pt2px(a.size||f.size),m=-f,n=+f,l=-f,r=+f;switch(h){case c.STYLE_CIRCLE:g={type:"circle",cx:0,cy:0,r:f};break;case c.STYLE_CROSS:g={type:"path",path:"M "+m+",0 L "+n+",0 M 0,"+l+" L 0,"+r+" E"};break;
case c.STYLE_DIAMOND:g={type:"path",path:"M "+m+",0 L 0,"+l+" L "+n+",0 L 0,"+r+" L "+m+",0 Z"};break;case c.STYLE_SQUARE:g={type:"path",path:"M "+m+","+r+" L "+m+","+l+" L "+n+","+l+" L "+n+","+r+" L "+m+","+r+" Z"};break;case c.STYLE_X:g={type:"path",path:"M "+m+","+r+" L "+n+","+l+" M "+m+","+l+" L "+n+","+r+" E"};break;case c.STYLE_PATH:g={type:"path",path:a.path||""}}break;case "simple-line-symbol":g={type:"path",path:"M -15,0 L 15,0 E"};break;case "picture-fill-symbol":case "simple-fill-symbol":g=
{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"};break;case "picture-marker-symbol":g={type:"image",x:-Math.round(b.pt2px(a.width)/2),y:-Math.round(b.pt2px(a.height)/2),width:b.pt2px(a.width),height:b.pt2px(a.height),src:a.url||""};break;case "text-symbol":c=a.font,h=b.pt2px(c.size),g={type:"text",text:a.text,x:0,y:.25*h,align:"middle",decoration:a.decoration||c&&c.decoration,rotated:a.rotated,kerning:a.kerning},d.font=c&&{size:h+"px",style:c.style,variant:c.variant,weight:c.weight,
family:c.family}}d.defaultShape=g;return d};l.defaultThematicColor=new a([128,128,128])})},"esri/views/2d/input/MapViewInputManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/watchUtils ../../../core/Accessor ../../../core/HandleRegistry ../../../core/accessorSupport/decorators ../../input/InputManager ../../input/BrowserEventSource ../../input/ViewEvents ../../input/handlers/PreventContextMenu ../input/handlers/DoubleClickZoom ../input/handlers/DragPan ../input/handlers/DragRotate ../input/handlers/KeyPan ../input/handlers/KeyZoom ../input/handlers/KeyRotate ../input/handlers/MouseWheelZoom ../input/handlers/PinchAction".split(" "),
function(h,l,g,c,a,b,e,k,f,m,d,r,n,t,u,w,p,q,x,A){var C={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},z={zoomIn:["\x3d","+"],zoomOut:["-","_"]},B={dragRotate:"Alt",clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};h=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;a._handles=new e;return a}g(c,b);c.prototype.initialize=function(){var b=this;this.viewEvents=new d.ViewEvents(this.view);
this._handles.add([a.whenNot(this.view,"ready",function(){return b._disconnect()}),a.when(this.view,"ready",function(){return b._connect()})])};c.prototype.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect();this.viewEvents.destroy();this.viewEvents=null};c.prototype._disconnect=function(){this._inputManager&&(this.viewEvents.disconnect(),this._source.destroy(),this._inputManager.destroy(),this._inputManager=this._source=null)};c.prototype._connect=
function(){var a=new m.BrowserEventSource(this.view.surface),b=new f.InputManager(a);b.installHandlers("prevent-context-menu",[new r.PreventContextMenu]);b.installHandlers("navigation",[new A.PinchRotateAndZoom(this.view),new x.MouseWheelZoom(this.view),new n.DoubleClickZoom(this.view),new t.DragPan(this.view,"primary"),new w.KeyPan(this.view,C),new p.KeyZoom(this.view,z),new q.KeyRotate(this.view,B),new u.DragRotate(this.view,"secondary"),new n.DoubleClickZoom(this.view,["Ctrl"]),new u.DragRotate(this.view,
"primary",[B.dragRotate])]);this.viewEvents.connect(b);this._source=a;this._inputManager=b};return c}(k.declared(b));c([k.property()],h.prototype,"view",void 0);return h=c([k.subclass("esri.views.2d.input.MapViewInputManager")],h)})},"esri/views/input/InputManager":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/now ./keys ./recognizers ../../core/Logger ./handlers/LatestPointerType".split(" "),
function(h,l,g,c,a,b,e,k,f,m,d){Object.defineProperty(l,"__esModule",{value:!0});var r=m.getLogger("esri.views.input");h=function(a){function b(b,d){b=a.call(this)||this;b._pointerCaptures=new Map;b._nameToGroup={};b._handlers=[];b._currentPropagation=null;b._sourceEvents=new Set;b._keyModifiers=new Set;b._activeKeyModifiers=new Set;b.primaryKey=k.primaryKey;b.latestPointerType="mouse";b._installRecognizers();return b}g(b,a);b.prototype.normalizeCtorArgs=function(a,b){this._browserEvents=a;this._browserEvents.onEventReceived=
this._onEventReceived.bind(this);this._recognizers=b;this._recognizers||(this._recognizers=f.defaults.map(function(a){return new a}));return{}};b.prototype.destroy=function(){for(var a=0,b=Object.keys(this._nameToGroup);a<b.length;a++)this.uninstallHandlers(b[a])};b.prototype.installHandlers=function(a,b){var d=this;if(this._nameToGroup[a])r.error("There is already an InputHandler group registered under the name `"+a+"`");else if(0===b.length)r.error("Can't register a group of zero handlers");else{var c=
{name:a,handlers:b.map(function(a,b){return{handler:a,active:!0,removed:!1,priorityIndex:0,eventCallback:null,uninstallCallback:null}})};this._nameToGroup[a]=c;a=function(a){var b=c.handlers[a];e._handlers.push(b);b.handler.onInstall({updateDependencies:function(){d.updateDependencies()},emit:function(a,c,e,f){d._emitInputEvent(b.priorityIndex,a,c,e,f)},setPointerCapture:function(a,e){d._setPointerCapture(c,b,a,e)},setEventCallback:function(a){b.eventCallback=a},setUninstallCallback:function(a){b.uninstallCallback=
a}})};var e=this;for(b=c.handlers.length-1;0<=b;b--)a(b);this.updateDependencies()}};b.prototype.uninstallHandlers=function(a){var b=this._nameToGroup[a];b?(b.handlers.forEach(function(a){a.removed=!0;a.uninstallCallback()}),delete this._nameToGroup[a],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):r.error("There is no InputHandler group registered under the name `"+a+"`")};b.prototype.hasHandlers=function(a){return void 0!==
this._nameToGroup[a]};b.prototype.updateDependencies=function(){var a=new Set,b=new Set;this._handlersPriority=[];for(var d=this._handlers.length-1;0<=d;d--){var c=this._handlers[d];c.priorityIndex=d;this._handlersPriority.push(c)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(d=this._handlersPriority.length-1;0<=d;d--){c=this._handlersPriority[d];c.priorityIndex=d;var e=c.handler.hasSideEffects;if(!e)for(var f=0,g=c.handler.outgoingEventTypes;f<g.length;f++)if(a.has(g[f])){e=
!0;break}if(e)for(f=0,g=c.handler.incomingEventMatches;f<g.length;f++){var h=g[f];a.add(h.eventType);for(var m=0,h=h.keyModifiers;m<h.length;m++){var n=h[m];k.isSystemModifier(n)||b.add(n)}}c.active=e}this._sourceEvents=a;this._keyModifiers=b;0<this._pointerCaptures.size&&this._sourceEvents.add("pointer-capture-lost");0<this._keyModifiers.size&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up"));this._browserEvents&&(this._browserEvents.activeEvents=this._sourceEvents)};b.prototype._setLatestPointerType=
function(a){this._set("latestPointerType",a)};b.prototype._onEventReceived=function(a,b){"pointer-capture-lost"===a&&this._pointerCaptures.delete(b.native.pointerId);this._updateKeyModifiers(a,b);this._emitInputEventFromSource(a,b,b.native.timestamp)};b.prototype._updateKeyModifiers=function(a,b){var d=this;if(b){var c=!1,e=function(){if(!c){var a=new Set;d._activeKeyModifiers.forEach(function(b){a.add(b)});d._activeKeyModifiers=a;c=!0}},f=function(a,b){b&&!d._activeKeyModifiers.has(a)?(e(),d._activeKeyModifiers.add(a)):
!b&&d._activeKeyModifiers.has(a)&&(e(),d._activeKeyModifiers.delete(a))};if("key-down"===a||"key-up"===a){var g=b.key;this._keyModifiers.has(g)&&f(g,"key-down"===a)}a=b.native;f("Alt",!(!a||!a.altKey));f("Ctrl",!(!a||!a.ctrlKey));f("Shift",!(!a||!a.shiftKey));f("Meta",!(!a||!a.metaKey));f("Primary",this._activeKeyModifiers.has(this.primaryKey))}};b.prototype._installRecognizers=function(){var a=this;this._latestPointerTypeHandler=new d.LatestPointerType(function(b){return a._setLatestPointerType(b)});
0<this._recognizers.length&&this.installHandlers("default",this._recognizers);this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler])};b.prototype._setPointerCapture=function(a,b,d,c){a=a.name+"-"+b.priorityIndex;b=this._pointerCaptures.get(d.pointerId)||new Set;this._pointerCaptures.set(d.pointerId,b);c?(b.add(a),1===b.size&&this._browserEvents&&this._browserEvents.setPointerCapture(d,!0)):(b.delete(a),0===b.size&&(this._pointerCaptures.delete(d.pointerId),this._browserEvents&&
this._browserEvents.setPointerCapture(d,!1)))};b.prototype._garbageCollectRemovedHandlers=function(){this._handlers=this._handlers.filter(function(a){return!a.removed});this.updateDependencies()};b.prototype._emitInputEventFromSource=function(a,b,d){this._emitInputEvent(0,a,b,d)};b.prototype._emitInputEvent=function(a,b,d,c,f){c=c||(this._currentPropagation?this._currentPropagation.timestamp:e());b=new n(b,d,c,f||this._activeKeyModifiers);this._currentPropagation?this._currentPropagation.addedEvents.push(b):
this._doNewPropagation(a,b)};b.prototype._doNewPropagation=function(a,b){for(a=this._currentPropagation={events:[b],addedEvents:[],currentHandler:this._handlersPriority[a],needsHandlerGarbageCollect:!1,timestamp:b.timestamp};a.currentHandler;){if(a.currentHandler.removed)a.needsHandlerGarbageCollect=!0;else{b=a.events;var d=[];a.addedEvents=[];for(var c=0;c<b.length;c++){var e=b[c];a.currentHandler.active&&a.currentHandler.eventCallback(e);e.shouldStopPropagation()||d.push(e)}a.events=d.concat(a.addedEvents)}a.currentHandler=
this._handlersPriority[a.currentHandler.priorityIndex+1]}a.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers();this._currentPropagation=null};b.prototype._compareHandlerPriority=function(a,b){if(a.handler.hasSideEffects!==b.handler.hasSideEffects)return a.handler.hasSideEffects?1:-1;for(var d=0,c=a.handler.incomingEventMatches;d<c.length;d++)for(var e=c[d],f=function(a){if(e.eventType!==a.eventType)return"continue";var b=e.keyModifiers.filter(function(b){return-1!==a.keyModifiers.indexOf(b)});
if(b.length===e.keyModifiers.length!==(b.length===a.keyModifiers.length))return{value:e.keyModifiers.length>a.keyModifiers.length?-1:1}},g=0,k=b.handler.incomingEventMatches;g<k.length;g++){var h=f(k[g]);if("object"===typeof h)return h.value}return a.priorityIndex>b.priorityIndex?-1:1};b.prototype._sortHandlersPriority=function(a){for(var b=[],d=0;d<a.length;d++){for(var c=a[d],e=0;e<b.length&&0<=this._compareHandlerPriority(c,b[e]);)e++;b.splice(e,0,c)}return b};return b}(a.declared(b));c([a.property({readOnly:!0})],
h.prototype,"latestPointerType",void 0);h=c([a.subclass("esri.views.input.InputManager")],h);l.InputManager=h;var n=function(){function a(a,b,d,c){this.type=a;this.data=b;this.timestamp=d;this.modifiers=c;this._stopPropagation=!1}a.prototype.stopPropagation=function(){this._stopPropagation=!0};a.prototype.shouldStopPropagation=function(){return this._stopPropagation};return a}()})},"esri/views/input/keys":function(){define(["require","exports","../../core/sniff"],function(h,l,g){Object.defineProperty(l,
"__esModule",{value:!0});l.primaryKey=g("mac")?"Meta":"Ctrl";var c={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(h=48;58>h;h++)c[h]=String.fromCharCode(h);for(h=1;25>h;h++)c[111+h]="F"+h;for(h=65;91>h;h++)c[h]=[String.fromCharCode(h+32),String.fromCharCode(h)];var a={Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown"};l.eventKey=function(b){if(void 0!==
b.key)return a[b.key]||b.key;var e=c[b.keyCode];return Array.isArray(e)?b.shiftKey?e[1]:e[0]:e};l.isSystemModifier=function(a){switch(a){case "Ctrl":case "Alt":case "Shift":case "Meta":case "Primary":return!0}}})},"esri/views/input/recognizers":function(){define("require exports ./recognizers/Drag ./recognizers/PointerClickHoldAndDrag ./recognizers/SingleAndDoubleClick ./recognizers/VerticalTwoFingerDrag".split(" "),function(h,l,g,c,a,b){Object.defineProperty(l,"__esModule",{value:!0});l.defaults=
[c.PointerClickHoldAndDrag,a.SingleAndDoubleClick,g.Drag,b.VerticalTwoFingerDrag]})},"esri/views/input/recognizers/Drag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../InputHandler ./support ../../../core/now".split(" "),function(h,l,g,c,a,b){Object.defineProperty(l,"__esModule",{value:!0});h=function(c){function e(){var a=c.call(this,"recognizers.Drag",!1)||this;a._startStateModifiers=new Set;a._activePointers=[];a._activePointerMap=new Map;a._isDragging=!1;a._drag=a.registerOutgoing("drag");
a.registerIncoming("pointer-drag",a._handlePointerDrag.bind(a));a.registerIncoming("pointer-down",a._handlePointerDown.bind(a));a.registerIncoming("pointer-up",a._handlePointerUpAndPointerLost.bind(a));a.registerIncoming("pointer-capture-lost",a._handlePointerUpAndPointerLost.bind(a));return a}g(e,c);e.prototype._createPayload=function(a,b){return{action:a,pointers:this._activePointers.map(function(a){return a.data}),startState:this._startState,previousState:this._previousState,currentState:b}};e.prototype._fitCircleLSQ=
function(){var b=this._activePointers.map(function(a){return a.data.currentEvent});return a.fitCircleLSQ(b)};e.prototype._createDragState=function(){for(var a=this._fitCircleLSQ(),c=0,d=0,e=this._activePointers;d<e.length;d++){for(var g=e[d],k=this._pointerAngle(g,a),k=k-g.lastAngle;k>Math.PI;)k-=2*Math.PI;for(;k<-Math.PI;)k+=2*Math.PI;k=g.lastAngle+k;g.lastAngle=k;c+=k-g.initialAngle}c/=this._activePointers.length;return{angle:c,radius:a.radius,center:a.center,timestamp:b()}};e.prototype._updateMultiPointer=
function(a){var b=a.startEvent.native.pointerId,d=this._activePointerMap.get(b),c=!d;c?(d={data:null,initialAngle:0,lastAngle:0},this._activePointers.push(d),this._activePointerMap.set(b,d),d.data={startEvent:a.startEvent,previousEvent:a.previousEvent,currentEvent:a.currentEvent},a=this._fitCircleLSQ(),d.initialAngle=this._pointerAngle(d,a),d.lastAngle=d.initialAngle):d.data={startEvent:d.data.startEvent,previousEvent:a.previousEvent,currentEvent:a.currentEvent};c&&this._isDragging&&this._updateInitialAngles();
return d};e.prototype._pointerAngle=function(a,b){a=a.data.currentEvent;return Math.atan2(a.y-b.center.y,a.x-b.center.x)};e.prototype._updateInitialAngles=function(){for(var a=this._createDragState(),b=0,d=this._activePointers;b<d.length;b++){var c=d[b];c.initialAngle=this._pointerAngle(c,a)}};e.prototype._emitStart=function(a){this._updateInitialAngles();var b=this._createDragState();this._previousState=this._startState=b;this._startStateModifiers=a.modifiers;this._isDragging=!0;for(var d=0,c=this._activePointers;d<
c.length;d++){var e=c[d];e.data={previousEvent:e.data.currentEvent,startEvent:e.data.currentEvent,currentEvent:e.data.currentEvent}}this._drag.emit(this._createPayload("start",b),a.timestamp)};e.prototype._emitUpdate=function(a){a=this._createDragState();this._drag.emit(this._createPayload("update",a),void 0,this._startStateModifiers);this._previousState=a};e.prototype._emitEnd=function(){var a=this._createDragState();this._drag.emit(this._createPayload("end",a),void 0,this._startStateModifiers);
this._startState=this._previousState=null;this._isDragging=!1};e.prototype._handlePointerDown=function(a){a=a.data;this._isDragging&&this._emitEnd();this._updateMultiPointer({startEvent:a,previousEvent:a,currentEvent:a})};e.prototype._removeMultiPointer=function(a){var b=a.native.pointerId,d=this._activePointerMap.get(b);d&&(this._isDragging&&(this._updateMultiPointer({startEvent:d.data.startEvent,previousEvent:d.data.currentEvent,currentEvent:a}),this._emitEnd()),this._activePointerMap.delete(b),
a=this._activePointers.indexOf(d),this._activePointers.splice(a,1),this._isDragging&&this._updateInitialAngles())};e.prototype._handlePointerUpAndPointerLost=function(a){this._removeMultiPointer(a.data)};e.prototype._handlePointerDrag=function(a){var b=a.data;switch(b.action){case "start":this._isDragging||this._emitStart(a);break;case "update":this._isDragging||this._emitStart(a),this._updateMultiPointer(b),this._emitUpdate(a)}};return e}(c.InputHandler);l.Drag=h})},"esri/views/input/InputHandler":function(){define(["require",
"exports","./EventMatch","../../core/Logger"],function(h,l,g,c){Object.defineProperty(l,"__esModule",{value:!0});var a=c.getLogger("esri.views.input");h=function(){function c(a,b){this._manager=null;this._incoming={};this._outgoing={};this._outgoingEventTypes=this._incomingEventTypes=this._incomingEventMatches=null;this._name=a;this._hasSideEffects=b}Object.defineProperty(c.prototype,"incomingEventMatches",{get:function(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(var a in this._incoming)for(var b=
0,d=this._incoming[a];b<d.length;b++)this._incomingEventMatches.push(d[b].match)}return this._incomingEventMatches},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"incomingEventTypes",{get:function(){this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(function(a){return a.eventType}));return this._incomingEventTypes},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"outgoingEventTypes",{get:function(){this._outgoingEventTypes||(this._outgoingEventTypes=
Object.keys(this._outgoing));return this._outgoingEventTypes},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"hasSideEffects",{get:function(){return this._hasSideEffects},enumerable:!0,configurable:!0});c.prototype.onInstall=function(b){var c=this;this._manager?a.error("This InputHandler has already been registered with an InputManager"):(b.setEventCallback(function(a){return c._handleEvent(a)}),b.setUninstallCallback(function(){return c._onUninstall()}),this._manager=b)};c.prototype.onUninstall=
function(){};c.prototype.registerIncoming=function(a,c,d){var e=this;"function"===typeof c?(d=c,c=[]):c=c||[];a="string"===typeof a?new g.EventMatch(a,c):a;var f=function(){e._incomingEventTypes=null;e._incomingEventMatches=null};c=function(a){var b=e._incoming[a.match.eventType];b&&(a=b.indexOf(a),b.splice(a,1),f(),e._manager&&e._manager.updateDependencies())};d=new b(a,d,{onPause:c,onRemove:c,onResume:function(a){var b=e._incoming[a.match.eventType];b&&-1===b.indexOf(a)&&(b.push(a),f(),e._manager&&
e._manager.updateDependencies())}});c=this._incoming[a.eventType];c||(c=[],this._incoming[a.eventType]=c);c.push(d);f();this._manager&&this._manager.updateDependencies();return d};c.prototype.registerOutgoing=function(a){var b=this;if(this._outgoing[a])throw Error("There is already a callback registered for this outgoing InputEvent: "+a);var c=new e(a,{onEmit:function(a,c,d,e){b._manager.emit(a.eventType,c,d,e)},onRemove:function(a){delete b._outgoing[a.eventType];b._manager.updateDependencies()}});
this._outgoing[a]=c;this._outgoingEventTypes=null;this._manager&&this._manager.updateDependencies();return c};c.prototype.startCapturingPointer=function(a){this._manager.setPointerCapture(a,!0)};c.prototype.stopCapturingPointer=function(a){this._manager.setPointerCapture(a,!1)};c.prototype._onUninstall=function(){this._manager?(this.onUninstall(),this._manager=null):a.error("This InputHandler is not registered with an InputManager")};c.prototype._handleEvent=function(a){var b=this._incoming[a.type];
if(b)for(var c=0;c<b.length;c++){var e=b[c];if(e.match.matches(a)&&(e.callback(a),a.shouldStopPropagation()))break}};return c}();l.InputHandler=h;var b=function(){function a(a,b,c){this.match=a;this._callback=b;this._handler=c}a.prototype.pause=function(){this._handler.onPause(this)};a.prototype.resume=function(){this._handler.onResume(this)};a.prototype.remove=function(){this._handler.onRemove(this)};Object.defineProperty(a.prototype,"callback",{get:function(){return this._callback},enumerable:!0,
configurable:!0});return a}(),e=function(){function a(a,b){this.eventType=a;this._removed=!1;this._handler=b}a.prototype.emit=function(a,b,c){if(!this._removed)this._handler.onEmit(this,a,b,c)};a.prototype.remove=function(){this._removed=!0;this._handler.onRemove(this)};return a}()})},"esri/views/input/EventMatch":function(){define(["require","exports"],function(h,l){Object.defineProperty(l,"__esModule",{value:!0});h=function(){function g(c,a){void 0===a&&(a=[]);this.eventType=c;this.keyModifiers=
a}g.prototype.matches=function(c){if(c.type!==this.eventType)return!1;if(0===this.keyModifiers.length)return!0;c=c.modifiers;for(var a=0,b=this.keyModifiers;a<b.length;a++)if(!c.has(b[a]))return!1;return!0};return g}();l.EventMatch=h})},"esri/views/input/recognizers/support":function(){define(["require","exports"],function(h,l){Object.defineProperty(l,"__esModule",{value:!0});l.manhattanDistance=function(g,c){return Math.abs(c.x-g.x)+Math.abs(c.y-g.y)};l.fitCircleLSQ=function(g,c){c?(c.radius=0,c.center.x=
0,c.center.y=0):c={radius:0,center:{x:0,y:0}};if(0===g.length)return c;if(1===g.length)return c.center.x=g[0].x,c.center.y=g[0].y,c;if(2===g.length){var a=g[0];g=g[1];var b=[g.x-a.x,g.y-a.y],e=b[0],b=b[1];c.radius=Math.sqrt(e*e+b*b)/2;c.center.x=(a.x+g.x)/2;c.center.y=(a.y+g.y)/2;return c}for(var k=0,f=0,h=0;h<g.length;h++)k+=g[h].x,f+=g[h].y;for(var k=k/g.length,f=f/g.length,d=g.map(function(a){return a.x-k}),l=g.map(function(a){return a.y-f}),n=a=c=0,t=0,u=e=0,h=b=0;h<d.length;h++){var w=d[h],p=
l[h],q=w*w,x=p*p;c+=q;a+=x;n+=w*p;t+=q*w;e+=x*p;u+=w*x;b+=p*q}h=c;d=n;l=a;t=.5*(t+u);e=.5*(e+b);b=h*l-n*d;u=(t*l-e*d)/b;e=(h*e-n*t)/b;return{radius:Math.sqrt(u*u+e*e+(c+a)/g.length),center:{x:u+k,y:e+f}}}})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler","./support"],function(h,l,g,c,a){Object.defineProperty(l,"__esModule",{value:!0});h=function(b){function c(a,c,e){void 0===a&&(a=300);void 0===
c&&(c=1.5);void 0===e&&(e=500);var d=b.call(this,"recognizers.PointerClickHoldAndDrag",!1)||this;d.maximumClickDelay=a;d.movementUntilDrag=c;d.holdDelay=e;d._pointerState=new Map;d._modifiers=new Set;d._pointerDrag=d.registerOutgoing("pointer-drag");d._pointerClick=d.registerOutgoing("pointer-click");d._pointerHold=d.registerOutgoing("hold");d.registerIncoming("pointer-down",d._handlePointerDown.bind(d));d.registerIncoming("pointer-up",d._handlePointerUpOrLost.bind(d));d.registerIncoming("pointer-capture-lost",
d._handlePointerUpOrLost.bind(d));d._moveHandle=d.registerIncoming("pointer-move",d._handlePointerMove.bind(d));d._moveHandle.pause();return d}g(c,b);c.prototype.onUninstall=function(){this._pointerState.forEach(function(a){0!==a.holdTimeout&&(clearTimeout(a.holdTimeout),a.holdTimeout=0)});b.prototype.onUninstall.call(this)};c.prototype._handlePointerDown=function(a){var b=this,c=a.data,d=c.native.pointerId,e=0;0===this._pointerState.size&&(e=setTimeout(function(){var c=b._pointerState.get(d);c&&
(c.isDragging||(b._pointerHold.emit(c.previousEvent,void 0,a.modifiers),c.holdEmitted=!0),c.holdTimeout=0)},this.holdDelay));1===this._pointerState.size&&this._pointerState.forEach(function(a){0!==a.holdTimeout&&(clearTimeout(a.holdTimeout),a.holdTimeout=0)});this._pointerState.set(d,{startEvent:c,previousEvent:c,startTimestamp:a.timestamp,totalMovement:0,isDragging:!1,downButton:c.native.button,holdTimeout:e});this.startCapturingPointer(c.native);this._moveHandle.resume()};c.prototype._createPointerDragData=
function(a,b,c){return{action:a,startEvent:b.startEvent,previousEvent:b.previousEvent,currentEvent:c}};c.prototype._handlePointerMove=function(b){var c=b.data,e=this._pointerState.get(c.native.pointerId);e&&(e.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",e,c),void 0,this._modifiers):(e.totalMovement+=a.manhattanDistance(c,e.previousEvent),e.totalMovement>this.movementUntilDrag&&(e.isDragging=!0,e.previousEvent=e.startEvent,this._modifiers=b.modifiers,0!==e.holdTimeout&&clearTimeout(e.holdTimeout),
this._pointerDrag.emit(this._createPointerDragData("start",e,e.startEvent),e.startTimestamp),this._pointerDrag.emit(this._createPointerDragData("update",e,c)))),e.previousEvent=c)};c.prototype._handlePointerUpOrLost=function(a){var b=a.data,c=b.native.pointerId,d=this._pointerState.get(c);d&&(0!==d.holdTimeout&&clearTimeout(d.holdTimeout),d.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",d,b),void 0,this._modifiers):d.downButton===b.native.button&&a.timestamp-d.startTimestamp<=
this.maximumClickDelay&&!d.holdEmitted&&this._pointerClick.emit(b),this._pointerState.delete(c),this.stopCapturingPointer(b.native),0===this._pointerState.size&&this._moveHandle.pause())};return c}(c.InputHandler);l.PointerClickHoldAndDrag=h})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler","./support"],function(h,l,g,c,a){Object.defineProperty(l,"__esModule",{value:!0});h=function(b){function c(a,
c,e){void 0===a&&(a=250);void 0===c&&(c=10);void 0===e&&(e=35);var d=b.call(this,"recognizers.SingleAndDoubleClick",!1)||this;d.maximumDoubleClickDelay=a;d.maximumDoubleClickDistance=c;d.maximumDoubleTouchDistance=e;d._pointerState=new Map;d._click=d.registerOutgoing("click");d._doubleClick=d.registerOutgoing("double-click");d.registerIncoming("pointer-click",d._handlePointerClick.bind(d));return d}g(c,b);c.prototype._pointerId=function(a){a=a.native;return"mouse"===a.pointerType?a.pointerId+":"+
a.button:""+a.pointerType};c.prototype._handlePointerClick=function(b){var c=b.data,e=this._pointerId(c),d=this._pointerState.get(e);if(d){clearTimeout(d.doubleClickTimeout);d.doubleClickTimeout=0;var g="touch"===c.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;a.manhattanDistance(d.event.data,c)>g?(this._doubleClickTimeoutExceeded(e),this._startClick(b)):(this._doubleClick.emit(c,void 0,d.event.modifiers),this._pointerState.delete(e))}else this._startClick(b)};
c.prototype._startClick=function(a){var b=this,c=this._pointerId(a.data);this._pointerState.set(c,{event:a,doubleClickTimeout:setTimeout(function(){return b._doubleClickTimeoutExceeded(c)},this.maximumDoubleClickDelay)})};c.prototype._doubleClickTimeoutExceeded=function(a){var b=this._pointerState.get(a);this._click.emit(b.event.data,void 0,b.event.modifiers);b.doubleClickTimeout=0;this._pointerState.delete(a)};return c}(c.InputHandler);l.SingleAndDoubleClick=h})},"esri/views/input/recognizers/VerticalTwoFingerDrag":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(h,l,g,c){Object.defineProperty(l,"__esModule",{value:!0});h=function(a){function b(b,c){void 0===b&&(b=20);void 0===c&&(c=40);var e=a.call(this,"recognizers.VerticalTwoFingerDrag",!1)||this;e._threshold=b;e._maxDelta=c;e._failed=!1;e._active=!1;e._vertical=e.registerOutgoing("vertical-two-finger-drag");e._artificalDragEnd=e.registerOutgoing("drag");e.registerIncoming("drag",e._handleDrag.bind(e));return e}g(b,a);Object.defineProperty(b.prototype,
"failed",{get:function(){return this._failed},enumerable:!0,configurable:!0});b.prototype._handleDrag=function(a){if(2===a.data.pointers.length)switch(a.data.action){case "start":this._handleDragStart(a);break;case "update":this._handleDragUpdate(a);break;case "end":this._handleDragEnd(a)}};b.prototype._handleDragStart=function(a){this._failed=!1;this._dragStartCenter=a.data.currentState.center};b.prototype._handleDragUpdate=function(a){this._failed||(this._active?(this._vertical.emit({delta:a.data.currentState.center.y-
this._thresholdReachedCenter.y,action:"update"}),a.stopPropagation()):(this._failed=!this._checkDeltaConstraint(a.data),!this._failed&&this._checkThresholdReached(a.data)&&(this._active=!0,this._thresholdReachedCenter=a.data.currentState.center,this._artificalDragEnd.emit({action:"end",currentState:a.data.currentState,previousState:a.data.previousState,startState:a.data.startState,pointers:a.data.pointers}),this._vertical.emit({delta:a.data.currentState.center.y-this._thresholdReachedCenter.y,action:"begin"}),
a.stopPropagation())))};b.prototype._handleDragEnd=function(a){this._active&&(this._vertical.emit({delta:a.data.currentState.center.y-this._thresholdReachedCenter.y,action:"end"}),a.stopPropagation());this._active=!1};b.prototype._checkDeltaConstraint=function(a){var b=Math.abs(a.pointers[0].startEvent.x-a.pointers[1].startEvent.x),c=Math.abs(a.pointers[0].startEvent.y-a.pointers[1].startEvent.y),e=Math.abs(a.pointers[0].currentEvent.y-a.pointers[1].currentEvent.y),d=Math.abs(a.pointers[0].currentEvent.x-
a.pointers[1].currentEvent.x);return Math.abs(a.currentState.center.x-a.startState.center.x)<this._threshold&&Math.abs(d-b)<=this._maxDelta&&Math.abs(e-c)<=this._maxDelta};b.prototype._checkThresholdReached=function(a){return Math.min(Math.abs(a.pointers[0].currentEvent.y-a.pointers[0].startEvent.y),Math.abs(a.pointers[1].currentEvent.y-a.pointers[1].startEvent.y),Math.abs(a.currentState.center.y-a.startState.center.y))>=this._threshold};return b}(c.InputHandler);l.VerticalTwoFingerDrag=h})},"esri/views/input/handlers/LatestPointerType":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(h,l,g,c){Object.defineProperty(l,"__esModule",{value:!0});h=function(a){function b(b){var c=a.call(this,"LatestPointerInteraction",!0)||this;c._onChange=b;c._value="mouse";c.registerIncoming("pointer-down",function(a){c._setValue("touch"===a.data.native.pointerType?"touch":"mouse")});c._moveHandler=c.registerIncoming("pointer-move",function(a){c._setValue("touch"===a.data.native.pointerType?"touch":"mouse")});c._moveHandler.pause();
return c}g(b,a);b.prototype._setValue=function(a){a!==this._value&&("touch"===a?this._moveHandler.resume():this._moveHandler.pause(),this._value=a,this._onChange(a))};return b}(c.InputHandler);l.LatestPointerType=h})},"esri/views/input/BrowserEventSource":function(){define(["require","exports","./keys","../../core/libs/pep/pep","dojo/sniff"],function(h,l,g,c,a){Object.defineProperty(l,"__esModule",{value:!0});var b=a("trident"),e=a("edge"),k=a("chrome"),f=a("ff"),m=a("safari");h=function(){function a(a){this._active=
{};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._element=a;c.applyLocal(a);a.getAttribute("tabindex")||a.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointerDown,"pointer-move":this._handlePointer,"pointer-up":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._initialCssTouchAction=a.style.touchAction;a.style.touchAction="none"}
a.prototype.destroy=function(){var a=this;this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(function(b){a._element.releasePointerCapture(b)});this._activePointerCaptures=null;this._element.style.touchAction=this._initialCssTouchAction};Object.defineProperty(a.prototype,"onEventReceived",{set:function(a){this._callback=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"activeEvents",{set:function(a){var b=this,c;for(c in this._active)a&&a.has(c)||(this._element.removeEventListener(d[c],
this._active[c]),delete this._active[c]);a&&a.forEach(function(a){if(!b._active[a]&&d[a]){var c=(b._eventHandlers[a]||b._handleDefault).bind(b,a);b._element.addEventListener(d[a],c);b._active[a]=c}})},enumerable:!0,configurable:!0});a.prototype.setPointerCapture=function(a,b){b?(this._element.setPointerCapture(a.pointerId),this._activePointerCaptures.add(a.pointerId)):(this._element.releasePointerCapture(a.pointerId),this._activePointerCaptures.delete(a.pointerId))};a.prototype._updateNormalizedPointerLikeEvent=
function(a,b){var c=this._element.getBoundingClientRect();b.x=a.clientX-Math.round(c.left);b.y=a.clientY-Math.round(c.top);return b};a.prototype._handleKey=function(a,b){var c=g.eventKey(b);c&&"key-up"===a&&this._keyDownState.delete(c);b={native:b,key:c,repeat:c&&this._keyDownState.has(c)};c&&"key-down"===a&&this._keyDownState.add(b.key);this._callback(a,b)};a.prototype._handlePointerDown=function(a,b){b=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0});this._callback(a,b)};a.prototype._handlePointer=
function(a,b){var c=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0});b.preventDefault();this._callback(a,c)};a.prototype._handleMouseWheel=function(a,c){c.preventDefault();var d=c.deltaY;switch(c.deltaMode){case 0:if(b||e)d=d/document.documentElement.clientHeight*600;break;case 1:d*=30;break;case 2:d*=900}b||e?d*=.7:k||m?d*=.6:f&&(d*=1.375);var g=Math.abs(d);100<g&&(d=d/g*200/(1+Math.exp(-.02*(g-100))));c=this._updateNormalizedPointerLikeEvent(c,{native:c,x:0,y:0,deltaY:d});this._callback(a,
c)};a.prototype._handlePointerCaptureLost=function(a,b){this._activePointerCaptures.delete(b.pointerId);this._handleDefault(a,b)};a.prototype._handleDefault=function(a,b){var c={native:b};b.preventDefault();this._callback(a,c)};return a}();l.BrowserEventSource=h;var d={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu"}})},
"esri/core/libs/pep/pep":function(){define(function(){function h(a,b){b=b||Object.create(null);var c=document.createEvent("Event");c.initEvent(a,b.bubbles||!1,b.cancelable||!1);a=2;for(var e;a<m.length;a++)e=m[a],c[e]=b[e]||d[a];c.buttons=b.buttons||0;a=0;a=b.pressure?b.pressure:c.buttons?.5:0;c.x=c.clientX;c.y=c.clientY;c.pointerId=b.pointerId||0;c.width=b.width||0;c.height=b.height||0;c.pressure=a;c.tiltX=b.tiltX||0;c.tiltY=b.tiltY||0;c.pointerType=b.pointerType||"";c.hwTimestamp=b.hwTimestamp||
0;c.isPrimary=b.isPrimary||!1;return c}function l(){this.array=[];this.size=0}function g(a,b,c,d){this.addCallback=a.bind(d);this.removeCallback=b.bind(d);this.changedCallback=c.bind(d);B&&(this.observer=new B(this.mutationWatcher.bind(this)))}function c(b){return"body /shadow-deep/ "+a(b)}function a(a){return'[touch-action\x3d"'+a+'"]'}function b(a){return"{ -ms-touch-action: "+a+"; touch-action: "+a+"; touch-action-delay: none; }"}function e(){if(v){H.forEach(function(d){String(d)===d?(y+=a(d)+
b(d)+"\n",F&&(y+=c(d)+b(d)+"\n")):(y+=d.selectors.map(a)+b(d.rule)+"\n",F&&(y+=d.selectors.map(c)+b(d.rule)+"\n"))});var d=document.createElement("style");d.textContent=y;document.head.appendChild(d)}}function k(a){if(!p.pointermap.has(a))throw a=Error("InvalidPointerId"),a.name="InvalidPointerId",a;}function f(a){if(!a.ownerDocument.contains(a))throw a=Error("InvalidStateError"),a.name="InvalidStateError",a;}var m="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),
d=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],r=window.Map&&window.Map.prototype.forEach?Map:l;l.prototype={set:function(a,b){if(void 0===b)return this.delete(a);this.has(a)||this.size++;this.array[a]=b},has:function(a){return void 0!==this.array[a]},delete:function(a){this.has(a)&&(delete this.array[a],this.size--)},get:function(a){return this.array[a]},clear:function(){this.size=this.array.length=0},forEach:function(a,b){return this.array.forEach(function(c,d){a.call(b,c,d,this)},this)}};var n=
"bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),t=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],u={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},w="undefined"!==typeof SVGElementInstance,p={pointermap:new r,eventMap:Object.create(null),
captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var c=b.events;c&&(c.forEach(function(a){b[a]&&(this.eventMap[a]=b[a].bind(b))},this),this.eventSources[a]=b,this.eventSourceList.push(b))},register:function(a){for(var b=this.eventSourceList.length,c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.register.call(d,a)},unregister:function(a){for(var b=this.eventSourceList.length,c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.unregister.call(d,
a)},contains:function(a,b){try{return a.contains(b)}catch(X){return!1}},down:function(a){a.bubbles=!0;this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0;this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0;this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=!1;this.fireEvent("pointerenter",a)},leave:function(a){a.bubbles=!1;this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0;this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0;this.fireEvent("pointerout",
a)},cancel:function(a){a.bubbles=!0;this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a);this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a);this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type;(b=this.eventMap&&this.eventMap[b])&&b(a);a._handledByPE=!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,
this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(a,b){this.captureInfo[b.pointerId]&&(b.relatedTarget=null);a=new h(a,b);b.preventDefault&&(a.preventDefault=b.preventDefault);a._target=a._target||b.target;return a},fireEvent:function(a,b){a=this.makeEvent(a,b);return this.dispatchEvent(a)},cloneEvent:function(a){for(var b=Object.create(null),c,d=0;d<n.length;d++)c=n[d],b[c]=a[c]||t[d],w&&("target"===c||"relatedTarget"===c)&&b[c]instanceof
SVGElementInstance&&(b[c]=b[c].correspondingUseElement);a.preventDefault&&(b.preventDefault=function(){a.preventDefault()});return b},getTarget:function(a){var b=this.captureInfo[a.pointerId];if(!b)return a._target;if(a._target===b||!(a.type in u))return b},propagate:function(a,b,c){for(var d=a.target,e=[];!d.contains(a.relatedTarget)&&d!==document;)e.push(d),d=d.parentNode;c&&e.reverse();e.forEach(function(c){a.target=c;b.call(this,a)},this)},setCapture:function(a,b){this.captureInfo[a]&&this.releaseCapture(a);
this.captureInfo[a]=b;var c=new h("gotpointercapture");c.pointerId=a;this.implicitRelease=this.releaseCapture.bind(this,a);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);c._target=b;this.asyncDispatchEvent(c)},releaseCapture:function(a){var b=this.captureInfo[a];if(b){var c=new h("lostpointercapture");c.pointerId=a;this.captureInfo[a]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",
this.implicitRelease);c._target=b;this.asyncDispatchEvent(c)}},dispatchEvent:function(a){var b=this.getTarget(a);if(b)return b.dispatchEvent(a)},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,a))}};p.boundHandler=p.eventHandler.bind(p);var q={shadow:function(a){if(a)return a.shadowRoot||a.webkitShadowRoot},canTarget:function(a){return a&&!!a.elementFromPoint},targetingShadow:function(a){a=this.shadow(a);if(this.canTarget(a))return a},olderShadow:function(a){var b=
a.olderShadowRoot;!b&&(a=a.querySelector("shadow"))&&(b=a.olderShadowRoot);return b},allShadows:function(a){var b=[];for(a=this.shadow(a);a;)b.push(a),a=this.olderShadow(a);return b},searchRoot:function(a,b,c){if(a){var d=a.elementFromPoint(b,c),e;for(e=this.targetingShadow(d);e;){if(a=e.elementFromPoint(b,c))return d=this.targetingShadow(a),this.searchRoot(d,b,c)||a;e=this.olderShadow(e)}return d}},owner:function(a){for(;a.parentNode;)a=a.parentNode;a.nodeType!==Node.DOCUMENT_NODE&&a.nodeType!==
Node.DOCUMENT_FRAGMENT_NODE&&(a=document);return a},findTarget:function(a){var b=a.clientX,c=a.clientY;a=this.owner(a.target);a.elementFromPoint(b,c)||(a=document);return this.searchRoot(a,b,c)}},x=Array.prototype.forEach.call.bind(Array.prototype.forEach),A=Array.prototype.map.call.bind(Array.prototype.map),C=Array.prototype.slice.call.bind(Array.prototype.slice),z=Array.prototype.filter.call.bind(Array.prototype.filter),B=window.MutationObserver||window.WebKitMutationObserver,D={subtree:!0,childList:!0,
attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};g.prototype={watchSubtree:function(a){this.observer&&q.canTarget(a)&&this.observer.observe(a,D)},enableOnSubtree:function(a){this.watchSubtree(a);a===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(a)},installNewSubtree:function(a){x(this.findElements(a),this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll("[touch-action]"):[]},removeElement:function(a){this.removeCallback(a)},
addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(C(b))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(a){return a.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(a){var b=A(a,this.findElements,this);b.push(z(a,this.isElement));return b.reduce(this.concatLists,[])},
mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){"childList"===a.type?(this.flattenMutationTree(a.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(a.removedNodes).forEach(this.removeElement,this)):"attributes"===a.type&&this.elementChanged(a.target,a.oldValue)}};var H=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],y="",v=window.PointerEvent||window.MSPointerEvent,F=!window.ShadowDOMPolyfill&&
document.head.createShadowRoot,E=p.pointermap,G=[1,4,2,8,16],I=!1;try{I=1===(new MouseEvent("test",{buttons:1})).buttons}catch(W){}var L={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){p.listen(a,this.events)},unregister:function(a){p.unlisten(a,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){var b=this.lastTouches,c=a.clientX;a=a.clientY;for(var d=0,e=b.length,f;d<e&&(f=b[d]);d++){var g=Math.abs(a-f.y);if(25>=
Math.abs(c-f.x)&&25>=g)return!0}},prepareEvent:function(a){var b=p.cloneEvent(a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=this.POINTER_ID;b.isPrimary=!0;b.pointerType=this.POINTER_TYPE;return b},prepareButtonsForMove:function(a,b){var c=E.get(this.POINTER_ID);a.buttons=0!==b.which&&c?c.buttons:0;b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=E.get(this.POINTER_ID),c=this.prepareEvent(a);I||(c.buttons=G[c.button],b&&
(c.buttons|=b.buttons),a.buttons=c.buttons);E.set(this.POINTER_ID,a);b&&0!==b.buttons?p.move(c):p.down(c)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);I||this.prepareButtonsForMove(b,a);b.button=-1;E.set(this.POINTER_ID,a);p.move(b)}},mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=E.get(this.POINTER_ID),c=this.prepareEvent(a);if(!I){var d=G[c.button];c.buttons=b?b.buttons&~d:0;a.buttons=c.buttons}E.set(this.POINTER_ID,a);c.buttons&=~G[c.button];
0===c.buttons?p.up(c):p.move(c)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);I||this.prepareButtonsForMove(b,a);b.button=-1;E.set(this.POINTER_ID,a);p.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);I||this.prepareButtonsForMove(b,a);b.button=-1;p.leaveOut(b)}},cancel:function(a){a=this.prepareEvent(a);p.cancel(a);this.deactivateMouse()},deactivateMouse:function(){E.delete(this.POINTER_ID)}},M=p.captureInfo,
T=q.findTarget.bind(q),P=q.allShadows.bind(q),J=p.pointermap,Q,K={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){Q.enableOnSubtree(a)},unregister:function(a){},elementAdded:function(a){var b=a.getAttribute("touch-action"),c=this.touchActionToScrollType(b);c&&(a._scrollType=c,p.listen(a,this.events),P(a).forEach(function(a){a._scrollType=c;p.listen(a,this.events)},this))},elementRemoved:function(a){a._scrollType=void 0;p.unlisten(a,this.events);P(a).forEach(function(a){a._scrollType=
void 0;p.unlisten(a,this.events)},this)},elementChanged:function(a,b){var c=a.getAttribute("touch-action"),d=this.touchActionToScrollType(c);b=this.touchActionToScrollType(b);d&&b?(a._scrollType=d,P(a).forEach(function(a){a._scrollType=d},this)):b?this.elementRemoved(a):d&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(a){var b=this.scrollTypes;if("none"===a)return"none";if(a===
b.XSCROLLER)return"X";if(a===b.YSCROLLER)return"Y";if(b.SCROLLER.exec(a))return"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(0===J.size||1===J.size&&J.has(1))this.firstTouch=a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=!1,this.cancelResetClickCount()},removePrimaryPointer:function(a){a.isPrimary&&(this.firstXY=this.firstTouch=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=
function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(a,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;if("touchstart"===a||"touchmove"===a)b=1;return b},touchToPointer:function(a){var b=this.currentTouchEvent,c=p.cloneEvent(a),d=c.pointerId=a.identifier+2;c.target=M[d]||T(c);c.bubbles=!0;c.cancelable=!0;c.detail=this.clickCount;c.button=0;c.buttons=this.typeToButtons(b.type);c.width=a.radiusX||a.webkitRadiusX||
0;c.height=a.radiusY||a.webkitRadiusY||0;c.pressure=a.force||a.webkitForce||.5;c.isPrimary=this.isPrimaryTouch(a);c.pointerType=this.POINTER_TYPE;c.altKey=b.altKey;c.ctrlKey=b.ctrlKey;c.metaKey=b.metaKey;c.shiftKey=b.shiftKey;var e=this;c.preventDefault=function(){e.scrolling=!1;e.firstXY=null;b.preventDefault()};return c},processTouches:function(a,b){var c=a.changedTouches;this.currentTouchEvent=a;a=0;for(var d;a<c.length;a++)d=c[a],b.call(this,this.touchToPointer(d))},shouldScroll:function(a){if(this.firstXY){var b;
b=a.currentTarget._scrollType;if("none"===b)b=!1;else if("XY"===b)b=!0;else{a=a.changedTouches[0];var c="Y"===b?"X":"Y";b=Math.abs(a["client"+b]-this.firstXY[b])>=Math.abs(a["client"+c]-this.firstXY[c])}this.firstXY=null;return b}},findTouch:function(a,b){for(var c=0,d=a.length,e;c<d&&(e=a[c]);c++)if(e.identifier===b)return!0},vacuumTouches:function(a){var b=a.touches;if(J.size>=b.length){var c=[];J.forEach(function(a,d){1===d||this.findTouch(b,d-2)||c.push(a.out)},this);c.forEach(this.cancelOut,
this)}},touchstart:function(a){this.vacuumTouches(a);this.setPrimaryTouch(a.changedTouches[0]);this.dedupSynthMouse(a);this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){J.set(a.pointerId,{target:a.target,out:a,outTarget:a.target});p.enterOver(a);p.down(a)},touchmove:function(a){this.scrolling||(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=J.get(a.pointerId);
if(b){var c=b.out,d=b.outTarget;p.move(a);c&&d!==a.target&&(c.relatedTarget=a.target,a.relatedTarget=d,c.target=d,a.target?(p.leaveOut(c),p.enterOver(a)):(a.target=d,a.relatedTarget=null,this.cancelOut(a)));b.out=a;b.outTarget=a.target}},touchend:function(a){this.dedupSynthMouse(a);this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||(p.up(a),p.leaveOut(a));this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){p.cancel(a);p.leaveOut(a);
this.cleanUpPointer(a)},cleanUpPointer:function(a){J.delete(a.pointerId);this.removePrimaryPointer(a)},dedupSynthMouse:function(a){var b=L.lastTouches;a=a.changedTouches[0];this.isPrimaryTouch(a)&&(a={x:a.clientX,y:a.clientY},b.push(a),b=function(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}.bind(null,b,a),setTimeout(b,2500))}};Q=new g(K.elementAdded,K.elementRemoved,K.elementChanged,K);var R=p.pointermap,U=window.MSPointerEvent&&"number"===typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,S={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),
register:function(a){p.listen(a,this.events)},unregister:function(a){p.unlisten(a,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var b=a;U&&(b=p.cloneEvent(a),b.pointerType=this.POINTER_TYPES[a.pointerType]);return b},cleanup:function(a){R.delete(a)},MSPointerDown:function(a){R.set(a.pointerId,a);a=this.prepareEvent(a);p.down(a)},MSPointerMove:function(a){a=this.prepareEvent(a);p.move(a)},MSPointerUp:function(a){var b=this.prepareEvent(a);p.up(b);this.cleanup(a.pointerId)},
MSPointerOut:function(a){a=this.prepareEvent(a);p.leaveOut(a)},MSPointerOver:function(a){a=this.prepareEvent(a);p.enterOver(a)},MSPointerCancel:function(a){var b=this.prepareEvent(a);p.cancel(b);this.cleanup(a.pointerId)},MSLostPointerCapture:function(a){a=p.makeEvent("lostpointercapture",a);p.dispatchEvent(a)},MSGotPointerCapture:function(a){a=p.makeEvent("gotpointercapture",a);p.dispatchEvent(a)}},N,O;window.navigator.msPointerEnabled?(N=function(a){k(a);f(this);0!==p.pointermap.get(a).buttons&&
this.msSetPointerCapture(a)},O=function(a){k(a);this.msReleasePointerCapture(a)}):(N=function(a){k(a);f(this);0!==p.pointermap.get(a).buttons&&p.setCapture(a,this)},O=function(a){k(a);p.releaseCapture(a,this)});var V=window.PointerEvent||window.MSPointerEvent;return{dispatcher:p,Installer:g,PointerEvent:h,PointerMap:r,targetFinding:q,applyGlobal:function(){e();window.PointerEvent||(window.PointerEvent=h,window.navigator.msPointerEnabled?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,
enumerable:!0}),p.registerSource("ms",S)):(p.registerSource("mouse",L),void 0!==window.ontouchstart&&p.registerSource("touch",K)),p.register(document));window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:N},releasePointerCapture:{value:O}})},applyLocal:function(a){V||(window.PointerEvent||(window.navigator.msPointerEnabled?p.registerSource("ms",S):(p.registerSource("mouse",L),void 0!==window.ontouchstart&&p.registerSource("touch",
K)),p.register(document)),window.Element&&!Element.prototype.setPointerCapture&&(a.setPointerCapture=N.bind(a),a.releasePointerCapture=O.bind(a)),a.getAttribute("touch-action")||a.setAttribute("touch-action","none"))}}})},"esri/views/input/ViewEvents":function(){define(["require","exports","../../core/tsSupport/extendsHelper","./InputHandler","../../geometry/ScreenPoint"],function(h,l,g,c,a){function b(a){return!!k[a]}function e(a){for(var c=0;c<a.length;c++)if(!b(a[c]))return!1;return!0}Object.defineProperty(l,
"__esModule",{value:!0});var k={click:!0,"double-click":!0,hold:!0,drag:!0,"key-down":!0,"key-up":!0,"pointer-down":!0,"pointer-move":!0,"pointer-up":!0,"mouse-wheel":!0},f;(function(a){a[a.Left=0]="Left";a[a.Middle=1]="Middle";a[a.Right=2]="Right"})(f||(f={}));h=function(){function a(a){this.handlers=new Map;this.counter=0;this.view=a;this.inputManager=null}a.prototype.connect=function(a){var b=this;a&&this.disconnect();this.inputManager=a;this.handlers.forEach(function(a,c){return b.inputManager.installHandlers(c,
[a])})};a.prototype.disconnect=function(){var a=this;this.inputManager&&this.handlers.forEach(function(b,c){return a.inputManager.uninstallHandlers(c)});this.inputManager=null};a.prototype.destroy=function(){this.disconnect();this.handlers.clear();this.view=null};a.prototype.register=function(a,c,d){var f=this;a=Array.isArray(a)?a:a.split(",");if(!e(a))return a.some(b)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;var g=Array.isArray(c)?
c:[];d=Array.isArray(c)?d:c;var h=this.createUniqueGroupName();c=new m(this.view,a,g,d);this.handlers.set(h,c);this.inputManager&&this.inputManager.installHandlers(h,[c]);return{remove:function(){return f.removeHandler(h)}}};a.prototype.removeHandler=function(a){this.handlers.has(a)&&this.handlers.delete(a);this.inputManager&&this.inputManager.uninstallHandlers(a)};a.prototype.createUniqueGroupName=function(){this.counter+=1;return"viewEvents_"+this.counter};return a}();l.ViewEvents=h;var m=function(b){function c(a,
c,d,e){var f=b.call(this,"esri.views.input.ViewEventHandler",!0)||this;f.view=a;for(a=0;a<c.length;a++)switch(c[a]){case "click":f.registerIncoming("click",d,function(a){return e(f.wrapClick(a))});break;case "double-click":f.registerIncoming("double-click",d,function(a){return e(f.wrapDoubleClick(a))});break;case "hold":f.registerIncoming("hold",d,function(a){return e(f.wrapHold(a))});break;case "drag":f.registerIncoming("drag",d,function(a){return e(f.wrapDrag(a))});break;case "key-down":f.registerIncoming("key-down",
d,function(a){return e(f.wrapKeyDown(a))});break;case "key-up":f.registerIncoming("key-up",d,function(a){return e(f.wrapKeyUp(a))});break;case "pointer-down":f.registerIncoming("pointer-down",d,function(a){return e(f.wrapPointer(a,"pointer-down"))});break;case "pointer-move":f.registerIncoming("pointer-move",d,function(a){return e(f.wrapPointer(a,"pointer-move"))});break;case "pointer-up":f.registerIncoming("pointer-up",d,function(a){return e(f.wrapPointer(a,"pointer-up"))});break;case "mouse-wheel":f.registerIncoming("mouse-wheel",
d,function(a){return e(f.wrapMouseWheel(a))})}return f}g(c,b);c.prototype.wrapClick=function(b){var c=b.data.x,d=b.data.y;return{type:"click",button:"touch"===b.data.native.pointerType?0:b.data.native.button,x:c,y:d,native:b.data.native,timestamp:b.timestamp,screenPoint:new a(c,d),mapPoint:this.view.toMap(c,d),stopPropagation:function(){return b.stopPropagation()}}};c.prototype.wrapDoubleClick=function(a){var b=a.data.x,c=a.data.y;return{type:"double-click",button:"touch"===a.data.native.pointerType?
0:a.data.native.button,x:b,y:c,native:a.data.native,timestamp:a.timestamp,mapPoint:this.view.toMap(b,c),stopPropagation:function(){return a.stopPropagation()}}};c.prototype.wrapHold=function(a){var b=a.data.x,c=a.data.y;return{type:"hold",button:"touch"===a.data.native.pointerType?0:a.data.native.button,x:b,y:c,native:a.data.native,timestamp:a.timestamp,mapPoint:this.view.toMap(b,c),stopPropagation:function(){return a.stopPropagation()}}};c.prototype.wrapDrag=function(a){return{type:"drag",action:a.data.action,
x:a.data.currentState.center.x,y:a.data.currentState.center.y,origin:{x:a.data.startState.center.x,y:a.data.startState.center.y},native:a.data.pointers[0].currentEvent.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};c.prototype.wrapKeyDown=function(a){return{type:"key-down",key:a.data.key,repeat:a.data.repeat,native:a.data.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};c.prototype.wrapKeyUp=function(a){return{type:"key-up",
key:a.data.key,native:a.data.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};c.prototype.wrapPointer=function(a,b){return{type:b,x:a.data.x,y:a.data.y,pointerId:a.data.native.pointerId,pointerType:a.data.native.pointerType,native:a.data.native,timestamp:a.timestamp,stopPropagation:function(){return a.stopPropagation()}}};c.prototype.wrapMouseWheel=function(a){return{type:"mouse-wheel",x:a.data.x,y:a.data.y,deltaY:a.data.deltaY,native:a.data.native,timestamp:a.timestamp,
stopPropagation:function(){return a.stopPropagation()}}};return c}(c.InputHandler)})},"esri/views/input/handlers/PreventContextMenu":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(h,l,g,c){Object.defineProperty(l,"__esModule",{value:!0});h=function(a){function b(){var b=a.call(this,"PreventContextMenu",!0)||this;b.registerIncoming("context-menu",function(a){a.data.native.preventDefault()});return b}g(b,a);return b}(c.InputHandler);l.PreventContextMenu=
h;l.default=h})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],function(h,l,g,c,a){Object.defineProperty(l,"__esModule",{value:!0});h=function(b){function c(a,c){var e=b.call(this,"esri.views.2d.input.handlers.DoubleClickZoom",!0)||this;e.view=a;e.registerIncoming("double-click",c,function(a){return e._handleDoubleClick(a,c)});return e}g(c,b);c.prototype._handleDoubleClick=
function(b,c){a.eventMatchesPointerType(b.data.native,"primary")&&(b.stopPropagation(),c?this.view.navigation.zoomOut([b.data.x,b.data.y]):this.view.navigation.zoomIn([b.data.x,b.data.y]))};return c}(c.InputHandler);l.DoubleClickZoom=h})},"esri/views/input/handlers/support":function(){define(["require","exports"],function(h,l){Object.defineProperty(l,"__esModule",{value:!0});l.eventMatchesPointerType=function(g,c){switch(c){case "primary":return"touch"===g.pointerType||0===g.button;case "secondary":return"touch"!==
g.pointerType&&2===g.button;case "tertiary":return"touch"!==g.pointerType&&1===g.button}}})},"esri/views/2d/input/handlers/DragPan":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],function(h,l,g,c,a){Object.defineProperty(l,"__esModule",{value:!0});h=function(b){function c(a,c,e){var d=b.call(this,"esri.views.2d.input.handlers.DragPan - "+c,!0)||this;d.view=a;d.pointerType=c;d.registerIncoming("drag",
e,function(a){return d._handleDrag(a)});d.registerIncoming("pointer-down",function(a){return d.stopMomentumNavigation()});return d}g(c,b);c.prototype._handleDrag=function(b){var c=b.data,e=this.view.navigation;if(1<c.pointers.length||e.pinch.zoomMomentum||e.pinch.rotateMomentum)this.stopMomentumNavigation();else if(a.eventMatchesPointerType(c.pointers[0].startEvent.native,this.pointerType)){e=e.pan;switch(c.action){case "start":e.begin(this.view,c);break;case "update":e.update(this.view,c);break;
case "end":e.end(this.view,c)}b.stopPropagation()}};c.prototype.stopMomentumNavigation=function(){this.view.navigation.pan.stopMomentumNavigation()};return c}(c.InputHandler);l.DragPan=h})},"esri/views/2d/input/handlers/DragRotate":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],function(h,l,g,c,a){Object.defineProperty(l,"__esModule",{value:!0});h=function(b){function c(a,c,e){var d=b.call(this,"esri.views.2d.input.handlers.DragRotate - "+
c,!0)||this;d.view=a;d.pointerType=c;d.registerIncoming("drag",e,function(a){return d._handleDrag(a)});return d}g(c,b);c.prototype._handleDrag=function(b){var c=b.data;if(!(1<c.pointers.length)&&a.eventMatchesPointerType(c.pointers[0].startEvent.native,this.pointerType)){var e=this.view.navigation.rotate;switch(c.action){case "start":e.begin(this.view,c);break;case "update":e.update(this.view,c);break;case "end":e.end(this.view,c)}b.stopPropagation()}};return c}(c.InputHandler);l.DragRotate=h})},
"esri/views/2d/input/handlers/KeyPan":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(h,l,g,c){Object.defineProperty(l,"__esModule",{value:!0});h=function(a){function b(b,c,f){var e=a.call(this,"esri.views.2d.input.handlers.KeyPan",!0)||this;e.view=b;e.keys=c;e._keyMap=(d={},d[c.left]="left",d[c.right]="right",d[c.up]="up",d[c.down]="down",d);e.registerIncoming("key-down",f,function(a){return e._handleKeyDown(a)});e.registerIncoming("key-up",
f,function(a){return e._handleKeyUp(a)});return e;var d}g(b,a);b.prototype._handleKeyDown=function(a){a.data.repeat||this._handleKey(a,!0)};b.prototype._handleKeyUp=function(a){this._handleKey(a,!1)};b.prototype._handleKey=function(a,b){var c=this._keyMap[a.data.key];if(null!=c){if(b)switch(c){case "left":this.view.navigation.continousPanLeft();break;case "right":this.view.navigation.continousPanRight();break;case "up":this.view.navigation.continousPanUp();break;case "down":this.view.navigation.continousPanDown()}else this.view.navigation.stop();
a.stopPropagation()}};return b}(c.InputHandler);l.KeyPan=h})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(h,l,g,c){Object.defineProperty(l,"__esModule",{value:!0});var a;(function(a){a[a.IN=0]="IN";a[a.OUT=1]="OUT"})(a||(a={}));h=function(b){function c(c,e,g){var d=b.call(this,"esri.views.2d.input.handlers.KeyZoom",!0)||this;d.view=c;d.keys=e;d._keysToZoomAction={};d.registerIncoming("key-down",
g,function(a){return d._handleKeyDown(a)});e.zoomIn.forEach(function(b){return d._keysToZoomAction[b]=a.IN});e.zoomOut.forEach(function(b){return d._keysToZoomAction[b]=a.OUT});return d}g(c,b);c.prototype._handleKeyDown=function(a){this._handleKey(a)};c.prototype._handleKey=function(b){var c=b.modifiers;0<c.size&&!c.has("Shift")||(c=this._keysToZoomAction[b.data.key],c===a.IN?(this.view.navigation.zoomIn(),b.stopPropagation()):c===a.OUT&&(this.view.navigation.zoomOut(),b.stopPropagation()))};return c}(c.InputHandler);
l.KeyZoom=h})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(h,l,g,c){Object.defineProperty(l,"__esModule",{value:!0});h=function(a){function b(b,c,f){var e=a.call(this,"esri.views.2d.input.handlers.KeyRotate",!0)||this;e.view=b;e.keys=c;e._keyToDirection=(d={},d[c.clockwiseOption1]="clockwise",d[c.clockwiseOption2]="clockwise",d[c.counterClockwiseOption1]="counterClockwise",d[c.counterClockwiseOption2]=
"counterClockwise",d[c.resetOption1]="reset",d[c.resetOption2]="reset",d);e.registerIncoming("key-down",f,function(a){return e._handleKeyDown(a)});e.registerIncoming("key-up",f,function(a){return e._handleKeyUp(a)});return e;var d}g(b,a);b.prototype._handleKeyDown=function(a){a.data.repeat||this._handleKey(a,!0)};b.prototype._handleKeyUp=function(a){this._handleKey(a,!1)};b.prototype._handleKey=function(a,b){var c=a.modifiers;0<c.size&&!c.has("Shift")||!this.view.constraints.rotationEnabled||!(c=
this._keyToDirection[a.data.key])||(b?"clockwise"===c?this.view.navigation.continousRotateClockwise():"counterClockwise"===c?this.view.navigation.continousRotateCounterclockwise():this.view.navigation.resetRotation():this.view.navigation.stop(),a.stopPropagation())};return b}(c.InputHandler);l.KeyRotate=h})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(h,l,g,c){Object.defineProperty(l,
"__esModule",{value:!0});h=function(a){function b(b,c){var e=a.call(this,"esri.views.2d.input.handlers.MouseWheelZoom",!0)||this;e.view=b;e._canZoom=!0;e.registerIncoming("mouse-wheel",c,function(a){return e._handleMouseWheel(a)});return e}g(b,a);b.prototype._handleMouseWheel=function(a){var b=this;if(this._canZoom){var c=a.data;if(c=this.view.navigation.zoom(1/Math.pow(.6,1/60*c.deltaY),[c.x,c.y]))this._canZoom=!1,c.always(function(){b._canZoom=!0});a.stopPropagation()}};return b}(c.InputHandler);
l.MouseWheelZoom=h})},"esri/views/2d/input/handlers/PinchAction":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(h,l,g,c){Object.defineProperty(l,"__esModule",{value:!0});h=function(a){function b(b){var c=a.call(this,"esri.views.2d.input.handlers.PinchZoom",!0)||this;c.view=b;c.registerIncoming("drag",function(a){return c._handleDrag(a)});c.registerIncoming("pointer-down",function(a){return c.stopMomentumNavigation()});return c}
g(b,a);b.prototype._handleDrag=function(a){var b=a.data;if(!(2>b.pointers.length)){var c=this.view.navigation.pinch;switch(b.action){case "start":c.begin(this.view,b);break;case "update":c.update(this.view,b);break;case "end":c.end(this.view,b)}a.stopPropagation()}};b.prototype.stopMomentumNavigation=function(){this.view.navigation.pinch.stopMomentumNavigation()};return b}(c.InputHandler);l.PinchRotateAndZoom=h})},"esri/views/2d/navigation/MapViewNavigation":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor ../../../Viewpoint ../../../geometry/Point ./actions/Pan ./actions/Rotate ./actions/Pinch ./ZoomBox ../viewpointUtils".split(" "),
function(h,l,g,c,a,b,e,k,f,m,d,r,n){var t=new e({targetGeometry:new k}),u=[0,0];h=function(a){function b(b){b=a.call(this)||this;b.animationManager=null;return b}g(b,a);b.prototype.initialize=function(){this.pan=new f({navigation:this});this.rotate=new m({navigation:this});this.pinch=new d({navigation:this});this.zoomBox=new r({view:this.view,navigation:this})};b.prototype.destroy=function(){this.zoomBox.destroy();this.animationManager=this.zoomBox=null};b.prototype.begin=function(){this._set("interacting",
!0)};b.prototype.end=function(){this._set("interacting",!1)};b.prototype.zoom=function(a,b){void 0===b&&(b=this._getDefaultAnchor());this.stop();this.begin();if(this.view.constraints.snapToZoom&&this.view.constraints.effectiveLODs)return 1>a?this.zoomIn(b):this.zoomOut(b);this.setViewpoint(b,a,0)};b.prototype.zoomIn=function(a){void 0===a&&(a=this._getDefaultAnchor());this.begin();var b=this.view,c=b.scale,d=b.constraints.snapToNextScale(c);a=b.goTo(this._scaleAndRotateViewpoint(t,a,d/c,0));this.end();
return a};b.prototype.zoomOut=function(a){void 0===a&&(a=this._getDefaultAnchor());this.begin();var b=this.view,c=b.scale,d=b.constraints.snapToPreviousScale(c);a=b.goTo(this._scaleAndRotateViewpoint(t,a,d/c,0));this.end();return a};b.prototype.setViewpoint=function(a,b,c){this.begin();this.view.state.viewpoint=this._scaleAndRotateViewpoint(t,a,b,c);this.end()};b.prototype.animateViewpoint=function(a,b,c){return this.view.goTo(this._scaleAndRotateViewpoint(t,a,b,c))};b.prototype.continousRotateClockwise=
function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){n.rotateBy(a,a,-1)})};b.prototype.continousRotateCounterclockwise=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){n.rotateBy(a,a,1)})};b.prototype.resetRotation=function(){this.view.rotation=0};b.prototype.continousPanLeft=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){n.translateBy(a,a,[-10,0])})};b.prototype.continousPanRight=
function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){n.translateBy(a,a,[10,0])})};b.prototype.continousPanUp=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){n.translateBy(a,a,[0,10])})};b.prototype.continousPanDown=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){n.translateBy(a,a,[0,-10])})};b.prototype.stop=function(){this.pan.stopMomentumNavigation();this.animationManager.stop();
this.end()};b.prototype._getDefaultAnchor=function(){var a=this.view.size;u[0]=.5*a[0];u[1]=.5*a[1];return u};b.prototype._scaleAndRotateViewpoint=function(a,b,c,d){var e=this.view,f=e.size,g=e.padding,h=e.constraints,k=e.viewpoint,m=e.scale*c,e=h.canZoomInTo(m),h=h.canZoomOutTo(m);return 1<c&&!e||1>=c&&!h?k:n.padAndScaleAndRotateBy(a,k,c,d,b,f,g)};return b}(a.declared(b));c([a.property()],h.prototype,"animationManager",void 0);c([a.property({type:Boolean,readOnly:!0})],h.prototype,"interacting",
void 0);c([a.property()],h.prototype,"pan",void 0);c([a.property()],h.prototype,"pinch",void 0);c([a.property()],h.prototype,"rotate",void 0);c([a.property()],h.prototype,"view",void 0);c([a.property()],h.prototype,"zoomBox",void 0);return h=c([a.subclass("esri.views.2d.navigation.MapViewNavigation")],h)})},"esri/views/2d/navigation/actions/Pan":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Accessor ../../viewpointUtils ../../../navigation/Momentum ../../../3d/lib/glMatrix".split(" "),
function(h,l,g,c,a,b,e,k,f){h=function(a){function b(b){var c=a.call(this)||this;c.animationTime=0;c.momentumEstimator=new k.ScreenspaceMomentumEstimator(.05,600,6,.92);c.momentum=null;c.momentumVelocityX=0;c.momentumVelocityY=0;c.momentumFinished=!1;c.viewpoint=e.create();c.watch("momentumFinished",function(a){a&&c.navigation.stop()});return c}g(b,a);b.prototype.begin=function(a,b){this.navigation.begin();this.momentumEstimator.reset();this.addToEstimator(b)};b.prototype.update=function(a,b){this.addToEstimator(b);
var c=b.pointers[0];b=c.currentEvent.x;var d=c.currentEvent.y;b=(c=c.previousEvent)?c.x-b:-b;d=c?d-c.y:d;a.viewpoint=e.translateBy(this.viewpoint,a.viewpoint,[b||0,d||0])};b.prototype.end=function(a,b){this.addToEstimator(b);this.momentum=this.momentumEstimator.evaluateMomentum();this.animationTime=0;this.momentum&&(this.momentumVelocityX=(this.momentum.dataNewest[0]-this.momentum.dataOldest[0])/this.momentum.dataTimeDelta,this.momentumVelocityY=(this.momentum.dataNewest[1]-this.momentum.dataOldest[1])/
this.momentum.dataTimeDelta,this.onAnimationUpdate(a));this.navigation.end()};b.prototype.addToEstimator=function(a){var b=a.pointers[0],c=b.currentEvent.x,b=b.currentEvent.y;this.momentumEstimator.add(c,b,f.vec3.createFrom(c,b,0),.001*a.currentState.timestamp)};b.prototype.onAnimationUpdate=function(a){var b=this;this.navigation.animationManager.animateContinous(a.viewpoint,function(c,d){b.momentumFinished=!b.momentum||b.momentum.isFinished(b.animationTime);d*=.001;b.notifyChange("momentumFinished");
if(!b.momentumFinished){var f=b.momentum.velocityFactor(b.animationTime);a.viewpoint=e.translateBy(c,c,[-(f*b.momentumVelocityX*d),f*b.momentumVelocityY*d])}b.animationTime+=d})};b.prototype.stopMomentumNavigation=function(){this.momentum&&(this.momentumEstimator.reset(),this.momentum=null,this.navigation.stop())};return b}(a.declared(b));c([a.property()],h.prototype,"viewpoint",void 0);c([a.property()],h.prototype,"navigation",void 0);return h=c([a.subclass("esri.views.2d.navigation.actions.Pan")],
h)})},"esri/views/navigation/Momentum":function(){define(["require","exports","../../core/tsSupport/extendsHelper","./ValueHistory","../3d/lib/glMatrix"],function(h,l,g,c,a){Object.defineProperty(l,"__esModule",{value:!0});var b=function(){function a(a,b,c){this._initialVelocity=a;this._stopVelocity=b;this._friction=c;this._duration=Math.abs(Math.log(Math.abs(this._initialVelocity)/this._stopVelocity)/Math.log(1-this._friction))}Object.defineProperty(a.prototype,"duration",{get:function(){return this._duration},
enumerable:!0,configurable:!0});a.prototype.isFinished=function(a){return a>this.duration};Object.defineProperty(a.prototype,"friction",{get:function(){return this._friction},enumerable:!0,configurable:!0});a.prototype.value=function(a){a=Math.min(a,this.duration);var b=1-this._friction;return this._initialVelocity*(Math.pow(b,a)-1)/Math.log(b)};a.prototype.valueDelta=function(a,b){var c=this.value(a);return this.value(a+b)-c};return a}();l.Momentum=b;h=function(){function a(a,b,e,f){void 0===a&&
(a=.05);this._minimumInitialVelocity=b;this._stopVelocity=e;this._friction=f;this._history=new c.ValueHistory(1E3*a)}a.prototype.add=function(a,b){void 0!==b&&(b*=1E3);this._history.add(a,b)};a.prototype.reset=function(){this._history.reset()};Object.defineProperty(a.prototype,"stopVelocity",{get:function(){return this._stopVelocity},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"friction",{get:function(){return this._friction},enumerable:!0,configurable:!0});a.prototype.evaluateMomentum=
function(){var a=this._evaluateVelocity();return null!==a?new b(a,this._stopVelocity,this._friction):null};a.prototype._evaluateVelocity=function(){var a=this._history,b=a.oldest,a=a.newest;if(b&&a){var c=(a.timeStamp-b.timeStamp)/1E3;if(0<c&&(b=(a.value-b.value)/c,Math.abs(b)>=this._minimumInitialVelocity))return b}return null};return a}();l.MomentumEstimator=h;var e=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}g(b,a);b.prototype.value=function(b){b=a.prototype.value.call(this,b);
return Math.exp(b)};b.prototype.valueDelta=function(b,c){var d=a.prototype.value.call(this,b);b=a.prototype.value.call(this,b+c);return Math.exp(b-d)};return b}(b);l.ZoomMomentum=e;var k=function(a){function b(b,c,d,e){void 0===b&&(b=.05);void 0===c&&(c=4);void 0===d&&(d=.01);void 0===e&&(e=.95);return a.call(this,b,c,d,e)||this}g(b,a);b.prototype.add=function(b,c){a.prototype.add.call(this,Math.log(b),c)};b.prototype.evaluateMomentum=function(){var a=this._evaluateVelocity();return null!==a?new e(a,
this.stopVelocity,this.friction):null};return b}(h);l.ZoomMomentumEstimator=k;h=function(a){function b(b,c,d,e){void 0===b&&(b=.05);void 0===c&&(c=4);void 0===d&&(d=.01);void 0===e&&(e=.95);return a.call(this,b,c,d,e)||this}g(b,a);b.prototype.add=function(b,c){var d=this._history.newest;if(d){d=d.value;for(b-=d;b>Math.PI;)b-=2*Math.PI;for(;b<-Math.PI;)b+=2*Math.PI;b=d+b}a.prototype.add.call(this,b,c)};return b}(h);l.RotationMomentumEstimator=h;var f=function(a){function b(b,c,d,e,f,g){b=a.call(this,
b,c,d)||this;b.dataOldest=e;b.dataNewest=f;b.dataTimeDelta=g;return b}g(b,a);b.prototype.velocityFactor=function(a){a=Math.min(a,this.duration);return Math.pow(1-this.friction,a)};b.prototype.valueFromInitialVelocity=function(a,b){b=Math.min(b,this.duration);var c=1-this.friction;return a*(Math.pow(c,b)-1)/Math.log(c)};return b}(b);l.ScreenspaceMomentum=f;h=function(){function b(a,b,e,f){void 0===a&&(a=.05);this._minimumInitialVelocity=b;this._stopVelocity=e;this._friction=f;this._entryPool=[];this._history=
new c.ValueHistory(1E3*a)}b.prototype.add=function(b,c,e,f){void 0!==f&&(f*=1E3);var d;0!==this._entryPool.length?(d=this._entryPool.pop(),d.x=b,d.y=c,a.vec3d.set(e,d.data)):d={x:b,y:c,data:a.vec3d.create(e)};this._history.add(d,f)};b.prototype.reset=function(){for(var a=0,b=this._history.values;a<b.length;a++)this._entryPool.push(b[a].value);this._history.reset()};Object.defineProperty(b.prototype,"stopVelocity",{get:function(){return this._stopVelocity},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"friction",{get:function(){return this._friction},enumerable:!0,configurable:!0});b.prototype.evaluateMomentum=function(){var a=this._evaluateVelocity(),b=this._history.oldest,c=this._history.newest;return null!==a?new f(a,this._stopVelocity,this._friction,b.value.data,c.value.data,.001*(c.timeStamp-b.timeStamp)):null};b.prototype._evaluateVelocity=function(){var a=this._history,b=a.oldest,c=a.newest;if(b&&c&&(a=.001*(c.timeStamp-b.timeStamp),0<a)){var e=c.value.x-b.value.x,b=c.value.y-b.value.y,
b=Math.sqrt(e*e+b*b)/a;if(Math.abs(b)>=this._minimumInitialVelocity)return b}return null};return b}();l.ScreenspaceMomentumEstimator=h})},"esri/views/navigation/ValueHistory":function(){define(["require","exports","../../core/now"],function(h,l,g){Object.defineProperty(l,"__esModule",{value:!0});h=function(){function c(a){this._maximumAge=a;this._values=[]}Object.defineProperty(c.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0});c.prototype.reset=function(){this._values=
[]};c.prototype.add=function(a,b){b=void 0!==b?b:g();this._values.push({value:a,timeStamp:b});this._cleanup(b)};Object.defineProperty(c.prototype,"newest",{get:function(){var a=this._values.length;if(0<a)return this._values[a-1]},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"oldest",{get:function(){if(0<this._values.length)return this._values[0]},enumerable:!0,configurable:!0});c.prototype._cleanup=function(a){for(;0<this._values.length;)if(this._values[0].timeStamp+this._maximumAge<
a)this._values.shift();else break};return c}();l.ValueHistory=h})},"esri/views/2d/navigation/actions/Rotate":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Accessor ../../viewpointUtils ../../libs/gl-matrix/vec2".split(" "),function(h,l,g,c,a,b,e,k){h=function(a){function b(b){b=a.call(this)||this;b.animationTime=0;b.viewpoint=e.create();return b}g(b,a);b.prototype.begin=
function(a,b){this.navigation.begin()};b.prototype.update=function(a,b){var c=b.pointers[0];b=k.create();b=k.set(b,c.currentEvent.x,a.height-c.currentEvent.y);var c=c.previousEvent,d=k.create();k.set(d,c.x,a.height-c.y);b=e.angleBetween(a.state.paddedScreenCenter,b,d);a.viewpoint=e.rotateBy(this.viewpoint,a.content.viewpoint,b)};b.prototype.end=function(a,b){this.navigation.end()};return b}(a.declared(b));c([a.property()],h.prototype,"viewpoint",void 0);c([a.property()],h.prototype,"navigation",void 0);
return h=c([a.subclass("esri.views.2d.actions.Rotate")],h)})},"esri/views/2d/navigation/actions/Pinch":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Accessor ../../viewpointUtils ../../../navigation/Momentum ../../libs/gl-matrix/vec2".split(" "),function(h,l,g,c,a,b,e,k,f){h=function(a){function b(b){var c=a.call(this,b)||this;c.animationTime=0;c.momentumFinished=
!1;c.rotateMomentumEstimator=new k.RotationMomentumEstimator(.05,6,.15,.95);c.rotateMomentum=null;c.rotationDirection=1;c.zoomMomentumEstimator=new k.ZoomMomentumEstimator(.05);c.zoomMomentum=null;c.zoomDirection=1;c.viewpoint=e.create();c.watch("momentumFinished",function(a){a&&c.navigation.stop()});return c}g(b,a);b.prototype.begin=function(a,b){this.navigation.begin();this.rotateMomentumEstimator.reset();this.zoomMomentumEstimator.reset();this.addToRotateEstimator(b,0);this.addToZoomEstimator(b,
b.startState.radius/b.currentState.radius)};b.prototype.update=function(a,b){var c=b.currentState,d=c.angle,e=c.radius,c=c.center,f=b.previousState,g=f.radius,h=f.angle,f=b.startState.radius/e;g&&(e/=g,d=180*(d-h)/Math.PI,this.rotationDirection=0<=d?1:-1,this.zoomDirection=1<=e?1:-1,a.constraints.rotationEnabled||(d=0),this.addToRotateEstimator(b,d),this.addToZoomEstimator(b,f),this.center=c,this.navigation.setViewpoint([c.x,c.y],1/e,d))};b.prototype.end=function(a,b){this.addToRotateEstimator(b,
0);this.addToZoomEstimator(b,b.startState.radius/b.currentState.radius);this.rotateMomentum=this.rotateMomentumEstimator.evaluateMomentum();this.zoomMomentum=this.zoomMomentumEstimator.evaluateMomentum();this.animationTime=0;if(this.rotateMomentum||this.zoomMomentum)this.onAnimationUpdate(a);this.navigation.end()};b.prototype.addToRotateEstimator=function(a,b){this.rotateMomentumEstimator.add(b,.001*a.currentState.timestamp)};b.prototype.addToZoomEstimator=function(a,b){this.zoomMomentumEstimator.add(b,
.001*a.currentState.timestamp)};b.prototype.canZoomIn=function(a){var b=a.scale;a=a.constraints.effectiveMaxScale;return 0===a||b>a};b.prototype.canZoomOut=function(a){var b=a.scale;a=a.constraints.effectiveMinScale;return 0===a||b<a};b.prototype.onAnimationUpdate=function(a){var b=this;this.navigation.animationManager.animateContinous(a.viewpoint,function(c,d){var g=!b.canZoomIn(a)&&1<b.zoomDirection||!b.canZoomOut(a)&&1>b.zoomDirection;b.momentumFinished=!b.rotateMomentum||b.rotateMomentum.isFinished(b.animationTime)||
g;d*=.001;b.notifyChange("momentumFinished");if(!b.momentumFinished){var g=Math.abs(b.rotateMomentum.valueDelta(b.animationTime,d))*b.rotationDirection*2,h=b.zoomMomentum?Math.abs(b.zoomMomentum.valueDelta(b.animationTime,d)):1,k=f.create(),m=f.create();f.set(k,b.center.x,b.center.y);e.getPaddingScreenTranslation(m,a.size,a.padding);f.add(k,k,m);e.scaleAndRotateBy(c,a.viewpoint,h,g,k,a.size)}b.animationTime+=d})};b.prototype.stopMomentumNavigation=function(){if(this.rotateMomentum||this.zoomMomentum)this.rotateMomentum&&
(this.rotateMomentumEstimator.reset(),this.rotateMomentum=null),this.zoomMomentum&&(this.zoomMomentumEstimator.reset(),this.zoomMomentum=null),this.navigation.stop()};return b}(a.declared(b));c([a.property()],h.prototype,"viewpoint",void 0);c([a.property()],h.prototype,"navigation",void 0);return h=c([a.subclass("esri.views.2d.navigation.actions.Pinch")],h)})},"esri/views/2d/navigation/ZoomBox":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor".split(" "),
function(h,l,g,c,a,b){h=function(a){function b(b){b=a.call(this,b)||this;b._container=null;b._overlay=null;b._backgroundShape=null;b._boxShape=null;b._box={x:0,y:0,width:0,height:0};b._redraw=b._redraw.bind(b);return b}g(b,a);b.prototype.destroy=function(){this.view=null};Object.defineProperty(b.prototype,"view",{set:function(a){var b=this;this._handles&&this._handles.forEach(function(a){a.remove()});this._handles=null;this._destroyOverlay();this._set("view",a);a&&(a.on("drag",["Shift"],function(a){return b._handleDrag(a,
1)}),a.on("drag",["Shift","Ctrl"],function(a){return b._handleDrag(a,-1)}))},enumerable:!0,configurable:!0});b.prototype._start=function(a,b,c,e){this._createContainer();this._createOverlay();this.navigation.begin()};b.prototype._update=function(a,b,c,e){this._box.x=a;this._box.y=b;this._box.width=c;this._box.height=e;this._rafId||(this._rafId=requestAnimationFrame(this._redraw))};b.prototype._end=function(a,b,c,e,g){var d=this.view;a=d.toMap(a+.5*c,b+.5*e);c=Math.min(c/d.width,e/d.height);-1===g&&
(c=1/c);this._destroyOverlay();this.navigation.end();d.goTo({center:a,scale:d.scale*c})};b.prototype._updateBox=function(a,b,c,e){var d=this._boxShape;d.setAttributeNS(null,"x",""+a);d.setAttributeNS(null,"y",""+b);d.setAttributeNS(null,"width",""+c);d.setAttributeNS(null,"height",""+e);d.setAttributeNS(null,"class","esri-zoom-box__outline")};b.prototype._updateBackground=function(a,b,c,e){this._backgroundShape.setAttributeNS(null,"d",this._toSVGPath(a,b,c,e,this.view.width,this.view.height))};b.prototype._createContainer=
function(){var a=document.createElement("div");a.className="esri-zoom-box__container";this.view.root.appendChild(a);this._container=a};b.prototype._createOverlay=function(){var a=this.view.width,b=this.view.height,c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttributeNS(null,"d","M 0 0 L "+a+" 0 L "+a+" "+b+" L 0 "+b+" Z");c.setAttributeNS(null,"class","esri-zoom-box__overlay-background");a=document.createElementNS("http://www.w3.org/2000/svg","rect");b=document.createElementNS("http://www.w3.org/2000/svg",
"svg");b.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");b.setAttributeNS(null,"class","esri-zoom-box__overlay");b.appendChild(c);b.appendChild(a);this._container.appendChild(b);this._backgroundShape=c;this._boxShape=a;this._overlay=b};b.prototype._destroyOverlay=function(){this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container);this._container=this._backgroundShape=this._boxShape=this._overlay=null};b.prototype._toSVGPath=
function(a,b,c,e,g,h){c=a+c;e=b+e;return"M 0 0 L "+g+" 0 L "+g+" "+h+" L 0 "+h+" ZM "+a+" "+b+" L "+a+" "+e+" L "+c+" "+e+" L "+c+" "+b+" Z"};b.prototype._handleDrag=function(a,b){var c=a.x,e=a.y,f=a.origin.x,g=a.origin.y,h;c>f?(h=f,f=c-f):(h=c,f-=c);e>g?(c=g,e-=g):(c=e,e=g-e);switch(a.action){case "start":this._start(h,c,f,e);break;case "update":this._update(h,c,f,e);break;case "end":this._end(h,c,f,e,b)}a.stopPropagation()};b.prototype._redraw=function(){if(this._rafId&&(this._rafId=null,this._overlay)){var a=
this._box,b=a.x,c=a.y,e=a.width,a=a.height;this._updateBox(b,c,e,a);this._updateBackground(b,c,e,a);this._rafId=requestAnimationFrame(this._redraw)}};return b}(a.declared(b));c([a.property()],h.prototype,"navigation",void 0);c([a.property()],h.prototype,"view",null);return h=c([a.subclass("esri.views.2d.navigation.ZoomBox")],h)})},"esri/views/2d/layers/GraphicsLayerView2D":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./LayerView2D ./support/GraphicsView2D".split(" "),
function(h,l,g,c,a,b,e){h=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.graphicsView=new e;b.container=b.graphicsView.container;return b}g(b,a);b.prototype.hitTest=function(a,b){return this.graphicsView.hitTest(a,b)};b.prototype.attach=function(){var a=this;this.layer.createGraphicsController({layerView:this}).then(function(b){a.graphicsView.view=a.view;a.graphicsView.graphics=b.graphics})};b.prototype.detach=function(){this.graphicsView.graphics=null};b.prototype.update=
function(a){};b.prototype.moveStart=function(){};b.prototype.viewChange=function(){};b.prototype.moveEnd=function(){};return b}(a.declared(b));return h=c([a.subclass("esri.views.2d.layers.GraphicsLayerView2D")],h)})},"esri/views/2d/layers/LayerView2D":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/watchUtils ../../layers/LayerView".split(" "),function(h,l,g,c,a,b,e){h=function(a){function c(){var b=
null!==a&&a.apply(this,arguments)||this;b.attached=!1;b.moving=!1;b.updateRequested=!1;return b}g(c,a);c.prototype.initialize=function(){var a=this;this.then(function(){a.requestUpdate()});b.init(this,"suspended",function(b){a.container.visible=!b;!b&&a.updateRequested&&a.view.requestLayerViewUpdate(a)},!0);b.init(this,"fullOpacity",function(b){a.container.opacity=b},!0);var c=function(){this.notifyChange("rendering")}.bind(this);this.container.on("post-render",c);this.container.on("will-render",
c)};c.prototype.destroy=function(){this.attached&&(this.attached=!1,this.detach());this.updateRequested=!1;this.layer=null};Object.defineProperty(c.prototype,"rendering",{get:function(){return this.isRendering()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"updating",{get:function(){return!this.suspended&&(!this.attached||this.updateRequested||this.isUpdating())},enumerable:!0,configurable:!0});c.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=
!0,this.suspended||this.view.requestLayerViewUpdate(this))};c.prototype.processUpdate=function(a){this.isFulfilled()&&!this.isResolved()?this.updateRequested=!1:(this._set("updateParameters",a),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(a)))};c.prototype.isUpdating=function(){return!1};c.prototype.isRendering=function(){return this.attached&&(this.moving||this.container.renderRequested)};c.prototype.canResume=function(){var a=this.inherited(arguments),b=this.layer;
if(a&&null!=b.minScale&&null!=b.minScale){var a=this.view.scale,c=b.minScale,b=b.maxScale,e=!c,f=!b;!e&&a<=c&&(e=!0);!f&&a>=b&&(f=!0);a=e&&f}return a};return c}(a.declared(e));c([a.property()],h.prototype,"attached",void 0);c([a.property()],h.prototype,"container",void 0);c([a.property()],h.prototype,"moving",void 0);c([a.property({dependsOn:["moving"]})],h.prototype,"rendering",null);c([a.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],h.prototype,"suspended",void 0);c([a.property({readOnly:!0})],
h.prototype,"updateParameters",void 0);c([a.property()],h.prototype,"updateRequested",void 0);c([a.property({dependsOn:["updateRequested","attached"]})],h.prototype,"updating",null);c([a.property()],h.prototype,"view",void 0);return h=c([a.subclass("esri.views.2d.layers.LayerView2D")],h)})},"esri/views/2d/layers/FeatureLayerView2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/HandleRegistry ./LayerView2D ./support/FeaturesView2D".split(" "),
function(h,l,g,c,a,b,e,k){h=function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;c._handles=new b;c.featuresView=new k;c.container=c.featuresView.container;return c}g(c,a);c.prototype.queryGraphics=function(){return this.featuresView.queryGraphics()};c.prototype.queryFeatures=function(a){return this.featuresView.queryFeatures(a)};c.prototype.queryObjectIds=function(a){return this.featuresView.queryObjectIds(a)};c.prototype.queryFeatureCount=function(a){return this.featuresView.queryFeatureCount(a)};
c.prototype.queryExtent=function(a){return this.featuresView.queryExtent(a)};c.prototype.hitTest=function(a,b){return this.featuresView.hitTest(a,b)};c.prototype.update=function(a){this.controller&&this.controller.update&&this.controller.update(a)};c.prototype.attach=function(){var a=this;this.layer.createGraphicsController({layerView:this}).then(function(b){a.attached&&(a._set("controller",b),a.requestUpdate(),a.featuresView.mapView=a.view,a.featuresView.graphics=b.graphics,a.featuresView.layer=
a.layer,a.featuresView.renderer=a.layer.renderer,a._handles.add(a.layer.watch("renderer",function(){a.featuresView.renderer=a.layer.renderer})))})};c.prototype.detach=function(){this.featuresView.graphics=null;this.featuresView.renderer=null;this._handles.removeAll();this.controller&&(this.controller.destroy&&this.controller.destroy(),this._set("controller",null))};c.prototype.moveStart=function(){};c.prototype.viewChange=function(){};c.prototype.moveEnd=function(){this.requestUpdate()};c.prototype.isUpdating=
function(){return null==this.controller||!0===this.get("controller.updating")};return c}(a.declared(e));c([a.property({readOnly:!0})],h.prototype,"controller",void 0);c([a.property({dependsOn:["controller.updating"]})],h.prototype,"updating",void 0);return h=c([a.subclass("esri.views.2d.layers.FeatureLayerView2D")],h)})},"esri/views/2d/layers/support/FeaturesView2D":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/accessorSupport/decorators ../../../../core/Collection ../../../../core/HandleRegistry ../../../../core/promiseUtils ../../../../core/Error ../../../../renderers/support/renderingInfoUtils ../../../../Graphic ../../../layers/GraphicsView ../../engine/graphics/GFXSurface ../../engine/graphics/GFXGroup ../../engine/graphics/GFXObject ../../../../layers/graphics/QueryEngine".split(" "),
function(h,l,g,c,a,b,e,k,f,m,d,r,n,t,u,w){h=function(a){function b(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var d=a.apply(this,b)||this;d._handles=new e;d._backgroundGroup=new t;d._frontGroup=new t;d._frontObjects=new Map;d._backgroundObjects=new Map;d._queryEngine=new w;d._scale=0;d.container=new n;d.layer=null;d.container.addChild(d._backgroundGroup);d.container.addChild(d._frontGroup);d.watch("graphics",function(){return d._reset()});d.watch("renderer",function(){return d._resymbolize()});
d.watch("layer",function(){return d._setObjectId()});d.watch("mapView.scale, mapView.stationary",function(){return d._applyScale()});return d}g(b,a);b.prototype.queryGraphics=function(){return this._queryEngine?this._queryEngine.queryFeatures():this._rejectQuery()};b.prototype.queryFeatures=function(a){return this._queryEngine?this._queryEngine.queryFeatures(a):this._rejectQuery()};b.prototype.queryObjectIds=function(a){return this._queryEngine?this._queryEngine.queryObjectIds(a):this._rejectQuery()};
b.prototype.queryFeatureCount=function(a){return this._queryEngine?this._queryEngine.queryFeatureCount(a):this._rejectQuery()};b.prototype.queryExtent=function(a){return this._queryEngine?this._queryEngine.queryExtent(a):this._rejectQuery()};b.prototype.hitTest=function(a,b){a+=this.mapView.position[0]-window.pageXOffset;b+=this.mapView.position[1]-window.pageYOffset;return(a=this.container.hitTest(a,b))?k.resolve(a.graphic):null};b.prototype._reset=function(){var a=this;this._handles.remove("graphics");
this.graphics&&(this.graphics.forEach(this._add,this),this._queryEngine.features=this.graphics,this._handles.add(this.graphics.on("change",function(b){return a._graphicsChangeHandler(b)}),"graphics"))};b.prototype._applyScale=function(){var a=this.get("mapView.scale"),b=this.get("mapView.stationary");a!==this._scale&&b&&(this._scale=a,this._resymbolize())};b.prototype._resymbolize=function(){var a=this;this.graphics&&this.graphics.forEach(function(b){return a._resymbolizeGraphic(b)})};b.prototype._add=
function(a){if(!this._frontObjects.has(a)){var b=m.getRenderingInfo(a,{renderer:this.renderer,viewingMode:"map",scale:this.mapView.state.scale,resolution:this.mapView.state.resolution,spatialReference:this.mapView.spatialReference});if(b){var c=new u;c.graphic=a;c.renderingInfo=b;this._frontObjects.set(a,c);this._frontGroup.addChild(c);var d=b.renderer&&b.renderer.backgroundFillSymbol;d&&c.isPolygonMarkerSymbol&&(c=new u,c.graphic=a,c.renderingInfo=null!=b.outlineSize?{symbol:d,size:[b.outlineSize,
b.outlineSize,b.outlineSize]}:{symbol:d},this._backgroundObjects.set(a,c),this._backgroundGroup.addChild(c))}}};b.prototype._remove=function(a){var b=this._frontObjects.get(a);b&&(this._frontObjects.delete(a),this._frontGroup.removeChild(b),this._backgroundObjects.has(a)&&(b=this._backgroundObjects.get(a),this._backgroundObjects.delete(a),this._backgroundGroup.removeChild(b)))};b.prototype._resymbolizeGraphic=function(a){if(this._frontObjects.has(a)){var b=m.getRenderingInfo(a,{renderer:this.renderer,
viewingMode:"map",scale:this.mapView.state.scale,resolution:this.mapView.state.resolution,spatialReference:this.mapView.spatialReference});if(b){var c=this._frontObjects.get(a);c&&(c.renderingInfo=b);var d=b.renderer&&b.renderer.backgroundFillSymbol,e=this._backgroundObjects.get(a);d&&c.isPolygonMarkerSymbol?(e||(e=new u,e.graphic=a,this._backgroundObjects.set(a,e),this._backgroundGroup.addChild(e)),e.renderingInfo=null!=b.outlineSize?{symbol:d,size:[b.outlineSize,b.outlineSize,b.outlineSize]}:{symbol:d}):
!d&&e&&(this._backgroundObjects.delete(a),this._backgroundGroup.removeChild(e))}}};b.prototype._setObjectId=function(){this._queryEngine.objectIdField=this.layer.objectIdField};b.prototype._rejectQuery=function(){return k.reject(new f("GraphicsLayerView2D","Not ready to execute query"))};b.prototype._graphicsChangeHandler=function(a){for(var b=a.removed,c=0,d=a.added;c<d.length;c++)a=d[c],this._add(a);for(c=0;c<b.length;c++)a=b[c],this._remove(a)};return b}(a.declared(r));c([a.property()],h.prototype,
"container",void 0);c([a.property(),a.cast(b.ofType(d))],h.prototype,"graphics",void 0);c([a.property()],h.prototype,"layer",void 0);c([a.property()],h.prototype,"mapView",void 0);return h=c([a.subclass("esri.views.2d.layers.support.FeaturesView2D")],h)})},"esri/renderers/support/renderingInfoUtils":function(){define(["require","exports"],function(h,l){function g(a,b){if(!a||a.symbol)return null;b=b.renderer;return a&&b&&b.getObservationRenderer?b.getObservationRenderer(a):b}function c(a,b){if(a.symbol)return a.symbol;
var c=g(a,b);return c&&c.getSymbol(a,b)}Object.defineProperty(l,"__esModule",{value:!0});l.getRenderer=g;l.getSymbol=c;l.getRenderingInfo=function(a,b){var e=g(a,b),h=c(a,b);if(!h)return null;h={renderer:e,symbol:h};if(e){e.colorInfo&&(h.color=e.getColor(a).toRgba());if(e.sizeInfo){var f=e.getSize(a);h.size=[f,f,f]}if(e.visualVariables){a=e.getVisualVariableValues(a,b);f=["proportional","proportional","proportional"];for(b=0;b<a.length;b++){var l=a[b],e=l.variable,d=l.value;"color"===e.type?h.color=
d.toRgba():"size"===e.type?"outline"===e.target?h.outlineSize=d:(l=e.axis,e=e.useSymbolValue?"symbolValue":d,"width"===l?f[0]=e:"depth"===l?f[1]=e:"height"===l?f[2]=e:f[0]="width-and-depth"===l?f[1]=e:f[1]=f[2]=e):"opacity"===e.type?h.opacity=d:"rotation"===e.type&&"tilt"===e.axis?h.tilt=d:"rotation"===e.type&&"roll"===e.axis?h.roll=d:"rotation"===e.type&&(h.heading=d)}if(isFinite(f[0])||isFinite(f[1])||isFinite(f[2]))h.size=f}}return h}})},"esri/views/2d/layers/TiledLayerView2D":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/ObjectPool ../../../core/Error ../../../core/promiseUtils ./LayerView2D ../tiling/TileInfoView ../tiling/TileKey ../tiling/TileQueue ../tiling/TileStrategy ../engine/Bitmap ../engine/BitmapSource ../engine/BitmapContainer ../engine/Canvas2DContainer ../engine/Tiled".split(" "),
function(h,l,g,c,a,b,e,k,f,m,d,r,n,t,u,w,p,q){var x=function(a){function b(b){b=a.call(this,b)||this;b.key=new d(0,0,0,0);return b}g(b,a);b.prototype.acquire=function(a){};b.prototype.release=function(){this.key.set(0,0,0,0)};return b}(q(t));x.pool=new b(x,!0);h=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b._tileStrategy=null;b._tileInfoView=null;b._fetchQueue=null;b._tileRequests=new Map;b.container=new p;b.layer=null;return b}g(b,a);b.prototype.initialize=function(){var a=
this.layer.tileInfo,a=a&&a.spatialReference,b;a||(b=new e("layerview:tiling-information-missing","The layer doesn't provide tiling information",{layer:this.layer}));a.equals(this.view.spatialReference)||(b=new e("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}));b&&this.addResolvingPromise(k.reject(b))};b.prototype.hitTest=function(a,b){return null};b.prototype.update=function(a){this._fetchQueue.pause();
this._fetchQueue.state=a.state;this._tileStrategy.update(a);this._fetchQueue.resume();this.notifyChange("updating")};b.prototype.attach=function(){var a=this;this._tileContainer=new w;this.container.addChild(this._tileContainer);this._tileInfoView=new m(this.layer.tileInfo,this.layer.fullExtent);this._fetchQueue=new r({tileInfoView:this._tileInfoView,process:function(b){return a.fetchTile(b)}});this._tileStrategy=new n({cachePolicy:"keep",acquireTile:function(b){return a.acquireTile(b)},releaseTile:function(b){return a.releaseTile(b)},
tileInfoView:this._tileInfoView})};b.prototype.detach=function(){this._tileStrategy.destroy();this._fetchQueue.clear();this.container.removeChild(this._tileContainer);this._fetchQueue=this._tileStrategy=this._tileInfoView=this._tileContainer=null};b.prototype.moveStart=function(){this.requestUpdate()};b.prototype.viewChange=function(){this.requestUpdate()};b.prototype.moveEnd=function(){this.requestUpdate()};b.prototype.getTileBounds=function(a,b){return this._tileStrategy.tileInfoView.getTileBounds(a,
b)};b.prototype.getTileCoords=function(a,b){return this._tileStrategy.tileInfoView.getTileCoords(a,b)};b.prototype.getTileResolution=function(a){return this._tileStrategy.tileInfoView.getTileResolution(a)};b.prototype.acquireTile=function(a){var b=this,c=x.pool.acquire();c.key.set(a);this._tileInfoView.getTileCoords(c.coords,c.key);c.resolution=this._tileInfoView.getTileResolution(c.key);a=this._tileInfoView.tileInfo.size;c.width=a[0];c.height=a[1];a=this._fetchQueue.push(c.key).then(function(a){c.source=
a;c.once("attach",function(){return b.requestUpdate()});b._tileContainer.addChild(c);b.notifyChange("updating");b.requestUpdate()});this._tileRequests.set(c,a);this.requestUpdate();return c};b.prototype.releaseTile=function(a){var b=this,c=this._tileRequests.get(a);c.isFulfilled()||c.cancel();this._tileRequests.delete(a);this._tileContainer.removeChild(a);a.once("detach",function(){x.pool.release(a);b.requestUpdate()});this.requestUpdate();this.notifyChange("updating")};b.prototype.fetchTile=function(a){var b=
this,c=this.layer.tilemapCache;if(c){var d=a.level,e=a.row,f=a.col;return c.fetchAvailabilityUpsample(d,e,f,a).then(function(){return b._fetchImage(a)}).otherwise(function(){a.level=d;a.row=e;a.col=f;return b._fetchImage(a)})}return this._fetchImage(a)};b.prototype._fetchImage=function(a){var b=this;return this.layer.fetchTile(a.level,a.row,a.col).then(function(c){c=u.pool.acquire(c);c.coords=b.getTileCoords(c.coords,a);c.resolution=b.getTileResolution(a);return c})};return b}(a.declared(f));c([a.property({dependsOn:["updateRequested",
"attached"]})],h.prototype,"updating",void 0);return h=c([a.subclass("esri.views.2d.layers.TiledLayerView2D")],h)})},"esri/views/2d/engine/Bitmap":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(h,l,g,c){var a=[0,0];return function(b){function c(a){var c=b.call(this)||this;c.source=a;c.coords=[0,0];c.resolution=0;c.rotation=0;c.width=0;c.height=0;return c}g(c,b);c.prototype.doRender=function(a){this.source&&this.source.ready&&null!=a.context&&
this.renderCanvas2D(a)};c.prototype.renderCanvas2D=function(b){var c=this.source,e=b.context,d=b.state;b=d.rotation;var g=this.resolution/d.resolution*d.pixelRatio;if(!(.05>g)){e.save();var h=d.toScreen(a,this.coords),d=h[0],h=h[1];.99<g&&1.01>g?e.translate(Math.round(d),Math.round(h)):(e.translate(d,h),e.scale(g,g));b&&e.rotate(b*Math.PI/180);c.rotation&&(e.translate(.5*c.width,.5*c.height),e.rotate(-c.rotation*Math.PI/180),e.translate(.5*-c.width,.5*-c.height));b=(this.coords[0]-c.coords[0])/c.resolution;
g=-(this.coords[1]-c.coords[1])/c.resolution;d=this.resolution/c.resolution*c.width;h=this.resolution/c.resolution*c.height;e.clearRect(0,0,this.width,this.height);c.draw(e,Math.round(b),Math.round(g),Math.round(d),Math.round(h),0,0,this.width,this.height);e.restore()}};return c}(c)})},"esri/views/2d/engine/BitmapSource":function(){define(["require","exports","../../../core/ObjectPool"],function(h,l,g){h=function(){function c(a){this.coords=[0,0];this._height=0;this.pixelRatio=1;this._width=this.rotation=
this.resolution=0;this.data=a}c.prototype.release=function(){this.data=null};Object.defineProperty(c.prototype,"data",{get:function(){return this._data},set:function(a){this._data=a;this._width=this._height=0;a&&(a instanceof HTMLImageElement?(this._width=a.naturalWidth,this._height=a.naturalHeight):0<a.width&&0<a.height&&(this._width=a.width,this._height=a.height))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"ready",{get:function(){return 0<this._width},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});c.prototype.draw=function(a,b,c,g,f,h,d,l,n){this.ready&&a.drawImage(this._data,b,c,g,f,h,d,l,n)};return c}();h.pool=new g(h,!0);return h})},"esri/views/2d/engine/BitmapContainer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ./Container ../ViewState ../viewStateUtils".split(" "),
function(h,l,g,c,a,b,e){var k=[0,0];return function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;c._childrenCanvas=null;c._childrenRenderParameters={budget:null,context:null,devicePixelRatio:1,state:new b,stationary:!0};return c}g(c,a);c.prototype.attach=function(b){this._childrenCanvas||(this._childrenCanvas=document.createElement("canvas"),this._childrenRenderParameters.context=this._childrenCanvas.getContext("2d"));return a.prototype.attach.call(this,b)};c.prototype.detach=function(b){a.prototype.detach.call(this,
b);this._childrenCanvas=null;this._childrenRenderParameters.context=null};c.prototype.doRender=function(b){this.visible&&a.prototype.doRender.call(this,b)};c.prototype.prepareChildrenRenderParameters=function(a){var b=this._childrenCanvas,c=this._childrenRenderParameters,d=a.state,f=d.pixelRatio,g=c.state;g.copy(d);var h=e.getOuterSize(k,d),d=h[0],h=h[1],d=d*f,h=h*f;g.size=k;g.viewpoint.rotation=0;b.width!==d||b.height!==h?(b.width=d,b.height=h):c.context.clearRect(0,0,d,h);c.budget=a.budget;c.devicePixelRatio=
a.devicePixelRatio;return c};c.prototype.beforeRenderChildren=function(a,b){this.sortChildren(function(a,b){return b.resolution-a.resolution})};c.prototype.afterRenderChildren=function(a,b){var c=a.context;a=a.state;var d=b.context;b=b.state;0===a.rotation?c.drawImage(d.canvas,0,0):(c.save(),c.translate(.5*a.width,.5*a.height),c.rotate(a.rotation*Math.PI/180),c.translate(.5*-a.width,.5*-a.height),c.drawImage(d.canvas,.5*(a.width-b.width),.5*(a.height-b.height)),c.restore())};return c}(a)})},"esri/views/2d/viewStateUtils":function(){define(["require",
"exports"],function(h,l){Object.defineProperty(l,"__esModule",{value:!0});var g=Math.PI/180;l.snapToPixel=function(c,a,b){var e=b.resolution;b=b.size;c[0]=e*(Math.round(a[0]/e)+b[0]%2*.5);c[1]=e*(Math.round(a[1]/e)+b[1]%2*.5);return c};l.getOuterSize=function(c,a){var b=a.rotation*g,e=Math.abs(Math.cos(b)),b=Math.abs(Math.sin(b)),h=a.size;a=h[0];h=h[1];c[0]=Math.round(h*b+a*e);c[1]=Math.round(h*e+a*b);return c};l.getBBox=function(c,a,b,e){var g=a[0];a=a[1];var f=e[0];e=e[1];b*=.5;c[0]=g-b*f;c[1]=
a-b*e;c[2]=g+b*f;c[3]=a+b*e;return c};l.bboxIntersects=function(c,a){var b=c[1],e=c[2],g=c[3],f=a[0],h=a[1],d=a[3];return!(c[0]>a[2]||e<f||b>d||g<h)}})},"esri/views/2d/engine/Canvas2DContainer":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../ViewState","./Container"],function(h,l,g,c,a){return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b._childrenRenderParameters={budget:null,context:null,devicePixelRatio:1,state:new c,stationary:!0};
b.hidpi=!1;return b}g(b,a);b.prototype.createElement=function(){var a=document.createElement("canvas");a.setAttribute("class","esri-display-object");return a};b.prototype.setElement=function(a){this.element=a};b.prototype.doRender=function(b){var c=this.element,e=c.style;if(this.visible){var d=b.state,g=b.devicePixelRatio,h=d.width,d=d.height;c.width=h*(this.hidpi?g:1);c.height=d*(this.hidpi?g:1);e.display="block";e.opacity=""+this.opacity;e.width=h+"px";e.height=d+"px";a.prototype.doRender.call(this,
b)}else e.display="none"};b.prototype.prepareChildrenRenderParameters=function(a){var b=this._childrenRenderParameters;b.budget=a.budget;b.context=this.element.getContext("2d");b.devicePixelRatio=a.devicePixelRatio;b.state.copy(a.state);b.state.pixelRatio=this.hidpi?a.devicePixelRatio:1;b.stationary=a.stationary;return b};b.prototype.beforeRenderChildren=function(a,b){a=b.context;var c=b.state;a.save();if(c.spatialReference.isWrappable){var d=c.width,e=c.height;b=c.rotation*Math.PI/180;var f=Math.round(d*
Math.abs(Math.cos(b))+e*Math.abs(Math.sin(b))),c=c.worldScreenWidth;c<f&&(d*=.5,e*=.5,b&&(a.translate(d,e),a.rotate(b),a.translate(-d,-e)),a.beginPath(),a.rect(d-.5*c,e-.5*f,c,f),a.closePath(),b&&(a.translate(d,e),a.rotate(-b),a.translate(-d,-e)),a.clip("evenodd"))}};b.prototype.afterRenderChildren=function(a,b){b.context.restore()};b.prototype.renderChild=function(a,b){b.context.save();a.processRender(b);b.context.restore()};return b}(a)})},"esri/views/2d/engine/Tiled":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","./Evented"],function(h,l,g,c){return function(a){a=function(a){function b(){for(var b=0;b<arguments.length;b++);return a.call(this)||this}g(b,a);return b}(a);return c.EventedMixin(a)}})},"url:esri/widgets/Popup/templates/Popup.html":'\x3cdiv role\x3d"presentation" class\x3d"${_css.invisible}"\x3e\r\n  \x3c!-- Popup Container --\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"_containerNode" class\x3d"${_css.container} ${_css.alignTop} ${_css.shadow}"\x3e\r\n    \x3cdiv class\x3d"${_css.main}"\x3e\r\n      \x3c!-- Popup Docked Pagination --\x3e\r\n      \x3csection class\x3d"${_css.paginationDocked}"\x3e\r\n        \x3cdiv role\x3d"presentation" class\x3d"${_css.loadingContainer}" title\x3d"${_i18n.loading}"\x3e\r\n          \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLoading}"\x3e\x3c/span\x3e\r\n          \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.loading}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"${_css.paginationDockedButtons}"\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_previousDockedNode" class\x3d"${_css.button} ${_css.paginationPrevious}" title\x3d"${_i18n.previous}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationPreviousIconLTR}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationPreviousIconRTL}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.previous}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_pageTextDockedNode" class\x3d"${_css.paginationText}"\x3e\x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_nextDockedNode" class\x3d"${_css.button} ${_css.paginationNext}" title\x3d"${_i18n.next}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationNextIconLTR}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationNextIconRTL}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.next}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_pageMenuDockedNode" class\x3d"${_css.button} ${_css.featureMenuButton}" title\x3d"${_i18n.menu}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconPaginationMenu}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.menu}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/section\x3e\r\n      \x3c!-- /Popup Docked Pagination --\x3e\r\n      \x3c!-- Popup Header --\x3e\r\n      \x3cheader class\x3d"${_css.header}"\x3e\r\n        \x3ch1 data-dojo-attach-point\x3d"_titleNode" class\x3d"${_css.headerTitle}"\x3e\x3c/h1\x3e\r\n        \x3cdiv class\x3d"${_css.headerButtons}"\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_dockNode" class\x3d"${_css.button} ${_css.buttonDock}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToRight}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToTop}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToLeft}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToBottom}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.dock}\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconUndock}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.undock}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_closeNode" class\x3d"${_css.button}" title\x3d"${_i18n.close}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconClose}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.close}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/header\x3e\r\n      \x3c!-- /Popup Header --\x3e\r\n      \x3c!-- Popup Content --\x3e\r\n      \x3carticle class\x3d"${_css.content}" data-dojo-attach-point\x3d"_bodyContentNode"\x3e\x3c/article\x3e\r\n      \x3c!-- /Popup Content --\x3e\r\n      \x3c!-- Popup Footer --\x3e\r\n      \x3cfooter class\x3d"${_css.footer}"\x3e\r\n        \x3c!-- Popup Actions --\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_actionsNode" class\x3d"${_css.actions}"\x3e\x3c/div\x3e\r\n        \x3c!-- /Popup Actions --\x3e\r\n        \x3c!-- Popup Pagination --\x3e\r\n        \x3csection class\x3d"${_css.pagination}"\x3e\r\n          \x3cdiv role\x3d"presentation" class\x3d"${_css.loadingContainer}" title\x3d"${_i18n.loading}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLoading}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.loading}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_previousNode" class\x3d"${_css.button} ${_css.paginationPrevious}" title\x3d"${_i18n.previous}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationPreviousIconLTR}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationPreviousIconRTL}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.previous}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_pageTextNode" class\x3d"${_css.paginationText}"\x3e\x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_nextNode" class\x3d"${_css.button} ${_css.paginationNext}" title\x3d"${_i18n.next}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationNextIconLTR}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationNextIconRTL}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.next}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_pageMenuNode" class\x3d"${_css.button} ${_css.featureMenuButton}" title\x3d"${_i18n.menu}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconPaginationMenu}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.menu}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/section\x3e\r\n        \x3c!-- /Popup Pagination --\x3e\r\n      \x3c/footer\x3e\r\n      \x3c!-- /Popup Footer --\x3e\r\n      \x3c!-- Popup Menu --\x3e\r\n      \x3csection class\x3d"${_css.featureMenu}" data-dojo-attach-point\x3d"_pageMenuSectionNode" aria-hidden\x3d"true"\x3e\r\n        \x3ch2 class\x3d"${_css.featureMenuHeader}" data-dojo-attach-point\x3d"_pageMenuInfoNode"\x3e\x3c/h2\x3e\r\n        \x3cnav class\x3d"${_css.featureMenuViewport}"\x3e\r\n          \x3col class\x3d"${_css.featureMenuList}" role\x3d"menu" data-dojo-attach-point\x3d"_paginationNode"\x3e\x3c/ol\x3e\r\n        \x3c/nav\x3e\r\n      \x3c/section\x3e\r\n      \x3c!-- /Popup Menu --\x3e\r\n    \x3c/div\x3e\r\n    \x3c!-- Popup Pointer --\x3e\r\n    \x3cdiv class\x3d"${_css.pointer}" role\x3d"presentation"\x3e\r\n      \x3cdiv class\x3d"${_css.pointerDirection} ${_css.shadow}"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!-- /Popup Pointer --\x3e\r\n  \x3c/div\x3e\r\n  \x3c!-- /Popup Container --\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/views/2d/engine/webgl/Shaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"foobarVS"\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"foobarFS"\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/views/2d/engine/webgl/bitblit.vs.glsl":"attribute vec2 a_pos;\r\nattribute vec2 a_tex;\r\n\r\nvarying mediump vec2 v_uv;\r\n\r\nvoid main(void) {\r\n  gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n  v_uv \x3d a_tex;\r\n}\r\n","url:esri/views/2d/engine/webgl/bitblit.fs.glsl":"\tuniform lowp sampler2D u_tex;\r\n\tuniform lowp float u_opacity;\r\n\r\n\tvarying mediump vec2 v_uv;\r\n\r\n\tvoid main() {\r\n\t\tlowp vec4 color \x3d texture2D(u_tex, v_uv);\r\n\r\n    // Note: output in pre-multiplied alpha for correct alpha compositing\r\n\t\tgl_FragColor \x3d color *  u_opacity;\r\n\t}\r\n",
"url:esri/views/2d/engine/webgl/stencil.vs.glsl":"attribute vec2 a_pos;\r\n\r\nvoid main() {\r\n  gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n}\r\n","url:esri/views/2d/engine/webgl/stencil.fs.glsl":"void main() {\r\n  gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\r\n}\r\n","*now":function(h){h(['dojo/i18n!*preload*esri/views/nls/MapView*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])},
"*noref":1}});
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/promise/all ../core/accessorSupport/decorators ../core/HandleRegistry ../core/promiseUtils ./MapViewBase ./DOMContainer ../geometry/ScreenPoint ./ui/2d/DefaultUI2D ./2d/engine/Stage ./2d/layers/support/GraphicsView2D ./2d/input/MapViewInputManager ./2d/navigation/MapViewNavigation ./support/screenshotUtils".split(" "),function(h,l,g,c,a,b,e,k,f,m,d,r,n,t,u,w,p){h=function(b){function c(a){a=b.call(this,
a)||this;a._graphicsView=null;a._mapViewHandles=new e;a._stage=null;a.inputManager=new u({view:a});a.navigation=null;a.ui=null;a.rendering=!1;return a}g(c,b);Object.defineProperty(c.prototype,"interacting",{get:function(){return this.navigation&&this.navigation.interacting||!1},enumerable:!0,configurable:!0});c.prototype.hitTest=function(b,c){if(!this.ready)return null;var e;e=null!=b&&b.x?b:new d({x:b,y:c});var f=this.toMap(e);b=[this._graphicsView];b.push.apply(b,this.allLayerViews.toArray().reverse());
return a(b.map(function(a){return a&&a.hitTest?a.hitTest(e.x,e.y):null})).then(function(a){return{screenPoint:e,results:a.filter(function(a){return null!=a}).map(function(a){return{mapPoint:f,graphic:a}})}})};c.prototype.takeScreenshot=function(a){if(!this.ready)return k.reject("Map view cannot be used before it is ready");a=p.adjustScreenshotSettings(a,this);return this._stage.takeScreenshot(a)};c.prototype.on=function(a,b,c){var d=this.inputManager&&this.inputManager.viewEvents.register(a,b,c);
return d?d:this.inherited(arguments)};c.prototype.destroyLayerViews=function(){this.inherited(arguments);this._stage&&(this._stage.destroy(),this._stage=null)};c.prototype._startup=function(){var a=this;this.inherited(arguments);var b=new n(this.surface),c=new t({view:this,graphics:this.graphics}),d=new w({view:this,animationManager:this.animationManager});this._stage=b;this._graphicsView=c;this._set("navigation",d);this._mapViewHandles.add([this.allLayerViews.on("change",function(){return a._updateStageChildren()}),
b.on("post-render",function(){return a._set("rendering",a.allLayerViews.some(function(a){return!0===a.rendering}))}),this.watch("stationary",function(a){return b.stationary=a},!0),this.watch("state.viewpoint",function(c){return b.state=a.state},!0)]);b.state=this.state;this._updateStageChildren()};c.prototype._tearDown=function(){this._setup&&(this._graphicsView.destroy(),this._mapViewHandles.removeAll(),this._stage.destroy(),this.navigation.destroy(),this._graphicsView=this._stage=null,this._set("navigation",
null),this.inherited(arguments))};c.prototype._updateStageChildren=function(){var a=this;this._stage.removeAllChildren();this.allLayerViews.filter(function(a){return null!=a.container}).forEach(function(b,c){a._stage.addChildAt(b.container,c)});this._stage.addChild(this._graphicsView.container)};return c}(b.declared(f,m));c([b.property({readOnly:!0})],h.prototype,"inputManager",void 0);c([b.property({readOnly:!0})],h.prototype,"navigation",void 0);c([b.property({dependsOn:["navigation.interacting"],
type:Boolean})],h.prototype,"interacting",null);c([b.property({type:r})],h.prototype,"ui",void 0);c([b.property({readOnly:!0})],h.prototype,"rendering",void 0);return h=c([b.subclass("esri.views.MapView")],h)});