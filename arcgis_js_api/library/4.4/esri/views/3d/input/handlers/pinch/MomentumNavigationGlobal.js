// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.4/esri/copyright.txt for details.
//>>built
define("require exports ../../../../../core/tsSupport/extendsHelper ../../../lib/glMatrix ./MomentumNavigationBase ./PinchNavigationGlobal".split(" "),function(g,h,m,b,n,l){Object.defineProperty(h,"__esModule",{value:!0});var k=b.vec3d.create();g=function(g){function f(a,d){a=g.call(this,a,d)||this;a._panAxisOrDirection=b.vec3d.create();a._centerOnScreen=b.vec2.create();a._centerOnSphere=b.vec3d.create();a._tmpSphereCenter=b.vec3d.create();a._tmpScaleAxis=b.vec3d.create();a._verticalPlane={distance:0,
normal:b.vec3d.create()};a._verticalCenter=b.vec3d.create();return a}m(f,g);f.prototype.setParameters=function(a,d,e,c){this._radius=a;b.vec2.set(d,this._centerOnScreen);b.vec3d.set(e,this._centerOnSphere);this._mode=c};f.prototype.addPanValue=function(a,d,e,c){this.pan.estimator.add(d[0],d[1],e,.001*a);b.vec3d.set(c,this._panAxisOrDirection)};f.prototype.addRotationValue=function(a,b){this.rotation.estimator.add(b,.001*a)};f.prototype.addScaleValue=function(a,b){this.zoom.estimator.add(b,.001*a)};
f.prototype.setVerticalParameters=function(a,d){b.vec3d.set(d,this._verticalCenter);b.vec3d.set(a.normal,this._verticalPlane.normal);this._verticalPlane.distance=a.distance};f.prototype.onUpdate=function(a,d,e){var c=this._radius,f=this._centerOnScreen,g=this._centerOnSphere;if(this.zoom.momentum){var h=this.zoom.momentum.valueDelta(a,d);this._mode===l.PanMode.Horizontal?(this.helper.spherical.applyZoom(c,this.view,e,h),this.helper.spherical.makeRenderCoordSpherePoint(c,e,f,this._tmpSphereCenter),
c=this.helper.spherical.rotationFromPoints(c,g,this._tmpSphereCenter,this._tmpScaleAxis),this.helper.applyRotation(e,k,this._tmpScaleAxis,c)):this.helper.planar.applyZoom(this._verticalPlane,this.view,e,this._verticalCenter,h)}this.pan.momentum&&(this._mode===l.PanMode.Horizontal?(c=this.helper.spherical.rotationFromPoints(this._radius,this.pan.momentum.dataOldest,this.pan.momentum.dataNewest,this._panAxisOrDirection),c/=this.pan.momentum.dataTimeDelta,c*=this.pan.momentum.velocityFactor(a),this.helper.applyRotation(e,
k,this._panAxisOrDirection,c*d)):(c=b.vec3d.dist(this.pan.momentum.dataOldest,this.pan.momentum.dataNewest),c/=this.pan.momentum.dataTimeDelta,c*=this.pan.momentum.velocityFactor(a),b.vec3d.normalize(this._panAxisOrDirection),b.vec3d.scale(this._panAxisOrDirection,c*d),b.vec3d.subtract(e.eye,this._panAxisOrDirection),b.vec3d.subtract(e.center,this._panAxisOrDirection),e.markViewDirty()));this.rotation.momentum&&(a=this.rotation.momentum.valueDelta(a,d),this.helper.applyRotation(e,k,g,a))};return f}(n.MomentumNavigationBase);
h.MomentumNavigationGlobal=g});