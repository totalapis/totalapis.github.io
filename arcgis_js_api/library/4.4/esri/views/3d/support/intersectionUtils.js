// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.4/esri/copyright.txt for details.
//>>built
define(["../lib/glMatrix"],function(l){function m(d,b,a,c){c.clip[0]=0;c.clip[1]=a?c.len:Number.MAX_VALUE;for(a=0;a<d.length;a++){var e;var g=d[a],h=b;e=c;var k=f.dot(g,e.dir),h=-f.dot(h,g)-g[3];0>h&&0<=k?e=!1:-1E-6<k&&1E-6>k?e=!0:!(0>h||0>k)||0>h&&0>k?(h/=k,0<k?h<e.clip[1]&&(e.clip[1]=h):h>e.clip[0]&&(e.clip[0]=h),e=e.clip[0]<=e.clip[1]):e=!0;if(!e)return!1}return!0}function n(d,b,a,c){d?(a&&c&&(g.len=f.dist(b,a)),f.set(d,g.dir)):c?(g.len=f.dist(b,a),f.scale(f.subtract(a,b,g.dir),1/g.len)):f.normalize(f.subtract(a,
b,g.dir));return g}var f=l.vec3d;l=l.vec2d;var g={dir:f.create(),len:0,clip:l.create()},p={planeSphere:function(d,b,a){return d[0]*b[0]+d[1]*b[1]+d[2]*b[2]+d[3]<a},frustumSphere:function(d,b,a){for(var c=0;6>c;c++)if(!p.planeSphere(d[c],b,a))return!1;return!0},frustumRay:function(d,b,a,c){a=n(c,b,a,!1);return m(d,b,null,a)},frustumPoint:function(d,b){for(var a=0;6>a;a++){var c=d[a];if(0>-f.dot(b,c)-c[3])return!1}return!0},frustumLineSegment:function(d,b,a,c){c=n(c,b,a,!0);return m(d,b,a,c)}};return p});