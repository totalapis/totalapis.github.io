// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.4/esri/copyright.txt for details.
//>>built
(function(a,f){var m,h=function(){},e=function(b){for(var g in b)return 0;return 1},l={}.toString,n=function(b){return"[object Function]"==l.call(b)},d=function(b){return"[object String]"==l.call(b)},c=function(b){return"[object Array]"==l.call(b)},b=function(b,g){if(b)for(var a=0;a<b.length;)g(b[a++])},k=function(b,g){for(var a in g)b[a]=g[a];return b},q=function(b,g){return k(Error(b),{src:"dojoLoader",info:g})},u=1,x=function(){return"_"+u++},w=function(b,g,a){return va(b,g,a,0,w)},t=this,p=t.document,
v=p&&p.createElement("DiV"),g=w.has=function(b){return n(r[b])?r[b]=r[b](t,p,v):r[b]},r=g.cache=f.hasCache;g.add=function(b,a,k,p){(void 0===r[b]||p)&&(r[b]=a);return k&&g(b)};g.add("host-webworker","undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);g("host-webworker")&&(k(f.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1,"dojo-guarantee-console":0}),f.loaderPatch={injectUrl:function(b,g){try{importScripts(b),g()}catch(fb){console.info("failed to load resource ("+
b+")"),console.error(fb)}}});for(var z in a.has)g.add(z,a.has[z],0,1);w.async=1;var y=g("csp-restrictions")?function(){}:new Function("return eval(arguments[0]);");w.eval=function(b,g){return y(b+"\r\n//# sourceURL\x3d"+g)};var A={},F=w.signal=function(g,a){g=A[g];b(g&&g.slice(0),function(b){b.apply(null,c(a)?a:[a])})},B=w.on=function(b,g){var a=A[b]||(A[b]=[]);a.push(g);return{remove:function(){for(var b=0;b<a.length;b++)if(a[b]===g){a.splice(b,1);break}}}},E=[],C={},G=[],L={},U=w.map={},P=[],H=
{},K="",J={},R={};z={};var M=0,ea=function(b){var g,a,k,p;for(g in R)a=R[g],(k=g.match(/^url\:(.+)/))?J["url:"+$a(k[1],b)]=a:"*now"==g?p=a:"*noref"!=g&&(k=Ia(g,b,!0),J[k.mid]=J["url:"+k.url]=a);p&&p(Da(b));R={}},I=function(b){return b.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(b){return"\\"+b})},N=function(b,g){g.splice(0,g.length);for(var a in b)g.push([a,b[a],new RegExp("^"+I(a)+"(/|$)"),a.length]);g.sort(function(b,g){return g[3]-b[3]});return g},Y=function(g,a){b(g,function(b){a.push([d(b[0])?
new RegExp("^"+I(b[0])+"$"):b[0],b[1]])})},aa=function(b){var g=b.name;g||(g=b,b={name:g});b=k({main:"main"},b);b.location=b.location?b.location:g;b.packageMap&&(U[g]=b.packageMap);b.main.indexOf("./")||(b.main=b.main.substring(2));L[g]=b},S=[],Z=function(a,p,c){for(var q in a){"waitSeconds"==q&&(w.waitms=1E3*(a[q]||0));"cacheBust"==q&&(K=a[q]?d(a[q])?a[q]:(new Date).getTime()+"":"");if("baseUrl"==q||"combo"==q)w[q]=a[q];a[q]!==r&&(w.rawConfig[q]=a[q],"has"!=q&&g.add("config-"+q,a[q],0,p))}w.baseUrl||
(w.baseUrl="./");/\/$/.test(w.baseUrl)||(w.baseUrl+="/");for(q in a.has)g.add(q,a.has[q],0,p);b(a.packages,aa);for(var l in a.packagePaths)b(a.packagePaths[l],function(b){var g=l+"/"+b;d(b)&&(b={name:b});b.location=g;aa(b)});N(k(U,a.map),P);b(P,function(b){b[1]=N(b[1],[]);"*"==b[0]&&(P.star=b)});N(k(C,a.paths),G);Y(a.aliases,E);if(p)S.push({config:a.config});else for(q in a.config)p=Fa(q,c),p.config=k(p.config||{},a.config[q]);a.cache&&(ea(),R=a.cache,a.cache["*noref"]&&ea());F("config",[a,w.rawConfig])};
if(g("dojo-cdn")){var da=p.getElementsByTagName("script");m=0;for(var V,la,ia,ha;m<da.length;)if(V=da[m++],(ia=V.getAttribute("src"))&&(ha=ia.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))&&(la=ha[3]||"",f.baseUrl=f.baseUrl||la,M=V),ia=V.getAttribute("data-dojo-config")||V.getAttribute("djConfig"))z=w.eval("({ "+ia+" })","data-dojo-config"),M=V}w.rawConfig={};Z(f,1);g("dojo-cdn")&&((L.dojo.location=la)&&(la+="/"),L.dijit.location=la+"../dijit/",L.dojox.location=la+"../dojox/");Z(a,1);Z(z,1);var pa=function(g){D(function(){b(g.deps,
nb)})},va=function(b,g,a,p,r){var l;if(d(b)){if((l=Fa(b,p,!0))&&l.executed)return l.result;throw q("undefinedModule",b);}c(b)||(Z(b,0,p),b=g,g=a);if(c(b))if(b.length){a="require*"+x();for(var e,n=[],v=0;v<b.length;)e=b[v++],n.push(Fa(e,p));l=k(Ga("",a,0,""),{injected:2,deps:n,def:g||h,require:p?p.require:w,gc:1});H[l.mid]=l;pa(l);var f=ka&&!0;D(function(){Q(l,f)});l.executed||xa.push(l);fa()}else g&&g();return r},Da=function(b){if(!b)return w;var g=b.require;g||(g=function(a,p,k){return va(a,p,k,
b,g)},b.require=k(g,w),g.module=b,g.toUrl=function(g){return $a(g,b)},g.toAbsMid=function(g){return Qa(g,b)});return g},xa=[],Ha=[],oa={},hb=function(b){b.injected=1;oa[b.mid]=1;b.url&&(oa[b.url]=b.pack||1);sb()},Ra=function(b){b.injected=2;delete oa[b.mid];b.url&&delete oa[b.url];e(oa)&&Va()},Na=w.idle=function(){return!Ha.length&&e(oa)&&!xa.length&&!ka},ta=function(b,g){if(g)for(var a=0;a<g.length;a++)if(g[a][2].test(b))return g[a];return 0},ya=function(b){var g=[],a,p;for(b=b.replace(/\\/g,"/").split("/");b.length;)a=
b.shift(),".."==a&&g.length&&".."!=p?(g.pop(),p=g[g.length-1]):"."!=a&&g.push(p=a);return g.join("/")},Ga=function(b,g,a,p){return{pid:b,mid:g,pack:a,url:p,executed:0,def:0}},ib=function(g,a,p,k,c,d,r,l,e){var h,v,f,u;u=/^\./.test(g);if(/(^\/)|(\:)|(\.js$)/.test(g)||u&&!a)return Ga(0,g,0,g);g=ya(u?a.mid+"/../"+g:g);if(/^\./.test(g))throw q("irrationalPath",g);a&&(f=ta(a.mid,d));(f=(f=f||d.star)&&ta(g,f[1]))&&(g=f[1]+g.substring(f[3]));a=(ha=g.match(/^([^\/]+)(\/(.+))?$/))?ha[1]:"";(h=p[a])?g=a+"/"+
(v=ha[3]||h.main):a="";var t=0;b(l,function(b){var a=g.match(b[0]);a&&0<a.length&&(t=n(b[1])?g.replace(b[0],b[1]):b[1])});if(t)return ib(t,0,p,k,c,d,r,l,e);if(p=k[g])return e?Ga(p.pid,p.mid,p.pack,p.url):k[g];k=(f=ta(g,r))?f[1]+g.substring(f[3]):a?h.location+"/"+v:g;/(^\/)|(\:)/.test(k)||(k=c+k);return Ga(a,g,h,ya(k+".js"))},Ia=function(b,g,a){return ib(b,g,L,H,w.baseUrl,a?[]:P,a?[]:G,a?[]:E)},Ja=function(b,g,a){return b.normalize?b.normalize(g,function(b){return Qa(b,a)}):Qa(g,a)},Ea=0,Fa=function(b,
g,a){var p,k;(p=b.match(/^(.+?)\!(.*)$/))?(k=Fa(p[1],g,a),5!==k.executed||k.load||Ma(k),k.load?(p=Ja(k,p[2],g),b=k.mid+"!"+(k.dynamic?++Ea+"!":"")+p):(p=p[2],b=k.mid+"!"+ ++Ea+"!waitingForPlugin"),b={plugin:k,mid:b,req:Da(g),prid:p}):b=Ia(b,g);return H[b.mid]||!a&&(H[b.mid]=b)},Qa=w.toAbsMid=function(b,g){return Ia(b,g).mid},$a=w.toUrl=function(b,g){g=Ia(b+"/x",g);var a=g.url;return ja(0===g.pid?b:a.substring(0,a.length-5))},Sa={injected:2,executed:5,def:3,result:3};la=function(b){return H[b]=k({mid:b},
Sa)};var Ba=la("require"),T=la("exports"),za=la("module"),sa={},ga=0,Ma=function(b){var g=b.result;b.dynamic=g.dynamic;b.normalize=g.normalize;b.load=g.load;return b},Ka=function(g){var a={};b(g.loadQ,function(b){var p=Ja(g,b.prid,b.req.module),c=g.dynamic?b.mid.replace(/waitingForPlugin$/,p):g.mid+"!"+p,p=k(k({},b),{mid:c,prid:p,injected:0});H[c]&&H[c].injected||ma(H[c]=p);a[b.mid]=H[c];Ra(b);delete H[b.mid]});g.loadQ=0;var p=function(b){for(var g=b.deps||[],p=0;p<g.length;p++)(b=a[g[p].mid])&&(g[p]=
b)},c;for(c in H)p(H[c]);b(xa,p)},ba=function(b){w.trace("loader-finish-exec",[b.mid]);b.executed=5;b.defOrder=ga++;b.loadQ&&(Ma(b),Ka(b));for(m=0;m<xa.length;)xa[m]===b?xa.splice(m,1):m++;/^require\*/.test(b.mid)&&delete H[b.mid]},bb=[],Q=function(b,g){if(4===b.executed)return w.trace("loader-circular-dependency",[bb.concat(b.mid).join("-\x3e")]),!b.def||g?sa:b.cjs&&b.cjs.exports;if(!b.executed){if(!b.def)return sa;var a=b.mid,p=b.deps||[],k,c=[],d=0;for(b.executed=4;k=p[d++];){k=k===Ba?Da(b):k===
T?b.cjs.exports:k===za?b.cjs:Q(k,g);if(k===sa)return b.executed=0,w.trace("loader-exec-module",["abort",a]),sa;c.push(k)}w.trace("loader-run-factory",[b.mid]);g=b.def;c=n(g)?g.apply(null,c):g;b.result=void 0===c&&b.cjs?b.cjs.exports:c;ba(b)}return b.result},ka=0,D=function(b){try{ka++,b()}catch(kb){throw kb;}finally{ka--}Na()&&F("idle",[])},fa=function(){ka||D(function(){for(var b,g,a=0;a<xa.length;)b=ga,g=xa[a],Q(g),b!=ga?a=0:a++})};void 0===g("dojo-loader-eval-hint-url")&&g.add("dojo-loader-eval-hint-url",
1);var ja="function"==typeof a.fixupUrl?a.fixupUrl:function(b){b+="";return b+(K?(/\?/.test(b)?"\x26":"?")+K:"")},ma=function(b){var g=b.plugin;5!==g.executed||g.load||Ma(g);var a=function(g){b.result=g;Ra(b);ba(b);fa()};g.load?g.load(b.prid,b.req,a):g.loadQ?g.loadQ.push(b):(g.loadQ=[b],xa.unshift(g),nb(g))},X=0,ca=0,O=0,Wa=function(b,a){g("config-stripStrict")&&(b=b.replace(/(["'])use strict\1/g,""));O=1;b===X?X.call(null):w.eval(b,g("dojo-loader-eval-hint-url")?a.url:a.mid);O=0},nb=function(b){var a=
b.mid,p=b.url;if(!(b.executed||b.injected||oa[a]||b.url&&(b.pack&&oa[b.url]===b.pack||1==oa[b.url])))if(hb(b),b.plugin)ma(b);else{var c=function(){ub(b);if(2!==b.injected){if(g("dojo-enforceDefine")){F("error",q("noDefine",b));return}Ra(b);k(b,Sa);w.trace("loader-define-nonmodule",[b.url])}fa()};(X=J[a]||J["url:"+b.url])?(w.trace("loader-inject",["cache",b.mid,p]),Wa(X,b),c()):(w.trace("loader-inject",["script",b.mid,p]),ca=b,w.injectUrl(ja(p),c,b),ca=0)}},lb=function(b,g,a){w.trace("loader-define-module",
[b.mid,g]);if(2===b.injected)return F("error",q("multipleDefine",b)),b;k(b,{deps:g,def:a,cjs:{id:b.mid,uri:b.url,exports:b.result={},setExports:function(g){b.cjs.exports=g},config:function(){return b.config}}});for(var p=0;g[p];p++)g[p]=Fa(g[p],b);Ra(b);n(a)||g.length||(b.result=a,ba(b));return b},ub=function(g,a){for(var p=[],k,c;Ha.length;)c=Ha.shift(),a&&(c[0]=a.shift()),k=c[0]&&Fa(c[0])||g,p.push([k,c[1],c[2]]);ea(g);b(p,function(b){pa(lb.apply(null,b))})},Va=h,sb=h;g("dom")&&g.add("ie-event-behavior",
p.attachEvent&&"undefined"===typeof Windows&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));if(g("dom")){var cb=function(b,a,p,k){if(g("ie-event-behavior"))return b.attachEvent(p,k),function(){b.detachEvent(p,k)};b.addEventListener(a,k,!1);return function(){b.removeEventListener(a,k,!1)}},vb=cb(window,"load","onload",function(){w.pageLoaded=1;try{"complete"!=p.readyState&&(p.readyState="complete")}catch(Ob){}vb()}),da=p.getElementsByTagName("script");for(m=0;!M;)/^dojo/.test((V=
da[m++])&&V.type)||(M=V);w.injectUrl=function(b,g,a){a=a.node=p.createElement("script");var k=cb(a,"load","onreadystatechange",function(b){b=b||window.event;var a=b.target||b.srcElement;if("load"===b.type||/complete|loaded/.test(a.readyState))k(),c(),g&&g()}),c=cb(a,"error","onerror",function(g){k();c();F("error",q("scriptError",[b,g]))});a.type="text/javascript";a.charset="utf-8";a.src=b;M.parentNode.insertBefore(a,M);return a}}w.log=h;w.trace=h;V=function(b,a,p){var k=arguments.length,c=["require",
"exports","module"],r=[0,b,a];1==k?r=[0,n(b)?c:[],b]:2==k&&d(b)?r=[b,n(a)?c:[],a]:3==k&&(r=[b,a,p]);w.trace("loader-define",r.slice(0,2));if((k=r[0]&&Fa(r[0]))&&!oa[k.mid])pa(lb(k,r[1],r[2]));else if(g("ie-event-behavior")&&g("host-browser")&&!O){k=k||ca;if(!k)for(b in oa)if((c=H[b])&&c.node&&"interactive"===c.node.readyState){k=c;break}k?(ea(k),pa(lb(k,r[1],r[2]))):F("error",q("ieDefineFailed",r[0]));fa()}else Ha.push(r)};V.amd={vendor:"dojotoolkit.org"};k(k(w,f.loaderPatch),a.loaderPatch);B("error",
function(b){try{if(console.error(b),b instanceof Error){for(var g in b)console.log(g+":",b[g]);console.log(".")}}catch(fb){}});k(w,{uid:x,cache:J,packs:L});t.define||(t.define=V,t.require=w,b(S,function(b){Z(b)}),B=z.deps||a.deps||f.deps,a=z.callback||a.callback||f.callback,w.boot=B||a?[B||[],a]:0)})(this.dojoConfig||this.djConfig||this.require||{},{aliases:[[/^webgl-engine/,function(){return"esri/views/3d/webgl-engine"}],[/^engine/,function(){return"esri/views/3d/webgl-engine"}],[/^esri-hydra/,function(){return"esri"}]],
async:1,baseUrl:"https://api.brucekong.com/arcgis_js_api/library/4.4/dojo",hasCache:{"config-deferredInstrumentation":0,"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-has-api":1,"dojo-loader":1,"dojo-undef-api":0,dom:1,"host-browser":1},packages:[{location:".",name:"dojo"},{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../dstore",main:"Store",name:"dstore"},{location:"../esri",name:"esri"},{location:"../moment",
main:"moment",name:"moment"}]});
require({cache:{"dojo/domReady":function(){define(["./has"],function(a){function f(b){c.push(b);d&&m()}function m(){if(!b){for(b=!0;c.length;)try{c.shift()(e)}catch(t){console.error(t,"in domReady callback",t.stack)}b=!1;f._onQEmpty()}}var h=function(){return this}(),e=document,l={loaded:1,complete:1},n="string"!=typeof e.readyState,d=!!l[e.readyState],c=[],b;f.load=function(b,a,k){f(k)};f._Q=c;f._onQEmpty=function(){};n&&(e.readyState="loading");if(!d){var k=[],q=function(b){b=b||h.event;d||"readystatechange"==
b.type&&!l[e.readyState]||(n&&(e.readyState="complete"),d=1,m())},u=function(b,a){b.addEventListener(a,q,!1);c.push(function(){b.removeEventListener(a,q,!1)})};if(!a("dom-addeventlistener")){var u=function(b,a){a="on"+a;b.attachEvent(a,q);c.push(function(){b.detachEvent(a,q)})},x=e.createElement("div");try{x.doScroll&&null===h.frameElement&&k.push(function(){try{return x.doScroll("left"),1}catch(t){}})}catch(t){}}u(e,"DOMContentLoaded");u(h,"load");"onreadystatechange"in e?u(e,"readystatechange"):
n||k.push(function(){return l[e.readyState]});if(k.length){var w=function(){if(!d){for(var b=k.length;b--;)if(k[b]()){q("poller");return}setTimeout(w,30)}};w()}}return f})},"dojo/has":function(){define(["require","module"],function(a,f){var m=a.has||function(){};if(!m("dojo-has-api")){a="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location==location&&window.document==document;var h=function(){return this}(),e=a&&document,l=e&&e.createElement("DiV"),
n=f.config&&f.config()||{},m=function(a){return"function"==typeof n[a]?n[a]=n[a](h,e,l):n[a]};m.cache=n;m.add=function(a,c,b,k){("undefined"==typeof n[a]||k)&&(n[a]=c);return b&&m(a)};m.add("host-browser",a);m.add("dom",a)}m("host-browser")&&(m.add("dom-addeventlistener",!!document.addEventListener),m.add("touch","ontouchstart"in document||"onpointerdown"in document&&0<navigator.maxTouchPoints||window.navigator.msMaxTouchPoints),m.add("touch-events","ontouchstart"in document),m.add("pointer-events",
"pointerEnabled"in window.navigator?window.navigator.pointerEnabled:"PointerEvent"in window),m.add("MSPointer",window.navigator.msPointerEnabled),m.add("touch-action",m("touch")&&m("pointer-events")),m.add("device-width",screen.availWidth||innerWidth),f=document.createElement("form"),m.add("dom-attributes-explicit",0==f.attributes.length),m.add("dom-attributes-specified-flag",0<f.attributes.length&&40>f.attributes.length));m.clearElement=function(a){a.innerHTML="";return a};m.normalize=function(a,
c){var b=a.match(/[\?:]|[^:\?]*/g),k=0,d=function(a){var c=b[k++];if(":"==c)return 0;if("?"==b[k++]){if(!a&&m(c))return d();d(!0);return d(a)}return c||0};return(a=d())&&c(a)};m.load=function(a,c,b){a?c([a],b):b()};return m})},"dojo/io/script":function(){define("../_base/connect ../_base/kernel ../_base/lang ../sniff ../_base/window ../_base/xhr ../dom ../dom-construct ../request/script ../aspect".split(" "),function(a,f,m,h,e,l,n,d,c,b){f.deprecated("dojo/io/script","Use dojo/request/script.","2.0");
var k={get:function(a){var d,q=this._makeScriptDeferred(a,function(b){d&&d.cancel()}),e=q.ioArgs;l._ioAddQueryToUrl(e);l._ioNotifyStart(q);d=c.get(e.url,{timeout:a.timeout,jsonp:e.jsonp,checkString:a.checkString,ioArgs:e,frameDoc:a.frameDoc,canAttach:function(b){e.requestId=b.id;e.scriptId=b.scriptId;e.canDelete=b.canDelete;return k._canAttach(e)}},!0);b.around(d,"isValid",function(b){return function(a){k._validCheck(q);return b.call(this,a)}});d.then(function(){q.resolve(q)}).otherwise(function(b){q.ioArgs.error=
b;q.reject(b)});return q},attach:c._attach,remove:c._remove,_makeScriptDeferred:function(b,a){a=l._ioSetArgs(b,a||this._deferredCancel,this._deferredOk,this._deferredError);var d=a.ioArgs;d.id=f._scopeName+"IoScript"+(b.callbackSuffix||this._counter++);d.canDelete=!1;d.jsonp=b.callbackParamName||b.jsonp;d.jsonp&&(d.query=d.query||"",0<d.query.length&&(d.query+="\x26"),d.query+=d.jsonp+"\x3d"+(b.frameDoc?"parent.":"")+f._scopeName+".io.script.jsonp_"+d.id+"._jsonpCallback",d.frameDoc=b.frameDoc,d.canDelete=
!0,a._jsonpCallback=this._jsonpCallback,this["jsonp_"+d.id]=a);a.addBoth(function(b){d.canDelete&&(b instanceof Error?k["jsonp_"+d.id]._jsonpCallback=function(){delete k["jsonp_"+d.id];if(d.requestId)f.global[c._callbacksProperty][d.requestId]()}:k._addDeadScript(d))});return a},_deferredCancel:function(b){b.canceled=!0},_deferredOk:function(b){b=b.ioArgs;return b.json||b.scriptLoaded||b},_deferredError:function(b,a){console.log("dojo.io.script error",b);return b},_deadScripts:[],_counter:1,_addDeadScript:function(b){k._deadScripts.push({id:b.id,
frameDoc:b.frameDoc});b.frameDoc=null},_validCheck:function(b){if((b=k._deadScripts)&&0<b.length){for(var a=0;a<b.length;a++)k.remove(b[a].id,b[a].frameDoc),delete k["jsonp_"+b[a].id],b[a].frameDoc=null;k._deadScripts=[]}return!0},_ioCheck:function(b){b=b.ioArgs;return b.json||b.scriptLoaded&&!b.args.checkString?!0:(b=b.args.checkString)&&eval("typeof("+b+") !\x3d 'undefined'")},_resHandle:function(b){k._ioCheck(b)?b.callback(b):b.errback(Error("inconceivable dojo.io.script._resHandle error"))},_canAttach:function(){return!0},
_jsonpCallback:function(b){this.ioArgs.json=b;if(this.ioArgs.requestId)f.global[c._callbacksProperty][this.ioArgs.requestId](b)}};m.setObject("dojo.io.script",k);return k})},"dojo/_base/connect":function(){define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),function(a,f,m,h,e,l,n,d){function c(b,k,c,g,r){g=d.hitch(c,g);if(!b||!b.addEventListener&&!b.attachEvent)return h.after(b||a.global,k,g,!0);"string"==typeof k&&"on"==k.substring(0,2)&&(k=k.substring(2));
b||(b=a.global);if(!r)switch(k){case "keypress":k=x;break;case "mouseenter":k=l.enter;break;case "mouseleave":k=l.leave}return f(b,k,g,r)}function b(b){b.keyChar=b.charCode?String.fromCharCode(b.charCode):"";b.charOrCode=b.keyChar||b.keyCode}n.add("events-keypress-typed",function(){var b={charCode:0};try{b=document.createEvent("KeyboardEvent"),(b.initKeyboardEvent||b.initKeyEvent).call(b,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(p){}return 0==b.charCode&&!n("opera")});var k={106:42,111:47,186:59,
187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},q=n("mac")?"metaKey":"ctrlKey",u=function(a,k){k=d.mixin({},a,k);b(k);k.preventDefault=function(){a.preventDefault()};k.stopPropagation=function(){a.stopPropagation()};return k},x;x=n("events-keypress-typed")?function(b,a){var c=f(b,"keydown",function(b){var g=b.keyCode,c=13!=g&&32!=g&&(27!=g||!n("ie"))&&(48>g||90<g)&&(96>g||111<g)&&(186>g||192<g)&&(219>g||222<g)&&229!=g;if(c||b.ctrlKey){c=c?0:g;if(b.ctrlKey){if(3==g||
13==g)return a.call(b.currentTarget,b);c=95<c&&106>c?c-48:!b.shiftKey&&65<=c&&90>=c?c+32:k[c]||c}g=u(b,{type:"keypress",faux:!0,charCode:c});a.call(b.currentTarget,g);if(n("ie"))try{b.keyCode=g.keyCode}catch(A){}}}),g=f(b,"keypress",function(b){var g=b.charCode;b=u(b,{charCode:32<=g?g:0,faux:!0});return a.call(this,b)});return{remove:function(){c.remove();g.remove()}}}:n("opera")?function(b,a){return f(b,"keypress",function(b){var g=b.which;3==g&&(g=99);g=32>g&&!b.shiftKey?0:g;b.ctrlKey&&!b.shiftKey&&
65<=g&&90>=g&&(g+=32);return a.call(this,u(b,{charCode:g}))})}:function(a,k){return f(a,"keypress",function(a){b(a);return k.call(this,a)})};var w={_keypress:x,connect:function(b,a,k,g,d){var p=arguments,r=[],q=0;r.push("string"==typeof p[0]?null:p[q++],p[q++]);var l=p[q+1];r.push("string"==typeof l||"function"==typeof l?p[q++]:null,p[q++]);for(l=p.length;q<l;q++)r.push(p[q]);return c.apply(this,r)},disconnect:function(b){b&&b.remove()},subscribe:function(b,a,k){return m.subscribe(b,d.hitch(a,k))},
publish:function(b,a){return m.publish.apply(m,[b].concat(a))},connectPublisher:function(b,a,k){var g=function(){w.publish(b,arguments)};return k?w.connect(a,k,g):w.connect(a,g)},isCopyKey:function(b){return b[q]}};w.unsubscribe=w.disconnect;d.mixin(a,w);return w})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(a,f,m,h){var e,l=function(){return this}(),n={},d={},c={config:f,global:l,dijit:n,dojox:d},n={dojo:["dojo",c],dijit:["dijit",n],dojox:["dojox",d]};
h=m.map&&m.map[h.id.match(/[^\/]+/)[0]];for(e in h)n[e]?n[e][0]=h[e]:n[e]=[h[e],{}];for(e in n)h=n[e],h[1]._scopeName=h[0],f.noGlobals||(l[h[0]]=h[1]);c.scopeMap=n;c.baseUrl=c.config.baseUrl=m.baseUrl;c.isAsync=m.async;c.locale=f.locale;f="$Rev: 594ed6f $".match(/[0-9a-f]{7,}/);c.version={major:1,minor:12,patch:2,flag:"",revision:f?f[0]:NaN,toString:function(){var b=c.version;return b.major+"."+b.minor+"."+b.patch+b.flag+" ("+b.revision+")"}};a("csp-restrictions")||Function("d","d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(c);
c.exit=function(){};a("host-webworker");a.add("console-as-object",function(){return Function.prototype.bind&&console&&"object"===typeof console.log});"undefined"!=typeof console||(console={});m="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" ");var b;for(f=0;b=m[f++];)console[b]?a("console-as-object")&&(console[b]=Function.prototype.bind.call(console[b],console)):function(){var a=b+"";console[a]="log"in console?function(){var b=Array.prototype.slice.call(arguments);
b.unshift(a+":");console.log(b.join(" "))}:function(){};console[a]._fake=!0}();c.deprecated=c.experimental=function(){};c._hasResource={};return c})},"dojo/_base/config":function(){define(["../has","require"],function(a,f){a={};f=f.rawConfig;for(var m in f)a[m]=f[m];!a.locale&&"undefined"!=typeof navigator&&(m=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage)&&(a.locale=m.toLowerCase());return a})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect",
"./_base/kernel","./sniff"],function(a,f,m){function h(b,g,a,k,p){if(k=g.match(/(.*):(.*)/))return g=k[2],k=k[1],d.selector(k,g).call(p,b,a);m("touch")&&(c.test(g)&&(a=A(a)),m("event-orientationchange")||"orientationchange"!=g||(g="resize",b=window,a=A(a)));x&&(a=x(a));if(b.addEventListener){var r=g in q,l=r?q[g]:g;b.addEventListener(l,a,r);return{remove:function(){b.removeEventListener(l,a,r)}}}if(v&&b.attachEvent)return v(b,"on"+g,a);throw Error("Target must be an event emitter");}function e(){this.cancelable=
!1;this.defaultPrevented=!0}function l(){this.bubbles=!1}if(m("dom")){var n=window.ScriptEngineMajorVersion;m.add("jscript",n&&n()+ScriptEngineMinorVersion()/10);m.add("event-orientationchange",m("touch")&&!m("android"));m.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);m.add("event-focusin",function(b,g,a){return"onfocusin"in a});m("touch")&&m.add("touch-can-modify-event-delegate",function(){var b=function(){};b.prototype=
document.createEvent("MouseEvents");try{var g=new b;g.target=null;return null===g.target}catch(E){return!1}})}var d=function(b,g,a,k){return"function"!=typeof b.on||"function"==typeof g||b.nodeType?d.parse(b,g,a,h,k,this):b.on(g,a)};d.pausable=function(b,g,a,k){var c;b=d(b,g,function(){if(!c)return a.apply(this,arguments)},k);b.pause=function(){c=!0};b.resume=function(){c=!1};return b};d.once=function(b,g,a,k){var c=d(b,g,function(){c.remove();return a.apply(this,arguments)});return c};d.parse=function(b,
g,a,k,c,p){var r;if(g.call)return g.call(p,b,a);g instanceof Array?r=g:-1<g.indexOf(",")&&(r=g.split(/\s*,\s*/));if(r){var q=[];g=0;for(var l;l=r[g++];)q.push(d.parse(b,l,a,k,c,p));q.remove=function(){for(var b=0;b<q.length;b++)q[b].remove()};return q}return k(b,g,a,c,p)};var c=/^touch/;d.matches=function(b,g,a,k,c){c=c&&"function"==typeof c.matches?c:f.query;k=!1!==k;1!=b.nodeType&&(b=b.parentNode);for(;!c.matches(b,g,a);)if(b==a||!1===k||!(b=b.parentNode)||1!=b.nodeType)return!1;return b};d.selector=
function(b,g,a){return function(k,c){function p(g){return d.matches(g,b,k,a,r)}var r="function"==typeof b?{matches:b}:this,q=g.bubble;return q?d(k,q(p),c):d(k,g,function(b){var g=p(b.target);if(g)return b.selectorTarget=g,c.call(g,b)})}};var b=[].slice,k=d.emit=function(g,a,k){var c=b.call(arguments,2),p="on"+a;if("parentNode"in g){var d=c[0]={},r;for(r in k)d[r]=k[r];d.preventDefault=e;d.stopPropagation=l;d.target=g;d.type=a;k=d}do g[p]&&g[p].apply(g,c);while(k&&k.bubbles&&(g=g.parentNode));return k&&
k.cancelable&&k},q=m("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!m("event-stopimmediatepropagation"))var u=function(){this.modified=this.immediatelyStopped=!0},x=function(b){return function(g){if(!g.immediatelyStopped)return g.stopImmediatePropagation=u,b.apply(this,arguments)}};if(m("dom-addeventlistener"))d.emit=function(b,g,a){if(b.dispatchEvent&&document.createEvent){var c=(b.ownerDocument||document).createEvent("HTMLEvents");c.initEvent(g,!!a.bubbles,!!a.cancelable);for(var p in a)p in
c||(c[p]=a[p]);return b.dispatchEvent(c)&&c}return k.apply(d,arguments)};else{d._fixEvent=function(b,a){b||(b=(a&&(a.ownerDocument||a.document||a).parentWindow||window).event);if(!b)return b;try{w&&b.type==w.type&&b.srcElement==w.target&&(b=w)}catch(E){}if(!b.target)switch(b.target=b.srcElement,b.currentTarget=a||b.srcElement,"mouseover"==b.type&&(b.relatedTarget=b.fromElement),"mouseout"==b.type&&(b.relatedTarget=b.toElement),b.stopPropagation||(b.stopPropagation=g,b.preventDefault=r),b.type){case "keypress":a=
"charCode"in b?b.charCode:b.keyCode,10==a?(a=0,b.keyCode=13):13==a||27==a?a=0:3==a&&(a=99),b.charCode=a,a=b,a.keyChar=a.charCode?String.fromCharCode(a.charCode):"",a.charOrCode=a.keyChar||a.keyCode}return b};var w,t=function(b){this.handle=b};t.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var p=function(b){return function(g){g=d._fixEvent(g,this);var a=b.call(this,g);g.modified&&(w||setTimeout(function(){w=null}),w=g);return a}},v=function(b,g,k){k=p(k);if(((b.ownerDocument?
b.ownerDocument.parentWindow:b.parentWindow||b.window||window)!=top||5.8>m("jscript"))&&!m("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var c=b[g];if(!c||!c.listeners){var d=c,c=Function("event","var callee \x3d arguments.callee; for(var i \x3d 0; i\x3ccallee.listeners.length; i++){var listener \x3d _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");c.listeners=[];b[g]=c;c.global=this;d&&c.listeners.push(_dojoIEListeners_.push(d)-
1)}c.listeners.push(b=c.global._dojoIEListeners_.push(k)-1);return new t(b)}return a.after(b,g,k,!0)},g=function(){this.cancelBubble=!0},r=d._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(F){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(m("touch"))var z=function(){},y=window.orientation,A=function(b){return function(g){var a=g.corrected;if(!a){var k=g.type;try{delete g.type}catch(U){}if(g.type){if(m("touch-can-modify-event-delegate"))z.prototype=
g,a=new z;else{var a={},c;for(c in g)a[c]=g[c]}a.preventDefault=function(){g.preventDefault()};a.stopPropagation=function(){g.stopPropagation()}}else a=g,a.type=k;g.corrected=a;if("resize"==k){if(y==window.orientation)return null;y=window.orientation;a.type="orientationchange";return b.call(this,a)}"rotation"in a||(a.rotation=0,a.scale=1);if(window.TouchEvent&&g instanceof TouchEvent){var k=a.changedTouches[0],p;for(p in k)delete a[p],a[p]=k[p]}}return b.call(this,a)}};return d})},"dojo/sniff":function(){define(["./has"],
function(a){if(a("host-browser")){var f=navigator,m=f.userAgent,f=f.appVersion,h=parseFloat(f);a.add("air",0<=m.indexOf("AdobeAIR"));a.add("wp",parseFloat(m.split("Windows Phone")[1])||void 0);a.add("msapp",parseFloat(m.split("MSAppHost/")[1])||void 0);a.add("khtml",0<=f.indexOf("Konqueror")?h:void 0);a.add("edge",parseFloat(m.split("Edge/")[1])||void 0);a.add("opr",parseFloat(m.split("OPR/")[1])||void 0);a.add("webkit",!a("wp")&&!a("edge")&&parseFloat(m.split("WebKit/")[1])||void 0);a.add("chrome",
!a("edge")&&!a("opr")&&parseFloat(m.split("Chrome/")[1])||void 0);a.add("android",!a("wp")&&parseFloat(m.split("Android ")[1])||void 0);a.add("safari",!(0<=f.indexOf("Safari"))||a("wp")||a("chrome")||a("android")||a("edge")||a("opr")?void 0:parseFloat(f.split("Version/")[1]));a.add("mac",0<=f.indexOf("Macintosh"));a.add("quirks","BackCompat"==document.compatMode);if(!a("wp")&&m.match(/(iPhone|iPod|iPad)/)){var e=RegExp.$1.replace(/P/,"p"),l=m.match(/OS ([\d_]+)/)?RegExp.$1:"1",l=parseFloat(l.replace(/_/,
".").replace(/_/g,""));a.add(e,l);a.add("ios",l)}a.add("bb",(0<=m.indexOf("BlackBerry")||0<=m.indexOf("BB10"))&&parseFloat(m.split("Version/")[1])||void 0);a.add("trident",parseFloat(f.split("Trident/")[1])||void 0);a.add("svg","undefined"!==typeof SVGAngle);a("webkit")||(0<=m.indexOf("Opera")&&a.add("opera",9.8<=h?parseFloat(m.split("Version/")[1])||h:h),!(0<=m.indexOf("Gecko"))||a("wp")||a("khtml")||a("trident")||a("edge")||a.add("mozilla",h),a("mozilla")&&a.add("ff",parseFloat(m.split("Firefox/")[1]||
m.split("Minefield/")[1])||void 0),document.all&&!a("opera")&&(m=parseFloat(f.split("MSIE ")[1])||void 0,(f=document.documentMode)&&5!=f&&Math.floor(m)!=f&&(m=f),a.add("ie",m)),a.add("wii","undefined"!=typeof opera&&opera.wiiremote))}return a})},"dojo/topic":function(){define(["./Evented"],function(a){var f=new a;return{publish:function(a,h){return f.emit.apply(f,arguments)},subscribe:function(a,h){return f.on.apply(f,arguments)}}})},"dojo/Evented":function(){define(["./aspect","./on"],function(a,
f){function m(){}var h=a.after;m.prototype={on:function(a,l){return f.parse(this,a,l,function(a,d){return h(a,"on"+d,l,!0)})},emit:function(a,l){var e=[this];e.push.apply(e,arguments);return f.emit.apply(f,e)}};return m})},"dojo/aspect":function(){define([],function(){function a(a,d,c,b){var k=a[d],q="around"==d,l;if(q){var e=c(function(){return k.advice(this,arguments)});l={remove:function(){e&&(e=a=c=null)},advice:function(b,a){return e?e.apply(b,a):k.advice(b,a)}}}else l={remove:function(){if(l.advice){var b=
l.previous,k=l.next;k||b?(b?b.next=k:a[d]=k,k&&(k.previous=b)):delete a[d];a=c=l.advice=null}},id:a.nextId++,advice:c,receiveArguments:b};if(k&&!q)if("after"==d){for(;k.next&&(k=k.next););k.next=l;l.previous=k}else"before"==d&&(a[d]=l,l.next=k,k.previous=l);else a[d]=l;return l}function f(l){return function(d,c,b,k){var q=d[c],e;q&&q.target==d||(d[c]=e=function(){for(var b=e.nextId,a=arguments,k=e.before;k;)k.advice&&(a=k.advice.apply(this,a)||a),k=k.next;if(e.around)var c=e.around.advice(this,a);
for(k=e.after;k&&k.id<b;){if(k.advice)if(k.receiveArguments)var d=k.advice.apply(this,a),c=d===m?c:d;else c=k.advice.call(this,c,a);k=k.next}return c},q&&(e.around={advice:function(b,a){return q.apply(b,a)}}),e.target=d,e.nextId=e.nextId||0);d=a(e||q,l,b,k);b=null;return d}}var m,h=f("after"),e=f("before"),l=f("around");return{before:e,around:l,after:h}})},"dojo/_base/event":function(){define(["./kernel","../on","../has","../dom-geometry"],function(a,f,m,h){if(f._fixEvent){var e=f._fixEvent;f._fixEvent=
function(a,d){(a=e(a,d))&&h.normalizeEvent(a);return a}}var l={fix:function(a,d){return f._fixEvent?f._fixEvent(a,d):a},stop:function(a){m("dom-addeventlistener")||a&&a.preventDefault?(a.preventDefault(),a.stopPropagation()):(a=a||window.event,a.cancelBubble=!0,f._preventDefault.call(a))}};a.fixEvent=l.fix;a.stopEvent=l.stop;return l})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(a,f,m,h){function e(b,a,c,d,l,e){e=e||"px";b=b.style;isNaN(a)||(b.left=
a+e);isNaN(c)||(b.top=c+e);0<=d&&(b.width=d+e);0<=l&&(b.height=l+e)}function l(b){return"button"==b.tagName.toLowerCase()||"input"==b.tagName.toLowerCase()&&"button"==(b.getAttribute("type")||"").toLowerCase()}function n(b){return"border-box"==d.boxModel||"table"==b.tagName.toLowerCase()||l(b)}var d={boxModel:"content-box"};a("ie")&&(d.boxModel="BackCompat"==document.compatMode?"border-box":"content-box");d.getPadExtents=function(b,a){b=m.byId(b);var k=a||h.getComputedStyle(b),c=h.toPixelValue;a=
c(b,k.paddingLeft);var d=c(b,k.paddingTop),l=c(b,k.paddingRight);b=c(b,k.paddingBottom);return{l:a,t:d,r:l,b:b,w:a+l,h:d+b}};d.getBorderExtents=function(b,a){b=m.byId(b);var k=h.toPixelValue,c=a||h.getComputedStyle(b);a="none"!=c.borderLeftStyle?k(b,c.borderLeftWidth):0;var d="none"!=c.borderTopStyle?k(b,c.borderTopWidth):0,l="none"!=c.borderRightStyle?k(b,c.borderRightWidth):0;b="none"!=c.borderBottomStyle?k(b,c.borderBottomWidth):0;return{l:a,t:d,r:l,b:b,w:a+l,h:d+b}};d.getPadBorderExtents=function(b,
a){b=m.byId(b);var k=a||h.getComputedStyle(b);a=d.getPadExtents(b,k);b=d.getBorderExtents(b,k);return{l:a.l+b.l,t:a.t+b.t,r:a.r+b.r,b:a.b+b.b,w:a.w+b.w,h:a.h+b.h}};d.getMarginExtents=function(b,a){b=m.byId(b);var k=a||h.getComputedStyle(b),c=h.toPixelValue;a=c(b,k.marginLeft);var d=c(b,k.marginTop),l=c(b,k.marginRight);b=c(b,k.marginBottom);return{l:a,t:d,r:l,b:b,w:a+l,h:d+b}};d.getMarginBox=function(b,k){b=m.byId(b);k=k||h.getComputedStyle(b);k=d.getMarginExtents(b,k);var c=b.offsetLeft-k.l,l=b.offsetTop-
k.t,e=b.parentNode,f=h.toPixelValue;8==a("ie")&&!a("quirks")&&e&&(e=h.getComputedStyle(e),c-="none"!=e.borderLeftStyle?f(b,e.borderLeftWidth):0,l-="none"!=e.borderTopStyle?f(b,e.borderTopWidth):0);return{l:c,t:l,w:b.offsetWidth+k.w,h:b.offsetHeight+k.h}};d.getContentBox=function(b,k){b=m.byId(b);var c=k||h.getComputedStyle(b);k=b.clientWidth;var l,e=d.getPadExtents(b,c);l=d.getBorderExtents(b,c);var c=b.offsetLeft+e.l+l.l,f=b.offsetTop+e.t+l.t;k?l=b.clientHeight:(k=b.offsetWidth-l.w,l=b.offsetHeight-
l.h);if(8==a("ie")&&!a("quirks")){var n=b.parentNode,p=h.toPixelValue;n&&(n=h.getComputedStyle(n),c-="none"!=n.borderLeftStyle?p(b,n.borderLeftWidth):0,f-="none"!=n.borderTopStyle?p(b,n.borderTopWidth):0)}return{l:c,t:f,w:k-e.w,h:l-e.h}};d.setContentSize=function(b,a,c){b=m.byId(b);var k=a.w;a=a.h;n(b)&&(c=d.getPadBorderExtents(b,c),0<=k&&(k+=c.w),0<=a&&(a+=c.h));e(b,NaN,NaN,k,a)};var c={l:0,t:0,w:0,h:0};d.setMarginBox=function(b,k,q){b=m.byId(b);var f=q||h.getComputedStyle(b);q=k.w;var x=k.h,w=n(b)?
c:d.getPadBorderExtents(b,f),f=d.getMarginExtents(b,f);if(a("webkit")&&l(b)){var t=b.style;0<=q&&!t.width&&(t.width="4px");0<=x&&!t.height&&(t.height="4px")}0<=q&&(q=Math.max(q-w.w-f.w,0));0<=x&&(x=Math.max(x-w.h-f.h,0));e(b,k.l,k.t,q,x)};d.isBodyLtr=function(b){b=b||f.doc;return"ltr"==(f.body(b).dir||b.documentElement.dir||"ltr").toLowerCase()};d.docScroll=function(b){b=b||f.doc;var c=f.doc.parentWindow||f.doc.defaultView;return"pageXOffset"in c?{x:c.pageXOffset,y:c.pageYOffset}:(c=a("quirks")?f.body(b):
b.documentElement)&&{x:d.fixIeBiDiScrollLeft(c.scrollLeft||0,b),y:c.scrollTop||0}};d.getIeDocumentElementOffset=function(b){return{x:0,y:0}};d.fixIeBiDiScrollLeft=function(b,c){c=c||f.doc;var k=a("ie");if(k&&!d.isBodyLtr(c)){var l=a("quirks");c=l?f.body(c):c.documentElement;var e=f.global;6==k&&!l&&e.frameElement&&c.scrollHeight>c.clientHeight&&(b+=c.clientLeft);return 8>k||l?b+c.clientWidth-c.scrollWidth:-b}return b};d.position=function(b,c){b=m.byId(b);var k=f.body(b.ownerDocument),l=b.getBoundingClientRect(),
l={x:l.left,y:l.top,w:l.right-l.left,h:l.bottom-l.top};9>a("ie")&&(l.x-=a("quirks")?k.clientLeft+k.offsetLeft:0,l.y-=a("quirks")?k.clientTop+k.offsetTop:0);c&&(b=d.docScroll(b.ownerDocument),l.x+=b.x,l.y+=b.y);return l};d.getMarginSize=function(b,a){b=m.byId(b);a=d.getMarginExtents(b,a||h.getComputedStyle(b));b=b.getBoundingClientRect();return{w:b.right-b.left+a.w,h:b.bottom-b.top+a.h}};d.normalizeEvent=function(b){"layerX"in b||(b.layerX=b.offsetX,b.layerY=b.offsetY);if(!("pageX"in b)){var c=b.target,
c=c&&c.ownerDocument||document,l=a("quirks")?c.body:c.documentElement;b.pageX=b.clientX+d.fixIeBiDiScrollLeft(l.scrollLeft||0,c);b.pageY=b.clientY+(l.scrollTop||0)}};return d})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(a,f,m){var h={global:a.global,doc:a.global.document||null,body:function(e){e=e||a.doc;return e.body||e.getElementsByTagName("body")[0]},setContext:function(e,l){a.global=h.global=e;a.doc=h.doc=l},withGlobal:function(e,l,f,d){var c=a.global;try{return a.global=
h.global=e,h.withDoc.call(null,e.document,l,f,d)}finally{a.global=h.global=c}},withDoc:function(e,l,f,d){var c=h.doc,b=m("quirks"),k=m("ie"),q,n,x;try{return a.doc=h.doc=e,a.isQuirks=m.add("quirks","BackCompat"==a.doc.compatMode,!0,!0),m("ie")&&(x=e.parentWindow)&&x.navigator&&(q=parseFloat(x.navigator.appVersion.split("MSIE ")[1])||void 0,(n=e.documentMode)&&5!=n&&Math.floor(q)!=n&&(q=n),a.isIE=m.add("ie",q,!0,!0)),f&&"string"==typeof l&&(l=f[l]),l.apply(f,d||[])}finally{a.doc=h.doc=c,a.isQuirks=
m.add("quirks",b,!0,!0),a.isIE=m.add("ie",k,!0,!0)}}};f.mixin(a,h);return h})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(a,f){f.add("bug-for-in-skips-shadowed",function(){for(var b in{toString:1})return 0;return 1});var m=f("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],h=m.length,e=function(b,c,d){d||(d=b[0]&&a.scopeMap[b[0]]?a.scopeMap[b.shift()][1]:a.global);try{for(var k=
0;k<b.length;k++){var l=b[k];if(!(l in d))if(c)d[l]={};else return;d=d[l]}return d}catch(w){}},l=Object.prototype.toString,n=function(b,a,c){return(c||[]).concat(Array.prototype.slice.call(b,a||0))},d=/\{([^\}]+)\}/g,c={_extraNames:m,_mixin:function(b,a,c){var k,d,l,e={};for(k in a)d=a[k],k in b&&(b[k]===d||k in e&&e[k]===d)||(b[k]=c?c(d):d);if(f("bug-for-in-skips-shadowed")&&a)for(l=0;l<h;++l)k=m[l],d=a[k],k in b&&(b[k]===d||k in e&&e[k]===d)||(b[k]=c?c(d):d);return b},mixin:function(b,a){b||(b=
{});for(var k=1,d=arguments.length;k<d;k++)c._mixin(b,arguments[k]);return b},setObject:function(b,a,c){var k=b.split(".");b=k.pop();return(c=e(k,!0,c))&&b?c[b]=a:void 0},getObject:function(b,a,c){return b?e(b.split("."),a,c):c},exists:function(b,a){return void 0!==c.getObject(b,!1,a)},isString:function(b){return"string"==typeof b||b instanceof String},isArray:Array.isArray||function(b){return"[object Array]"==l.call(b)},isFunction:function(b){return"[object Function]"===l.call(b)},isObject:function(b){return void 0!==
b&&(null===b||"object"==typeof b||c.isArray(b)||c.isFunction(b))},isArrayLike:function(b){return!!b&&!c.isString(b)&&!c.isFunction(b)&&!(b.tagName&&"form"==b.tagName.toLowerCase())&&(c.isArray(b)||isFinite(b.length))},isAlien:function(b){return b&&!c.isFunction(b)&&/\{\s*\[native code\]\s*\}/.test(String(b))},extend:function(b,a){for(var k=1,d=arguments.length;k<d;k++)c._mixin(b.prototype,arguments[k]);return b},_hitchArgs:function(b,k){var d=c._toArray(arguments,2),l=c.isString(k);return function(){var e=
c._toArray(arguments),q=l?(b||a.global)[k]:k;return q&&q.apply(b||this,d.concat(e))}},hitch:function(b,k){if(2<arguments.length)return c._hitchArgs.apply(a,arguments);k||(k=b,b=null);if(c.isString(k)){b=b||a.global;if(!b[k])throw['lang.hitch: scope["',k,'"] is null (scope\x3d"',b,'")'].join("");return function(){return b[k].apply(b,arguments||[])}}return b?function(){return k.apply(b,arguments||[])}:k},delegate:function(){function b(){}return function(a,d){b.prototype=a;a=new b;b.prototype=null;d&&
c._mixin(a,d);return a}}(),_toArray:f("ie")?function(){function b(b,a,c){c=c||[];for(a=a||0;a<b.length;a++)c.push(b[a]);return c}return function(a){return(a.item?b:n).apply(this,arguments)}}():n,partial:function(b){return c.hitch.apply(a,[null].concat(c._toArray(arguments)))},clone:function(b){if(!b||"object"!=typeof b||c.isFunction(b))return b;if(b.nodeType&&"cloneNode"in b)return b.cloneNode(!0);if(b instanceof Date)return new Date(b.getTime());if(b instanceof RegExp)return new RegExp(b);var a,
d,l;if(c.isArray(b))for(a=[],d=0,l=b.length;d<l;++d)d in b&&(a[d]=c.clone(b[d]));else a=b.constructor?new b.constructor:{};return c._mixin(a,b,c.clone)},trim:String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(b,a,l){return b.replace(l||d,c.isFunction(a)?a:function(b,k){return c.getObject(k,!1,a)})}};c.mixin(a,c);return c})},"dojo/dom":function(){define(["./sniff","./_base/window","./_base/kernel"],function(a,f,m){if(7>=
a("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(l){}var h={};a("ie")?h.byId=function(a,e){if("string"!=typeof a)return a;var d=e||f.doc;e=a&&d.getElementById(a);if(!e||e.attributes.id.value!=a&&e.id!=a){d=d.all[a];if(!d||d.nodeName)d=[d];for(var c=0;e=d[c++];)if(e.attributes&&e.attributes.id&&e.attributes.id.value==a||e.id==a)return e}else return e}:h.byId=function(a,e){return("string"==typeof a?(e||f.doc).getElementById(a):a)||null};m=m.global.document||null;a.add("dom-contains",
!(!m||!m.contains));h.isDescendant=a("dom-contains")?function(a,e){return!(!(e=h.byId(e))||!e.contains(h.byId(a)))}:function(a,e){try{for(a=h.byId(a),e=h.byId(e);a;){if(a==e)return!0;a=a.parentNode}}catch(d){}return!1};a.add("css-user-select",function(a,e,d){if(!d)return!1;a=d.style;e=["Khtml","O","Moz","Webkit"];d=e.length;var c="userSelect";do if("undefined"!==typeof a[c])return c;while(d--&&(c=e[d]+"UserSelect"));return!1});var e=a("css-user-select");h.setSelectable=e?function(a,f){h.byId(a).style[e]=
f?"":"none"}:function(a,e){a=h.byId(a);var d=a.getElementsByTagName("*"),c=d.length;if(e)for(a.removeAttribute("unselectable");c--;)d[c].removeAttribute("unselectable");else for(a.setAttribute("unselectable","on");c--;)d[c].setAttribute("unselectable","on")};return h})},"dojo/dom-style":function(){define(["./sniff","./dom","./_base/window"],function(a,f,m){function h(b,a,c){a=a.toLowerCase();if("auto"==c){if("height"==a)return b.offsetHeight;if("width"==a)return b.offsetWidth}if("fontweight"==a)switch(c){case 700:return"bold";
default:return"normal"}a in k||(k[a]=q.test(a));return k[a]?n(b,c):c}var e,l={};e=a("webkit")?function(b){var a;if(1==b.nodeType){var c=b.ownerDocument.defaultView;a=c.getComputedStyle(b,null);!a&&b.style&&(b.style.display="",a=c.getComputedStyle(b,null))}return a||{}}:a("ie")&&(9>a("ie")||a("quirks"))?function(b){return 1==b.nodeType&&b.currentStyle?b.currentStyle:{}}:function(b){if(1===b.nodeType){var a=b.ownerDocument.defaultView;return(a.opener?a:m.global.window).getComputedStyle(b,null)}return{}};
l.getComputedStyle=e;var n;n=a("ie")?function(b,a){if(!a)return 0;if("medium"==a)return 4;if(a.slice&&"px"==a.slice(-2))return parseFloat(a);var c=b.style,k=b.runtimeStyle,d=c.left,g=k.left;k.left=b.currentStyle.left;try{c.left=a,a=c.pixelLeft}catch(r){a=0}c.left=d;k.left=g;return a}:function(b,a){return parseFloat(a)||0};l.toPixelValue=n;var d=function(b,a){try{return b.filters.item("DXImageTransform.Microsoft.Alpha")}catch(t){return a?{}:null}},c=9>a("ie")||10>a("ie")&&a("quirks")?function(b){try{return d(b).Opacity/
100}catch(w){return 1}}:function(b){return e(b).opacity},b=9>a("ie")||10>a("ie")&&a("quirks")?function(a,c){""===c&&(c=1);var k=100*c;1===c?(a.style.zoom="",d(a)&&(a.style.filter=a.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,""))):(a.style.zoom=1,d(a)?d(a,1).Opacity=k:a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d"+k+")",d(a,1).Enabled=!0);if("tr"==a.tagName.toLowerCase())for(a=a.firstChild;a;a=a.nextSibling)"td"==a.tagName.toLowerCase()&&b(a,
c);return c}:function(b,a){return b.style.opacity=a},k={left:!0,top:!0},q=/margin|padding|width|height|max|min|offset/,u={cssFloat:1,styleFloat:1,"float":1};l.get=function(b,a){var k=f.byId(b),d=arguments.length;if(2==d&&"opacity"==a)return c(k);a=u[a]?"cssFloat"in k.style?"cssFloat":"styleFloat":a;var e=l.getComputedStyle(k);return 1==d?e:h(k,a,e[a]||k.style[a])};l.set=function(a,c,k){var d=f.byId(a),e=arguments.length,g="opacity"==c;c=u[c]?"cssFloat"in d.style?"cssFloat":"styleFloat":c;if(3==e)return g?
b(d,k):d.style[c]=k;for(var r in c)l.set(a,r,c[r]);return l.getComputedStyle(d)};return l})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(a,f,m,h,e){function l(a,d){var c=function(b,c){return f(b,a,function(a){if(d)return d(a,c);if(!h.isDescendant(a.relatedTarget,b))return c.call(this,a)})};c.bubble=function(b){return l(a,function(a,c){var k=b(a.target),d=a.relatedTarget;if(k&&k!=(d&&1==d.nodeType&&b(d)))return c.call(k,a)})};return c}m.add("dom-quirks",
e.doc&&"BackCompat"==e.doc.compatMode);m.add("events-mouseenter",e.doc&&"onmouseenter"in e.doc.createElement("div"));m.add("events-mousewheel",e.doc&&"onmousewheel"in e.doc);e=m("dom-quirks")&&m("ie")||!m("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(a,d){return a.button&d},isLeft:function(a){return a.button&1},isMiddle:function(a){return a.button&4},isRight:function(a){return a.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(a,d){return a.button==d},isLeft:function(a){return 0==
a.button},isMiddle:function(a){return 1==a.button},isRight:function(a){return 2==a.button}};a.mouseButtons=e;a=m("events-mousewheel")?"mousewheel":function(a,d){return f(a,"DOMMouseScroll",function(a){a.wheelDelta=-a.detail;d.call(this,a)})};return{_eventHandler:l,enter:l("mouseover"),leave:l("mouseout"),wheel:a,isLeft:e.isLeft,isMiddle:e.isMiddle,isRight:e.isRight}})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(a,f,m){if(!m("host-browser"))return m;a._name="browser";
f.mixin(a,{isBrowser:!0,isFF:m("ff"),isIE:m("ie"),isKhtml:m("khtml"),isWebKit:m("webkit"),isMozilla:m("mozilla"),isMoz:m("mozilla"),isOpera:m("opera"),isSafari:m("safari"),isChrome:m("chrome"),isMac:m("mac"),isIos:m("ios"),isAndroid:m("android"),isWii:m("wii"),isQuirks:m("quirks"),isAir:m("air")});return m})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(a,f){return a.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:f("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,
ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,
F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:f("mac")&&!f("air")?f("safari")?91:224:17}})},"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t){a._xhrObj=w._create;var p=a.config;a.objectToQuery=h.objectToQuery;a.queryToObject=h.queryToObject;
a.fieldToObject=l.fieldToObject;a.formToObject=l.toObject;a.formToQuery=l.toQuery;a.formToJson=l.toJson;a._blockAsync=!1;f.add("native-xhr2-blob",function(){if(f("native-xhr2")){var b=new XMLHttpRequest;b.open("GET","/",!0);b.responseType="blob";var g=b.responseType;b.abort();return"blob"===g}});var v=a._contentHandlers=a.contentHandlers={text:function(b){return b.responseText},json:function(b){return c.fromJson(b.responseText||null)},"json-comment-filtered":function(b){d.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}\x26\x26\nUse djConfig.useCommentedJson\x3dtrue to turn off this message.");
b=b.responseText;var g=b.indexOf("/*"),a=b.lastIndexOf("*/");if(-1==g||-1==a)throw Error("JSON was not comment filtered");return c.fromJson(b.substring(g+2,a))},javascript:function(b){return a.eval(b.responseText)},xml:function(b){var g=b.responseXML;g&&f("dom-qsa2.1")&&!g.querySelectorAll&&f("dom-parser")&&(g=(new DOMParser).parseFromString(b.responseText,"application/xml"));if(f("ie")&&(!g||!g.documentElement)){var a=function(b){return"MSXML"+b+".DOMDocument"},a=["Microsoft.XMLDOM",a(6),a(4),a(3),
a(2)];k.some(a,function(a){try{var c=new ActiveXObject(a);c.async=!1;c.loadXML(b.responseText);g=c}catch(G){return!1}return!0})}return g},"json-comment-optional":function(b){return b.responseText&&/^[^{\[]*\/\*/.test(b.responseText)?v["json-comment-filtered"](b):v.json(b)}};f("native-xhr2")&&(v.arraybuffer=v.blob=v.document=function(b,g){return"blob"!==g.args.handleAs||f("native-xhr2-blob")?b.response:new Blob([b.response],{type:b.getResponseHeader("Content-Type")})});a._ioSetArgs=function(g,c,k,
d){var r={args:g,url:g.url},q=null;if(g.form){var q=e.byId(g.form),f=q.getAttributeNode("action");r.url=r.url||(f?f.value:a.doc?a.doc.URL:null);q=l.toObject(q)}f=[{}];q&&f.push(q);g.content&&f.push(g.content);g.preventCache&&f.push({"dojo.preventCache":(new Date).valueOf()});r.query=h.objectToQuery(b.mixin.apply(null,f));r.handleAs=g.handleAs||"text";var v=new n(function(b){b.canceled=!0;c&&c(b);var g=b.ioArgs.error;g||(g=Error("request cancelled"),g.dojoType="cancel",b.ioArgs.error=g);return g});
v.addCallback(k);var z=g.load;z&&b.isFunction(z)&&v.addCallback(function(b){return z.call(g,b,r)});var u=g.error;u&&b.isFunction(u)&&v.addErrback(function(b){return u.call(g,b,r)});var t=g.handle;t&&b.isFunction(t)&&v.addBoth(function(b){return t.call(g,b,r)});v.addErrback(function(b){return d(b,v)});p.ioPublish&&a.publish&&!1!==r.args.ioPublish&&(v.addCallbacks(function(b){a.publish("/dojo/io/load",[v,b]);return b},function(b){a.publish("/dojo/io/error",[v,b]);return b}),v.addBoth(function(b){a.publish("/dojo/io/done",
[v,b]);return b}));v.ioArgs=r;return v};var g=function(b){b=v[b.ioArgs.handleAs](b.ioArgs.xhr,b.ioArgs);return void 0===b?null:b},r=function(b,g){g.ioArgs.args.failOk||console.error(b);return b},z=function(b){0>=y&&(y=0,p.ioPublish&&a.publish&&(!b||b&&!1!==b.ioArgs.args.ioPublish)&&a.publish("/dojo/io/stop"))},y=0;u.after(x,"_onAction",function(){--y});u.after(x,"_onInFlight",z);a._ioCancelAll=x.cancelAll;a._ioNotifyStart=function(b){p.ioPublish&&a.publish&&!1!==b.ioArgs.args.ioPublish&&(y||a.publish("/dojo/io/start"),
y+=1,a.publish("/dojo/io/send",[b]))};a._ioWatch=function(g,a,c,k){g.ioArgs.options=g.ioArgs.args;b.mixin(g,{response:g.ioArgs,isValid:function(b){return a(g)},isReady:function(b){return c(g)},handleResponse:function(b){return k(g)}});x(g);z(g)};a._ioAddQueryToUrl=function(b){b.query.length&&(b.url+=(-1==b.url.indexOf("?")?"?":"\x26")+b.query,b.query=null)};a.xhr=function(b,c,k){var d,p=a._ioSetArgs(c,function(b){d&&d.cancel()},g,r),l=p.ioArgs;"postData"in c?l.query=c.postData:"putData"in c?l.query=
c.putData:"rawBody"in c?l.query=c.rawBody:(2<arguments.length&&!k||-1==="POST|PUT".indexOf(b.toUpperCase()))&&a._ioAddQueryToUrl(l);var e;f("native-xhr2")&&(e={arraybuffer:1,blob:1,document:1});e=f("native-xhr2")&&e[c.handleAs]?c.handleAs:"text";"blob"!==e||f("native-xhr2-blob")||(e="arraybuffer");e={method:b,handleAs:e,responseType:c.responseType,timeout:c.timeout,withCredentials:c.withCredentials,ioArgs:l};"undefined"!==typeof c.headers&&(e.headers=c.headers);"undefined"!==typeof c.contentType&&
(e.headers||(e.headers={}),e.headers["Content-Type"]=c.contentType);"undefined"!==typeof l.query&&(e.data=l.query);"undefined"!==typeof c.sync&&(e.sync=c.sync);a._ioNotifyStart(p);try{d=w(l.url,e,!0)}catch(U){return p.cancel(),p}p.ioArgs.xhr=d.response.xhr;d.then(function(){p.resolve(p)}).otherwise(function(b){l.error=b;b.response&&(b.status=b.response.status,b.responseText=b.response.text,b.xhr=b.response.xhr);p.reject(b)});return p};a.xhrGet=function(b){return a.xhr("GET",b)};a.rawXhrPost=a.xhrPost=
function(b){return a.xhr("POST",b,!0)};a.rawXhrPut=a.xhrPut=function(b){return a.xhr("PUT",b,!0)};a.xhrDelete=function(b){return a.xhr("DELETE",b)};a._isDocumentOk=function(b){return t.checkStatus(b.status)};a._getText=function(b){var g;a.xhrGet({url:b,sync:!0,load:function(b){g=b}});return g};b.mixin(a.xhr,{_xhrObj:a._xhrObj,fieldToObject:l.fieldToObject,formToObject:l.toObject,objectToQuery:h.objectToQuery,formToQuery:l.toQuery,formToJson:l.toJson,queryToObject:h.queryToObject,contentHandlers:v,
_ioSetArgs:a._ioSetArgs,_ioCancelAll:a._ioCancelAll,_ioNotifyStart:a._ioNotifyStart,_ioWatch:a._ioWatch,_ioAddQueryToUrl:a._ioAddQueryToUrl,_isDocumentOk:a._isDocumentOk,_getText:a._getText,get:a.xhrGet,post:a.xhrPost,put:a.xhrPut,del:a.xhrDelete});return a.xhr})},"dojo/io-query":function(){define(["./_base/lang"],function(a){var f={};return{objectToQuery:function(m){var h=encodeURIComponent,e=[],l;for(l in m){var n=m[l];if(n!=f[l]){var d=h(l)+"\x3d";if(a.isArray(n))for(var c=0,b=n.length;c<b;++c)e.push(d+
h(n[c]));else e.push(d+h(n))}}return e.join("\x26")},queryToObject:function(f){var h=decodeURIComponent;f=f.split("\x26");for(var e={},l,n,d=0,c=f.length;d<c;++d)if(n=f[d],n.length){var b=n.indexOf("\x3d");0>b?(l=h(n),n=""):(l=h(n.slice(0,b)),n=h(n.slice(b+1)));"string"==typeof e[l]&&(e[l]=[e[l]]);a.isArray(e[l])?e[l].push(n):e[l]=n}return e}}})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(a,f,m,h){var e={fieldToObject:function(a){var e=null;if(a=f.byId(a)){var d=
a.name,c=(a.type||"").toLowerCase();if(d&&c&&!a.disabled)if("radio"==c||"checkbox"==c)a.checked&&(e=a.value);else if(a.multiple)for(e=[],a=[a.firstChild];a.length;)for(d=a.pop();d;d=d.nextSibling)if(1==d.nodeType&&"option"==d.tagName.toLowerCase())d.selected&&e.push(d.value);else{d.nextSibling&&a.push(d.nextSibling);d.firstChild&&a.push(d.firstChild);break}else e=a.value}return e},toObject:function(l){var h={};l=f.byId(l).elements;for(var d=0,c=l.length;d<c;++d){var b=l[d],k=b.name,q=(b.type||"").toLowerCase();
if(k&&q&&0>"file|submit|image|reset|button".indexOf(q)&&!b.disabled){var u=h,x=k,b=e.fieldToObject(b);if(null!==b){var w=u[x];"string"==typeof w?u[x]=[w,b]:a.isArray(w)?w.push(b):u[x]=b}"image"==q&&(h[k+".x"]=h[k+".y"]=h[k].x=h[k].y=0)}}return h},toQuery:function(a){return m.objectToQuery(e.toObject(a))},toJson:function(a,f){return h.stringify(e.toObject(a),null,f?4:0)}};return e})},"dojo/json":function(){define(["./has"],function(a){var f="undefined"!=typeof JSON;a.add("json-parse",f);a.add("json-stringify",
f&&'{"a":1}'==JSON.stringify({a:0},function(a,e){return e||1}));if(a("json-stringify"))return JSON;var m=function(a){return('"'+a.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:a("json-parse")?JSON.parse:function(a,e){if(e&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(a))throw new SyntaxError("Invalid characters in JSON");return eval("("+
a+")")},stringify:function(a,e,l){function h(a,b,k){e&&(a=e(k,a));var c;c=typeof a;if("number"==c)return isFinite(a)?a+"":"null";if("boolean"==c)return a+"";if(null===a)return"null";if("string"==typeof a)return m(a);if("function"==c||"undefined"==c)return d;if("function"==typeof a.toJSON)return h(a.toJSON(k),b,k);if(a instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(b,g,c){b=a["getUTC"+g]()+(c?1:0);return 10>b?"0"+b:b});if(a.valueOf()!==
a)return h(a.valueOf(),b,k);var f=l?b+l:"",n=l?" ":"",w=l?"\n":"";if(a instanceof Array){var n=a.length,t=[];for(k=0;k<n;k++)c=h(a[k],f,k),"string"!=typeof c&&(c="null"),t.push(w+f+c);return"["+t.join(",")+w+b+"]"}t=[];for(k in a){var p;if(a.hasOwnProperty(k)){if("number"==typeof k)p='"'+k+'"';else if("string"==typeof k)p=m(k);else continue;c=h(a[k],f,k);"string"==typeof c&&t.push(w+f+p+":"+n+c)}}return"{"+t.join(",")+w+b+"}"}var d;"string"==typeof e&&(l=e,e=null);return h(a,"","")}}})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),
function(a,f,m,h,e,l,n){var d=function(){},c=Object.freeze||function(){},b=a.Deferred=function(a){function k(b){if(w)throw Error("This deferred has already been resolved");x=b;w=!0;n()}function n(){for(var b;!b&&r;){var g=r;r=r.next;if(b=g.progress==d)w=!1;var a=v?g.error:g.resolved;e("config-useDeferredInstrumentation")&&v&&f.instrumentRejected&&f.instrumentRejected(x,!!a);if(a)try{var c=a(x);c&&"function"===typeof c.then?c.then(l.hitch(g.deferred,"resolve"),l.hitch(g.deferred,"reject"),l.hitch(g.deferred,
"progress")):(a=b&&void 0===c,b&&!a&&(v=c instanceof Error),g.deferred[a&&v?"reject":"resolve"](a?x:c))}catch(C){g.deferred.reject(C)}else v?g.deferred.reject(x):g.deferred.resolve(x)}}var x,w,t,p,v,g,r,z=this.promise=new m;this.isResolved=z.isResolved=function(){return 0==p};this.isRejected=z.isRejected=function(){return 1==p};this.isFulfilled=z.isFulfilled=function(){return 0<=p};this.isCanceled=z.isCanceled=function(){return t};this.resolve=this.callback=function(b){this.fired=p=0;this.results=
[b,null];k(b)};this.reject=this.errback=function(b){v=!0;this.fired=p=1;e("config-useDeferredInstrumentation")&&f.instrumentRejected&&f.instrumentRejected(b,!!r);k(b);this.results=[null,b]};this.progress=function(b){for(var g=r;g;){var a=g.progress;a&&a(b);g=g.next}};this.addCallbacks=function(b,g){this.then(b,g,d);return this};z.then=this.then=function(a,c,k){var p=k==d?this:new b(z.cancel);a={resolved:a,error:c,progress:k,deferred:p};r?g=g.next=a:r=g=a;w&&n();return p.promise};var y=this;z.cancel=
this.cancel=function(){if(!w){var b=a&&a(y);w||(b instanceof Error||(b=new h(b)),b.log=!1,y.reject(b))}t=!0};c(z)};l.extend(b,{addCallback:function(b){return this.addCallbacks(l.hitch.apply(a,arguments))},addErrback:function(b){return this.addCallbacks(null,l.hitch.apply(a,arguments))},addBoth:function(b){var c=l.hitch.apply(a,arguments);return this.addCallbacks(c,c)},fired:-1});b.when=a.when=n;return b})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise",
"./has!config-deferredInstrumentation?./promise/instrumentation"],function(a,f,m,h,e){var l=Object.freeze||function(){},n=function(b,c,e,l,h){a("config-deferredInstrumentation")&&2===c&&k.instrumentRejected&&0===b.length&&k.instrumentRejected(e,!1,l,h);for(h=0;h<b.length;h++)d(b[h],c,e,l)},d=function(d,e,l,h){var q=d[e],p=d.deferred;if(q)try{var f=q(l);if(0===e)"undefined"!==typeof f&&b(p,e,f);else{if(f&&"function"===typeof f.then){d.cancel=f.cancel;f.then(c(p,1),c(p,2),c(p,0));return}b(p,1,f)}}catch(g){b(p,
2,g)}else b(p,e,l);a("config-deferredInstrumentation")&&2===e&&k.instrumentRejected&&k.instrumentRejected(l,!!q,h,p.promise)},c=function(a,c){return function(k){b(a,c,k)}},b=function(b,a,c){if(!b.isCanceled())switch(a){case 0:b.progress(c);break;case 1:b.resolve(c);break;case 2:b.reject(c)}},k=function(b){var c=this.promise=new h,e=this,q,f,p,v=!1,g=[];a("config-deferredInstrumentation")&&Error.captureStackTrace&&(Error.captureStackTrace(e,k),Error.captureStackTrace(c,k));this.isResolved=c.isResolved=
function(){return 1===q};this.isRejected=c.isRejected=function(){return 2===q};this.isFulfilled=c.isFulfilled=function(){return!!q};this.isCanceled=c.isCanceled=function(){return v};this.progress=function(b,a){if(q){if(!0===a)throw Error("This deferred has already been fulfilled.");return c}n(g,0,b,null,e);return c};this.resolve=function(b,a){if(q){if(!0===a)throw Error("This deferred has already been fulfilled.");return c}n(g,q=1,f=b,null,e);g=null;return c};var r=this.reject=function(b,k){if(q){if(!0===
k)throw Error("This deferred has already been fulfilled.");return c}a("config-deferredInstrumentation")&&Error.captureStackTrace&&Error.captureStackTrace(p={},r);n(g,q=2,f=b,p,e);g=null;return c};this.then=c.then=function(b,a,r){var e=[r,b,a];e.cancel=c.cancel;e.deferred=new k(function(b){return e.cancel&&e.cancel(b)});q&&!g?d(e,q,f,p):g.push(e);return e.deferred.promise};this.cancel=c.cancel=function(g,a){if(!q){b&&(a=b(g),g="undefined"===typeof a?g:a);v=!0;if(!q)return"undefined"===typeof g&&(g=
new m),r(g),g;if(2===q&&f===g)return g}else if(!0===a)throw Error("This deferred has already been fulfilled.");};l(c)};k.prototype.toString=function(){return"[object Deferred]"};e&&e(k);return k})},"dojo/errors/CancelError":function(){define(["./create"],function(a){return a("CancelError",null,null,{dojoType:"cancel",log:!1})})},"dojo/errors/create":function(){define(["../_base/lang"],function(a){return function(f,m,h,e){h=h||Error;var l=function(a){if(h===Error){Error.captureStackTrace&&Error.captureStackTrace(this,
l);var d=Error.call(this,a),c;for(c in d)d.hasOwnProperty(c)&&(this[c]=d[c]);this.message=a;this.stack=d.stack}else h.apply(this,arguments);m&&m.apply(this,arguments)};l.prototype=a.delegate(h.prototype,e);l.prototype.name=f;return l.prototype.constructor=l}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(a){function f(){throw new TypeError("abstract");}return a.extend(function(){},{then:function(a,h,e){f()},cancel:function(a,h){f()},isResolved:function(){f()},isRejected:function(){f()},
isFulfilled:function(){f()},isCanceled:function(){f()},always:function(a){return this.then(a,a)},otherwise:function(a){return this.then(null,a)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(a,f){return function(m,h,e,l){var n=m&&"function"===typeof m.then,d=n&&m instanceof f;if(!n)return 1<arguments.length?h?h(m):m:(new a).resolve(m);d||(n=new a(m.cancel),
m.then(n.resolve,n.reject,n.progress),m=n.promise);return h||e||l?m.then(h,e,l):m}})},"dojo/_base/json":function(){define(["./kernel","../json"],function(a,f){a.fromJson=function(a){return eval("("+a+")")};a._escapeString=f.stringify;a.toJsonIndentStr="\t";a.toJson=function(m,h){return f.stringify(m,function(a,l){return l&&(a=l.__json__||l.json,"function"==typeof a)?a.call(l):l},h&&a.toJsonIndentStr)};return a})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(a,f,m){function h(b){return n[b]=
new Function("item","index","array",b)}function e(b){var a=!b;return function(c,k,d){var e=0,l=c&&c.length||0,p;l&&"string"==typeof c&&(c=c.split(""));"string"==typeof k&&(k=n[k]||h(k));if(d)for(;e<l;++e){if(p=!k.call(d,c[e],e,c),b^p)return!p}else for(;e<l;++e)if(p=!k(c[e],e,c),b^p)return!p;return a}}function l(b){var a=1,e=0,l=0;b||(a=e=l=-1);return function(k,q,h,p){if(p&&0<a)return c.lastIndexOf(k,q,h);p=k&&k.length||0;var f=b?p+l:e;h===d?h=b?e:p+l:0>h?(h=p+h,0>h&&(h=e)):h=h>=p?p+l:h;for(p&&"string"==
typeof k&&(k=k.split(""));h!=f;h+=a)if(k[h]==q)return h;return-1}}var n={},d,c={every:e(!1),some:e(!0),indexOf:l(!0),lastIndexOf:l(!1),forEach:function(b,a,c){var k=0,d=b&&b.length||0;d&&"string"==typeof b&&(b=b.split(""));"string"==typeof a&&(a=n[a]||h(a));if(c)for(;k<d;++k)a.call(c,b[k],k,b);else for(;k<d;++k)a(b[k],k,b)},map:function(b,a,c,d){var k=0,e=b&&b.length||0;d=new (d||Array)(e);e&&"string"==typeof b&&(b=b.split(""));"string"==typeof a&&(a=n[a]||h(a));if(c)for(;k<e;++k)d[k]=a.call(c,b[k],
k,b);else for(;k<e;++k)d[k]=a(b[k],k,b);return d},filter:function(b,a,c){var k=0,d=b&&b.length||0,e=[],l;d&&"string"==typeof b&&(b=b.split(""));"string"==typeof a&&(a=n[a]||h(a));if(c)for(;k<d;++k)l=b[k],a.call(c,l,k,b)&&e.push(l);else for(;k<d;++k)l=b[k],a(l,k,b)&&e.push(l);return e},clearCache:function(){n={}}};m.mixin(a,c);return c})},"dojo/request/watch":function(){define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../has!host-browser?../_base/window: ../has!host-browser?dom-addeventlistener?:../on:".split(" "),
function(a,f,m,h,e,l){function n(){for(var a=+new Date,e=0,l;e<b.length&&(l=b[e]);e++){var h=l.response,n=h.options;l.isCanceled&&l.isCanceled()||l.isValid&&!l.isValid(h)?(b.splice(e--,1),d._onAction&&d._onAction()):l.isReady&&l.isReady(h)?(b.splice(e--,1),l.handleResponse(h),d._onAction&&d._onAction()):l.startTime&&l.startTime+(n.timeout||0)<a&&(b.splice(e--,1),l.cancel(new f("Timeout exceeded",h)),d._onAction&&d._onAction())}d._onInFlight&&d._onInFlight(l);b.length||(clearInterval(c),c=null)}function d(a){a.response.options.timeout&&
(a.startTime=+new Date);a.isFulfilled()||(b.push(a),c||(c=setInterval(n,50)),a.response.options.sync&&n())}var c=null,b=[];d.cancelAll=function(){try{h.forEach(b,function(b){try{b.cancel(new m("All requests canceled."))}catch(q){}})}catch(k){}};e&&l&&e.doc.attachEvent&&l(e.global,"unload",function(){d.cancelAll()});return d})},"dojo/request/util":function(){define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise ../has".split(" "),
function(a,f,m,h,e,l,n,d,c){function b(b){return q(b)}function k(b){return void 0!==b.data?b.data:b.text}a.deepCopy=function(b,c){for(var k in c){var d=b[k],p=c[k];d!==p&&(d&&"object"===typeof d&&p&&"object"===typeof p?a.deepCopy(d,p):b[k]=p)}return b};a.deepCreate=function(b,c){c=c||{};var k=n.delegate(b),d,p;for(d in b)(p=b[d])&&"object"===typeof p&&(k[d]=a.deepCreate(p,c[d]));return a.deepCopy(k,c)};var q=Object.freeze||function(b){return b};a.deferred=function(c,e,l,t,p,v){var g=new h(function(b){e&&
e(g,c);return b&&(b instanceof f||b instanceof m)?b:new m("Request canceled",c)});g.response=c;g.isValid=l;g.isReady=t;g.handleResponse=p;l=g.then(b).otherwise(function(b){b.response=c;throw b;});a.notify&&l.then(n.hitch(a.notify,"emit","load"),n.hitch(a.notify,"emit","error"));t=l.then(k);p=new d;for(var r in t)t.hasOwnProperty(r)&&(p[r]=t[r]);p.response=l;q(p);v&&g.then(function(b){v.call(g,b)},function(b){v.call(g,c,b)});g.promise=p;g.then=p.then;return g};a.addCommonMethods=function(b,a){l.forEach(a||
["GET","POST","PUT","DELETE"],function(a){b[("DELETE"===a?"DEL":a).toLowerCase()]=function(c,k){k=n.delegate(k||{});k.method=a;return b(c,k)}})};a.parseArgs=function(b,a,k){var d=a.data,p=a.query;!d||k||"object"!==typeof d||c("native-xhr2")&&(d instanceof ArrayBuffer||d instanceof Blob)||(a.data=e.objectToQuery(d));p?("object"===typeof p&&(p=e.objectToQuery(p)),a.preventCache&&(p+=(p?"\x26":"")+"request.preventCache\x3d"+ +new Date)):a.preventCache&&(p="request.preventCache\x3d"+ +new Date);b&&p&&
(b+=(~b.indexOf("?")?"\x26":"?")+p);return{url:b,options:a,getHeader:function(b){return null}}};a.checkStatus=function(b){b=b||0;return 200<=b&&300>b||304===b||1223===b||!b}})},"dojo/errors/RequestError":function(){define(["./create"],function(a){return a("RequestError",function(a,m){this.response=m})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(a,f){return a("RequestTimeoutError",null,f,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError",
"./watch","./handlers","./util","../has"],function(a,f,m,h,e){function l(b,c){var k=b.xhr;b.status=b.xhr.status;try{b.text=k.responseText}catch(r){}"xml"===b.options.handleAs&&(b.data=k.responseXML);if(!c)try{m(b)}catch(r){c=r}var g;if(c)this.reject(c);else{try{m(b)}catch(r){g=r}h.checkStatus(k.status)?g?this.reject(g):this.resolve(b):(c=g?new a("Unable to load "+b.url+" status: "+k.status+" and an error in handleAs: transformation of response",b):new a("Unable to load "+b.url+" status: "+k.status,
b),this.reject(c))}}function n(b){return this.xhr.getResponseHeader(b)}function d(t,p,v){var g=e("native-formdata")&&p&&p.data&&p.data instanceof FormData,r=h.parseArgs(t,h.deepCreate(w,p),g);t=r.url;p=r.options;var z,y=h.deferred(r,u,b,k,l,function(){z&&z()}),m=r.xhr=d._create();if(!m)return y.cancel(new a("XHR was not created")),v?y:y.promise;r.getHeader=n;q&&(z=q(m,y,r));var F="undefined"===typeof p.data?null:p.data,B=!p.sync,E=p.method;try{m.open(E,t,B,p.user||x,p.password||x);p.withCredentials&&
(m.withCredentials=p.withCredentials);e("native-response-type")&&p.handleAs in c&&(m.responseType=c[p.handleAs]);var C=p.headers;t=g?!1:"application/x-www-form-urlencoded";if(C)for(var G in C)"content-type"===G.toLowerCase()?t=C[G]:C[G]&&m.setRequestHeader(G,C[G]);t&&!1!==t&&m.setRequestHeader("Content-Type",t);C&&"X-Requested-With"in C||m.setRequestHeader("X-Requested-With","XMLHttpRequest");h.notify&&h.notify.emit("send",r,y.promise.cancel);m.send(F)}catch(L){y.reject(L)}f(y);m=null;return v?y:
y.promise}e.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});e.add("dojo-force-activex-xhr",function(){return e("activex")&&"file:"===window.location.protocol});e.add("native-xhr2",function(){if(e("native-xhr")&&!e("dojo-force-activex-xhr")){var b=new XMLHttpRequest;return"undefined"!==typeof b.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof b.upload)}});e.add("native-formdata",function(){return"undefined"!==typeof FormData});e.add("native-response-type",
function(){return e("native-xhr")&&"undefined"!==typeof(new XMLHttpRequest).responseType});e.add("native-xhr2-blob",function(){if(e("native-response-type")){var b=new XMLHttpRequest;b.open("GET","https://dojotoolkit.org/",!0);b.responseType="blob";var a=b.responseType;b.abort();return"blob"===a}});var c={blob:e("native-xhr2-blob")?"blob":"arraybuffer",document:"document",arraybuffer:"arraybuffer"},b,k,q,u;e("native-xhr2")?(b=function(b){return!this.isFulfilled()},u=function(b,a){a.xhr.abort()},q=
function(b,c,k){function g(b){c.handleResponse(k)}function d(b){b=new a("Unable to load "+k.url+" status: "+b.target.status,k);c.handleResponse(k,b)}function p(b){b.lengthComputable?(k.loaded=b.loaded,k.total=b.total,c.progress(k)):3===k.xhr.readyState&&(k.loaded="loaded"in b?b.loaded:b.position,c.progress(k))}b.addEventListener("load",g,!1);b.addEventListener("error",d,!1);b.addEventListener("progress",p,!1);return function(){b.removeEventListener("load",g,!1);b.removeEventListener("error",d,!1);
b.removeEventListener("progress",p,!1);b=null}}):(b=function(b){return b.xhr.readyState},k=function(b){return 4===b.xhr.readyState},u=function(b,a){b=a.xhr;a=typeof b.abort;"function"!==a&&"object"!==a&&"unknown"!==a||b.abort()});var x,w={data:null,query:null,sync:!1,method:"GET"};d._create=function(){throw Error("XMLHTTP not available");};if(e("native-xhr")&&!e("dojo-force-activex-xhr"))d._create=function(){return new XMLHttpRequest};else if(e("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),d._create=
function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(t){try{new ActiveXObject("Microsoft.XMLHTTP"),d._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(p){}}h.addCommonMethods(d);return d})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../has!dom?../selector/_loader"],function(a,f,m,h){function e(a){var c=b[a.options.handleAs];a.data=c?c(a):a.data||a.text;return a}h.add("activex","undefined"!==typeof ActiveXObject);
h.add("dom-parser",function(b){return"DOMParser"in b});var l;if(h("activex")){var n=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"],d;l=function(b){function a(b){try{var a=new ActiveXObject(b);a.async=!1;a.loadXML(k);c=a;d=b}catch(p){return!1}return!0}var c=b.data,k=b.text;c&&h("dom-qsa2.1")&&!c.querySelectorAll&&h("dom-parser")&&(c=(new DOMParser).parseFromString(k,"application/xml"));c&&c.documentElement||d&&a(d)||m.some(n,a);return c}}var c=function(b){return h("native-xhr2-blob")||
"blob"!==b.options.handleAs||"undefined"===typeof Blob?b.xhr.response:new Blob([b.xhr.response],{type:b.xhr.getResponseHeader("Content-Type")})},b={javascript:function(b){return f.eval(b.text||"")},json:function(b){return a.parse(b.text||null)},xml:l,blob:c,arraybuffer:c,document:c};e.register=function(a,c){b[a]=c};return e})},"dojo/dom-construct":function(){define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),function(a,f,m,h,e,l){function n(b,g){var a=g.parentNode;
a&&a.insertBefore(b,g)}function d(b){if("innerHTML"in b)try{b.innerHTML="";return}catch(r){}for(var g;g=b.lastChild;)b.removeChild(g)}var c={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},b=/<\s*([\w\:]+)/,k={},q=0,u="__"+f._scopeName+"ToDomId",x;for(x in c)c.hasOwnProperty(x)&&(f=c[x],f.pre="option"==x?'\x3cselect multiple\x3d"multiple"\x3e':
"\x3c"+f.join("\x3e\x3c")+"\x3e",f.post="\x3c/"+f.reverse().join("\x3e\x3c/")+"\x3e");var w;8>=m("ie")&&(w=function(b){b.__dojo_html5_tested="yes";var g=t("div",{innerHTML:"\x3cnav\x3ea\x3c/nav\x3e",style:{visibility:"hidden"}},b.body);1!==g.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(g){b.createElement(g)});p(g)});a.toDom=function(a,g){g=g||h.doc;var d=g[u];
d||(g[u]=d=++q+"",k[d]=g.createElement("div"));8>=m("ie")&&!g.__dojo_html5_tested&&g.body&&w(g);a+="";var p=a.match(b),e=p?p[1].toLowerCase():"",d=k[d];if(p&&c[e])for(p=c[e],d.innerHTML=p.pre+a+p.post,a=p.length;a;--a)d=d.firstChild;else d.innerHTML=a;if(1==d.childNodes.length)return d.removeChild(d.firstChild);for(a=g.createDocumentFragment();g=d.firstChild;)a.appendChild(g);return a};a.place=function(b,g,c){g=e.byId(g);"string"==typeof b&&(b=/^\s*</.test(b)?a.toDom(b,g.ownerDocument):e.byId(b));
if("number"==typeof c){var k=g.childNodes;!k.length||k.length<=c?g.appendChild(b):n(b,k[0>c?0:c])}else switch(c){case "before":n(b,g);break;case "after":c=b;(k=g.parentNode)&&(k.lastChild==g?k.appendChild(c):k.insertBefore(c,g.nextSibling));break;case "replace":g.parentNode.replaceChild(b,g);break;case "only":a.empty(g);g.appendChild(b);break;case "first":if(g.firstChild){n(b,g.firstChild);break}default:g.appendChild(b)}return b};var t=a.create=function(b,g,c,k){var d=h.doc;c&&(c=e.byId(c),d=c.ownerDocument);
"string"==typeof b&&(b=d.createElement(b));g&&l.set(b,g);c&&a.place(b,c,k);return b};a.empty=function(b){d(e.byId(b))};var p=a.destroy=function(b){if(b=e.byId(b)){var g=b;b=b.parentNode;g.firstChild&&d(g);b&&(m("ie")&&b.canHaveChildren&&"removeNode"in g?g.removeNode(!1):b.removeChild(g))}}})},"dojo/dom-attr":function(){define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),function(a,f,m,h,e,l){function n(b,a){b=b.getAttributeNode&&b.getAttributeNode(a);return!!b&&b.specified}
var d={innerHTML:1,textContent:1,className:1,htmlFor:f("ie"),value:1},c={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};a.has=function(b,a){var k=a.toLowerCase();return d[l.names[k]||a]||n(h.byId(b),c[k]||a)};a.get=function(b,a){b=h.byId(b);var k=a.toLowerCase(),e=l.names[k]||a,f=b[e];if(d[e]&&"undefined"!=typeof f)return f;if("textContent"==e)return l.get(b,e);if("href"!=e&&("boolean"==typeof f||m.isFunction(f)))return f;a=c[k]||a;return n(b,a)?b.getAttribute(a):null};a.set=
function(b,k,q){b=h.byId(b);if(2==arguments.length){for(var f in k)a.set(b,f,k[f]);return b}f=k.toLowerCase();var n=l.names[f]||k,w=d[n];if("style"==n&&"string"!=typeof q)return e.set(b,q),b;if(w||"boolean"==typeof q||m.isFunction(q))return l.set(b,k,q);b.setAttribute(c[f]||k,q);return b};a.remove=function(b,a){h.byId(b).removeAttribute(c[a.toLowerCase()]||a)};a.getNodeProp=function(b,a){b=h.byId(b);var k=a.toLowerCase(),d=l.names[k]||a;if(d in b&&"href"!=d)return b[d];a=c[k]||a;return n(b,a)?b.getAttribute(a):
null}})},"dojo/dom-prop":function(){define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),function(a,f,m,h,e,l,n,d){function c(b){var a="";b=b.childNodes;for(var k=0,d;d=b[k];k++)8!=d.nodeType&&(a=1==d.nodeType?a+c(d):a+d.nodeValue);return a}var b={},k=1,q=f._scopeName+"attrid";m.add("dom-textContent",function(b,a,c){return"textContent"in c});a.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",
frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"};a.get=function(b,k){b=e.byId(b);var d=k.toLowerCase();k=a.names[d]||k;return"textContent"!=k||m("dom-textContent")?b[k]:c(b)};a.set=function(c,f,w){c=e.byId(c);if(2==arguments.length&&"string"!=typeof f){for(var t in f)a.set(c,t,f[t]);return c}t=f.toLowerCase();t=a.names[t]||f;if("style"==t&&"string"!=typeof w)return l.set(c,w),c;if("innerHTML"==t)return m("ie")&&c.tagName.toLowerCase()in{col:1,colgroup:1,
table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(n.empty(c),c.appendChild(n.toDom(w,c.ownerDocument))):c[t]=w,c;if("textContent"==t&&!m("dom-textContent"))return n.empty(c),c.appendChild(c.ownerDocument.createTextNode(w)),c;if(h.isFunction(w)){var p=c[q];p||(p=k++,c[q]=p);b[p]||(b[p]={});var v=b[p][t];if(v)d.disconnect(v);else try{delete c[t]}catch(g){}w?b[p][t]=d.connect(c,t,w):c[t]=null;return c}c[t]=w;return c}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k){function q(b,a){b.canDelete&&p._remove(b.id,a.options.frameDoc,!0)}function u(b){A&&A.length&&(e.forEach(A,function(b){p._remove(b.id,b.frameDoc);b.frameDoc=null}),A=[]);return b.options.jsonp?!b.data:!0}function x(b){return!!this.scriptLoaded}function w(b){return(b=b.options.checkString)&&eval("typeof("+b+') !\x3d\x3d "undefined"')}function t(b,a){if(this.canDelete){var g=this.response.options;A.push({id:this.id,frameDoc:g.ioArgs?g.ioArgs.frameDoc:g.frameDoc});g.ioArgs&&
(g.ioArgs.frameDoc=null);g.frameDoc=null}a?this.reject(a):this.resolve(b)}function p(b,a,c){var k=m.parseArgs(b,m.deepCopy({},a));b=k.url;a=k.options;var d=m.deferred(k,q,u,a.jsonp?null:a.checkString?w:x,t);l.mixin(d,{id:v+g++,canDelete:!1});a.jsonp&&((new RegExp("[?\x26]"+a.jsonp+"\x3d")).test(b)||(b+=(~b.indexOf("?")?"\x26":"?")+a.jsonp+"\x3d"+(a.frameDoc?"parent.":"")+v+"_callbacks."+d.id),d.canDelete=!0,y[d.id]=function(b){k.data=b;d.handleResponse(k)});m.notify&&m.notify.emit("send",k,d.promise.cancel);
if(!a.canAttach||a.canAttach(d)){var e=p._attach(d.id,b,a.frameDoc,function(b){if(!(b instanceof Error)){var g=Error("Error loading "+(b.target?b.target.src:"script"));g.source=b;b=g}d.reject(b);p._remove(d.id,a.frameDoc,!0)});if(!a.jsonp&&!a.checkString)var h=n(e,r,function(b){if("load"===b.type||z.test(e.readyState))h.remove(),d.scriptLoaded=b})}f(d);return c?d:d.promise}b.add("script-readystatechange",function(b,a){return"undefined"!==typeof a.createElement("script").onreadystatechange&&("undefined"===
typeof b.opera||"[object Opera]"!==b.opera.toString())});var v=a.id.replace(/[\/\.\-]/g,"_"),g=0,r=b("script-readystatechange")?"readystatechange":"load",z=/complete|loaded/,y=h.global[v+"_callbacks"]={},A=[];p.get=p;p._attach=function(b,a,g,c){g=g||k.doc;var d=g.createElement("script");if(c)n.once(d,"error",c);d.type="text/javascript";try{d.src=a}catch(L){c&&c(d)}d.id=b;d.async=!0;d.charset="utf-8";return g.getElementsByTagName("head")[0].appendChild(d)};p._remove=function(b,a,g){c.destroy(d.byId(b,
a));y[b]&&(g?y[b]=function(){delete y[b]}:delete y[b])};p._callbacksProperty=v+"_callbacks";return p})},"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme");define("../ready ./kernel ./connect ./unload ./window ./event ./html ./NodeList ../query ./xhr ./fx".split(" "),function(a){return a})},"dojo/ready":function(){define(["./_base/kernel","./has","require","./has!host-browser?./domReady","./_base/lang"],function(a,f,m,h,e){var l=0,n=[],d=0;f=function(){l=1;
a._postLoad=a.config.afterOnLoad=!0;c()};var c=function(){if(!d){for(d=1;l&&(!h||0==h._Q.length)&&(m.idle?m.idle():1)&&n.length;){var b=n.shift();try{b()}catch(u){if(u.info=u.message,m.signal)m.signal("error",u);else throw u;}}d=0}};m.on&&m.on("idle",c);h&&(h._onQEmpty=c);var b=a.ready=a.addOnLoad=function(b,d,k){var l=e._toArray(arguments);"number"!=typeof b?(k=d,d=b,b=1E3):l.shift();k=k?e.hitch.apply(a,l):function(){d()};k.priority=b;for(l=0;l<n.length&&b>=n[l].priority;l++);n.splice(l,0,k);c()},
k=a.config.addOnLoad;if(k)b[e.isArray(k)?"apply":"call"](a,k);h?h(f):f();return b})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(a,f,m){var h=window,e={addOnWindowUnload:function(e,n){a.windowUnloaded||m(h,"unload",a.windowUnloaded=function(){});m(h,"unload",f.hitch(e,n))},addOnUnload:function(a,e){m(h,"beforeunload",f.hitch(a,e))}};a.addOnWindowUnload=e.addOnWindowUnload;a.addOnUnload=e.addOnUnload;return e})},"dojo/_base/html":function(){define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),
function(a,f,m,h,e,l,n,d){a.byId=f.byId;a.isDescendant=f.isDescendant;a.setSelectable=f.setSelectable;a.getAttr=h.get;a.setAttr=h.set;a.hasAttr=h.has;a.removeAttr=h.remove;a.getNodeProp=h.getNodeProp;a.attr=function(a,b,d){return 2==arguments.length?h["string"==typeof b?"get":"set"](a,b):h.set(a,b,d)};a.hasClass=l.contains;a.addClass=l.add;a.removeClass=l.remove;a.toggleClass=l.toggle;a.replaceClass=l.replace;a._toDom=a.toDom=n.toDom;a.place=n.place;a.create=n.create;a.empty=function(a){n.empty(a)};
a._destroyElement=a.destroy=function(a){n.destroy(a)};a._getPadExtents=a.getPadExtents=d.getPadExtents;a._getBorderExtents=a.getBorderExtents=d.getBorderExtents;a._getPadBorderExtents=a.getPadBorderExtents=d.getPadBorderExtents;a._getMarginExtents=a.getMarginExtents=d.getMarginExtents;a._getMarginSize=a.getMarginSize=d.getMarginSize;a._getMarginBox=a.getMarginBox=d.getMarginBox;a.setMarginBox=d.setMarginBox;a._getContentBox=a.getContentBox=d.getContentBox;a.setContentSize=d.setContentSize;a._isBodyLtr=
a.isBodyLtr=d.isBodyLtr;a._docScroll=a.docScroll=d.docScroll;a._getIeDocumentElementOffset=a.getIeDocumentElementOffset=d.getIeDocumentElementOffset;a._fixIeBiDiScrollLeft=a.fixIeBiDiScrollLeft=d.fixIeBiDiScrollLeft;a.position=d.position;a.marginBox=function(a,b){return b?d.setMarginBox(a,b):d.getMarginBox(a)};a.contentBox=function(a,b){return b?d.setContentSize(a,b):d.getContentBox(a)};a.coords=function(c,b){a.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");c=f.byId(c);var k=
m.getComputedStyle(c),k=d.getMarginBox(c,k);c=d.position(c,b);k.x=c.x;k.y=c.y;return k};a.getProp=e.get;a.setProp=e.set;a.prop=function(a,b,d){return 2==arguments.length?e["string"==typeof b?"get":"set"](a,b):e.set(a,b,d)};a.getStyle=m.get;a.setStyle=m.set;a.getComputedStyle=m.getComputedStyle;a.__toPixelValue=a.toPixelValue=m.toPixelValue;a.style=function(a,b,d){switch(arguments.length){case 1:return m.get(a);case 2:return m["string"==typeof b?"get":"set"](a,b)}return m.set(a,b,d)};return a})},"dojo/dom-class":function(){define(["./_base/lang",
"./_base/array","./dom"],function(a,f,m){function h(a){if("string"==typeof a||a instanceof String){if(a&&!l.test(a))return n[0]=a,n;a=a.split(l);a.length&&!a[0]&&a.shift();a.length&&!a[a.length-1]&&a.pop();return a}return a?f.filter(a,function(b){return b}):[]}var e,l=/\s+/,n=[""],d={};return e={contains:function(a,b){return 0<=(" "+m.byId(a).className+" ").indexOf(" "+b+" ")},add:function(a,b){a=m.byId(a);b=h(b);var c=a.className,d,c=c?" "+c+" ":" ";d=c.length;for(var e=0,l=b.length,f;e<l;++e)(f=
b[e])&&0>c.indexOf(" "+f+" ")&&(c+=f+" ");d<c.length&&(a.className=c.substr(1,c.length-2))},remove:function(c,b){c=m.byId(c);var d;if(void 0!==b){b=h(b);d=" "+c.className+" ";for(var e=0,l=b.length;e<l;++e)d=d.replace(" "+b[e]+" "," ");d=a.trim(d)}else d="";c.className!=d&&(c.className=d)},replace:function(a,b,k){a=m.byId(a);d.className=a.className;e.remove(d,k);e.add(d,b);a.className!==d.className&&(a.className=d.className)},toggle:function(a,b,d){a=m.byId(a);if(void 0===d){b=h(b);for(var c=0,k=
b.length,l;c<k;++c)l=b[c],e[e.contains(a,l)?"remove":"add"](a,l)}else e[d?"add":"remove"](a,b);return d}}})},"dojo/_base/NodeList":function(){define(["./kernel","../query","./array","./html","../NodeList-dom"],function(a,f,m){f=f.NodeList;var h=f.prototype;h.connect=f._adaptAsForEach(function(){return a.connect.apply(this,arguments)});h.coords=f._adaptAsMap(a.coords);f.events="blur focus change click error keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup submit".split(" ");
m.forEach(f.events,function(a){var e="on"+a;h[e]=function(a,d){return this.connect(e,a,d)}});return a.NodeList=f})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),function(a,f,m,h,e,l,n,d){function c(b,a){var g=function(g,c){if("string"==typeof c&&(c=m.byId(c),!c))return new a([]);g="string"==typeof g?b(g,c):g?g.end&&g.on?g:[g]:[];return g.end&&g.on?g:new a(g)};g.matches=b.match||function(b,a,c){return 0<
g.filter([b],a,c).length};g.filter=b.filter||function(b,a,c){return g(a,c).filter(function(a){return-1<e.indexOf(b,a)})};if("function"!=typeof b){var c=b.search;b=function(b,a){return c(a||document,b)}}return g}f.add("array-extensible",function(){return 1==l.delegate([],{length:1}).length&&!f("bug-for-in-skips-shadowed")});var b=Array.prototype,k=b.slice,q=b.concat,u=e.forEach,x=function(b,c,d){c=[0].concat(k.call(c,0));d=d||a.global;return function(a){c[0]=a;return b.apply(d,c)}},w=function(b){var a=
this instanceof t&&f("array-extensible");"number"==typeof b&&(b=Array(b));var g=b&&"length"in b?b:arguments;if(a||!g.sort){for(var c=a?this:[],d=c.length=g.length,k=0;k<d;k++)c[k]=g[k];if(a)return c;g=c}l._mixin(g,p);g._NodeListCtor=function(b){return t(b)};return g},t=w,p=t.prototype=f("array-extensible")?[]:{};t._wrap=p._wrap=function(b,a,c){b=new (c||this._NodeListCtor||t)(b);return a?b._stash(a):b};t._adaptAsMap=function(b,a){return function(){return this.map(x(b,arguments,a))}};t._adaptAsForEach=
function(b,a){return function(){this.forEach(x(b,arguments,a));return this}};t._adaptAsFilter=function(b,a){return function(){return this.filter(x(b,arguments,a))}};t._adaptWithCondition=function(b,c,d){return function(){var g=arguments,k=x(b,g,d);if(c.call(d||a.global,g))return this.map(k);this.forEach(k);return this}};u(["slice","splice"],function(a){var g=b[a];p[a]=function(){return this._wrap(g.apply(this,arguments),"slice"==a?this:null)}});u(["indexOf","lastIndexOf","every","some"],function(b){var g=
e[b];p[b]=function(){return g.apply(a,[this].concat(k.call(arguments,0)))}});l.extend(w,{constructor:t,_NodeListCtor:t,toString:function(){return this.join(",")},_stash:function(b){this._parent=b;return this},on:function(b,a){var g=this.map(function(g){return h(g,b,a)});g.remove=function(){for(var b=0;b<g.length;b++)g[b].remove()};return g},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(b){var a=k.call(this,0),g=e.map(arguments,function(b){return k.call(b,
0)});return this._wrap(q.apply(a,g),this)},map:function(b,a){return this._wrap(e.map(this,b,a),this)},forEach:function(b,a){u(this,b,a);return this},filter:function(b){var a=arguments,g=this,c=0;if("string"==typeof b){g=v._filterResult(this,a[0]);if(1==a.length)return g._stash(this);c=1}return this._wrap(e.filter(g,a[c],a[c+1]),this)},instantiate:function(b,a){var g=l.isFunction(b)?b:l.getObject(b);a=a||{};return this.forEach(function(b){new g(a,b)})},at:function(){var b=new this._NodeListCtor(0);
u(arguments,function(a){0>a&&(a=this.length+a);this[a]&&b.push(this[a])},this);return b._stash(this)}});var v=c(d,w);a.query=c(d,function(b){return w(b)});v.load=function(b,a,d){n.load(b,a,function(b){d(c(b,w))})};a._filterQueryResult=v._filterResult=function(b,a,c){return new w(v.filter(b,a,c))};a.NodeList=v.NodeList=w;return v})},"dojo/selector/_loader":function(){define(["../has","require"],function(a,f){if("undefined"!==typeof document){var m=document.createElement("div");a.add("dom-qsa2.1",!!m.querySelectorAll);
a.add("dom-qsa3",function(){try{return m.innerHTML="\x3cp class\x3d'TEST'\x3e\x3c/p\x3e",1==m.querySelectorAll(".TEST:empty").length}catch(e){}})}var h;return{load:function(e,l,n,d){if(d&&d.isBuild)n();else{d=f;e="default"==e?a("config-selectorEngine")||"css3":e;e="css2"==e||"lite"==e?"./lite":"css2.1"==e?a("dom-qsa2.1")?"./lite":"./acme":"css3"==e?a("dom-qsa3")?"./lite":"./acme":"acme"==e?"./acme":(d=l)&&e;if("?"==e.charAt(e.length-1)){e=e.substring(0,e.length-1);var c=!0}if(c&&(a("dom-compliant-qsa")||
h))return n(h);d([e],function(b){"./lite"!=e&&(h=b);n(b)})}}}})},"dojo/selector/acme":function(){define(["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(a,f,m,h,e){var l=h.trim,n=m.forEach,d="BackCompat"==e.doc.compatMode,c=!1,b=function(){return!0},k=function(b){b=0<="\x3e~+".indexOf(b.slice(-1))?b+" * ":b+" ";for(var a=function(a,g){return l(b.slice(a,g))},g=[],d=-1,k=-1,p=-1,r=-1,e=-1,h=-1,f=-1,q,n="",v="",z,t=0,x=b.length,y=null,u=null,w=function(){0<=h&&(y.id=
a(h,t).replace(/\\/g,""),h=-1);if(0<=f){var b=f==t?null:a(f,t);y[0>"\x3e~+".indexOf(b)?"tag":"oper"]=b;f=-1}0<=e&&(y.classes.push(a(e+1,t).replace(/\\/g,"")),e=-1)};n=v,v=b.charAt(t),t<x;t++)"\\"!=n&&(y||(z=t,y={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return c?this.otag:this.tag}},f=t),q?v==q&&(q=null):"'"==v||'"'==v?q=v:0<=d?"]"==v?(u.attr?u.matchFor=a(p||d+1,t):u.attr=a(d+1,t),!(d=u.matchFor)||'"'!=d.charAt(0)&&"'"!=d.charAt(0)||(u.matchFor=d.slice(1,
-1)),u.matchFor&&(u.matchFor=u.matchFor.replace(/\\/g,"")),y.attrs.push(u),u=null,d=p=-1):"\x3d"==v&&(p=0<="|~^$*".indexOf(n)?n:"",u.type=p+v,u.attr=a(d+1,t-p.length),p=t+1):0<=k?")"==v&&(0<=r&&(u.value=a(k+1,t)),r=k=-1):"#"==v?(w(),h=t+1):"."==v?(w(),e=t):":"==v?(w(),r=t):"["==v?(w(),d=t,u={}):"("==v?(0<=r&&(u={name:a(r+1,t),value:null},y.pseudos.push(u)),k=t):" "==v&&n!=v&&(w(),0<=r&&y.pseudos.push({name:a(r+1,t)}),y.loops=y.pseudos.length||y.attrs.length||y.classes.length,y.oquery=y.query=a(z,
t),y.otag=y.tag=y.oper?null:y.tag||"*",y.tag&&(y.tag=y.tag.toUpperCase()),g.length&&g[g.length-1].oper&&(y.infixOper=g.pop(),y.query=y.infixOper.query+" "+y.query),g.push(y),y=null));return g},q=function(b,a){return b?a?function(){return b.apply(window,arguments)&&a.apply(window,arguments)}:b:a},u=function(b,a){a=a||[];b&&a.push(b);return a},x=function(b){return 1==b.nodeType},w=function(b,a){return b?"class"==a?b.className||"":"for"==a?b.htmlFor||"":"style"==a?b.style.cssText||"":(c?b.getAttribute(a):
b.getAttribute(a,2))||"":""},t={"*\x3d":function(b,a){return function(g){return 0<=w(g,b).indexOf(a)}},"^\x3d":function(b,a){return function(g){return 0==w(g,b).indexOf(a)}},"$\x3d":function(b,a){return function(g){g=" "+w(g,b);var c=g.lastIndexOf(a);return-1<c&&c==g.length-a.length}},"~\x3d":function(b,a){var g=" "+a+" ";return function(a){return 0<=(" "+w(a,b)+" ").indexOf(g)}},"|\x3d":function(b,a){var g=a+"-";return function(c){c=w(c,b);return c==a||0==c.indexOf(g)}},"\x3d":function(b,a){return function(g){return w(g,
b)==a}}};h=e.doc.documentElement;var p=!(h.nextElementSibling||"nextElementSibling"in h),v=p?"nextSibling":"nextElementSibling",g=p?"previousSibling":"previousElementSibling",r=p?x:b,z=function(b){for(;b=b[g];)if(r(b))return!1;return!0},y=function(b){for(;b=b[v];)if(r(b))return!1;return!0},A=function(b){var a=b.parentNode,a=7!=a.nodeType?a:a.nextSibling,g=0,c=a.children||a.childNodes,d=b._i||b.getAttribute("_i")||-1,k=a._l||("undefined"!==typeof a.getAttribute?a.getAttribute("_l"):-1);if(!c)return-1;
c=c.length;if(k==c&&0<=d&&0<=k)return d;f("ie")&&"undefined"!==typeof a.setAttribute?a.setAttribute("_l",c):a._l=c;d=-1;for(a=a.firstElementChild||a.firstChild;a;a=a[v])r(a)&&(f("ie")?a.setAttribute("_i",++g):a._i=++g,b===a&&(d=g));return d},F=function(b){return!(A(b)%2)},B=function(b){return A(b)%2},E={checked:function(b,a){return function(b){return!("checked"in b?!b.checked:!b.selected)}},disabled:function(b,a){return function(b){return b.disabled}},enabled:function(b,a){return function(b){return!b.disabled}},
"first-child":function(){return z},"last-child":function(){return y},"only-child":function(b,a){return function(b){return z(b)&&y(b)}},empty:function(b,a){return function(b){var a=b.childNodes;for(b=b.childNodes.length-1;0<=b;b--){var g=a[b].nodeType;if(1===g||3==g)return!1}return!0}},contains:function(b,a){b=a.charAt(0);if('"'==b||"'"==b)a=a.slice(1,-1);return function(b){return 0<=b.innerHTML.indexOf(a)}},not:function(b,a){b=k(a)[0];a={el:1};"*"!=b.tag&&(a.tag=1);b.classes.length||(a.classes=1);
var g=G(b,a);return function(b){return!g(b)}},"nth-child":function(b,a){b=parseInt;if("odd"==a)return B;if("even"==a)return F;if(-1!=a.indexOf("n")){a=a.split("n",2);var g=a[0]?"-"==a[0]?-1:b(a[0]):1,c=a[1]?b(a[1]):0,d=0,k=-1;0<g?0>c?c=c%g&&g+c%g:0<c&&(c>=g&&(d=c-c%g),c%=g):0>g&&(g*=-1,0<c&&(k=c,c%=g));if(0<g)return function(b){b=A(b);return b>=d&&(0>k||b<=k)&&b%g==c};a=c}var p=b(a);return function(b){return A(b)==p}}},C=9>f("ie")||9==f("ie")&&f("quirks")?function(b){var a=b.toLowerCase();"class"==
a&&(b="className");return function(g){return c?g.getAttribute(b):g[b]||g[a]}}:function(b){return function(a){return a&&a.getAttribute&&a.hasAttribute(b)}},G=function(a,g){if(!a)return b;g=g||{};var d=null;"el"in g||(d=q(d,x));"tag"in g||"*"!=a.tag&&(d=q(d,function(b){return b&&(c?b.tagName:b.tagName.toUpperCase())==a.getTag()}));"classes"in g||n(a.classes,function(b,a,g){var c=new RegExp("(?:^|\\s)"+b+"(?:\\s|$)");d=q(d,function(b){return c.test(b.className)});d.count=a});"pseudos"in g||n(a.pseudos,
function(b){var a=b.name;E[a]&&(d=q(d,E[a](a,b.value)))});"attrs"in g||n(a.attrs,function(b){var a,g=b.attr;b.type&&t[b.type]?a=t[b.type](g,b.matchFor):g.length&&(a=C(g));a&&(d=q(d,a))});"id"in g||a.id&&(d=q(d,function(b){return!!b&&b.id==a.id}));d||"default"in g||(d=b);return d},L=function(b){return function(a,g,c){for(;a=a[v];)if(!p||x(a)){c&&!ia(a,c)||!b(a)||g.push(a);break}return g}},U=function(b){return function(a,g,c){for(a=a[v];a;){if(r(a)){if(c&&!ia(a,c))break;b(a)&&g.push(a)}a=a[v]}return g}},
P=function(a,g){var c=function(b){var a=[];try{a=Array.prototype.slice.call(b)}catch(Na){for(var g=0,c=b.length;g<c;g++)a.push(b[g])}return a};a=a||b;return function(b,d,k){var p=0,e=[],e=c(b.children||b.childNodes);for(g&&m.forEach(e,function(b){1===b.nodeType&&(e=e.concat(c(b.getElementsByTagName("*"))))});b=e[p++];)r(b)&&(!k||ia(b,k))&&a(b,p)&&d.push(b);return d}},H=function(b,a){for(b=b.parentNode;b&&b!=a;)b=b.parentNode;return!!b},K={},J=function(g){var c=K[g.query];if(c)return c;var k=g.infixOper,
k=k?k.oper:"",p=G(g,{el:1}),r="*"==g.tag,l=e.doc.getElementsByClassName;if(k)l={el:1},r&&(l.tag=1),p=G(g,l),"+"==k?c=L(p):"~"==k?c=U(p):"\x3e"==k&&(c=P(p));else if(g.id)p=!g.loops&&r?b:G(g,{el:1,id:1}),c=function(b,c){var d=a.byId(g.id,b.ownerDocument||b);b.ownerDocument&&!H(b,b.ownerDocument)&&m.some(11===b.nodeType?b.childNodes:[b],function(b){b=P(function(b){return b.id===g.id},!0)(b,[]);if(b.length)return d=b[0],!1});if(d&&p(d)&&(9==b.nodeType||H(d,b)))return u(d,c)};else if(l&&/\{\s*\[native code\]\s*\}/.test(String(l))&&
g.classes.length&&!d)var p=G(g,{el:1,classes:1,id:1}),h=g.classes.join(" "),c=function(b,a,g){a=u(0,a);for(var c,d=0,k=b.getElementsByClassName(h);c=k[d++];)p(c,b)&&ia(c,g)&&a.push(c);return a};else r||g.loops?(p=G(g,{el:1,tag:1,id:1}),c=function(b,a,c){a=u(0,a);for(var d,k=0,r=(d=g.getTag())?b.getElementsByTagName(d):[];d=r[k++];)p(d,b)&&ia(d,c)&&a.push(d);return a}):c=function(b,a,c){a=u(0,a);for(var d=0,k=g.getTag(),k=k?b.getElementsByTagName(k):[];b=k[d++];)ia(b,c)&&a.push(b);return a};return K[g.query]=
c},R={},M={},ea=function(b){var a=k(l(b));if(1==a.length){var g=J(a[0]);return function(b){if(b=g(b,[]))b.nozip=!0;return b}}return function(b){b=u(b);for(var g,c,d=a.length,k,p,r=0;r<d;r++){p=[];g=a[r];c=b.length-1;0<c&&(k={},p.nozip=!0);c=J(g);for(var e=0;g=b[e];e++)c(g,p,k);if(!p.length)break;b=p}return p}},I=f("ie")?"commentStrip":"nozip",N=!!e.doc.querySelectorAll,Y=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,aa=function(b,a,g,c){return g?(a?a+" ":"")+g+(c?" "+c:""):b},S=/([^[]*)([^\]]*])?/g,Z=
function(b,a,g){return a.replace(Y,aa)+(g||"")},da=function(b,a){b=b.replace(S,Z);if(N){var g=M[b];if(g&&!a)return g}if(g=R[b])return g;var g=b.charAt(0),c=-1==b.indexOf(" ");0<=b.indexOf("#")&&c&&(a=!0);if(!N||a||-1!="\x3e~+".indexOf(g)||f("ie")&&-1!=b.indexOf(":")||d&&0<=b.indexOf(".")||-1!=b.indexOf(":contains")||-1!=b.indexOf(":checked")||-1!=b.indexOf("|\x3d")){var k=b.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return R[b]=2>k.length?ea(b):function(b){for(var a=0,g=[],c;c=k[a++];)g=
g.concat(ea(c)(b));return g}}var p=0<="\x3e~+".indexOf(b.charAt(b.length-1))?b+" *":b;return M[b]=function(a){if(9==a.nodeType||c)try{var g=a.querySelectorAll(p);g[I]=!0;return g}catch(ta){}return da(b,!0)(a)}},V=0,la=f("ie")?function(b){return c?b.getAttribute("_uid")||b.setAttribute("_uid",++V)||V:b.uniqueID}:function(b){return b._uid||(b._uid=++V)},ia=function(b,a){if(!a)return 1;b=la(b);return a[b]?0:a[b]=1},ha=function(b){if(b&&b.nozip)return b;if(!b||!b.length)return[];if(2>b.length)return[b[0]];
var a=[];V++;var g,d;if(f("ie")&&c){var k=V+"";for(g=0;g<b.length;g++)(d=b[g])&&d.getAttribute("_zipIdx")!=k&&(a.push(d),d.setAttribute("_zipIdx",k))}else if(f("ie")&&b.commentStrip)try{for(g=0;g<b.length;g++)(d=b[g])&&x(d)&&a.push(d)}catch(hb){}else for(g=0;g<b.length;g++)(d=b[g])&&d._zipIdx!=V&&(a.push(d),d._zipIdx=V);return a},pa=function(b,a){a=a||e.doc;c="div"===(a.ownerDocument||a).createElement("div").tagName;return(b=da(b)(a))&&b.nozip?b:ha(b)};pa.filter=function(b,g,c){for(var d=[],p=k(g),
p=1!=p.length||/[^\w#\.]/.test(g)?function(b){return-1!=m.indexOf(pa(g,a.byId(c)),b)}:G(p[0]),r=0,e;e=b[r];r++)p(e)&&d.push(e);return d};return pa})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),function(a,f,m,h,e,l,n,d,c){function b(b){return function(a,g,c){return 2==arguments.length?b["string"==typeof g?"get":"set"](a,g):b.set(a,g,c)}}var k=function(b){return 1==b.length&&"string"==
typeof b[0]},q=function(b){var a=b.parentNode;a&&a.removeChild(b)},u=f.NodeList,x=u._adaptWithCondition,w=u._adaptAsForEach,t=u._adaptAsMap;h.extend(u,{_normalize:function(b,c){var g=!0===b.parse;if("string"==typeof b.template){var d=b.templateFunc||a.string&&a.string.substitute;b=d?d(b.template,b):b}d=typeof b;"string"==d||"number"==d?(b=l.toDom(b,c&&c.ownerDocument),b=11==b.nodeType?h._toArray(b.childNodes):[b]):h.isArrayLike(b)?h.isArray(b)||(b=h._toArray(b)):b=[b];g&&(b._runParse=!0);return b},
_cloneNode:function(b){return b.cloneNode(!0)},_place:function(b,c,g,d){if(1==c.nodeType||"only"!=g)for(var k,p=b.length,r=p-1;0<=r;r--){var e=d?this._cloneNode(b[r]):b[r];if(b._runParse&&a.parser&&a.parser.parse)for(k||(k=c.ownerDocument.createElement("div")),k.appendChild(e),a.parser.parse(k),e=k.firstChild;k.firstChild;)k.removeChild(k.firstChild);r==p-1?l.place(e,c,g):c.parentNode.insertBefore(e,c);c=e}},position:t(n.position),attr:x(b(d),k),style:x(b(c),k),addClass:w(e.add),removeClass:w(e.remove),
toggleClass:w(e.toggle),replaceClass:w(e.replace),empty:w(l.empty),removeAttr:w(d.remove),marginBox:t(n.getMarginBox),place:function(b,a){var g=f(b)[0];return this.forEach(function(b){l.place(b,g,a)})},orphan:function(b){return(b?f._filterResult(this,b):this).forEach(q)},adopt:function(b,a){return f(b).place(this[0],a)._stash(this)},query:function(b){if(!b)return this;var a=new u;this.map(function(g){f(b,g).forEach(function(b){void 0!==b&&a.push(b)})});return a._stash(this)},filter:function(b){var a=
arguments,g=this,c=0;if("string"==typeof b){g=f._filterResult(this,a[0]);if(1==a.length)return g._stash(this);c=1}return this._wrap(m.filter(g,a[c],a[c+1]),this)},addContent:function(b,a){b=this._normalize(b,this[0]);for(var g=0,c;c=this[g];g++)b.length?this._place(b,c,a,0<g):l.empty(c);return this}});return u})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),function(a,f,m,h,e,l,n,d,c){var b=m.mixin,k={},q=k._Line=
function(b,a){this.start=b;this.end=a};q.prototype.getValue=function(b){return(this.end-this.start)*b+this.start};var u=k.Animation=function(a){b(this,a);m.isArray(this.curve)&&(this.curve=new q(this.curve[0],this.curve[1]))};u.prototype=new h;m.extend(u,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var b=this._percent,a=this.easing;return a?a(b):b},_fire:function(b,a){a=a||[];if(this[b])if(f.debugAtAllCosts)this[b].apply(this,a);else try{this[b].apply(this,a)}catch(z){console.error("exception in animation handler for:",
b),console.error(z)}return this},play:function(b,a){this._delayTimer&&this._clearTimer();if(a)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);b=b||this.delay;a=m.hitch(this,"_play",a);if(0<b)return this._delayTimer=setTimeout(a,b),this;a();return this},_play:function(b){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);
this._active=!0;this._paused=!1;b=this.curve.getValue(this._getStep());this._percent||(this._startRepeatCount||(this._startRepeatCount=this.repeat),this._fire("onBegin",[b]));this._fire("onPlay",[b]);this._cycle();return this},pause:function(){this._delayTimer&&this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(b,a){this._stopTimer();this._active=this._paused=!0;this._percent=
b;a&&this.play();return this},stop:function(b){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();b&&(this._percent=1);this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},destroy:function(){this.stop()},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var b=(new Date).valueOf(),b=0===this.duration?1:(b-this._startTime)/this.duration;1<=b&&(b=1);this._percent=
b;this.easing&&(b=this.easing(b));this._fire("onAnimate",[this.curve.getValue(b)]);1>this._percent?this._startTimer():(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var x=0,w=null,t={run:function(){}};
m.extend(u,{_startTimer:function(){this._timer||(this._timer=l.after(t,"run",m.hitch(this,"_cycle"),!0),x++);w||(w=setInterval(m.hitch(t,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),this._timer=null,x--);0>=x&&(clearInterval(w),w=null,x=0)}});var p=n("ie")?function(b){var a=b.style;a.width.length||"auto"!=c.get(b,"width")||(a.width="auto")}:function(){};k._fade=function(a){a.node=d.byId(a.node);var g=b({properties:{}},a);a=g.properties.opacity={};a.start="start"in g?
g.start:function(){return+c.get(g.node,"opacity")||0};a.end=g.end;a=k.animateProperty(g);l.after(a,"beforeBegin",m.partial(p,g.node),!0);return a};k.fadeIn=function(a){return k._fade(b({end:1},a))};k.fadeOut=function(a){return k._fade(b({end:0},a))};k._defaultEasing=function(b){return.5+Math.sin((b+1.5)*Math.PI)/2};var v=function(b){this._properties=b;for(var a in b){var g=b[a];g.start instanceof e&&(g.tempColor=new e)}};v.prototype.getValue=function(b){var a={},g;for(g in this._properties){var c=
this._properties[g],d=c.start;d instanceof e?a[g]=e.blendColors(d,c.end,b,c.tempColor).toCss():m.isArray(d)||(a[g]=(c.end-d)*b+d+("opacity"!=g?c.units||"px":0))}return a};k.animateProperty=function(g){var k=g.node=d.byId(g.node);g.easing||(g.easing=a._defaultEasing);g=new u(g);l.after(g,"beforeBegin",m.hitch(g,function(){var a={},g;for(g in this.properties){var d=function(b,a){var g={height:b.offsetHeight,width:b.offsetWidth}[a];if(void 0!==g)return g;g=c.get(b,a);return"opacity"==a?+g:r?g:parseFloat(g)};
if("width"==g||"height"==g)this.node.display="block";var p=this.properties[g];m.isFunction(p)&&(p=p(k));p=a[g]=b({},m.isObject(p)?p:{end:p});m.isFunction(p.start)&&(p.start=p.start(k));m.isFunction(p.end)&&(p.end=p.end(k));var r=0<=g.toLowerCase().indexOf("color");"end"in p?"start"in p||(p.start=d(k,g)):p.end=d(k,g);r?(p.start=new e(p.start),p.end=new e(p.end)):p.start="opacity"==g?+p.start:parseFloat(p.start)}this.curve=new v(a)}),!0);l.after(g,"onAnimate",m.hitch(c,"set",g.node),!0);return g};k.anim=
function(b,a,c,d,p,e){return k.animateProperty({node:b,duration:c||u.prototype.duration,properties:a,easing:d,onEnd:p}).play(e||0)};b(a,k);a._Animation=u;return k})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(a,f,m,h){var e=a.Color=function(a){a&&this.setColor(a)};e.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,
128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:h.transparentColor||[0,0,0,0]};f.extend(e,{r:255,g:255,b:255,a:1,_set:function(a,e,d,c){this.r=a;this.g=e;this.b=d;this.a=c},setColor:function(a){f.isString(a)?e.fromString(a,this):f.isArray(a)?e.fromArray(a,this):(this._set(a.r,a.g,a.b,a.a),a instanceof e||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,
this.g,this.b,this.a]},toHex:function(){return"#"+m.map(["r","g","b"],function(a){a=this[a].toString(16);return 2>a.length?"0"+a:a},this).join("")},toCss:function(a){var e=this.r+", "+this.g+", "+this.b;return(a?"rgba("+e+", "+this.a:"rgb("+e)+")"},toString:function(){return this.toCss(!0)}});e.blendColors=a.blendColors=function(a,h,d,c){var b=c||new e;m.forEach(["r","g","b","a"],function(c){b[c]=a[c]+(h[c]-a[c])*d;"a"!=c&&(b[c]=Math.round(b[c]))});return b.sanitize()};e.fromRgb=a.colorFromRgb=function(a,
h){return(a=a.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/))&&e.fromArray(a[1].split(/\s*,\s*/),h)};e.fromHex=a.colorFromHex=function(a,h){var d=h||new e,c=4==a.length?4:8,b=(1<<c)-1;a=Number("0x"+a.substr(1));if(isNaN(a))return null;m.forEach(["b","g","r"],function(k){var e=a&b;a>>=c;d[k]=4==c?17*e:e});d.a=1;return d};e.fromArray=a.colorFromArray=function(a,h){h=h||new e;h._set(Number(a[0]),Number(a[1]),Number(a[2]),Number(a[3]));isNaN(h.a)&&(h.a=1);return h.sanitize()};e.fromString=a.colorFromString=
function(a,h){var d=e.named[a];return d&&e.fromArray(d,h)||e.fromRgb(a,h)||e.fromHex(a,h)};return e})},"esri/Map":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/Accessor ./core/CollectionFlattener ./core/Evented ./support/LayersMixin ./Ground ./support/basemapUtils ./support/groundUtils ./core/accessorSupport/decorators".split(" "),function(a,f,m,h,e,l,n,d,c,b,k,q){a=function(a){function d(d){d=a.call(this)||this;d.basemap=null;d.ground=
new c;d._basemapCache=b.createCache();return d}m(d,a);Object.defineProperty(d.prototype,"allLayers",{get:function(){return new l({root:this,rootCollectionNames:["basemap.baseLayers","ground.layers","layers","basemap.referenceLayers"],getChildrenFunction:function(b){return b.layers}})},enumerable:!0,configurable:!0});d.prototype.castBasemap=function(a){return b.ensureType(a,this._basemapCache)};return d}(q.declared(e,n,d));h([q.property({readOnly:!0})],a.prototype,"allLayers",null);h([q.property()],
a.prototype,"basemap",void 0);h([q.cast("basemap")],a.prototype,"castBasemap",null);h([q.property(),q.cast(k.ensureType)],a.prototype,"ground",void 0);return a=h([q.subclass("esri.Map")],a)})},"esri/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(a,f){return function(a,h){a.__bases__=h.__bases__}})},"esri/core/tsSupport/decorateHelper":function(){define([],function(){return function(a,f,m,h){var e=arguments.length,l=3>e?f:null===h?h=Object.getOwnPropertyDescriptor(f,
m):h,n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(a,f,m,h);else for(var d=a.length-1;0<=d;d--)if(n=a[d])l=(3>e?n(l):3<e?n(f,m,l):n(f,m))||l;return 3<e&&l&&Object.defineProperty(f,m,l),l}})},"esri/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),function(a,f,m,h,e,l){f=f.default;a.before(function(d,c){a.hasMixin(d,n)&&h.processPrototype(c)});
a.after(function(d){a.hasMixin(d,n)&&(h.processClass(d),Object.defineProperties(d.prototype,{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var n=a(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===n)throw Error("[accessor] cannot instanciate Accessor. This can be fixed by creating a subclass of Accessor");
Object.defineProperty(this,"__accessor__",{value:new f(this)});if(0<arguments.length&&this.normalizeCtorArgs){for(var a=[],c=0;c<arguments.length;c++)a.push(arguments[c]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,a)}},__accessor__:null,postscript:function(a){var c=this.__accessor__;a=c.ctorArgs||a;var b;null!=this.getDefaults&&(b=this.getDefaults(a||{}),this.set(b));c.initialize();a&&(this.set(a),c.ctorArgs=null);this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");
}catch(d){console.warn(d.stack)}else l.removeTarget(this),this.__accessor__.destroy()},get:function(a){return m.get(this,a)},hasOwnProperty:function(a){return this.__accessor__?this.__accessor__.has(a):Object.prototype.hasOwnProperty.call(this,a)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(a,c){e.set(this,a,c);return this},watch:function(a,c,b){return l.watch(this,a,c,b)},_clearOverride:function(a){return this.__accessor__.clearOverride(a)},_override:function(a,
c){return this.__accessor__.override(a,c)},_isOverridden:function(a){return this.__accessor__.isOverridden(a)},notifyChange:function(a){this.__accessor__.propertyInvalidated(a)},_get:function(a){return this.__accessor__.internalGet(a)},_set:function(a,c){return this.__accessor__.internalSet(a,c)}});return n})},"esri/core/declare":function(){define(["require","exports","dojo/_base/declare"],function(a,f,m){function h(a,c){a&&!Array.isArray(a)&&"function"!==typeof a&&(c=a,a=null);a=a||[];c=c||{};return e([this].concat(a),
c)}function e(a,c){a&&!Array.isArray(a)&&"function"!==typeof a&&(c=a,a=null);"function"===typeof a?a=[a]:a||(a=[]);c=c||{};var b,d;b=0;for(d=l.length;b<d;b++)l[b](a,c);a=m(a,c);a.createSubclass=h;b=0;for(d=n.length;b<d;b++)n[b](a);return a}var l=[],n=[];(function(a){a.hasMixin=function(a,b){a=Array.isArray(a)?a.reduce(function(b,a){return a._meta?b.concat(a._meta.bases):b},[]):a._meta?a._meta.bases:a;if(!a)return!1;if("string"===typeof b)for(var c=a.length-1;0<=c;c--)if(a[c].prototype.declaredClass===
b)return!0;return-1!==a.indexOf(b)};a.safeMixin=function(a,b){return m.safeMixin(a,b)};a.before=function(a){l.push(a)};a.after=function(a){n.push(a)}})(e||(e={}));return e})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(a,f,m){function h(b,a){throw Error("declare"+(a?" "+a:"")+": "+b);}function e(b,a){for(var g=[],c=[{cls:0,refs:[]}],d={},k=1,p=b.length,r=0,e,l,f,q,n;r<p;++r){(e=b[r])?"[object Function]"!=y.call(e)&&h("mixin #"+r+" is not a callable constructor.",
a):h("mixin #"+r+" is unknown. Did you use dojo.require to pull it in?",a);l=e._meta?e._meta.bases:[e];f=0;for(e=l.length-1;0<=e;--e)q=l[e].prototype,q.hasOwnProperty("declaredClass")||(q.declaredClass="uniqName_"+F++),q=q.declaredClass,d.hasOwnProperty(q)||(d[q]={count:0,refs:[],cls:l[e]},++k),q=d[q],f&&f!==q&&(q.refs.push(f),++f.count),f=q;++f.count;c[0].refs.push(f)}for(;c.length;){f=c.pop();g.push(f.cls);for(--k;n=f.refs,1==n.length;){f=n[0];if(!f||--f.count){f=0;break}g.push(f.cls);--k}if(f)for(r=
0,p=n.length;r<p;++r)f=n[r],--f.count||c.push(f)}k&&h("can't build consistent linearization",a);e=b[0];g[0]=e?e._meta&&e===g[g.length-e._meta.bases.length]?e._meta.bases.length:1:0;return g}function l(b,a,g,c){var d,k,p,r,e,l,f=this._inherited=this._inherited||{};"string"===typeof b&&(d=b,b=a,a=g,g=c);if("function"===typeof b)p=b,b=a,a=g;else try{p=b.callee}catch(ea){if(ea instanceof TypeError)h("strict mode inherited() requires the caller function to be passed before arguments",this.declaredClass);
else throw ea;}(d=d||p.nom)||h("can't deduce a name to call inherited()",this.declaredClass);g=c=0;r=this.constructor._meta;c=r.bases;l=f.p;if("constructor"!=d){if(f.c!==p&&(l=0,e=c[0],r=e._meta,r.hidden[d]!==p)){(k=r.chains)&&"string"==typeof k[d]&&h("calling chained method with inherited: "+d,this.declaredClass);do if(r=e._meta,k=e.prototype,r&&(k[d]===p&&k.hasOwnProperty(d)||r.hidden[d]===p))break;while(e=c[++l]);l=e?l:-1}if(e=c[++l])if(k=e.prototype,e._meta&&k.hasOwnProperty(d))g=k[d];else{p=
z[d];do if(k=e.prototype,(g=k[d])&&(e._meta?k.hasOwnProperty(d):g!==p))break;while(e=c[++l])}g=e&&g||z[d]}else{if(f.c!==p&&(l=0,(r=c[0]._meta)&&r.ctor!==p)){for((k=r.chains)&&"manual"===k.constructor||h("calling chained constructor with inherited",this.declaredClass);(e=c[++l])&&(!(r=e._meta)||r.ctor!==p););l=e?l:-1}for(;(e=c[++l])&&!(g=(r=e._meta)?r.ctor:e););g=e&&g}f.c=g;f.p=l;if(g)return!0===a?g:g.apply(this,a||b)}function n(b,a,g){return"string"===typeof b?"function"===typeof a?this.__inherited(b,
a,g,!0):this.__inherited(b,a,!0):"function"===typeof b?this.__inherited(b,a,!0):this.__inherited(b,!0)}function d(b,a,g,c){var d=this.getInherited(b,a,g);if(d)return d.apply(this,c||g||a||b)}function c(b){for(var a=this.constructor._meta.bases,g=0,c=a.length;g<c;++g)if(a[g]===b)return!0;return this instanceof b}function b(b,a){for(var g in a)"constructor"!=g&&a.hasOwnProperty(g)&&(b[g]=a[g]);if(f("bug-for-in-skips-shadowed"))for(var c=m._extraNames,d=c.length;d;)g=c[--d],"constructor"!=g&&a.hasOwnProperty(g)&&
(b[g]=a[g])}function k(b){g.safeMixin(this.prototype,b);return this}function q(b,a){b instanceof Array||"function"===typeof b||(a=b,b=void 0);a=a||{};b=b||[];return g([this].concat(b),a)}function u(b,a){return function(){var g=arguments,c=g,d=g[0],k,p;p=b.length;var r;if(!(this instanceof g.callee))return v(g);if(a&&(d&&d.preamble||this.preamble))for(r=Array(b.length),r[0]=g,k=0;;){(d=g[0])&&(d=d.preamble)&&(g=d.apply(this,g)||g);d=b[k].prototype;(d=d.hasOwnProperty("preamble")&&d.preamble)&&(g=d.apply(this,
g)||g);if(++k==p)break;r[k]=g}for(k=p-1;0<=k;--k)d=b[k],(d=(p=d._meta)?p.ctor:d)&&d.apply(this,r?r[k]:g);(d=this.postscript)&&d.apply(this,c)}}function x(b,a){return function(){var g=arguments,c=g,d=g[0];if(!(this instanceof g.callee))return v(g);a&&(d&&(d=d.preamble)&&(c=d.apply(this,c)||c),(d=this.preamble)&&d.apply(this,c));b&&b.apply(this,g);(d=this.postscript)&&d.apply(this,g)}}function w(b){return function(){var a=arguments,g=0,c,d;if(!(this instanceof a.callee))return v(a);for(;c=b[g];++g)if(c=
(d=c._meta)?d.ctor:c){c.apply(this,a);break}(c=this.postscript)&&c.apply(this,a)}}function t(b,a,g){return function(){var c,d,k=0,p=1;g&&(k=a.length-1,p=-1);for(;c=a[k];k+=p)d=c._meta,(c=(d?d.hidden:c.prototype)[b])&&c.apply(this,arguments)}}function p(b){A.prototype=b.prototype;b=new A;A.prototype=null;return b}function v(b){var a=b.callee,g=p(a);a.apply(g,b);return g}function g(a,d,v){"string"!=typeof a&&(v=d,d=a,a="");v=v||{};var E,A,C,G,F,J,R,M=1,ea=d;"[object Array]"==y.call(d)?(J=e(d,a),C=J[0],
M=J.length-C,d=J[M]):(J=[0],d?"[object Function]"==y.call(d)?(C=d._meta,J=J.concat(C?C.bases:d)):h("base class is not a callable constructor.",a):null!==d&&h("unknown base class. Did you use dojo.require to pull it in?",a));if(d)for(A=M-1;;--A){E=p(d);if(!A)break;C=J[A];(C._meta?b:r)(E,C.prototype);G=f("csp-restrictions")?function(){}:new Function;G.superclass=d;G.prototype=E;d=E.constructor=G}else E={};g.safeMixin(E,v);C=v.constructor;C!==z.constructor&&(C.nom="constructor",E.constructor=C);for(A=
M-1;A;--A)(C=J[A]._meta)&&C.chains&&(R=r(R||{},C.chains));E["-chains-"]&&(R=r(R||{},E["-chains-"]));d&&d.prototype&&d.prototype["-chains-"]&&(R=r(R||{},d.prototype["-chains-"]));C=!R||!R.hasOwnProperty("constructor");J[0]=G=R&&"manual"===R.constructor?w(J):1==J.length?x(v.constructor,C):u(J,C);G._meta={bases:J,hidden:v,chains:R,parents:ea,ctor:v.constructor};G.superclass=d&&d.prototype;G.extend=k;G.createSubclass=q;G.prototype=E;E.constructor=G;E.getInherited=n;E.isInstanceOf=c;E.inherited=B;E.__inherited=
l;a&&(E.declaredClass=a,m.setObject(a,G));if(R)for(F in R)E[F]&&"string"==typeof R[F]&&"constructor"!=F&&(C=E[F]=t(F,J,"after"===R[F]),C.nom=F);return G}var r=m.mixin,z=Object.prototype,y=z.toString,A,F=0;A=f("csp-restrictions")?function(){}:new Function;var B=a.config.isDebug?d:l;a.safeMixin=g.safeMixin=function(b,a){var g,c;for(g in a)c=a[g],c===z[g]&&g in z||"constructor"==g||("[object Function]"==y.call(c)&&(c.nom=g),b[g]=c);if(f("bug-for-in-skips-shadowed")&&a)for(var d=m._extraNames,k=d.length;k;)g=
d[--k],c=a[g],c===z[g]&&g in z||"constructor"==g||("[object Function]"==y.call(c)&&(c.nom=g),b[g]=c);return b};return a.declare=g})},"esri/core/accessorSupport/Properties":function(){define("require exports dojo/has ./Store ./PropertyOrigin ./extensions ../Logger".split(" "),function(a,f,m,h,e,l,n){Object.defineProperty(f,"__esModule",{value:!0});n.getLogger("esri.core.Accessor");var d=0;a=function(){function a(b){this.host=b;this._origin=e.OriginId.USER;this.cursors={};this.ctorArgs=null;this.destroyed=
!1;this.dirties={};this.initialized=!1;this.metadatas=this.host.constructor.__accessorMetadata__;this.overridden=null;this.store=new h.default;Object.defineProperty(this,"uid",{value:d++})}a.prototype.initialize=function(){this.initialized=!0;l.instanceCreated(this.host,this.metadatas)};a.prototype.destroy=function(){this.destroyed=!0;for(var b=this.cursors,a=0,c=Object.getOwnPropertyNames(b);a<c.length;a++){var d=c[a],e=b[d];if(e){for(;0<e.length;)e.pop().propertyDestroyed(this,d);b[d]=null}}};a.prototype.clearOverride=
function(b){this.isOverridden(b)&&(this.overridden[b]=!1,this.propertyInvalidated(b))};a.prototype.get=function(b){var a=this.metadatas[b];if(this.store.has(b)&&!0===!this.dirties[b])return this.store.get(b);var c=a.get;return c?(a=c.call(this.host),this.store.set(b,a,e.OriginId.COMPUTED),this.propertyCommitted(b),a):a.value};a.prototype.originOf=function(b){var a=this.store.originOf(b);return void 0===a&&(b=this.metadatas[b])&&b.hasOwnProperty("value")?"defaults":e.idToName(a)};a.prototype.has=function(b){return this.metadatas[b]?
this.store.has(b):!1};a.prototype.internalGet=function(b){if(this.metadatas[b]){var a=this.store;return a.has(b)?a.get(b):this.metadatas[b].value}};a.prototype.internalSet=function(b,a){this.metadatas[b]&&(this.propertyInvalidated(b),this.initialized?this.store.set(b,a,this._origin):this.store.set(b,a,e.OriginId.DEFAULTS),this.propertyCommitted(b))};a.prototype.isOverridden=function(b){return null!=this.overridden&&!0===this.overridden[b]};a.prototype.keys=function(){return this.store.keys()};a.prototype.override=
function(b,a){this.metadatas[b]&&(this.overridden||(this.overridden={}),this.overridden[b]=!0,this.internalSet(b,a))};a.prototype.set=function(b,a){if(this.metadatas[b]){var c=this.metadatas[b],d=c.set;(c=c.cast)&&(a=c.call(this.host,a));d?d.call(this.host,a):this.internalSet(b,a)}};a.prototype.setDefaultOrigin=function(b){this._origin=e.nameToId(b)};a.prototype.propertyInvalidated=function(b){var a=this.cursors[b];if(a)for(var c=0;c<a.length;c++)a[c].propertyInvalidated(this,b);this.isOverridden(b)||
(this.dirties[b]=!0)};a.prototype.propertyCommitted=function(b){this.dirties[b]=!1;var a=this.cursors[b];if(a)for(var c=0;c<a.length;c++)a[c].propertyCommitted(this,b)};a.prototype.addCursor=function(b,a){var c=this.cursors[b];c||(this.cursors[b]=c=[]);c.push(a)};a.prototype.removeCursor=function(b,a){var c=this.cursors[b];this.cursors[b]&&(c.splice(c.indexOf(a),1),0===c.length&&(this.cursors[b]=null))};return a}();f.default=a})},"esri/core/accessorSupport/Store":function(){define(["require","exports",
"./PropertyOrigin"],function(a,f,m){Object.defineProperty(f,"__esModule",{value:!0});a=function(){function a(){this._values={}}a.prototype.get=function(a){return this._values[a]};a.prototype.originOf=function(a){return m.OriginId.USER};a.prototype.keys=function(){return Object.keys(this._values)};a.prototype.set=function(a,l){this._values[a]=l};a.prototype.clear=function(a){delete this._values[a]};a.prototype.has=function(a){return a in this._values};return a}();f.default=a})},"esri/core/accessorSupport/PropertyOrigin":function(){define(["require",
"exports"],function(a,f){function m(a){switch(a){case "defaults":return e.DEFAULTS;case "service":return e.SERVICE;case "portal-item":return e.PORTAL_ITEM;case "web-scene":return e.WEB_SCENE;case "web-map":return e.WEB_MAP;case "user":return e.USER}}function h(a){switch(a){case e.DEFAULTS:return"defaults";case e.SERVICE:return"service";case e.PORTAL_ITEM:return"portal-item";case e.WEB_SCENE:return"web-scene";case e.WEB_MAP:return"web-map";case e.USER:return"user"}}Object.defineProperty(f,"__esModule",
{value:!0});var e;(function(a){a[a.DEFAULTS=0]="DEFAULTS";a[a.COMPUTED=1]="COMPUTED";a[a.SERVICE=2]="SERVICE";a[a.PORTAL_ITEM=3]="PORTAL_ITEM";a[a.WEB_SCENE=4]="WEB_SCENE";a[a.WEB_MAP=5]="WEB_MAP";a[a.USER=6]="USER";a[a.NUM=7]="NUM"})(e=f.OriginId||(f.OriginId={}));f.nameToId=m;f.idToName=h;f.readableNameToId=function(a){return m(a)};f.idToReadableName=function(a){return h(a)};f.writableNameToId=function(a){return m(a)};f.idToWritableName=function(a){return h(a)}})},"esri/core/accessorSupport/extensions":function(){define(["require",
"exports","./extensions/aliasedProperty","./extensions/computedProperty","./extensions/serializableProperty"],function(a,f,m,h,e){Object.defineProperty(f,"__esModule",{value:!0});var l=[m.default,h.default,e.default];f.processPrototypeMetadatas=function(a,d){for(var c=Object.getOwnPropertyNames(a),b=0;b<l.length;b++){var k=l[b];if(k.processPrototypePropertyMetadata)for(var e=0,f=c;e<f.length;e++){var h=f[e];k.processPrototypePropertyMetadata(h,a[h],a,d)}}};f.processClassMetadatas=function(a,d){for(var c=
Object.getOwnPropertyNames(a),b=0;b<l.length;b++){var k=l[b];if(k.processClassPropertyMetadata)for(var e=0,f=c;e<f.length;e++){var h=f[e];k.processClassPropertyMetadata(h,a[h],a,d)}}};f.instanceCreated=function(a,d){for(var c=Object.getOwnPropertyNames(d),b=0;b<l.length;b++){var k=l[b];k.instanceCreated&&k.instanceCreated(a,d,c)}}})},"esri/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports dojo/has ../wire ../utils ../get ../set".split(" "),function(a,f,m,h,e,l,n){function d(a,
b,d){var c=e.getProperties(a);return h.wire(a,d.aliasOf,function(){c.propertyInvalidated(b)})}Object.defineProperty(f,"__esModule",{value:!0});f.AliasedPropertyExtension={processClassPropertyMetadata:function(a,b,d,e){var c=b.aliasOf;if(c&&(a=c.split(".")[0],null!=d[a]&&!b.set&&!b.get)){var k;b.get=function(){var b=l.default(this,c);if("function"===typeof b){k||(k=c.split(".").slice(0,-1).join("."));var a=l.default(this,k);a&&(b=b.bind(a))}return b};b.readOnly||(b.set=function(b){return n.default(this,
c,b)})}},instanceCreated:function(a,b,k){for(var c=0;c<k.length;c++){var e=k[c],l=b[e];l.aliasOf&&d(a,e,l)}}};f.default=f.AliasedPropertyExtension})},"esri/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(a,f,m){function h(b,a,l){a=m.splitPath(a);if(Array.isArray(a)){for(var k=[],f=0;f<a.length;f++)k.push((new e(a[f],l)).install(b));return new d(k)}b=(new e(a,l)).install(b);return new c(b)}Object.defineProperty(f,"__esModule",{value:!0});var e=function(){function b(b,
a){this.path=b;this.callback=a;this.chain=null;this.path=b;-1<b.indexOf(".")&&(this.chain=m.pathToArray(b));this.callback=a;return this}b.prototype.install=function(b){b=this.chain?new n(this,b):new l(this,b);return b};b.prototype.notify=function(b){this.callback(b,this.path)};return b}(),l=function(){function b(b,a){this.binding=b;this.target=a;m.getProperties(a).addCursor(this.binding.path,this)}b.prototype.destroy=function(){this.target&&(m.getProperties(this.target).removeCursor(this.binding.path,
this),this.target=this.binding=null)};b.prototype.propertyDestroyed=function(b,a){m.getProperties(this.target).removeCursor(a,this)};b.prototype.propertyInvalidated=function(b,a){this.binding&&this.binding.notify(this.target)};b.prototype.propertyCommitted=function(b,a){this.binding&&this.binding.notify(this.target)};return b}(),n=function(){function b(b,a){this.binding=b;this.target=a;this.stack=[];this.properties=m.getProperties(a);this.stack.push({properties:this.properties,propertyName:b.chain[0]});
this.properties.addCursor(b.chain[0],this);this.moveForward();return this}b.prototype.destroy=function(){for(var b;b=this.stack.pop();)b.properties.removeCursor(b.propertyName,this);this.target=this.binding=null};b.prototype.propertyDestroyed=function(b,a){this.moveBackward(b,a)};b.prototype.propertyInvalidated=function(b,a){this.binding&&this.binding.notify(this.target)};b.prototype.propertyCommitted=function(b,a){this.binding&&(this.moveBackward(b,a),this.moveForward(),this.binding.notify(this.target))};
b.prototype.moveBackward=function(b,a){for(var c=this.stack,d=c[c.length-1];d.properties!==b&&d.propertyName!==a;)d.properties.removeCursor(d.propertyName,this),c.pop(),d=c[c.length-1]};b.prototype.moveForward=function(){var b=this.stack,a=b[b.length-1],a=a.properties.internalGet(a.propertyName);(a=m.getProperties(a))&&b.length<this.binding.chain.length&&(b=this.binding.chain[b.length],this.stack.push({properties:a,propertyName:b}),a.addCursor(b,this),this.moveForward())};return b}(),d=function(){function b(b){this.cursors=
b}b.prototype.remove=function(){for(var b=this.cursors;0<b.length;)b.pop().destroy();this.cursors=null};return b}(),c=function(){function b(b){this.cursor=b}b.prototype.remove=function(){this.cursor.destroy();this.cursor=null};return b}();f.create=function(b,a){b=m.splitPath(b);if(Array.isArray(b)){for(var k=[],l=0;l<b.length;l++)k.push(new e(b[l],a));return function(b){for(var a=[],c=0;c<k.length;c++)a[c]=k[c].install(b);return new d(a)}}var f=new e(b,a);return function(b){return new c(f.install(b))}};
f.wire=h;f.default=h})},"esri/core/accessorSupport/utils":function(){define(["require","exports","../lang"],function(a,f,m){function h(b){return b?b.__accessor__?b.__accessor__:b.propertyInvalidated?b:null:null}function e(b,a){return a?Object.keys(a).reduce(function(b,c){if("value"===c)return b[c]=a[c],b;if(void 0===b[c])return b[c]=m.clone(a[c]),b;var d=b[c],k=a[c];if(d===k)return b;if(Array.isArray(k)||Array.isArray(b))d=d?Array.isArray(d)?b[c]=d.concat():b[c]=[d]:b[c]=[],k&&(Array.isArray(k)||
(k=[k]),k.forEach(function(b){-1===d.indexOf(b)&&d.push(b)}));else if(k&&"object"===typeof k)b[c]=e(d,k);else if(!b.hasOwnProperty(c)||a.hasOwnProperty(c))b[c]=k;return b},b||{}):b}function l(b){return Array.isArray(b)?b:b.split(".")}function n(b){if(Array.isArray(b)||-1<b.indexOf(",")){b=Array.isArray(b)?b:b.split(",");for(var a=0;a<b.length;a++)b[a]=b[a].trim();return 1===b.length?b[0]:b}return b.trim()}function d(b){var a=!1;return function(){a||(a=!0,b())}}Object.defineProperty(f,"__esModule",
{value:!0});f.getProperties=h;f.isPropertyDeclared=function(b,a){return b&&b.metadatas&&null!=b.metadatas[a]};f.merge=e;f.pathToStringOrArray=function(b){return b?"string"===typeof b&&-1===b.indexOf(".")?b:l(b):b};f.pathToArray=l;f.splitPath=n;f.parse=function(b,a,c,e){a=n(a);if(Array.isArray(a)){var k=a.map(function(a){return e(b,a.trim(),c)});return{remove:d(function(){return k.forEach(function(b){return b.remove()})})}}return e(b,a.trim(),c)};f.once=d;var c=0;f.uid=function(b){if(null==b)return c++;
b=h(b);null==b.uid&&(b.uid=c++);return b.uid}})},"esri/core/lang":function(){define("dojo/_base/array dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale dojo/i18n!../nls/common".split(" "),function(a,f,m,h,e,l,n){function d(b){return void 0!==b&&null!==b}function c(b){return d(b)?b:""}function b(b,k,p){var f=p.match(/([^\(]+)(\([^\)]+\))?/i),g=m.trim(f[1]);p=k[b];var f=JSON.parse((f[2]?m.trim(f[2]):"{}").replace(/^\(/,"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z\_]+)\s*:/gi,
'$1"$2":').replace(/\"\s*:\s*\'/gi,'":"').replace(/\'\s*(,|\})/gi,'"$1')),r=f.utcOffset;if(-1===a.indexOf(u,g))g=m.getObject(g),m.isFunction(g)&&(p=g(p,b,k,f));else if("number"===typeof p||"string"===typeof p&&p&&!isNaN(Number(p)))switch(p=Number(p),g){case "NumberFormat":b=m.mixin({},f);k=parseFloat(b.places);if(isNaN(k)||0>k)b.places=Infinity;return e.format(p,b);case "DateString":p=new Date(p);if(f.local||f.systemLocale)return f.systemLocale?p.toLocaleDateString()+(f.hideTime?"":" "+p.toLocaleTimeString()):
p.toDateString()+(f.hideTime?"":" "+p.toTimeString());p=p.toUTCString();f.hideTime&&(p=p.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,""));return p;case "DateFormat":return p=new Date(p),d(r)&&(p=h.add(p,"minute",p.getTimezoneOffset()-r)),l.format(p,f)}return c(p)}function k(b,a){var c;if(a)for(c in b)b.hasOwnProperty(c)&&(void 0===b[c]?delete b[c]:b[c]instanceof Object&&k(b[c],!0));else for(c in b)b.hasOwnProperty(c)&&void 0===b[c]&&delete b[c];return b}function q(b){if(!b||"object"!=typeof b||m.isFunction(b))return b;
if("function"===typeof b.clone)b=b.clone();else if("function"===typeof b.map&&"function"===typeof b.forEach)b=b.map(q);else{var a={},c,d,g={};for(c in b){d=b[c];var k=!(c in g)||g[c]!==d;if(!(c in a)||a[c]!==d&&k)a[c]=q?q(d):d}b=a}return b}var u=["NumberFormat","DateString","DateFormat"],x=/<\/?[^>]+>/g;return{equals:function(b,a){return b===a||"number"===typeof b&&isNaN(b)&&"number"===typeof a&&isNaN(a)||m.isFunction((b||{}).getTime)&&m.isFunction((a||{}).getTime)&&b.getTime()==a.getTime()||m.isFunction((b||
{}).equals)&&b.equals(a)||m.isFunction((a||{}).equals)&&a.equals(b)||!1},valueOf:function(b,a){for(var c in b)if(b[c]==a)return c;return null},stripTags:function(b){if(b){var a=typeof b;if("string"===a)b=b.replace(x,"");else if("object"===a)for(var c in b)(a=b[c])&&"string"===typeof a&&(a=a.replace(x,"")),b[c]=a}return b},substitute:function(k,e,p){var l,g,r;d(p)&&(m.isObject(p)?(l=p.first,g=p.dateFormat,r=p.numberFormat):l=p);if(e&&"{*}"!==e)return m.replace(e,m.hitch({obj:k},function(d,k){d=k.split(":");
return 1<d.length?(k=d[0],d.shift(),b(k,this.obj,d.join(":"))):g&&-1!==a.indexOf(g.properties||"",k)?b(k,this.obj,g.formatter||"DateString"):r&&-1!==a.indexOf(r.properties||"",k)?b(k,this.obj,r.formatter||"NumberFormat"):c(this.obj[k])}));e=[];var f;e.push('\x3ctable summary\x3d"'+n.fieldsSummary+'"\x3e\x3ctbody\x3e');for(f in k)if(p=k[f],g&&-1!==a.indexOf(g.properties||"",f)?p=b(f,k,g.formatter||"DateString"):r&&-1!==a.indexOf(r.properties||"",f)&&(p=b(f,k,r.formatter||"NumberFormat")),e.push("\x3ctr\x3e\x3cth\x3e"+
f+"\x3c/th\x3e\x3ctd\x3e"+c(p)+"\x3c/td\x3e\x3c/tr\x3e"),l)break;e.push("\x3c/tbody\x3e\x3c/table\x3e");return e.join("")},filter:function(b,a,c){a=[m.isString(b)?b.split(""):b,c||f.global,m.isString(a)?new Function("item","index","array",a):a];c={};var d;b=a[0];for(d in b)a[2].call(a[d],b[d],d,b)&&(c[d]=b[d]);return c},startsWith:function(b,a,c){c=c||0;return b.indexOf(a,c)===c},endsWith:function(b,a,c){if("number"!==typeof c||!isFinite(c)||Math.floor(c)!==c||c>b.length)c=b.length;c-=a.length;b=
b.indexOf(a,c);return-1!==b&&b===c},isDefined:d,fixJson:k,clone:q}})},"dojo/date":function(){define(["./has","./_base/lang"],function(a,f){var m={getDaysInMonth:function(a){var e=a.getMonth();return 1==e&&m.isLeapYear(a)?29:[31,28,31,30,31,30,31,31,30,31,30,31][e]},isLeapYear:function(a){a=a.getFullYear();return!(a%400)||!(a%4)&&!!(a%100)},getTimezoneName:function(a){var e=a.toString(),l="",f=e.indexOf("(");if(-1<f)l=e.substring(++f,e.indexOf(")"));else if(f=/([A-Z\/]+) \d{4}$/,e=e.match(f))l=e[1];
else if(e=a.toLocaleString(),f=/ ([A-Z\/]+)$/,e=e.match(f))l=e[1];return"AM"==l||"PM"==l?"":l},compare:function(a,e,l){a=new Date(+a);e=new Date(+(e||new Date));"date"==l?(a.setHours(0,0,0,0),e.setHours(0,0,0,0)):"time"==l&&(a.setFullYear(0,0,0),e.setFullYear(0,0,0));return a>e?1:a<e?-1:0},add:function(a,e,l){var f=new Date(+a),d=!1,c="Date";switch(e){case "day":break;case "weekday":var b;(e=l%5)?b=parseInt(l/5):(e=0<l?5:-5,b=0<l?(l-5)/5:(l+5)/5);var k=a.getDay(),h=0;6==k&&0<l?h=1:0==k&&0>l&&(h=-1);
k+=e;if(0==k||6==k)h=0<l?2:-2;l=7*b+e+h;break;case "year":c="FullYear";d=!0;break;case "week":l*=7;break;case "quarter":l*=3;case "month":d=!0;c="Month";break;default:c="UTC"+e.charAt(0).toUpperCase()+e.substring(1)+"s"}if(c)f["set"+c](f["get"+c]()+l);d&&f.getDate()<a.getDate()&&f.setDate(0);return f},difference:function(a,e,l){e=e||new Date;l=l||"day";var f=e.getFullYear()-a.getFullYear(),d=1;switch(l){case "quarter":a=a.getMonth();e=e.getMonth();d=Math.floor(e/3)+1+4*f-(Math.floor(a/3)+1);break;
case "weekday":f=Math.round(m.difference(a,e,"day"));l=parseInt(m.difference(a,e,"week"));if(0==f%7)f=5*l;else{var d=0,c=a.getDay(),b=e.getDay();l=parseInt(f/7);e=f%7;a=new Date(a);a.setDate(a.getDate()+7*l);a=a.getDay();if(0<f)switch(!0){case 6==c:d=-1;break;case 0==c:d=0;break;case 6==b:d=-1;break;case 0==b:d=-2;break;case 5<a+e:d=-2}else if(0>f)switch(!0){case 6==c:d=0;break;case 0==c:d=1;break;case 6==b:d=2;break;case 0==b:d=1;break;case 0>a+e:d=2}f=f+d-2*l}d=f;break;case "year":d=f;break;case "month":d=
e.getMonth()-a.getMonth()+12*f;break;case "week":d=parseInt(m.difference(a,e,"day")/7);break;case "day":d/=24;case "hour":d/=60;case "minute":d/=60;case "second":d/=1E3;case "millisecond":d*=e.getTime()-a.getTime()}return Math.round(d)}};f.mixin(f.getObject("dojo.date",!0),m);return m})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(a,f,m,h,e){var l={};a.setObject("dojo.number",l);l.format=function(d,c){c=a.mixin({},c||{});var b=
f.normalizeLocale(c.locale),b=f.getLocalization("dojo.cldr","number",b);c.customs=b;b=c.pattern||b[(c.type||"decimal")+"Format"];return isNaN(d)||Infinity==Math.abs(d)?null:l._applyPattern(d,b,c)};l._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;l._applyPattern=function(a,c,b){b=b||{};var d=b.customs.group,e=b.customs.decimal;c=c.split(";");var f=c[0];c=c[0>a?1:0]||"-"+f;if(-1!=c.indexOf("%"))a*=100;else if(-1!=c.indexOf("\u2030"))a*=1E3;else if(-1!=c.indexOf("\u00a4"))d=b.customs.currencyGroup||d,e=b.customs.currencyDecimal||
e,c=c.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,function(a,c,d,k){return(a=b[["symbol","currency","displayName"][d.length-1]]||b.currency||"")?c+a+k:""});else if(-1!=c.indexOf("E"))throw Error("exponential notation not supported");var h=l._numberPatternRE,f=f.match(h);if(!f)throw Error("unable to find a number expression in pattern: "+c);!1===b.fractional&&(b.places=0);return c.replace(h,l._formatAbsolute(a,f[0],{decimal:e,group:d,places:b.places,round:b.round}))};l.round=function(a,c,b){b=10/
(b||10);return(b*+a).toFixed(c)/b};if(0==(.9).toFixed()){var n=l.round;l.round=function(a,c,b){var d=Math.pow(10,-c||0),e=Math.abs(a);if(!a||e>=d)d=0;else if(e/=d,.5>e||.95<=e)d=0;return n(a,c,b)+(0<a?d:-d)}}l._formatAbsolute=function(a,c,b){b=b||{};!0===b.places&&(b.places=0);Infinity===b.places&&(b.places=6);c=c.split(".");var d="string"==typeof b.places&&b.places.indexOf(","),e=b.places;d?e=b.places.substring(d+1):0<=e||(e=(c[1]||[]).length);0>b.round||(a=l.round(a,e,b.round));a=String(Math.abs(a)).split(".");
var f=a[1]||"";c[1]||b.places?(d&&(b.places=b.places.substring(0,d)),d=void 0!==b.places?b.places:c[1]&&c[1].lastIndexOf("0")+1,d>f.length&&(a[1]=h.pad(f,d,"0",!0)),e<f.length&&(a[1]=f.substr(0,e))):a[1]&&a.pop();e=c[0].replace(",","");d=e.indexOf("0");-1!=d&&(d=e.length-d,d>a[0].length&&(a[0]=h.pad(a[0],d)),-1==e.indexOf("#")&&(a[0]=a[0].substr(a[0].length-d)));var e=c[0].lastIndexOf(","),n,m;-1!=e&&(n=c[0].length-e-1,c=c[0].substr(0,e),e=c.lastIndexOf(","),-1!=e&&(m=c.length-e-1));c=[];for(e=a[0];e;)d=
e.length-n,c.push(0<d?e.substr(d):e),e=0<d?e.slice(0,d):"",m&&(n=m,m=void 0);a[0]=c.reverse().join(b.group||",");return a.join(b.decimal||".")};l.regexp=function(a){return l._parseInfo(a).regexp};l._parseInfo=function(a){a=a||{};var c=f.normalizeLocale(a.locale),c=f.getLocalization("dojo.cldr","number",c),b=a.pattern||c[(a.type||"decimal")+"Format"],d=c.group,h=c.decimal,n=1;if(-1!=b.indexOf("%"))n/=100;else if(-1!=b.indexOf("\u2030"))n/=1E3;else{var x=-1!=b.indexOf("\u00a4");x&&(d=c.currencyGroup||
d,h=c.currencyDecimal||h)}c=b.split(";");1==c.length&&c.push("-"+c[0]);c=e.buildGroupRE(c,function(b){b="(?:"+e.escapeString(b,".")+")";return b.replace(l._numberPatternRE,function(b){var c={signed:!1,separator:a.strict?d:[d,""],fractional:a.fractional,decimal:h,exponent:!1};b=b.split(".");var k=a.places;1==b.length&&1!=n&&(b[1]="###");1==b.length||0===k?c.fractional=!1:(void 0===k&&(k=a.pattern?b[1].lastIndexOf("0")+1:Infinity),k&&void 0==a.fractional&&(c.fractional=!0),!a.places&&k<b[1].length&&
(k+=","+b[1].length),c.places=k);b=b[0].split(",");1<b.length&&(c.groupSize=b.pop().length,1<b.length&&(c.groupSize2=b.pop().length));return"("+l._realNumberRegexp(c)+")"})},!0);x&&(c=c.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(b,c,d,k){b=e.escapeString(a[["symbol","currency","displayName"][d.length-1]]||a.currency||"");if(!b)return"";c=c?"[\\s\\xa0]":"";k=k?"[\\s\\xa0]":"";return a.strict?c+b+k:(c&&(c+="*"),k&&(k+="*"),"(?:"+c+b+k+")?")}));return{regexp:c.replace(/[\xa0 ]/g,"[\\s\\xa0]"),
group:d,decimal:h,factor:n}};l.parse=function(a,c){c=l._parseInfo(c);a=(new RegExp("^"+c.regexp+"$")).exec(a);if(!a)return NaN;var b=a[1];if(!a[1]){if(!a[2])return NaN;b=a[2];c.factor*=-1}b=b.replace(new RegExp("["+c.group+"\\s\\xa0]","g"),"").replace(c.decimal,".");return b*c.factor};l._realNumberRegexp=function(a){a=a||{};"places"in a||(a.places=Infinity);"string"!=typeof a.decimal&&(a.decimal=".");"fractional"in a&&!/^0/.test(a.places)||(a.fractional=[!0,!1]);"exponent"in a||(a.exponent=[!0,!1]);
"eSigned"in a||(a.eSigned=[!0,!1]);var c=l._integerRegexp(a),b=e.buildGroupRE(a.fractional,function(b){var c="";b&&0!==a.places&&(c="\\"+a.decimal,c=Infinity==a.places?"(?:"+c+"\\d+)?":c+("\\d{"+a.places+"}"));return c},!0),d=e.buildGroupRE(a.exponent,function(b){return b?"([eE]"+l._integerRegexp({signed:a.eSigned})+")":""}),c=c+b;b&&(c="(?:(?:"+c+")|(?:"+b+"))");return c+d};l._integerRegexp=function(a){a=a||{};"signed"in a||(a.signed=[!0,!1]);"separator"in a?"groupSize"in a||(a.groupSize=3):a.separator=
"";var c=e.buildGroupRE(a.signed,function(b){return b?"[-+]":""},!0),b=e.buildGroupRE(a.separator,function(b){if(!b)return"(?:\\d+)";b=e.escapeString(b);" "==b?b="\\s":"\u00a0"==b&&(b="\\s\\xa0");var c=a.groupSize,d=a.groupSize2;return d?(b="(?:0|[1-9]\\d{0,"+(d-1)+"}(?:["+b+"]\\d{"+d+"})*["+b+"]\\d{"+c+"})",0<c-d?"(?:"+b+"|(?:0|[1-9]\\d{0,"+(c-1)+"}))":b):"(?:0|[1-9]\\d{0,"+(c-1)+"}(?:["+b+"]\\d{"+c+"})*)"},!0);return c+b};return l})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./has!host-browser?./_base/xhr ./json module".split(" "),
function(a,f,m,h,e,l,n,d,c){m.add("dojo-preload-i18n-Api",1);n=a.i18n={};var b=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,k=function(b,a,g,c){var d=[g+c];a=a.split("-");for(var k="",p=0;p<a.length;p++)if(k+=(k?"-":"")+a[p],!b||b[k])d.push(g+k+"/"+c),d.specificity=k;return d},q={},u=function(b,g,c){c=c?c.toLowerCase():a.locale;b=b.replace(/\./g,"/");g=g.replace(/\./g,"/");return/root/i.test(c)?b+"/nls/"+g:b+"/nls/"+c+"/"+g},x=a.getL10nName=function(b,a,g){return b=c.id+"!"+u(b,a,g)},w=function(b,a,
g,c,d,p){b([a],function(e){var r=l.clone(e.root||e.ROOT),f=k(!e._v1x&&e,d,g,c);b(f,function(){for(var b=1;b<f.length;b++)r=l.mixin(l.clone(r),arguments[b]);q[a+"/"+d]=r;r.$locale=f.specificity;p()})})},t=function(b){var a=e.extraLocale||[],a=l.isArray(a)?a:[a];a.push(b);return a},p=function(c,k,p){var e=b.exec(c),f=e[1]+"/",n=e[5]||e[4],v=f+n,x=(e=e[5]&&e[4])||a.locale||"",u=v+"/"+x,e=e?[x]:t(x),A=e.length,F=function(){--A||p(l.delegate(q[u]))},x=c.split("*"),B="preload"==x[1];if(m("dojo-preload-i18n-Api")){if(B&&
(q[c]||(q[c]=1,z(x[2],d.parse(x[3]),1,k)),p(1)),(x=B)||(g&&r.push([c,k,p]),x=g&&!q[u]),x)return}else if(B){p(1);return}h.forEach(e,function(b){var a=v+"/"+b;m("dojo-preload-i18n-Api")&&y(a);q[a]?F():w(k,v,f,n,b,F)})};m("dojo-preload-i18n-Api");var v=n.normalizeLocale=function(b){b=b?b.toLowerCase():a.locale;return"root"==b?"ROOT":b},g=0,r=[],z=n._preloadLocalizations=function(b,c,d,k){function e(b,a){k([b],a)}function n(b,a){for(b=b.split("-");b.length;){if(a(b.join("-")))return;b.pop()}a("ROOT")}
function z(){for(--g;!g&&r.length;)p.apply(null,r.shift())}function y(a){a=v(a);n(a,function(d){if(0<=h.indexOf(c,d)){var p=b.replace(/\./g,"/")+"_"+d;g++;e(p,function(b){for(var c in b){var p=b[c],e=c.match(/(.+)\/([^\/]+)$/),r;if(e&&(r=e[2],e=e[1]+"/",p._localized)){var h;if("ROOT"===d){var v=h=p._localized;delete p._localized;v.root=p;q[f.toAbsMid(c)]=v}else h=p._localized,q[f.toAbsMid(e+r+"/"+d)]=p;d!==a&&function(b,c,d,p){var e=[],r=[];n(a,function(a){p[a]&&(e.push(f.toAbsMid(b+a+"/"+c)),r.push(f.toAbsMid(b+
c+"/"+a)))});e.length?(g++,k(e,function(){for(var g=e.length-1;0<=g;g--)d=l.mixin(l.clone(d),arguments[g]),q[r[g]]=d;q[f.toAbsMid(b+c+"/"+a)]=l.clone(d);z()})):q[f.toAbsMid(b+c+"/"+a)]=d}(e,r,p,h)}}z()});return!0}return!1})}k=k||f;y();h.forEach(a.config.extraLocale,y)},y=function(){},y=function(b){for(var g,c=b.split("/"),d=a.global[c[0]],k=1;d&&k<c.length-1;d=d[c[k++]]);d&&((g=d[c[k]])||(g=d[c[k].replace(/-/g,"_")]),g&&(q[b]=g));return g};n.getLocalization=function(b,a,g){var c;b=u(b,a,g);p(b,f,
function(b){c=b});return c};return l.mixin(n,{dynamic:!0,normalize:function(b,a){return/^\./.test(b)?a(b):b},load:p,cache:q,getL10nName:x})})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(a,f){var m=/[&<>'"\/]/g,h={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},e={};f.setObject("dojo.string",e);e.escape=function(a){return a?a.replace(m,function(a){return h[a]}):""};e.rep=function(a,e){if(0>=e||!a)return"";for(var d=
[];;){e&1&&d.push(a);if(!(e>>=1))break;a+=a}return d.join("")};e.pad=function(a,f,d,c){d||(d="0");a=String(a);f=e.rep(d,Math.ceil((f-a.length)/d.length));return c?a+f:f+a};e.substitute=function(e,h,d,c){c=c||a.global;d=d?f.hitch(c,d):function(b){return b};return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(b,a,e){if(""==a)return"$";b=f.getObject(a,!1,h);e&&(b=f.getObject(e,!1,c).call(c,b,a));e=d(b,a);if("undefined"===typeof e)throw Error('string.substitute could not find key "'+a+'" in template');
return e.toString()})};e.trim=String.prototype.trim?f.trim:function(a){a=a.replace(/^\s+/,"");for(var e=a.length-1;0<=e;e--)if(/\S/.test(a.charAt(e))){a=a.substring(0,e+1);break}return a};return e})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(a,f){var m={};f.setObject("dojo.regexp",m);m.escapeString=function(a,e){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(a){return e&&-1!=e.indexOf(a)?a:"\\"+a})};m.buildGroupRE=function(a,e,l){if(!(a instanceof Array))return e(a);
for(var f=[],d=0;d<a.length;d++)f.push(e(a[d]));return m.group(f.join("|"),l)};m.group=function(a,e){return"("+(e?"?:":"")+a+")"};return m})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),function(a,f,m,h,e,l,n,d,c){function b(b,a,g,c){return c.replace(/([a-z])\1*/ig,function(d){var k,p,e=d.charAt(0);d=d.length;var r=["abbr","wide","narrow"];switch(e){case "G":k=a[4>d?"eraAbbr":
"eraNames"][0>b.getFullYear()?0:1];break;case "y":k=b.getFullYear();switch(d){case 1:break;case 2:if(!g.fullYear){k=String(k);k=k.substr(k.length-2);break}default:p=!0}break;case "Q":case "q":k=Math.ceil((b.getMonth()+1)/3);p=!0;break;case "M":case "L":k=b.getMonth();3>d?(k+=1,p=!0):(e=["months","L"==e?"standAlone":"format",r[d-3]].join("-"),k=a[e][k]);break;case "w":k=u._getWeekOfYear(b,0);p=!0;break;case "d":k=b.getDate();p=!0;break;case "D":k=u._getDayOfYear(b);p=!0;break;case "e":case "c":if(k=
b.getDay(),2>d){k=(k-h.getFirstDayOfWeek(g.locale)+8)%7;break}case "E":k=b.getDay();3>d?(k+=1,p=!0):(e=["days","c"==e?"standAlone":"format",r[d-3]].join("-"),k=a[e][k]);break;case "a":e=12>b.getHours()?"am":"pm";k=g[e]||a["dayPeriods-format-wide-"+e];break;case "h":case "H":case "K":case "k":p=b.getHours();switch(e){case "h":k=p%12||12;break;case "H":k=p;break;case "K":k=p%12;break;case "k":k=p||24}p=!0;break;case "m":k=b.getMinutes();p=!0;break;case "s":k=b.getSeconds();p=!0;break;case "S":k=Math.round(b.getMilliseconds()*
Math.pow(10,d-3));p=!0;break;case "v":case "z":if(k=u._getZone(b,!0,g))break;d=4;case "Z":e=u._getZone(b,!1,g);e=[0>=e?"+":"-",n.pad(Math.floor(Math.abs(e)/60),2),n.pad(Math.abs(e)%60,2)];4==d&&(e.splice(0,0,"GMT"),e.splice(3,0,":"));k=e.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+c);}p&&(k=n.pad(k,d));return k})}function k(b,a,g,c){var d=function(b){return b};a=a||d;g=g||d;c=c||d;var k=b.match(/(''|[^'])+/g),p="'"==b.charAt(0);f.forEach(k,function(b,c){b?
(k[c]=(p?g:a)(b.replace(/''/g,"'")),p=!p):k[c]=""});return c(k.join(""))}function q(b,a,g,c){c=l.escapeString(c);g.strict||(c=c.replace(" a"," ?a"));return c.replace(/([a-z])\1*/ig,function(c){var d;d=c.charAt(0);var k=c.length,p="",e="";g.strict?(1<k&&(p="0{"+(k-1)+"}"),2<k&&(e="0{"+(k-2)+"}")):(p="0?",e="0{0,2}");switch(d){case "y":d="\\d{2,4}";break;case "M":case "L":2<k?(d=a["months-"+("L"==d?"standAlone":"format")+"-"+x[k-3]].slice(0).join("|"),g.strict||(d=d.replace(/\./g,""),d="(?:"+d+")\\.?")):
d="1[0-2]|"+p+"[1-9]";break;case "D":d="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+p+"[1-9][0-9]|"+e+"[1-9]";break;case "d":d="3[01]|[12]\\d|"+p+"[1-9]";break;case "w":d="[1-4][0-9]|5[0-3]|"+p+"[1-9]";break;case "E":case "e":case "c":d=".+?";break;case "h":d="1[0-2]|"+p+"[1-9]";break;case "k":d="1[01]|"+p+"\\d";break;case "H":d="1\\d|2[0-3]|"+p+"\\d";break;case "K":d="1\\d|2[0-4]|"+p+"[1-9]";break;case "m":case "s":d="[0-5]\\d";break;case "S":d="\\d{"+k+"}";break;case "a":k=g.am||a["dayPeriods-format-wide-am"];
p=g.pm||a["dayPeriods-format-wide-pm"];d=k+"|"+p;g.strict||(k!=k.toLowerCase()&&(d+="|"+k.toLowerCase()),p!=p.toLowerCase()&&(d+="|"+p.toLowerCase()),-1!=d.indexOf(".")&&(d+="|"+d.replace(/\./g,"")));d=d.replace(/\./g,"\\.");break;default:d=".*"}b&&b.push(c);return"("+d+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var u={};a.setObject(c.id.replace(/\//g,"."),u);u._getZone=function(b,a,g){return a?m.getTimezoneName(b):b.getTimezoneOffset()};u.format=function(c,d){d=d||{};var g=e.normalizeLocale(d.locale),
p=d.formatLength||"short",g=u._getGregorianBundle(g),l=[];c=a.hitch(this,b,c,g,d);if("year"==d.selector)return k(g["dateFormatItem-yyyy"]||"yyyy",c);var f;"date"!=d.selector&&(f=d.timePattern||g["timeFormat-"+p])&&l.push(k(f,c));"time"!=d.selector&&(f=d.datePattern||g["dateFormat-"+p])&&l.push(k(f,c));return 1==l.length?l[0]:g["dateTimeFormat-"+p].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(b,a){return l[a]})};u.regexp=function(b){return u._parseInfo(b).regexp};u._parseInfo=function(b){b=b||{};
var c=e.normalizeLocale(b.locale),c=u._getGregorianBundle(c),g=b.formatLength||"short",d=b.datePattern||c["dateFormat-"+g],p=b.timePattern||c["timeFormat-"+g],g="date"==b.selector?d:"time"==b.selector?p:c["dateTimeFormat-"+g].replace(/\{(\d+)\}/g,function(b,a){return[p,d][a]}),l=[];return{regexp:k(g,a.hitch(this,q,l,c,b)),tokens:l,bundle:c}};u.parse=function(b,a){var g=/[\u200E\u200F\u202A\u202E]/g,c=u._parseInfo(a),d=c.tokens,k=c.bundle;b=(new RegExp("^"+c.regexp.replace(g,"")+"$",c.strict?"":"i")).exec(b&&
b.replace(g,""));if(!b)return null;var p=["abbr","wide","narrow"],e=[1970,0,1,0,0,0,0],l="";b=f.every(b,function(b,g){if(!g)return!0;var c=d[g-1];g=c.length;c=c.charAt(0);switch(c){case "y":if(2!=g&&a.strict)e[0]=b;else if(100>b)b=Number(b),c=""+(new Date).getFullYear(),g=100*c.substring(0,2),c=Math.min(Number(c.substring(2,4))+20,99),e[0]=b<c?g+b:g-100+b;else{if(a.strict)return!1;e[0]=b}break;case "M":case "L":if(2<g){if(g=k["months-"+("L"==c?"standAlone":"format")+"-"+p[g-3]].concat(),a.strict||
(b=b.replace(".","").toLowerCase(),g=f.map(g,function(b){return b.replace(".","").toLowerCase()})),b=f.indexOf(g,b),-1==b)return!1}else b--;e[1]=b;break;case "E":case "e":case "c":g=k["days-"+("c"==c?"standAlone":"format")+"-"+p[g-3]].concat();a.strict||(b=b.toLowerCase(),g=f.map(g,function(b){return b.toLowerCase()}));b=f.indexOf(g,b);if(-1==b)return!1;break;case "D":e[1]=0;case "d":e[2]=b;break;case "a":g=a.am||k["dayPeriods-format-wide-am"];c=a.pm||k["dayPeriods-format-wide-pm"];if(!a.strict){var r=
/\./g;b=b.replace(r,"").toLowerCase();g=g.replace(r,"").toLowerCase();c=c.replace(r,"").toLowerCase()}if(a.strict&&b!=g&&b!=c)return!1;l=b==c?"p":b==g?"a":"";break;case "K":24==b&&(b=0);case "h":case "H":case "k":if(23<b)return!1;e[3]=b;break;case "m":e[4]=b;break;case "s":e[5]=b;break;case "S":e[6]=b}return!0});g=+e[3];"p"===l&&12>g?e[3]=g+12:"a"===l&&12==g&&(e[3]=0);g=new Date(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);a.strict&&g.setFullYear(e[0]);var h=d.join(""),c=-1!=h.indexOf("d"),h=-1!=h.indexOf("M");
if(!b||h&&g.getMonth()>e[1]||c&&g.getDate()>e[2])return null;if(h&&g.getMonth()<e[1]||c&&g.getDate()<e[2])g=m.add(g,"hour",1);return g};var x=["abbr","wide","narrow"],w=[],t={};u.addCustomFormats=function(b,a){w.push({pkg:b,name:a});t={}};u._getGregorianBundle=function(b){if(t[b])return t[b];var c={};f.forEach(w,function(g){g=e.getLocalization(g.pkg,g.name,b);c=a.mixin(c,g)},this);return t[b]=c};u.addCustomFormats(c.id.replace(/\/date\/locale$/,".cldr"),"gregorian");u.getNames=function(b,a,g,c){var d;
c=u._getGregorianBundle(c);b=[b,g,a];"standAlone"==g&&(g=b.join("-"),d=c[g],1==d[0]&&(d=void 0));b[1]="format";return(d||c[b.join("-")]).concat()};u.isWeekend=function(b,a){a=h.getWeekend(a);b=(b||new Date).getDay();a.end<a.start&&(a.end+=7,b<a.start&&(b+=7));return b>=a.start&&b<=a.end};u._getDayOfYear=function(b){return m.difference(new Date(b.getFullYear(),0,1,b.getHours()),b)+1};u._getWeekOfYear=function(b,a){1==arguments.length&&(a=0);var g=(new Date(b.getFullYear(),0,1)).getDay(),c=(g-a+7)%
7,c=Math.floor((u._getDayOfYear(b)+c-1)/7);g==a&&c++;return c};return u})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(a,f){var m={};a.setObject("dojo.cldr.supplemental",m);m.getFirstDayOfWeek=function(a){a={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,
mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[m._region(a)];return void 0===a?1:a};m._region=function(a){a=f.normalizeLocale(a);a=a.split("-");var e=a[1];e?4==e.length&&(e=a[2]):e={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",
dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",
lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",
tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",
chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",
kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",
mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",
swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[a[0]];return e};m.getWeekend=function(a){var e=m._region(a);a={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,
tn:5}[e];e={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[e];void 0===a&&(a=6);void 0===e&&(e=0);return{start:a,end:e}};return m})},"esri/core/accessorSupport/get":function(){define(["require","exports","./utils"],function(a,f,m){function h(a,c,b){if(null!=b.getItemAt||Array.isArray(b)){var d=parseInt(a,10);if(!isNaN(d))return Array.isArray(b)?b[d]:b.getItemAt(d)}d=m.getProperties(b);return c?m.isPropertyDeclared(d,a)?d.get(a):b[a]:m.isPropertyDeclared(d,
a)?d.internalGet(a):b[a]}function e(a,c,b,k){if(null==a)return a;if((a=h(c[k],b,a))||!(k<c.length-1))return k===c.length-1?a:e(a,c,b,k+1)}function l(a,c,b,k){void 0===b&&(b=!1);void 0===k&&(k=0);return"string"===typeof c&&-1===c.indexOf(".")?h(c,b,a):e(a,m.pathToArray(c),b,k)}function n(a,c){return l(a,c,!0)}Object.defineProperty(f,"__esModule",{value:!0});f.valueOf=l;f.get=n;f.exists=function(a,c){return void 0!==l(c,a,!0)};f.default=n})},"esri/core/accessorSupport/set":function(){define(["require",
"exports","./get"],function(a,f,m){function h(a,l,f){if(a&&l)if("object"===typeof l){f=0;for(var d=Object.getOwnPropertyNames(l);f<d.length;f++){var c=d[f];h(a,c,l[c])}}else"_"!==l[0]&&(-1!==l.indexOf(".")?(l=l.split("."),c=l.splice(l.length-1,1)[0],h(m.default(a,l),c,f)):a[l]=f)}Object.defineProperty(f,"__esModule",{value:!0});f.set=h;f.default=h})},"esri/core/accessorSupport/extensions/computedProperty":function(){define(["require","exports","dojo/has","../utils","../wire"],function(a,f,m,h,e){Object.defineProperty(f,
"__esModule",{value:!0});f.ComputedPropertyExtension={processClassPropertyMetadata:function(a,f,d,c){f.dependsOn&&(f.wire=e.create(f.dependsOn,function(b){return h.getProperties(b).propertyInvalidated(a)}))},instanceCreated:function(a,e,d){for(var c=0;c<d.length;c++){var b=e[d[c]];b.wire&&b.wire(a)}}};f.default=f.ComputedPropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ./serializableProperty/shorthands ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/writer".split(" "),
function(a,f,m,h,e,l){function n(a,c,b){var d=a&&a.json;a&&a.json&&a.json.origins&&b&&(a=a.json.origins[b.origin])&&c in a&&(d=a);return d}Object.defineProperty(f,"__esModule",{value:!0});f.originSpecificReadPropertyDefinition=function(a,c){return n(a,"read",c)};f.originSpecificWritePropertyDefinition=function(a,c){return n(a,"write",c)};f.SerializablePropertyExtension={processPrototypePropertyMetadata:function(a,c,b,k){if(m.process(c)){h.process(c);k=(b=Array.isArray(c.type))?c.type[0]:c.type;if(c.json.origins)for(var d in c.json.origins){var f=
c.json.origins[d];e.create(k,b,a,f);l.create(k,b,a,f)}e.create(k,b,a,c.json);l.create(k,b,a,c.json)}}};f.default=f.SerializablePropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require","exports"],function(a,f){function m(a){"boolean"===typeof a.read?a.read={enabled:a.read}:"function"===typeof a.read?a.read={enabled:!0,reader:a.read}:a.read&&"object"===typeof a.read&&void 0===a.read.enabled&&(a.read.enabled=!0)}function h(a){"boolean"===
typeof a.write?a.write={enabled:a.write}:"function"===typeof a.write?a.write={enabled:!0,writer:a.write}:a.write&&"object"===typeof a.write&&void 0===a.write.enabled&&(a.write.enabled=!0)}Object.defineProperty(f,"__esModule",{value:!0});f.process=function(a){a.json||(a.json={});m(a.json);h(a.json);if(a.json.origins)for(var e in a.json.origins)m(a.json.origins[e]),h(a.json.origins[e]);return!0}})},"esri/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require",
"exports"],function(a,f){Object.defineProperty(f,"__esModule",{value:!0});f.process=function(a){if(a.json&&a.json.origins){var f=a.json.origins,e={portalItem:["portal-item"],webScene:["web-scene"],webMap:["web-map"],webDocument:["web-scene","web-map"],"web-document":["web-scene","web-map"]};a=function(a){if(f[a]){var d=f[a];e[a].forEach(function(a){f[a]=d});delete f[a]}};for(var l in e)a(l)}}})},"esri/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require","exports",
"dojo/_base/lang","./type"],function(a,f,m,h){function e(b,a,c,e){if(a)return n(b);if(d(b)){var k=n(b.prototype.itemType);return function(a,c,d){return(a=k(a,c,d))?new b(a):a}}return l(b)}function l(b){return b.prototype.read?function(a,c,d){return null==a?a:(new b).read(a,d)}:b.fromJSON}function n(b){var a=l(b);return function(b,c,d){return null==b?b:Array.isArray(b)?b.map(function(b){return a(b,null,d)}):[a(b,null,d)]}}function d(b){return h.isCollection(b)&&c(b.prototype.itemType)}function c(b){return!!b&&
(!!b.prototype.read||!!b.fromJSON||d(b))}Object.defineProperty(f,"__esModule",{value:!0});f.create=function(b,a,d,f){(!f.read||!f.read.reader&&!1!==f.read.enabled)&&c(b)&&m.setObject("read.reader",e(b,a,d,f),f)}})},"esri/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require","exports"],function(a,f){Object.defineProperty(f,"__esModule",{value:!0});f.isCollection=function(a){return!!a&&!!a.prototype.declaredClass&&0===a.prototype.declaredClass.indexOf("esri.core.Collection")}})},
"esri/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require","exports","dojo/_base/lang","./type"],function(a,f,m,h){function e(a,c,b,k){m.setObject(b,l(a,k),c)}function l(a,c){return a&&"function"===typeof a.write?a.write({},c):a&&"function"===typeof a.toJSON?a.toJSON():a}function n(a,c,b,k){null===a?a=null:a&&"function"===typeof a.map?(a=a.map(function(b){return l(b,k)}),"function"===typeof a.toArray&&(a=a.toArray())):a=[l(a,k)];m.setObject(b,a,c)}Object.defineProperty(f,
"__esModule",{value:!0});f.create=function(a,c,b,k){k.write&&!k.write.writer&&!1!==k.write.enabled&&(c||h.isCollection(a)?k.write.writer=n:k.write.writer=e)}})},"esri/core/Logger":function(){define(["require","exports","dojo/has"],function(a,f,m){var h={info:0,warn:1,error:2};a=function(){function a(e){void 0===e&&(e={});this.module=e.module||"";this.writer=e.writer||null;this.level=e.level||null;null!=e.enabled&&(this.enabled=!!e.enabled);a._loggers[this.module]=this;e=this.module.lastIndexOf(".");
-1!==e&&(this.parent=a.getLogger(this.module.slice(0,e)))}a.prototype.log=function(a){for(var e=[],d=1;d<arguments.length;d++)e[d-1]=arguments[d];this._isEnabled()&&this._matchLevel(a)&&(d=this._inheritedWriter())&&d.apply(void 0,[a,this.module].concat(e))};a.prototype.error=function(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];this.log.apply(this,["error"].concat(a))};a.prototype.warn=function(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];this.log.apply(this,["warn"].concat(a))};
a.prototype.info=function(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];this.log.apply(this,["info"].concat(a))};a.prototype.getLogger=function(e){return a.getLogger(this.module+"."+e)};a.getLogger=function(e){var f=a._loggers[e];f||(f=new a({module:e}));return f};a.prototype._parentWithMember=function(a,e){for(var d=this;d&&null==d[a];)d=d.parent;return d?d[a]:e};a.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};a.prototype._consoleWriter=
function(a,e){for(var d=[],c=2;c<arguments.length;c++)d[c-2]=arguments[c];console[a].apply(console,["["+e+"]"].concat(d))};a.prototype._matchLevel=function(a){return h[this._parentWithMember("level","error")]<=h[a]};a.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)};return a}();a._loggers={};a.getLogger("esri").level="warn";return a})},"esri/core/accessorSupport/introspection":function(){define("require exports dojo/_base/lang ./utils ./metadata ./ensureType ./extensions ./decorators/cast".split(" "),
function(a,f,m,h,e,l,n,d){Object.defineProperty(f,"__esModule",{value:!0});var c=Object.prototype.hasOwnProperty,b=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Writer|Caster)$/,k={Getter:"get",Setter:"set",Reader:"json.read.reader",Writer:"json.write.writer",Caster:"cast"},q=/^_(set|get)([a-zA-Z0-9]+)Attr$/;f.processPrototype=function(a){for(var d=a.declaredClass,f=a.properties||{},t=0,p=Object.getOwnPropertyNames(f);t<p.length;t++){var v=p[t],g=f[v],r=typeof g;null==g?e.setPropertyMetadata(a,v,{value:g}):
Array.isArray(g)?e.setPropertyMetadata(a,v,{type:[g[0]],value:null}):"object"===r?h.getProperties(g)||g instanceof Date?e.setPropertyMetadata(a,v,{type:g.constructor,value:g}):e.setPropertyMetadata(a,v,g):"boolean"===r?e.setPropertyMetadata(a,v,{type:Boolean,value:g}):"string"===r?e.setPropertyMetadata(a,v,{type:String,value:g}):"number"===r?e.setPropertyMetadata(a,v,{type:Number,value:g}):"function"===r&&e.setPropertyMetadata(a,v,{type:g,value:null})}t=0;for(p=Object.getOwnPropertyNames(a);t<p.length;t++){var r=
p[t],g=a[r],z=void 0,f=v=void 0;if(z=b.exec(r))v=z[1],f=k[z[2]];else if(z=q.exec(r))v=z[2][0].toLowerCase()+z[2].substr(1),f=z[1].toLowerCase();v&&f&&(v=e.getPropertyMetadata(a,v),m.setObject(f,g,v))}t=0;for(p=Object.getOwnPropertyNames(e.getPropertiesMetadata(a));t<p.length;t++)if(v=p[t],g=e.getPropertyMetadata(a,v),f=g.type,void 0===g.value&&c.call(a,v)&&(g.value=a[v]),!g.cast&&f)switch(f){case Number:g.cast=l.ensureNumber;break;case Boolean:g.cast=l.ensureBoolean;break;case String:g.cast=l.ensureString;
break;case Date:g.cast=l.ensureDate;break;default:Array.isArray(f)?g.cast=l.ensureArray(f[0]):g.cast=l.ensureType(f)}n.processPrototypeMetadatas(e.getPropertiesMetadata(a),d);return e.getPropertiesMetadata(a)};f.processClass=function(b){for(var a=b.prototype,c=a.declaredClass,k=b._meta.bases,p={},f=k.length-1;0<=f;f--)h.merge(p,e.getMetadata(k[f].prototype));var g=p.properties;n.processClassMetadatas(g,c);Object.defineProperty(b,"__accessorMetadata__",{value:g});for(var r={},c=function(b){var a=g[b];
r[b]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(b):a.value},set:function(g){var c=this.__accessor__;if(!c)Object.defineProperty(this,b,{enumerable:!0,configurable:!0,writable:!0,value:g});else if(!Object.isFrozen(this)){if(c.initialized&&a.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+b+"' of "+this.declaredClass);c.set(b,g)}}}},k=0,f=Object.getOwnPropertyNames(g);k<f.length;k++)c(f[k]);Object.defineProperties(b.prototype,
r);if(p.parameters)for(b=0,c=Object.getOwnPropertyNames(p.parameters);b<c.length;b++)k=c[b],f=Object.getOwnPropertyDescriptor(a,k)||{value:a[k]},(f=d.autocastMethod(a,k,f))&&Object.defineProperty(a,k,f);return p}})},"esri/core/accessorSupport/metadata":function(){define(["require","exports"],function(a,f){function m(a){return null!=a.__accessorMetadata__}function h(a){return m(a)&&null!=e(a).properties}function e(a){a.__accessorMetadata__||Object.defineProperty(a,"__accessorMetadata__",{value:{},
enumerable:!0,configurable:!0,writable:!0});return a.__accessorMetadata__}function l(a){a=e(a);var c=a.properties;c||(c=a.properties={});return c}function n(a,c){var b=e(a);a=b.parameters;a||(a=b.parameters={});b=a[c];b||(b=[],a[c]=b);return b}Object.defineProperty(f,"__esModule",{value:!0});f.hasMetadata=m;f.hasPropertiesMetadata=h;f.hasPropertyMetadata=function(a,c){return h(a)&&null!=l(a)[c]};f.hasParametersMetadata=function(a,c){return m(a)&&null!=e(a).parameters&&null!=e(a).parameters[c]};f.getMetadata=
e;f.getPropertiesMetadata=l;f.getPropertyMetadata=function(a,c){a=l(a);var b=a[c];b||(b=a[c]={});return b};f.setPropertyMetadata=function(a,c,b){l(a)[c]=b};f.getParametersMetadata=n;f.getParameterMetadata=function(a,c,b){var d=n(a,c)[b];d||(n(a,c)[b]=d={index:b});return d}})},"esri/core/accessorSupport/ensureType":function(){define(["require","exports","dojo/has"],function(a,f,m){function h(a,c){return c.isInstanceOf?c.isInstanceOf(a):c instanceof a}function e(a,c){return null!=c&&a&&!h(a,c)}function l(a,
c){if(1===arguments.length)return l.bind(null,a);e(a,c)&&(c=new a(c));return c}function n(a,c){return 1===arguments.length?n.bind(null,a):c?Array.isArray(c)?c.map(l.bind(null,a)):[l(a,c)]:c}Object.defineProperty(f,"__esModule",{value:!0});f.isInstanceOf=h;f.ensureDate=function(a){return null==a?a:new Date(a)};f.ensureBoolean=function(a){return!0===a||!1===a?a:!!a};f.ensureString=function(a){return null==a?a:a.toString()};f.ensureNumber=function(a){return null==a?a:parseFloat(a)};f.isClassedType=function(a){return a&&
a.constructor&&void 0!==a.constructor._meta};f.requiresType=e;f.ensureType=l;f.ensureArray=n;f.default=l})},"esri/core/accessorSupport/decorators/cast":function(){define(["require","exports","../metadata","../ensureType"],function(a,f,m,h){function e(b){var a="_meta"in b?h.ensureType(b):b;return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b.push(a);return"number"===typeof b[2]?n.apply(this,b):l.apply(this,b)}}function l(b,a,c,d){m.getPropertyMetadata(b,a).cast=d}function n(b,
a,c,d){m.getParameterMetadata(b,a,c).cast=d}function d(b){return function(a,c,d){m.getPropertyMetadata(a,b).cast=a[c]}}Object.defineProperty(f,"__esModule",{value:!0});var c=Object.prototype.toString;f.autocastMethod=function(b,a,c){if(m.hasParametersMetadata(b,a)){var d=m.getParametersMetadata(b,a).filter(function(b){return null!=b.cast});if(d.length){var k=c.value;c.value=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];for(a=0;a<d.length;a++){var c=d[a];b[c.index]=c.cast(b[c.index])}return k.apply(this,
b)};return c}console.warn("Method "+b.declaredClass+"::"+a+" is decorated with @cast but no parameters are decorated")}};f.cast=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];if(3!==b.length||"string"!==typeof b[1]){if(1===b.length&&"[object Function]"===c.call(b[0]))return e(b[0]);if(1===b.length&&"string"===typeof b[0])return d(b[0])}}})},"esri/core/accessorSupport/watch":function(){define("require exports ../Scheduler ../ObjectPool ../ArrayPool ../lang ./utils ./get ./wire".split(" "),
function(a,f,m,h,e,l,n,d,c){function b(b){v.has(b)?g.splice(g.indexOf(b),1):v.add(b);g.push(b);r||(r=m.schedule(q))}function k(b){if(!b.removed){var a=b.callback,g=b.path,c=b.oldValue,k=b.target,p=d.valueOf(k,b.propertyPath,!0);l.equals(c,p)||(b.oldValue=p,a.call(k,p,c,g,k))}}function q(){if(r){r=null;var b=g;g=p.acquire();v.clear();for(var a=p.acquire(),c=0;c<b.length;c++){var d=b[c];k(d);d.removed&&a.push(d)}for(c=0;c<g.length;c++)d=g[c],d.removed&&(a.push(d),v.delete(d),g.splice(c,1),--c);for(c=
0;c<a.length;c++)t.pool.release(a[c]);p.release(b);p.release(a)}}function u(a,g,k){var p=n.parse(a,g,k,function(a,g,k){var e=d.valueOf(a,g,!0),r,f=c.wire(a,g,function(a,g){a.__accessor__.destroyed?p.remove():(r||(r=t.pool.acquire(a,g,e,k),e=null),b(r))});return{remove:n.once(function(){f.remove();r&&(r.removed=!0,b(r),r=null);p=f=e=null})}});return p}function x(b,a,g){var k=n.parse(b,a,g,function(b,a,g){var p=d.valueOf(b,a,!0),e=!1;return c.wire(b,a,function(b,a){if(b.__accessor__.destroyed)k.remove();
else if(!e){e=!0;var c=d.valueOf(b,a,!0);l.equals(p,c)||g.call(b,c,p,a,b);p=d.valueOf(b,a,!0);e=!1}})});return k}function w(b,a,g,c){void 0===c&&(c=!1);return!b.__accessor__||b.__accessor__.destroyed?{remove:function(){}}:c?x(b,a,g):u(b,a,g)}Object.defineProperty(f,"__esModule",{value:!0});var t=function(){function b(b,a,g,c){this.target=b;this.path=a;this.oldValue=g;this.callback=c;this.removed=!1;this.propertyPath=n.pathToStringOrArray(a)}b.prototype.release=function(){this.target=this.path=this.propertyPath=
this.callback=this.oldValue=null;this.removed=!0};return b}();t.pool=new h(t,!0);var p=new e,v=new Set,g=p.acquire(),r;f.dispatchTarget=function(b){for(var a=p.copy(g),c=0;c<a.length;c++){var d=a[c];d.target===b&&(k(d),v.delete(d),g.splice(g.indexOf(d),1))}};f.removeTarget=function(b){for(var a=0;a<g.length;a++){var c=g[a];c.target===b&&(c.removed=!0)}};f.dispatch=q;f.watch=w;f.default=w})},"esri/core/Scheduler":function(){define(["./ArrayPool","./ObjectPool","./nextTick","./requestAnimationFrame",
"./now"],function(a,f,m,h,e){var l=["prepare","preRender","render","postRender","update"],n=new f(function(){this.isActive=!0;this.callback=null},!0,function(b){b.isActive=!1;b.callback=null}),d=function(){},c=function(){this.item.isActive=!1;k.release(this)},b={time:0,deltaTime:0,spendInFrame:0,spendInTask:0},k=new f(function(){this.remove=c;this.item=null},!0,function(b){b.remove=d;b.item=null});f=function(){this._boundDispatch=this._dispatch.bind(this);this.willDispatch=!1;this._queue=a.acquire();
this._frameTasks=a.acquire();this._phaseTasks={};this._previousFrameTime=-1;for(var b=0;b<l.length;b++)this._phaseTasks[l[b]]=a.acquire();this._boundAnimationFrame=this._animationFrame.bind(this);this.executing=!1;this._animationFrameRequestId=null};f.prototype={schedule:function(b){var a=n.acquire();a.callback=b;this._schedule(a);b=k.acquire();b.item=a;return b},_dispatch:function(){for(var b=this._queue;b.length;){var a=b.shift();a.isActive&&(a.isActive=!1,a.callback())}this.willDispatch=!1},_schedule:function(b){this._queue.push(b);
this.willDispatch||(this.willDispatch=!0,m(this._boundDispatch))},addFrameTask:function(b){var a={phases:b,paused:!1,pausedAt:0,epoch:-1,dt:0,ticks:-1,removed:!1};this._frameTasks.push(a);for(var c=0;c<l.length;c++){var d=l[c];b[d]&&this._phaseTasks[d].push(a)}this._animationFrameRequestId||(this._previousFrameTime=-1,this._requestAnimationFrame());return{isPaused:function(){return a.paused},remove:function(){a.removed=!0},pause:function(){a.paused=!0;a.pausedAt=e()},resume:function(){a.paused=!1;
-1!==a.epoch&&(a.epoch+=e()-a.pausedAt)}}},clearFrameTasks:function(){for(var b=0;b<this._frameTasks.length;b++)this._frameTasks[b].removed=!0},_purge:function(){for(var b=0;b<this._frameTasks.length;){var a=this._frameTasks[b];b++;if(a.removed){this._frameTasks.splice(b-1,1);for(var c=0;c<l.length;c++){var d=l[c];if(a.phases[d]){var d=this._phaseTasks[d],k=d.indexOf(a);-1!==k&&d.splice(k,1)}}}}},_animationFrame:function(a){this._animationFrameRequestId=null;this.executing=!0;0<this._frameTasks.length&&
this._requestAnimationFrame();a=e();0>this._previousFrameTime&&(this._previousFrameTime=a);var c=a-this._previousFrameTime;this._previousFrameTime=a;for(var d=0;d<this._frameTasks.length;d++){var k=this._frameTasks[d];-1!==k.epoch&&(k.dt=c)}for(d=0;d<l.length;d++)for(var c=l[d],p=this._phaseTasks[c],f=0;f<p.length;f++)k=p[f],k.paused||k.removed||(0===d&&k.ticks++,-1===k.epoch&&(k.epoch=a),b.time=a,b.deltaTime=k.dt,b.spendInFrame=e()-a,b.spendInTask=a-k.epoch,k.phases[c].call(k,b));this._purge();this.executing=
!1},_requestAnimationFrame:function(){this._animationFrameRequestId=h(this._boundAnimationFrame)}};var q=new f;f.schedule=function(b){return q.schedule(b)};f.addFrameTask=function(b){return q.addFrameTask(b)};f.clearFrameTasks=function(){return q.clearFrameTasks()};Object.defineProperty(f,"executing",{get:function(){return q.executing}});f.instance=q;return f})},"esri/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],function(a,f,m){var h=Array.prototype.splice;a=function(){function a(a,
d){void 0===a&&(a=50);void 0===d&&(d=50);this._pool=new m(Array,!1,function(a){return a.length=0},d,a)}a.prototype.acquire=function(){return this._pool.acquire()};a.prototype.copy=function(a){var d=this.acquire();a.unshift(0,0);h.apply(d,a);a.splice(0,2);return d};a.prototype.release=function(a){this._pool.release(a)};a.acquire=function(){return e.acquire()};a.copy=function(a){return e.copy(a)};a.release=function(a){return e.release(a)};return a}();var e=new a(100);return a})},"esri/core/ObjectPool":function(){define(["require",
"exports"],function(a,f){var m=function(){return function(){}}();return function(){function a(a,f,h,d,c){void 0===d&&(d=1);void 0===c&&(c=0);this.classConstructor=a;this.acquireFunctionOrWithConstructor=f;this.releaseFunction=h;this.growthSize=d;!0===f?this.acquireFunction=this._constructorAcquireFunction:"function"===typeof f&&(this.acquireFunction=f);this._pool=Array(c);this._set=new Set;this._initialSize=c;for(a=0;a<c;a++)this._pool[a]=new this.classConstructor;this.growthSize=Math.max(d,1)}a.prototype.acquire=
function(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];f=this.classConstructor||m;if(0===this._pool.length)for(var h=this.growthSize,d=0;d<h;d++)this._pool[d]=new f;f=this._pool.shift();this.acquireFunction?this.acquireFunction.apply(this,[f].concat(a)):f&&f.acquire&&"function"===typeof f.acquire&&f.acquire.apply(f,a);this._set.delete(f);return f};a.prototype.release=function(a){a&&!this._set.has(a)&&(this.releaseFunction?this.releaseFunction(a):a&&a.release&&"function"===typeof a.release&&
a.release(),this._pool.push(a),this._set.add(a))};a.prototype.prune=function(){if(!(this._pool.length<=this._initialSize))for(var a;this._initialSize>this._pool.length;)a=this._pool.shift(),this._set.delete(a),a.dispose&&"function"===typeof a.dispose&&a.dispose()};a.prototype._constructorAcquireFunction=function(a){for(var e=[],f=1;f<arguments.length;f++)e[f-1]=arguments[f];(d=this.classConstructor).call.apply(d,[a].concat(e));var d};return a}()})},"esri/core/nextTick":function(){define(["require",
"exports"],function(a,f){function m(){if(h.postMessage&&!h.importScripts){var a=h.onmessage,e=!0;h.onmessage=function(){e=!1};h.postMessage("","*");h.onmessage=a;return e}return!1}var h=function(){return this}(),e=h.MutationObserver||h.WebKitMutationObserver;return function(){var a;if(h.process&&h.process.nextTick)a=function(b){h.process.nextTick(b)};else if(h.Promise)a=function(b){h.Promise.resolve().then(b)};else if(e){var f=[],d=document.createElement("div");(new e(function(){for(;0<f.length;)f.shift()()})).observe(d,
{attributes:!0});a=function(b){f.push(b);d.setAttribute("queueStatus","1")}}else if(m()){var c=[];h.addEventListener("message",function(b){if(b.source===h&&"esri-nexttick-message"===b.data)for(b.stopPropagation();c.length;)c.shift()()},!0);a=function(b){c.push(b);h.postMessage("esri-nexttick-message","*")}}else a=h.setImmediate?function(b){return h.setImmediate(b)}:function(b){return h.setTimeout(b,0)};return a}()})},"esri/core/requestAnimationFrame":function(){define(["require","exports","./global",
"dojo/sniff","./now"],function(a,f,m,h,e){a=h("ff");f=h("ie");var l=h("webkit");h=h("opera");var n=e(),d=m.requestAnimationFrame;d||(d=m[(l&&"webkit"||a&&"moz"||h&&"o"||f&&"ms")+"RequestAnimationFrame"])||(d=function(a){var b=e(),c=Math.max(0,16-(b-n)),d=m.setTimeout(function(){a(e())},c);n=b+c;return d});return d})},"esri/core/global":function(){define(["require","exports"],function(a,f){return"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{}})},
"esri/core/now":function(){define(["require","exports","./global"],function(a,f,m){return function(){var a=m.performance||{};if(a.now)return function(){return a.now()};if(a.webkitNow)return function(){return a.webkitNow()};if(a.mozNow)return function(){return a.mozNow()};if(a.msNow)return function(){return a.msNow()};if(a.oNow)return function(){return a.oNow()};var e;e=a.timing&&a.timing.navigationStart?a.timing.navigationStart:Date.now();return function(){return Date.now()-e}}()})},"esri/core/CollectionFlattener":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./accessorSupport/decorators ./Collection ./HandleRegistry".split(" "),
function(a,f,m,h,e,l,n){a=function(a){function c(b){b=a.call(this)||this;b._handles=new n;b.root=null;b.refresh=b.refresh.bind(b);b.updateCollections=b.updateCollections.bind(b);return b}m(c,a);c.prototype.initialize=function(){var b=this;this._handles.add(this.rootCollectionNames.map(function(a){return b.watch("root."+a,b.updateCollections,!0)}));this.updateCollections()};c.prototype.destroy=function(){this.root=null;this.refresh();this._handles.destroy();this._handles=null};c.prototype.updateCollections=
function(){var b=this;this._collections=this.rootCollectionNames.map(function(a){return b.get("root."+a)}).filter(function(b){return null!=b});this.refresh()};c.prototype.refresh=function(){var b=this._handles;b.remove("collections");this.removeAll();for(var a=this._collections.slice(),c=0,d=this._collections;c<d.length;c++)this._processCollection(a,this,d[c]);for(c=0;c<a.length;c++)b.add(a[c].on("after-changes",this.refresh),"collections")};c.prototype._createNewInstance=function(b){return new l(b)};
c.prototype._processCollection=function(b,a,c){var d=this;c&&(b.push(c),c.forEach(function(c){c&&(a.push(c),d._processCollection(b,a,d.getChildrenFunction(c)))}))};return c}(e.declared(l));h([e.property()],a.prototype,"rootCollectionNames",void 0);h([e.property()],a.prototype,"root",void 0);h([e.property()],a.prototype,"getChildrenFunction",void 0);return a=h([e.subclass("esri.core.CollectionFlattener")],a)})},"esri/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/cast ./decorators/declared ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),
function(a,f,m,h,e,l,n,d,c,b){function k(b){for(var a in b)f.hasOwnProperty(a)||(f[a]=b[a])}Object.defineProperty(f,"__esModule",{value:!0});k(m);k(h);k(e);k(l);k(n);k(d);k(c);k(b)})},"esri/core/accessorSupport/decorators/aliasOf":function(){define(["require","exports","../metadata"],function(a,f,m){Object.defineProperty(f,"__esModule",{value:!0});f.aliasOf=function(a){return function(e,f){m.getPropertyMetadata(e,f).aliasOf=a}}})},"esri/core/accessorSupport/decorators/declared":function(){define(["require",
"exports"],function(a,f){Object.defineProperty(f,"__esModule",{value:!0});f.declared=function(a){for(var f=[],e=1;e<arguments.length;e++)f[e-1]=arguments[e];e=function(){return this||{}};e.__bases__=[a].concat(f);return e}})},"esri/core/accessorSupport/decorators/property":function(){define(["require","exports","dojo/has","../../lang","../metadata"],function(a,f,m,h,e){Object.defineProperty(f,"__esModule",{value:!0});f.property=function(a){void 0===a&&(a={});return function(f,d){var c=f.constructor.prototype;
if(c!==Function.prototype){(f=Object.getOwnPropertyDescriptor(f,d))&&(f.get||f.set)&&(a=h.clone(a),f.set&&(a.set=f.set),f.get&&(a.get=f.get));d=e.getPropertyMetadata(c,d);for(var b in a)c=a[b],Array.isArray(c)?d[b]=(d[b]||[]).concat(c):d[b]=c}}};f.propertyJSONMeta=function(a,f,d){a=e.getPropertyMetadata(a.constructor.prototype,d);a.json||(a.json={});a=a.json;void 0!==f&&(a.origins||(a.origins={}),a.origins[f]||(a.origins[f]={}),a=a.origins[f]);return a}})},"esri/core/accessorSupport/decorators/reader":function(){define(["require",
"exports","dojo/_base/lang","./property"],function(a,f,m,h){Object.defineProperty(f,"__esModule",{value:!0});f.reader=function(a,f,n){var d,c;void 0===f||Array.isArray(f)?(c=a,n=f,d=[void 0]):(c=f,d=Array.isArray(a)?a:[a]);return function(b,a,e){var k=b.constructor.prototype;d.forEach(function(d){d=h.propertyJSONMeta(b,d,c);d.read&&"object"!==typeof d.read&&(d.read={});m.setObject("read.reader",k[a],d);n&&(d.read.source=(d.read.source||[]).concat(n))})}}})},"esri/core/accessorSupport/decorators/shared":function(){define(["require",
"exports"],function(a,f){Object.defineProperty(f,"__esModule",{value:!0});f.shared=function(a){return function(f,e){f[e]=a}}})},"esri/core/accessorSupport/decorators/subclass":function(){define(["require","exports","../../declare","../metadata"],function(a,f,m,h){function e(b,a){b.read&&("function"===typeof b.read?a.push(b.read):"object"===typeof b.read&&b.read.reader&&a.push(b.read.reader))}function l(b,a){b.write&&("function"===typeof b.write?a.push(b.write):"object"===typeof b.write&&b.write.writer&&
a.push(b.write.writer))}function n(b){var a=[];b=h.getPropertiesMetadata(b.prototype);if(!b)return a;for(var c in b){var d=b[c];d.cast&&a.push(d.cast);d.copy&&a.push(d.copy);if(d=d.json)if(e(d,a),l(d,a),d=d.origins)for(var f in d){var n=d[f];e(n,a);l(n,a)}}return a}function d(a){var b={},c=["__bases__"],d=h.getPropertiesMetadata(a.prototype),e=n(a);Object.getOwnPropertyNames(a.prototype).filter(function(b){return-1!==c.indexOf(b)||d&&d.hasOwnProperty(b)||-1!==e.indexOf(a.prototype[b])?!1:!0}).forEach(function(c){b[c]=
a.prototype[c]});return b}function c(a){var b=Object.getOwnPropertyNames(a),c=Object.getPrototypeOf(a.prototype).constructor,d=Object.getOwnPropertyNames(Function);d.push("__bases__");var e=Object.getOwnPropertyNames(c),f={};b.filter(function(b){return-1!==d.indexOf(b)?!1:-1===e.indexOf(b)||c[b]!==a[b]?!0:!1}).forEach(function(b){f[b]=a[b]});return f}Object.defineProperty(f,"__esModule",{value:!0});f.subclass=function(a){return function(b){var k=d(b),e=c(b);null!=a&&(k.declaredClass=a);b=m(b.__bases__,
k);for(var f in e)b[f]=e[f];return b}}})},"esri/core/accessorSupport/decorators/writer":function(){define(["require","exports","dojo/_base/lang","./property"],function(a,f,m,h){Object.defineProperty(f,"__esModule",{value:!0});f.writer=function(a,f){var e;void 0===f?(f=a,e=[void 0]):e=Array.isArray(a)?a:[a];return function(a,c,b){var d=a.constructor.prototype;e.forEach(function(b){b=h.propertyJSONMeta(a,b,f);b.write&&"object"!==typeof b.write&&(b.write={});m.setObject("write.writer",d[c],b)})}}})},
"esri/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper dojo/aspect ./accessorSupport/decorators ./accessorSupport/ensureType ./Accessor ./ArrayPool ./Evented ./ObjectPool ./Scheduler ./lang".split(" "),function(a,f,m,h,e,l,n,d,c,b,k,q,u){function x(a){return a?a.isInstanceOf&&a.isInstanceOf(B)?!0:!1:!1}function w(a){return a?x(a)?a.toArray():a.length?Array.prototype.slice.apply(a):[]:[]}function t(a){if(a&&a.length)return a[0]}function p(a,
b,g,c){b&&b.forEach(function(b,d,k){a.push(b);p(a,g.call(c,b,d,k),g,c)})}(function(){return function(){}})();a=function(){function a(){this.target=null;this.defaultPrevented=this.cancellable=!1}a.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};a.prototype.reset=function(a){this.defaultPrevented=!1;this.item=a};return a}();var v=function(){},g=new k(a,!0,function(a){a.item=null;a.target=null}),r=new Set,z=new Set,y=new Set,A=new Map,F=0,B=E=function(a){function b(b){b=
a.call(this,b)||this;b._boundDispatch=b._dispatchColChange.bind(b);b._chgListeners=[];b._notifications=null;b._timer=null;b.length=0;b._items=[];Object.defineProperty(b,"uid",{value:F++});return b}m(b,a);b.ofType=function(b){if(!b)return E;if(A.has(b))return A.get(b);var a=E.createSubclass({declaredClass:"esri.core.Collection\x3c"+b.prototype.declaredClass+"\x3e"});Object.defineProperty(a.prototype,"itemType",{value:b});A.set(b,a);return a};b.prototype.normalizeCtorArgs=function(b){return b?Array.isArray(b)||
x(b)?{items:b}:b:{}};Object.defineProperty(b.prototype,"items",{get:function(){return this._items},set:function(b){this._emitBeforeChanges()||(this._splice.apply(this,[0,this.length].concat(w(b))),this._emitAfterChanges())},enumerable:!0,configurable:!0});b.prototype.on=function(b,a){var g;Array.isArray(b)?g=b:-1<b.indexOf(",")&&(g=b.split(/\s*,\s*/));if(g){var c=[];for(b=0;b<g.length;b++)c.push(this.on(g[b],a));c.remove=function(){for(var b=0;b<c.length;b++)c[b].remove()};return c}if("change"===
b){var d=this._chgListeners,k={removed:!1,callback:a};d.push(k);this._notifications&&this._notifications.push({listeners:d.slice(),items:this._items.slice(),changes:[]});return{remove:function(){this.remove=v;k.removed=!0;d.splice(d.indexOf(k),1)}}}return e.after(this,"on"+b,a,!0)};b.prototype.hasEventListener=function(b){return"change"===b?0<this._chgListeners.length:this.inherited(arguments)};b.prototype.add=function(b,a){if(this._emitBeforeChanges())return this;a=this.getNextIndex(a);this._splice(a,
0,b);this._emitAfterChanges();return this};b.prototype.addMany=function(b,a){void 0===a&&(a=this._items.length);if(this._emitBeforeChanges())return this;a=this.getNextIndex(a);this._splice.apply(this,[a,0].concat(w(b)));this._emitAfterChanges();return this};b.prototype.removeAll=function(){if(!this.length||this._emitBeforeChanges())return[];var b=this._splice(0,this.length)||[];this._emitAfterChanges();return b};b.prototype.clone=function(){return this._createNewInstance({items:this._items.map(u.clone)})};
b.prototype.concat=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];b=b.map(w);return this._createNewInstance({items:(g=this._items).concat.apply(g,b)});var g};b.prototype.drain=function(b,a){if(this.length&&!this._emitBeforeChanges()){for(var g=this._splice(0,this.length),c=g.length,d=0;d<c;d++)b.call(a,g[d],d,g);this._emitAfterChanges()}};b.prototype.every=function(b,a){return this._items.every(b,a)};b.prototype.filter=function(b,a){var g;g=2===arguments.length?this._items.filter(b,
a):this._items.filter(b);return this._createNewInstance({items:g})};b.prototype.find=function(b,a){if("function"!==typeof b)throw new TypeError(b+" is not a function");for(var g=this._items,c=g.length,d=0;d<c;d++){var k=g[d];if(b.call(a,k,d,g))return k}};b.prototype.findIndex=function(b,a){if("function"!==typeof b)throw new TypeError(b+" is not a function");for(var g=this._items,c=g.length,d=0;d<c;d++)if(b.call(a,g[d],d,g))return d;return-1};b.prototype.flatten=function(b,a){var g=[];p(g,this,b,a);
return new E(g)};b.prototype.forEach=function(b,a){for(var g=this._items,c=g.length,d=0;d<c;d++)b.call(a,g[d],d,g)};b.prototype.getItemAt=function(b){return this._items[b]};b.prototype.getNextIndex=function(b){var a=this.length;b=null==b?a:b;0>b?b=0:b>a&&(b=a);return b};b.prototype.includes=function(b,a){void 0===a&&(a=0);return arguments.length?-1!==this._items.indexOf(b,a):!1};b.prototype.indexOf=function(b,a){void 0===a&&(a=0);return this._items.indexOf(b,a)};b.prototype.join=function(b){void 0===
b&&(b=",");return this._items.join(b)};b.prototype.lastIndexOf=function(b,a){void 0===a&&(a=this.length-1);return this._items.lastIndexOf(b,a)};b.prototype.map=function(b,a){b=this._items.map(b,a);return new E({items:b})};b.prototype.reorder=function(b,a){void 0===a&&(a=this.length-1);var g=this.indexOf(b);if(-1!==g){0>a?a=0:a>=this.length&&(a=this.length-1);if(g!==a){if(this._emitBeforeChanges())return b;this._splice(g,1);this._splice(a,0,b);this._emitAfterChanges()}return b}};b.prototype.pop=function(){if(this.length&&
!this._emitBeforeChanges()){var b=t(this._splice(this.length-1,1));this._emitAfterChanges();return b}};b.prototype.push=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[this.length,0].concat(b));this._emitAfterChanges();return this.length};b.prototype.reduce=function(b,a){var g=this._items;return 2===arguments.length?g.reduce(b,a):g.reduce(b)};b.prototype.reduceRight=function(b,a){var g=this._items;return 2===
arguments.length?g.reduceRight(b,a):g.reduceRight(b)};b.prototype.remove=function(b){return this.removeAt(this.indexOf(b))};b.prototype.removeAt=function(b){if(!(0>b||b>=this.length||this._emitBeforeChanges()))return b=t(this._splice(b,1)),this._emitAfterChanges(),b};b.prototype.removeMany=function(b){if(!b||!b.length||this._emitBeforeChanges())return[];b=x(b)?b.toArray():b;for(var a=this._items,g=[],c=b.length,d=0;d<c;d++){var k=a.indexOf(b[d]);if(-1<k){for(var p=d+1,e=k+1,r=Math.min(b.length-p,
a.length-e),f=0;f<r&&b[p+f]===a[e+f];)f++;p=1+f;(k=this._splice(k,p))&&0<k.length&&g.push.apply(g,k);d+=p-1}}this._emitAfterChanges();return g};b.prototype.reverse=function(){if(this._emitBeforeChanges())return this;var b=this._splice(0,this.length);b&&(b.reverse(),this._splice.apply(this,[0,0].concat(b)));this._emitAfterChanges();return this};b.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges()){var b=t(this._splice(0,1));this._emitAfterChanges();return b}};b.prototype.slice=function(b,
a){void 0===b&&(b=0);void 0===a&&(a=this.length);return this._createNewInstance({items:this._items.slice(b,a)})};b.prototype.some=function(b,a){return this._items.some(b,a)};b.prototype.sort=function(b){if(!this.length||this._emitBeforeChanges())return this;var a=this._splice(0,this.length);arguments.length?a.sort(b):a.sort();this._splice.apply(this,[0,0].concat(a));return this};b.prototype.splice=function(b,a){for(var g=[],c=2;c<arguments.length;c++)g[c-2]=arguments[c];if(this._emitBeforeChanges())return[];
g=this._splice.apply(this,[b,a].concat(g))||[];this._emitAfterChanges();return g};b.prototype.toArray=function(){return this._items.slice()};b.prototype.toJSON=function(){return this.toArray()};b.prototype.toLocaleString=function(){return this._items.toLocaleString()};b.prototype.toString=function(){return this._items.toString()};b.prototype.unshift=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[0,0].concat(b));
this._emitAfterChanges();return this.length};b.prototype._createNewInstance=function(b){return new this.constructor(b)};b.prototype._splice=function(b,a){for(var c=this,d=[],k=2;k<arguments.length;k++)d[k-2]=arguments[k];var p=this._items,e=this.constructor.prototype.itemType,r,f;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=q.schedule(this._boundDispatch));
if(a){f=p.splice(b,a);if(this.hasEventListener("before-remove")){k=g.acquire();k.target=this;k.cancellable=!0;for(var l=0,h=f.length;l<h;l++)r=f[l],k.reset(r),this.emit("before-remove",k),k.defaultPrevented&&(f.splice(l,1),p.splice(b,0,r),b+=1,--l,--h);g.release(k)}this.length=this._items.length;if(this.hasEventListener("after-remove")){k=g.acquire();k.target=this;k.cancellable=!1;h=f.length;for(l=0;l<h;l++)k.reset(f[l]),this.emit("after-remove",k);g.release(k)}this._notifyChangeEvent(null,f)}if(d&&
d.length){e&&(d=d.map(n.ensureType.bind(null,e)));if(this.hasEventListener("before-add")){var v=g.acquire();v.target=this;v.cancellable=!0;d=d.filter(function(b){v.reset(b);c.emit("before-add",v);return!v.defaultPrevented});g.release(v)}p.splice.apply(p,[b,0].concat(d));this.length=this._items.length;if(this.hasEventListener("after-add")){k=g.acquire();k.target=this;k.cancellable=!1;p=0;for(e=d;p<e.length;p++)r=e[p],k.reset(r),this.emit("after-add",k);g.release(k)}this._notifyChangeEvent(d,null)}return f};
b.prototype._emitBeforeChanges=function(){var b=!1;if(this.hasEventListener("before-changes")){var a=g.acquire();a.target=this;a.cancellable=!0;this.emit("before-changes",a);b=a.defaultPrevented;g.release(a)}return b};b.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var b=g.acquire();b.target=this;b.cancellable=!1;this.emit("after-changes",b);g.release(b)}};b.prototype._notifyChangeEvent=function(b,a){this.hasEventListener("change")&&this._notifications[this._notifications.length-
1].changes.push({added:b,removed:a})};b.prototype._dispatchColChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var b=this._notifications;this._notifications=null;for(var a=function(b){var a=b.changes;r.clear();z.clear();y.clear();for(var d=0;d<a.length;d++){var k=a[d],p=k.added,k=k.removed;if(p)if(0===y.size&&0===z.size)for(var e=0,f=p;e<f.length;e++)p=f[e],r.add(p);else for(e=0,f=p;e<f.length;e++)p=f[e],z.has(p)?(y.add(p),z.delete(p)):y.has(p)||r.add(p);
if(k)if(0===y.size&&0===r.size)for(e=0;e<k.length;e++)p=k[e],z.add(p);else for(e=0;e<k.length;e++)p=k[e],r.has(p)?r.delete(p):(y.delete(p),z.add(p))}var l=c.acquire();r.forEach(function(b){l.push(b)});var h=c.acquire();z.forEach(function(b){h.push(b)});var q=g._items,n=b.items,v=c.acquire();y.forEach(function(b){n.indexOf(b)!==q.indexOf(b)&&v.push(b)});if(b.listeners&&(l.length||h.length||v.length))for(a={target:g,added:l,removed:h,moved:v},d=b.listeners.length,p=0;p<d;p++)k=b.listeners[p],k.removed||
k.callback.call(g,a);c.release(l);c.release(h);c.release(v)},g=this,d=0;d<b.length;d++)a(b[d]);r.clear();z.clear();y.clear()}};return b}(l.declared(d,b));B.isCollection=x;h([l.property()],B.prototype,"length",void 0);h([l.property()],B.prototype,"items",null);var B=E=h([l.subclass("esri.core.Collection")],B),E;return B})},"esri/core/Evented":function(){define(["./declare","dojo/Evented"],function(a,f){return a(f,{declaredClass:"esri.core.Evented",hasEventListener:function(a){a="on"+a;return!(!this[a]||
!this[a].after)},emit:function(a,f){if(this.hasEventListener(a))return f=f||{},f.target||(f.target=this),this.inherited(arguments,[a,f])}})})},"esri/core/HandleRegistry":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./accessorSupport/decorators".split(" "),function(a,f,m,h,e,l){a=function(a){function d(){var c=a.call(this)||this;c._groups=null;c._groups={};return c}m(d,a);d.prototype.destroy=function(){this.removeAll();this._groups=
null};Object.defineProperty(d.prototype,"size",{get:function(){var a=0,b=this._groups,d;for(d in b)a+=b[d].length;return a},enumerable:!0,configurable:!0});d.prototype.add=function(a,b){if(!this._isHandle(a)&&!Array.isArray(a))return this;b=this._getOrCreateGroup(b);if(Array.isArray(a))for(var c=0;c<a.length;c++)b.push(a[c]);else b.push(a);this.notifyChange("size");return this};d.prototype.has=function(a){a=this._groups[a];return!!a&&0<a.length};d.prototype.remove=function(a){if(Array.isArray(a))a.forEach(this.remove.bind(this));
else{a=this._getGroup(a);if(!a)return this;for(var b=0;b<a.length;b++)a[b].remove();a.length=0;this.notifyChange("size")}return this};d.prototype.removeAll=function(){var a=this._groups,b;for(b in a)this.remove(b),delete a[b];return this};d.prototype._isHandle=function(a){return a&&!!a.remove};d.prototype._getOrCreateGroup=function(a){return this._getGroup(a)||(this._groups[this._ensureGroupName(a)]=[])};d.prototype._getGroup=function(a){return this._groups[this._ensureGroupName(a)]};d.prototype._ensureGroupName=
function(a){return a||"_default_"};return d}(l.declared(e));h([l.property({readOnly:!0})],a.prototype,"size",null);return a=h([l.subclass()],a)})},"esri/support/LayersMixin":function(){define(["../core/Accessor","../core/Collection","../core/Logger"],function(a,f,m){var h=function(a,e){for(var d,c=0,b=a.length;c<b;c++)if(d=a.getItemAt(c),d.id===e||d.layers&&(d=h(d.layers,e)))return d},e=m.getLogger("esri.Map");return a.createSubclass({declaredClass:"esri.support.LayersMixin",destroy:function(){this._layersHandle.remove();
this._layersHandle=null;this.layers.drain(this._lyrRemove,this)},properties:{layers:{type:f,get:function(){var a=this._get("layers");if(a)return a;a=new f;a.on("after-add",function(a){a=a.item;a.parent&&a.parent!==this&&a.parent.remove(a);a.parent=this;this.layerAdded(a);"elevation"===a.type&&e.error("Layer '"+a.title+", id:"+a.id+"' of type '"+a.type+"' is not supported as an operational layer and will therefore be ignored.")}.bind(this));a.on("after-remove",function(a){a=a.item;a.parent=null;this.layerRemoved(a)}.bind(this));
return a},set:function(a){var e=this._get("layers");e&&this.remove(e.toArray());this.addMany(a.toArray())}}},findLayerById:function(a){return h(this.layers,a)},add:function(a,e){var d=this.layers;e=d.getNextIndex(e);a.parent===this?this.reorder(a,e):d.add(a,e)},addMany:function(a,e){var d=this.layers;e=d.getNextIndex(e);a.slice().forEach(function(a){a.parent===this?this.reorder(a,e):(d.add(a,e),e+=1)},this)},remove:function(a){return this.layers.remove(a)},removeMany:function(a){return this.layers.removeMany(a)},
removeAll:function(){return this.layers.removeAll()},reorder:function(a,e){return this.layers.reorder(a,e)},layerAdded:function(a){},layerRemoved:function(a){}})})},"esri/Ground":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/accessorSupport/decorators ./core/Accessor ./core/Collection ./core/collectionUtils ./core/Logger ./core/requireUtils ./layers/Layer ./layers/support/types".split(" "),function(a,f,m,h,e,l,n,d,c,b,k,q){var u=n.ofType(k),
x=c.getLogger("esri.Ground");f=w=function(c){function k(b){b=c.call(this)||this;b.layers=new u;b.layers.on("after-add",function(b){b=b.item;q.isOfType(b,["elevation","base-elevation"])||x.error("Layer '"+b.title+", id:"+b.id+"' of type '"+b.type+"' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.")});return b}m(k,c);Object.defineProperty(k.prototype,"layers",{set:function(b){this._set("layers",d.referenceSetter(b,this._get("layers"),
u))},enumerable:!0,configurable:!0});k.prototype.queryElevation=function(c,g){var d=this;return b.when(a,"./layers/support/ElevationQuery").then(function(b){b=new b.ElevationQuery;var a=d.layers.filter(function(b){return"elevation"===b.type}).toArray();return b.queryAll(a,c,g)})};k.prototype.clone=function(){return new w({layers:this.layers.slice()})};return k}(e.declared(l));h([e.property({type:u}),e.cast(d.castForReferenceSetter)],f.prototype,"layers",null);f=w=h([e.subclass("esri.Ground")],f);
var w;return f})},"esri/core/collectionUtils":function(){define(["require","exports","./Collection"],function(a,f,m){Object.defineProperty(f,"__esModule",{value:!0});f.referenceSetter=function(a,e,f){void 0===f&&(f=m);e||(e=new f);e.removeAll();a&&(Array.isArray(a)||a.isInstanceOf&&a.isInstanceOf(m))?e.addMany(a):e.add(a);return e};f.castForReferenceSetter=function(a){return a}})},"esri/core/requireUtils":function(){define(["require","exports","dojo/Deferred"],function(a,f,m){function h(a,f){if(Array.isArray(f)){var e=
new m;a(f,function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];e.resolve(a)});return e.promise}return h(a,[f]).then(function(a){return a[0]})}Object.defineProperty(f,"__esModule",{value:!0});f.when=h;f.getAbsMid=function(a,f,h){return f.toAbsMid?f.toAbsMid(a):h.id.replace(/\/[^\/]*$/ig,"/")+a}})},"esri/layers/Layer":function(){define("require dojo/Deferred ../core/Accessor ../core/Error ../core/Evented ../core/Identifiable ../core/Loadable ../core/urlUtils ../core/requireUtils ../core/promiseUtils ../core/Logger ../config ../kernel ../request ../geometry/SpatialReference ../geometry/Extent".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t){var p=0,v=k.getLogger("esri.layers.Layer");m=m.createSubclass([e,l,n],{declaredClass:"esri.layers.Layer",properties:{attributionDataUrl:null,credential:{value:null,readOnly:!0,dependsOn:["loaded","parsedUrl"],get:function(){var b=this.loaded&&this.parsedUrl&&u.id&&u.id.findCredential(this.parsedUrl.path)||null;b&&b.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));return b}},fullExtent:new t(-180,-90,180,90,w.WGS84),hasAttributionData:{readOnly:!0,dependsOn:["attributionDataUrl"],
get:function(){return null!=this.attributionDataUrl}},id:{get:function(){return Date.now().toString(16)+"-layer-"+p++}},legendEnabled:!0,listMode:"show",opacity:{value:1,type:Number,cast:function(b){return 0>b?0:1<b?1:b}},parsedUrl:{readOnly:!0,dependsOn:["url"],get:function(){var b=this._get("url");return b?d.urlToObject(b):null}},popupEnabled:!0,refreshInterval:0,attributionVisible:!0,spatialReference:w.WGS84,title:null,token:{dependsOn:["credential.token"],get:function(){var b=this.get("parsedUrl.query.token"),
a=this.get("credential.token");return b||a||null},set:function(b){b?this._override("token",b):this._clearOverride("token")}},type:{type:String,readOnly:!0,value:null,json:{read:!1}},url:{value:null},visible:!0},initialize:function(){this.otherwise(function(b){k.getLogger(this.declaredClass).error("#load()","Failed to load layer (title: '"+this.title+"', id: '"+this.id+"')",b)})},createLayerView:function(g){var d=this.viewModulePaths[g.type];return d?c.when(a,d).then(function(b){b.default&&(b=b.default);
return new b({layer:this,view:g})}.bind(this)):b.reject(new h("layerview:module-unavailable","No LayerView module available for layer '${layer.declaredClass}' and view type: '${view.type}'",{view:g,layer:this}))},destroyLayerView:function(b){b.destroy()},fetchAttributionData:function(){var b=this.attributionDataUrl;this.hasAttributionData&&b?b=x(b,{query:{f:"json"},responseType:"json"}).then(function(b){return b.data}):(b=new f,b.reject(new h("layer:no-attribution-data","Layer does not have attribution data")),
b=b.promise);return b},refresh:function(){this.emit("refresh")}});m.fromArcGISServerUrl=function(b){"string"===typeof b&&(b={url:b});var g=c.when(a,"./support/arcgisLayers").then(function(a){return a.fromUrl(b)});g.otherwise(function(a){v.error("#fromArcGISServerUrl({ url: '"+b.url+"'})","Failed to create layer from arcgis server url",a)});return g};m.fromPortalItem=function(b){!b||b.portalItem||"object"!==typeof b||b.declaredClass&&"esri.portal.PortalItem"!==b.declaredClass||(b={portalItem:b});var g=
c.when(a,"../portal/support/portalLayers").then(function(a){return a.fromItem(b)});g.otherwise(function(a){var g=b&&b.portalItem;v.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+(g&&g.portal&&g.portal.url||q.portalUrl)+"', id: '"+(g&&g.id||"unset")+"')",a)});return g};return m})},"esri/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./Message"],function(a,f,m,h){a=function(a){function e(f,d,c){var b=a.call(this,f,d,c)||this;return b instanceof
e?b:new e(f,d,c)}m(e,a);return e}(h);a.prototype.type="error";return a})},"esri/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,m){a.__proto__=m}||function(a,m){for(var f in m)m.hasOwnProperty(f)&&(a[f]=m[f])};return function(f,m){function h(){this.constructor=f}a(f,m);f.prototype=null===m?Object.create(m):(h.prototype=m.prototype,new h)}}()})},"esri/core/Message":function(){define(["require","exports",
"dojo/string"],function(a,f,m){return function(){function a(e,f,h){this instanceof a&&(this.name=e,this.message=f&&m.substitute(f,h,function(a){return null==a?"":a})||"",this.details=h)}a.prototype.toString=function(){return"["+this.name+"]: "+this.message};return a}()})},"esri/core/Identifiable":function(){define(["./declare"],function(a){var f=0;return a(null,{constructor:function(){Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+f++})}})})},
"esri/core/Loadable":function(){define("./Promise ./Accessor ./Error ./Warning dojo/aspect dojo/_base/lang dojo/Deferred".split(" "),function(a,f,m,h,e,l,n){return a.createSubclass([f],{declaredClass:"esri.core.Loadable","-chains-":l.mixin(f._meta.chains,{load:"after"}),constructor:function(){this._set("loadWarnings",[]);var a=new n;this.addResolvingPromise(a.promise);e.around(this,"load",function(c){return function(){"not-loaded"===this.loadStatus&&(this.loadStatus="loading",c.apply(this),a.resolve(),
a=null);return this}});this.then(function(a){this.loadStatus="loaded"}.bind(this),function(a){this.loadStatus="failed";this.loadError=a}.bind(this))},properties:{loaded:{readOnly:!0,dependsOn:["loadStatus"],get:function(){return"loaded"===this.loadStatus}},loadError:null,loadStatus:"not-loaded",loadWarnings:{type:[h],readOnly:!0}},load:function(){},cancelLoad:function(){if(this.isFulfilled())return this;this.loadError=new m("load:cancelled","Cancelled");this._promiseProps.cancel(this.loadError);return this}})})},
"esri/core/Promise":function(){define("./declare dojo/promise/all dojo/aspect dojo/Deferred dojo/errors/create ./Scheduler".split(" "),function(a,f,m,h,e,l){var n=function(b){if(!b.isFulfilled()){var a=b._promiseProps,c=a.resolvingPromises,d,k;a.allPromise&&a.allPromise.cancel();var e=new h;for(d=c.length-1;0<=d;d--)k=c[d],k.isCanceled&&k.isCanceled()?c.splice(d,1):k.then(null,null,a.resolver.progress);k=null;(a.allPromise=f(c.concat([e.promise]))).then(function(){a.resolver.resolve(b);b=a=e=a.allPromise=
a.resolvingPromises=null},function(c){a.allPromise=null;if(!c||"cancel"!==c.dojoType){var d=Array.prototype.slice.call(arguments,0);a.resolver.reject(d[0]);b=a=e=a.allPromise=a.resolvingPromises=null}});e&&l.schedule(function(){e&&e.resolve()})}},d=e("CancelError",null,function(b){this.target=b}),c=function(b){return b||new d(this.instance)},b=function(b){this.instance=b;this.canceler=c.bind(this);this.resolver=new h;this.initialized=!1;this.resolvingPromises=[]};b.prototype={canceler:null,cancel:function(b){if(!this.resolver.isFulfilled()){this.allPromise.cancel();
for(var a=this.resolvingPromises.concat(),c=a.length-1;0<=c;c--)a[c].cancel(b);this.resolver.cancel(b)}}};return a(null,{declaredClass:"esri.core.Promise",constructor:function(){Object.defineProperty(this,"_promiseProps",{value:new b(this),enumerable:!1,configurable:!1,writable:!0});var a=m.after(this,"postscript",function(b,c){a.remove();a=null;n(this)},!0)},_promiseProps:null,always:function(b){return this.then(b,b)},then:function(b,a,c){var d=new h(this._promiseProps.canceler);b=d.then(b,a,c);
this._promiseProps.resolver.then(d.resolve,d.reject,d.progress);return b},isResolved:function(){return this._promiseProps.resolver.isResolved()},isRejected:function(){return this._promiseProps.resolver.isRejected()},isFulfilled:function(){return this._promiseProps.resolver.isFulfilled()},otherwise:function(b){return this.then(null,b)},addResolvingPromise:function(b){b&&!this.isFulfilled()&&(this._promiseProps.resolvingPromises.push(b),n(this))}})})},"dojo/promise/all":function(){define(["../_base/array",
"../Deferred","../when"],function(a,f,m){var h=a.some;return function(a){var e,n;a instanceof Array?n=a:a&&"object"===typeof a&&(e=a);var d,c=[];if(e){n=[];for(var b in e)Object.hasOwnProperty.call(e,b)&&(c.push(b),n.push(e[b]));d={}}else n&&(d=[]);if(!n||!n.length)return(new f).resolve(d);var k=new f;k.promise.always(function(){d=c=null});var q=n.length;h(n,function(b,a){e||c.push(a);m(b,function(b){k.isFulfilled()||(d[c[a]]=b,0===--q&&k.resolve(d))},k.reject);return k.isFulfilled()});return k.promise}})},
"esri/core/Warning":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","./Message"],function(a,f,m,h,e){a=function(a){function e(d,c,b){var k=a.call(this,d,c,b)||this;return k instanceof e?k:new e(d,c,b)}m(e,a);return e}(e);a.prototype.type="warning";return a})},"esri/core/urlUtils":function(){define("require exports dojo/_base/window dojo/_base/lang dojo/_base/url dojo/io-query ../config ./lang ./sniff ./Logger ./Error".split(" "),function(a,f,m,h,e,l,
n,d,c,b,k){function q(b){var a={path:null,query:null},g=new e(b),c=b.indexOf("?");null===g.query?a.path=b:(a.path=b.substring(0,c),a.query=l.queryToObject(g.query));g.fragment&&(a.hash=g.fragment,null===g.query&&(a.path=a.path.substring(0,a.path.length-(g.fragment.length+1))));return a}function u(b,a){void 0===b&&(b=!1);void 0===a&&(a=!0);var c,d=I.proxyUrl;if("string"===typeof b){if(c=P(b),b=t(b))d=b.proxyUrl}else c=!!b;if(!d)throw ea.warn("esri/config: esriConfig.request.proxyUrl is not set. If making a request to a CORS-enabled\n server, please push the domain into esriConfig.request.corsEnabledServers."),
new k("urlutils:proxy-not-set","esri/config: esriConfig.request.proxyUrl is not set. If making a request to a CORS-enabled\n server, please push the domain into esriConfig.request.corsEnabledServers.");var p;c&&a&&"https"===f.appUrl.scheme&&(a=K(d),g(a)&&(d=a,p=1));d=q(d);d._xo=p;return d}function x(b){var a=b.indexOf("?");-1!==a?(Z.path=b.slice(0,a),Z.query=b.slice(a+1)):(Z.path=b,Z.query=null);return Z}function w(b){b=x(b).path;b&&"/"===b[b.length-1]||(b+="/");b=J(b,!0);return b=b.toLowerCase()}
function t(b){var a=I.proxyRules;b=w(b);for(var g=0;g<a.length;g++)if(0===b.indexOf(a[g].urlPrefix))return a[g]}function p(b){b=F(b);var a=b.indexOf("/sharing");return 0<a?b.substring(0,a):b.replace(/\/+$/,"")}function v(b,a,g){void 0===g&&(g=!1);b=M(b);a=M(a);return g||b.scheme===a.scheme?b.host.toLowerCase()===a.host.toLowerCase()&&b.port===a.port:!1}function g(b){return c("esri-phonegap")?!0:c("esri-cors")?null!=r(b):!1}function r(b,a){void 0===a&&(a=!1);"string"===typeof b&&(b=C(b)?M(b):f.appUrl);
for(var g=I.corsEnabledServers||[],c=0;c<g.length;c++)for(var d=g[c],k=void 0,k="string"===typeof d?z(d):d.host?z(d.host):[],p=0;p<k.length;p++)if(v(b,k[p]))return a?c:d;return a?-1:null}function z(b){f.corsServersUrlCache[b]||(U(b)||L(b)?f.corsServersUrlCache[b]=[new e(y(b))]:f.corsServersUrlCache[b]=[new e("http://"+b),new e("https://"+b)]);return f.corsServersUrlCache[b]}function y(b,a,g){void 0===a&&(a=f.appBaseUrl);if(L(b))return g&&g.preserveProtocolRelative?b:"http"===f.appUrl.scheme&&f.appUrl.authority===
E(b).slice(2)?"http:"+b:"https:"+b;if(U(b))return b;g=B;if("/"===b[0]){var c=a.indexOf("//"),c=a.indexOf("/",c+2);a=-1===c?a:a.slice(0,c)}return g(a,b)}function A(b,a,g){void 0===a&&(a=f.appBaseUrl);if(!C(b))return b;var c=F(b),d=c.toLowerCase();a=F(a).toLowerCase().replace(/\/+$/,"");if((g=g?F(g).toLowerCase().replace(/\/+$/,""):null)&&0!==a.indexOf(g))return b;for(var k=function(b,a,g){g=b.indexOf(a,g);return-1===g?b.length:g},p=k(d,"/",d.indexOf("//")+2),e=-1;d.slice(0,p+1)===a.slice(0,p)+"/";){e=
p+1;if(p===d.length)break;p=k(d,"/",p+1)}if(-1===e||g&&e<g.length)return b;b=c.slice(e);c=a.slice(e-1).replace(/[^/]+/g,"").length;if(0<c)for(d=0;d<c;d++)b="../"+b;else b="./"+b;return b}function F(b){b=b.trim();b=y(b);b="http"===f.appUrl.scheme&&P(b)&&v(f.appBaseUrl,b,!0)&&!g(b)?L(b)?"http:"+b:b.replace(aa,"http:"):b;b=R(b);return b=b.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function B(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];if(b&&b.length){a=[];if(C(b[0])){var g=b[0],
c=g.indexOf("//");a.push(g.slice(0,c+1));S.test(b[0])&&(a[0]+="/");b[0]=g.slice(c+2)}else"/"===b[0][0]&&a.push("");b=b.reduce(function(b,a){return b.concat(a.split("/"))},[]);for(g=0;g<b.length;g++)c=b[g],".."===c&&0<a.length?a.pop():!c||"."===c&&0!==a.length||a.push(c);return a.join("/")}}function E(b){if(G(b))return null;var a=b.indexOf("://");if(-1===a&&L(b))a=2;else if(-1!==a)a+=3;else return null;a=b.indexOf("/",a);return-1===a?b:b.slice(0,a)}function C(b){return L(b)||U(b)}function G(b){return"data:"===
b.slice(0,5)}function L(b){return b&&"/"===b[0]&&"/"===b[1]}function U(b){return N.test(b)}function P(b){return aa.test(b)||"https"===f.appUrl.scheme&&L(b)}function H(b){return Y.test(b)||"http"===f.appUrl.scheme&&L(b)}function K(b){return L(b)?"https:"+b:b.replace(Y,"https:")}function J(b,a){void 0===a&&(a=!1);if(L(b))return b.slice(2);b=b.replace(N,"");a&&1<b.length&&"/"===b[0]&&"/"===b[1]&&(b=b.slice(2));return b}function R(b){var a=n.request.httpsDomains;if(!H(b))return b;var g=b.indexOf("/",
7),c;c=-1===g?b:b.slice(0,g);c=c.toLowerCase().slice(7);if("http"===f.appUrl.scheme&&c===f.appUrl.authority)return b;if("https"===f.appUrl.scheme&&c===f.appUrl.authority||a&&a.some(function(b){return c===b||d.endsWith(c,"."+b)}))b=K(b);return b}function M(b){if("string"===typeof b)return new e(y(b));b.scheme||(b.scheme=f.appUrl.scheme);return b}Object.defineProperty(f,"__esModule",{value:!0});a=m.global;var ea=b.getLogger("esri.core.urlUtils"),I=n.request,N=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,Y=/^\s*http:/i,
aa=/^\s*https:/i,S=/^\s*file:/i;f.appUrl=new e(a.location);f.corsServersUrlCache={};f.appBaseUrl=function(){var b=f.appUrl.path,b=b.substring(0,b.lastIndexOf(b.split("/")[b.split("/").length-1]));return""+(f.appUrl.scheme+"://"+f.appUrl.host+(null!=f.appUrl.port?":"+f.appUrl.port:""))+b}();f.urlToObject=q;f.getProxyUrl=u;f.addProxy=function(b){var a=t(b),g,c;a?(c=x(a.proxyUrl),g=c.path,c=c.query?l.queryToObject(c.query):null):I.forceProxy&&(c=u(),g=c.path,c=c.query);g&&(a=q(b),b=g+"?"+a.path,(g=l.objectToQuery(h.mixin(c||
{},a.query)))&&(b=b+"?"+g));return b};var Z={path:"",query:""};f.addProxyRule=function(b){b={proxyUrl:b.proxyUrl,urlPrefix:w(b.urlPrefix)};for(var a=I.proxyRules,g=b.urlPrefix,c=a.length,d=0;d<a.length;d++){var k=a[d].urlPrefix;if(0===g.indexOf(k)){if(g.length===k.length)return-1;c=d;break}0===k.indexOf(g)&&(c=d+1)}a.splice(c,0,b);return c};f.getProxyRule=t;f.hasSamePortal=function(b,a){b=p(b);a=p(a);return J(b)===J(a)};f.hasSameOrigin=v;f.canUseXhr=g;f.getCorsConfig=r;f.makeAbsolute=y;f.makeRelative=
A;f.normalize=F;f.join=B;f.getOrigin=E;f.isAbsolute=C;f.isDataProtocol=G;var da=/^data:(.*?)(;base64)?,(.*)$/;f.dataComponents=function(b){return(b=b.match(da))?{mediaType:b[1],isBase64:!!b[2],data:b[3]}:null};f.makeData=function(b){return b.isBase64?"data:"+b.mediaType+";base64,"+b.data:"data:"+b.mediaType+","+b.data};f.isProtocolRelative=L;f.hasProtocol=U;f.read=function(b,a){a=a&&a.url&&a.url.path;return b&&a?y(b,a,{preserveProtocolRelative:!0}):b};f.write=function(b,a){if(!b)return b;!C(b)&&a&&
a.blockedRelativeUrls&&a.blockedRelativeUrls.push(b);var g=y(b);if(a){var c=a.verifyItemRelativeUrls&&a.verifyItemRelativeUrls.rootPath||a.url&&a.url.path;c&&(g=A(g,c,c),g!==b&&a.verifyItemRelativeUrls&&a.verifyItemRelativeUrls.writtenUrls.push(g))}return g};f.isSVG=function(b){return V.test(b)};var V=/(^data:image\/svg|\.svg$)/i})},"dojo/_base/url":function(){define(["./kernel"],function(a){var f=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,m=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,
h=function(){for(var a=arguments,l=[a[0]],n=1;n<a.length;n++)if(a[n]){var d=new h(a[n]+""),l=new h(l[0]+"");if(""==d.path&&!d.scheme&&!d.authority&&!d.query)null!=d.fragment&&(l.fragment=d.fragment),d=l;else if(!d.scheme&&(d.scheme=l.scheme,!d.authority&&(d.authority=l.authority,"/"!=d.path.charAt(0)))){for(var l=(l.path.substring(0,l.path.lastIndexOf("/")+1)+d.path).split("/"),c=0;c<l.length;c++)"."==l[c]?c==l.length-1?l[c]="":(l.splice(c,1),c--):0<c&&(1!=c||""!=l[0])&&".."==l[c]&&".."!=l[c-1]&&
(c==l.length-1?(l.splice(c,1),l[c-1]=""):(l.splice(c-1,2),c-=2));d.path=l.join("/")}l=[];d.scheme&&l.push(d.scheme,":");d.authority&&l.push("//",d.authority);l.push(d.path);d.query&&l.push("?",d.query);d.fragment&&l.push("#",d.fragment)}this.uri=l.join("");a=this.uri.match(f);this.scheme=a[2]||(a[1]?"":null);this.authority=a[4]||(a[3]?"":null);this.path=a[5];this.query=a[7]||(a[6]?"":null);this.fragment=a[9]||(a[8]?"":null);null!=this.authority&&(a=this.authority.match(m),this.user=a[3]||null,this.password=
a[4]||null,this.host=a[6]||a[7],this.port=a[9]||null)};h.prototype.toString=function(){return this.uri};return a._Url=h})},"esri/config":function(){define(["require","exports","dojo/_base/window"],function(a,f,m){return{screenDPI:96,geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:null,kmlServiceUrl:null,portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{corsDetection:!(m.global&&
m.global.cordova),corsDetectionTimeout:15,corsEnabledServers:"basemaps.arcgis.com basemapsbeta.arcgis.com basemapsbetadev.arcgis.com basemapsdev.arcgis.com demographics1.arcgis.com demographics2.arcgis.com demographics3.arcgis.com demographics4.arcgis.com demographics5.arcgis.com demographics6.arcgis.com dev.arcgis.com devext.arcgis.com elevation3d.arcgis.com elevation3ddev.arcgis.com js.arcgis.com jsdev.arcgis.com jsqa.arcgis.com geocode.arcgis.com geocodedev.arcgis.com geocodeqa.arcgis.com geoenrich.arcgis.com geoenrichdev.arcgis.com geoenrichqa.arcgis.com localvtiles.arcgis.com qaext.arcgis.com server.arcgisonline.com services.arcgis.com services.arcgisonline.com services1.arcgis.com services2.arcgis.com services3.arcgis.com services4.arcgis.com services5.arcgis.com services6.arcgis.com services7.arcgis.com servicesdev.arcgis.com servicesdev1.arcgis.com servicesdev2.arcgis.com servicesdev3.arcgis.com servicesqa.arcgis.com servicesqa1.arcgis.com servicesqa2.arcgis.com servicesqa3.arcgis.com static.arcgis.com staticqa.arcgis.com staticdev.arcgis.com tiles.arcgis.com tiles1.arcgis.com tiles2.arcgis.com tiles3.arcgis.com tiles4.arcgis.com tilesdevext.arcgis.com tilesqa.arcgis.com utility.arcgis.com utility.arcgisonline.com www.arcgis.com".split(" "),
corsStatus:{},forceProxy:!1,maxUrlLength:2E3,maxWorkers:5,proxyRules:[],proxyUrl:null,timeout:6E4,useCors:"with-credentials",useWorkers:"on-request",httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},useSpatialIndex:!1}})},"esri/core/sniff":function(){define(["dojo/_base/window","dojo/sniff","../kernel"],function(a,f,m){function h(){if(x)return x;x={available:!1,
version:0,supportsHighPrecisionFragment:!1};var b;try{if(!q.WebGLRenderingContext)throw 0;b=document.createElement("canvas")}catch(g){return x}for(var a=["webgl","experimental-webgl","webkit-3d","moz-webgl"],c=null,d=0;d<a.length;++d){try{c=b.getContext(a[d])}catch(g){}if(c)break}b=c;if(!b)return x;a=b.getParameter(b.VERSION);if(!a)return x;if(a=a.match(/^WebGL\s+([\d.]*)/))x.version=parseFloat(a[1]),x.available=.94<=x.version,a=b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.HIGH_FLOAT),x.supportsHighPrecisionFragment=
a&&0<a.precision,x.supportsVertexShaderSamplers=0<b.getParameter(b.MAX_VERTEX_TEXTURE_IMAGE_UNITS),x.supportsElementIndexUint=null!=b.getExtension("OES_element_index_uint");return x}var e=f("ff"),l=f("ie"),n=void 0===l&&7<=f("trident"),d=f("webkit"),c=f("opera"),b=f("chrome"),k=f("safari"),q=a.global;a=navigator.userAgent;var u;(u=a.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+\_\d+)/i))&&f.add("esri-iphone",parseFloat(u[2].replace("_",".")));(u=a.match(/Android\s+(\d+\.\d+)/i))&&f.add("esri-android",parseFloat(u[1]));
(u=a.match(/Fennec\/(\d+\.\d+)/i))&&f.add("esri-fennec",parseFloat(u[1]));0<=a.indexOf("BlackBerry")&&0<=a.indexOf("WebKit")&&f.add("esri-blackberry",1);f.add("esri-touch",f("esri-iphone")||f("esri-android")||f("esri-blackberry")||6<=f("esri-fennec")||(e||d)&&document.createTouch?!0:!1);(u=a.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&f.add("esri-mobile",u);f.add("esri-pointer",navigator.pointerEnabled||navigator.msPointerEnabled);m._getDOMAccessor=function(b){var a=
"";e?a="Moz":d?a="Webkit":l?a="ms":c&&(a="O");return a+b.charAt(0).toUpperCase()+b.substr(1)};f.add("esri-phonegap",!!q.cordova);f.add("esri-cors",f("esri-phonegap")||"XMLHttpRequest"in q&&"withCredentials"in new XMLHttpRequest);f.add("esri-canvas-svg-support",function(){return!(f("trident")||f("ie"))});if(f("host-webworker"))return f;f.add("esri-workers",q.Worker?!0:!1);f.add("esri-transforms",n||9<=l||3.5<=e||4<=b||3.1<=k||10.5<=c||3.2<=f("esri-iphone")||2.1<=f("esri-android"));f.add("esri-transitions",
n||10<=l||4<=e||4<=b||3.1<=k||10.5<=c||3.2<=f("esri-iphone")||2.1<=f("esri-android"));f.add("esri-transforms3d",n||10<=e||12<=b||4<=k||3.2<=f("esri-iphone")||3<=f("esri-android"));f.add("esri-url-encodes-apostrophe",function(){var b=q.document.createElement("a");b.href="?'";return-1<b.href.indexOf("?%27")});3>f("esri-android")&&(f.add("esri-transforms",!1,!1,!0),f.add("esri-transitions",!1,!1,!0),f.add("esri-transforms3d",!1,!1,!0));m._css=function(a){var h=f("esri-transforms3d");void 0!==a&&null!==
a?h=a:h&&(b||k&&!f("esri-iphone"))&&(h=!1);var p=h?"translate3d(":"translate(",q=h?b?",-1px)":",0px)":")",g=h?"scale3d(":"scale(",r=h?",1)":")",n=h?"rotate3d(0,0,1,":"rotate(",m=h?"matrix3d(":"matrix(",x=h?",0,0,":",",u=h?",0,0,0,0,1,0,":",",w=h?",0,1)":")";return{names:{transition:d&&"-webkit-transition"||e&&"MozTransition"||c&&"OTransition"||l&&"msTransition"||"transition",transform:d&&"-webkit-transform"||e&&"MozTransform"||c&&"OTransform"||l&&"msTransform"||"transform",transformName:d&&"-webkit-transform"||
e&&"-moz-transform"||c&&"-o-transform"||l&&"-ms-transform"||"transform",origin:d&&"-webkit-transform-origin"||e&&"MozTransformOrigin"||c&&"OTransformOrigin"||l&&"msTransformOrigin"||"transformOrigin",endEvent:d&&"webkitTransitionEnd"||e&&"transitionend"||c&&"oTransitionEnd"||l&&"MSTransitionEnd"||"transitionend"},translate:function(b,a){return p+b+"px,"+a+"px"+q},scale:function(b){return g+b+","+b+r},rotate:function(b){return n+b+"deg)"},matrix:function(b){return b.m?(b=b.m,m+b[0].toFixed(10)+","+
b[1].toFixed(10)+x+b[2].toFixed(10)+","+b[3].toFixed(10)+u+b[4].toFixed(10)+(e?"px,":",")+b[5].toFixed(10)+(e?"px":"")+w):m+b.xx.toFixed(10)+","+b.yx.toFixed(10)+x+b.xy.toFixed(10)+","+b.yy.toFixed(10)+u+b.dx.toFixed(10)+(e?"px,":",")+b.dy.toFixed(10)+(e?"px":"")+w},matrix3d:function(b){b=b.m;return"matrix3d("+b[0].toFixed(10)+","+b[1].toFixed(10)+",0,0,"+b[2].toFixed(10)+","+b[3].toFixed(10)+",0,0,0,0,1,0,"+b[4].toFixed(10)+","+b[5].toFixed(10)+",0,1)"},getScaleFromMatrix:function(b){if(!b)return 1;
b=b.toLowerCase();var a=-1<b.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(b.substring(a.length,b.indexOf(",")))}}};var x;f.add("esri-webgl",function(){return!!h().available});f.add("esri-webgl-high-precision-fragment",function(){return!!h().supportsHighPrecisionFragment});f.add("esri-webgl-vertex-shader-samplers",function(){return!!h().supportsVertexShaderSamplers});f.add("esri-webgl-element-index-uint",function(){return!!h().supportsElementIndexUint});return f})},"esri/kernel":function(){define(["require",
"./core/requireUtils","dojo/main","dojo/has"],function(a,f,m,h){(function(){var a=m.config,f=a.has&&void 0!==a.has["config-deferredInstrumentation"],n=a.has&&void 0!==a.has["config-useDeferredInstrumentation"];void 0!==a.useDeferredInstrumentation||f||n||(h.add("config-deferredInstrumentation",!1,!0,!0),h.add("config-useDeferredInstrumentation",!1,!0,!0))})();return{version:"4.4",workerMessages:{request:function(e){return f.when(a,"./request").then(function(a){var f=e.options||{};f.responseType="array-buffer";
return a(e.url,f)}).then(function(a){return{data:{data:a.data,ssl:a.ssl},buffers:[a.data]}}).otherwise(function(a){throw{code:a.code,message:a.message,ssl:a.ssl};})}}}})},"dojo/main":function(){define("./_base/kernel ./has require ./sniff ./_base/lang ./_base/array ./_base/config ./ready ./_base/declare ./_base/connect ./_base/Deferred ./_base/json ./_base/Color require ./has!host-browser?./_base/browser require".split(" "),function(a,f,m,h,e,l,n,d){n.isDebug&&m(["./_firebug/firebug"]);return a})},
"esri/core/promiseUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/all","./Error"],function(a,f,m,h,e){function l(a){if(a){if("function"!==typeof a.forEach){var d=Object.keys(a),c=d.map(function(b){return a[b]});return l(c).then(function(b){var a={};d.forEach(function(c,d){return a[c]=b[d]});return a})}var b=new m,k=[],e=a.length;0===e&&b.resolve(k);a.forEach(function(a){var c={promise:a};k.push(c);a.then(function(b){c.value=b}).otherwise(function(b){c.error=b}).then(function(){--e;
0===e&&b.resolve(k)})});return b.promise}}Object.defineProperty(f,"__esModule",{value:!0});f.all=function(a){return h(a)};f.eachAlways=l;f.create=function(a,d){var c=new m(d);a(function(b){void 0===b&&(b=null);return c.resolve(b)},c.reject);return c.promise};f.reject=function(a){var d=new m;d.reject(a);return d.promise};f.resolve=function(a){void 0===a&&(a=null);var d=new m;d.resolve(a);return d.promise};f.after=function(a,d){void 0===d&&(d=null);var c=0,b=new m(function(){c&&(clearTimeout(c),c=0)}),
c=setTimeout(function(){b.resolve(d)},a);return b.promise};f.timeout=function(a,d,c){var b=0,k=new m(a.cancel);a.then(function(a){k.isFulfilled()||(k.resolve(a),b&&(clearTimeout(b),b=0))});a.otherwise(function(a){k.isFulfilled()||(k.reject(a),b&&(clearTimeout(b),b=0))});b=setTimeout(function(){var b=c||new e("promiseUtils:timeout","The wrapped promise did not resolve within "+d+" ms");k.reject(b)},d);return k.promise};f.wrapCallback=function(a){var d=!1,c=new m(function(){return d=!0});a(function(b){d||
c.resolve(b)});return c.promise}})},"esri/request":function(){define("require dojo/_base/config dojo/Deferred dojo/_base/lang dojo/_base/url dojo/request dojo/io-query dojo/when ./kernel ./config ./core/global ./core/sniff ./core/lang ./core/urlUtils ./core/deferredUtils ./core/promiseUtils dojo/has!host-browser?dojo/io/script dojo/has!host-webworker?./core/workers/request".split(" "),function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t,p,v){function g(b){var a=n.objectToQuery(b.content);a&&(b.url+=(-1===b.url.indexOf("?")?
"?":"\x26")+a);if(2E3<b.url.length)return t.reject(h.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."}));var g=new Image;b.allowImageDataAccess&&(g.crossOrigin=b.withCredentials?"use-credentials":"anonymous");var c=!1,d=new m(function(b){c=!0;g.onload=g.onerror=g.onabort=null;g.src=""}),a=function(b){g.onload=g.onerror=g.onabort=null;c||d.reject(b)};g.onload=function(){g.onload=g.onerror=g.onabort=null;c||d.resolve(this)};g.onerror=a;g.onabort=a;
g.alt="";g.src=b.url;return d.promise}function r(b){b=new e(b);return(b.host+(b.port?":"+b.port:"")).toLowerCase()}function z(b,a){var d=!!b.useProxy,k=b.method||"auto",e=u.isDefined(b.crossOrigin)?b.crossOrigin:G.useCors;b=h.mixin({},b);b._ssl&&(b.url=b.url.replace(/^http:/i,"https:"));var r=b.content,v=b.url;b.load=function(b){var a;b&&(b.error?(a=h.mixin(Error(),b.error),a.log=!!f.isDebug):"error"===b.status&&(a=h.mixin(Error(),b),a.log=!!f.isDebug),a&&!u.isDefined(a.httpCode)&&(a.httpCode=a.code));
return a||b};b.error=function(b,a){a&&a.xhr&&a.xhr.abort();b instanceof Error||(b=h.mixin(Error(),b));b.log=!!f.isDebug;return b};b._token&&(b.content=b.content||{},b.content.token=b._token);var z=0,t;v&&(t=n.objectToQuery(r),z=t.length+v.length+1,q("esri-url-encodes-apostrophe")&&(z=t.replace(/'/g,"%27").length+v.length+1));b.timeout=u.isDefined(b.timeout)?b.timeout:G.timeout;b.handleAs=b.handleAs||"json";try{var y,w,E=e&&x.canUseXhr(b.urlObj)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(b.url),
A=x.hasSameOrigin(b.urlObj,x.appUrl)||E,B="post"===k||!!b.body||z>G.maxUrlLength,F=!A&&-1!==b.handleAs.indexOf("json")&&b.callbackParamName&&!b.body,L=!!x.getProxyRule(b.url)||G.forceProxy||d||("image"!==b.handleAs||b.allowImageDataAccess)&&(!F||B)&&!A;if((q("host-browser")||q("host-webworker"))&&L)if(y=x.getProxyUrl(v,e),w=y.path,y._xo&&(E=!0),!B&&w.length+1+z>G.maxUrlLength&&(B=!0),b.url=w+"?"+v,B)b.content=h.mixin(y.query||{},r);else{var ha=n.objectToQuery(h.mixin(y.query||{},r));ha&&(b.url+=(-1===
v.indexOf("?")?"?":"\x26")+ha);b.content=null}if((q("host-browser")||q("host-webworker"))&&F&&!B)return!u.isDefined(b.isAsync)&&4>q("ff")&&(b.isAsync=!0),p.get(C?C(b):b);var H=b.headers;!q("host-browser")&&!q("host-webworker")||H&&H.hasOwnProperty("X-Requested-With")||(H=b.headers=H||{},H["X-Requested-With"]=null);if(q("host-browser")&&a){var P=b.content&&b.content.token;P&&a.set("token",P);b.contentType=!1}if(E&&!b.hasOwnProperty("withCredentials")&&"with-credentials"===G.useCors){var d=L?w:v,K=
x.getCorsConfig(d);if(K&&K.hasOwnProperty("withCredentials"))K.withCredentials&&(b.withCredentials=!0);else if(c.id){var xa=c.id.findServerInfo(d);xa&&xa.webTierAuth&&(b.withCredentials=!0)}}b=C?C(b):b;if("image"===b.handleAs)return g(b);if(B)return b.body?(b.data=a||b.body,b.query=b.content):b.data=b.content,delete b.body,delete b.content,!L&&q("safari")&&(b.url+=(-1===b.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+U++),l.post(b.url,b);b.query=b.content;delete b.content;return l.get(b.url,
b)}catch(Ha){return a=new m,a.reject(b.error(Ha)),a}}function y(b){var a=G.corsStatus,g=x.getCorsConfig(b,!0);-1<g&&G.corsEnabledServers.splice(g,1);a[r(b)]=1;return g}function A(b){var a=G.corsStatus;try{var g=r(b.url);if(G.corsDetection&&G.useCors&&q("esri-cors")&&b.url&&-1!==b.url.toLowerCase().indexOf("/rest/services")&&!x.hasSameOrigin(b.urlObj,x.appUrl)&&!x.canUseXhr(b.urlObj)){if(a[g])return a[g];var c=new m;a[g]=c.promise;var d=b.url.substring(0,b.url.toLowerCase().indexOf("/rest/")+6)+"info";
l.get(d,{query:{f:"json"},handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*G.corsDetectionTimeout}).then(function(a){a?(x.canUseXhr(b.url)||G.corsEnabledServers.push(g),c.resolve()):c.reject()},function(b){c.reject()});return c.promise}}catch(ea){console.log("esri._detectCors: an unknown error occurred while detecting CORS support")}}function F(b,g,d,k){function p(b){b._pendingDfd=z(d,E);if(b._pendingDfd){var a=!!b._pendingDfd.response;(b._pendingDfd.response||b._pendingDfd).then(function(b){if(!a||
!b.data)return b;var g=b.getHeader("Content-Type");if(g&&(g=g.toLowerCase(),-1===g.indexOf("text/plain")&&-1===g.indexOf("application/json")))return b;g=b.data;if(g instanceof ArrayBuffer&&750>=g.byteLength)g=new Blob([g]);else if(!(g instanceof Blob&&750>=g.size))return b;var c=new m,d=new FileReader;d.readAsText(g);d.onloadend=function(){if(!d.error)try{var a=JSON.parse(d.result);a.error&&(Object.isExtensible(b)||(b=h.mixin({},b)),b._jsonData=a)}catch(oa){}c.resolve(b)};return c.promise}).then(function(g){var c=
a?g.data:g,d=a?g.getHeader.bind(g):P,p=null;b.ioArgs=b._pendingDfd&&b._pendingDfd.ioArgs;if(c&&(g=a&&g._jsonData||c,g.error?(p=h.mixin(Error(),g.error),p.log=!!f.isDebug):"error"===g.status&&(p=h.mixin(Error(),g),p.log=!!f.isDebug),p&&!u.isDefined(p.httpCode)&&(p.httpCode=p.code),p))throw p;b.resolve({data:c,url:k.url,requestOptions:k.requestOptions,getHeader:d});b._pendingDfd=null}).otherwise(function(a){var g,p,e;a&&(g=a.code,p=a.subcode,e=(e=a.messageCode)&&e.toUpperCase());if(a&&403==g&&(4==p||
a.message&&-1<a.message.toLowerCase().indexOf("ssl")&&-1===a.message.toLowerCase().indexOf("permission"))){if(!d._ssl){d._ssl=d._sslFromServer=!0;F(b,!0,d,k);return}}else if(a&&415==a.status){if(y(d.url),!d._err415){d._err415=1;F(b,!0,d,k);return}}else if(c.id&&c.id._errorCodes&&-1!==c.id._errorCodes.indexOf(g)&&!c.id._isPublic(d.url)&&!v&&(403!=g||L&&-1===L.indexOf(e)&&(!u.isDefined(p)||2==p&&d._token))){B(b,d,k,a);return}b.ioArgs=b._pendingDfd&&b._pendingDfd.ioArgs;b.reject(a);b._pendingDfd=null})}else{b.ioArgs=
b._pendingDfd&&b._pendingDfd.ioArgs;var g=Error("Deferred object is missing");g.log=!!f.isDebug;b.reject(g);b._pendingDfd=null}}var e=d.body,v=d.disableIdentityLookup,n=d._preLookup,t=!1;if(q("esri-workers")&&!1!==G.useWorkers)if(!0===d.useWorkers||!0===G.useWorkers)t=!0;else if(d.workerOptions){var w=d.workerOptions;if(w.callback||w.worker&&w.worker.worker instanceof Worker)t=!0}var E=null;if((w=e instanceof FormData)||e&&e.elements)E=w?e:new FormData(e);var A=!!(-1!==d.url.toLowerCase().indexOf("token\x3d")||
d.content&&d.content.token||E&&E.get("token"));if(!g){b.then(function(b){if((/\/sharing\/rest\/accounts\/self/i.test(d.url)||/\/sharing\/rest\/portals\/self/i.test(d.url))&&!A&&!d._token&&b.user&&b.user.username){var a=G.corsEnabledServers,g=x.getCorsConfig(d.url,!0),k={host:r(d.url),withCredentials:!0};if(-1===g)a.push(k);else{var p=a[g];"object"===typeof p?p.withCredentials=!0:a.splice(g,1,k)}}if(a=d._credential)if(g=(g=c.id.findServerInfo(a.server))&&g.owningSystemUrl)g=g.replace(/\/?$/,"/sharing"),
(a=c.id.findCredential(g,a.userId))&&-1===c.id._getIdenticalSvcIdx(g,a)&&a.resources.splice(0,0,g);return b}).always(function(b){delete d._credential;b&&(b.ssl=!!d._ssl)});var C=d.load,V=d.error;C&&b.then(function(a){var g=b._pendingDfd,g=g&&g.ioArgs;return C.call(g&&g.args,a,g)});V&&b.then(null,function(a){var g=b._pendingDfd,g=g&&g.ioArgs;return V.call(g&&g.args,a,g)})}!c.id||A||d._token||c.id._isPublic(d.url)||v&&!n||!(g=c.id.findCredential(d.url))||(d._token=g.token,d._ssl=g.ssl);t?d.workerOptions&&
d.workerOptions.worker?(l=d.workerOptions.worker,p(b)):a(["./workers/RequestClient"],function(a){if(d.workerOptions){var g=d.workerOptions;l=a.getClient(g.callback,g.cbFunction)}else l=a.getClient();p(b)}):p(b);return b.promise}function B(b,a,g,d){b._pendingDfd=c.id.getCredential(a.url,{token:a._token,error:d});b._pendingDfd.then(function(c){a._token=c.token;a._credential=c;a._ssl=a._sslFromServer||c.ssl;F(b,!0,a,g)}).otherwise(function(a){b.reject(a);b._pendingDfd=null})}function E(b,a){if(v&&k.invokeStaticMessage)return v.execute(b,
a);"string"!==typeof b&&console.error("esri/request: the first parameter should be a url string");var g=h.mixin({},a),c={url:b,requestOptions:h.mixin({},a)};g.content=g.query;delete g.query;g.preventCache=!!g.cacheBust;delete g.cacheBust;g.handleAs=g.responseType;delete g.responseType;"array-buffer"===g.handleAs&&(g.handleAs="arraybuffer");if("image"===g.handleAs){if(q("host-webworker"))return t.reject(h.mixin(Error(),{message:"The responseType 'image' is not supported in Web Workers or Node environment."}));
g.preventCache&&(g.content=g.content||{},g.content["request.preventCache"]=Date.now());g.method="auto"}g.url=x.normalize(b);g.urlObj=new e(g.url);var p=w.makeDeferredCancellingPending();d(A(g)).always(function(){F(p,!1,g,c)});return p.promise}var C,G=b.request,L=["COM_0056","COM_0057"],U=0,P=function(){return null};E._makeRequest=z;E._processRequest=F;E._disableCors=y;E._detectCors=A;E.setRequestPreCallback=function(b){C=b};return E})},"dojo/request":function(){define(["./request/default!"],function(a){return a})},
"dojo/request/default":function(){define(["exports","require","../has"],function(a,f,m){var h=m("config-requestProvider"),e;if(m("host-browser")||m("host-webworker"))e="./xhr";h||(h=e);a.getPlatformDefaultId=function(){return e};a.load=function(a,n,d,c){f(["platform"==a?e:h],function(b){d(b)})}})},"esri/core/deferredUtils":function(){define(["dojo/Deferred"],function(a){var f={makeDeferredCancellingPending:function(){var m={},h=f._dfdCanceller.bind(null,m),h=new a(h);return m.deferred=h},_dfdCanceller:function(a){a=
a.deferred?a.deferred:a;a.canceled=!0;var f=a._pendingDfd;a.isResolved()||!f||f.isResolved()||f.cancel();a._pendingDfd=null},_fixDfd:function(a){var f=a.then;a.then=function(a,l,h){if(a){var d=a;a=function(a){return a&&a._argsArray?d.apply(null,a):d(a)}}return f.call(this,a,l,h)};return a},_resDfd:function(a,f,e){var l=f.length;1===l?e?a.reject(f[0]):a.resolve(f[0]):1<l?(f._argsArray=!0,a.resolve(f)):a.resolve()}};return f})},"esri/geometry/SpatialReference":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators ./support/spatialReferenceUtils".split(" "),
function(a,f,m,h,e,l,n){a=b=function(a){function k(b){b=a.call(this)||this;b.latestWkid=null;b.wkid=null;b.wkt=null;return b}m(k,a);k.prototype.normalizeCtorArgs=function(b){return b&&"object"===typeof b?b:(a={},a["string"===typeof b?"wkt":"wkid"]=b,a);var a};Object.defineProperty(k.prototype,"isWGS84",{get:function(){return 4326===this.wkid},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"isWebMercator",{get:function(){return-1!==d.indexOf(this.wkid)},enumerable:!0,configurable:!0});
Object.defineProperty(k.prototype,"isGeographic",{get:function(){return n.isGeographic(this)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"isWrappable",{get:function(){return-1!==c.indexOf(this.wkid)},enumerable:!0,configurable:!0});k.prototype.writeWkt=function(b,a){this.wkid||(a.wkt=b)};k.prototype.clone=function(){if(this===b.WGS84)return b.WGS84;if(this===b.WebMercator)return b.WebMercator;var a=new b;null!=this.wkid?(a.wkid=this.wkid,null!=this.latestWkid&&(a.latestWkid=
this.latestWkid),null!=this.vcsWkid&&(a.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(a.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(a.wkt=this.wkt);return a};k.prototype.equals=function(b){if(b){if(this===b)return!0;if(null!=this.wkid||null!=b.wkid)return this.wkid===b.wkid||this.isWebMercator&&b.isWebMercator||null!=b.latestWkid&&this.wkid===b.latestWkid||null!=this.latestWkid&&b.wkid===this.latestWkid;if(this.wkt&&b.wkt)return this.wkt.toUpperCase()===b.wkt.toUpperCase()}return!1};k.fromJSON=
function(a){if(!a)return null;if(a.wkid){if(102100===a.wkid)return b.WebMercator;if(4326===a.wkid)return b.WGS84}var c=new b;c.read(a);return c};return k}(l.declared(e));a.WGS84=null;a.WebMercator=null;h([l.property({dependsOn:["wkid"],readOnly:!0})],a.prototype,"isWGS84",null);h([l.property({dependsOn:["wkid"],readOnly:!0})],a.prototype,"isWebMercator",null);h([l.property({dependsOn:["wkid","wkt"],readOnly:!0})],a.prototype,"isGeographic",null);h([l.property({dependsOn:["wkid"],readOnly:!0})],a.prototype,
"isWrappable",null);h([l.property({json:{write:!0}})],a.prototype,"latestWkid",void 0);h([l.property({json:{write:!0}})],a.prototype,"wkid",void 0);h([l.property()],a.prototype,"wkt",void 0);h([l.writer("wkt")],a.prototype,"writeWkt",null);h([l.property({json:{write:!0}})],a.prototype,"vcsWkid",void 0);h([l.property({json:{write:!0}})],a.prototype,"latestVcsWkid",void 0);a=b=h([l.subclass("esri.SpatialReference")],a);a.WGS84=new a(4326);a.WebMercator=new a({wkid:102100,latestWkid:3857});Object.freeze&&
(Object.freeze(a.WGS84),Object.freeze(a.WebMercator));var d=[102113,102100,3857,3785],c=[102113,102100,3857,3785,4326],b;return a})},"esri/core/JSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./declare ./accessorSupport/read ./accessorSupport/write ./accessorSupport/decorators".split(" "),function(a,f,m,h,e,l,n,d,c){function b(b,a){if(!b)return null;if(b.declaredClass)throw Error("JSON object is already hydrated");var c=new this;
c.read(b,a);return c}var k=function(b){function a(){return null!==b&&b.apply(this,arguments)||this}m(a,b);a.prototype.read=function(b,a){n.default(this,b,a);return this};a.prototype.write=function(b,a){return d.default(this,b||{},a)};a.prototype.toJSON=function(b){return this.write(null,b)};return a}(c.declared(e)),k=h([c.subclass("esri.core.JSONSupport")],k);k.prototype.toJSON.isDefaultToJSON=!0;l.after(function(a){l.hasMixin(a,k)&&(a.fromJSON=b.bind(a))});return k})},"esri/core/accessorSupport/read":function(){define("require exports dojo/_base/lang ./utils ./get ./extensions/serializableProperty".split(" "),
function(a,f,m,h,e,l){function n(a,b,k){void 0===k&&(k=d);for(var c=h.getProperties(a),f=c.metadatas,n={},m=0,t=Object.getOwnPropertyNames(b);m<t.length;m++){var p=n,v=f,g=t[m],r=b,z=k,y=l.originSpecificReadPropertyDefinition(v[g],z);y&&(!y.read||!1!==y.read.enabled&&!y.read.source)&&(p[g]=!0);for(var A=0,F=Object.getOwnPropertyNames(v);A<F.length;A++){var B=F[A],y=l.originSpecificReadPropertyDefinition(v[B],z),E;a:{E=g;var C=r;if(y&&y.read&&!1!==y.read.enabled&&y.read.source)if(y=y.read.source,"string"===
typeof y){if(y===E||-1<y.indexOf(".")&&0===y.indexOf(E)&&e.exists(y,C)){E=!0;break a}}else for(var G=0;G<y.length;G++){var L=y[G];if(L===E||-1<L.indexOf(".")&&0===L.indexOf(E)&&e.exists(L,C)){E=!0;break a}}E=!1}E&&(p[B]=!0)}}c.setDefaultOrigin(k.origin);m=0;for(n=Object.getOwnPropertyNames(n);m<n.length;m++)t=n[m],v=(p=l.originSpecificReadPropertyDefinition(f[t],k).read)&&p.source,g=void 0,g=v&&"string"===typeof v?e.valueOf(b,v):b[t],p&&p.reader&&(g=p.reader.call(a,g,b,k)),void 0!==g&&c.set(t,g);
c.setDefaultOrigin("user")}Object.defineProperty(f,"__esModule",{value:!0});var d={origin:"service"};f.read=n;f.readLoadable=function(a,b,k,e){void 0===e&&(e=d);b=m.mixin({},e,{messages:[]});k(b);b.messages.forEach(function(b){"warning"!==b.type||a.loaded?e&&e.messages.push(b):a.loadWarnings.push(b)})};f.default=n})},"esri/core/accessorSupport/write":function(){define(["require","exports","./PropertyOrigin","./utils","./extensions/serializableProperty"],function(a,f,m,h,e){function l(a,c,b,k,e,f){if(!k||
!k.write)return!1;var d=a.get(b);if(void 0===d)return!1;!e&&k.write.overridePolicy&&(a=k.write.overridePolicy.call(a,d,b,f),void 0!==a&&(e=a));e||(e=k.write);return!e||!1===e.enabled||!e.allowNull&&null===d||!e.ignoreOrigin&&f&&f.origin&&c.store.originOf(b)<m.nameToId(f.origin)?!1:!0}function n(a,c,b){if(a&&"function"===typeof a.toJSON&&(!a.toJSON.isDefaultToJSON||!a.write))return h.merge(c,a.toJSON());var d=h.getProperties(a),f=d.metadatas,n;for(n in f){var x=e.originSpecificWritePropertyDefinition(f[n],
b);if(l(a,d,n,x,null,b)){var w=a.get(n),t={};x.write.writer.call(a,w,t,x.write.target||n,b);x=t;0<Object.keys(x).length&&(c=h.merge(c,x),b&&b.writtenProperties&&b.writtenProperties.push({target:a,propName:n,oldOrigin:m.idToReadableName(d.store.originOf(n)),newOrigin:b.origin}))}}return c}Object.defineProperty(f,"__esModule",{value:!0});f.willPropertyWrite=function(a,c,b,k){var d=h.getProperties(a),f=e.originSpecificWritePropertyDefinition(d.metadatas[c],k);return f?l(a,d,c,f,b,k):!1};f.write=n;f.default=
n})},"esri/geometry/support/spatialReferenceUtils":function(){define(["require","exports","./WKIDUnitConversion"],function(a,f,m){Object.defineProperty(f,"__esModule",{value:!0});f.isGeographic=function(a){return a.wkid?null==m[a.wkid]:a.wkt?/^\s*GEOGCS/i.test(a.wkt):!1};f.getInfo=function(a){return a.wkid?h[a.wkid]:null};a=[-2.0037508342788905E7,2.0037508342788905E7];f=[-2.0037508342787E7,2.0037508342787E7];var h={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:a,origin:f,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:a,origin:f,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:a,origin:f,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:a,origin:f,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}}})},"esri/geometry/support/WKIDUnitConversion":function(){define([],function(){var a,f={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,
2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,
3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,
3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,
3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,
5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,
6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,
6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,
6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,
6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,
7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,
7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,
26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53034:0,53048:0,53049:0,54034:0,
65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,
103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,
103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,
103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,
103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103695:2};for(a=2E3;2045>=a;a++)f[a]=0;for(a=2056;2065>=a;a++)f[a]=0;for(a=2067;2135>=a;a++)f[a]=0;for(a=2137;2154>=a;a++)f[a]=0;for(a=2161;2170>=a;a++)f[a]=0;for(a=2172;2193>=a;a++)f[a]=0;for(a=2195;2198>=a;a++)f[a]=0;for(a=2200;2203>=a;a++)f[a]=0;for(a=2205;2217>=a;a++)f[a]=0;for(a=2222;2224>=a;a++)f[a]=1;for(a=2225;2250>=a;a++)f[a]=2;for(a=2251;2253>=
a;a++)f[a]=1;for(a=2257;2264>=a;a++)f[a]=2;for(a=2274;2279>=a;a++)f[a]=2;for(a=2280;2282>=a;a++)f[a]=1;for(a=2283;2289>=a;a++)f[a]=2;for(a=2290;2292>=a;a++)f[a]=0;for(a=2308;2313>=a;a++)f[a]=0;for(a=2315;2491>=a;a++)f[a]=0;for(a=2494;2866>=a;a++)f[a]=0;for(a=2867;2869>=a;a++)f[a]=1;for(a=2870;2888>=a;a++)f[a]=2;for(a=2891;2895>=a;a++)f[a]=2;for(a=2896;2898>=a;a++)f[a]=1;for(a=2902;2908>=a;a++)f[a]=2;for(a=2915;2920>=a;a++)f[a]=2;for(a=2921;2923>=a;a++)f[a]=1;for(a=2924;2930>=a;a++)f[a]=2;for(a=2931;2962>=
a;a++)f[a]=0;for(a=2964;2968>=a;a++)f[a]=2;for(a=2969;2973>=a;a++)f[a]=0;for(a=2975;2991>=a;a++)f[a]=0;for(a=2995;3051>=a;a++)f[a]=0;for(a=3054;3079>=a;a++)f[a]=0;for(a=3081;3088>=a;a++)f[a]=0;for(a=3092;3101>=a;a++)f[a]=0;for(a=3106;3138>=a;a++)f[a]=0;for(a=3146;3151>=a;a++)f[a]=0;for(a=3153;3166>=a;a++)f[a]=0;for(a=3168;3172>=a;a++)f[a]=0;for(a=3174;3203>=a;a++)f[a]=0;for(a=3294;3358>=a;a++)f[a]=0;for(a=3367;3403>=a;a++)f[a]=0;for(a=3408;3416>=a;a++)f[a]=0;for(a=3417;3438>=a;a++)f[a]=2;for(a=3441;3446>=
a;a++)f[a]=2;for(a=3447;3450>=a;a++)f[a]=0;for(a=3451;3459>=a;a++)f[a]=2;for(a=3460;3478>=a;a++)f[a]=0;for(a=3554;3559>=a;a++)f[a]=0;for(a=3560;3570>=a;a++)f[a]=2;for(a=3571;3581>=a;a++)f[a]=0;for(a=3594;3597>=a;a++)f[a]=0;for(a=3601;3604>=a;a++)f[a]=0;for(a=3637;3639>=a;a++)f[a]=0;for(a=3665;3667>=a;a++)f[a]=0;for(a=3693;3695>=a;a++)f[a]=0;for(a=3701;3727>=a;a++)f[a]=0;for(a=3728;3739>=a;a++)f[a]=2;for(a=3740;3751>=a;a++)f[a]=0;for(a=3753;3760>=a;a++)f[a]=2;for(a=3761;3773>=a;a++)f[a]=0;for(a=3775;3777>=
a;a++)f[a]=0;for(a=3779;3781>=a;a++)f[a]=0;for(a=3783;3785>=a;a++)f[a]=0;for(a=3788;3791>=a;a++)f[a]=0;for(a=3797;3802>=a;a++)f[a]=0;for(a=3814;3816>=a;a++)f[a]=0;for(a=3825;3829>=a;a++)f[a]=0;for(a=3832;3841>=a;a++)f[a]=0;for(a=3844;3852>=a;a++)f[a]=0;for(a=3873;3885>=a;a++)f[a]=0;for(a=3890;3893>=a;a++)f[a]=0;for(a=3907;3912>=a;a++)f[a]=0;for(a=3942;3950>=a;a++)f[a]=0;for(a=3968;3970>=a;a++)f[a]=0;for(a=3973;3976>=a;a++)f[a]=0;for(a=3986;3989>=a;a++)f[a]=0;for(a=3994;3997>=a;a++)f[a]=0;for(a=4048;4051>=
a;a++)f[a]=0;for(a=4056;4063>=a;a++)f[a]=0;for(a=4093;4096>=a;a++)f[a]=0;for(a=4390;4398>=a;a++)f[a]=0;for(a=4399;4413>=a;a++)f[a]=2;for(a=4418;4433>=a;a++)f[a]=2;for(a=4455;4457>=a;a++)f[a]=2;for(a=4484;4489>=a;a++)f[a]=0;for(a=4491;4554>=a;a++)f[a]=0;for(a=4568;4589>=a;a++)f[a]=0;for(a=4652;4656>=a;a++)f[a]=0;for(a=4766;4800>=a;a++)f[a]=0;for(a=5014;5016>=a;a++)f[a]=0;for(a=5069;5072>=a;a++)f[a]=0;for(a=5105;5130>=a;a++)f[a]=0;for(a=5173;5188>=a;a++)f[a]=0;for(a=5253;5259>=a;a++)f[a]=0;for(a=5269;5275>=
a;a++)f[a]=0;for(a=5292;5311>=a;a++)f[a]=0;for(a=5329;5331>=a;a++)f[a]=0;for(a=5343;5349>=a;a++)f[a]=0;for(a=5355;5357>=a;a++)f[a]=0;for(a=5387;5389>=a;a++)f[a]=0;for(a=5459;5463>=a;a++)f[a]=0;for(a=5479;5482>=a;a++)f[a]=0;for(a=5518;5520>=a;a++)f[a]=0;for(a=5530;5539>=a;a++)f[a]=0;for(a=5550;5552>=a;a++)f[a]=0;for(a=5562;5583>=a;a++)f[a]=0;for(a=5623;5625>=a;a++)f[a]=2;for(a=5631;5639>=a;a++)f[a]=0;for(a=5649;5653>=a;a++)f[a]=0;for(a=5663;5680>=a;a++)f[a]=0;for(a=5682;5685>=a;a++)f[a]=0;for(a=5875;5877>=
a;a++)f[a]=0;for(a=5921;5940>=a;a++)f[a]=0;for(a=6050;6125>=a;a++)f[a]=0;for(a=6244;6275>=a;a++)f[a]=0;for(a=6328;6348>=a;a++)f[a]=0;for(a=6350;6356>=a;a++)f[a]=0;for(a=6366;6372>=a;a++)f[a]=0;for(a=6381;6387>=a;a++)f[a]=0;for(a=6393;6404>=a;a++)f[a]=0;for(a=6480;6483>=a;a++)f[a]=0;for(a=6511;6514>=a;a++)f[a]=0;for(a=6579;6581>=a;a++)f[a]=0;for(a=6619;6624>=a;a++)f[a]=0;for(a=6625;6627>=a;a++)f[a]=2;for(a=6628;6632>=a;a++)f[a]=0;for(a=6634;6637>=a;a++)f[a]=0;for(a=6669;6692>=a;a++)f[a]=0;for(a=6707;6709>=
a;a++)f[a]=0;for(a=6720;6723>=a;a++)f[a]=0;for(a=6732;6738>=a;a++)f[a]=0;for(a=6931;6933>=a;a++)f[a]=0;for(a=6956;6959>=a;a++)f[a]=0;for(a=7005;7007>=a;a++)f[a]=0;for(a=7057;7070>=a;a++)f[a]=2;for(a=7074;7082>=a;a++)f[a]=0;for(a=7109;7118>=a;a++)f[a]=0;for(a=7119;7127>=a;a++)f[a]=1;for(a=7374;7376>=a;a++)f[a]=0;for(a=7528;7586>=a;a++)f[a]=0;for(a=7587;7645>=a;a++)f[a]=2;for(a=7845;7859>=a;a++)f[a]=0;for(a=20002;20032>=a;a++)f[a]=0;for(a=20062;20092>=a;a++)f[a]=0;for(a=20135;20138>=a;a++)f[a]=0;for(a=
20248;20258>=a;a++)f[a]=0;for(a=20348;20358>=a;a++)f[a]=0;for(a=20436;20440>=a;a++)f[a]=0;for(a=20822;20824>=a;a++)f[a]=0;for(a=20934;20936>=a;a++)f[a]=0;for(a=21035;21037>=a;a++)f[a]=0;for(a=21095;21097>=a;a++)f[a]=0;for(a=21148;21150>=a;a++)f[a]=0;for(a=21413;21423>=a;a++)f[a]=0;for(a=21473;21483>=a;a++)f[a]=0;for(a=21780;21782>=a;a++)f[a]=0;for(a=21891;21894>=a;a++)f[a]=0;for(a=21896;21899>=a;a++)f[a]=0;for(a=22171;22177>=a;a++)f[a]=0;for(a=22181;22187>=a;a++)f[a]=0;for(a=22191;22197>=a;a++)f[a]=
0;for(a=22234;22236>=a;a++)f[a]=0;for(a=22521;22525>=a;a++)f[a]=0;for(a=22991;22994>=a;a++)f[a]=0;for(a=23028;23038>=a;a++)f[a]=0;for(a=23830;23853>=a;a++)f[a]=0;for(a=23866;23872>=a;a++)f[a]=0;for(a=23877;23884>=a;a++)f[a]=0;for(a=23886;23894>=a;a++)f[a]=0;for(a=23946;23948>=a;a++)f[a]=0;for(a=24311;24313>=a;a++)f[a]=0;for(a=24342;24347>=a;a++)f[a]=0;for(a=24370;24374>=a;a++)f[a]=10;for(a=24375;24381>=a;a++)f[a]=0;for(a=24718;24721>=a;a++)f[a]=0;for(a=24817;24821>=a;a++)f[a]=0;for(a=24877;24882>=
a;a++)f[a]=0;for(a=24891;24893>=a;a++)f[a]=0;for(a=25391;25395>=a;a++)f[a]=0;for(a=25828;25838>=a;a++)f[a]=0;for(a=26191;26195>=a;a++)f[a]=0;for(a=26391;26393>=a;a++)f[a]=0;for(a=26701;26722>=a;a++)f[a]=0;for(a=26729;26799>=a;a++)f[a]=2;for(a=26801;26803>=a;a++)f[a]=2;for(a=26811;26813>=a;a++)f[a]=2;for(a=26847;26870>=a;a++)f[a]=2;for(a=26891;26899>=a;a++)f[a]=0;for(a=26901;26923>=a;a++)f[a]=0;for(a=26929;26946>=a;a++)f[a]=0;for(a=26948;26998>=a;a++)f[a]=0;for(a=27037;27040>=a;a++)f[a]=0;for(a=27205;27232>=
a;a++)f[a]=0;for(a=27258;27260>=a;a++)f[a]=0;for(a=27391;27398>=a;a++)f[a]=0;for(a=27561;27564>=a;a++)f[a]=0;for(a=27571;27574>=a;a++)f[a]=0;for(a=27581;27584>=a;a++)f[a]=0;for(a=27591;27594>=a;a++)f[a]=0;for(a=28191;28193>=a;a++)f[a]=0;for(a=28348;28358>=a;a++)f[a]=0;for(a=28402;28432>=a;a++)f[a]=0;for(a=28462;28492>=a;a++)f[a]=0;for(a=29118;29122>=a;a++)f[a]=0;for(a=29168;29172>=a;a++)f[a]=0;for(a=29177;29185>=a;a++)f[a]=0;for(a=29187;29195>=a;a++)f[a]=0;for(a=29900;29903>=a;a++)f[a]=0;for(a=30161;30179>=
a;a++)f[a]=0;for(a=30491;30494>=a;a++)f[a]=0;for(a=30729;30732>=a;a++)f[a]=0;for(a=31251;31259>=a;a++)f[a]=0;for(a=31265;31268>=a;a++)f[a]=0;for(a=31275;31279>=a;a++)f[a]=0;for(a=31281;31297>=a;a++)f[a]=0;for(a=31461;31469>=a;a++)f[a]=0;for(a=31491;31495>=a;a++)f[a]=0;for(a=31917;31922>=a;a++)f[a]=0;for(a=31965;32E3>=a;a++)f[a]=0;for(a=32001;32003>=a;a++)f[a]=2;for(a=32005;32031>=a;a++)f[a]=2;for(a=32033;32060>=a;a++)f[a]=2;for(a=32064;32067>=a;a++)f[a]=2;for(a=32074;32077>=a;a++)f[a]=2;for(a=32081;32086>=
a;a++)f[a]=0;for(a=32107;32130>=a;a++)f[a]=0;for(a=32133;32158>=a;a++)f[a]=0;for(a=32164;32167>=a;a++)f[a]=2;for(a=32180;32199>=a;a++)f[a]=0;for(a=32201;32260>=a;a++)f[a]=0;for(a=32301;32360>=a;a++)f[a]=0;for(a=32601;32662>=a;a++)f[a]=0;for(a=32664;32667>=a;a++)f[a]=2;for(a=32701;32761>=a;a++)f[a]=0;for(a=53001;53004>=a;a++)f[a]=0;for(a=53008;53019>=a;a++)f[a]=0;for(a=53021;53032>=a;a++)f[a]=0;for(a=53042;53046>=a;a++)f[a]=0;for(a=53074;53080>=a;a++)f[a]=0;for(a=54001;54004>=a;a++)f[a]=0;for(a=54008;54019>=
a;a++)f[a]=0;for(a=54021;54032>=a;a++)f[a]=0;for(a=54042;54046>=a;a++)f[a]=0;for(a=54048;54053>=a;a++)f[a]=0;for(a=54074;54080>=a;a++)f[a]=0;for(a=102001;102040>=a;a++)f[a]=0;for(a=102042;102063>=a;a++)f[a]=0;for(a=102065;102067>=a;a++)f[a]=0;for(a=102070;102117>=a;a++)f[a]=0;for(a=102122;102216>=a;a++)f[a]=0;for(a=102221;102377>=a;a++)f[a]=0;for(a=102382;102388>=a;a++)f[a]=0;for(a=102389;102398>=a;a++)f[a]=2;for(a=102399;102444>=a;a++)f[a]=0;for(a=102445;102447>=a;a++)f[a]=2;for(a=102448;102458>=
a;a++)f[a]=0;for(a=102459;102468>=a;a++)f[a]=2;for(a=102469;102496>=a;a++)f[a]=0;for(a=102500;102519>=a;a++)f[a]=1;for(a=102520;102524>=a;a++)f[a]=0;for(a=102525;102529>=a;a++)f[a]=2;for(a=102530;102561>=a;a++)f[a]=0;for(a=102570;102588>=a;a++)f[a]=0;for(a=102590;102598>=a;a++)f[a]=0;for(a=102601;102603>=a;a++)f[a]=0;for(a=102605;102628>=a;a++)f[a]=0;for(a=102629;102646>=a;a++)f[a]=2;for(a=102648;102700>=a;a++)f[a]=2;for(a=102701;102703>=a;a++)f[a]=0;for(a=102707;102730>=a;a++)f[a]=2;for(a=102733;102758>=
a;a++)f[a]=2;for(a=102767;102798>=a;a++)f[a]=0;for(a=102965;102969>=a;a++)f[a]=0;for(a=102971;102973>=a;a++)f[a]=0;for(a=102975;102989>=a;a++)f[a]=0;for(a=102990;102992>=a;a++)f[a]=1;for(a=102997;103002>=a;a++)f[a]=0;for(a=103003;103008>=a;a++)f[a]=2;for(a=103009;103011>=a;a++)f[a]=0;for(a=103012;103014>=a;a++)f[a]=2;for(a=103019;103021>=a;a++)f[a]=0;for(a=103022;103024>=a;a++)f[a]=2;for(a=103029;103031>=a;a++)f[a]=0;for(a=103032;103034>=a;a++)f[a]=2;for(a=103065;103068>=a;a++)f[a]=0;for(a=103074;103076>=
a;a++)f[a]=0;for(a=103077;103079>=a;a++)f[a]=1;for(a=103080;103082>=a;a++)f[a]=0;for(a=103083;103085>=a;a++)f[a]=2;for(a=103090;103093>=a;a++)f[a]=0;for(a=103097;103099>=a;a++)f[a]=0;for(a=103100;103102>=a;a++)f[a]=2;for(a=103107;103109>=a;a++)f[a]=0;for(a=103110;103112>=a;a++)f[a]=2;for(a=103113;103116>=a;a++)f[a]=0;for(a=103117;103120>=a;a++)f[a]=2;for(a=103153;103157>=a;a++)f[a]=0;for(a=103158;103162>=a;a++)f[a]=2;for(a=103163;103165>=a;a++)f[a]=0;for(a=103166;103168>=a;a++)f[a]=1;for(a=103169;103171>=
a;a++)f[a]=2;for(a=103186;103188>=a;a++)f[a]=0;for(a=103189;103191>=a;a++)f[a]=2;for(a=103192;103195>=a;a++)f[a]=0;for(a=103196;103199>=a;a++)f[a]=2;for(a=103200;103224>=a;a++)f[a]=0;for(a=103225;103227>=a;a++)f[a]=1;for(a=103232;103237>=a;a++)f[a]=0;for(a=103238;103243>=a;a++)f[a]=2;for(a=103244;103246>=a;a++)f[a]=0;for(a=103247;103249>=a;a++)f[a]=2;for(a=103254;103256>=a;a++)f[a]=0;for(a=103257;103259>=a;a++)f[a]=2;for(a=103264;103266>=a;a++)f[a]=0;for(a=103267;103269>=a;a++)f[a]=2;for(a=103300;103375>=
a;a++)f[a]=0;for(a=103381;103383>=a;a++)f[a]=0;for(a=103384;103386>=a;a++)f[a]=1;for(a=103387;103389>=a;a++)f[a]=0;for(a=103390;103392>=a;a++)f[a]=2;for(a=103397;103399>=a;a++)f[a]=0;for(a=103400;103471>=a;a++)f[a]=2;for(a=103476;103478>=a;a++)f[a]=0;for(a=103479;103481>=a;a++)f[a]=2;for(a=103486;103488>=a;a++)f[a]=0;for(a=103489;103491>=a;a++)f[a]=2;for(a=103492;103495>=a;a++)f[a]=0;for(a=103496;103499>=a;a++)f[a]=2;for(a=103528;103543>=a;a++)f[a]=0;for(a=103544;103548>=a;a++)f[a]=2;for(a=103549;103551>=
a;a++)f[a]=0;for(a=103552;103554>=a;a++)f[a]=1;for(a=103555;103557>=a;a++)f[a]=2;for(a=103558;103560>=a;a++)f[a]=0;for(a=103571;103573>=a;a++)f[a]=0;for(a=103574;103576>=a;a++)f[a]=2;for(a=103577;103580>=a;a++)f[a]=0;for(a=103581;103583>=a;a++)f[a]=2;for(a=103600;103694>=a;a++)f[a]=0;for(a=103700;103793>=a;a++)f[a]=2;for(a=103794;103871>=a;a++)f[a]=0;for(a=103900;103971>=a;a++)f[a]=2;return f})},"esri/geometry/Extent":function(){define("dojo/_base/lang ../core/lang ./SpatialReference ./Geometry ./Point ./support/webMercatorUtils ./support/mathUtils ./support/spatialReferenceUtils".split(" "),
function(a,f,m,h,e,l,n,d){var c=h.createSubclass({declaredClass:"esri.geometry.Extent",type:"extent",normalizeCtorArgs:function(b,c,d,e,f){return this.isSR(b)?{spatialReference:b,xmin:0,ymin:0,xmax:0,ymax:0}:a.isObject(b)?(b.spatialReference=null!=b.spatialReference?b.spatialReference:m.WGS84,b):{xmin:b,ymin:c,xmax:d,ymax:e,spatialReference:null!=f?f:m.WGS84}},properties:{cache:{dependsOn:"xmin ymin zmin mmin xmax ymax zmax mmax".split(" ")},center:{readOnly:!0,dependsOn:["cache"],get:function(b){b||
(b=new e({spatialReference:this.spatialReference}));b.x=.5*(this.xmin+this.xmax);b.y=.5*(this.ymin+this.ymax);this.hasZ&&(b.z=.5*(this.zmin+this.zmax));this.hasM&&(b.m=.5*(this.mmin+this.mmax));return b}},extent:{readOnly:!0,dependsOn:["cache"],get:function(){return this.clone()}},hasM:{readOnly:!0,dependsOn:["mmin","mmax"],get:function(){return null!=this.mmin&&null!=this.mmax}},hasZ:{readOnly:!0,dependsOn:["zmin","zmax"],get:function(){return null!=this.zmin&&null!=this.zmax}},height:{readOnly:!0,
dependsOn:["ymin","ymax"],get:function(){return Math.abs(this.ymax-this.ymin)}},width:{readOnly:!0,dependsOn:["xmin","xmax"],get:function(){return Math.abs(this.xmax-this.xmin)}},xmin:0,ymin:0,mmin:void 0,zmin:void 0,xmax:0,ymax:0,mmax:void 0,zmax:void 0},centerAt:function(b){var a=this.center;return null!=b.z&&this.hasZ?this.offset(b.x-a.x,b.y-a.y,b.z-a.z):this.offset(b.x-a.x,b.y-a.y)},clone:function(){var b=new c;b.xmin=this.xmin;b.ymin=this.ymin;b.xmax=this.xmax;b.ymax=this.ymax;b.spatialReference=
this.spatialReference;null!=this.zmin&&(b.zmin=this.zmin,b.zmax=this.zmax);null!=this.mmin&&(b.mmin=this.mmin,b.mmax=this.mmax);return b},contains:function(b){if(!b)return!1;var a=b.type;if("point"===a){var c=this.spatialReference,d=b.spatialReference,a=b.x,f=b.y;b=b.z;c&&d&&!c.equals(d)&&l.canProject(c,d)&&(c=c.isWebMercator?e.lngLatToXY(a,f):e.xyToLngLat(a,f,!0),a=c[0],f=c[1]);if(a>=this.xmin&&a<=this.xmax&&f>=this.ymin&&f<=this.ymax)return null!=b&&this.hasZ?b>=this.zmin&&b<=this.zmax:!0}else if("extent"===
a)return this._containsExtent(b);return!1},equals:function(b){if(!b)return!1;var a=this.spatialReference;if(!a.equals(b.spatialReference))if(l.canProject(b.spatialReference,a))b=l.project(b,a);else return!1;return this.xmin===b.xmin&&this.ymin===b.ymin&&this.zmin===b.zmin&&this.mmin===b.mmin&&this.xmax===b.xmax&&this.ymax===b.ymax&&this.zmax===b.zmax&&this.mmax===b.mmax},expand:function(b){b=.5*(1-b);var a=this.width*b,c=this.height*b;this.xmin+=a;this.ymin+=c;this.xmax-=a;this.ymax-=c;this.hasZ&&
(a=(this.zmax-this.zmin)*b,this.zmin+=a,this.zmax-=a);this.hasM&&(b*=this.mmax-this.mmin,this.mmin+=b,this.mmax-=b);return this},intersects:function(b){if(!b)return!1;var a=b.type,c=this.spatialReference,d=b.spatialReference;c&&d&&!c.equals(d)&&l.canProject(c,d)&&(b=c.isWebMercator?l.geographicToWebMercator(b):l.webMercatorToGeographic(b,!0));switch(a){case "point":return this.contains(b);case "multipoint":return this._intersectsMultipoint(b);case "extent":return this._intersectsExtent(b);case "polygon":return this._intersectsPolygon(b);
case "polyline":return this._intersectsPolyline(b)}},normalize:function(){var b=this._normalize(!1,!0);Array.isArray(b)||(b=[b]);return b},offset:function(b,a,c){this.xmin+=b;this.ymin+=a;this.xmax+=b;this.ymax+=a;null!=c&&(this.zmin+=c,this.zmax+=c);return this},shiftCentralMeridian:function(){return this._normalize(!0)},toJSON:function(){var b=this.spatialReference,b={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax,spatialReference:b&&b.toJSON()};this.hasZ&&(b.zmin=this.zmin,b.zmax=
this.zmax);this.hasM&&(b.mmax=this.mmax,b.mmin=this.mmin);return b},union:function(b){function a(b,a,c){return null==a?c:null==c?a:b(a,c)}this.xmin=Math.min(this.xmin,b.xmin);this.ymin=Math.min(this.ymin,b.ymin);this.xmax=Math.max(this.xmax,b.xmax);this.ymax=Math.max(this.ymax,b.ymax);if(this.hasZ||b.hasZ)this.zmin=a(Math.min,this.zmin,b.zmin),this.zmax=a(Math.max,this.zmax,b.zmax);if(this.hasM||b.hasM)this.mmin=a(Math.min,this.mmin,b.mmin),this.mmax=a(Math.max,this.mmax,b.mmax);return this},intersection:function(b){function a(b,
a,c){return null==a?c:null==c?a:b(a,c)}if(!this._intersectsExtent(b))return null;this.xmin=Math.max(this.xmin,b.xmin);this.ymin=Math.max(this.ymin,b.ymin);this.xmax=Math.min(this.xmax,b.xmax);this.ymax=Math.min(this.ymax,b.ymax);if(this.hasZ||b.hasZ)this.zmin=a(Math.max,this.zmin,b.zmin),this.zmax=a(Math.min,this.zmax,b.zmax);if(this.hasM||b.hasM)this.mmin=a(Math.max,this.mmin,b.mmin),this.mmax=a(Math.min,this.mmax,b.mmax);return this},_containsExtent:function(b){var a=b.xmin,c=b.ymin,d=b.zmin,f=
b.xmax,l=b.ymax,h=b.zmax;b=b.spatialReference;return null!=d&&this.hasZ?this.contains(new e(a,c,d,b))&&this.contains(new e(a,l,d,b))&&this.contains(new e(f,l,d,b))&&this.contains(new e(f,c,d,b))&&this.contains(new e(a,c,h,b))&&this.contains(new e(a,l,h,b))&&this.contains(new e(f,l,h,b))&&this.contains(new e(f,c,h,b)):this.contains(new e(a,c,b))&&this.contains(new e(a,l,b))&&this.contains(new e(f,l,b))&&this.contains(new e(f,c,b))},_intersectsMultipoint:function(b){var a=b.points.length,c;for(c=0;c<
a;c++)if(this.contains(b.getPoint(c)))return!0;return!1},_intersectsExtent:function(b){var a,c;c=this.hasZ&&b.hasZ;if(this.xmin<=b.xmin){if(a=b.xmin,this.xmax<a)return!1}else if(a=this.xmin,b.xmax<a)return!1;if(this.ymin<=b.ymin){if(a=b.ymin,this.ymax<a)return!1}else if(a=this.ymin,b.ymax<a)return!1;if(c&&b.hasZ)if(this.zmin<=b.zmin){if(c=b.zmin,this.zmax<c)return!1}else if(c=this.zmin,b.zmax<c)return!1;return!0},_intersectsPolygon:function(b){var a=[this.xmin,this.ymax],c=[this.xmax,this.ymax],d=
[this.xmin,this.ymin],f=[this.xmax,this.ymin],l=[a,c,d,f],a=[[d,a],[a,c],[c,f],[f,d]],d=b.rings,f=d.length,h,p=new e(0,0,this.spatialReference);h=l.length;for(c=0;c<h;c++)if(p.x=l[c][0],p.y=l[c][1],b.contains(p))return!0;for(var p={x:0,y:0,spatialReference:b.spatialReference,type:"point"},v,g,c=0;c<f;c++)if(l=d[c],h=l.length){v=l[0];p.x=v[0];p.y=v[1];if(this.contains(p))return!0;for(b=1;b<h;b++){g=l[b];p.x=g[0];p.y=g[1];if(this.contains(p)||this._intersectsLine([v,g],a))return!0;v=g}}return!1},_intersectsPolyline:function(b){var a=
[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],c,d=b.paths,e=d.length,f,l,p,h,g={x:0,y:0,spatialReference:b.spatialReference,type:"point"};for(b=0;b<e;b++)if(f=d[b],l=f.length){p=f[0];g.x=p[0];g.y=p[1];if(this.contains(g))return!0;for(c=1;c<l;c++){h=f[c];g.x=h[0];g.y=h[1];if(this.contains(g)||this._intersectsLine([p,h],a))return!0;p=h}}return!1},_intersectsLine:function(b,
a){var c=n._getLineIntersection2,d,k=a.length;for(d=0;d<k;d++)if(c(b,a[d]))return!0;return!1},_shiftCM:function(b){var a=this.spatialReference;if(b=b||d.getInfo(a)){var c=this._getCM(b);if(c){var e=a.isWebMercator?l.webMercatorToGeographic(c):c;this.xmin-=c.x;this.xmax-=c.x;a.isWebMercator||(e.x=this._normalizeX(e.x,b).x);this.spatialReference=new m(f.substitute({Central_Meridian:e.x},4326===a.wkid?b.altTemplate:b.wkTemplate))}}return this},_getCM:function(b){var a,c=b.valid[0];b=b.valid[1];var d=
this.xmin,e=this.xmax;d>=c&&d<=b&&e>=c&&e<=b||(a=this.center);return a},_normalize:function(b,a,c){var k=this.spatialReference;if(k&&(c=c||d.getInfo(k))){var e=this._getParts(c).map(function(b){return b.extent});if(2<e.length)return b?this._shiftCM(c):this.set({xmin:c.valid[0],xmax:c.valid[1]});if(2===e.length){if(b)return this._shiftCM(c);if(a)return e;var f=!0,l=!0;e.map(function(b){b.hasZ||(f=!1);b.hasM||(l=!1)});return{rings:e.map(function(b){var a=[[b.xmin,b.ymin],[b.xmin,b.ymax],[b.xmax,b.ymax],
[b.xmax,b.ymin],[b.xmin,b.ymin]];if(f)for(var g=(b.zmax-b.zmin)/2,c=0;c<a.length;c++)a[c].push(g);if(l)for(b=(b.mmax-b.mmin)/2,c=0;c<a.length;c++)a[c].push(b);return a}),hasZ:f,hasM:l,spatialReference:k}}return e[0]||this}return this},_getParts:function(b){var a=this.cache._parts;if(!a){var a=[],e=this.xmin,f=this.xmax,l=this.ymin,h=this.ymax,n=this.spatialReference,p=this.width,v=e,g=f,r=0,z=0,m,A;b=b||d.getInfo(n);m=b.valid[0];A=b.valid[1];z=this._normalizeX(e,b);e=z.x;r=z.frameId;z=this._normalizeX(f,
b);f=z.x;z=z.frameId;b=e===f&&0<p;if(p>2*A){p=new c(v<g?e:f,l,A,h,n);e=new c(m,l,v<g?f:e,h,n);A=new c(0,l,A,h,n);l=new c(m,l,0,h,n);n=[];m=[];p.contains(A)&&n.push(r);p.contains(l)&&m.push(r);e.contains(A)&&n.push(z);e.contains(l)&&m.push(z);for(h=r+1;h<z;h++)n.push(h),m.push(h);a.push({extent:p,frameIds:[r]},{extent:e,frameIds:[z]},{extent:A,frameIds:n},{extent:l,frameIds:m})}else e>f||b?a.push({extent:new c(e,l,A,h,n),frameIds:[r]},{extent:new c(m,l,f,h,n),frameIds:[z]}):a.push({extent:new c(e,
l,f,h,n),frameIds:[r]});this.cache._parts=a}z=this.hasZ;l=this.hasM;if(z||l)for(r={},z&&(r.zmin=this.zmin,r.zmax=this.zmax),l&&(r.mmin=this.mmin,r.mmax=this.mmax),z=0;z<a.length;z++)a[z].extent.set(r);return a},_normalizeX:function(b,a){var c=0,d=a.valid[0],k=a.valid[1];a=2*k;b>k?(c=Math.ceil(Math.abs(b-k)/a),b-=c*a):b<d&&(c=Math.ceil(Math.abs(b-d)/a),b+=c*a,c=-c);return{x:b,frameId:c}}});return c})},"esri/geometry/Geometry":function(){define(["../core/JSONSupport","./SpatialReference"],function(a,
f){return a.createSubclass({declaredClass:"esri.geometry.Geometry",type:null,properties:{cache:{value:null,readOnly:!0,dependsOn:["spatialReference"],get:function(){return{}}},extent:{value:null,readOnly:!0,dependsOn:["spatialReference"]},hasM:!1,hasZ:!1,spatialReference:f.WGS84},isSR:function(a){return a&&("esri.SpatialReference"===a.declaredClass||null!=a.wkid)},clone:function(){console.warn(".clone() is not implemented for "+this.declaredClass);return null},toJSON:function(){console.warn(".toJSON() is not implemented for "+
this.declaredClass);return null},clearCache:function(){this.notifyChange("cache")},getCacheValue:function(a){return this.cache[a]},setCacheValue:function(a,f){this.cache[a]=f}})})},"esri/geometry/Point":function(){define(["./SpatialReference","./Geometry","./support/webMercatorUtils","./support/spatialReferenceUtils"],function(a,f,m,h){var e=[0,0],l=m.lngLatToXY,n=m.xyToLngLat,d=f.createSubclass({declaredClass:"esri.geometry.Point",normalizeCtorArgs:function(c,b,d,f,h){var k;Array.isArray(c)?(k=c,
h=b,c=k[0],b=k[1],d=k[2],f=k[3]):c&&"object"===typeof c?(k=c,c=null!=k.x?k.x:k.longitude,b=null!=k.y?k.y:k.latitude,d=null!=k.z?k.z:k.altitude,f=k.m,(h=k.spatialReference)&&"esri.SpatialReference"!==h.declaredClass&&(h=new a(h)),!k.declaredClass&&h&&h.isWebMercator&&null!=k.longitude&&null!=k.latitude&&(b=l(k.longitude,k.latitude,!1,e),c=b[0],b=b[1])):this.isSR(d)?(h=d,d=null):this.isSR(f)&&(h=f,f=null);c={x:c,y:b};null!=h&&(c.spatialReference=h);null!=d&&(c.z=d);null!=f&&(c.m=f);return c},properties:{cache:{dependsOn:["x",
"y","z","m"]},hasM:{dependsOn:["m"],get:function(){return void 0!==this.m},set:function(a){var b=this._get("hasM");a!==b&&(this._set("m",a?0:void 0),this._set("hasM",a))}},hasZ:{dependsOn:["z"],get:function(){return void 0!==this.z},set:function(a){var b=this._get("hasZ");a!==b&&(this._set("z",a?0:void 0),this._set("hasZ",a))}},latitude:{dependsOn:["y"],get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return n(this.x,this.y,!1,e)[1];if(4326===a.wkid)return this._get("y")}return null},
set:function(a){var b=this._get("spatialReference");b&&(b.isWebMercator?this._set("y",l(this.x,a,!1,e)[1]):4326===b.wkid&&this._set("y",a),this._set("latitude",a))}},longitude:{dependsOn:["x"],get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return n(this._get("x"),this._get("y"),!1,e)[0];if(4326===a.wkid)return this._get("x")}return null},set:function(a){var b=this._get("spatialReference");b&&(b.isWebMercator?this._set("x",l(a,this._get("y"),!1,e)[0]):4326===b.wkid&&this._set("x",
a),this._set("longitude",a))}},x:0,y:0,z:void 0,m:void 0,type:"point"},clone:function(){var a=new d;a.x=this.x;a.y=this.y;a.z=this.z;a.m=this.m;a.spatialReference=this.spatialReference;return a},copy:function(a){d.copy(a,this);return this},equals:function(a){if(!a)return!1;var b=this.x,c=this.y,d=this.z,e=this.m,f=this.spatialReference,h=a.x,m=a.y,p=a.z,v=a.m;a=a.spatialReference;if(!f.equals(a))if(f.isWebMercator&&4326===a.wkid)m=l(h,m),h=m[0],m=m[1],a=f;else if(4326===f.wkid&&a.isWebMercator)m=
n(h,m),h=m[0],m=m[1],a=f;else return!1;return b===h&&c===m&&d===p&&e===v&&f.wkid===a.wkid},offset:function(a,b,d){this.x+=a;this.y+=b;null!=d&&this.hasZ&&(this.z+=d);return this},normalize:function(){var a=this.x,b=this.spatialReference;if(b){var d=h.getInfo(b);if(d){var b=d.valid[0],e=d.valid[1],d=2*e;a>e?(b=Math.ceil(Math.abs(a-e)/d),a-=b*d):a<b&&(b=Math.ceil(Math.abs(a-b)/d),a+=b*d)}}this._set("x",a);return this},distance:function(a){return d.distance(this,a)},toArray:function(){var a=this.hasZ,
b=this.hasM;return a&&b?[this.x,this.y,this.z,this.m]:a?[this.x,this.y,this.z]:b?[this.x,this.y,this.m]:[this.x,this.y]},toJSON:function(){var a=this.spatialReference,b={x:this.x,y:this.y};this.hasZ&&(b.z=this.z);this.hasM&&(b.m=this.m);b.spatialReference=a&&a.toJSON();return b}});d.lngLatToXY=l;d.xyToLngLat=n;d.copy=function(a,b){b.x=a.x;b.y=a.y;b.z=a.z;b.m=a.m;b.spatialReference=Object.isFrozen(a.spatialReference)?a.spatialReference:a.spatialReference.clone()};d.distance=function(a,b){var c=a.x-
b.x,d=a.y-b.y;a=a.hasZ&&b.hasZ?a.z-b.z:0;return Math.sqrt(c*c+d*d+a*a)};return d})},"esri/geometry/support/webMercatorUtils":function(){define(["require","exports","../SpatialReference"],function(a,f,m){function h(a,b,k,e,f){if("point"===a.type)b=b(a.x,a.y,e,d),f.x=b[0],f.y=b[1];else if("extent"===a.type)g=b(a.xmin,a.ymin,e,d),f.xmin=g[0],f.ymin=g[1],b=b(a.xmax,a.ymax,e,d),f.xmax=b[0],f.ymax=b[1];else if("polyline"===a.type||"polygon"===a.type){var c=(g="polyline"===a.type)?a.paths:a.rings,l=[],h=
void 0;for(a=0;a<c.length;a++){var p=c[a],h=[];l.push(h);for(var v=0;v<p.length;v++)h.push(b(p[v][0],p[v][1],e)),2<p[v].length&&h[v].push(p[v][2]),3<p[v].length&&h[v].push(p[v][3])}g?f.paths=l:f.rings=l}else if("multipoint"===a.type){g=a.points;c=[];for(a=0;a<g.length;a++)c[a]=b(g[a][0],g[a][1],e),2<g[a].length&&c[a].push(g[a][2]),3<g[a].length&&c[a].push(g[a][3]);f.points=c}f.spatialReference=k;return f;var g}function e(a,b){a=a&&(null!=a.wkid?a:a.spatialReference);b=b&&(null!=b.wkid?b:b.spatialReference);
return a&&b?b.equals(a)?!0:b.isWebMercator&&4326===a.wkid||a.isWebMercator&&4326===b.wkid:!1}function l(a,b,d,e){void 0===e&&(e=[0,0]);89.99999<b?b=89.99999:-89.99999>b&&(b=-89.99999);b*=.017453292519943;e[0]=111319.49079327169*a;e[1]=3189068.5*Math.log((1+Math.sin(b))/(1-Math.sin(b)));return e}function n(a,b,d,e){void 0===d&&(d=!1);void 0===e&&(e=[0,0]);a=a/6378137*57.29577951308232;e[0]=d?a:a-360*Math.floor((a+180)/360);e[1]=57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*b/6378137)));
return e}Object.defineProperty(f,"__esModule",{value:!0});var d=[0,0];f.canProject=e;f.project=function(a,b){var c=a&&a.spatialReference;b=b&&(null!=b.wkid?b:b.spatialReference);return e(c,b)?c.equals(b)?a.clone():b.isWebMercator?h(a,l,m.WebMercator,!1,a.clone()):4326===b.wkid?h(a,n,m.WGS84,!1,a.clone()):null:null};f.lngLatToXY=l;f.xyToLngLat=n;f.geographicToWebMercator=function(a,b,d){void 0===b&&(b=!1);void 0===d&&(d=a.clone());return h(a,l,m.WebMercator,b,d)};f.webMercatorToGeographic=function(a,
b,d){void 0===b&&(b=!1);void 0===d&&(d=a.clone());return h(a,n,m.WGS84,b,d)}})},"esri/geometry/support/mathUtils":function(){define(["../Point"],function(a){function f(e,f){var d,c,b;e instanceof a?(d=f.x-e.x,c=f.y-e.y,b=0,null!=e.z&&null!=f.z&&(b=e.z-f.z)):(d=f[0]-e[0],c=f[1]-e[1],b=0,null!=e[2]&&null!=f[2]&&(b=e[2]-f[2]));return Math.sqrt(d*d+c*c+b*b)}function m(e,f,d){var c,b,k;if(e instanceof a)return c=e.x+d*(f.x-e.x),b=e.y+d*(f.y-e.y),null!=e.z&&null!=f.z&&(k=e.z+d*(f.z-e.z)),new a(c,b,k);c=
e[0]+d*(f[0]-e[0]);b=e[1]+d*(f[1]-e[1]);return 2<e.length&&2<f.length?[c,b,e[2]+d*(f[2]-e[2])]:[c,b]}function h(a,e){return 1E-8>Math.abs(a-e)}function e(a,e,d,c){var b,k=h(a[0],e[0])?1E10:(a[1]-e[1])/(a[0]-e[0]),f=h(d[0],c[0])?1E10:(d[1]-c[1])/(d[0]-c[0]),l=a[1]-k*a[0],n=d[1]-f*d[0];if(h(k,f)){if(h(l,n)){if(h(a[0],e[0]))if(Math.min(a[1],e[1])<Math.max(d[1],c[1])||Math.max(a[1],e[1])>Math.min(d[1],c[1]))a=(a[1]+e[1]+d[1]+c[1]-Math.min(a[1],e[1],d[1],c[1])-Math.max(a[1],e[1],d[1],c[1]))/2,b=(a-l)/
k;else return null;else if(Math.min(a[0],e[0])<Math.max(d[0],c[0])||Math.max(a[0],e[0])>Math.min(d[0],c[0]))b=(a[0]+e[0]+d[0]+c[0]-Math.min(a[0],e[0],d[0],c[0])-Math.max(a[0],e[0],d[0],c[0]))/2,a=k*b+l;else return null;return[b,a]}return null}h(k,1E10)?(b=a[0],a=f*b+n):h(f,1E10)?(b=d[0],a=k*b+l):(b=-(l-n)/(k-f),a=a[1]===e[1]?a[1]:d[1]===c[1]?d[1]:k*b+l);return[b,a]}return{getLength:f,_getLength:function(a,e){var d=e[0]-a[0];a=e[1]-a[1];return Math.sqrt(d*d+a*a)},getPointOnLine:m,getMidpoint:function(a,
e){return m(a,e,.5)},_equals:h,_getLineIntersection:e,getLineIntersection:function(f,h,d,c,b){(f=e([f.x,f.y],[h.x,h.y],[d.x,d.y],[c.x,c.y]))&&(f=new a(f[0],f[1],b));return f},_getLineIntersection2:function(a,e){var d=a[0],c=a[1],b=e[0],k=e[1];e=d[0];d=d[1];a=c[0];var c=c[1],f=b[0],h=b[1],b=k[0]-f,f=e-f,l=a-e,k=k[1]-h,h=d-h,n=c-d,m=k*l-b*n;if(0===m)return!1;b=(b*h-k*f)/m;f=(l*h-n*f)/m;return 0<=b&&1>=b&&0<=f&&1>=f?[e+b*(a-e),d+b*(c-d)]:!1},_pointLineDistance:function(a,e){var d=e[0],c=e[1];e=d[0];
var b=d[1],d=a[0];a=a[1];var k=c[0]-e,f=c[1]-b,h=d-e,l=a-b,c=Math.sqrt,n=Math.pow,m=c(n(k,2)+n(f,2)),h=(h*k+l*f)/(m*m),b=b+h*f;return c(n(d-(e+h*k),2)+n(a-b,2))},getPathLength:function(a){for(var e=0,d=a.length,c=0;c<d-1;++c)e+=f(a[c],a[c+1]);return e},getPointOnPath:function(a,e){if(0>=e)return a[0];for(var d=0,c=a.length,b=0;b<c-1;++b){var k=f(a[b],a[b+1]);if(e-d<k)return m(a[b],a[b+1],(e-d)/k);d+=k}return a[c-1]}}})},"esri/layers/support/types":function(){define(["require","exports"],function(a,
f){Object.defineProperty(f,"__esModule",{value:!0});f.isOfType=function(a,f){a=a.constructor._meta;if(!a||!a.bases)return!1;a=a.bases;var e=Array.isArray(f);return a.some(function(a){a=a.__accessorMetadata__;if(!a||!a.type||!a.type.value)return!1;a=a.type.value;return e?-1!==f.indexOf(a):a===f})}})},"esri/support/basemapUtils":function(){define("require exports ./basemapDefinitions ../core/accessorSupport/ensureType ../core/urlUtils ../core/Logger ../Basemap".split(" "),function(a,f,m,h,e,l,n){function d(a,
b){var g;if("string"===typeof a){if(!(a in m))return b=Object.keys(m).map(function(a){return'"'+a+'"'}).join(", "),v.warn("Unable to find basemap definition for: "+a+". Try one of these: "+b),null;b&&(g=b[a]);g||(g=n.fromId(a),b&&(b[a]=g))}else g=h.default(n,a);return g}function c(a,b){return a.map(function(a){return b.find(function(b){var g=q(a);b=q(b);return g.type===b.type&&g.url===b.url})||a})}function b(a){return a?!a.loaded&&a.resourceInfo?u(a.resourceInfo):{baseLayers:k(a.baseLayers),referenceLayers:k(a.referenceLayers)}:
null}function k(a){return(Array.isArray(a)?a:a.toArray()).map(q)}function q(a){return{type:a.type,url:p(a.urlTemplate||a.url||a.styleUrl)}}function u(a){return a?{baseLayers:x(a.baseMapLayers.filter(function(a){return!a.isReference})),referenceLayers:x(a.baseMapLayers.filter(function(a){return a.isReference}))}:null}function x(a){return a.map(function(a){var b;switch(a.layerType){case "VectorTileLayer":b="vector-tile";break;case "ArcGISTiledMapServiceLayer":b="tile";break;default:b="unknown"}return{type:b,
url:p(a.templateUrl||a.urlTemplate||a.styleUrl||a.url)}})}function w(a,b,c){return null!=a!==(null!=b)?"not-equal":a?t(a.baseLayers,b.baseLayers)?t(a.referenceLayers,b.referenceLayers)?"equal":c.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function t(a,b){return a.length!==b.length?!1:!a.some(function(a){return!b.some(function(b){return a.type===b.type&&a.url===b.url})})}function p(a){return a?e.normalize(a).replace(/^\s*https?:/i,"").toLowerCase():""}Object.defineProperty(f,
"__esModule",{value:!0});var v=l.getLogger("esri.Basemap");f.createCache=function(){return{}};f.ensureType=d;f.clonePreservingTiledLayers=function(a,b){void 0===b&&(b=null);a=d(a);if(!a)return null;a=new n({id:a.id,title:a.title,baseLayers:a.baseLayers.slice(),referenceLayers:a.referenceLayers.slice()});b&&(a.baseLayers=c(a.baseLayers,b.baseLayers),a.referenceLayers=c(a.referenceLayers,b.referenceLayers));return a};f.getWellKnownBasemapId=function(a){var g=null;a=b(a);for(var c in m){var d=u(m[c]),
d=w(a,d,{mustMatchReferences:!1});if("equal"===d){g=c;break}else"base-layers-equal"===d&&(g=c)}return g};f.contentEquals=function(a,c){if(a===c)return!0;a=b(a);c=b(c);return"equal"===w(a,c,{mustMatchReferences:!0})}})},"esri/support/basemapDefinitions":function(){define(["require","exports","dojo/i18n!../nls/basemaps"],function(a,f,m){return{streets:{id:"streets",title:m.streets,thumbnailUrl:a.toUrl("../images/basemap/streets.jpg"),baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",
layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",title:m.satellite,thumbnailUrl:a.toUrl("../images/basemap/satellite.jpg"),baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",title:m.hybrid,thumbnailUrl:a.toUrl("../images/basemap/hybrid.jpg"),
baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",
title:m.terrain,thumbnailUrl:a.toUrl("../images/basemap/terrain.jpg"),baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,
showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",title:m.topo,thumbnailUrl:a.toUrl("../images/basemap/topo.jpg"),baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",title:m.gray,thumbnailUrl:a.toUrl("../images/basemap/gray.jpg"),baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",
layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",title:m["dark-gray"],thumbnailUrl:a.toUrl("../images/basemap/dark-gray.jpg"),baseMapLayers:[{id:"dark-gray-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",title:m.oceans,thumbnailUrl:a.toUrl("../images/basemap/oceans.jpg"),
baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",
title:m["national-geographic"],thumbnailUrl:a.toUrl("../images/basemap/national-geographic.jpg"),baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",title:m.osm,thumbnailUrl:a.toUrl("../images/basemap/osm.jpg"),baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,
visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",title:m["dark-gray"],thumbnailUrl:a.toUrl("../images/basemap/dark-gray.jpg"),baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/5ad3948260a147a993ef4865e3fad476/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Dark Gray",visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",title:m.gray,thumbnailUrl:a.toUrl("../images/basemap/gray.jpg"),baseMapLayers:[{id:"gray-base-layer",
styleUrl:"//www.arcgis.com/sharing/rest/content/items/5dd75c1a544b46c3af01ba5736bfdfa0/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Light Gray",visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",title:m.streets,thumbnailUrl:a.toUrl("../images/basemap/streets.jpg"),baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/a60a37a27cc140ddad15f919cd5a69f2/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",
visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",title:m.topo,thumbnailUrl:a.toUrl("../images/basemap/topo.jpg"),baseMapLayers:[{id:"topo-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/86d5ed4b6dc741de9dad5f0fbe09ae95/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",title:m["streets-night-vector"],thumbnailUrl:a.toUrl("../images/basemap/streets-night.jpg"),baseMapLayers:[{id:"streets-night-vector-base-layer",
styleUrl:"//www.arcgis.com/sharing/rest/content/items/92c551c9f07b4147846aae273e822714/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",title:m["streets-relief-vector"],thumbnailUrl:a.toUrl("../images/basemap/streets-relief.jpg"),baseMapLayers:[{id:"streets-relief-vector-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",
title:"World Streets Relief Base",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-reference-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/78c0a9ab4fbf4198a8b951848aab19d8/resources/styles/root.json",title:"World Streets Relief Reference",layerType:"VectorTileLayer",showLegend:!1,visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",title:m["streets-navigation-vector"],thumbnailUrl:a.toUrl("../images/basemap/streets-navigation.jpg"),
baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/e19e9330bf08490ca8353d76b5e2e658/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]}}})},"esri/Basemap":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/accessorSupport/decorators dojo/_base/lang ./support/basemapDefinitions ./core/Collection ./core/collectionUtils ./core/Evented ./core/JSONSupport ./core/Loadable ./core/promiseUtils ./core/requireUtils ./core/urlUtils ./core/Logger ./portal/Portal ./portal/PortalItem ./layers/Layer".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t,p,v,g){var r=0,z=d.ofType(g),y=t.getLogger("esri.Basemap");f=A=function(b){function g(a){a=b.call(this)||this;a.id=null;a.portalItem=null;a.resourceInfo=null;a.thumbnailUrl=null;a.title="Basemap";a.id=Date.now().toString(16)+"-basemap-"+r++;a.baseLayers=new d;a.referenceLayers=new d;var g=function(a){"elevation"===a.type&&y.error("Layer '"+a.title+", id:"+a.id+"' of type '"+a.type+"' is not supported as a basemap layer and will therefore be ignored.")};a.baseLayers.on("after-add",
function(a){return g(a.item)});a.referenceLayers.on("after-add",function(a){return g(a.item)});return a}m(g,b);g.prototype.initialize=function(){var a=this;this.otherwise(function(b){y.error("#load()","Failed to load basemap (title: '"+a.title+"', id: '"+a.id+"')",b)});this.resourceInfo&&this.read(this.resourceInfo)};Object.defineProperty(g.prototype,"baseLayers",{set:function(a){this._set("baseLayers",c.referenceSetter(a,this._get("baseLayers"),z))},enumerable:!0,configurable:!0});g.prototype.writeBaseLayers=
function(a,b,g,c){var d=[];if(!a)return d;c=l.mixin({},c,{layerContainerType:"basemap"});this.baseLayers.forEach(function(a){if(a.write){var b={};a.write(b,c)&&d.push(b)}});this.referenceLayers.forEach(function(a){if(a.write){var b={isReference:!0};a.write(b,c)&&d.push(b)}});b.baseMapLayers=d};Object.defineProperty(g.prototype,"referenceLayers",{set:function(a){this._set("referenceLayers",c.referenceSetter(a,this._get("referenceLayers"),z))},enumerable:!0,configurable:!0});g.prototype.writeTitle=
function(a,b){b.title=a||"Basemap"};g.prototype.load=function(){this.addResolvingPromise(this._loadFromSource());return this};g.prototype.clone=function(){var a={id:this.id,title:this.title};this.resourceInfo||this.portalItem?(a.portalItem=this.portalItem,a.resourceInfo=this.resourceInfo):(a.baseLayers=this.baseLayers.slice(),a.referenceLayers=this.referenceLayers.slice());return new A(a)};g.prototype.read=function(a,b){!b||"web-scene"!==b.origin&&"web-map"!==b.origin||(this._layerOrigin=b.origin);
b&&b.portal&&(this._layerPortal=b.portal);return this.inherited(arguments)};g.prototype.write=function(a,b){a=a||{};b&&b.origin||(b=l.mixin({origin:"web-map"},b));this.inherited(arguments,[a,b]);!this.loaded&&this.resourceInfo&&this.resourceInfo.baseMapLayers&&(a.baseMapLayers=this.resourceInfo.baseMapLayers.map(function(a){a=l.clone(a);a.url&&w.isProtocolRelative(a.url)&&(a.url="https:"+a.url);a.templateUrl&&w.isProtocolRelative(a.templateUrl)&&(a.templateUrl="https:"+a.templateUrl);return a}));
return a};g.prototype._loadFromSource=function(){var a=this.resourceInfo,b=this.portalItem;return a?this._loadFromJSON(a):b?this._loadFromItem(b):u.resolve(null)};g.prototype._loadFromJSON=function(b,g){var c=this,d=this.portalItem&&this.portalItem.portal||this._layerPortal||null;return x.when(a,"./portal/support/layersCreator").then(function(a){var k=[];if(b.baseMapLayers&&Array.isArray(b.baseMapLayers)){var e={context:{origin:c._layerOrigin||"web-map",layerContainerType:"basemap",url:g,portal:d},
defaultLayerType:"DefaultTileLayer"},p=a.populateOperationalLayers(c.baseLayers,b.baseMapLayers.filter(function(a){return!a.isReference}),e);k.push.apply(k,p);a=a.populateOperationalLayers(c.referenceLayers,b.baseMapLayers.filter(function(a){return a.isReference}),e);k.push.apply(k,a)}return u.eachAlways(k)}).then(function(){})};g.prototype._loadFromItem=function(a){var b=this;return a.load().then(function(a){return a.fetchData()}).then(function(g){var c=w.urlToObject(a.itemUrl);b.resourceInfo=g.baseMap;
b.read(b.resourceInfo,{origin:"web-map",portal:a.portal||p.getDefault(),url:c});b.read({title:a.title,thumbnailUrl:a.thumbnailUrl},{origin:"portal-item",portal:a.portal||p.getDefault(),url:c});return b._loadFromJSON(b.resourceInfo,c)})};g.fromJSON=function(a){return a?new A({resourceInfo:a}):null};g.fromId=function(a){return(a=n[a])?A.fromJSON(a):null};return g}(e.declared(k,b,q));h([e.property({type:z,json:{write:{ignoreOrigin:!0}}}),e.cast(c.castForReferenceSetter)],f.prototype,"baseLayers",null);
h([e.writer("baseLayers")],f.prototype,"writeBaseLayers",null);h([e.property({json:{origins:{webScene:{write:!0}}}})],f.prototype,"id",void 0);h([e.property({type:v})],f.prototype,"portalItem",void 0);h([e.property({type:z}),e.cast(c.castForReferenceSetter)],f.prototype,"referenceLayers",null);h([e.property()],f.prototype,"resourceInfo",void 0);h([e.property()],f.prototype,"thumbnailUrl",void 0);h([e.property()],f.prototype,"title",void 0);h([e.writer("title")],f.prototype,"writeTitle",null);f=A=
h([e.subclass("esri.Basemap")],f);var A;return f})},"esri/portal/Portal":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/accessorSupport/decorators ../core/Error ../config ../identity/IdentityManager ../request ../geometry/Extent ../core/JSONSupport ../core/Loadable ./PortalQueryParams ./PortalQueryResult ./PortalUser ../core/promiseUtils ../core/requireUtils ../core/urlUtils dojo/promise/all dojo/_base/kernel dojo/_base/lang".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t,p,v,g,r,z,y){var A;f=F=function(k){function e(a){a=k.call(this)||this;a.access=null;a.allSSL=!1;a.authMode=F.AUTH_MODE_AUTO;a.authorizedCrossOriginDomains=null;a.basemapGalleryGroupQuery=null;a.bingKey=null;a.canListApps=!1;a.canListData=!1;a.canListPreProvisionedItems=!1;a.canProvisionDirectPurchase=!1;a.canSearchPublic=!1;a.canShareBingPublic=!1;a.canSharePublic=!1;a.canSignInArcGIS=!1;a.canSignInIDP=!1;a.colorSetsGroupQuery=null;a.commentsEnabled=!1;a.created=
null;a.culture=null;a.customBaseUrl=null;a.defaultBasemap=null;a.defaultExtent=null;a.defaultVectorBasemap=null;a.description=null;a.featuredGroups=null;a.featuredItemsGroupQuery=null;a.galleryTemplatesGroupQuery=null;a.livingAtlasGroupQuery=null;a.helperServices=null;a.homePageFeaturedContent=null;a.homePageFeaturedContentCount=null;a.httpPort=null;a.httpsPort=null;a.id=null;a.ipCntryCode=null;a.isPortal=!1;a.layerTemplatesGroupQuery=null;a.maxTokenExpirationMinutes=null;a.modified=null;a.name=null;
a.portalHostname=null;a.portalMode=null;a.portalProperties=null;a.region=null;a.rotatorPanels=null;a.showHomePageDescription=!1;a.supportsHostedServices=!1;a.symbolSetsGroupQuery=null;a.templatesGroupQuery=null;a.units=null;a.url=d.portalUrl;a.urlKey=null;a.user=null;a.useStandardizedQuery=!1;a.useVectorBasemaps=!1;a.vectorBasemapGalleryGroupQuery=null;return a}m(e,k);e.prototype.normalizeCtorArgs=function(a){return"string"===typeof a?{url:a}:a};e.prototype.initialize=function(){var a=this;this._esriId_credentialCreateHandle=
c.on("credential-create",function(){a.loaded&&!a.credential&&a.authMode===F.AUTH_MODE_AUTO&&c.findCredential(a.restUrl)&&a._signIn()})};e.prototype.destroy=function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)};e.prototype.readAuthorizedCrossOriginDomains=function(a){if(a)for(var b=0;b<a.length;b++){var c=a[b],e=c;g.hasProtocol(e)||(e=g.appUrl.scheme+"://"+e);g.canUseXhr(e)||d.request.corsEnabledServers.push({host:c,
withCredentials:!0})}return a};e.prototype.readDefaultBasemap=function(a){return a?(a=A.fromJSON(a),a.portalItem={portal:this},a):null};e.prototype.readDefaultVectorBasemap=function(a){return a?(a=A.fromJSON(a),a.portalItem={portal:this},a):null};Object.defineProperty(e.prototype,"extraQuery",{get:function(){return this.id&&!this.canSearchPublic?" AND orgid:"+this.id:null},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"isOrganization",{get:function(){return!!this.access},enumerable:!0,
configurable:!0});Object.defineProperty(e.prototype,"restUrl",{get:function(){var a=this.url;if(a)var b=a.indexOf("/sharing"),a=0<b?a.substring(0,b):this.url.replace(/\/+$/,""),a=a+"/sharing/rest";return a},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"thumbnailUrl",{get:function(){var a=this.restUrl,b=this.thumbnail;return a&&b?this._normalizeSSL(a+"/portals/self/resources/"+b):null},enumerable:!0,configurable:!0});e.prototype.readUser=function(a){var b=null;a&&(b=t.fromJSON(a),
b.portal=this);return b};e.prototype.load=function(){var b=this,g=p.resolve().then(function(){return b.authMode===F.AUTH_MODE_IMMEDIATE?c.getCredential(b.restUrl):b.authMode===F.AUTH_MODE_AUTO?c.checkSignInStatus(b.restUrl).otherwise(function(){return null}):null}).then(function(g){b.credential=g;return v.when(a,"../Basemap")}).then(function(a){A=a}).then(function(){return b._fetchSelf()}).then(function(a){b.read(a)});this.addResolvingPromise(g);return this};e.prototype.fetchBasemaps=function(){var a=
new x;a.query=this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery;a.disableExtraQuery=!0;return this.queryGroups(a).then(function(b){a.num=100;a.query='type:"Web Map" -type:"Web Application"';return b.total?(b=b.results[0],a.sortField=b.sortField||"name",a.sortOrder=b.sortOrder||"desc",b.queryItems(a)):null}).then(function(a){return a&&a.total?a.results.filter(function(a){return"Web Map"===a.type}).map(function(a){return new A({portalItem:a})}):[]})};e.prototype.fetchFeaturedGroups=
function(){var a=this.featuredGroups,b=new x;b.num=100;b.sortField="title";if(a&&a.length){for(var g=[],c=0;c<a.length;c++){var d=a[c];g.push('(title:"'+d.title+'" AND owner:'+d.owner+")")}b.query=g.join(" OR ");return this.queryGroups(b).then(function(a){return a.results})}return p.resolve([])};e.getDefault=function(){F._default||(F._default=new F);return F._default};e.prototype.queryGroups=function(a){return this._queryPortal("/community/groups",a,"PortalGroup")};e.prototype.queryItems=function(a){return this._queryPortal("/search",
a,"PortalItem")};e.prototype.queryUsers=function(a){a.sortField||(a.sortField="username");return this._queryPortal("/community/users",a,"PortalUser")};e.prototype.toJSON=function(){throw new n("internal:not-yet-implemented","Portal.toJSON is not yet implemented");};e.prototype._fetchSelf=function(){return this._request(this.restUrl+"/portals/self",{query:{culture:z.locale}})};e.prototype._queryPortal=function(b,g,c){var d=this,e=function(a){return d._request(d.restUrl+b,g.toRequestOptions(d)).then(function(b){var c=
g.clone();c.start=b.nextStart;return new w({nextQueryParams:c,queryParams:g,total:b.total,results:F._resultsToTypedArray(a,{portal:d},b)})}).then(function(a){return r(a.results).always(function(){return a})})};return c?v.when(a,"./"+c).then(function(a){return e(a)}):e()};e.prototype._signIn=function(){var a=this;return this.authMode===F.AUTH_MODE_ANONYMOUS?p.reject(new n("portal:invalid-auth-mode",'Current "authMode"\' is "'+this.authMode+'"')):"failed"===this.loadStatus?p.reject(this.loadError):
c.getCredential(this.restUrl).then(function(b){if("not-loaded"===a.loadStatus)return a.load().then(function(){return null});if("loading"===a.loadStatus)return a.load().then(function(){if(a.credential)return null;a.credential=b;return a._fetchSelf()});if(a.user&&a.credential===b)return null;a.credential=b;return a._fetchSelf()}).then(function(b){b&&a.read(b)})};e.prototype._normalizeSSL=function(a){var b=this.allSSL||window&&"https:"===window.location.protocol;if(this.isPortal){var g=F._getLocation(a);
if(-1<this.portalHostname.toLowerCase().indexOf(g.hostname.toLowerCase())&&g.port&&"80"!==g.port&&"443"!==g.port)return a=g.pathname,0!==a.indexOf("/")&&(a="/"+a),b?"https://"+g.hostname+(this.httpsPort&&443!==this.httpsPort?":"+this.httpsPort:"")+a+g.search:"http://"+g.hostname+(this.httpPort&&80!==this.httpPort?":"+this.httpPort:"")+a+g.search}return b?a.replace("http:","https:"):a};e.prototype._normalizeUrl=function(a){var b=this.credential&&this.credential.token;return this._normalizeSSL(b?a+
(-1<a.indexOf("?")?"\x26":"?")+"token\x3d"+b:a)};e.prototype._requestToTypedArray=function(b,g,c){var d=this,e=function(a){return d._request(b,g).then(function(b){var g=F._resultsToTypedArray(a,{portal:d},b);return r(g).always(function(){return g})})};return c?v.when(a,"./"+c).then(function(a){return e(a)}):e()};e.prototype._request=function(a,g){var c={f:"json"},d={disableIdentityLookup:this.authMode===F.AUTH_MODE_ANONYMOUS},e;g&&(y.mixin(c,g.query),e=g.responseType,d.method=g.method);return b(this._normalizeSSL(a),
y.mixin({callbackParamName:"callback",query:c,responseType:e,timeout:0},d)).then(function(a){return a.data})};e._getLocation=function(a){var b=document.createElement("a");b.href=a;return{protocol:b.protocol,hostname:b.hostname,port:b.port,pathname:b.pathname,search:b.search,hash:b.hash,host:b.host}};e._resultsToTypedArray=function(a,b,g){if(g){if(g=g.listings||g.notifications||g.userInvitations||g.tags||g.items||g.groups||g.comments||g.provisions||g.results||g.relatedItems||g,a||b)g=g.map(function(g){g=
y.mixin(a?a.fromJSON(g):g,b);"function"===typeof g.load&&g.load();return g})}else g=[];return g};return e}(l.declared(q,u));f.AUTH_MODE_ANONYMOUS="anonymous";f.AUTH_MODE_AUTO="auto";f.AUTH_MODE_IMMEDIATE="immediate";h([l.property()],f.prototype,"access",void 0);h([l.property()],f.prototype,"allSSL",void 0);h([l.property()],f.prototype,"authMode",void 0);h([l.property()],f.prototype,"authorizedCrossOriginDomains",void 0);h([l.reader("authorizedCrossOriginDomains")],f.prototype,"readAuthorizedCrossOriginDomains",
null);h([l.property()],f.prototype,"basemapGalleryGroupQuery",void 0);h([l.property()],f.prototype,"bingKey",void 0);h([l.property()],f.prototype,"canListApps",void 0);h([l.property()],f.prototype,"canListData",void 0);h([l.property()],f.prototype,"canListPreProvisionedItems",void 0);h([l.property()],f.prototype,"canProvisionDirectPurchase",void 0);h([l.property()],f.prototype,"canSearchPublic",void 0);h([l.property()],f.prototype,"canShareBingPublic",void 0);h([l.property()],f.prototype,"canSharePublic",
void 0);h([l.property()],f.prototype,"canSignInArcGIS",void 0);h([l.property()],f.prototype,"canSignInIDP",void 0);h([l.property()],f.prototype,"colorSetsGroupQuery",void 0);h([l.property()],f.prototype,"commentsEnabled",void 0);h([l.property({type:Date})],f.prototype,"created",void 0);h([l.property()],f.prototype,"credential",void 0);h([l.property()],f.prototype,"culture",void 0);h([l.property()],f.prototype,"customBaseUrl",void 0);h([l.property()],f.prototype,"defaultBasemap",void 0);h([l.reader("defaultBasemap")],
f.prototype,"readDefaultBasemap",null);h([l.property({type:k})],f.prototype,"defaultExtent",void 0);h([l.property()],f.prototype,"defaultVectorBasemap",void 0);h([l.reader("defaultVectorBasemap")],f.prototype,"readDefaultVectorBasemap",null);h([l.property()],f.prototype,"description",void 0);h([l.property({dependsOn:["id","canSearchPublic"],readOnly:!0})],f.prototype,"extraQuery",null);h([l.property()],f.prototype,"featuredGroups",void 0);h([l.property()],f.prototype,"featuredItemsGroupQuery",void 0);
h([l.property()],f.prototype,"galleryTemplatesGroupQuery",void 0);h([l.property()],f.prototype,"livingAtlasGroupQuery",void 0);h([l.property()],f.prototype,"helpBase",void 0);h([l.property()],f.prototype,"helperServices",void 0);h([l.property()],f.prototype,"helpMap",void 0);h([l.property()],f.prototype,"homePageFeaturedContent",void 0);h([l.property()],f.prototype,"homePageFeaturedContentCount",void 0);h([l.property()],f.prototype,"httpPort",void 0);h([l.property()],f.prototype,"httpsPort",void 0);
h([l.property()],f.prototype,"id",void 0);h([l.property()],f.prototype,"ipCntryCode",void 0);h([l.property({dependsOn:["access"],readOnly:!0})],f.prototype,"isOrganization",null);h([l.property()],f.prototype,"isPortal",void 0);h([l.property()],f.prototype,"layerTemplatesGroupQuery",void 0);h([l.property()],f.prototype,"maxTokenExpirationMinutes",void 0);h([l.property({type:Date})],f.prototype,"modified",void 0);h([l.property()],f.prototype,"name",void 0);h([l.property()],f.prototype,"portalHostname",
void 0);h([l.property()],f.prototype,"portalMode",void 0);h([l.property()],f.prototype,"portalProperties",void 0);h([l.property()],f.prototype,"region",void 0);h([l.property({dependsOn:["url"],readOnly:!0})],f.prototype,"restUrl",null);h([l.property()],f.prototype,"rotatorPanels",void 0);h([l.property()],f.prototype,"showHomePageDescription",void 0);h([l.property()],f.prototype,"staticImagesUrl",void 0);h([l.property()],f.prototype,"stylesGroupQuery",void 0);h([l.property()],f.prototype,"supportsHostedServices",
void 0);h([l.property()],f.prototype,"symbolSetsGroupQuery",void 0);h([l.property()],f.prototype,"templatesGroupQuery",void 0);h([l.property()],f.prototype,"thumbnail",void 0);h([l.property({dependsOn:["restUrl","thumbnail"],readOnly:!0})],f.prototype,"thumbnailUrl",null);h([l.property()],f.prototype,"units",void 0);h([l.property()],f.prototype,"url",void 0);h([l.property()],f.prototype,"urlKey",void 0);h([l.property()],f.prototype,"user",void 0);h([l.reader("user")],f.prototype,"readUser",null);
h([l.property()],f.prototype,"useStandardizedQuery",void 0);h([l.property()],f.prototype,"useVectorBasemaps",void 0);h([l.property()],f.prototype,"vectorBasemapGalleryGroupQuery",void 0);h([e(1,l.cast(x))],f.prototype,"_queryPortal",null);f=F=h([l.subclass("esri.portal.Portal")],f);var F;return f})},"esri/core/tsSupport/paramHelper":function(){define([],function(){return function(a,f){return function(m,h){f(m,h,a)}}})},"esri/identity/IdentityManager":function(){define(["./IdentityManagerDialog","../kernel",
"./OAuthSignInHandler","../core/declare"],function(a,f,m,h){a=new a;f.id=h.safeMixin(a,m);return f.id})},"esri/identity/IdentityManagerDialog":function(){define("dojo/_base/kernel ../core/declare dojo/_base/config dojo/Deferred dojo/_base/lang dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ../kernel ../core/lang ../core/domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/identity dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),function(a,f,m,h,e,
l,n,d,c,b,k,q,u,x,w){return f([x],{declaredClass:"esri.identity.IdentityManager",constructor:function(a){e.mixin(this,a)},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e{info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e{invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e{lblUser}\x3c/label\x3e\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e{lblPwd}\x3c/label\x3e\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e{lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e{lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
signIn:function(a,b,c){this._nls||(this._nls=w);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.emit("dialog-create"));var g=this._loginDialog,d=c&&c.error,e=c&&c.token,k=new h(function(){g.onCancel()});if(g.open)return a=Error("BUSY"),a.code="IdentityManager.1",a.log=!!m.isDebug,k.reject(a),k.promise;q.hide(g.errMsg_);d&&403==d.code&&e&&(l.set(g.errMsg_,"innerHTML",this._nls.forbidden),q.show(g.errMsg_));g.dfd_=k;g.serverInfo_=b;g.resUrl_=a;g.admin_=c&&c.isAdmin;
l.set(g.resLink_,{title:a,innerHTML:"("+(this.getResourceName(a)||this._nls.lblItem)+")"});l.set(g.serverLink_,{title:b.server,innerHTML:(-1!==b.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":b.server)+" "});g.txtPwd_.set("value","");g.show();return k.promise},_createLoginDialog:function(){var e=this._nls,p=k.substitute(e,this._dialogContent),p=k.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},
p),f=new c({title:e.title,content:p,"class":" esri-widget esriSignInDialog esriIdentityDialog",style:"width: 18em;",esriIdMgr_:this,onShow:function(){this.domNode.classList.add("esriIdentityDialog--visible")},onHide:function(){this.domNode.classList.remove("esriIdentityDialog--visible")},keypressed_:function(a){a.charOrCode===n.ENTER&&this.execute_()},execute_:function(){var a=this.txtUser_.get("value"),d=this.txtPwd_.get("value"),p=this.dfd_,f=this;if(this.form_.validate()&&a&&d){this.btnSubmit_.set("label",
e.lblSigning);var h=b.id.findCredential(f.resUrl_,a),v=function(b){f.btnSubmit_.set("label",e.lblOk);f.btnSubmit_.set("disabled",!1);q.hide(f.errMsg_);f.hide();c._DialogLevelManager.hide(f);var g=f.serverInfo_;f.dfd_=f.serverInfo_=f.generateDfd_=f.resUrl_=null;var d,r,l=h,v;b&&(d=b.token,r=k.isDefined(b.expires)?Number(b.expires):null,v=!!b.ssl,l?(l.userId=a,l.token=d,l.expires=r,l.validity=b.validity,l.ssl=v,l.creationTime=(new Date).getTime()):l=new u({userId:a,server:g.server,token:d,expires:r,
ssl:v,isAdmin:f.admin_,validity:b.validity}));p.resolve(l)};h&&!h._enqueued?v():(f.btnSubmit_.set("disabled",!0),f.generateDfd_=b.id.generateToken(this.serverInfo_,{username:a,password:d},{isAdmin:this.admin_}).then(v).then(null,function(a){f.btnSubmit_.set("disabled",!1);f.generateDfd_=null;f.btnSubmit_.set("label",e.lblOk);l.set(f.errMsg_,"innerHTML",a&&a.code?e.invalidUser:e.noAuthService);q.show(f.errMsg_)}))}},cancel_:function(){f.generateDfd_&&f.generateDfd_.cancel();var a=f.dfd_,b=f.resUrl_,
d=f.serverInfo_;f.btnSubmit_.set("disabled",!1);f.dfd_=f.serverInfo_=f.generateDfd_=f.resUrl_=null;q.hide(f.errMsg_);c._DialogLevelManager.hide(f);f.esriIdMgr_.emit("dialog-cancel",{resourceUrl:b,serverInfo:d});b=Error("ABORTED");b.code="IdentityManager.2";b.log=!!m.isDebug;a.reject(b)}}),p=f.domNode;f.form_=d.byNode(a.query(".esriIdForm",p)[0]);f.txtUser_=d.byNode(a.query(".esriIdUser",p)[0]);f.txtPwd_=d.byNode(a.query(".esriIdPwd",p)[0]);f.btnSubmit_=d.byNode(a.query(".esriIdSubmit",p)[0]);f.btnCancel_=
d.byNode(a.query(".esriIdCancel",p)[0]);f.resLink_=a.query(".resLink",p)[0];f.serverLink_=a.query(".serverLink",p)[0];f.errMsg_=a.query(".esriErrorMsg",p)[0];f.connect(f.txtUser_,"onKeyPress",f.keypressed_);f.connect(f.txtPwd_,"onKeyPress",f.keypressed_);f.connect(f.btnSubmit_,"onClick",f.execute_);f.connect(f.btnCancel_,"onClick",f.onCancel);f.connect(f,"onCancel",f.cancel_);return f}})})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],function(a,f,m){var h=
{},e={},l={length:0,add:function(a){if(e[a.id])throw Error("Tried to register widget with id\x3d\x3d"+a.id+" but that id is already registered");e[a.id]=a;this.length++},remove:function(a){e[a]&&(delete e[a],this.length--)},byId:function(a){return"string"==typeof a?e[a]:a},byNode:function(a){return e[a.getAttribute("widgetId")]},toArray:function(){var a=[],d;for(d in e)a.push(e[d]);return a},getUniqueId:function(a){var d;do d=a+"_"+(a in h?++h[a]:h[a]=0);while(e[d]);return"dijit"==m._scopeName?d:
m._scopeName+"_"+d},findWidgets:function(a,d){function c(a){for(a=a.firstChild;a;a=a.nextSibling)if(1==a.nodeType){var k=a.getAttribute("widgetId");k?(k=e[k])&&b.push(k):a!==d&&c(a)}}var b=[];c(a);return b},_destroyAll:function(){m._curFocus=null;m._prevFocus=null;m._activeStack=[];a.forEach(l.findWidgets(f.body()),function(a){a._destroyed||(a.destroyRecursive?a.destroyRecursive():a.destroy&&a.destroy())})},getEnclosingWidget:function(a){for(;a;){var d=1==a.nodeType&&a.getAttribute("widgetId");if(d)return e[d];
a=a.parentNode}return null},_hash:e};return m.registry=l})},"dijit/main":function(){define(["dojo/_base/kernel"],function(a){return a.dijit})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t,p,v,g,r,z,y,A,F,B,E,C,G,L,U,P){function H(){}var K=new e;K.resolve(!0);y=h("dijit._DialogBase"+(t("dojo-bidi")?"_NoBidi":""),[F,E,C,B],{templateString:P,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:y.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(a){this._set("draggable",a)},maxRatio:.9,
closable:!0,_setClosableAttr:function(a){this.closeButtonNode.style.display=a?"":"none";this._set("closable",a)},postMixInProperties:function(){var a=k.getLocalization("dijit","common");u.mixin(this,a);this.inherited(arguments)},postCreate:function(){c.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);m.after(this,"onExecute",u.hitch(this,"hide"),!0);m.after(this,"onCancel",u.hitch(this,"hide"),!0);x(this.closeButtonNode,
p.press,function(a){a.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&R.isTop(this)&&(this._getFocusItems(),z.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();z.focus(this._firstFocusItem)},_endDrag:function(){var a=d.position(this.domNode),b=v.getBox(this.ownerDocument);a.y=Math.min(Math.max(a.y,0),b.h-a.h);a.x=Math.min(Math.max(a.x,0),b.w-a.w);this._relativePosition=a;this._position()},_setup:function(){var a=
this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==t("ie")?r:g)(a,{handle:this.titleBar}),m.after(this._moveable,"onMoveStop",u.hitch(this,"_endDrag"),!0)):n.add(a,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":f.map(this["class"].split(/\s/),function(a){return a+"_underlay"}).join(" "),_onKeyDown:u.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!n.contains(this.ownerDocumentBody,"dojoMove")){var a=
this.domNode,b=v.getBox(this.ownerDocument),g=this._relativePosition,e=d.position(a);c.set(a,{left:Math.floor(b.l+(g?Math.min(g.x,b.w-e.w):(b.w-e.w)/2))+"px",top:Math.floor(b.t+(g?Math.min(g.y,b.h-e.h):(b.h-e.h)/2))+"px"})}},_onKey:function(a){if(a.keyCode==q.TAB){this._getFocusItems();var b=a.target;this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):b==this._firstFocusItem&&a.shiftKey?(z.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):b!=this._lastFocusItem||
a.shiftKey||(z.focus(this._firstFocusItem),a.stopPropagation(),a.preventDefault())}else this.closable&&a.keyCode==q.ESCAPE&&(this.onCancel(),a.stopPropagation(),a.preventDefault())},show:function(){if(this.open)return K.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),R.hide(this));var a=v.get(this.ownerDocument);this._modalconnects.push(x(a,"scroll",u.hitch(this,"resize",null)));this._modalconnects.push(x(this.domNode,
"keydown",u.hitch(this,"_onKey")));c.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();var g;this._fadeInDeferred=new e(u.hitch(this,function(){g.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,H);a=this._fadeInDeferred.promise;g=b.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:u.hitch(this,function(){R.show(this,this.underlayAttrs)}),onEnd:u.hitch(this,function(){this.autofocus&&R.isTop(this)&&(this._getFocusItems(),
z.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return a},hide:function(){if(!this._alreadyInitialized||!this.open)return K.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();var a;this._fadeOutDeferred=new e(u.hitch(this,function(){a.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,H);this._fadeOutDeferred.then(u.hitch(this,"onHide"));var g=this._fadeOutDeferred.promise;a=b.fadeOut({node:this.domNode,duration:this.duration,
onEnd:u.hitch(this,function(){this.domNode.style.display="none";R.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var c;c=this._modalconnects.pop();)c.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return g},resize:function(a){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!a){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&
(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),f.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(a){a&&c.set(a,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var b=v.getBox(this.ownerDocument);b.w*=this.maxRatio;b.h*=this.maxRatio;var g=d.position(this.domNode);g.w>=b.w||g.h>=b.h?(a={w:Math.min(g.w,b.w),h:Math.min(g.h,b.h)},this._shrunk=!0):this._shrunk=!1}if(a){d.setMarginBox(this.domNode,
a);b=[];this.titleBar&&b.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&b.push({domNode:this.actionBarNode,region:"bottom"});g={domNode:this.containerNode,region:"center"};b.push(g);var e=U.marginBox2contentBox(this.domNode,a);U.layoutChildren(this.domNode,e,b);this._singleChild?(b=U.marginBox2contentBox(this.containerNode,g),this._singleChild.resize({w:b.w,h:b.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();t("touch")||a||this._position()}},
_layoutChildren:function(){f.forEach(this.getChildren(),function(a){a.resize&&a.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var a;a=this._modalconnects.pop();)a.remove();R.hide(this);this.inherited(arguments)}});t("dojo-bidi")&&(y=h("dijit._DialogBase",y,{_setTitleAttr:function(a){this._set("title",a);this.titleNode.innerHTML=a;this.applyTextDir(this.titleNode)},
_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this.set("title",this.title))}}));var J=h("dijit.Dialog",[L,y],{});J._DialogBase=y;var R=J._DialogLevelManager={_beginZIndex:950,show:function(a,b){M[M.length-1].focus=z.curNode;var g=M[M.length-1].dialog?M[M.length-1].zIndex+2:J._DialogLevelManager._beginZIndex;c.set(a.domNode,"zIndex",g);G.show(b,g-1);M.push({dialog:a,underlayAttrs:b,zIndex:g})},hide:function(a){if(M[M.length-1].dialog==a){M.pop();var b=M[M.length-
1];1==M.length?G.hide():G.show(b.underlayAttrs,b.zIndex-1);if(a.refocus&&(a=b.focus,!b.dialog||a&&l.isDescendant(a,b.dialog.domNode)||(b.dialog._getFocusItems(),a=b.dialog._firstFocusItem),a))try{a.focus()}catch(N){}}else b=f.indexOf(f.map(M,function(a){return a.dialog}),a),-1!=b&&M.splice(b,1)},isTop:function(a){return M[M.length-1].dialog==a}},M=J._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];z.watch("curNode",function(a,b,g){a=M[M.length-1].dialog;if(g&&a&&!a._fadeOutDeferred&&g.ownerDocument==
a.ownerDocument){do if(g==a.domNode||n.contains(g,"dijitPopup"))return;while(g=g.parentNode);a.focus()}});t("dijit-legacy-requires")&&w(0,function(){a(["dijit/TooltipDialog"])});return J})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(a,f,m,h,e,l,n,d,c,b){function k(a,b,g){return w&&g?function(a,b){return l(a,g,b)}:p?function(g,c){var d=l(g,b,function(a){c.call(this,a);C=(new Date).getTime()}),
e=l(g,a,function(a){(!C||(new Date).getTime()>C+1E3)&&c.call(this,a)});return{remove:function(){d.remove();e.remove()}}}:function(b,g){return l(b,a,g)}}function q(a){do if(void 0!==a.dojoClick)return a;while(a=a.parentNode)}function u(a,c,e){if(!d.isRight(a)){var k=q(a.target);if(g=!a.target.disabled&&k&&k.dojoClick)if(z=(r="useTarget"==g)?k:a.target,r&&a.preventDefault(),y=a.changedTouches?a.changedTouches[0].pageX-b.global.pageXOffset:a.clientX,A=a.changedTouches?a.changedTouches[0].pageY-b.global.pageYOffset:
a.clientY,F=("object"==typeof g?g.x:"number"==typeof g?g:0)||4,B=("object"==typeof g?g.y:"number"==typeof g?g:0)||4,!v){a=function(a){b.doc.addEventListener(a,function(b){var c=b.target;g&&!b._dojo_click&&(new Date).getTime()<=E+1E3&&("INPUT"!=c.tagName||!h.contains(c,"dijitOffScreen"))&&(b.stopPropagation(),b.stopImmediatePropagation&&b.stopImmediatePropagation(),"click"==a&&("INPUT"!=c.tagName||"radio"==c.type&&(h.contains(c,"dijitCheckBoxInput")||h.contains(c,"mblRadioButton"))||"checkbox"==c.type&&
(h.contains(c,"dijitCheckBoxInput")||h.contains(c,"mblCheckBox")))&&"TEXTAREA"!=c.tagName&&"AUDIO"!=c.tagName&&"VIDEO"!=c.tagName&&b.preventDefault())},!0)};var p=function(a){g=r?m.isDescendant(b.doc.elementFromPoint(a.changedTouches?a.changedTouches[0].pageX-b.global.pageXOffset:a.clientX,a.changedTouches?a.changedTouches[0].pageY-b.global.pageYOffset:a.clientY),z):g&&(a.changedTouches?a.changedTouches[0].target:a.target)==z&&Math.abs((a.changedTouches?a.changedTouches[0].pageX-b.global.pageXOffset:
a.clientX)-y)<=F&&Math.abs((a.changedTouches?a.changedTouches[0].pageY-b.global.pageYOffset:a.clientY)-A)<=B};v=!0;b.doc.addEventListener(c,function(a){d.isRight(a)||(p(a),r&&a.preventDefault())},!0);b.doc.addEventListener(e,function(a){if(!d.isRight(a)&&(p(a),g)){var b=function(b){var g=document.createEvent("MouseEvents");g._dojo_click=!0;g.initMouseEvent(b,!0,!0,a.view,a.detail,e.screenX,e.screenY,e.clientX,e.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null);return g};E=(new Date).getTime();
var c=r?z:a.target;"LABEL"===c.tagName&&(c=m.byId(c.getAttribute("for"))||c);var e=a.changedTouches?a.changedTouches[0]:a,k=b("mousedown"),f=b("mouseup"),h=b("click");setTimeout(function(){l.emit(c,"mousedown",k);l.emit(c,"mouseup",f);l.emit(c,"click",h);E=(new Date).getTime()},0)}},!0);a("click");a("mousedown");a("mouseup")}}}var x=5>n("ios"),w=n("pointer-events")||n("MSPointer"),t=function(){var a={},b;for(b in{down:1,move:1,up:1,cancel:1,over:1,out:1})a[b]=n("MSPointer")?"MSPointer"+b.charAt(0).toUpperCase()+
b.slice(1):"pointer"+b;return a}(),p=n("touch-events"),v,g,r=!1,z,y,A,F,B,E,C,G;n("touch")&&(w?c(function(){b.doc.addEventListener(t.down,function(a){u(a,t.move,t.up)},!0)}):c(function(){function a(a){var b=e.delegate(a,{bubbles:!0});6<=n("ios")&&(b.touches=a.touches,b.altKey=a.altKey,b.changedTouches=a.changedTouches,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.targetTouches=a.targetTouches);return b}G=b.body();b.doc.addEventListener("touchstart",function(a){C=(new Date).getTime();
var b=G;G=a.target;l.emit(b,"dojotouchout",{relatedTarget:G,bubbles:!0});l.emit(G,"dojotouchover",{relatedTarget:b,bubbles:!0});u(a,"touchmove","touchend")},!0);l(b.doc,"touchmove",function(g){C=(new Date).getTime();var c=b.doc.elementFromPoint(g.pageX-(x?0:b.global.pageXOffset),g.pageY-(x?0:b.global.pageYOffset));c&&(G!==c&&(l.emit(G,"dojotouchout",{relatedTarget:c,bubbles:!0}),l.emit(c,"dojotouchover",{relatedTarget:G,bubbles:!0}),G=c),l.emit(c,"dojotouchmove",a(g))||g.preventDefault())});l(b.doc,
"touchend",function(g){C=(new Date).getTime();var c=b.doc.elementFromPoint(g.pageX-(x?0:b.global.pageXOffset),g.pageY-(x?0:b.global.pageYOffset))||b.body();l.emit(c,"dojotouchend",a(g))})}));f={press:k("mousedown","touchstart",t.down),move:k("mousemove","dojotouchmove",t.move),release:k("mouseup","dojotouchend",t.up),cancel:k(d.leave,"touchcancel",w?t.cancel:null),over:k("mouseover","dojotouchover",t.over),out:k("mouseout","dojotouchout",t.out),enter:d._eventHandler(k("mouseover","dojotouchover",
t.over)),leave:d._eventHandler(k("mouseout","dojotouchout",t.out))};return a.touch=f})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(a,f,m,h,e,l,n){f.add("rtl-adjust-position-for-verticalScrollBar",function(a,b){a=m.body(b);b=n.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},a,"last");var c=n.create("div",
{style:{overflow:"hidden",direction:"ltr"}},b,"last"),d=0!=e.position(c).x;b.removeChild(c);a.removeChild(b);return d});f.add("position-fixed-support",function(a,b){a=m.body(b);b=n.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},a,"last");var c=n.create("span",{style:{position:"fixed",left:"0",top:"0"}},b,"last"),d=e.position(c).x!=e.position(b).x;b.removeChild(c);a.removeChild(b);return d});var d={getBox:function(a){a=a||m.doc;var b="BackCompat"==a.compatMode?m.body(a):
a.documentElement,c=e.docScroll(a);if(f("touch")){var h=d.get(a);a=h.innerWidth||b.clientWidth;b=h.innerHeight||b.clientHeight}else a=b.clientWidth,b=b.clientHeight;return{l:c.x,t:c.y,w:a,h:b}},get:function(a){if(f("ie")&&d!==document.parentWindow){a.parentWindow.execScript("document._parentWindow \x3d window;","Javascript");var b=a._parentWindow;a._parentWindow=null;return b}return a.parentWindow||a.defaultView},scrollIntoView:function(a,b){try{a=h.byId(a);var c=a.ownerDocument||m.doc,d=m.body(c),
n=c.documentElement||d.parentNode,x=f("ie")||f("trident"),w=f("webkit");if(a!=d&&a!=n)if(!(f("mozilla")||x||w||f("opera")||f("trident")||f("edge"))&&"scrollIntoView"in a)a.scrollIntoView(!1);else{var t="BackCompat"==c.compatMode,p=Math.min(d.clientWidth||n.clientWidth,n.clientWidth||d.clientWidth),v=Math.min(d.clientHeight||n.clientHeight,n.clientHeight||d.clientHeight),c=w||t?d:n,g=b||e.position(a),r=a.parentNode;b=function(a){return 6>=x||7==x&&t?!1:f("position-fixed-support")&&"fixed"==l.get(a,
"position").toLowerCase()};var z=this,w=function(a,b,g){"BODY"==a.tagName||"HTML"==a.tagName?z.get(a.ownerDocument).scrollBy(b,g):(b&&(a.scrollLeft+=b),g&&(a.scrollTop+=g))};if(!b(a))for(;r;){r==d&&(r=c);var y=e.position(r),A=b(r),F="rtl"==l.getComputedStyle(r).direction.toLowerCase();if(r==c)y.w=p,y.h=v,c==n&&(x||f("trident"))&&F&&(y.x+=c.offsetWidth-y.w),y.x=0,y.y=0;else{var B=e.getPadBorderExtents(r);y.w-=B.w;y.h-=B.h;y.x+=B.l;y.y+=B.t;var E=r.clientWidth,C=y.w-E;0<E&&0<C&&(F&&f("rtl-adjust-position-for-verticalScrollBar")&&
(y.x+=C),y.w=E);E=r.clientHeight;C=y.h-E;0<E&&0<C&&(y.h=E)}A&&(0>y.y&&(y.h+=y.y,y.y=0),0>y.x&&(y.w+=y.x,y.x=0),y.y+y.h>v&&(y.h=v-y.y),y.x+y.w>p&&(y.w=p-y.x));var G=g.x-y.x,L=g.y-y.y,U=G+g.w-y.w,P=L+g.h-y.h,H,K;0<U*G&&(r.scrollLeft||r==c||r.scrollWidth>r.offsetHeight)&&(H=Math[0>G?"max":"min"](G,U),F&&(8==x&&!t||5<=f("trident"))&&(H=-H),K=r.scrollLeft,w(r,H,0),H=r.scrollLeft-K,g.x-=H);0<P*L&&(r.scrollTop||r==c||r.scrollHeight>r.offsetHeight)&&(H=Math.ceil(Math[0>L?"max":"min"](L,P)),K=r.scrollTop,
w(r,0,H),H=r.scrollTop-K,g.y-=H);r=r!=c&&!A&&r.parentNode}}}catch(J){console.error("scrollIntoView: "+J),a.scrollIntoView(!1)}}};a.setObject("dojo.window",d);return d})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../has ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),function(a,f,m,h,e,l,n,d,c,b,k,q,u){function x(a,b){"touchAction"in document.body.style?w="touchAction":"msTouchAction"in document.body.style&&
(w="msTouchAction");t=function(a,b){a.style[w]=b};t(a,b)}var w,t=function(){};n("touch-action")&&(t=x);return f("dojo.dnd.Moveable",[l],{handle:"",delay:0,skip:!1,constructor:function(a,c){this.node=h.byId(a);t(this.node,"none");c||(c={});this.handle=c.handle?h.byId(c.handle):null;this.handle||(this.handle=this.node);this.delay=0<c.delay?c.delay:0;this.skip=c.skip;this.mover=c.mover?c.mover:q;this.events=[d(this.handle,b.press,m.hitch(this,"onMouseDown")),d(this.handle,"dragstart",m.hitch(this,"onSelectStart")),
d(this.handle,"selectstart",m.hitch(this,"onSelectStart"))]},markupFactory:function(a,b,g){return new g(b,a)},destroy:function(){a.forEach(this.events,function(a){a.remove()});t(this.node,"");this.events=this.node=this.handle=null},onMouseDown:function(a){if(!this.skip||!k.isFormElement(a)){if(this.delay)this.events.push(d(this.handle,b.move,m.hitch(this,"onMouseMove")),d(this.handle.ownerDocument,b.release,m.hitch(this,"onMouseUp"))),this._lastX=a.pageX,this._lastY=a.pageY;else this.onDragDetected(a);
a.stopPropagation();a.preventDefault()}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onMouseUp(a),this.onDragDetected(a);a.stopPropagation();a.preventDefault()},onMouseUp:function(a){for(var b=0;2>b;++b)this.events.pop().remove();a.stopPropagation();a.preventDefault()},onSelectStart:function(a){this.skip&&k.isFormElement(a)||(a.stopPropagation(),a.preventDefault())},onDragDetected:function(a){new this.mover(this.node,a,this)},
onMoveStart:function(a){c.publish("/dnd/move/start",a);e.add(u.body(),"dojoMove");e.add(this.node,"dojoMoveItem")},onMoveStop:function(a){c.publish("/dnd/move/stop",a);e.remove(u.body(),"dojoMove");e.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var g=a.node.style;g.left=b.l+"px";g.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}})})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],
function(a,f,m,h){var e=m.getObject("dojo.dnd",!0);e.getCopyKeyState=function(e){return e[a("mac")?"metaKey":"ctrlKey"]};e._uniqueId=0;e.getUniqueId=function(){var a;do a=f._scopeName+"Unique"+ ++e._uniqueId;while(h.byId(a));return a};e._empty={};e.isFormElement=function(a){a=a.target;3==a.nodeType&&(a=a.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+a.tagName.toLowerCase()+" ")};return e})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u){return f("dojo.dnd.Mover",[c],{constructor:function(a,c,d){function e(a){a.preventDefault();a.stopPropagation()}this.node=l.byId(a);this.marginBox={l:c.pageX,t:c.pageY};this.mouseButton=c.button;c=this.host=d;a=a.ownerDocument;this.events=[b(a,k.move,m.hitch(this,"onFirstMove")),b(a,k.move,m.hitch(this,"onMouseMove")),b(a,k.release,m.hitch(this,"onMouseUp")),b(a,"dragstart",e),b(a.body,"selectstart",e)];u.autoScrollStart(a);if(c&&c.onMoveStart)c.onMoveStart(this)},
onMouseMove:function(a){u.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);a.preventDefault();a.stopPropagation()},onMouseUp:function(a){(h("webkit")&&h("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();a.preventDefault();a.stopPropagation()},onFirstMove:function(a){var b=this.node.style,c,k=this.host;switch(b.position){case "relative":case "absolute":c=Math.round(parseFloat(b.left))||0;b=Math.round(parseFloat(b.top))||0;break;
default:b.position="absolute";b=n.getMarginBox(this.node);c=e.doc.body;var f=d.getComputedStyle(c),g=n.getMarginBox(c,f),f=n.getContentBox(c,f);c=b.l-(f.l-g.l);b=b.t-(f.t-g.t)}this.marginBox.l=c-this.marginBox.l;this.marginBox.t=b-this.marginBox.t;if(k&&k.onFirstMove)k.onFirstMove(this,a);this.events.shift().remove()},destroy:function(){a.forEach(this.events,function(a){a.remove()});var b=this.host;if(b&&b.onMoveStop)b.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),
function(a,f,m,h,e,l){var n={};a.setObject("dojo.dnd.autoscroll",n);n.getViewport=l.getBox;n.V_TRIGGER_AUTOSCROLL=32;n.H_TRIGGER_AUTOSCROLL=32;n.V_AUTOSCROLL_VALUE=16;n.H_AUTOSCROLL_VALUE=16;var d,c=m.doc,b=Infinity,k=Infinity;n.autoScrollStart=function(a){c=a;d=l.getBox(c);a=m.body(c).parentNode;b=Math.max(a.scrollHeight-d.h,0);k=Math.max(a.scrollWidth-d.w,0)};n.autoScroll=function(a){var e=d||l.getBox(c),f=m.body(c).parentNode,h=0,q=0;a.clientX<n.H_TRIGGER_AUTOSCROLL?h=-n.H_AUTOSCROLL_VALUE:a.clientX>
e.w-n.H_TRIGGER_AUTOSCROLL&&(h=Math.min(n.H_AUTOSCROLL_VALUE,k-f.scrollLeft));a.clientY<n.V_TRIGGER_AUTOSCROLL?q=-n.V_AUTOSCROLL_VALUE:a.clientY>e.h-n.V_TRIGGER_AUTOSCROLL&&(q=Math.min(n.V_AUTOSCROLL_VALUE,b-f.scrollTop));window.scrollBy(h,q)};n._validNodes={div:1,p:1,td:1};n._validOverflow={auto:1,scroll:1};n.autoScrollNodes=function(a){for(var b,c,d,k,p,l=0,g=0,r=a.target;r;){if(1==r.nodeType&&r.tagName.toLowerCase()in n._validNodes){d=e.getComputedStyle(r);p=d.overflowX.toLowerCase()in n._validOverflow;
k=d.overflowY.toLowerCase()in n._validOverflow;if(p||k)b=h.getContentBox(r,d),c=h.position(r,!0);if(p){d=Math.min(n.H_TRIGGER_AUTOSCROLL,b.w/2);p=a.pageX-c.x;if(f("webkit")||f("opera"))p+=m.body().scrollLeft;l=0;0<p&&p<b.w&&(p<d?l=-d:p>b.w-d&&(l=d),r.scrollLeft+=l)}if(k){k=Math.min(n.V_TRIGGER_AUTOSCROLL,b.h/2);d=a.pageY-c.y;if(f("webkit")||f("opera"))d+=m.body().scrollTop;g=0;0<d&&d<b.h&&(d<k?g=-k:d>b.h-k&&(g=k),r.scrollTop+=g)}if(l||g)return}try{r=r.parentNode}catch(z){r=null}}n.autoScroll(a)};
return n})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(a,f){var m=f.prototype.onMove;return a("dojo.dnd.TimedMoveable",f,{timeout:40,constructor:function(a,e){e||(e={});e.timeout&&"number"==typeof e.timeout&&0<=e.timeout&&(this.timeout=e.timeout)},onMoveStop:function(a){a._timer&&(clearTimeout(a._timer),m.call(this,a,a._leftTop));f.prototype.onMoveStop.apply(this,arguments)},onMove:function(a,e){a._leftTop=e;if(!a._timer){var f=this;a._timer=setTimeout(function(){a._timer=
null;m.call(f,a,a._leftTop)},this.timeout)}}})})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t,p){var v,g,r=new (f([q,n],{curNode:null,activeStack:[],constructor:function(){var b=d.hitch(this,function(a){m.isDescendant(this.curNode,a)&&this.set("curNode",
null);m.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});a.before(l,"empty",b);a.before(l,"destroy",b)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,b){var g=this,d=a.document&&a.document.body;if(d){var e=k("pointer-events")?"pointerdown":k("MSPointer")?"MSPointerDown":k("touch-events")?"mousedown, touchstart":"mousedown",p=c(a.document,e,function(a){a&&a.target&&null==a.target.parentNode||g._onTouchNode(b||a.target,"mouse")}),f=c(d,"focusin",
function(a){if(a.target.tagName){var c=a.target.tagName.toLowerCase();"#document"!=c&&"body"!=c&&(w.isFocusable(a.target)?g._onFocusNode(b||a.target):g._onTouchNode(b||a.target))}}),r=c(d,"focusout",function(a){g._onBlurNode(b||a.target)});return{remove:function(){p.remove();f.remove();r.remove();d=p=f=r=null}}}},_onBlurNode:function(a){a=(new Date).getTime();a<v+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(d.hitch(this,function(){this.set("prevNode",
this.curNode);this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),a<g+100||(this._clearActiveWidgetsTimer=setTimeout(d.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(a,b){g=(new Date).getTime();this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);e.contains(a,"dijitPopup")&&(a=a.firstChild);var c=[];try{for(;a;){var d=h.get(a,
"dijitPopupParent");if(d)a=t.byId(d).domNode;else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===u.body())break;a=x.get(a.ownerDocument).frameElement}else{var k=a.getAttribute&&a.getAttribute("widgetId"),p=k&&t.byId(k);!p||"mouse"==b&&p.get("disabled")||c.unshift(k);a=a.parentNode}}}catch(G){}this._setStack(c,b)},_onFocusNode:function(a){a&&9!=a.nodeType&&(v=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=
this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var g=this.activeStack,c=g.length-1,d=a.length-1;if(a[d]!=g[c]){this.set("activeStack",a);var e;for(e=c;0<=e&&g[e]!=a[e];e--)if(c=t.byId(g[e]))c._hasBeenBlurred=!0,c.set("focused",!1),c._focusManager==this&&c._onBlur(b),this.emit("widget-blur",c,b);for(e++;e<=d;e++)if(c=t.byId(a[e]))c.set("focused",!0),c._focusManager==this&&c._onFocus(b),this.emit("widget-focus",c,b)}},focus:function(a){if(a)try{a.focus()}catch(A){}}}));
b(function(){var a=r.registerWin(x.get(document));k("ie")&&c(window,"unload",function(){a&&(a.remove(),a=null)})});p.focus=function(a){r.focus(a)};for(var z in r)/^_/.test(z)||(p.focus[z]="function"==typeof r[z]?d.hitch(r,z):r[z]);r.watch(function(a,b,g){p.focus[a]=g});return r})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(a,f,m,h){return a("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(a){var e=this._attrPairNames;return e[a]?
e[a]:e[a]={s:"_"+a+"Setter",g:"_"+a+"Getter"}},postscript:function(a){a&&this.set(a)},_get:function(a,f){return"function"===typeof this[f.g]?this[f.g]():this[a]},get:function(a){return this._get(a,this._getAttrNames(a))},set:function(a,f){if("object"===typeof a){for(var e in a)a.hasOwnProperty(e)&&"_watchCallbacks"!=e&&this.set(e,a[e]);return this}e=this._getAttrNames(a);var d=this._get(a,e);e=this[e.s];var c;"function"===typeof e?c=e.apply(this,Array.prototype.slice.call(arguments,1)):this[a]=f;
if(this._watchCallbacks){var b=this;h(c,function(){b._watchCallbacks(a,d,f)})}return this},_changeAttrValue:function(a,f){var e=this.get(a);this[a]=f;this._watchCallbacks&&this._watchCallbacks(a,e,f);return this},watch:function(a,f){var e=this._watchCallbacks;if(!e)var d=this,e=this._watchCallbacks=function(a,c,f,h){var b=function(b){if(b){b=b.slice();for(var e=0,k=b.length;e<k;e++)b[e].call(d,a,c,f)}};b(e["_"+a]);h||b(e["*"])};f||"function"!==typeof a?a="_"+a:(f=a,a="*");var c=e[a];"object"!==typeof c&&
(c=e[a]=[]);c.push(f);a={};a.unwatch=a.remove=function(){var a=m.indexOf(c,f);-1<a&&c.splice(a,1)};return a}})})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),function(a,f,m,h,e,l,n){var d={_isElementShown:function(a){var b=h.get(a);return"hidden"!=b.visibility&&"collapsed"!=b.visibility&&"none"!=b.display&&"hidden"!=m.get(a,"type")},hasDefaultTabStop:function(a){switch(a.nodeName.toLowerCase()){case "a":return m.has(a,
"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var b;try{var c=a.contentDocument;if("designMode"in c&&"on"==c.designMode)return!0;b=c.body}catch(q){try{b=a.contentWindow.document.body}catch(u){return!1}}return b&&("true"==b.contentEditable||b.firstChild&&"true"==b.firstChild.contentEditable);default:return"true"==a.contentEditable}},effectiveTabIndex:function(a){if(!m.get(a,"disabled"))return m.has(a,"tabIndex")?+m.get(a,"tabIndex"):
d.hasDefaultTabStop(a)?0:void 0},isTabNavigable:function(a){return 0<=d.effectiveTabIndex(a)},isFocusable:function(a){return-1<=d.effectiveTabIndex(a)},_getTabNavigable:function(a){function b(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&a.name&&a.name.toLowerCase()}function c(a){return v[b(a)]||a}var e,f,h,n,t,p,v={},g=d._isElementShown,r=d.effectiveTabIndex,z=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(!(1!=a.nodeType||9>=l("ie")&&"HTML"!==a.scopeName)&&
g(a)){var c=r(a);if(0<=c){if(0==c)e||(e=a),f=a;else if(0<c){if(!h||c<n)n=c,h=a;if(!t||c>=p)p=c,t=a}c=b(a);m.get(a,"checked")&&c&&(v[c]=a)}"SELECT"!=a.nodeName.toUpperCase()&&z(a)}};g(a)&&z(a);return{first:c(e),last:c(f),lowest:c(h),highest:c(t)}},getFirstInTabbingOrder:function(a,b){a=d._getTabNavigable(f.byId(a,b));return a.lowest?a.lowest:a.first},getLastInTabbingOrder:function(a,b){a=d._getTabNavigable(f.byId(a,b));return a.last?a.last:a.highest}};e.mixin(n,d);return d})},"dijit/_base/manager":function(){define(["dojo/_base/array",
"dojo/_base/config","dojo/_base/lang","../registry","../main"],function(a,f,m,h,e){var l={};a.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),function(a){l[a]=h[a]});m.mixin(l,{defaultDuration:f.defaultDuration||200});m.mixin(e,l);return e})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u){function x(){}function w(a){return function(b,c,g,d){return b&&"string"==typeof c&&b[c]==x?b.on(c.substring(2).toLowerCase(),n.hitch(g,d)):a.apply(m,arguments)}}a.around(m,"connect",w);l.connect&&a.around(l,"connect",w);a=h("dijit._Widget",[k,q,u],{onClick:x,onDblClick:x,onKeyDown:x,onKeyPress:x,onKeyUp:x,onMouseDown:x,onMouseMove:x,onMouseOut:x,onMouseOver:x,onMouseLeave:x,onMouseEnter:x,onMouseUp:x,constructor:function(a){this._toConnect={};for(var b in a)this[b]===
x&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===x?m.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,b){l.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.",
"","2.0");this.set(a,b)},attr:function(a,b){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){l.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?d("[widgetId]",this.containerNode).map(b.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});e("dijit-legacy-requires")&&c(0,function(){require(["dijit/_base"])});
return a})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t,p,v,g,r,z,y,A){function F(a){return function(b){d[b?
"set":"remove"](this.domNode,a,b);this._set(a,b)}}u.add("dijit-legacy-requires",!x.isAsync);u.add("dojo-bidi",!1);u("dijit-legacy-requires")&&p(0,function(){a(["dijit/_base/manager"])});var B={};h=l("dijit._WidgetBase",[v,z],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:F("lang"),dir:"",_setDirAttr:F("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",
a)},attributeMap:{},_blankGif:h.blankGif||a.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var b=a.prototype,g=a._setterAttrs=[],a=a._onMap={},c;for(c in b.attributeMap)g.push(c);for(c in b)/^on/.test(c)&&(a[c.substring(2).toLowerCase()]=c),/^_set[A-Z](.*)Attr$/.test(c)&&(c=c.charAt(4).toLowerCase()+c.substr(5,c.length-9),b.attributeMap&&c in b.attributeMap||g.push(c))}},postscript:function(a,b){this.create(a,b)},create:function(a,b){this._introspect();
this.srcNodeRef=n.byId(b);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);a&&(this.params=a,w.mixin(this,a));this.postMixInProperties();this.id||(this.id=A.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=r.body(this.ownerDocument);A.add(this);
this.buildRendering();var g;this.domNode&&(this._applyAttributes(),(a=this.srcNodeRef)&&a.parentNode&&this.domNode!==a&&(a.parentNode.replaceChild(this.domNode,a),g=!0),this.domNode.setAttribute("widgetId",this.id));this.postCreate();g&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},b;for(b in this.params||{})a[b]=this._get(b);f.forEach(this.constructor._setterAttrs,function(b){if(!(b in a)){var g=this._get(b);g&&this.set(b,g)}},this);for(b in a)this.set(b,a[b])},postMixInProperties:function(){},
buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(f.map(a,function(a){return a+"Rtl"})));c.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,f.forEach(this.getChildren(),function(a){a._started||a._destroyed||!w.isFunction(a.startup)||(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=
!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function b(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a)}this._beingDestroyed=!0;this.uninitialize();f.forEach(this._connects,w.hitch(this,"disconnect"));f.forEach(this._supportingWidgets,b);this.domNode&&f.forEach(A.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);A.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe);
this.domNode&&(a?d.remove(this.domNode,"widgetId"):b.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||b.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){f.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;w.isObject(a)?q.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,b,g){g=3<=
arguments.length?g:this.attributeMap[a];f.forEach(w.isArray(g)?g:[g],function(g){var e=this[g.node||g||"domNode"];switch(g.type||"attribute"){case "attribute":w.isFunction(b)&&(b=w.hitch(this,b));g=g.attribute?g.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;e.tagName?d.set(e,g,b):e.set(g,b);break;case "innerText":e.innerHTML="";e.appendChild(this.ownerDocument.createTextNode(b));break;case "innerHTML":e.innerHTML=b;break;case "class":c.replace(e,b,this[a]);break;case "toggleClass":c.toggle(e,
g.className||a,b)}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this._get(a)},set:function(a,b){if("object"===typeof a){for(var g in a)this.set(g,a[g]);return this}g=this._getAttrNames(a);var c=this[g.s];if(w.isFunction(c))var d=c.apply(this,Array.prototype.slice.call(arguments,1));else{var c=this.focusNode&&!w.isFunction(this.focusNode)?"focusNode":"domNode",e=this[c]&&this[c].tagName,k;if((k=e)&&!(k=B[e])){k=this[c];var p={},f;for(f in k)p[f.toLowerCase()]=!0;
k=B[e]=p}f=k;g=a in this.attributeMap?this.attributeMap[a]:g.s in this?this[g.s]:f&&g.l in f&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?c:null;null!=g&&this._attrToDom(a,b,g);this._set(a,b)}return d||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var g=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+g+"Attr",g:"_get"+g+"Attr",l:g.toLowerCase()}},_set:function(a,b){var g=
this[a];this[a]=b;!this._created||g===b||g!==g&&b!==b||(this._watchCallbacks&&this._watchCallbacks(a,g,b),this.emit("attrmodified-"+a,{detail:{prevValue:g,newValue:b}}))},_get:function(a){return this[a]},emit:function(a,b,g){b=b||{};void 0===b.bubbles&&(b.bubbles=!0);void 0===b.cancelable&&(b.cancelable=!0);b.detail||(b.detail={});b.detail.widget=this;var c,d=this["on"+a];d&&(c=d.apply(this,g?g:[b]));this._started&&!this._beingDestroyed&&t.emit(this.domNode,a.toLowerCase(),b);return c},on:function(a,
b){var g=this._onMap(a);return g?m.after(this,g,b,!0):this.own(t(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,g=b._onMap;if(!g){var g=b._onMap={},c;for(c in b.prototype)/^on/.test(c)&&(g[c.replace(/^on/,"").toLowerCase()]=c)}return g["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?A.findWidgets(this.containerNode):[]},getParent:function(){return A.getEnclosingWidget(this.domNode.parentNode)},
connect:function(a,b,g){return this.own(e.connect(a,b,this,g))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(g.subscribe(a,w.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():k.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=q.get(this.domNode,"display")},placeAt:function(a,g){var c=!a.tagName&&A.byId(a);!c||!c.addChild||g&&"number"!==typeof g?(a=c&&"domNode"in
c?c.containerNode&&!/after|before|replace/.test(g||"")?c.containerNode:c.domNode:n.byId(a,this.ownerDocument),b.place(this.domNode,a,g),!this._started&&(this.getParent()||{})._started&&this.startup()):c.addChild(this,g);return this},defer:function(a,b){var g=setTimeout(w.hitch(this,function(){g&&(g=null,this._destroyed||w.hitch(this,a)())}),b||0);return{remove:function(){g&&(clearTimeout(g),g=null);return null}}}});u("dojo-bidi")&&h.extend(y);return h})},"dijit/Destroyable":function(){define(["dojo/_base/array",
"dojo/aspect","dojo/_base/declare"],function(a,f,m){return m("dijit.Destroyable",null,{destroy:function(a){this._destroyed=!0},own:function(){var h=["destroyRecursive","destroy","remove"];a.forEach(arguments,function(e){function l(){d.remove();a.forEach(c,function(a){a.remove()})}var n,d=f.before(this,"destroy",function(a){e[n](a)}),c=[];e.then?(n="cancel",e.then(l,l)):a.forEach(h,function(a){"function"===typeof e[a]&&(n||(n=a),c.push(f.after(e,a,l,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),
function(a,f,m,h,e,l){a=h("dijit._OnDijitClickMixin",null,{connect:function(a,d,c){return this.inherited(arguments,[a,"ondijitclick"==d?l:d,c])}});a.a11yclick=l;return a})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(a,f,m,h){function e(d){if((d.keyCode===a.ENTER||d.keyCode===a.SPACE)&&!/input|button|textarea/i.test(d.target.nodeName))for(d=d.target;d;d=d.parentNode)if(d.dojoClick)return!0}var l;m(document,"keydown",function(a){e(a)?(l=a.target,a.preventDefault()):
l=null});m(document,"keyup",function(a){e(a)&&a.target==l&&(l=null,m.emit(a.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,metaKey:a.metaKey,altKey:a.altKey,_origType:a.type}))});var n=function(a,c){a.dojoClick=!0;return m(a,"click",c)};n.click=n;n.press=function(d,c){var b=m(d,h.press,function(a){("mousedown"!=a.type||f.isLeft(a))&&c(a)}),e=m(d,"keydown",function(b){b.keyCode!==a.ENTER&&b.keyCode!==a.SPACE||c(b)});return{remove:function(){b.remove();e.remove()}}};
n.release=function(d,c){var b=m(d,h.release,function(a){("mouseup"!=a.type||f.isLeft(a))&&c(a)}),e=m(d,"keyup",function(b){b.keyCode!==a.ENTER&&b.keyCode!==a.SPACE||c(b)});return{remove:function(){b.remove();e.remove()}}};n.move=h.move;return n})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(a,f,m,h){h.extend(f,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});
return m("dijit._FocusMixin",null,{_focusManager:a})})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(a,f,m,h,e){var l=e.doc.documentElement;e=h("ie");var n=h("trident"),d=h("opera"),c=Math.floor,b=h("ff"),k=a.boxModel.replace(/-/,""),d={dj_quirks:h("quirks"),dj_opera:d,dj_khtml:h("khtml"),dj_webkit:h("webkit"),dj_safari:h("safari"),dj_chrome:h("chrome"),dj_edge:h("edge"),dj_gecko:h("mozilla"),dj_ios:h("ios"),dj_android:h("android")};
e&&(d.dj_ie=!0,d["dj_ie"+c(e)]=!0,d.dj_iequirks=h("quirks"));n&&(d.dj_trident=!0,d["dj_trident"+c(n)]=!0);b&&(d["dj_ff"+c(b)]=!0);d["dj_"+k]=!0;var q="",u;for(u in d)d[u]&&(q+=u+" ");l.className=f.trim(l.className+" "+q);m(function(){if(!a.isBodyLtr()){var b="dj_rtl dijitRtl "+q.replace(/ /g,"-rtl ");l.className=f.trim(l.className+" "+b+"dj_rtl dijitRtl "+q.replace(/ /g,"-rtl "))}});return h})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(a,
f,m,h){m(function(){f("highcontrast")&&a.add(h.body(),"dijit_a11y")});return f})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(a,f,m,h,e,l,n){e.add("highcontrast",function(){var d=n.doc.createElement("div");try{d.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(f.blankGif||a.toUrl("./resources/blank.gif"))+'");';n.body().appendChild(d);
var c=h.getComputedStyle(d),b=c.backgroundImage;return c.borderTopColor==c.borderRightColor||b&&("none"==b||"url(invalid-url:)"==b)}catch(k){return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: "+k.toString()),!1}finally{8>=e("ie")?d.outerHTML="":n.body().removeChild(d)}});l(function(){e("highcontrast")&&m.add(n.body(),"dj_a11y")});return e})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),
function(a,f,m,h,e,l,n,d){var c=f("dijit._TemplatedMixin",d,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(a){var b=this.declaredClass,c=this;return n.substitute(a,this,function(a,d){"!"==d.charAt(0)&&(a=h.getObject(d.substr(1),!1,c));if("undefined"==typeof a)throw Error(b+" template:"+d);return null==a?"":"!"==d.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;",
"\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=a(this.templatePath,{sanitize:!0}));var b=c.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),d;if(h.isString(b)){if(d=m.toDom(this._stringRepl(b),this.ownerDocument),1!=d.nodeType)throw Error("Invalid template: "+b);}else d=b.cloneNode(!0);this.domNode=d}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);
this._rendered=!0},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)}});c._templateCache={};c.getCachedTemplate=function(a,d,e){var b=c._templateCache,k=a,f=b[k];if(f){try{if(!f.ownerDocument||f.ownerDocument==(e||document))return f}catch(t){}m.destroy(f)}a=n.trim(a);if(d||a.match(/\$\{([^\}]+)\}/g))return b[k]=a;d=m.toDom(a,e);if(1!=d.nodeType)throw Error("Invalid template: "+a);return b[k]=d};l("ie")&&e(window,"unload",function(){var a=
c._templateCache,d;for(d in a){var e=a[d];"object"==typeof e&&m.destroy(e);delete a[d]}});return c})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(a){return a.cache})},"dojo/text":function(){define(["./_base/kernel","require","./has","./has!host-browser?./request"],function(a,f,m,h){var e;m("host-browser")?e=function(a,c,d){h(a,{sync:!!c,headers:{"X-Requested-With":null}}).then(d)}:f.getText?e=f.getText:console.error("dojo/text plugin failed to load because loader does not support getText");
var l={},n=function(a){if(a){a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}else a="";return a},d={},c={};a.cache=function(a,c,d){var b;"string"==typeof a?/\//.test(a)?(b=a,d=c):b=f.toUrl(a.replace(/\./g,"/")+(c?"/"+c:"")):(b=a+"",d=c);a=void 0!=d&&"string"!=typeof d?d.value:d;d=d&&d.sanitize;if("string"==typeof a)return l[b]=a,d?n(a):a;if(null===a)return delete l[b],null;b in l||e(b,!0,function(a){l[b]=
a});return d?n(l[b]):l[b]};return{dynamic:!0,normalize:function(a,c){a=a.split("!");var b=a[0];return(/^\./.test(b)?c(b):b)+(a[1]?"!"+a[1]:"")},load:function(a,k,f){a=a.split("!");var b=1<a.length,h=a[0],m=k.toUrl(a[0]);a="url:"+m;var q=d,p=function(a){f(b?n(a):a)};h in l?q=l[h]:k.cache&&a in k.cache?q=k.cache[a]:m in l&&(q=l[m]);if(q===d)if(c[m])c[m].push(p);else{var v=c[m]=[p];e(m,!k.async,function(a){l[h]=l[m]=a;for(var b=0;b<v.length;)v[b++](a);delete c[m]})}else p(q)}}})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),
function(a,f,m,h,e,l,n,d,c){var b=e.delegate(d,{mouseenter:l.enter,mouseleave:l.leave,keypress:m._keypress}),k;m=h("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var b=a;;)if(1==b.nodeType&&(this._processTemplateNode(b,function(a,b){return a.getAttribute(b)},this._attach)||
this.searchContainerNode)&&b.firstChild)b=b.firstChild;else{if(b==a)break;for(;!b.nextSibling;)if(b=b.parentNode,b==a)return;b=b.nextSibling}},_processTemplateNode:function(a,b,c){var d=!0,k=this.attachScope||this,f=b(a,"dojoAttachPoint")||b(a,"data-dojo-attach-point");if(f)for(var h=f.split(/\s*,\s*/);f=h.shift();)e.isArray(k[f])?k[f].push(a):k[f]=a,d="containerNode"!=f,this._attachPoints.push(f);if(b=b(a,"dojoAttachEvent")||b(a,"data-dojo-attach-event"))for(f=b.split(/\s*,\s*/),h=e.trim;b=f.shift();)if(b){var g=
null;-1!=b.indexOf(":")?(g=b.split(":"),b=h(g[0]),g=h(g[1])):b=h(b);g||(g=b);this._attachEvents.push(c(a,b,e.hitch(k,g)))}return d},_attach:function(c,d,e){d=d.replace(/^on/,"").toLowerCase();d="dijitclick"==d?k||(k=a("./a11yclick")):b[d]||d;return n(c,d,e)},_detachTemplateNodes:function(){var a=this.attachScope||this;f.forEach(this._attachPoints,function(b){delete a[b]});this._attachPoints=[];f.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();
this.inherited(arguments)}});e.extend(c,{dojoAttachEvent:"",dojoAttachPoint:""});return m})},"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),function(a,f,m,h,e,l,n,d,c,b,k,q){f=f("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);a.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),
function(a){this.watch(a,l.hitch(this,"_setStateClass"))},this);for(var b in this.cssStateNodes||{})this._trackMouseState(this[b],this.cssStateNodes[b]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",
!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function b(b){c=c.concat(a.map(c,function(a){return a+b}),"dijit"+b)}var c=this.baseClass.split(" ");this.isLeftToRight()||b("Rtl");var d="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&b(d);this.state&&b(this.state);
this.selected&&b("Selected");this._opened&&b("Opened");this.disabled?b("Disabled"):this.readOnly?b("ReadOnly"):this.active?b("Active"):this.hovering&&b("Hover");this.focused&&b("Focused");var d=this.stateNode||this.domNode,e={};a.forEach(d.className.split(" "),function(a){e[a]=!0});"_stateClasses"in this&&a.forEach(this._stateClasses,function(a){delete e[a]});a.forEach(c,function(a){e[a]=!0});var k=[],f;for(f in e)k.push(f);d.className=k.join(" ");this._stateClasses=c},_subnodeCssMouseEvent:function(a,
b,c){function d(c){h.toggle(a,b+"Active",c)}if(!this.disabled&&!this.readOnly)switch(c.type){case "mouseover":case "MSPointerOver":case "pointerover":h.toggle(a,b+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":h.toggle(a,b+"Hover",!1);d(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":d(!0);break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":d(!1);break;case "focus":case "focusin":h.toggle(a,
b+"Focused",!0);break;case "blur":case "focusout":h.toggle(a,b+"Focused",!1)}},_trackMouseState:function(a,b){a._cssState=b}});d(function(){function a(a,b,c){if(!c||!m.isDescendant(c,b))for(;b&&b!=c;b=b.parentNode)if(b._cssState){var g=q.getEnclosingWidget(b);g&&(b==g.domNode?g._cssMouseEvent(a):g._subnodeCssMouseEvent(b,b._cssState,a))}}var d=b.body(),e;n(d,c.over,function(b){a(b,b.target,b.relatedTarget)});n(d,c.out,function(b){a(b,b.target,b.relatedTarget)});n(d,k.press,function(b){e=b.target;
a(b,e)});n(d,k.release,function(b){a(b,e);e=null});n(d,"focusin, focusout",function(a){var b=a.target;if(b._cssState&&!b.getAttribute("widgetId")){var c=q.getEnclosingWidget(b);c&&c._subnodeCssMouseEvent(b,b._cssState,a)}})});return f})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),function(a,f,m,h,e,l){return f("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(e){var d=[];a.forEach(e||
this.getChildren(),function(a){"value"in a?d.push(a):d=d.concat(this._getDescendantFormWidgets(a.getChildren()))},this);return d},reset:function(){a.forEach(this._getDescendantFormWidgets(),function(a){a.reset&&a.reset()})},validate:function(){var e=!1;return a.every(a.map(this._getDescendantFormWidgets(),function(a){a._hasBeenBlurred=!0;var c=a.disabled||!a.validate||a.validate();c||e||(l.scrollIntoView(a.containerNode||a.domNode),a.focus(),e=!0);return c}),function(a){return a})},setValues:function(a){m.deprecated(this.declaredClass+
"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",a)},_setValueAttr:function(e){var d={};a.forEach(this._getDescendantFormWidgets(),function(a){a.name&&(d[a.name]||(d[a.name]=[])).push(a)});for(var c in d)if(d.hasOwnProperty(c)){var b=d[c],k=h.getObject(c,!1,e);void 0!==k&&(k=[].concat(k),"boolean"==typeof b[0].checked?a.forEach(b,function(b){b.set("value",-1!=a.indexOf(k,b._get("value")))}):b[0].multiple?b[0].set("value",k):a.forEach(b,function(a,b){a.set("value",
k[b])}))}},getValues:function(){m.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var e={};a.forEach(this._getDescendantFormWidgets(),function(a){var c=a.name;if(c&&!a.disabled){var b=a.get("value");"boolean"==typeof a.checked?/Radio/.test(a.declaredClass)?!1!==b?h.setObject(c,b,e):(b=h.getObject(c,!1,e),void 0===b&&h.setObject(c,null,e)):(a=h.getObject(c,!1,e),a||(a=[],h.setObject(c,a,e)),!1!==b&&
a.push(b)):(a=h.getObject(c,!1,e),"undefined"!=typeof a?h.isArray(a)?a.push(b):h.setObject(c,[a,b],e):h.setObject(c,b,e))}});return e},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var e=a.map(this._descendants,function(a){return a.get("state")||""});return 0<=a.indexOf(e,"Error")?"Error":0<=a.indexOf(e,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(e){this._descendants=this._getDescendantFormWidgets();a.forEach(this._descendants,
function(a){a._started||a.startup()});e||this._onChildChange()},_onChildChange:function(a){a&&"state"!=a&&"disabled"!=a||this._set("state",this._getState());a&&"value"!=a&&"disabled"!=a&&"checked"!=a||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");
this.state=this._getState();var a=this;this.own(e(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(d){d.target!=a.domNode&&a._onChildChange(d.type.replace("attrmodified-",""))}));this.watch("state",function(a,c,b){this.onValidStateChange(""==b)})},destroy:function(){this.inherited(arguments)}})})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(a,f){return a("dijit._DialogMixin",null,{actionBarTemplate:"",
execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var a=f._getTabNavigable(this.domNode);this._firstFocusItem=a.lowest||a.first||this.closeButtonNode||this.domNode;this._lastFocusItem=a.last||a.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q){var u=a("dijit.DialogUnderlay",[d,c],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(a){h.set(this.node,"id",a+"_underlay");this._set("dialogId",a)},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+a;this._set("class",a)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(l(this.domNode,"keydown",f.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var a=this.node.style,b=this.domNode.style;b.display="none";var c=n.getBox(this.ownerDocument);b.top=c.t+"px";b.left=c.l+"px";a.width=c.w+"px";a.height=c.h+"px";b.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new b(this.domNode);var a=n.get(this.ownerDocument);this._modalConnects=[k.on("resize",f.hitch(this,"layout")),l(a,"scroll",
f.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});u.show=function(a,b){var c=u._singleton;!c||c._destroyed?c=q._underlay=u._singleton=new u(a):a&&c.set(a);e.set(c.domNode,"zIndex",b);c.open||c.show()};u.hide=function(){var a=
u._singleton;a&&!a._destroyed&&a.hide()};return u})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(a,f,m,h,e,l,n,d){d.add("config-bgIframe",(d("ie")||d("trident"))&&!/IEMobile\/10\.0/.test(navigator.userAgent));var c=new function(){var b=[];this.pop=function(){var c;b.length?(c=b.pop(),c.style.display=""):(9>d("ie")?(c=m.dojoBlankHtmlUrl||a.toUrl("dojo/resources/blank.html")||'javascript:""',
c=document.createElement("\x3ciframe src\x3d'"+c+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e")):(c=h.create("iframe"),c.src='javascript:""',c.className="dijitBackgroundIframe",c.setAttribute("role","presentation"),e.set(c,"opacity",.1)),c.tabIndex=-1);return c};this.push=function(a){a.style.display="none";b.push(a)}};f.BackgroundIframe=function(a){if(!a.id)throw Error("no id");if(d("config-bgIframe")){var b=this.iframe=
c.pop();a.appendChild(b);7>d("ie")||d("quirks")?(this.resize(a),this._conn=n(a,"resize",l.hitch(this,"resize",a))):e.set(b,{width:"100%",height:"100%"})}};l.extend(f.BackgroundIframe,{resize:function(a){this.iframe&&e.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),c.push(this.iframe),delete this.iframe)}});return f.BackgroundIframe})},"dijit/Viewport":function(){define(["dojo/Evented",
"dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(a,f,m,h,e){var l=new a,n;m(function(){var a=e.getBox();l._rlh=f(window,"resize",function(){var b=e.getBox();if(a.h!=b.h||a.w!=b.w)a=b,l.emit("resize")});if(8==h("ie")){var c=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=c&&(c=screen.deviceXDPI,l.emit("resize"))},500)}h("ios")&&(f(document,"focusin",function(a){n=a.target}),f(document,"focusout",function(a){n=null}))});l.getEffectiveBox=function(a){a=e.getBox(a);var c=n&&
n.tagName&&n.tagName.toLowerCase();h("ios")&&n&&!n.readOnly&&("textarea"==c||"input"==c&&/^(color|email|number|password|search|tel|text|url)$/.test(n.type))&&(a.h*=0==orientation||180==orientation?.66:.4,c=n.getBoundingClientRect(),a.h=Math.max(a.h,c.top+c.height));return a};return l})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t){return c("dijit.layout.ContentPane",[m,h,e],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:a._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",
isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,b,g){var c=new g(a,b);return!c.href&&c._contentSetter&&c._contentSetter.parseDeferred&&!c._contentSetter.parseDeferred.isFulfilled()?c._contentSetter.parseDeferred.then(function(){return c}):c},create:function(a,b){if(!(a&&a.template||!b||"href"in a||"content"in a)){b=k.byId(b);for(var g=b.ownerDocument.createDocumentFragment();b.firstChild;)g.appendChild(b.firstChild);
a=f.delegate(a,{content:g})}this.inherited(arguments,[a,b])},postMixInProperties:function(){this.inherited(arguments);var a=w.getLocalization("dijit","loading",this.lang);this.loadingMessage=l.substitute(this.loadingMessage,a);this.errorMessage=l.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&d.forEach(this._contentSetter.parseResults,
function(a){a._started||a._destroyed||!f.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},_startChildren:function(){d.forEach(this.getChildren(),function(a){a._started||a._destroyed||!f.isFunction(a.startup)||(a.startup(),a._started=!0)});this._contentSetter&&d.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!f.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},setHref:function(b){a.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",b)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new b(f.hitch(this,"cancel"));this.onLoadDeferred.then(f.hitch(this,"onLoad"));this._set("href",a);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(b){a.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",b)},_setContentAttr:function(a){this._set("href",
"");this.cancel();this.onLoadDeferred=new b(f.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(f.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||
this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new b(f.hitch(this,"cancel"));this.onLoadDeferred.then(f.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};
f.isObject(this.ioArgs)&&f.mixin(b,this.ioArgs);var g=this._xhrDfd=(this.ioMethod||x.get)(b),c;g.then(function(b){c=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(y){a._onError("Content",y)}},function(b){g.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return c});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(v){console.error("Error "+this.widgetId+
" running custom onLoad code: "+v.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(p){console.error("Error "+this.widgetId+" running custom onUnload code: "+p.message)}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;d.forEach(this.getChildren(),function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a);b._destroyed=!0});b&&(d.forEach(b.parseResults,function(b){b._destroyed||(b.destroyRecursive?
b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0)}),delete b.parseResults);a||u.empty(this.containerNode);delete this._singleChild},_setContent:function(a,b){a=this.preprocessContent(a);this.destroyDescendants();var g=this._contentSetter;g&&g instanceof n._ContentSetter||(g=this._contentSetter=new n._ContentSetter({node:this.containerNode,_onError:f.hitch(this,this._onError),onContentError:f.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(A){console.error("Fatal "+
this.id+" could not change content due to "+A.message,A)}})}));var c=f.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),c=g.set(f.isObject(a)&&a.domNode?a.domNode:a,c),d=this;return t(c&&c.then?c:g.parseDeferred,function(){delete d._contentSetterParams;b||(d._started&&(d._startChildren(),d._scheduleLayout()),d._onLoadHandler(a))})},
preprocessContent:function(a){return a},_onError:function(a,b,g){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);g?console.error(g,b):a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],
function(a,f,m,h){return f("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(a,f){var e=this.containerNode;if(0<f){for(e=e.firstChild;0<f;)1==e.nodeType&&f--,e=e.nextSibling;e?f="before":(e=this.containerNode,f="last")}m.place(a.domNode,e,f);this._started&&!a._started&&a.startup()},removeChild:function(a){"number"==typeof a&&(a=this.getChildren()[a]);a&&(a=a.domNode)&&a.parentNode&&a.parentNode.removeChild(a)},
hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(e,f){var h=this.getChildren();e=a.indexOf(h,e);return h[e+f]},getIndexOfChild:function(e){return a.indexOf(this.getChildren(),e)}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),function(a,f,m,h,e,l,n,d,c,b){return f("dijit.layout._ContentPaneResizeMixin",
null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var a=this.getParent();this._childOfLayoutWidget=a&&a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(c.on("resize",l.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var a=[],b=!1;n("\x3e *",this.containerNode).some(function(c){var e=d.byNode(c);e&&e.resize?a.push(e):!/script|link|style/i.test(c.nodeName)&&
c.offsetHeight&&(b=!0)});this._singleChild=1!=a.length||b?null:a[0];m.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(a,b){this._resizeCalled=!0;this._scheduleLayout(a,b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=!0,this._changeSize=a,this._resultSize=b)},_layout:function(a,c){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();a&&h.setMarginBox(this.domNode,a);var d=this.containerNode;d===this.domNode?
(c=c||{},l.mixin(c,a||{}),"h"in c&&"w"in c||(c=l.mixin(h.getMarginBox(d),c)),this._contentBox=b.marginBox2contentBox(d,c)):this._contentBox=h.getContentBox(d);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||h.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else for(var a=this.getChildren(),b,c=0;b=a[c++];)b.resize&&b.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&
"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,b=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!m.contains(a,"dijitHidden")&&b&&b.style&&"none"!=b.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],
function(a,f,m,h,e){function l(a){return a.substring(0,1).toUpperCase()+a.substring(1)}function n(a,b){var c=a.resize?a.resize(b):m.setMarginBox(a.domNode,b);c?e.mixin(a,c):(e.mixin(a,m.getMarginBox(a.domNode)),e.mixin(a,b))}var d={marginBox2contentBox:function(a,b){var c=h.getComputedStyle(a),d=m.getMarginExtents(a,c),e=m.getPadBorderExtents(a,c);return{l:h.toPixelValue(a,c.paddingLeft),t:h.toPixelValue(a,c.paddingTop),w:b.w-(d.w+e.w),h:b.h-(d.h+e.h)}},layoutChildren:function(c,b,d,h,m){b=e.mixin({},
b);f.add(c,"dijitLayoutContainer");d=a.filter(d,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(a.filter(d,function(a){return"center"==a.region||"client"==a.layoutAlign}));a.forEach(d,function(a){var c=a.domNode,d=a.region||a.layoutAlign;if(!d)throw Error("No region setting for "+a.id);var e=c.style;e.left=b.l+"px";e.top=b.t+"px";e.position="absolute";f.add(c,"dijitAlign"+l(d));c={};h&&h==a.id&&(c["top"==a.region||"bottom"==a.region?"h":"w"]=m);"leading"==d&&(d=a.isLeftToRight()?
"left":"right");"trailing"==d&&(d=a.isLeftToRight()?"right":"left");"top"==d||"bottom"==d?(c.w=b.w,n(a,c),b.h-=a.h,"top"==d?b.t+=a.h:e.top=b.t+b.h+"px"):"left"==d||"right"==d?(c.h=b.h,n(a,c),b.w-=a.w,"left"==d?b.l+=a.w:e.left=b.l+b.w+"px"):"client"!=d&&"center"!=d||n(a,b)})}};e.setObject("dijit.layout.utils",d);return d})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),function(a,f,m,h,e,l,n){var d=0,c={_secureForInnerHtml:function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,
"")},_emptyNode:l.empty,_setNodeContent:function(a,c){l.empty(a);if(c)if("number"==typeof c&&(c=c.toString()),"string"==typeof c&&(c=l.toDom(c,a.ownerDocument)),!c.nodeType&&f.isArrayLike(c))for(var b=c.length,d=0;d<c.length;d=b==c.length?d+1:0)l.place(c[d],a,"last");else l.place(c,a,"last");return a},_ContentSetter:h("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:a._scopeName,startup:!0,constructor:function(a,c){f.mixin(this,
a||{});c=this.node=e.byId(this.node||c);this.id||(this.id=["Setter",c?c.id||c.tagName:"",d++].join("_"))},set:function(a,c){void 0!==a&&(this.content=a);"number"==typeof a&&(a=a.toString());c&&this._mixin(c);this.onBegin();this.setContent();return(a=this.onEnd())&&a.then?a:this.node},setContent:function(){var a=this.node;if(!a)throw Error(this.declaredClass+": setContent given no node");try{a=c._setNodeContent(a,this.content)}catch(q){var d=this.onContentError(q);try{a.innerHTML=d}catch(u){console.error("Fatal "+
this.declaredClass+".setContent could not change content due to "+u.message,u)}}this.node=a},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(m.forEach(this.parseResults,function(a){a.destroy&&a.destroy()}),delete this.parseResults);l.empty(this.node)},onBegin:function(){var a=this.content;if(f.isString(a)&&(this.cleanContent&&(a=c._secureForInnerHtml(a)),this.extractContent)){var d=
a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);d&&(a=d[1])}this.empty();this.content=a;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(a){return"Error occurred setting content: "+a},onExecError:function(a){return"Error occurred executing scripts: "+a},_mixin:function(a){var b={},c;for(c in a)c in b||(this[c]=a[c])},_parse:function(){var a=
this.node;try{var c={};m.forEach(["dir","lang","textDir"],function(a){this[a]&&(c[a]=this[a])},this);var d=this;this.parseDeferred=n.parse({rootNode:a,noStart:!this.startup,inherited:c,scope:this.parserScope}).then(function(a){return d.parseResults=a},function(a){d._onError("Content",a,"Error parsing in _ContentSetter#"+this.id)})}catch(u){this._onError("Content",u,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(a,d,e){a=this["on"+a+"Error"].call(this,d);e?console.error(e,d):a&&c._setNodeContent(this.node,
a,!0)}}),set:function(a,d,e){void 0==d&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),d="");"number"==typeof d&&(d=d.toString());return e?(new c._ContentSetter(f.mixin(e,{content:d,node:a}))).set():c._setNodeContent(a,d,!0)}};f.setObject("dojo.html",c);return c})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t){function p(a){return eval("("+a+")")}function v(a){var b=a._nameCaseMap,g=a.prototype;if(!b||b._extendCnt<r){var b=a._nameCaseMap={},c;for(c in g)"_"!==c.charAt(0)&&(b[c.toLowerCase()]=c);b._extendCnt=r}return b}function g(b,g){g||(g=a);var c=g._dojoParserCtorMap||(g._dojoParserCtorMap={}),d=b.join();if(!c[d]){for(var e=[],f=0,k=b.length;f<k;f++){var p=b[f];e[e.length]=c[p]=c[p]||m.getObject(p)||~p.indexOf("/")&&g(p)}b=e.shift();c[d]=e.length?b.createSubclass?
b.createSubclass(e):b.extend.apply(b,e):b}return c[d]}new Date("X");var r=0;c.after(m,"extend",function(){r++},!0);var z={_clearCache:function(){r++;_ctorMap={}},_functionFromScript:function(a,b){var g="",c="",d=a.getAttribute(b+"args")||a.getAttribute("args");b=a.getAttribute("with");d=(d||"").split(/\s*,\s*/);b&&b.length&&h.forEach(b.split(/\s*,\s*/),function(a){g+="with("+a+"){";c+="}"});return new Function(d,g+a.innerHTML+c)},instantiate:function(a,b,g){b=b||{};g=g||{};var c=(g.scope||f._scopeName)+
"Type",d="data-"+(g.scope||f._scopeName)+"-",e=d+"type",k=d+"mixins",p=[];h.forEach(a,function(a){var g=c in b?b[c]:a.getAttribute(e)||a.getAttribute(c);if(g){var d=a.getAttribute(k),g=d?[g].concat(d.split(/\s*,\s*/)):[g];p.push({node:a,types:g})}});return this._instantiate(p,b,g)},_instantiate:function(a,c,d,e){function f(a){c._started||d.noStart||h.forEach(a,function(a){"function"!==typeof a.startup||a._started||a.startup()});return a}a=h.map(a,function(a){var b=a.ctor||g(a.types,d.contextRequire);
if(!b)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(b,a.node,c,d,a.scripts,a.inherited)},this);return e?b(a).then(f):f(a)},construct:function(a,b,g,e,r,l){function z(a){F&&m.setObject(F,a);for(E=0;E<Y.length;E++)c[Y[E].advice||"after"](a,Y[E].method,m.hitch(a,Y[E].func),!0);for(E=0;E<aa.length;E++)aa[E].call(a);for(E=0;E<S.length;E++)a.watch(S[E].prop,S[E].func);for(E=0;E<Z.length;E++)w(a,Z[E].event,Z[E].func);return a}var n=a&&a.prototype;e=e||{};var q=
{};e.defaults&&m.mixin(q,e.defaults);l&&m.mixin(q,l);var t;u("dom-attributes-explicit")?t=b.attributes:u("dom-attributes-specified-flag")?t=h.filter(b.attributes,function(a){return a.specified}):(l=(/^input$|^img$/i.test(b.nodeName)?b:b.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),t=h.map(l.split(/\s+/),function(a){var g=a.toLowerCase();return{name:a,value:"LI"==b.nodeName&&"value"==a||"enctype"==g?b.getAttribute(g):b.getAttributeNode(g).value}}));
var y=e.scope||f._scopeName;l="data-"+y+"-";var A={};"dojo"!==y&&(A[l+"props"]="data-dojo-props",A[l+"type"]="data-dojo-type",A[l+"mixins"]="data-dojo-mixins",A[y+"type"]="dojotype",A[l+"id"]="data-dojo-id");for(var E=0,B,y=[],F,C;B=t[E++];){var I=B.name,N=I.toLowerCase();B=B.value;switch(A[N]||N){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":C=B;break;case "data-dojo-id":case "jsid":F=B;break;case "data-dojo-attach-point":case "dojoattachpoint":q.dojoAttachPoint=
B;break;case "data-dojo-attach-event":case "dojoattachevent":q.dojoAttachEvent=B;break;case "class":q["class"]=b.className;break;case "style":q.style=b.style&&b.style.cssText;break;default:if(I in n||(I=v(a)[N]||I),I in n)switch(typeof n[I]){case "string":q[I]=B;break;case "number":q[I]=B.length?Number(B):NaN;break;case "boolean":q[I]="false"!=B.toLowerCase();break;case "function":""===B||-1!=B.search(/[^\w\.]+/i)?q[I]=new Function(B):q[I]=m.getObject(B,!1)||new Function(B);y.push(I);break;default:N=
n[I],q[I]=N&&"length"in N?B?B.split(/\s*,\s*/):[]:N instanceof Date?""==B?new Date(""):"now"==B?new Date:k.fromISOString(B):N instanceof d?f.baseUrl+B:p(B)}else q[I]=B}}for(t=0;t<y.length;t++)A=y[t].toLowerCase(),b.removeAttribute(A),b[A]=null;if(C)try{C=p.call(e.propsThis,"{"+C+"}"),m.mixin(q,C)}catch(da){throw Error(da.toString()+" in data-dojo-props\x3d'"+C+"'");}m.mixin(q,g);r||(r=a&&(a._noScript||n._noScript)?[]:x("\x3e script[type^\x3d'dojo/']",b));var Y=[],aa=[],S=[],Z=[];if(r)for(E=0;E<r.length;E++)A=
r[E],b.removeChild(A),g=A.getAttribute(l+"event")||A.getAttribute("event"),e=A.getAttribute(l+"prop"),C=A.getAttribute(l+"method"),y=A.getAttribute(l+"advice"),t=A.getAttribute("type"),A=this._functionFromScript(A,l),g?"dojo/connect"==t?Y.push({method:g,func:A}):"dojo/on"==t?Z.push({event:g,func:A}):q[g]=A:"dojo/aspect"==t?Y.push({method:C,advice:y,func:A}):"dojo/watch"==t?S.push({prop:e,func:A}):aa.push(A);a=(r=a.markupFactory||n.markupFactory)?r(q,b,a):new a(q,b);return a.then?a.then(z):z(a)},scan:function(b,
c){function d(a){if(!a.inherited){a.inherited={};var b=a.node,g=d(a.parent),b={dir:b.getAttribute("dir")||g.dir,lang:b.getAttribute("lang")||g.lang,textDir:b.getAttribute(v)||g.textDir},c;for(c in b)b[c]&&(a.inherited[c]=b[c])}return a.inherited}var e=[],k=[],p={},r=(c.scope||f._scopeName)+"Type",l="data-"+(c.scope||f._scopeName)+"-",z=l+"type",v=l+"textdir",l=l+"mixins",n=b.firstChild,m=c.inherited;if(!m){var t=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&t(a.parentNode,
b)},m={dir:t(b,"dir"),lang:t(b,"lang"),textDir:t(b,v)},y;for(y in m)m[y]||delete m[y]}y={inherited:m};for(var x,w;;)if(n)if(1!=n.nodeType)n=n.nextSibling;else if(x&&"script"==n.nodeName.toLowerCase())(m=n.getAttribute("type"))&&/^dojo\/\w/i.test(m)&&x.push(n),n=n.nextSibling;else if(w)n=n.nextSibling;else if(m=n.getAttribute(z)||n.getAttribute(r),b=n.firstChild,m||b&&(3!=b.nodeType||b.nextSibling)){w=null;if(m){var u=n.getAttribute(l);x=u?[m].concat(u.split(/\s*,\s*/)):[m];try{w=g(x,c.contextRequire)}catch(Y){}w||
h.forEach(x,function(a){~a.indexOf("/")&&!p[a]&&(p[a]=!0,k[k.length]=a)});u=w&&!w.prototype._noScript?[]:null;y={types:x,ctor:w,parent:y,node:n,scripts:u};y.inherited=d(y);e.push(y)}else y={node:n,scripts:x,parent:y};x=u;w=n.stopParser||w&&w.prototype.stopParser&&!c.template;n=b}else n=n.nextSibling;else{if(!y||!y.node)break;n=y.node.nextSibling;w=!1;y=y.parent;x=y.scripts}var A=new q;k.length?(c.contextRequire||a)(k,function(){A.resolve(h.filter(e,function(a){if(!a.ctor)try{a.ctor=g(a.types,c.contextRequire)}catch(Z){}for(var b=
a.parent;b&&!b.types;)b=b.parent;var d=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(d&&d.stopParser&&!c.template);a.instantiate=!b||b.instantiate&&b.instantiateChildren;return a.instantiate}))}):A.resolve(e);return A.promise},_require:function(b,g){b=p("{"+b.innerHTML+"}");var c=[],d=[],e=new q;g=g&&g.contextRequire||a;for(var f in b)c.push(f),d.push(b[f]);g(d,function(){for(var a=0;a<c.length;a++)m.setObject(c[a],arguments[a]);e.resolve(arguments)});return e.promise},_scanAmd:function(a,b){var g=
new q,c=g.promise;g.resolve(!0);var d=this;x("script[type\x3d'dojo/require']",a).forEach(function(a){c=c.then(function(){return d._require(a,b)});a.parentNode.removeChild(a)});return c},parse:function(a,b){!a||"string"==typeof a||"nodeType"in a||(b=a,a=b.rootNode);var g=a?l.byId(a):n.body();b=b||{};var c=b.template?{template:!0}:{},d=[],e=this;a=this._scanAmd(g,b).then(function(){return e.scan(g,b)}).then(function(a){return e._instantiate(a,c,b,!0)}).then(function(a){return d=d.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",
a);throw a;});m.mixin(d,a);return d}};f.parser=z;e.parseOnLoad&&t(100,z,"parse");return z})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(a,f){var m={};a.setObject("dojo.date.stamp",m);m.fromISOString=function(a,e){m._isoRegExp||(m._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var h=m._isoRegExp.exec(a);a=null;if(h){h.shift();h[1]&&h[1]--;h[6]&&(h[6]*=1E3);e&&(e=new Date(e),f.forEach(f.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),
function(a){return e["get"+a]()}),function(a,b){h[b]=h[b]||a}));a=new Date(h[0]||1970,h[1]||0,h[2]||1,h[3]||0,h[4]||0,h[5]||0,h[6]||0);100>h[0]&&a.setFullYear(h[0]||1970);var n=0,d=h[7]&&h[7].charAt(0);"Z"!=d&&(n=60*(h[8]||0)+(Number(h[9])||0),"-"!=d&&(n*=-1));d&&(n-=a.getTimezoneOffset());n&&a.setTime(a.getTime()+6E4*n)}return a};m.toISOString=function(a,e){var f=function(a){return 10>a?"0"+a:a};e=e||{};var h=[],d=e.zulu?"getUTC":"get",c="";"time"!=e.selector&&(c=a[d+"FullYear"](),c=["0000".substr((c+
"").length)+c,f(a[d+"Month"]()+1),f(a[d+"Date"]())].join("-"));h.push(c);"date"!=e.selector&&(c=[f(a[d+"Hours"]()),f(a[d+"Minutes"]()),f(a[d+"Seconds"]())].join(":"),d=a[d+"Milliseconds"](),e.milliseconds&&(c+="."+(100>d?"0":"")+f(d)),e.zulu?c+="Z":"time"!=e.selector&&(a=a.getTimezoneOffset(),e=Math.abs(a),c+=(0<a?"-":"+")+f(Math.floor(e/60))+":"+f(e%60)),h.push(c));return h.join("T")};return m})},"esri/core/domUtils":function(){define(["dojo/on","dojo/dom-style","dojo/has"],function(a,f,m){var h=
{show:function(a){if(a=h.getNode(a))a.style.display="block"},getNode:function(a){return a&&a.domNode||a},hide:function(a){if(a=h.getNode(a))a.style.display="none"},toggle:function(a){if(a=h.getNode(a))a.style.display="none"===a.style.display?"block":"none"},documentBox:8>=m("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(e){if(e=this.getNode(e)){var h=0,n=0,d=0,c=0,b=0,k=0;return[a(e,"touchstart",
function(a){h=a.touches[0].screenX;n=a.touches[0].screenY;d=e.scrollWidth;c=e.scrollHeight;b=e.clientWidth;k=e.clientHeight}),a(e,"touchmove",function(a){a.preventDefault();var l=e.firstChild;l instanceof Text&&(l=e.childNodes[1]);var m=l._currentX||0,q=l._currentY||0,m=m+(a.touches[0].screenX-h);0<m?m=0:0>m&&Math.abs(m)+b>d&&(m=-1*(d-b));l._currentX=m;q+=a.touches[0].screenY-n;0<q?q=0:0>q&&Math.abs(q)+k>c&&(q=-1*(c-k));l._currentY=q;f.set(l,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+
m+"px, "+q+"px)"});h=a.touches[0].screenX;n=a.touches[0].screenY})]}}};return h})},"esri/identity/Credential":function(){define(["./IdentityManagerBase"],function(a){return a.Credential})},"esri/identity/IdentityManagerBase":function(){define("../core/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/Deferred dojo/_base/url dojo/sniff dojo/cookie dojo/io-query dojo/regexp ../kernel ../config ../core/lang ./ServerInfo ../core/urlUtils ../core/deferredUtils ../core/Accessor ../request ../core/Evented ./OAuthCredential ./OAuthInfo".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t,p,v,g,r,z){var y={},A=function(a){var b=(new l(a.owningSystemUrl)).host;a=(new l(a.server)).host;var g=/.+\.arcgis\.com$/i;return g.test(b)&&g.test(a)},F=function(a,b){return!!(A(a)&&b&&h.some(b,function(b){return b.test(a.server)}))},B;a=a(g,{declaredClass:"esri.identity.IdentityManagerBase",constructor:function(){this._portalConfig=m.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=
[];this._getOAuthHash()},defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,signInPage:null,useSignInPage:!0,normalizeWebTierAuth:!1,_busy:null,_oAuthHash:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i,_adminSvcs:/\/admin\/services(\/|$)/i,_agolSuffix:".arcgis.com",_gwDomains:[{regex:/https?:\/\/www\.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},
{regex:/https?:\/\/dev\.arcgis\.com/i,tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*dev[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*qa[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|GeoenrichmentServer|VectorTileServer|SceneServer)).*/ig,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(a){var b=this.serverInfos;b?(a=h.filter(a,function(a){return!this.findServerInfo(a.server)},this),this.serverInfos=b.concat(a)):
this.serverInfos=a;h.forEach(a,function(a){a.owningSystemUrl&&this._portals.push(a.owningSystemUrl);if(a.hasPortal){this._portals.push(a.server);var b=q.request.corsEnabledServers,g=this._getOrigin(a.tokenServiceUrl);w.canUseXhr(a.server)||b.push(a.server.replace(/^https?:\/\//i,""));w.canUseXhr(g)||b.push(g.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(a){var b=this.oAuthInfos;b?(a=h.filter(a,function(a){return!this.findOAuthInfo(a.portalUrl)},this),this.oAuthInfos=b.concat(a)):
this.oAuthInfos=a},registerToken:function(a){a=m.mixin({},a);var b=this._sanitizeUrl(a.server),g=this.findServerInfo(b),c=this._isServerRsrc(b),d=!0,e;g||(g=new x,g.server=this._getServerInstanceRoot(b),c?g.hasServer=!0:(g.tokenServiceUrl=this._getTokenSvcUrl(b),g.hasPortal=!0),this.registerServers([g]));(e=this._findCredential(b))?(delete a.server,m.mixin(e,a),d=!1):(e=new B({userId:a.userId,server:g.server,token:a.token,expires:a.expires,ssl:a.ssl,scope:c?"server":"portal"}),e.resources=[b],this.credentials.push(e));
e.emitTokenChange(!1);d||e.refreshServerTokens()},toJSON:function(){return u.fixJson({serverInfos:h.map(this.serverInfos,function(a){return a.toJSON()}),oAuthInfos:h.map(this.oAuthInfos,function(a){return a.toJSON()}),credentials:h.map(this.credentials,function(a){return a.toJSON()})})},initialize:function(a){if(a){m.isString(a)&&(a=JSON.parse(a));var b=a.serverInfos,g=a.oAuthInfos;a=a.credentials;if(b){var c=[];h.forEach(b,function(a){a.server&&a.tokenServiceUrl&&c.push(a.declaredClass?a:new x(a))});
c.length&&this.registerServers(c)}if(g){var d=[];h.forEach(g,function(a){a.appId&&d.push(a.declaredClass?a:new z(a))});d.length&&this.registerOAuthInfos(d)}a&&h.forEach(a,function(a){a.server&&a.token&&a.expires&&a.expires>(new Date).getTime()&&(a=a.declaredClass?a:new B(a),a.emitTokenChange(),this.credentials.push(a))},this)}},findServerInfo:function(a){var b;a=this._sanitizeUrl(a);h.some(this.serverInfos,function(g){this._hasSameServerInstance(g.server,a)&&(b=g);return!!b},this);return b},findOAuthInfo:function(a){var b;
a=this._sanitizeUrl(a);h.some(this.oAuthInfos,function(g){this._hasSameServerInstance(g.portalUrl,a)&&(b=g);return!!b},this);return b},findCredential:function(a,b){var g,c;a=this._sanitizeUrl(a);c=this._isServerRsrc(a)?"server":"portal";b?h.some(this.credentials,function(d){this._hasSameServerInstance(d.server,a)&&b===d.userId&&d.scope===c&&(g=d);return!!g},this):h.some(this.credentials,function(b){this._hasSameServerInstance(b.server,a)&&-1!==this._getIdenticalSvcIdx(a,b)&&b.scope===c&&(g=b);return!!g},
this);return g},getCredential:function(a,b){var g,c,e=!0;u.isDefined(b)&&(m.isObject(b)?(g=!!b.token,c=b.error,e=!1!==b.prompt):g=b);a=this._sanitizeUrl(a);var k=t.makeDeferredCancellingPending(),p=this._isAdminResource(a),r=g&&this._doPortalSignIn(a)?this._getEsriAuthCookie():null;if((g=g?this.findCredential(a):null)&&c&&498===c.code)g.destroy(),r&&r.token===b.token&&d("esri_auth",null,{expires:-1,path:"/",domain:document.domain});else if(r||g)return a=Error("You are currently signed in as: '"+(r&&
r.email||g&&g.userId)+"'. You do not have access to this resource: "+a),a.code="IdentityManagerBase.1",a.httpCode=c&&c.httpCode,a.messageCode=c?c.messageCode:null,a.subcode=c?c.subcode:null,a.details=c?c.details:null,a.log=!!f.isDebug,k.reject(a),k.promise;if(c=this._findCredential(a,b))return k.resolve(c),k.promise;c=this.findServerInfo(a);if(c)!c.hasServer&&this._isServerRsrc(a)&&(c._restInfoDfd=this._getTokenSvcUrl(a,!0),c.hasServer=!0);else{r=this._getTokenSvcUrl(a);if(!r)return a=Error("Unknown resource - could not find token service endpoint."),
a.code="IdentityManagerBase.2",a.log=!!f.isDebug,k.reject(a),k.promise;c=new x;c.server=this._getServerInstanceRoot(a);m.isString(r)?(c.tokenServiceUrl=r,c.hasPortal=!0):(c._restInfoDfd=r,c.hasServer=!0);this.registerServers([c])}e&&c.hasPortal&&void 0===c._selfReq&&!this._findOAuthInfo(a)&&(c._selfReq={owningTenant:b&&b.owningTenant,selfDfd:this._getPortalSelf(c.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),a)});return this._enqueue(a,c,b,k,p)},getResourceName:function(a){return this._isRESTService(a)?
a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(a)&&a.replace(this._gwUser,"$1")||this._gwItem.test(a)&&a.replace(this._gwItem,"$1")||this._gwGroup.test(a)&&a.replace(this._gwGroup,"$1")||""},generateToken:function(a,b,g){var c,d,e,p,r,h,z=this._rePortalTokenSvc.test(a.tokenServiceUrl),n=new l(window.location.href.toLowerCase()),q=this._getEsriAuthCookie(),t,x=!b;p=a.shortLivedTokenValidity;var u;b&&(u=k.id.tokenValidity||p||k.id.defaultTokenValidity,u>p&&
(u=p));g&&(c=g.isAdmin,d=g.serverUrl,e=g.token,h=g.ssl,a.customParameters=g.customParameters);c?p=a.adminTokenServiceUrl:(p=a.tokenServiceUrl,r=new l(p.toLowerCase()),q&&(t=(t=q.auth_tier)&&t.toLowerCase()),("web"===t||a.webTierAuth)&&g&&g.serverUrl&&!h&&"http"===n.scheme&&(w.hasSameOrigin(n.uri,p,!0)||"https"===r.scheme&&n.host===r.host&&"7080"===n.port&&"7443"===r.port)&&(p=p.replace(/^https:/i,"http:").replace(/:7443/i,":7080")),x&&z&&(p=p.replace(/\/rest/i,"")));g=m.mixin({query:m.mixin({request:"getToken",
username:b&&b.username,password:b&&b.password,serverUrl:d,token:e,expiration:u,referer:c||z?window.location.host:null,client:c?"referer":null,f:"json"},a.customParameters),method:x?"auto":"post",disableIdentityLookup:!0,useProxy:this._useProxy(a,g),responseType:"json",callbackParamName:x?"callback":void 0},g&&g.ioArgs);z||(g.withCredentials=!1);return v(p,g).then(function(g){g=g.data;if(!g||!g.token)return g=Error("Unable to generate token"),g.code="IdentityManagerBase.3",g.log=!!f.isDebug,g;var c=
a.server;y[c]||(y[c]={});b&&(y[c][b.username]=b.password);g.validity=u;return g})},isBusy:function(){return!!this._busy},checkSignInStatus:function(a){return this.getCredential(a,{prompt:!1}).then(function(a){return a.token?v(a.server+("portal"===a.scope?"/sharing/rest":"/rest/services"),{query:{f:"json",token:a.token},callbackParamName:"callback",disableIdentityLookup:!0}).then(function(){return a}).otherwise(function(b){if(498===b.code)throw a.destroy(),b=Error("User is not signed in."),b.code=
"IdentityManagerBase.6",b.log=!!f.isDebug,b;return a}):a})},setRedirectionHandler:function(a){this._redirectFunc=a},setProtocolErrorHandler:function(a){this._protocolFunc=a},signIn:function(){},oAuthSignIn:function(){},destroyCredentials:function(){if(this.credentials){var a=this.credentials.slice();h.forEach(a,function(a){a.destroy()})}this.emit("credentials-destroy")},_getOAuthHash:function(){var a=window.location.hash;if(a){"#"===a.charAt(0)&&(a=a.substring(1));var a=c.queryToObject(a),b=!1;a.access_token&&
a.expires_in&&a.state&&a.hasOwnProperty("username")?(a.state=JSON.parse(a.state),this._oAuthHash=a,b=!0):a.error&&a.error_description&&(console.log("IdentityManager OAuth Error: ",a.error," - ",a.error_description),"access_denied"===a.error&&(b=!0));b&&(!n("ie")||8<n("ie"))&&(window.location.hash="")}},_findCredential:function(a,b){var g=-1,c,d,e,f=b&&b.token;b=b&&b.resource;var k=this._isServerRsrc(a)?"server":"portal",p=h.filter(this.credentials,function(b){return this._hasSameServerInstance(b.server,
a)&&b.scope===k},this);a=b||a;if(p.length)if(1===p.length)if(b=p[0],d=(c=(e=this.findServerInfo(b.server))&&e.owningSystemUrl)&&this.findCredential(c,b.userId),g=this._getIdenticalSvcIdx(a,b),f)-1!==g&&(b.resources.splice(g,1),this._removeResource(a,d));else return-1===g&&b.resources.push(a),this._addResource(a,d),b;else{var r,l;h.some(p,function(b){l=this._getIdenticalSvcIdx(a,b);return-1!==l?(r=b,d=(c=(e=this.findServerInfo(r.server))&&e.owningSystemUrl)&&this.findCredential(c,r.userId),g=l,!0):
!1},this);if(f)r&&(r.resources.splice(g,1),this._removeResource(a,d));else if(r)return this._addResource(a,d),r}},_findOAuthInfo:function(a){var b=this.findOAuthInfo(a);b||h.some(this.oAuthInfos,function(g){this._isIdProvider(g.portalUrl,a)&&(b=g);return!!b},this);return b},_addResource:function(a,b){b&&-1===this._getIdenticalSvcIdx(a,b)&&b.resources.push(a)},_removeResource:function(a,b){var g=-1;b&&(g=this._getIdenticalSvcIdx(a,b),-1<g&&b.resources.splice(g,1))},_useProxy:function(a,b){return b&&
b.isAdmin&&!w.hasSameOrigin(a.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(a.tokenServiceUrl)&&10.1==a.currentVersion&&!w.hasSameOrigin(a.tokenServiceUrl,window.location.href)},_getOrigin:function(a){a=new l(a);return a.scheme+"://"+a.host+(u.isDefined(a.port)?":"+a.port:"")},_getServerInstanceRoot:function(a){var b=a.toLowerCase(),g=b.indexOf(this._agsRest);-1===g&&this._isAdminResource(a)&&(g=b.indexOf("/admin"));-1===g&&(g=b.indexOf("/sharing"));-1===g&&"/"===b.substr(-1)&&
(g=b.length-1);return-1<g?a.substring(0,g):a},_hasSameServerInstance:function(a,b){"/"===a.substr(-1)&&(a=a.slice(0,-1));a=a.toLowerCase();b=this._getServerInstanceRoot(b).toLowerCase();a=a.substr(a.indexOf(":"));b=b.substr(b.indexOf(":"));return a===b},_sanitizeUrl:function(a){a=w.normalize(m.trim(a));var b=(q.request.proxyUrl||"").toLowerCase(),g=b?a.toLowerCase().indexOf(b+"?"):-1;-1!==g&&(a=a.substring(g+b.length+1));return w.urlToObject(a).path},_isRESTService:function(a){return-1<a.indexOf(this._agsRest)},
_isAdminResource:function(a){return this._agsAdmin.test(a)||this._adminSvcs.test(a)},_isServerRsrc:function(a){return this._isRESTService(a)||this._isAdminResource(a)},_isIdenticalService:function(a,b){var g;this._isRESTService(a)&&this._isRESTService(b)?(a=this._getSuffix(a).toLowerCase(),b=this._getSuffix(b).toLowerCase(),g=a===b,g||(g=/(.*)\/(MapServer|FeatureServer).*/ig,g=a.replace(g,"$1")===b.replace(g,"$1"))):this._isAdminResource(a)&&this._isAdminResource(b)?g=!0:this._isServerRsrc(a)||this._isServerRsrc(b)||
!this._isPortalDomain(a)||(g=!0);return g},_isPortalDomain:function(a){a=a.toLowerCase();var b=(new l(a)).authority,g=this._portalConfig,c=-1!==b.indexOf(this._agolSuffix);!c&&g&&(c=this._hasSameServerInstance(this._getServerInstanceRoot(g.restBaseUrl),a));c||(!this._arcgisUrl&&(g=m.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=(new l(g)).authority),this._arcgisUrl&&(c=this._arcgisUrl.toLowerCase()===b));c||(c=h.some(this._portals,function(b){return this._hasSameServerInstance(b,a)},
this));return c=c||this._agsPortal.test(a)},_isIdProvider:function(a,b){var g=-1,c=-1;h.forEach(this._gwDomains,function(d,e){-1===g&&d.regex.test(a)&&(g=e);-1===c&&d.regex.test(b)&&(c=e)});var d=!1;if(-1<g&&-1<c)if(0===g||4===g){if(0===c||4===c)d=!0}else if(1===g){if(1===c||2===c)d=!0}else 2===g?2===c&&(d=!0):3===g&&3===c&&(d=!0);if(!d){var e=this.findServerInfo(b),f=e&&e.owningSystemUrl;f&&A(e)&&this._isPortalDomain(f)&&this._isIdProvider(a,f)&&(d=!0)}return d},_isPublic:function(a){a=this._sanitizeUrl(a);
return h.some(this._publicUrls,function(b){return b.test(a)})},_getIdenticalSvcIdx:function(a,b){var g=-1;h.some(b.resources,function(b,c){return this._isIdenticalService(a,b)?(g=c,!0):!1},this);return g},_getSuffix:function(a){return a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(a){var b,g;if((b=this._isRESTService(a))||this._isAdminResource(a))return g=a.toLowerCase().indexOf(b?this._agsRest:"/admin/"),b=a.substring(0,g)+"/admin/generateToken",a=
a.substring(0,g)+"/rest/info",g=v(a,{query:{f:"json"},responseType:"json",callbackParamName:"callback"}).then(function(a){return a.data}),g.adminUrl_=b,g;if(this._isPortalDomain(a)){var c="";h.some(this._gwDomains,function(b){b.regex.test(a)&&(c=b.tokenServiceUrl);return!!c});c||h.some(this._portals,function(b){this._hasSameServerInstance(b,a)&&(c=b+this._gwTokenUrl);return!!c},this);c||(g=a.toLowerCase().indexOf("/sharing"),-1!==g&&(c=a.substring(0,g)+this._gwTokenUrl));c||(c=this._getOrigin(a)+
this._gwTokenUrl);c&&(b=(new l(a)).port,/^http:\/\//i.test(a)&&"7080"===b&&(c=c.replace(/:7080/i,":7443")),c=c.replace(/http:/i,"https:"));return c}if(-1!==a.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},_getPortalSelf:function(a,b){"https:"===window.location.protocol?a=a.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(b)&&(a=a.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return v(a,{query:{f:"json"},responseType:"json",
callbackParamName:"callback",crossOrigin:!1,disableIdentityLookup:!0}).then(function(a){return a.data})},_hasPortalSession:function(){return!!this._getEsriAuthCookie()},_getEsriAuthCookie:function(){var a;if(d.isSupported()){var b=this._getAllCookies("esri_auth"),g;for(g=0;g<b.length;g++){var c=JSON.parse(b[g]);if(c.portalApp){a=c;break}}}return a},_getAllCookies:function(a){var g=[],c=document.cookie.match(new RegExp("(?:^|; )"+b.escapeString(a)+"\x3d([^;]*)","g"));if(c)for(a=0;a<c.length;a++){var d=
c[a],e=d.indexOf("\x3d");-1<e&&(d=d.substring(e+1),g.push(decodeURIComponent(d)))}return g},_doPortalSignIn:function(a){if(d.isSupported()){var b=this._getEsriAuthCookie(),g=this._portalConfig,c=window.location.href,e=this.findServerInfo(a);if(this.useSignInPage&&(g||this._isPortalDomain(c)||b)&&(e?e.hasPortal||e.owningSystemUrl&&this._isPortalDomain(e.owningSystemUrl):this._isPortalDomain(a))&&(this._isIdProvider(c,a)||g&&(this._hasSameServerInstance(this._getServerInstanceRoot(g.restBaseUrl),a)||
this._isIdProvider(g.restBaseUrl,a))||w.hasSameOrigin(c,a,!0)))return!0}return!1},_checkProtocol:function(a,b,g,c){var d=!0;c=c?b.adminTokenServiceUrl:b.tokenServiceUrl;0!==m.trim(c).toLowerCase().indexOf("https:")||0===window.location.href.toLowerCase().indexOf("https:")||q.request.useCors&&(w.canUseXhr(c)||w.canUseXhr(w.getProxyUrl(!0).path))||(d=this._protocolFunc?!!this._protocolFunc({resourceUrl:a,serverInfo:b}):!1,d||(a=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),
a.code="IdentityManagerBase.4",a.log=!!f.isDebug,console.log(a.message),g(a)));return d},_enqueue:function(a,b,g,c,d,e){c||(c=t.makeDeferredCancellingPending());c.resUrl_=a;c.sinfo_=b;c.options_=g;c.admin_=d;c.refresh_=e;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(a),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(c)):this._xoReqs.push(c):this._doSignIn(c);return c.promise},_doSignIn:function(a){this._busy=a;
var b=this,g=function(g){var c=a.options_&&a.options_.resource,d=a.resUrl_,e=a.refresh_,f=!1;-1===h.indexOf(b.credentials,g)&&(e&&-1!==h.indexOf(b.credentials,e)?(e.userId=g.userId,e.token=g.token,e.expires=g.expires,e.validity=g.validity,e.ssl=g.ssl,e.creationTime=g.creationTime,f=!0,g=e):b.credentials.push(g));g.resources||(g.resources=[]);g.resources.push(c||d);g.scope=b._isServerRsrc(d)?"server":"portal";g.emitTokenChange();var c=b._soReqs,k={};b._soReqs=[];h.forEach(c,function(a){if(!this._isIdenticalService(d,
a.resUrl_)){var b=this._getSuffix(a.resUrl_);k[b]||(k[b]=!0,g.resources.push(a.resUrl_))}},b);a.resolve(g);h.forEach(c,function(a){this._hasSameServerInstance(this._getServerInstanceRoot(d),a.resUrl_)?a.resolve(g):this._soReqs.push(a)},b);b._busy=a.resUrl_=a.sinfo_=a.refresh_=null;f||b.emit("credential-create",{credential:g});b._soReqs.length?b._doSignIn(b._soReqs.shift()):b._xoReqs.length&&b._doSignIn(b._xoReqs.shift())},c=function(g){a.reject(g);b._busy=a.resUrl_=a.sinfo_=a.refresh_=null;b._soReqs.length?
b._doSignIn(b._soReqs.shift()):b._xoReqs.length&&b._doSignIn(b._xoReqs.shift())},d=function(d,e,k,p){var h=a.sinfo_,l=!a.options_||!1!==a.options_.prompt,z=h.hasPortal&&b._findOAuthInfo(a.resUrl_);b._doPortalSignIn(a.resUrl_)?(d=b._getEsriAuthCookie(),z=b._portalConfig,d?g(new B({userId:d.email,server:h.server,token:d.token,expires:null})):l?(l="",d=window.location.href,l=b.signInPage?b.signInPage:z?z.baseUrl+z.signin:b._isIdProvider(d,a.resUrl_)?b._getOrigin(d)+"/home/signin.html":h.tokenServiceUrl.replace(b._rePortalTokenSvc,
"")+"/home/signin.html",l=l.replace(/http:/i,"https:"),z&&!1===z.useSSL&&(l=l.replace(/https:/i,"http:")),0===d.toLowerCase().replace("https","http").indexOf(l.toLowerCase().replace("https","http"))?(h=Error("Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: "+a.resUrl_),h.code="IdentityManagerBase.5",h.log=!!f.isDebug,c(h)):b._redirectFunc?b._redirectFunc({signInPage:l,returnUrlParamName:"returnUrl",returnUrl:d,resourceUrl:a.resUrl_,serverInfo:h}):
window.location=l+"?returnUrl\x3d"+window.escape(d)):(h=Error("User is not signed in."),h.code="IdentityManagerBase.6",h.log=!!f.isDebug,c(h))):d?g(new B({userId:d,server:h.server,token:k,expires:u.isDefined(p)?Number(p):null,ssl:!!e})):z?(d=z._oAuthCred,d||(e=new r(z,window.localStorage),k=new r(z,window.sessionStorage),e.isValid()&&k.isValid()?e.expires>k.expires?(d=e,k.destroy()):(d=k,e.destroy()):d=e.isValid()?e:k,z._oAuthCred=d),d.isValid()?g(new B({userId:d.userId,server:h.server,token:d.token,
expires:d.expires,ssl:d.ssl,_oAuthCred:d})):b._oAuthHash&&b._oAuthHash.state.portalUrl===z.portalUrl?(l=b._oAuthHash,h=new B({userId:l.username,server:h.server,token:l.access_token,expires:(new Date).getTime()+1E3*Number(l.expires_in),ssl:"true"===l.ssl,oAuthState:l.state,_oAuthCred:d}),d.storage=l.persist?window.localStorage:window.sessionStorage,d.token=h.token,d.expires=h.expires,d.userId=h.userId,d.ssl=h.ssl,d.save(),b._oAuthHash=null,g(h)):l?a._pendingDfd=b.oAuthSignIn(a.resUrl_,h,z,a.options_).then(g,
c):(h=Error("User is not signed in."),h.code="IdentityManagerBase.6",h.log=!!f.isDebug,c(h))):l?b._checkProtocol(a.resUrl_,h,c,a.admin_)&&(l=a.options_,a.admin_&&(l=l||{},l.isAdmin=!0),a._pendingDfd=b.signIn(a.resUrl_,h,l).then(g,c)):(h=Error("User is not signed in."),h.code="IdentityManagerBase.6",h.log=!!f.isDebug,c(h))},e=function(){var d=a.sinfo_,e=d.owningSystemUrl,f=a.options_,k,p,r,l;f&&(k=f.token,p=f.error,r=f.prompt);l=b._findCredential(e,{token:k,resource:a.resUrl_});!l&&A(d)&&h.some(b.credentials,
function(a){this._isIdProvider(e,a.server)&&(l=a);return!!l},b);l?(f=b.findCredential(a.resUrl_,l.userId))?g(f):F(d,b._legacyFed)?(f=l.toJSON(),f.server=d.server,f.resources=null,g(new B(f))):(a._pendingDfd=b.generateToken(b.findServerInfo(l.server),null,{serverUrl:a.resUrl_,token:l.token,ssl:l.ssl})).then(function(b){g(new B({userId:l.userId,server:d.server,token:b.token,expires:u.isDefined(b.expires)?Number(b.expires):null,ssl:!!b.ssl,isAdmin:a.admin_,validity:b.validity}))},c):(b._busy=null,k&&
(a.options_.token=null),(a._pendingDfd=b.getCredential(e.replace(/\/?$/,"/sharing"),{resource:a.resUrl_,owningTenant:d.owningTenant,token:k,error:p,prompt:r})).then(function(g){b._enqueue(a.resUrl_,a.sinfo_,a.options_,a,a.admin_)},function(a){c(a)}))},k=a.sinfo_.owningSystemUrl,p=this._isServerRsrc(a.resUrl_),l=a.sinfo_._restInfoDfd;l?l.then(function(g){var c=a.sinfo_;c.adminTokenServiceUrl=c._restInfoDfd.adminUrl_;c._restInfoDfd=null;c.tokenServiceUrl=m.getObject("authInfo.tokenServicesUrl",!1,g)||
m.getObject("authInfo.tokenServiceUrl",!1,g)||m.getObject("tokenServiceUrl",!1,g);c.shortLivedTokenValidity=m.getObject("authInfo.shortLivedTokenValidity",!1,g);c.currentVersion=g.currentVersion;c.owningTenant=g.owningTenant;(g=c.owningSystemUrl=g.owningSystemUrl)&&b._portals.push(g);p&&g?e():d()},function(){a.sinfo_._restInfoDfd=null;var b=Error("Unknown resource - could not find token service endpoint.");b.code="IdentityManagerBase.2";b.log=!!f.isDebug;c(b)}):p&&k?e():a.sinfo_._selfReq?a.sinfo_._selfReq.selfDfd.then(function(g){var c=
{},d,e,f,k;g&&(d=g.user&&g.user.username,c.username=d,c.allSSL=g.allSSL,e=g.supportsOAuth,f=g.currentVersion,"multitenant"===g.portalMode&&(k=g.customBaseUrl));a.sinfo_.webTierAuth=!!d;return d&&b.normalizeWebTierAuth?b.generateToken(a.sinfo_,null,{ssl:c.allSSL}).always(function(a){c.portalToken=a&&a.token;c.tokenExpiration=a&&a.expires;return c}):!d&&e&&4.4<=parseFloat(f)&&!b._doPortalSignIn(a.resUrl_)?b._generateOAuthInfo({portalUrl:a.sinfo_.server,customBaseUrl:k,owningTenant:a.sinfo_._selfReq.owningTenant}).always(function(){return c}):
c}).always(function(b){a.sinfo_._selfReq=null;b?d(b.username,b.allSSL,b.portalToken,b.tokenExpiration):d()}):d()},_generateOAuthInfo:function(a){var b=this,g,c=a.portalUrl,d=a.customBaseUrl,f=a.owningTenant;if(a=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){g=window.location.href;var k=g.indexOf("?");-1<k&&(g=g.slice(0,k));k=g.search(/\/(apps|home)\//);g=-1<k?g.slice(0,k):null}a&&g?(this._hasTestedIfAppIsOnPortal=!0,a=v(g+"/sharing/rest",{query:{f:"json"},
responseType:"json"}).then(function(){b.defaultOAuthInfo=new z({appId:"arcgisonline",popup:!0,popupCallbackUrl:g+"/home/oauth-callback.html"})})):(a=new e,a.resolve(),a=a.promise);return a.then(function(){if(b.defaultOAuthInfo)return c=c.replace(/^http:/i,"https:"),v(c+"/sharing/rest/oauth2/validateRedirectUri",{query:{accountId:f,client_id:b.defaultOAuthInfo.appId,redirect_uri:w.makeAbsolute(b.defaultOAuthInfo.popupCallbackUrl),f:"json"},responseType:"json",callbackParamName:"callback"}).then(function(a){if(a.data.valid){var g=
b.defaultOAuthInfo.clone();g.portalUrl=a.data.urlKey&&d?"https://"+a.data.urlKey+"."+d:c;b.oAuthInfos.push(g)}})})}});B=p.createSubclass([g],{declaredClass:"esri.identity.Credential",constructor:function(a){a&&a._oAuthCred&&(this._oAuthCred=a._oAuthCred)},initialize:function(){this.resources=this.resources||[];u.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,properties:{creationTime:{},expires:{},isAdmin:{},oAuthState:{},resources:{},scope:{},server:{},ssl:{},
token:{},tokenRefreshBuffer:2,userId:{},validity:{}},refreshToken:function(){var a=this,b=this.resources&&this.resources[0],g=k.id.findServerInfo(this.server),c=g&&g.owningSystemUrl,d=!!c&&"server"===this.scope,e=d&&F(g,k.id._legacyFed),f=d&&k.id.findServerInfo(c),p,r=(p=g.webTierAuth)&&k.id.normalizeWebTierAuth,l=y[this.server],l=l&&l[this.userId],z={username:this.userId,password:l},v;if(!p||r)if(d&&!f&&h.some(k.id.serverInfos,function(a){k.id._isIdProvider(c,a.server)&&(f=a);return!!f}),p=f&&k.id.findCredential(f.server,
this.userId),!d||p)if(e)p.refreshToken();else{if(d)v={serverUrl:b,token:p&&p.token,ssl:p&&p.ssl};else if(r)z=null,v={ssl:this.ssl};else if(l)this.isAdmin&&(v={isAdmin:!0});else{var n;b&&(b=k.id._sanitizeUrl(b),this._enqueued=1,n=k.id._enqueue(b,g,null,null,this.isAdmin,this),n.then(function(){a._enqueued=0;a.refreshServerTokens()}).then(null,function(){a._enqueued=0}));return n}return k.id.generateToken(d?f:g,d?null:z,v).then(function(b){a.token=b.token;a.expires=u.isDefined(b.expires)?Number(b.expires):
null;a.creationTime=(new Date).getTime();a.validity=b.validity;a.emitTokenChange();a.refreshServerTokens()}).then(null,function(){})}},refreshServerTokens:function(){"portal"===this.scope&&h.forEach(k.id.credentials,function(a){var b=k.id.findServerInfo(a.server),g=b&&b.owningSystemUrl;a!==this&&a.userId===this.userId&&g&&"server"===a.scope&&(k.id._hasSameServerInstance(this.server,g)||k.id._isIdProvider(g,this.server))&&(F(b,k.id._legacyFed)?(a.token=this.token,a.expires=this.expires,a.creationTime=
this.creationTime,a.validity=this.validity,a.emitTokenChange()):a.refreshToken())},this)},emitTokenChange:function(a){clearTimeout(this._refreshTimer);var b=this.server&&k.id.findServerInfo(this.server),g=(b=b&&b.owningSystemUrl)&&k.id.findServerInfo(b);!1!==a&&(!b||"portal"===this.scope||g&&g.webTierAuth&&!k.id.normalizeWebTierAuth)&&(u.isDefined(this.expires)||u.isDefined(this.validity))&&this._startRefreshTimer();this.emit("token-change")},destroy:function(){this.userId=this.server=this.token=
this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var a=h.indexOf(k.id.credentials,this);-1<a&&k.id.credentials.splice(a,1);this.emitTokenChange();this.emit("destroy")},toJSON:function(){var a=u.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),b=this.resources;b&&0<b.length&&(a.resources=
b.slice());return a},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var a=6E4*this.tokenRefreshBuffer,b=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>b&&(b=0);this._refreshTimer=setTimeout(m.hitch(this,this.refreshToken),b>a?b-a:b)}});a.Credential=B;return a})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(a,f){a.cookie=function(a,h,e){var l=document.cookie,n;if(1==arguments.length)n=(n=l.match(new RegExp("(?:^|; )"+
f.escapeString(a)+"\x3d([^;]*)")))?decodeURIComponent(n[1]):void 0;else{e=e||{};l=e.expires;if("number"==typeof l){var d=new Date;d.setTime(d.getTime()+864E5*l);l=e.expires=d}l&&l.toUTCString&&(e.expires=l.toUTCString());h=encodeURIComponent(h);var l=a+"\x3d"+h,c;for(c in e)l+="; "+c,d=e[c],!0!==d&&(l+="\x3d"+d);document.cookie=l}return n};a.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),
navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return a.cookie})},"esri/identity/ServerInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/JSONSupport".split(" "),function(a,f,m,h,e,l){a=function(a){function d(c){c=a.call(this)||this;c.adminTokenServiceUrl=null;c.currentVersion=null;c.hasPortal=null;c.hasServer=null;c.owningSystemUrl=null;c.owningTenant=
null;c.server=null;c.shortLivedTokenValidity=null;c.tokenServiceUrl=null;c.webTierAuth=null;return c}m(d,a);return d}(e.declared(l));h([e.property({json:{write:!0}})],a.prototype,"adminTokenServiceUrl",void 0);h([e.property({json:{write:!0}})],a.prototype,"currentVersion",void 0);h([e.property({json:{write:!0}})],a.prototype,"hasPortal",void 0);h([e.property({json:{write:!0}})],a.prototype,"hasServer",void 0);h([e.property({json:{write:!0}})],a.prototype,"owningSystemUrl",void 0);h([e.property({json:{write:!0}})],
a.prototype,"owningTenant",void 0);h([e.property({json:{write:!0}})],a.prototype,"server",void 0);h([e.property({json:{write:!0}})],a.prototype,"shortLivedTokenValidity",void 0);h([e.property({json:{write:!0}})],a.prototype,"tokenServiceUrl",void 0);h([e.property({json:{write:!0}})],a.prototype,"webTierAuth",void 0);return a=h([e.subclass("esri.identity.ServerInfo")],a)})},"esri/identity/OAuthCredential":function(){define(["../core/declare"],function(a){return a(null,{declaredClass:"esri.identity.OAuthCredential",
oAuthInfo:null,storage:null,expires:null,ssl:null,token:null,userId:null,constructor:function(a,m){this.oAuthInfo=a;this.storage=m;this._init()},isValid:function(){var a=!1;if(this.oAuthInfo&&this.token&&this.userId){var m=(new Date).getTime();this.expires>m&&(this.expires-m)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(a=!0)}return a},save:function(){if(this.storage){var a=this._load(),m=this.oAuthInfo;if(m&&m.authNamespace&&m.portalUrl){var h=a[m.authNamespace];h||(h=a[m.authNamespace]={});h[m.portalUrl]=
{expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(a))}catch(e){console.log(e)}}}},destroy:function(){var a=this._load(),m=this.oAuthInfo;if(m&&m.authNamespace&&m.portalUrl&&this.storage){var h=a[m.authNamespace];if(h){delete h[m.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(a))}catch(e){console.log(e)}}}m&&(this.oAuthInfo=m._oAuthCred=null)},_init:function(){var a=this._load(),m=this.oAuthInfo;m&&
m.authNamespace&&m.portalUrl&&(a=a[m.authNamespace])&&(a=a[m.portalUrl])&&(this.expires=a.expires,this.ssl=a.ssl,this.token=a.token,this.userId=a.userId)},_load:function(){var a={};if(this.storage){var m=this.storage.getItem("esriJSAPIOAuth");if(m)try{a=JSON.parse(m)}catch(h){console.log(h)}}return a}})})},"esri/identity/OAuthInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/JSONSupport".split(" "),
function(a,f,m,h,e,l){a=n=function(a){function c(b){b=a.call(this)||this;b._oAuthCred=null;b.appId=null;b.authNamespace="/";b.expiration=20160;b.forceLogin=!1;b.locale=null;b.minTimeUntilExpiration=30;b.popup=!1;b.popupCallbackUrl="oauth-callback.html";b.popupWindowFeatures="height\x3d480,width\x3d800,location,resizable,scrollbars,status";b.portalUrl="https://www.arcgis.com";return b}m(c,a);c.prototype.clone=function(){return n.fromJSON(this.toJSON())};return c}(e.declared(l));h([e.property({json:{write:!0}})],
a.prototype,"appId",void 0);h([e.property({json:{write:!0}})],a.prototype,"authNamespace",void 0);h([e.property({json:{write:!0}})],a.prototype,"expiration",void 0);h([e.property({json:{write:!0}})],a.prototype,"forceLogin",void 0);h([e.property({json:{write:!0}})],a.prototype,"locale",void 0);h([e.property({json:{write:!0}})],a.prototype,"minTimeUntilExpiration",void 0);h([e.property({json:{write:!0}})],a.prototype,"popup",void 0);h([e.property({json:{write:!0}})],a.prototype,"popupCallbackUrl",
void 0);h([e.property({json:{write:!0}})],a.prototype,"popupWindowFeatures",void 0);h([e.property({json:{write:!0}})],a.prototype,"portalUrl",void 0);a=n=h([e.subclass("esri.identity.OAuthInfo")],a);var n;return a})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "),function(a,f,m,h,e,l,n,d,c,b){h("dijit-legacy-requires")&&n(0,
function(){a(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});n=f("dijit.form.Button"+(h("dojo-bidi")?"_NoBidi":""),[d,c],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:b,_setValueAttr:"valueNode",_setNameAttr:function(a){this.valueNode&&this.valueNode.setAttribute("name",a)},postCreate:function(){this.inherited(arguments);this._setLabelFromContainer()},_setLabelFromContainer:function(){this.containerNode&&
!this.label&&(this.label=l.trim(this.containerNode.innerHTML),this.onLabelSet())},_setShowLabelAttr:function(a){this.containerNode&&m.toggle(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},setLabel:function(a){e.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},onLabelSet:function(){this.inherited(arguments);this.showLabel||"title"in this.params||(this.titleNode.title=l.trim(this.containerNode.innerText||this.containerNode.textContent||
""))}});h("dojo-bidi")&&(n=f("dijit.form.Button",n,{onLabelSet:function(){this.inherited(arguments);this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this._setLabelAttr(this.label))}}));return n})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),function(a,
f,m,h,e,l,n,d){f("dijit-legacy-requires")&&h(0,function(){require(["dijit/form/_FormValueWidget"])});return a("dijit.form._FormWidget",[e,n,l,d],{setDisabled:function(a){m.deprecated("setDisabled("+a+") is deprecated. Use set('disabled',"+a+") instead.","","2.0");this.set("disabled",a)},setValue:function(a){m.deprecated("dijit.form._FormWidget:setValue("+a+") is deprecated.  Use set('value',"+a+") instead.","","2.0");this.set("value",a)},getValue:function(){m.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.",
"","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!f("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)}})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(a,f,m,h,e,l,n,d,c,b){return f("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text",
"aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(c){this._set("disabled",c);/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)?m.set(this.focusNode,"disabled",c):this.focusNode.setAttribute("aria-disabled",c?"true":"false");this.valueNode&&m.set(this.valueNode,"disabled",c);c?(this._set("hovering",!1),this._set("active",!1),c="tabIndex"in this.attributeMap?
this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",a.forEach(e.isArray(c)?c:[c],function(a){a=this[a];d("webkit")||b.hasDefaultTabStop(a)?a.setAttribute("tabIndex","-1"):a.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(a){if("mouse"==a&&this.isFocusable())var b=this.own(n(this.focusNode,"focus",function(){k.remove();b.remove()}))[0],f=d("pointer-events")?"pointerup":d("MSPointer")?"MSPointerUp":d("touch-events")?
"touchend, mouseup":"mouseup",k=this.own(n(this.ownerDocumentBody,f,e.hitch(this,function(a){k.remove();b.remove();this.focused&&("touchend"==a.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){c.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=h.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(k){}},compare:function(a,
b){return"number"==typeof a&&"number"==typeof b?isNaN(a)&&isNaN(b)?0:a-b:a>b?1:a<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,b){void 0!=this._lastValueReported||null!==b&&this._onChangeActive||(this._resetValue=this._lastValueReported=a);this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,this._lastValueReported);(this.intermediateChanges||b||void 0===b)&&this._pendingOnChange&&(this._lastValueReported=a,this._pendingOnChange=
!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(a)})))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(a,f,m,h){var e=
a("dijit.form._ButtonMixin"+(m("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(a){a.stopPropagation();a.preventDefault();this.disabled||this.valueNode.click(a);return!1},_onClick:function(a){if(this.disabled)return a.stopPropagation(),a.preventDefault(),!1;!1===this.onClick(a)&&a.preventDefault();var e=a.defaultPrevented;if(!e&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var d=this.domNode;d.parentNode;d=d.parentNode){var c=h.byNode(d);if(c&&"function"==
typeof c._onSubmit){c._onSubmit(a);a.preventDefault();e=!0;break}}return!e},postCreate:function(){this.inherited(arguments);f.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(a){this._set("label",a);(this.containerNode||this.focusNode).innerHTML=a;this.onLabelSet()},onLabelSet:function(){}});m("dojo-bidi")&&(e=a("dijit.form._ButtonMixin",e,{onLabelSet:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));return e})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),
function(a,f,m,h,e,l,n,d){return a("dijit.form.Form",[e,l,n,d],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(a){f.set(this.domNode,
"encType",a);h("ie")&&(this.domNode.encoding=a);this._set("encType",a)},reset:function(a){var b={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:a?a.target:this.domNode,target:a?a.target:this.domNode};!1!==this.onReset(b)&&b.returnValue&&this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(a){this.reset(a);a.stopPropagation();a.preventDefault();return!1},_onSubmit:function(a){var b=this.constructor.prototype;if(this.execute!=
b.execute||this.onExecute!=b.onExecute)m.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(a)&&(a.stopPropagation(),a.preventDefault())},onSubmit:function(){return this.isValid()},submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "),
function(a,f,m,h,e,l,n){var d=a("dijit.form.ValidationTextBox",e,{templateString:n,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(a,b){b!=d.prototype[a]&&(f.deprecated("ValidationTextBox id\x3d"+this.id+", set('"+a+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",b))},_setRegExpGenAttr:function(a){this._deprecateRegExp("regExpGen",
a);this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(a){this._deprecateRegExp("regExp",a)},_setValueAttr:function(){this.inherited(arguments);this._refreshState()},validator:function(a,b){return(new RegExp("^(?:"+this._computeRegexp(b)+")"+(this.required?"":"?")+"$")).test(a)&&(!this.required||!this._isEmpty(a))&&(this._isEmpty(a)||void 0!==this.parse(a,b))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,
this.get("constraints"))},_isEmpty:function(a){return(this.trim?/^\s*$/:/^$/).test(a)},getErrorMessage:function(){var a="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:this.invalidMessage?this.invalidMessage:this.promptMessage,b="$_unset_$"==this.missingMessage?this.messages.missingMessage:this.missingMessage?this.missingMessage:a;return this.required&&this._isEmpty(this.textbox.value)?b:a},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(a){var b=
"",c=this.disabled||this.isValid(a);c&&(this._maskValidSubsetError=!0);var d=this._isEmpty(this.textbox.value),e=!c&&a&&this._isValidSubset();this._set("state",c?"":((!this._hasBeenBlurred||a)&&d||e)&&(this._maskValidSubsetError||e&&!this._hasBeenBlurred&&a)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false");"Error"==this.state?(this._maskValidSubsetError=a&&e,b=this.getErrorMessage(a)):"Incomplete"==this.state?(b=this.getPromptMessage(a),this._maskValidSubsetError=
!this._hasBeenBlurred||a):d&&(b=this.getPromptMessage(a));this.set("message",b);return c},displayMessage:function(a){a&&this.focused?l.show(a,this.domNode,this.tooltipPosition,!this.isLeftToRight()):l.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(a){this.constraints=m.clone(this.constraints);this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(a){!a.locale&&
this.lang&&(a.locale=this.lang);this._set("constraints",a);this._refreshState()},_setPatternAttr:function(a){this._set("pattern",a);this._refreshState()},_computeRegexp:function(a){var b=this.pattern;"function"==typeof b&&(b=b.call(this,a));if(b!=this._lastRegExp){var c="";this._lastRegExp=b;".*"!=b&&b.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(a){switch(a.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":c+=a;break;case ")":c+="|$)";break;default:c+=
"(?:"+a+"|$)"}});try{"".search(c)}catch(q){c=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+c+")$"}return b},postMixInProperties:function(){this.inherited(arguments);this.messages=h.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",
a);this._refreshState()},_setMessageAttr:function(a){this._set("message",a);this.displayMessage(a)},reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)},destroy:function(){l.hide(this.domNode);this.inherited(arguments)}});return d})},"dijit/form/TextBox":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k){d=a("dijit.form.TextBox"+(n("dojo-bidi")?"_NoBidi":""),[d,c],{templateString:b,_singleNodeTemplate:'\x3cinput class\x3d"dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"off" type\x3d"${type}" ${!nameAttrSetting} /\x3e',_buttonInputDisabled:n("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var a=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||
("hidden"==a||"file"==a)&&this.templateString==this.constructor.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>n("ie")&&this.defer(function(){try{var a=m.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;if(b){var c=this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=b}}}catch(w){}})},_setPlaceHolderAttr:function(a){this._set("placeHolder",a);this._phspan||
(this._attachPoints.push("_phspan"),this._phspan=f.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(l(this._phspan,"mousedown",function(a){a.preventDefault()}),l(this._phspan,"touchend, pointerup, MSPointerUp",e.hitch(this,function(){this.focus()}))));this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(a));this._updatePlaceHolder()},_onInput:function(a){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&
(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(a,b,c){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){h.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},setDisplayedValue:function(a){h.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",
a)},_onBlur:function(a){this.disabled||(this.inherited(arguments),this._updatePlaceHolder(),n("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(a){this.disabled||this.readOnly||(this.inherited(arguments),this._updatePlaceHolder())}});9>n("ie")&&(d.prototype._isTextSelected=function(){var a=this.ownerDocument.selection.createRange();return a.parentElement()==this.textbox&&0<a.text.length},k._setSelectionRange=c._setSelectionRange=function(a,
b,c){a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),a.moveStart("character",-99999),a.moveStart("character",b),a.moveEnd("character",c-b),a.select())});n("dojo-bidi")&&(d=a("dijit.form.TextBox",d,{_setPlaceHolderAttr:function(a){this.inherited(arguments);this.applyTextDir(this._phspan)}}));return d})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(a,f,m,h){return a("dijit.form._FormValueWidget",[m,h],{_layoutHackIE7:function(){if(7==
f("ie"))for(var a=this.domNode,h=a.parentNode,n=a.firstChild||a,d=n.style.filter,c=this;h&&0==h.clientHeight;)(function(){var a=c.connect(h,"onscroll",function(){c.disconnect(a);n.style.filter=(new Date).getMilliseconds();c.defer(function(){n.style.filter=d})})})(),h=h.parentNode}})})},"dijit/form/_FormValueMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on ./_FormWidgetMixin".split(" "),function(a,f,m,h,e,l){return a("dijit.form._FormValueMixin",l,{readOnly:!1,
_setReadOnlyAttr:function(a){f.set(this.focusNode,"readOnly",a);this._set("readOnly",a)},postCreate:function(){this.inherited(arguments);void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(a,d){this._handleOnChange(a,d)},_handleOnChange:function(a,d){this._set("value",a);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)}})})},
"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/sniff dojo/keys dojo/_base/lang dojo/on ../main".split(" "),function(a,f,m,h,e,l,n,d){var c=f("dijit.form._TextBoxMixin"+(h("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(a,c,d){var b;void 0!==a&&(b=this.filter(a),
"string"!=typeof d&&(d=null===b||"number"==typeof b&&isNaN(b)?"":this.filter(this.format(b,this.constraints)),0!=this.compare(b,this.filter(this.parse(d,this.constraints)))&&(d=null)));null==d||"number"==typeof d&&isNaN(d)||this.textbox.value==d||(this.textbox.value=d,this._set("displayedValue",this.get("displayedValue")));this.inherited(arguments,[b,c])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(a){null==a?a="":"string"!=
typeof a&&(a=String(a));this.textbox.value=a;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"))},format:function(a){return null==a?"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},onInput:function(){},_onInput:function(a){this._lastInputEventValue=this.textbox.value;this._processInput(this._lastInputProducingEvent||a);delete this._lastInputProducingEvent;this.intermediateChanges&&this._handleOnChange(this.get("value"),
!1)},_processInput:function(){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);this.own(n(this.textbox,"keydown, keypress, paste, cut, compositionend",l.hitch(this,function(a){var b;if("keydown"==a.type&&229!=a.keyCode){b=a.keyCode;switch(b){case e.SHIFT:case e.ALT:case e.CTRL:case e.META:case e.CAPS_LOCK:case e.NUM_LOCK:case e.SCROLL_LOCK:return}if(!a.ctrlKey&&!a.metaKey&&
!a.altKey){switch(b){case e.NUMPAD_0:case e.NUMPAD_1:case e.NUMPAD_2:case e.NUMPAD_3:case e.NUMPAD_4:case e.NUMPAD_5:case e.NUMPAD_6:case e.NUMPAD_7:case e.NUMPAD_8:case e.NUMPAD_9:case e.NUMPAD_MULTIPLY:case e.NUMPAD_PLUS:case e.NUMPAD_ENTER:case e.NUMPAD_MINUS:case e.NUMPAD_PERIOD:case e.NUMPAD_DIVIDE:return}if(65<=b&&90>=b||48<=b&&57>=b||b==e.SPACE)return;b=!1;for(var c in e)if(e[c]===a.keyCode){b=!0;break}if(!b)return}}(b=32<=a.charCode?String.fromCharCode(a.charCode):a.charCode)||(b=65<=a.keyCode&&
90>=a.keyCode||48<=a.keyCode&&57>=a.keyCode||a.keyCode==e.SPACE?String.fromCharCode(a.keyCode):a.keyCode);b||(b=229);if("keypress"==a.type){if("string"!=typeof b)return;if("a"<=b&&"z">=b||"A"<=b&&"Z">=b||"0"<=b&&"9">=b||" "===b)if(a.ctrlKey||a.metaKey||a.altKey)return}var d={faux:!0},f;for(f in a)/^(layer[XY]|returnValue|keyLocation)$/.test(f)||(c=a[f],"function"!=typeof c&&"undefined"!=typeof c&&(d[f]=c));l.mixin(d,{charOrCode:b,_wasConsumed:!1,preventDefault:function(){d._wasConsumed=!0;a.preventDefault()},
stopPropagation:function(){a.stopPropagation()}});this._lastInputProducingEvent=d;!1===this.onInput(d)&&(d.preventDefault(),d.stopPropagation());if(!d._wasConsumed&&9>=h("ie"))switch(a.keyCode){case e.TAB:case e.ESCAPE:case e.DOWN_ARROW:case e.UP_ARROW:case e.LEFT_ARROW:case e.RIGHT_ARROW:break;default:a.keyCode==e.ENTER&&"textarea"!=this.textbox.tagName.toLowerCase()||this.defer(function(){this.textbox.value!==this._lastInputEventValue&&n.emit(this.textbox,"input",{bubbles:!0})})}})),n(this.textbox,
"input",l.hitch(this,"_onInput")),n(this.domNode,"keypress",function(a){a.stopPropagation()}))},_blankValue:"",filter:function(a){if(null===a)return this._blankValue;if("string"!=typeof a)return a;this.trim&&(a=l.trim(a));this.uppercase&&(a=a.toUpperCase());this.lowercase&&(a=a.toLowerCase());this.propercase&&(a=a.replace(/[^\s]+/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}));return a},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(a){this.disabled||
(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(a){this.disabled||this.readOnly||(this.selectOnClick&&"mouse"==a&&(this._selectOnClickHandle=n.once(this.domNode,"mouseup, touchend",l.hitch(this,function(a){this._isTextSelected()||c.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=
null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="";this.inherited(arguments)}});h("dojo-bidi")&&(c=f("dijit.form._TextBoxMixin",c,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode);this.inherited(arguments)}}));c._setSelectionRange=d._setSelectionRange=function(a,c,
d){a.setSelectionRange&&a.setSelectionRange(c,d)};c.selectInputText=d.selectInputText=function(a,d,e){a=m.byId(a);isNaN(d)&&(d=0);isNaN(e)&&(e=a.value?a.value.length:0);try{a.focus(),c._setSelectionRange(a,d,e)}catch(u){}};return c})},"dijit/Tooltip":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t,p,v){function g(){}var r=f("dijit._MasterTooltip",[x,w],{duration:q.defaultDuration,templateString:p,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new t(this.domNode);this.fadeIn=m.fadeIn({node:this.domNode,duration:this.duration,onEnd:d.hitch(this,"_onShow")});this.fadeOut=m.fadeOut({node:this.domNode,duration:this.duration,onEnd:d.hitch(this,"_onHide")})},show:function(a,b,c,e,f,p,k){if(!this.aroundNode||this.aroundNode!==
b||this.containerNode.innerHTML!=a)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=a;f&&this.set("textDir",f);this.containerNode.align=e?"right":"left";var r=u.around(this.domNode,b,c&&c.length?c:z.defaultPosition,!e,d.hitch(this,"orient")),h=r.aroundNodePos;"M"==r.corner.charAt(0)&&"M"==r.aroundCorner.charAt(0)?(this.connectorNode.style.top=h.y+(h.h-this.connectorNode.offsetHeight>>1)-r.y+"px",this.connectorNode.style.left=""):"M"==r.corner.charAt(1)&&
"M"==r.aroundCorner.charAt(1)?this.connectorNode.style.left=h.x+(h.w-this.connectorNode.offsetWidth>>1)-r.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");n.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=b;this.onMouseEnter=p||g;this.onMouseLeave=k||g}},orient:function(a,b,g,c,d){this.connectorNode.style.top="";var e=c.h;c=c.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove",
"BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+"-"+g];this.domNode.style.width="auto";var f=l.position(this.domNode);if(k("ie")||k("trident"))f.w+=2;l.setMarginBox(this.domNode,{w:Math.min(Math.max(c,1),f.w)});"B"==g.charAt(0)&&"B"==b.charAt(0)?(a=l.position(a),b=this.connectorNode.offsetHeight,
a.h>e?(this.connectorNode.style.top=e-(d.h+b>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(d.h/2-b/2,0),a.h-b)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,f.w-c)},_onShow:function(){k("ie")&&(this.domNode.style.filter="")},hide:function(a){this._onDeck&&this._onDeck[1]==a?this._onDeck=null:this.aroundNode===a&&(this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=
null,this.fadeOut.play());this.onMouseEnter=this.onMouseLeave=g},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});k("dojo-bidi")&&r.extend({_setAutoTextDir:function(b){this.applyTextDir(b);a.forEach(b.children,function(a){this._setAutoTextDir(a)},this)},_setTextDirAttr:function(a){this._set("textDir",a);"auto"==a?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}});v.showTooltip=
function(b,g,c,d,e,f,p){c&&(c=a.map(c,function(a){return{after:"after-centered",before:"before-centered"}[a]||a}));z._masterTT||(v._masterTT=z._masterTT=new r);return z._masterTT.show(b,g,c,d,e,f,p)};v.hideTooltip=function(a){return z._masterTT&&z._masterTT.hide(a)};var z=f("dijit.Tooltip",x,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(g){a.forEach(this._connections||[],function(b){a.forEach(b,function(a){a.remove()})},this);this._connectIds=
a.filter(d.isArrayLike(g)?g:g?[g]:[],function(a){return h.byId(a,this.ownerDocument)},this);this._connections=a.map(this._connectIds,function(a){a=h.byId(a,this.ownerDocument);var g=this.selector,e=g?function(a){return b.selector(g,a)}:function(a){return a},f=this;return[b(a,e(c.enter),function(){f._onHover(this)}),b(a,e("focusin"),function(){f._onHover(this)}),b(a,e(c.leave),d.hitch(f,"_onUnHover")),b(a,e("focusout"),d.hitch(f,"set","state","DORMANT"))]},this);this._set("connectId",g)},addTarget:function(b){b=
b.id||b;-1==a.indexOf(this._connectIds,b)&&this.set("connectId",this._connectIds.concat(b))},removeTarget:function(b){b=a.indexOf(this._connectIds,b.id||b);0<=b&&(this._connectIds.splice(b,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);e.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var b=this.connectId;a.forEach(d.isArrayLike(b)?b:[b],this.addTarget,this)},getContent:function(a){return this.label||this.domNode.innerHTML},
state:"DORMANT",_setStateAttr:function(a){if(!(this.state==a||"SHOW TIMER"==a&&"SHOWING"==this.state||"HIDE TIMER"==a&&"DORMANT"==this.state)){this._hideTimer&&(this._hideTimer.remove(),delete this._hideTimer);this._showTimer&&(this._showTimer.remove(),delete this._showTimer);switch(a){case "DORMANT":this._connectNode&&(z.hide(this._connectNode),delete this._connectNode,this.onHide());break;case "SHOW TIMER":"SHOWING"!=this.state&&(this._showTimer=this.defer(function(){this.set("state","SHOWING")},
this.showDelay));break;case "SHOWING":var b=this.getContent(this._connectNode);if(!b){this.set("state","DORMANT");return}z.show(b,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,d.hitch(this,"set","state","SHOWING"),d.hitch(this,"set","state","HIDE TIMER"));this.onShow(this._connectNode,this.position);break;case "HIDE TIMER":this._hideTimer=this.defer(function(){this.set("state","DORMANT")},this.hideDelay)}this._set("state",a)}},_onHover:function(a){this._connectNode&&a!=this._connectNode&&
this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOW TIMER")},_onUnHover:function(a){this.set("state","HIDE TIMER")},open:function(a){this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOWING")},close:function(){this.set("state","DORMANT")},onShow:function(){},onHide:function(){},destroy:function(){this.set("state","DORMANT");a.forEach(this._connections||[],function(b){a.forEach(b,function(a){a.remove()})},this);this.inherited(arguments)}});z._MasterTooltip=r;z.show=
v.showTooltip;z.hide=v.hideTooltip;z.defaultPosition=["after-centered","before-centered"];return z})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(a,f,m,h,e,l,n){function d(b,c,d,h){var k=l.getEffectiveBox(b.ownerDocument);b.parentNode&&"body"==String(b.parentNode.tagName).toLowerCase()||e.body(b.ownerDocument).appendChild(b);var n=null;a.some(c,function(a){var g=a.corner,c=a.pos,e=0,p=
{w:{L:k.l+k.w-c.x,R:c.x-k.l,M:k.w}[g.charAt(1)],h:{T:k.t+k.h-c.y,B:c.y-k.t,M:k.h}[g.charAt(0)]},l=b.style;l.left=l.right="auto";d&&(e=d(b,a.aroundCorner,g,p,h),e="undefined"==typeof e?0:e);var v=b.style,m=v.display,q=v.visibility;"none"==v.display&&(v.visibility="hidden",v.display="");l=f.position(b);v.display=m;v.visibility=q;m={L:c.x,R:c.x-l.w,M:Math.max(k.l,Math.min(k.l+k.w,c.x+(l.w>>1))-l.w)}[g.charAt(1)];q={T:c.y,B:c.y-l.h,M:Math.max(k.t,Math.min(k.t+k.h,c.y+(l.h>>1))-l.h)}[g.charAt(0)];c=Math.max(k.l,
m);v=Math.max(k.t,q);m=Math.min(k.l+k.w,m+l.w)-c;q=Math.min(k.t+k.h,q+l.h)-v;e+=l.w-m+(l.h-q);if(null==n||e<n.overflow)n={corner:g,aroundCorner:a.aroundCorner,x:c,y:v,w:m,h:q,overflow:e,spaceAvailable:p};return!e});n.overflow&&d&&d(b,n.aroundCorner,n.corner,n.spaceAvailable,h);c=n.y;var q=n.x,p=e.body(b.ownerDocument);/relative|absolute/.test(m.get(p,"position"))&&(c-=m.get(p,"marginTop"),q-=m.get(p,"marginLeft"));p=b.style;p.top=c+"px";p.left=q+"px";p.right="auto";return n}var c={TL:"BR",TR:"BL",
BL:"TR",BR:"TL"};return n.place={at:function(b,e,f,h,l){f=a.map(f,function(a){var b={corner:a,aroundCorner:c[a],pos:{x:e.x,y:e.y}};h&&(b.pos.x+="L"==a.charAt(1)?h.x:-h.x,b.pos.y+="T"==a.charAt(0)?h.y:-h.y);return b});return d(b,f,l)},around:function(b,c,e,l,n){function k(a,b){E.push({aroundCorner:a,corner:b,pos:{x:{L:y,R:y+u,M:y+(u>>1)}[a.charAt(1)],y:{T:x,B:x+B,M:x+(B>>1)}[a.charAt(0)]}})}var q;if("string"==typeof c||"offsetWidth"in c||"ownerSVGElement"in c){if(q=f.position(c,!0),/^(above|below)/.test(e[0])){var p=
f.getBorderExtents(c),v=c.firstChild?f.getBorderExtents(c.firstChild):{t:0,l:0,b:0,r:0},g=f.getBorderExtents(b),r=b.firstChild?f.getBorderExtents(b.firstChild):{t:0,l:0,b:0,r:0};q.y+=Math.min(p.t+v.t,g.t+r.t);q.h-=Math.min(p.t+v.t,g.t+r.t)+Math.min(p.b+v.b,g.b+r.b)}}else q=c;if(c.parentNode)for(p="absolute"==m.getComputedStyle(c).position,c=c.parentNode;c&&1==c.nodeType&&"BODY"!=c.nodeName;){v=f.position(c,!0);g=m.getComputedStyle(c);/relative|absolute/.test(g.position)&&(p=!1);if(!p&&/hidden|auto|scroll/.test(g.overflow)){var r=
Math.min(q.y+q.h,v.y+v.h),z=Math.min(q.x+q.w,v.x+v.w);q.x=Math.max(q.x,v.x);q.y=Math.max(q.y,v.y);q.h=r-q.y;q.w=z-q.x}"absolute"==g.position&&(p=!0);c=c.parentNode}var y=q.x,x=q.y,u="w"in q?q.w:q.w=q.width,B="h"in q?q.h:(h.deprecated("place.around: dijit/place.__Rectangle: { x:"+y+", y:"+x+", height:"+q.height+", width:"+u+" } has been deprecated.  Please use { x:"+y+", y:"+x+", h:"+q.height+", w:"+u+" }","","2.0"),q.h=q.height),E=[];a.forEach(e,function(a){var b=l;switch(a){case "above-centered":k("TM",
"BM");break;case "below-centered":k("BM","TM");break;case "after-centered":b=!b;case "before-centered":k(b?"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":k(b?"TL":"TR",b?"TR":"TL");k(b?"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":k(b?"BL":"BR",b?"TL":"TR");k(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":k(b?"TL":"TR",b?"BL":"BR");k(b?"TR":"TL",b?"BR":"BL");break;default:k(a.aroundCorner,a.corner)}});b=d(b,E,n,{w:u,h:B});b.aroundNodePos=q;return b}}})},
"esri/identity/OAuthSignInHandler":function(){define("./Credential ../core/domUtils ../core/lang ../core/urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/identity dojo/io-query dojo/sniff dijit/form/Button dojo/query".split(" "),function(a,f,m,h,e,l,n,d,c,b,k,q,u){return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e{oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e{invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e{lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e{lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(a){this._oAuthRedirectFunc=a},oAuthSignIn:function(a,c,e,p){var h=this._oAuthDfd=new d;h.resUrl_=a;h.sinfo_=c;h.oinfo_=e;var g=!p||!1!==p.oAuthPopupConfirmation;if(!e.popup||!g)return this._doOAuthSignIn(a,c,e),h.promise;this._nls||(this._nls=k);this.oAuthDialog||(this.oAuthDialog=this._createOAuthDialog());a=this.oAuthDialog;c=p&&p.error;p=p&&p.token;f.hide(a.errMsg_);c&&403==c.code&&p&&(b.set(a.errMsg_,"innerHTML",this._nls.forbidden),f.show(a.errMsg_));a.show();
return h.promise},setOAuthResponseHash:function(b){var c=this._oAuthDfd;this._oAuthDfd=null;if(c&&b)if(clearInterval(this._oAuthIntervalId),"#"===b.charAt(0)&&(b=b.substring(1)),b=q.queryToObject(b),b.error)b=Error("access_denied"===b.error?"ABORTED":"OAuth: "+b.error+" - "+b.error_description),b.code="IdentityManagerBase.2",b.log=!!n.isDebug,c.reject(b);else{var d=c.oinfo_._oAuthCred,e=new a({userId:b.username,server:c.sinfo_.server,token:b.access_token,expires:(new Date).getTime()+1E3*Number(b.expires_in),
ssl:"true"===b.ssl,_oAuthCred:d});d.storage=b.persist?window.localStorage:window.sessionStorage;d.token=e.token;d.expires=e.expires;d.userId=e.userId;d.ssl=e.ssl;d.save();c.resolve(e)}},_createOAuthDialog:function(){var a=this._nls,b=m.substitute(a,this._oAuthDialogContent),d=new e({title:a.title,content:b,"class":"esri-widget esriOAuthSignInDialog esriIdentityDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var a=d.esriIdMgr_._oAuthDfd;d.hide_();d.esriIdMgr_._doOAuthSignIn(a.resUrl_,
a.sinfo_,a.oinfo_)},cancel_:function(){var a=d.esriIdMgr_._oAuthDfd;d.esriIdMgr_._oAuthDfd=null;d.hide_();var b=Error("ABORTED");b.code="IdentityManager.2";b.log=!!n.isDebug;a.reject(b)},hide_:function(){f.hide(d.errMsg_);d.hide();e._DialogLevelManager.hide(d)}}),a=d.domNode;d.btnSubmit_=l.byNode(c.query(".esriIdSubmit",a)[0]);d.btnCancel_=l.byNode(c.query(".esriIdCancel",a)[0]);d.errMsg_=c.query(".esriErrorMsg",a)[0];d.connect(d.btnSubmit_,"onClick",d.execute_);d.connect(d.btnCancel_,"onClick",d.onCancel);
d.connect(d,"onCancel",d.cancel_);return d},_doOAuthSignIn:function(a,b,c){var d=this,e={client_id:c.appId,response_type:"token",state:JSON.stringify({portalUrl:c.portalUrl}),expiration:c.expiration,locale:c.locale,redirect_uri:c.popup?h.makeAbsolute(c.popupCallbackUrl):window.location.href.replace(/#.*$/,"")};c.forceLogin&&(e.force_login=!0);var g=c.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",f=g+"?"+q.objectToQuery(e);if(c.popup){var k;7===u("ie")?(k=window.open(c.popupCallbackUrl,
"esriJSAPIOAuth",c.popupWindowFeatures),k.location=f):k=window.open(f,"esriJSAPIOAuth",c.popupWindowFeatures);k?(k.focus(),this._oAuthDfd.oAuthWin_=k,this._oAuthIntervalId=setInterval(function(){if(k.closed){clearInterval(d._oAuthIntervalId);var a=d._oAuthDfd;if(a){var b=Error("ABORTED");b.code="IdentityManager.2";b.log=!!n.isDebug;a.reject(b)}}},500)):(a=Error("ABORTED"),a.code="IdentityManager.2",a.log=!!n.isDebug,this._oAuthDfd.reject(a))}else this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:e,
authorizeUrl:g,resourceUrl:a,serverInfo:b,oAuthInfo:c}):window.location=f}}})},"esri/portal/PortalQueryParams":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Accessor ../core/kebabDictionary ../geometry/Extent ../geometry/support/webMercatorUtils ../geometry/SpatialReference dojo/_base/lang".split(" "),function(a,f,m,h,e,l,n,d,c,b,k){var q=n({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",
numViews:"num-views"});a=u=function(a){function d(b){b=a.call(this)||this;b.disableExtraQuery=!1;b.extent=null;b.num=10;b.query=null;b.sortField=null;b.start=1;return b}m(d,a);Object.defineProperty(d.prototype,"sortOrder",{get:function(){return this._get("sortOrder")||"asc"},set:function(a){"asc"!==a&&"desc"!==a||this._set("sortOrder",a)},enumerable:!0,configurable:!0});d.prototype.clone=function(){return new u({disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,
num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})};d.prototype.toRequestOptions=function(a,d){var e;if(this.extent){var g=c.project(this.extent,b.WGS84);g&&(e=g.xmin+","+g.ymin+","+g.xmax+","+g.ymax)}g=this.query;!this.disableExtraQuery&&a.extraQuery&&(g="("+g+")"+a.extraQuery);a={bbox:e,q:g,num:this.num,sortField:null,sortOrder:null,start:this.start};this.sortField&&(a.sortField=q.toJSON(this.sortField),a.sortOrder=this.sortOrder);return{query:k.mixin(d,
a)}};return d}(e.declared(l));h([e.property()],a.prototype,"disableExtraQuery",void 0);h([e.property({type:d})],a.prototype,"extent",void 0);h([e.property()],a.prototype,"num",void 0);h([e.property()],a.prototype,"query",void 0);h([e.property()],a.prototype,"sortField",void 0);h([e.property()],a.prototype,"sortOrder",null);h([e.property()],a.prototype,"start",void 0);a=u=h([e.subclass("esri.portal.PortalQueryParams")],a);var u;return a})},"esri/core/kebabDictionary":function(){define(["require","exports"],
function(a,f){return function(a,f){void 0===f&&(f={});var e=f.ignoreUnknown||!1,h={},n;for(n in a)h[a[n]]=n;var d=function(a){return h.hasOwnProperty(a)?h[a]:e?void 0:a},c=function(b){return a.hasOwnProperty(b)?a[b]:e?void 0:b};return{toJSON:d,fromJSON:c,read:function(a){return c(a)},write:function(a,c,e){a=d(a);void 0!==a&&(c[e]=a)}}}})},"esri/portal/PortalQueryResult":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Accessor".split(" "),
function(a,f,m,h,e,l){a=function(a){function d(c){c=a.call(this)||this;c.nextQueryParams=null;c.queryParams=null;c.results=null;c.total=null;return c}m(d,a);return d}(e.declared(l));h([e.property()],a.prototype,"nextQueryParams",void 0);h([e.property()],a.prototype,"queryParams",void 0);h([e.property()],a.prototype,"results",void 0);h([e.property()],a.prototype,"total",void 0);return a=h([e.subclass("esri.portal.PortalQueryResult")],a)})},"esri/portal/PortalUser":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Error ../core/JSONSupport ./PortalFolder ./PortalGroup ../core/promiseUtils ../core/requireUtils dojo/promise/all".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q){f=function(e){function f(){var a=e.call(this)||this;a.access=null;a.created=null;a.culture=null;a.description=null;a.email=null;a.fullName=null;a.modified=null;a.orgId=null;a.portal=null;a.preferredView=null;a.privileges=null;a.region=null;a.role=null;a.roleId=null;a.units=null;a.username=null;a.userType=null;return a}m(f,e);Object.defineProperty(f.prototype,"thumbnailUrl",{get:function(){var a=this.url,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+
b+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"userContentUrl",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username:null},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/users/"+this.username:null},enumerable:!0,configurable:!0});f.prototype.addItem=function(a){var b=this,c=a&&a.item,d=a&&a.data;a=a&&a.folder;var g={method:"post"};
c&&(g.query=c._getPostQuery(),null!=d&&("string"===typeof d?g.query.text=d:"object"===typeof d&&(g.query.text=JSON.stringify(d))));d=this.userContentUrl;a&&(d+="/"+a.id);return this.portal._request(d+"/addItem",g).then(function(a){c.id=a.id;c.portal=b.portal;return c.loaded?c._reload():c.load()})};f.prototype.deleteItem=function(a){var b=this.userContentUrl;a.ownerFolder&&(b+="/"+a.ownerFolder);return this.portal._request(b+("/items/"+a.id+"/delete"),{method:"post"}).then(function(){a.id=null;a.portal=
null})};f.prototype.fetchFolders=function(){var a=this;return this.portal._request(this.userContentUrl,{query:{num:1}}).then(function(b){return b&&b.folders?b.folders.map(function(b){b=d.fromJSON(b);b.portal=a.portal;return b}):[]})};f.prototype.fetchGroups=function(){var a=this;return this.portal._request(this.url).then(function(b){return b&&b.groups?b.groups.map(function(b){b=c.fromJSON(b);b.portal=a.portal;return b}):[]})};f.prototype.fetchItems=function(b){var c=this;b||(b={});var d=this.userContentUrl;
b.folder&&(d+="/"+b.folder.id);var e;return k.when(a,"./PortalItem").then(function(a){e=a;return c.portal._request(d,{query:{folders:!1,num:b.num||10,start:b.start||1}})}).then(function(a){var b;return a&&a.items?(b=a.items.map(function(a){a=e.fromJSON(a);a.portal=c.portal;a.load();return a}),q(b).always(function(){return{items:b,nextStart:a.nextStart,total:a.total}})):{items:[],nextStart:-1,total:0}})};f.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;b&&a&&(b+="\x26w\x3d"+a);return b};
f.prototype.queryFavorites=function(a){return this.favGroupId?(this._favGroup||(this._favGroup=new c({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(a)):b.reject(new l("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))};f.prototype.toJSON=function(){throw new l("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};return f}(e.declared(n));h([e.property()],f.prototype,"access",void 0);h([e.property({type:Date})],f.prototype,
"created",void 0);h([e.property()],f.prototype,"culture",void 0);h([e.property()],f.prototype,"description",void 0);h([e.property()],f.prototype,"email",void 0);h([e.property()],f.prototype,"favGroupId",void 0);h([e.property()],f.prototype,"fullName",void 0);h([e.property({type:Date})],f.prototype,"modified",void 0);h([e.property()],f.prototype,"orgId",void 0);h([e.property()],f.prototype,"portal",void 0);h([e.property()],f.prototype,"preferredView",void 0);h([e.property()],f.prototype,"privileges",
void 0);h([e.property()],f.prototype,"region",void 0);h([e.property()],f.prototype,"role",void 0);h([e.property()],f.prototype,"roleId",void 0);h([e.property()],f.prototype,"thumbnail",void 0);h([e.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],f.prototype,"thumbnailUrl",null);h([e.property()],f.prototype,"units",void 0);h([e.property({dependsOn:["portal.restUrl"],readOnly:!0})],f.prototype,"userContentUrl",null);h([e.property({dependsOn:["portal.restUrl"],readOnly:!0})],
f.prototype,"url",null);h([e.property()],f.prototype,"username",void 0);h([e.property()],f.prototype,"userType",void 0);return f=h([e.subclass("esri.portal.PortalUser")],f)})},"esri/portal/PortalFolder":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Error ../core/JSONSupport".split(" "),function(a,f,m,h,e,l,n){a=function(a){function c(b){b=a.call(this)||this;b.created=null;b.id=null;b.portal=null;
b.title=null;b.username=null;return b}m(c,a);Object.defineProperty(c.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username+"/"+this.id:null},enumerable:!0,configurable:!0});c.prototype.toJSON=function(){throw new l("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");};return c}(e.declared(n));h([e.property({type:Date})],a.prototype,"created",void 0);h([e.property()],a.prototype,"id",void 0);h([e.property()],a.prototype,
"portal",void 0);h([e.property()],a.prototype,"title",void 0);h([e.property({dependsOn:["portal.restUrl"],readOnly:!0})],a.prototype,"url",null);h([e.property()],a.prototype,"username",void 0);return a=h([e.subclass("esri.portal.PortalFolder")],a)})},"esri/portal/PortalGroup":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/accessorSupport/decorators ../core/Error ../core/JSONSupport ./PortalQueryParams".split(" "),
function(a,f,m,h,e,l,n,d,c){a=function(a){function b(b){b=a.call(this)||this;b.access=null;b.created=null;b.description=null;b.id=null;b.isInvitationOnly=!1;b.modified=null;b.owner=null;b.portal=null;b.snippet=null;b.sortField=null;b.sortOrder=null;b.tags=null;b.title=null;return b}m(b,a);Object.defineProperty(b.prototype,"thumbnailUrl",{get:function(){var a=this.url,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+b+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/groups/"+this.id:null},enumerable:!0,configurable:!0});b.prototype.fetchMembers=function(){return this.portal._request(this.url+"/users")};b.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;b&&a&&(b+="\x26w\x3d"+a);return b};b.prototype.toJSON=function(){throw new n("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};b.prototype.queryItems=function(a){a=a?a.clone():new c;a.query="group:"+
this.id+(a.query?" "+a.query:"");return this.portal.queryItems(a)};return b}(l.declared(d));h([l.property()],a.prototype,"access",void 0);h([l.property({type:Date})],a.prototype,"created",void 0);h([l.property()],a.prototype,"description",void 0);h([l.property()],a.prototype,"id",void 0);h([l.property()],a.prototype,"isInvitationOnly",void 0);h([l.property({type:Date})],a.prototype,"modified",void 0);h([l.property()],a.prototype,"owner",void 0);h([l.property()],a.prototype,"portal",void 0);h([l.property()],
a.prototype,"snippet",void 0);h([l.property()],a.prototype,"sortField",void 0);h([l.property()],a.prototype,"sortOrder",void 0);h([l.property()],a.prototype,"tags",void 0);h([l.property()],a.prototype,"thumbnail",void 0);h([l.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],a.prototype,"thumbnailUrl",null);h([l.property()],a.prototype,"title",void 0);h([l.property({dependsOn:["portal.restUrl"],readOnly:!0})],a.prototype,"url",null);h([e(0,l.cast(c))],a.prototype,"queryItems",
null);return a=h([l.subclass("esri.portal.PortalGroup")],a)})},"esri/portal/PortalItem":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Error ../core/lang ../geometry/Extent ../core/JSONSupport ../core/Loadable ./Portal ./PortalRating ../core/promiseUtils".split(" "),function(a,f,m,h,e,l,n,d,c,b,k,q,u){f=x=function(b){function c(a){a=b.call(this)||this;a.access=null;a.accessInformation=null;a.appProxies=
null;a.avgRating=null;a.created=null;a.culture=null;a.description=null;a.extent=null;a.id=null;a.itemControl=null;a.licenseInfo=null;a.modified=null;a.name=null;a.numComments=null;a.numRatings=null;a.numViews=null;a.owner=null;a.portal=null;a.size=null;a.snippet=null;a.tags=null;a.title=null;a.type=null;a.typeKeywords=null;a.url=null;return a}m(c,b);Object.defineProperty(c.prototype,"displayName",{get:function(){var a=this.type,b=this.typeKeywords||[],g=a;"Feature Service"===a||"Feature Collection"===
a?g=-1<b.indexOf("Table")?"Table":-1<b.indexOf("Route Layer")?"Route Layer":-1<b.indexOf("Markup")?"Markup":"Feature Layer":"Image Service"===a?g=-1<b.indexOf("Elevation 3D Layer")?"Elevation Layer":"Imagery Layer":"Scene Service"===a?g="Scene Layer":"Scene Package"===a?g="Scene Layer Package":"Stream Service"===a?g="Feature Layer":"Geoprocessing Service"===a&&this.portal&&this.portal.isPortal?g=-1<b.indexOf("Web Tool")?"Tool":"Geoprocessing Service":"Geocoding Service"===a?g="Locator":"Microsoft Powerpoint"===
a?g="Microsoft PowerPoint":"GeoJson"===a?g="GeoJSON":"Globe Service"===a?g="Globe Layer":"Vector Tile Service"===a?g="Tile Layer":"Map Service"===a?g=-1===b.indexOf("Spatiotemporal")&&(-1<b.indexOf("Hosted Service")||-1<b.indexOf("Tiled"))?"Tile Layer":"Map Image Layer":a&&-1<a.toLowerCase().indexOf("add in")?g=a.replace(/(add in)/ig,"Add-In"):"datastore catalog service"===a&&(g="Big Data File Share");return g},enumerable:!0,configurable:!0});c.prototype.readExtent=function(a){return a&&a.length?
new d(a[0][0],a[0][1],a[1][0],a[1][1]):null};Object.defineProperty(c.prototype,"iconUrl",{get:function(){var b=this.type&&this.type.toLowerCase()||"",c=this.typeKeywords||[],g=!1,d=!1,e=!1,f=!1;0<b.indexOf("service")||"feature collection"===b||"kml"===b||"wms"===b||"wmts"===b||"wfs"===b?(g=-1<c.indexOf("Hosted Service"),"feature service"===b||"feature collection"===b||"kml"===b||"wfs"===b?(d=-1<c.indexOf("Table"),e=-1<c.indexOf("Route Layer"),f=-1<c.indexOf("Markup"),b=d?"table":e?"routelayer":f?
"markup":g?"featureshosted":"features"):b="map service"===b||"wms"===b||"wmts"===b?g||-1<c.indexOf("Tiled")||"wmts"===b?"maptiles":"mapimages":"scene service"===b?-1<c.indexOf("Line")?"sceneweblayerline":-1<c.indexOf("3DObject")?"sceneweblayermultipatch":-1<c.indexOf("Point")?"sceneweblayerpoint":-1<c.indexOf("IntegratedMesh")?"sceneweblayermesh":-1<c.indexOf("PointCloud")?"sceneweblayerpointcloud":-1<c.indexOf("Polygon")?"sceneweblayerpolygon":"sceneweblayer":"image service"===b?-1<c.indexOf("Elevation 3D Layer")?
"elevationlayer":"imagery":"stream service"===b?"streamlayer":"vector tile service"===b?"vectortile":"datastore catalog service"===b?"datastorecollection":"geocoding service"===b?"geocodeservice":"layers"):b="web map"===b||"cityengine web scene"===b?"maps":"web scene"===b?-1<c.indexOf("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===b||"mobile application"===b||"application"===b||"operation view"===b||"desktop application"===b?"apps":"map document"===b||"map package"===
b||"published map"===b||"scene document"===b||"globe document"===b||"basemap package"===b||"mobile basemap package"===b||"mobile map package"===b||"project package"===b||"project template"===b||"pro map"===b||"layout"===b||"layer"===b&&-1<c.indexOf("ArcGIS Pro")||"explorer map"===b&&c.indexOf("Explorer Document")?"mapsgray":"service definition"===b||"csv"===b||"shapefile"===b||"cad drawing"===b||"geojson"===b||"360 vr experience"===b?"datafiles":"explorer add in"===b||"desktop add in"===b||"windows viewer add in"===
b||"windows viewer configuration"===b?"appsgray":"arcgis pro add in"===b||"arcgis pro configuration"===b?"addindesktop":"rule package"===b||"file geodatabase"===b||"csv collection"===b||"kml collection"===b||"windows mobile package"===b||"map template"===b||"desktop application template"===b||"arcpad package"===b||"code sample"===b||"form"===b||"document link"===b||"vector tile package"===b||"operations dashboard add in"===b||"rules package"===b||"image"===b||"workflow manager package"===b||"desktop style"===
b||"explorer map"===b&&-1<c.indexOf("Explorer Mapping Application")||-1<c.indexOf("Document")?"datafilesgray":"network analysis service"===b||"geoprocessing service"===b||"geodata service"===b||"geometry service"===b||"geoprocessing package"===b||"locator package"===b||"geoprocessing sample"===b||"workflow manager service"===b||"raster function template"===b?"toolsgray":"layer"===b||"layer package"===b||"explorer layer"===b?"layersgray":"scene package"===b?"scenepackage":"tile package"===b?"tilepackage":
"task file"===b?"taskfile":"report template"===b?"report-template":"statistical data collection"===b?"statisticaldatacollection":"insights workbook"===b?"workbook":"insights model"===b?"insightsmodel":"insights page"===b?"insightspage":"hub initiative"===b?"hubinitiative":"hubpage"===b?"hubpage":"hub site application"===b?"hubsite":"relational database connection"===b?"relationaldatabaseconnection":"big data file share"===b?"datastorecollection":"image collection"===b?"imagecollection":"style"===
b?"style":"dashboard"===b?"dashboard":"maps";return b?a.toUrl("../images/portal/"+b+"16.png"):null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isLayer",{get:function(){return-1<"Map Service;Feature Service;Feature Collection;Scene Service;Image Service;Stream Service;Vector Tile Service;WMTS;WMS".split(";").indexOf(this.type)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"itemUrl",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/items/"+
this.id:null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"thumbnailUrl",{get:function(){var a=this.itemUrl,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+b+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"userItemUrl",{get:function(){var a=this.get("portal.restUrl");if(!a)return null;var b=this.owner||this.get("portal.user.username");return b?a+"/content/users/"+(this.ownerFolder?b+"/"+this.ownerFolder:b)+"/items/"+this.id:
null},enumerable:!0,configurable:!0});c.prototype.load=function(){var a=this;this.portal||(this.portal=k.getDefault());var b=this.portal.load().then(function(){return a.resourceInfo?a.resourceInfo:a.id&&a.itemUrl?a.portal._request(a.itemUrl):{}}).then(function(b){a.resourceInfo=b;a.read(b)});this.addResolvingPromise(b);return this};c.prototype.addRating=function(a){var b={method:"post",query:{}};a instanceof q&&(a=a.rating);isNaN(a)||"number"!==typeof a||(b.query.rating=a);return this.portal._request(this.itemUrl+
"/addRating",b).then(function(){return new q({rating:a,created:new Date})})};c.prototype.deleteRating=function(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(function(){})};c.prototype.fetchData=function(a){void 0===a&&(a="json");return this.portal._request(this.itemUrl+"/data",{responseType:a})};c.prototype.fetchRating=function(){return this.portal._request(this.itemUrl+"/rating").then(function(a){return null!=a.rating?(a.created=new Date(a.created),new q(a)):null})};
c.prototype.fetchRelatedItems=function(a){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:a},"PortalItem")};c.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;b&&a&&(b+="\x26w\x3d"+a);return b};c.prototype.update=function(a){var b=this;return this.id?this.load().then(function(){return b.portal._signIn()}).then(function(){var g=a&&a.data,c={method:"post"};c.query=b._getPostQuery();for(var d in c.query)null===c.query[d]&&(c.query[d]="");c.query.clearEmptyFields=
!0;null!=g&&("string"===typeof g?c.query.text=g:"object"===typeof g&&(c.query.text=JSON.stringify(g)));return b.portal._request(b.userItemUrl+"/update",c).then(function(){return b._reload()})}):u.reject(new l("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))};c.prototype.toJSON=function(){var a=this.extent,a={created:this.created&&this.created.getTime(),description:this.description,extent:a&&[[a.xmin,a.ymin],[a.xmax,a.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),
name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return n.fixJson(a)};c.fromJSON=function(a){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");return new x({resourceInfo:a})};c.prototype._reload=function(){var a=this;return this.portal._request(this.itemUrl,{query:{_ts:(new Date).getTime()}}).then(function(b){a.resourceInfo=
b;a.read(b);return a})};c.prototype._getPostQuery=function(){var a=this.toJSON(),b;for(b in a)"tags"===b&&null!==a[b]&&(a[b]=a[b].join(", ")),"typeKeywords"===b&&null!==a[b]&&(a[b]=a[b].join(", "));return a};return c}(e.declared(c,b));h([e.property()],f.prototype,"access",void 0);h([e.property()],f.prototype,"accessInformation",void 0);h([e.property()],f.prototype,"appProxies",void 0);h([e.property()],f.prototype,"avgRating",void 0);h([e.property({type:Date})],f.prototype,"created",void 0);h([e.property()],
f.prototype,"culture",void 0);h([e.property()],f.prototype,"description",void 0);h([e.property({dependsOn:["type","typeKeywords"],readOnly:!0})],f.prototype,"displayName",null);h([e.property({type:d})],f.prototype,"extent",void 0);h([e.reader("extent")],f.prototype,"readExtent",null);h([e.property({dependsOn:["type","typeKeywords"],readOnly:!0})],f.prototype,"iconUrl",null);h([e.property()],f.prototype,"id",void 0);h([e.property({dependsOn:["type"],readOnly:!0})],f.prototype,"isLayer",null);h([e.property()],
f.prototype,"itemControl",void 0);h([e.property({dependsOn:["portal.restUrl","id"],readOnly:!0})],f.prototype,"itemUrl",null);h([e.property()],f.prototype,"licenseInfo",void 0);h([e.property({type:Date})],f.prototype,"modified",void 0);h([e.property()],f.prototype,"name",void 0);h([e.property()],f.prototype,"numComments",void 0);h([e.property()],f.prototype,"numRatings",void 0);h([e.property()],f.prototype,"numViews",void 0);h([e.property()],f.prototype,"owner",void 0);h([e.property()],f.prototype,
"ownerFolder",void 0);h([e.property({type:k})],f.prototype,"portal",void 0);h([e.property()],f.prototype,"resourceInfo",void 0);h([e.property()],f.prototype,"size",void 0);h([e.property()],f.prototype,"snippet",void 0);h([e.property()],f.prototype,"tags",void 0);h([e.property()],f.prototype,"thumbnail",void 0);h([e.property({dependsOn:["itemUrl","thumbnail","portal.credential.token"],readOnly:!0})],f.prototype,"thumbnailUrl",null);h([e.property()],f.prototype,"title",void 0);h([e.property()],f.prototype,
"type",void 0);h([e.property()],f.prototype,"typeKeywords",void 0);h([e.property()],f.prototype,"url",void 0);h([e.property({dependsOn:["portal.restUrl","portal.user.username","owner","ownerFolder","id"],readOnly:!0})],f.prototype,"userItemUrl",null);f=x=h([e.subclass("esri.portal.PortalItem")],f);var x;return f})},"esri/portal/PortalRating":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Accessor".split(" "),
function(a,f,m,h,e,l){a=function(a){function d(c){c=a.call(this)||this;c.created=null;c.rating=null;return c}m(d,a);return d}(e.declared(l));h([e.property()],a.prototype,"created",void 0);h([e.property()],a.prototype,"rating",void 0);return a=h([e.subclass("esri.portal.PortalRating")],a)})},"esri/support/groundUtils":function(){define("require exports ../core/accessorSupport/ensureType ../core/Logger ../Ground ../layers/ElevationLayer".split(" "),function(a,f,m,h,e,l){Object.defineProperty(f,"__esModule",
{value:!0});var n=h.getLogger("esri.support.groundUtils");f.groundElevationLayers={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"}};f.ensureType=function(a){var c;"string"===typeof a?a in f.groundElevationLayers?(a=f.groundElevationLayers[a],a=new l({id:a.id,url:a.url}),c=new e({layers:[a]})):n.warn("Unable to find ground definition for: "+a+'. Try "world-elevation"'):c=m.default(e,a);return c}})},"esri/layers/ElevationLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators dojo/_base/lang ../request ../core/Error ../core/promiseUtils ../core/requireUtils ./TiledLayer ./mixins/ArcGISMapService ./mixins/ArcGISCachedService ./mixins/OperationalLayer ./mixins/PortalLayer ./support/rasterFormats/LercCodec".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t){f=function(e){function f(a){a=e.call(this)||this;a.type="elevation";a.url=null;a.opacity=1;a.operationalLayerType="ArcGISTiledElevationServiceLayer";return a}m(f,e);f.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?l.mixin({},{url:a},b):a};f.prototype.load=function(){var a=this;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:function(a){for(var b=0;b<a.typeKeywords.length;b++)if("elevation 3d layer"===
a.typeKeywords[b].toLowerCase())return!0;throw new d("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"});}}).always(function(){return a._fetchImageService()}));return this};f.prototype.fetchTile=function(a,b,c,d){var g=this;void 0===d&&(d=0);return this.load().then(function(){return g._fetchTileAvailability(a,b,c)}).then(function(){var d=g.getTileUrl(a,b,c);return n(d,{responseType:"array-buffer",
failOk:!0})}).then(function(a){a=t.decode(a.data,{noDataValue:d,returnFileInfo:!0});return{values:a.pixelData,width:a.width,height:a.height,maxZError:a.fileInfo.maxZError,noDataValue:a.noDataValue}})};f.prototype.queryElevation=function(g,c){var d=this;return b.when(a,"./support/ElevationQuery").then(function(a){return(new a.ElevationQuery).query(d,g,c)})};f.prototype._fetchTileAvailability=function(a,b,d){return this.tilemapCache?this.tilemapCache.fetchAvailability(a,b,d):c.resolve("unknown")};f.prototype._fetchImageService=
function(){var a=this;return c.resolve().then(function(){if(a.resourceInfo)return a.resourceInfo;var b={query:l.mixin({f:"json"},a.parsedUrl.query),responseType:"json",callbackParamName:"callback"};return n(a.parsedUrl.path,b)}).then(function(b){b.ssl&&(a.url=a.url.replace(/^http:/i,"https:"));a.read(b.data,{origin:"service",url:a.parsedUrl})})};return f}(e.declared(k,q,u,x,w));h([e.shared({"3d":"../views/3d/layers/ElevationLayerView3D"})],f.prototype,"viewModulePaths",void 0);h([e.property()],f.prototype,
"resourceInfo",void 0);h([e.property({json:{read:!1},value:"elevation",readOnly:!0})],f.prototype,"type",void 0);h([e.property()],f.prototype,"url",void 0);h([e.property({json:{read:!1,write:!1}})],f.prototype,"opacity",void 0);h([e.property()],f.prototype,"operationalLayerType",void 0);return f=h([e.subclass("esri.layers.ElevationLayer")],f)})},"esri/layers/TiledLayer":function(){define(["../request","./Layer","./support/TileInfo"],function(a,f,m){return f.createSubclass({properties:{attributionDataUrl:null,
tileInfo:m},viewModulePaths:{"2d":"../views/2d/layers/TiledLayerView2D","3d":"../views/3d/layers/TiledLayerView3D"},getTileUrl:function(a,e,f){},fetchTile:function(f,e,l,n){f=this.getTileUrl(f,e,l);n={responseType:"image",allowImageDataAccess:n&&n.allowImageDataAccess||!1};return"string"===typeof f?a(f,n).then(function(a){return a.data}):f.then(function(d){return a(d,{responseType:"image"})}).then(function(a){return a.data})}})})},"esri/layers/support/TileInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/_base/lang ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators ../../geometry/SpatialReference ../../geometry/Point ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/scaleUtils ./LOD".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w){var t=n({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc"});a=p=function(a){function g(b){b=a.call(this)||this;b.dpi=96;b.format=null;b.origin=null;b.minScale=0;b.maxScale=0;b.size=null;b.spatialReference=null;return b}m(g,a);g.create=function(a){void 0===a&&(a={size:256,spatialReference:b.WebMercator});var g=a.scales,
c=a.size||256;a=a.spatialReference||b.WebMercator;var d=q.getInfo(a),d=d?new k(d.origin[0],d.origin[1],a):new k(0,0,a),e=1/(39.37*x.getUnitValueForSR(a)*96),f=[];if(g)for(var r=0;r<g.length;r++){var h=g[r],l=h*e;f.push({level:r,scale:h,resolution:l})}else for(g=256/c*5.91657527591555E8,f.push({level:0,scale:g,resolution:g*e}),r=1;24>r;r++)h=g/2,l=h*e,f.push({level:r,scale:h,resolution:l}),g=h;return new p({dpi:96,lods:f,origin:d,size:c,spatialReference:a})};Object.defineProperty(g.prototype,"lods",
{set:function(a){var b=this,g=0,c=0,d=[];this._levelToLOD={};a&&(g=-Infinity,c=Infinity,a.forEach(function(a){d.push(a.scale);g=a.scale>g?a.scale:g;c=a.scale<c?a.scale:c;b._levelToLOD[a.level]=a}));this._set("scales",d);this._set("minScale",g);this._set("maxScale",c);this._set("lods",a);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0});g.prototype.zoomToScale=function(a){var b=this.scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var g=Math.round(a);return b[g]+(g-a)*
(b[Math.round(a-.5)]-b[g])};g.prototype.scaleToZoom=function(a){for(var b=this.scales,g=b.length-1,c=0;c<g;c++){var d=b[c],e=b[c+1];if(d<=a)break;if(e===a)return c+1;if(d>a&&e<a)return c+1-(a-e)/(d-e)}return c};g.prototype.snapScale=function(a,b){void 0===b&&(b=.95);a=this.scaleToZoom(a);return a%Math.floor(a)>=b?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))};g.prototype.tileAt=function(a,b,g,c){var d=this.lodAt(a);if(!d)return null;c||(c={id:null,level:0,row:0,col:0,extent:[0,0,
0,0]});var e;if("number"===typeof b)e=b,b=g;else{if(b.spatialReference.equals(this.spatialReference))e=b.x,b=b.y;else{c=u.project(b,this.spatialReference);if(!c)return null;e=c.x;b=c.y}c=g}g=d.resolution*this.size[0];d=d.resolution*this.size[1];c.level=a;c.row=Math.floor((this.origin.y-b)/d+.001);c.col=Math.floor((e-this.origin.x)/g+.001);this.updateTileInfo(c);return c};g.prototype.updateTileInfo=function(a){var b=this.lodAt(a.level),g=b.resolution*this.size[0],b=b.resolution*this.size[1];a.id=a.level+
"/"+a.row+"/"+a.col;a.extent||(a.extent=[0,0,0,0]);a.extent[0]=this.origin.x+a.col*g;a.extent[1]=this.origin.y-(a.row+1)*b;a.extent[2]=a.extent[0]+g;a.extent[3]=a.extent[1]+b};g.prototype.upsampleTile=function(a){var b=this._upsampleLevels[a.level];if(!b||-1===b.parentLevel)return!1;a.level=b.parentLevel;a.row=Math.floor(a.row/b.factor+.001);a.col=Math.floor(a.col/b.factor+.001);this.updateTileInfo(a);return!0};g.prototype.lodAt=function(a){return this._levelToLOD&&this._levelToLOD[a]||null};g.prototype.clone=
function(){return p.fromJSON(this.toJSON())};g.prototype.toJSON=function(){return d.fixJson({rows:this.size[0],cols:this.size[1],dpi:this.dpi,format:t.toJSON(this.format),compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJSON(),spatialReference:this.spatialReference&&this.spatialReference.toJSON(),lods:this.lods&&this.lods.map(function(a){return a.toJSON()})})};g.prototype._initializeUpsampleLevels=function(){var a=this.lods;this._upsampleLevels=[];for(var b=null,g=0;g<
a.length;g++){var c=a[g];this._upsampleLevels[c.level]={parentLevel:b?b.level:-1,factor:b?b.resolution/c.resolution:0};b=c}};return g}(c.declared(l));h([c.property()],a.prototype,"compressionQuality",void 0);h([c.property()],a.prototype,"dpi",void 0);h([c.property({json:{read:t.fromJSON}})],a.prototype,"format",void 0);h([c.property({type:k,json:{read:function(a,b){return k.fromJSON(e.mixin({spatialReference:b.spatialReference},a))}}})],a.prototype,"origin",void 0);h([c.property({type:[w],value:null})],
a.prototype,"lods",null);h([c.property({readOnly:!0})],a.prototype,"minScale",void 0);h([c.property({readOnly:!0})],a.prototype,"maxScale",void 0);h([c.property({readOnly:!0})],a.prototype,"scales",void 0);h([c.property({cast:function(a){return Array.isArray(a)?a:"number"===typeof a?[a,a]:[256,256]},json:{read:{source:["rows","cols"],reader:function(a,b){return[b.cols,b.rows]}}}})],a.prototype,"size",void 0);h([c.property({type:b})],a.prototype,"spatialReference",void 0);a=p=h([c.subclass("esri.layers.support.TileInfo")],
a);var p;return a})},"esri/geometry/support/scaleUtils":function(){define(["../../config","../../core/lang","./WKIDUnitConversion","./WKIDUnitStrings"],function(a,f,m,h){var e=20015077/180,l={getVerticalUnitValueForSR:function(a){a=this.getUnitValueForSR(a);return 1E5<a?1:a},getVerticalUnitStringForSR:function(a){return 1E5<this.getUnitValueForSR(a)?"meter":(a=this.getUnitString(a))?a.toLowerCase().replace(/_/g,"-"):"meter"},getUnitValueForSR:function(a){return this.getUnitValue(a)||e},getUnitValue:function(a){var d,
c,b;a&&("object"===typeof a?(d=a.wkid,c=a.wkt):"number"===typeof a?d=a:"string"===typeof a&&(c=a));d?b=m.values[m[d]]:c&&-1!==c.search(/^PROJCS/i)&&(a=/UNIT\[([^\]]+)\]\]$/i.exec(c))&&a[1]&&(b=parseFloat(a[1].split(",")[1]));return b},getUnitString:function(a){var d,c;"object"===typeof a?d=a.wkid:"number"===typeof a&&(d=a);d&&(c=h.strings[m[d]]);return c},getScale:function(h,d,c){var b,k,m;1<arguments.length&&f.isDefined(d)&&!d.declaredClass?(b=h,k=d,d=null,m=l.getUnitValue(c)):(b=d||h.extent,k=h.width,
m=l.getUnitValue(b&&b.spatialReference));return b&&k?b.width/k*(m||e)*39.37*a.screenDPI:0},getResolutionForScale:function(e,d){d=l.getUnitValueForSR(d);return e/(39.37*d*a.screenDPI)},getExtentForScale:function(a,d){var c=a.extent;a=a.width;d=l.getResolutionForScale(d,c.spatialReference);return c.clone().expand(d*a/c.width)}};return l})},"esri/geometry/support/WKIDUnitStrings":function(){define([],function(){return{strings:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" ")}})},
"esri/layers/support/LOD":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/JSONSupport".split(" "),function(a,f,m,h,e,l){a=n=function(a){function c(b){b=a.call(this,b)||this;b.level=0;b.levelValue=null;b.resolution=0;b.scale=0;return b}m(c,a);c.prototype.clone=function(){return new n({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};return c}(e.declared(l));
h([e.property({json:{write:!0}})],a.prototype,"level",void 0);h([e.property({json:{write:!0}})],a.prototype,"levelValue",void 0);h([e.property({json:{write:!0}})],a.prototype,"resolution",void 0);h([e.property({json:{write:!0}})],a.prototype,"scale",void 0);a=n=h([e.subclass("esri.layers.support.LOD")],a);var n;return a})},"esri/layers/mixins/ArcGISMapService":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ArcGISService ./ScaleRangeLayer ../../geometry/Extent ../../geometry/SpatialReference".split(" "),
function(a,f,m,h,e,l,n,d,c){a=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.copyright=null;b.fullExtent=null;b.spatialReference=null;b.version=null;return b}m(b,a);b.prototype.readCapabilities=function(a,b){return a&&a.split(",").map(function(a){return a.trim()})};b.prototype.readCopyright=function(a,b){return b.copyrightText};b.prototype.readLegendEnabled=function(a,b){return b.showLegend};b.prototype.writeLegendEnabled=function(a,b){b.showLegend=!!a};b.prototype.readPopupEnabled=
function(a,b){return!b.disablePopup};b.prototype.readVersion=function(a,b){(a=b.currentVersion)||(a=b.hasOwnProperty("capabilities")||b.hasOwnProperty("tables")?10:b.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3);return a};return b}(e.declared(l,n));h([e.property()],a.prototype,"capabilities",void 0);h([e.reader("service","capabilities")],a.prototype,"readCapabilities",null);h([e.property()],a.prototype,"copyright",void 0);h([e.reader("copyright",["copyrightText"])],a.prototype,"readCopyright",
null);h([e.property({type:d})],a.prototype,"fullExtent",void 0);h([e.property({json:{origins:{service:{read:!1},portalItem:{read:!1}}}})],a.prototype,"id",void 0);h([e.property()],a.prototype,"legendEnabled",void 0);h([e.reader("legendEnabled",["showLegend"])],a.prototype,"readLegendEnabled",null);h([e.writer("legendEnabled")],a.prototype,"writeLegendEnabled",null);h([e.reader("popupEnabled",["disablePopup"])],a.prototype,"readPopupEnabled",null);h([e.property({type:c})],a.prototype,"spatialReference",
void 0);h([e.property()],a.prototype,"version",void 0);h([e.reader("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],a.prototype,"readVersion",null);return a=h([e.subclass("esri.layers.mixins.ArcGISMapService")],a)})},"esri/layers/mixins/ArcGISService":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/MultiOriginJSONSupport ../support/arcgisLayerUrl".split(" "),
function(a,f,m,h,e,l,n){a=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}m(c,a);Object.defineProperty(c.prototype,"title",{get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var a=n.parse(this.url);if(a&&a.title)return a.title}return this._get("title")||""},set:function(a){this._set("title",a)},enumerable:!0,configurable:!0});return c}(e.declared(l));h([e.property({dependsOn:["url"]})],a.prototype,"title",null);
h([e.property()],a.prototype,"url",void 0);return a=h([e.subclass("esri.layers.mixins.ArcGISService")],a)})},"esri/core/MultiOriginJSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./accessorSupport/decorators ./Accessor ./accessorSupport/read ./accessorSupport/write ./accessorSupport/utils ./accessorSupport/MultiOriginStore ./accessorSupport/PropertyOrigin".split(" "),function(a,f,m,h,e,l,n,d,c,b,k){function q(a){return c.getProperties(a).store}
a=function(a){function e(){var d=a.call(this)||this,e=c.getProperties(d),f=e.metadatas,h=e.store,g=new b.default;e.store=g;h.keys().forEach(function(a){g.set(a,h.get(a),k.OriginId.DEFAULTS)});Object.keys(f).forEach(function(a){e.internalGet(a)&&g.set(a,e.internalGet(a),k.OriginId.DEFAULTS)});return d}m(e,a);e.prototype.clear=function(a,b){void 0===b&&(b="user");return q(this).clear(a,k.nameToId(b))};e.prototype.read=function(a,b){n.default(this,a,b);return this};e.prototype.write=function(a,b){a=
a||{};d.default(this,a,b);return a};e.prototype.getAtOrigin=function(a,b){var c=q(this),d=k.nameToId(b);if("string"===typeof a)return c.get(a,d);var g={};a.forEach(function(a){g[a]=c.get(a,d)});return g};e.prototype.originOf=function(a){var b=q(this);if("string"===typeof a)return k.idToName(b.originOf(a));a.forEach(function(a){k.idToName(b.originOf(a))})};e.prototype.revert=function(a,b){var d=q(this),e=k.nameToId(b),g=c.getProperties(this);("string"===typeof a?"*"===a?Object.keys(d.getAll(e)):[a]:
a).forEach(function(a){g.propertyInvalidated(a);d.revert(a,e);g.propertyCommitted(a)})};e.prototype.removeOrigin=function(a){var b=q(this);a=k.nameToId(a);var c=b.getAll(a),d;for(d in c)b.originOf(d)===a&&b.set(d,c[d],k.OriginId.USER)};e.prototype.updateOrigin=function(a,b){var c=q(this);b=k.nameToId(b);var d=this.get(a);c.clear(a);c.set(a,d,b)};return e}(e.declared(l));return a=h([e.subclass("esri.core.MultiOriginJSONSupport")],a)})},"esri/core/accessorSupport/MultiOriginStore":function(){define(["require",
"exports","./PropertyOrigin"],function(a,f,m){Object.defineProperty(f,"__esModule",{value:!0});a=function(){function a(){this._propertyOriginMap={};this._originStores=Array(m.OriginId.NUM);this._values={}}a.prototype.get=function(a,f){return(f=void 0===f?this._values:this._originStores[f])?f[a]:void 0};a.prototype.keys=function(){return Object.keys(this._values)};a.prototype.set=function(a,f,h){void 0===h&&(h=m.OriginId.USER);var d=this._originStores[h];d||(d={},this._originStores[h]=d);d[a]=f;return!(a in
this._values)||this._propertyOriginMap[a]<=h?(d=this._values[a],this._values[a]=f,this._propertyOriginMap[a]=h,d!==f):!1};a.prototype.clear=function(a,f){void 0===f&&(f=m.OriginId.USER);var e=this._originStores[f];if(e){var d=e[a];delete e[a];if(a in this._values&&this._propertyOriginMap[a]===f)for(delete this._values[a],--f;0<=f;f--)if((e=this._originStores[f])&&a in e){this._values[a]=e[a];this._propertyOriginMap[a]=f;break}return d}};a.prototype.has=function(a,f){return(f=void 0===f?this._values:
this._originStores[f])?a in f:!1};a.prototype.revert=function(a,f){for(;0<f&&!this.has(a,f);)--f;var e=this._originStores[f],e=e&&e[a],d=this._values[a];this._values[a]=e;this._propertyOriginMap[a]=f;return d!==e};a.prototype.originOf=function(a,f){return this._propertyOriginMap[a]||m.OriginId.DEFAULTS};a.prototype.getAll=function(a){return this._originStores[a]};return a}();f.default=a})},"esri/layers/support/arcgisLayerUrl":function(){define(["require","exports","../../core/urlUtils"],function(a,
f,m){function h(a){var h=m.urlToObject(a).path.match(f.match);if(!h)return null;a=h[1];var d=h[2],c=h[3],h=h[4],b=d.indexOf("/");return{title:e(-1!==b?d.slice(b+1):d),serverType:c,sublayer:null!=h&&""!==h?parseInt(h,10):null,url:{path:a}}}function e(a){a=a.replace(/\s*[/_]+\s*/g," ");return a[0].toUpperCase()+a.slice(1)}Object.defineProperty(f,"__esModule",{value:!0});f.serverTypes="MapServer ImageServer FeatureServer SceneServer StreamServer VectorTileServer".split(" ");f.match=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/("+
f.serverTypes.join("|")+"))(?:\\/(?:layers\\/)?(\\d+))?","i");f.test=function(a){return!!f.match.test(a)};f.parse=h;f.cleanTitle=e;f.titleFromUrlAndName=function(a,f){var d=[];a&&(a=h(a))&&a.title&&d.push(a.title);f&&(f=e(f),d.push(f));if(2===d.length){if(-1!==d[0].toLowerCase().indexOf(d[1].toLowerCase()))return d[0];if(-1!==d[1].toLowerCase().indexOf(d[0].toLowerCase()))return d[1]}return d.join(" - ")};f.isHostedAgolService=function(a){if(!a)return!1;a=a.toLowerCase();var e=-1!==a.indexOf(".arcgis.com/");
a=-1!==a.indexOf("//services")||-1!==a.indexOf("//tiles")||-1!==a.indexOf("//features");return e&&a};f.isHostedSecuredProxyService=function(a,e){return e&&a&&-1!==a.toLowerCase().indexOf(e.toLowerCase())}})},"esri/layers/mixins/ScaleRangeLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/accessorSupport/write".split(" "),function(a,f,m,h,e,l,n){a=function(a){function c(){var b=
null!==a&&a.apply(this,arguments)||this;b.minScale=0;b.maxScale=0;return b}m(c,a);return c}(e.declared(l));h([e.property({json:{write:{overridePolicy:function(a,c,b){if(n.willPropertyWrite(this,"maxScale",{},b))return{ignoreOrigin:!0}}}}})],a.prototype,"minScale",void 0);h([e.property({json:{write:{overridePolicy:function(a,c,b){if(n.willPropertyWrite(this,"minScale",{},b))return{ignoreOrigin:!0}}}}})],a.prototype,"maxScale",void 0);return a=h([e.subclass("esri.layers.mixins.ScaleRangeLayer")],a)})},
"esri/layers/mixins/ArcGISCachedService":function(){define("dojo/_base/lang dojo/io-query ./ArcGISService ./ScaleRangeLayer ../support/TileInfo ../support/TilemapCache".split(" "),function(a,f,m,h,e,l){return m.createSubclass([h],{declaredClass:"esri.layers.mixins.ArcGISCachedService",properties:{minScale:{json:{origins:{service:{read:!1}}}},maxScale:{json:{origins:{service:{read:!1}}}},resampling:!0,supportsBlankTile:{value:!1,readOnly:!0,dependsOn:["version"],get:function(){return 10.2<=this.version}},
tileInfo:{value:null,type:e,json:{read:function(a,d){var c=d.minScale?d.minScale:Infinity,b=d.maxScale?d.maxScale:-Infinity;return a?(a.lods=a.lods.filter(function(a){return a.scale<=c&&a.scale>=b}),e.fromJSON(a)):null}}},tilemapCache:{value:null,json:{read:{source:["capabilities"],reader:function(a,d){return d.capabilities&&-1<d.capabilities.indexOf("Tilemap")?new l({layer:this}):null}}}},refreshTimestamp:null,version:{}},refresh:function(){this.refreshTimestamp=Date.now();this.inherited(arguments)},
getTileUrl:function(e,d,c){var b=a.mixin({},this.parsedUrl.query,{token:this.token,blankTile:!this.tilemapCache&&this.resampling&&this.supportsBlankTile?!1:null,_ts:this.refreshTimestamp});e=this.parsedUrl.path+"/tile/"+e+"/"+d+"/"+c;b=f.objectToQuery(b);return e+(b?"?"+b:"")}})})},"esri/layers/support/TilemapCache":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/_base/lang dojo/io-query ../../request ../../core/Accessor ../../core/LRUMap ../../core/promiseUtils ../../core/watchUtils ../../core/Error ../../core/HandleRegistry ../../core/Logger ../../core/accessorSupport/decorators ./Tilemap".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t){var p=x.getLogger("esri.layers.support.TilemapCache");a=function(a){function g(){var b=null!==a&&a.apply(this,arguments)||this;b._handles=new u;b._pendingTilemapRequests={};b._availableLevels={};b.levels=5;b.cacheByteSize=2097152;b.request=n;return b}m(g,a);g.prototype.normalizeCtorArgs=function(a){var b=this;a=e.mixin({},a);this._constructOnly={};["cacheByteSize","layer","levels","request"].forEach(function(g){g in a&&("levels"===g&&2>=a[g]?p.error("Minimum levels for Tilemap is 3, but got ",
a[g]):b._constructOnly[g]=a[g],delete a[g])});return a};g.prototype.initialize=function(){var a=this,b;for(b in this._constructOnly)this._set(b,this._constructOnly[b]);this._constructOnly=null;this._tilemapCache=new c(this.cacheByteSize,{sizeOfFunction:function(a){return a.byteSize}});this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers"],function(){return a._initializeTilemapDefinition()}),k.init(this,"layer.tileInfo.lods",function(b){return a._initializeAvailableLevels(b)},!0)]);
this._initializeTilemapDefinition()};g.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)};Object.defineProperty(g.prototype,"size",{get:function(){return 1<<this.levels},enumerable:!0,configurable:!0});g.prototype.getTilemap=function(a,b,g){return this._tilemapFromCache(a,b,g,this._tmpTilemapDefinition)};g.prototype.fetchTilemap=function(a,g,c,d){var e=this;if(!this._availableLevels[a])return b.reject(new q("tilemap-cache:level-unavailable","Level "+a+" is unavailable in the service"));
var f=this._tmpTilemapDefinition;if(a=this._tilemapFromCache(a,g,c,f))return b.resolve(a);var k=t.tilemapDefinitionId(f);a=this._pendingTilemapRequests[k];a||(a=t.Tilemap.fromDefinition(f,d).then(function(a){e._tilemapCache.set(k,a);delete e._pendingTilemapRequests[k];return a}).otherwise(function(a){delete e._pendingTilemapRequests[k];return b.reject(a)}),this._pendingTilemapRequests[k]=a);return a};g.prototype.getAvailability=function(a,b,g){return this._availableLevels[a]?(a=this.getTilemap(a,
b,g))?a.getAvailability(b,g):"unknown":"unavailable"};g.prototype.getAvailabilityUpsample=function(a,b,g,c){c.level=a;c.row=b;c.col=g;a=this.layer.tileInfo;for(a.updateTileInfo(c);;)if(b=this.getAvailability(c.level,c.row,c.col),"unavailable"===b){if(!a.upsampleTile(c))return"unavailable"}else return b};g.prototype.fetchAvailability=function(a,g,c,d){return this._availableLevels[a]?this.fetchTilemap(a,g,c,d).always(function(d){return d instanceof t.Tilemap?(d=d.getAvailability(g,c),"unavailable"===
d?b.reject(new q("tile-map:tile-unavailable","Tile is not available",{level:a,row:g,col:c})):d):"unknown"}):b.reject(new q("tilemap-cache:level-unavailable","Level "+a+" is unavailable in the service"))};g.prototype.fetchAvailabilityUpsample=function(a,g,c,d,e){var f=this;d.level=a;d.row=g;d.col=c;var k=this.layer.tileInfo;k.updateTileInfo(d);return this.fetchAvailability(a,g,c,e).otherwise(function(a){return k.upsampleTile(d)?f.fetchAvailabilityUpsample(d.level,d.row,d.col,d):b.reject(a)})};g.prototype._initializeTilemapDefinition=
function(){if(this.layer.parsedUrl){var a=this.layer.parsedUrl,b=a.query;b&&b.token||!this.layer.token||(b=e.mixin(b,{token:this.layer.token}));this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:a.path,query:b?l.objectToQuery(b):null,tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}};g.prototype._tilemapFromCache=function(a,b,g,c){a=this._getTilemapDefinition(a,b,g,c);a=t.tilemapDefinitionId(a);return this._tilemapCache.get(a)};
g.prototype._getTilemapDefinition=function(a,b,g,c){c.level=a;c.row=b-b%this.size;c.col=g-g%this.size;return c};g.prototype._initializeAvailableLevels=function(a){var b=this;this._availableLevels={};a&&a.forEach(function(a){return b._availableLevels[a.level]=!0})};return g}(w.declared(d));h([w.property({readOnly:!0})],a.prototype,"levels",void 0);h([w.property({readOnly:!0,dependsOn:["levels"]})],a.prototype,"size",null);h([w.property({readOnly:!0})],a.prototype,"cacheByteSize",void 0);h([w.property({readOnly:!0})],
a.prototype,"layer",void 0);h([w.property({readOnly:!0})],a.prototype,"request",void 0);return a=h([w.subclass("esri.layers.support.TilemapCache")],a)})},"esri/core/LRUMap":function(){define(["require","exports"],function(a,f){return function(){function a(a,e){void 0===a&&(a=0);this.sizeOfFunction=function(){return 1};this._sizeOf=0;this._cache=new Map;this._queue=[];if(0>=a)throw Error("LRU cache size must be bigger than zero!");this._maxSize=a;e&&(e.disposeFunction&&(this.disposeFunction=e.disposeFunction),
e.sizeOfFunction&&(this.sizeOfFunction=e.sizeOfFunction))}Object.defineProperty(a.prototype,"length",{get:function(){return this._cache.size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){return this._sizeOf},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"keys",{get:function(){return this._queue.slice()},enumerable:!0,configurable:!0});a.prototype.clear=function(){var a=this;this._queue.length=0;this.disposeFunction&&this._cache.forEach(function(e,
f){a.disposeFunction(f,e)});this._cache.clear();this._sizeOf=0};a.prototype.delete=function(a){var e=this._cache.get(a);return this._cache.delete(a)?(this._sizeOf-=this.sizeOfFunction(e),this.disposeFunction&&this.disposeFunction(a,e),this._queue.splice(this._queue.indexOf(a),1),!0):!1};a.prototype.forEach=function(a,e){this._cache.forEach(a,e)};a.prototype.get=function(a){var e=this._cache.get(a);if(void 0!==e)return this._queue.splice(this._queue.indexOf(a),1),this._queue.unshift(a),e};a.prototype.has=
function(a){return this._cache.has(a)};a.prototype.set=function(a,e){var f=this.get(a);void 0!==f?this._sizeOf-=this.sizeOfFunction(f):this._queue.unshift(a);this._sizeOf+=this.sizeOfFunction(e);this._cache.set(a,e);this._collect();return this};a.prototype._collect=function(){for(;this._queue.length&&this._sizeOf>this._maxSize;){var a=this._queue.pop(),e=this._cache.get(a);this._cache.delete(a)&&(this._sizeOf-=this.sizeOfFunction(e),this.disposeFunction&&this.disposeFunction(a,e))}};return a}()})},
"esri/core/watchUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/Promise"],function(a,f,m,h){function e(a,b,c,d,e){e=a.watch(b,function(b,g,e,f){d&&!d(b)||c.call(a,b,g,e,f)},e);var g=a.get(b);d&&d(g)&&c.call(a,g,g,b,a);return e}function l(a,b,c,d,f){function g(){p&&(p.remove(),p=null)}var k=!1,p,l=new m(g),v=new h;v.cancel=l.cancel;v.isCanceled=l.isCanceled;v.isFulfilled=l.isFulfilled;v.isRejected=l.isRejected;v.isResolved=l.isResolved;v.then=l.then;v.remove=g;Object.freeze(v);
p=e(a,b,function(b,d,e,f){k=!0;g();c&&c.call(a,b,d,e,f);l.resolve({value:b,oldValue:d,propertyName:e,target:f})},d,f);k&&p.remove();return v}function n(a){return!!a}function d(a){return!a}function c(a){return!0===a}function b(a){return!1===a}function k(a){return void 0!==a}function q(a){return void 0===a}function u(a,b,c,d){(Array.isArray(b)?b:-1<b.indexOf(",")?b.split(","):[b]).forEach(function(b){b=b.trim();var g=a.get(b);c.call(a,g,g,b,a)});return a.watch(b,c,d)}Object.defineProperty(f,"__esModule",
{value:!0});f.init=u;f.watch=function(a,b,c,d){return a.watch(b,c,d)};f.once=function(a,b,c,d){return l(a,b,c,null,d)};f.when=function(a,b,c,d){return e(a,b,c,n,d)};f.whenOnce=function(a,b,c,d){return l(a,b,c,n,d)};f.whenNot=function(a,b,c,f){return e(a,b,c,d,f)};f.whenNotOnce=function(a,b,c,e){return l(a,b,c,d,e)};f.whenTrue=function(a,b,d,f){return e(a,b,d,c,f)};f.whenTrueOnce=function(a,b,d,e){return l(a,b,d,c,e)};f.whenFalse=function(a,c,d,f){return e(a,c,d,b,f)};f.whenFalseOnce=function(a,c,
d,e){return l(a,c,d,b,e)};f.whenDefined=function(a,b,c,d){return e(a,b,c,k,d)};f.whenDefinedOnce=function(a,b,c,d){return l(a,b,c,k,d)};f.whenUndefined=function(a,b,c,d){return e(a,b,c,q,d)};f.whenUndefinedOnce=function(a,b,c,d){return l(a,b,c,q,d)};f.pausable=function(a,b,c,d){var e=!1;return{remove:a.watch(b,function(b,d,f,k){e||c.call(a,b,d,f,k)},d).remove,pause:function(){e=!0},resume:function(){e=!1}}};f.on=function(a,b,c,d,e,g,f){function k(){h&&(g&&g(p,b,a,c),h.remove(),p=h=null)}var p=null,
h=null,r=u(a,b,function(g){k();g&&g.on&&(p=g,h=g.on(c,d),e&&e(p,b,a,c))},f);return{remove:function(){r.remove();k()}}}})},"esri/layers/support/Tilemap":function(){define("require exports dojo/_base/lang ../../request ../../core/lang ../../core/Error".split(" "),function(a,f,m,h,e,l){function n(a){var c=a.service.tileServers,c=(c&&c.length?c[a.row%c.length]:a.service.url)+"/tilemap/"+a.level+"/"+a.row+"/"+a.col+"/"+a.width+"/"+a.height;(a=a.service.query)&&(c=c+"?"+a);return c}Object.defineProperty(f,
"__esModule",{value:!0});a=function(){function a(){this.location={left:0,top:0,width:0,height:0};this.byteSize=40}a.prototype.getAvailability=function(a,b){if(this._isAllAvailable)return"available";if(this._isAllUnvailable)return"unavailable";a=(a-this.location.top)*this.location.width+(b-this.location.left);b=a>>3;var c=this._tileAvailabilityBitSet;return 0>b||b>c.length?"unknown":c[b]&1<<a%8?"available":"unavailable"};a.prototype._updateFromData=function(a){for(var b=!0,c=!0,d=new Uint8Array(Math.ceil(this.location.width*
this.location.height/8)),e=0,f=0;f<a.length;f++){var h=f%8;a[f]?(c=!1,d[e]|=1<<h):b=!1;7===h&&++e}this._isAllUnvailable=c;this._isAllAvailable=b;this._isAllAvailable||this._isAllUnvailable||(this._tileAvailabilityBitSet=d,this.byteSize+=d.length)};a.fromDefinition=function(c,b){var d=c.service.request||h,e=c.row,f=c.col,x=c.width,w=c.height,t={failOk:!0,callbackParamName:"callback"};b=b?m.mixin(t,b):t;return d(n(c),b).then(function(b){var c=b.data;if(c.location&&(c.location.top!==e||c.location.left!==
f||c.location.width!==x||c.location.height!==w))throw new l("tilemap:location-mismatch","Tilemap response for different location than requested",{response:c,definition:{top:e,left:f,width:x,height:w}});return a.fromJSON(b.data)})};a.fromJSON=function(c){a.validateJSON(c);var b=new a;b.location=Object.freeze(e.clone(c.location));b._updateFromData(c.data);return Object.freeze(b)};a.validateJSON=function(a){if(!a||!a.location)throw new l("tilemap:missing-location","Location missing from tilemap response");
if(!a.valid)throw new l("tilemap:invalid","Tilemap response was marked as invalid");if(!a.data)throw new l("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(a.data))throw new l("tilemap:data-mismatch","Data must be an array of numbers");if(a.data.length!==a.location.width*a.location.height)throw new l("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");};return a}();f.Tilemap=a;f.tilemapDefinitionId=function(a){return a.level+"/"+a.row+
"/"+a.col+"/"+a.width+"/"+a.height};f.tilemapDefinitionUrl=n;f.default=a})},"esri/layers/mixins/OperationalLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/MultiOriginJSONSupport ../../core/Error ../../core/urlUtils ../../core/accessorSupport/read".split(" "),function(a,f,m,h,e,l,n,d,c,b){a=function(a){function e(){var b=null!==a&&a.apply(this,arguments)||this;
b.title="Layer";return b}m(e,a);e.prototype.writeListMode=function(a,b){a&&(b.listMode=a)};e.prototype.writeTitle=function(a,b){b.title=a||"Layer"};e.prototype.writeUrl=function(a,b){a&&c.isProtocolRelative(a)&&(a="https:"+a);b.url=a?c.normalize(a):a};e.prototype.writeOperationalLayerType=function(a,b){a&&(b.layerType=a)};e.prototype.readOpacity=function(a,b,c){if(void 0!==b.opacity&&(!c||"web-map"===c.origin||"web-scene"===c.origin))return b.opacity;if((!c||"service"===c.origin)&&b.drawingInfo&&
void 0!==b.drawingInfo.transparency)return 1-b.drawingInfo.transparency/100;if(b.layerDefinition&&b.layerDefinition.drawingInfo&&void 0!==b.layerDefinition.drawingInfo.transparency)return 1-b.layerDefinition.drawingInfo.transparency/100};e.prototype.readVisible=function(a,b){return!!b.visibility};e.prototype.read=function(a,c){var d=this,e=arguments;c&&(c.layer=this);b.readLoadable(this,a,function(b){return d.inherited(e,[a,b])},c);return this};e.prototype.write=function(a,b){if(b&&b.origin){var c=
b.origin+"/"+(b.layerContainerType||"operational-layers"),e=q[c];if(e&&!e[this.operationalLayerType])return b.messages&&b.messages.push(new d("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' are not supported in the context of '"+c+"'",{layer:this})),null;if(!this.url&&!k[this.operationalLayerType])return b.messages&&b.messages.push(new d("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' require a url to a service to be written to a '"+
b.origin+"'",{layer:this})),null}return this.inherited(arguments,[a,b])};return e}(e.declared(l,n));h([e.property({json:{write:{ignoreOrigin:!0}}})],a.prototype,"id",void 0);h([e.property()],a.prototype,"listMode",void 0);h([e.writer("listMode")],a.prototype,"writeListMode",null);h([e.property({json:{write:{ignoreOrigin:!0,allowNull:!0}}})],a.prototype,"title",void 0);h([e.writer("title")],a.prototype,"writeTitle",null);h([e.property({json:{write:{ignoreOrigin:!0}}})],a.prototype,"url",void 0);h([e.writer("url")],
a.prototype,"writeUrl",null);h([e.property({json:{write:{target:"layerType",ignoreOrigin:!0}}})],a.prototype,"operationalLayerType",void 0);h([e.writer("operationalLayerType")],a.prototype,"writeOperationalLayerType",null);h([e.property({json:{write:{ignoreOrigin:!0}}})],a.prototype,"opacity",void 0);h([e.reader("opacity",["opacity","layerDefinition.drawingInfo.transparency","drawingInfo.transparency"])],a.prototype,"readOpacity",null);h([e.property({json:{write:{target:"visibility",ignoreOrigin:!0}}})],
a.prototype,"visible",void 0);h([e.reader("visible",["visibility"])],a.prototype,"readVisible",null);a=h([e.subclass("esri.layers.mixins.OperationalLayer")],a);var k={GroupLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,ArcGISFeatureLayer:!0,CSV:!0,VectorTileLayer:!0},q={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,GroupLayer:!0,
IntegratedMeshLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,VectorTileLayer:!0},"web-scene/basemap":{ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0},"web-map/operational-layers":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,
ArcGSFeatureLayer:!0,CSV:!0,GeoRSS:!0,KML:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,bingLayer:!0}};return a})},"esri/layers/mixins/PortalLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/Error ../../core/Logger ../../core/requireUtils ../../core/promiseUtils ../../core/urlUtils ../../portal/PortalItem ../../portal/Portal".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u){var x=d.getLogger("esri.layers.Layer");f=function(d){function e(){return null!==d&&d.apply(this,arguments)||this}m(e,d);Object.defineProperty(e.prototype,"portalItem",{set:function(a){a!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",a))},enumerable:!0,configurable:!0});e.prototype.writePortalItem=function(a,b){a&&a.id&&(b.itemId=a.id)};e.prototype.loadFromPortal=function(d){var e=this;return this.portalItem&&this.portalItem.id?
c.when(a,"../../portal/support/layersLoader").then(function(a){return a.load({instance:e,supportedTypes:d.supportedTypes,validateItem:d.validateItem,supportsData:d.supportsData}).otherwise(function(a){x.warn("Failed to load layer ("+e.title+", "+e.id+") portal item ("+e.portalItem.id+")\n  "+a);throw a;})}):b.resolve()};e.prototype.read=function(a,b){b&&(b.layer=this);return this.inherited(arguments)};e.prototype.write=function(a,b){var g=b&&b.portal,c=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||
u.getDefault());return g&&c&&!k.hasSamePortal(c.restUrl,g.restUrl)?(b.messages&&b.messages.push(new n("layer:cross-portal","The layer '"+this.title+" ("+this.id+")' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer",{layer:this})),null):this.inherited(arguments)};return e}(e.declared(l));h([e.property({type:q})],f.prototype,
"portalItem",null);h([e.writer("portalItem")],f.prototype,"writePortalItem",null);return f=h([e.subclass("esri.layers.mixins.PortalLayer")],f)})},"esri/layers/support/rasterFormats/LercCodec":function(){define([],function(){var a={defaultNoDataValue:-3.4027999387901484E38,decode:function(m,h){var e;h=h||{};var l=h.inputOffset||0,n=h.encodedMaskData||null===h.encodedMaskData,d={},c=new Uint8Array(m,l,10);d.fileIdentifierString=String.fromCharCode.apply(null,c);if("CntZImage"!=d.fileIdentifierString.trim())throw"Unexpected file identifier string: "+
d.fileIdentifierString;l+=10;c=new DataView(m,l,24);d.fileVersion=c.getInt32(0,!0);d.imageType=c.getInt32(4,!0);d.height=c.getUint32(8,!0);d.width=c.getUint32(12,!0);d.maxZError=c.getFloat64(16,!0);l+=24;if(!n)if(c=new DataView(m,l,16),d.mask={},d.mask.numBlocksY=c.getUint32(0,!0),d.mask.numBlocksX=c.getUint32(4,!0),d.mask.numBytes=c.getUint32(8,!0),d.mask.maxValue=c.getFloat32(12,!0),l+=16,0<d.mask.numBytes){var n=new Uint8Array(Math.ceil(d.width*d.height/8)),c=new DataView(m,l,d.mask.numBytes),
b=c.getInt16(0,!0),k=2,q=0;do{if(0<b)for(;b--;)n[q++]=c.getUint8(k++);else for(var u=c.getUint8(k++),b=-b;b--;)n[q++]=u;b=c.getInt16(k,!0);k+=2}while(k<d.mask.numBytes);if(-32768!==b||q<n.length)throw"Unexpected end of mask RLE encoding";d.mask.bitset=n;l+=d.mask.numBytes}else 0===(d.mask.numBytes|d.mask.numBlocksY|d.mask.maxValue)&&(n=new Uint8Array(Math.ceil(d.width*d.height/8)),d.mask.bitset=n);c=new DataView(m,l,16);d.pixels={};d.pixels.numBlocksY=c.getUint32(0,!0);d.pixels.numBlocksX=c.getUint32(4,
!0);d.pixels.numBytes=c.getUint32(8,!0);d.pixels.maxValue=c.getFloat32(12,!0);l+=16;n=d.pixels.numBlocksX;c=d.pixels.numBlocksY;n+=0<d.width%n?1:0;b=c+(0<d.height%c?1:0);d.pixels.blocks=Array(n*b);k=1E9;for(u=q=0;u<b;u++)for(var x=0;x<n;x++){var w=0,c=new DataView(m,l,Math.min(10,m.byteLength-l)),t={};d.pixels.blocks[q++]=t;var p=c.getUint8(0);w++;t.encoding=p&63;if(3<t.encoding)throw"Invalid block encoding ("+t.encoding+")";if(2===t.encoding)l++,k=Math.min(k,0);else{if(0!==p&&2!==p){p>>=6;t.offsetType=
p;if(2===p)t.offset=c.getInt8(1),w++;else if(1===p)t.offset=c.getInt16(1,!0),w+=2;else if(0===p)t.offset=c.getFloat32(1,!0),w+=4;else throw"Invalid block offset type";k=Math.min(t.offset,k);if(1===t.encoding)if(p=c.getUint8(w),w++,t.bitsPerPixel=p&63,p>>=6,t.numValidPixelsType=p,2===p)t.numValidPixels=c.getUint8(w),w++;else if(1===p)t.numValidPixels=c.getUint16(w,!0),w+=2;else if(0===p)t.numValidPixels=c.getUint32(w,!0),w+=4;else throw"Invalid valid pixel count type";}l+=w;if(3!=t.encoding)if(0===
t.encoding){c=(d.pixels.numBytes-1)/4;if(c!==Math.floor(c))throw"uncompressed block has invalid length";w=new ArrayBuffer(4*c);p=new Uint8Array(w);p.set(new Uint8Array(m,l,4*c));w=new Float32Array(w);for(p=0;p<w.length;p++)k=Math.min(k,w[p]);t.rawData=w;l+=4*c}else 1===t.encoding&&(c=Math.ceil(t.numValidPixels*t.bitsPerPixel/8),w=new ArrayBuffer(4*Math.ceil(c/4)),p=new Uint8Array(w),p.set(new Uint8Array(m,l,c)),t.stuffedData=new Uint32Array(w),l+=c)}}d.pixels.minValue=k;d.eofOffset=l;m=null!=h.noDataValue?
h.noDataValue:a.defaultNoDataValue;var n=h.encodedMaskData,t=h.returnMask,c=0,b=d.pixels.numBlocksX,k=d.pixels.numBlocksY,q=Math.floor(d.width/b),u=Math.floor(d.height/k),x=2*d.maxZError,n=n||(d.mask?d.mask.bitset:null),v,l=new (h.pixelType||Float32Array)(d.width*d.height);t&&n&&(v=new Uint8Array(d.width*d.height));for(var t=new Float32Array(q*u),g,r,w=0;w<=k;w++)if(p=w!==k?u:d.height%k,0!==p)for(var z=0;z<=b;z++){var y=z!==b?q:d.width%b;if(0!==y){var A=w*d.width*u+z*q,F=d.width-y,B=d.pixels.blocks[c],
E,C;if(2>B.encoding){if(0===B.encoding)E=B.rawData;else{E=B.stuffedData;C=B.bitsPerPixel;g=B.numValidPixels;r=B.offset;var G=x,L=t,U=d.pixels.maxValue,P=(1<<C)-1,H=0,K=void 0,J=0,R=void 0,M=void 0,ea=Math.ceil((U-r)/G);E[E.length-1]<<=8*(4*E.length-Math.ceil(C*g/8));for(K=0;K<g;K++)0===J&&(M=E[H++],J=32),J>=C?(R=M>>>J-C&P,J-=C):(J=C-J,R=(M&P)<<J&P,M=E[H++],J=32-J,R+=M>>>J),L[K]=R<ea?r+R*G:U;E=t}C=0}else e=2===B.encoding?0:B.offset;var I;if(n)for(r=0;r<p;r++){A&7&&(I=n[A>>3],I<<=A&7);for(g=0;g<y;g++)A&
7||(I=n[A>>3]),I&128?(v&&(v[A]=1),l[A++]=2>B.encoding?E[C++]:e):(v&&(v[A]=0),l[A++]=m),I<<=1;A+=F}else if(2>B.encoding)for(r=0;r<p;r++){for(g=0;g<y;g++)l[A++]=E[C++];A+=F}else for(r=0;r<p;r++){for(g=0;g<y;g++)l[A++]=e;A+=F}if(1===B.encoding&&C!==B.numValidPixels)throw"Block and Mask do not match";c++}}e=v;v={width:d.width,height:d.height,pixelData:l,minValue:d.pixels.minValue,maxValue:d.pixels.maxValue,noDataValue:m};e&&(v.maskData=e);h.returnEncodedMask&&d.mask&&(v.encodedMaskData=d.mask.bitset?
d.mask.bitset:null);if(h.returnFileInfo&&(v.fileInfo=f(d),h.computeUsedBitDepths)){h=v.fileInfo;e=d.pixels.numBlocksX*d.pixels.numBlocksY;I={};for(E=0;E<e;E++)C=d.pixels.blocks[E],0===C.encoding?I.float32=!0:1===C.encoding?I[C.bitsPerPixel]=!0:I[0]=!0;d=Object.keys(I);h.bitDepths=d}return v}},f=function(a){return{fileIdentifierString:a.fileIdentifierString,fileVersion:a.fileVersion,imageType:a.imageType,height:a.height,width:a.width,maxZError:a.maxZError,eofOffset:a.eofOffset,mask:a.mask?{numBlocksX:a.mask.numBlocksX,
numBlocksY:a.mask.numBlocksY,numBytes:a.mask.numBytes,maxValue:a.mask.maxValue}:null,pixels:{numBlocksX:a.pixels.numBlocksX,numBlocksY:a.pixels.numBlocksY,numBytes:a.pixels.numBytes,maxValue:a.pixels.maxValue,minValue:a.pixels.minValue,noDataValue:this.noDataValue}}};return a})},"esri/Viewpoint":function(){define(["./core/JSONSupport","./Camera","./core/lang","./geometry/support/jsonUtils"],function(a,f,m,h){var e=a.createSubclass({declaredClass:"esri.Viewpoint",properties:{rotation:{value:0,cast:function(a){a%=
360;0>a&&(a+=360);return a}},scale:0,targetGeometry:{value:null,json:{read:function(a){return h.fromJSON(a)}}},camera:{value:null,type:f}},toJSON:function(){var a={scale:this.scale,rotation:this.rotation,targetGeometry:this.targetGeometry?this.targetGeometry.toJSON():void 0,camera:this.camera?this.camera.toJSON():void 0};a.camera&&delete a.camera.fov;return m.fixJson(a)},clone:function(){return new e({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry?this.targetGeometry.clone():
null,camera:this.camera?this.camera.clone():null})}});return e})},"esri/Camera":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/lang ./geometry/Point ./views/3d/support/mathUtils ./core/accessorSupport/decorators".split(" "),function(a,f,m,h,e,l,n,d,c){a=b=function(a){function c(b){b=a.call(this)||this;b.position=null;b.heading=0;b.tilt=0;b.fov=55;return b}m(c,a);c.prototype.getDefaults=function(a){if(!a.position)return{position:new n([0,
0,0])}};c.prototype.normalizeCtorArgs=function(a,b,c,d){a&&"object"===typeof a&&("x"in a||Array.isArray(a))&&(a={position:a},null!=b&&(a.heading=b),null!=c&&(a.tilt=c),null!=d&&(a.fov=d));return a};c.prototype.equals=function(a){return a?this.tilt===a.tilt&&this.heading===a.heading&&this.fov===a.fov&&this.position.equals(a.position):!1};c.prototype.clone=function(){return new b({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})};c.prototype.toJSON=function(){var a=
{position:this.position.toJSON(),heading:this.heading,tilt:this.tilt};return l.fixJson(a)};return c}(c.declared(e));h([c.property({type:n})],a.prototype,"position",void 0);h([c.property(),c.cast(d.cyclicalDeg.normalize)],a.prototype,"heading",void 0);h([c.property(),c.cast(function(a){return d.clamp(a,-180,180)})],a.prototype,"tilt",void 0);h([c.property({json:{read:!1,write:!1}})],a.prototype,"fov",void 0);a=b=h([c.subclass("esri.Camera")],a);var b;return a})},"esri/views/3d/support/mathUtils":function(){define(["require",
"exports","../lib/glMatrix"],function(a,f,m){function h(a){return Math.acos(1<a?1:-1>a?-1:a)}function e(a,b,c){return a<b?b:a>c?c:a}function l(a){for(var b in a){var c=a[b];c instanceof Function&&(a[b]=c.bind(a))}return a}Object.defineProperty(f,"__esModule",{value:!0});f.deg2rad=function(a){return a*Math.PI/180};f.rad2deg=function(a){return 180*a/Math.PI};f.asin=function(a){return Math.asin(1<a?1:-1>a?-1:a)};f.acos=h;f.log2=Math.log2||function(a){return Math.log(a)/Math.LN2};f.fovx2fovy=function(a,
b,c){return 2*Math.atan(c*Math.tan(.5*a)/b)};f.fovy2fovx=function(a,b,c){return 2*Math.atan(b*Math.tan(.5*a)/c)};f.lerp=function(a,b,c){return a+(b-a)*c};f.bilerp=function(a,b,c,d,e,f){a+=(b-a)*e;return a+(c+(d-c)*e-a)*f};f.slerp=function(a,b,c,e){void 0===e&&(e=a);var f=m.vec3d.length(a),k=m.vec3d.length(b),p=m.vec3d.dot(a,b)/f/k;.999999999999>p&&(m.vec3d.cross(a,b,n),m.mat4d.identity(d),m.mat4d.rotate(d,c*Math.acos(p),n),m.mat4d.multiplyVec3(d,a,e));m.vec3d.scale(e,((1-c)*f+c*k)/f);return e};f.slerpOrLerp=
function(a,b,c,e,f){var k=m.vec3d.length(a),p=m.vec3d.length(b);m.vec3d.cross(a,b,n);m.vec3d.length(n)/k/p>f?(b=Math.acos(m.vec3d.dot(a,b)/k/p),m.mat4d.identity(d),m.mat4d.rotate(d,c*b,n),m.mat4d.multiplyVec3(d,a,e),m.vec3d.scale(e,((1-c)*k+c*p)/k)):m.vec3d.lerp(a,b,c,e);return e};f.angle=function(a,d,e){a=m.vec3d.normalize(a,c);d=m.vec3d.normalize(d,b);var f=h(m.vec3d.dot(a,d));return e&&(a=m.vec3d.cross(a,d,n),0>m.vec3d.dot(a,e))?-f:f};f.clamp=e;f.isFinite=Number.isFinite||function(a){return"number"===
typeof a&&window.isFinite(a)};f.isNaN=Number.isNaN||function(a){return a!==a};f.makePiecewiseLinearFunction=function(a){var b=a.length;return function(c){var d=0;if(c<=a[0][0])return a[0][1];if(c>=a[b-1][0])return a[b-1][1];for(;c>a[d][0];)d++;var e=a[d][0];c=(e-c)/(e-a[d-1][0]);return c*a[d-1][1]+(1-c)*a[d][1]}};f.vectorEquals=function(a,b){if(null==a||null==b)return a!==b;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0};f.floatEqualRelative=function(a,
b,c){void 0===c&&(c=1E-6);if(f.isNaN(a)||f.isNaN(b))return!1;if(a===b)return!0;var d=Math.abs(a-b),e=Math.abs(a),k=Math.abs(b);if(0===a||0===b||1E-12>e&&1E-12>k){if(d>.01*c)return!1}else if(d/(e+k)>c)return!1;return!0};f.floatEqualAbsolute=function(a,b,c){void 0===c&&(c=1E-6);return f.isNaN(a)||f.isNaN(b)?!1:(a>b?a-b:b-a)<=c};a=function(){function a(a,b){this.min=a;this.max=b;this.range=b-a}a.prototype.ndiff=function(a,b){void 0===b&&(b=0);return Math.ceil((a-b)/this.range)*this.range+b};a.prototype._normalize=
function(a,b,c,d){void 0===d&&(d=0);c-=d;c<a?c+=this.ndiff(a-c):c>b&&(c-=this.ndiff(c-b));return c+d};a.prototype.normalize=function(a,b){return this._normalize(this.min,this.max,a,b)};a.prototype.clamp=function(a,b){void 0===b&&(b=0);return e(a-b,this.min,this.max)+b};a.prototype.monotonic=function(a,b,c){return a<b?b:b+this.ndiff(a-b,c)};a.prototype.minimalMonotonic=function(a,b,c){return this._normalize(a,a+this.range,b,c)};a.prototype.center=function(a,b,c){b=this.monotonic(a,b,c);return this.normalize((a+
b)/2,c)};a.prototype.diff=function(a,b,c){return this.monotonic(a,b,c)-a};a.prototype.contains=function(a,b,c){b=this.minimalMonotonic(a,b);c=this.minimalMonotonic(a,c);return c>a&&c<b};return a}();f.Cyclical=a;f.cyclical2PI=l(new a(0,2*Math.PI));f.cyclicalPI=l(new a(-Math.PI,Math.PI));f.cyclicalDeg=l(new a(0,360));var n=m.vec3d.create(),d=m.mat4d.create(),c=m.vec3d.create(),b=m.vec3d.create()})},"esri/views/3d/lib/glMatrix":function(){define([],function(){var a={};(function(a,m){m(a,!0);m(a,!1)})(a,
function(a,m){var f={};(function(){if("undefined"!=typeof Float32Array){var a=new Float32Array(1),b=new Int32Array(a.buffer);f.invsqrt=function(g){a[0]=g;b[0]=1597463007-(b[0]>>1);var c=a[0];return c*(1.5-.5*g*c*c)}}else f.invsqrt=function(a){return 1/Math.sqrt(a)}})();var e=Array;"undefined"!=typeof Float32Array&&(e=m?Float32Array:Array);var l={create:function(a){var b=new e(3);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2]):b[0]=b[1]=b[2]=0;return b},createFrom:function(a,b,c){var g=new e(3);g[0]=a;g[1]=b;g[2]=
c;return g},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},set3:function(a,b,c,d){d[0]=a;d[1]=b;d[2]=c;return d},add:function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c},subtract:function(a,b,c){if(!c||a===c)return a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a;c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c},multiply:function(a,b,c){if(!c||a===c)return a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a;c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=
a[2]*b[2];return c},max:function(a,b,c){c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);c[2]=Math.max(a[2],b[2]);return c},min:function(a,b,c){c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);return c},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b},scale:function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c},normalize:function(a,b){b||(b=a);var g=a[0],c=a[1];a=a[2];var d=Math.sqrt(g*g+c*c+a*
a);if(!d)return b[0]=0,b[1]=0,b[2]=0,b;if(1===d)return b[0]=g,b[1]=c,b[2]=a,b;d=1/d;b[0]=g*d;b[1]=c*d;b[2]=a*d;return b},cross:function(a,b,c){c||(c=a);var g=a[0],d=a[1];a=a[2];var e=b[0],f=b[1];b=b[2];c[0]=d*b-a*f;c[1]=a*e-g*b;c[2]=g*f-d*e;return c},length:function(a){var b=a[0],g=a[1];a=a[2];return Math.sqrt(b*b+g*g+a*a)},length2:function(a){var b=a[0],g=a[1];a=a[2];return b*b+g*g+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},direction:function(a,b,c){c||(c=a);var g=a[0]-b[0],d=a[1]-
b[1];a=a[2]-b[2];b=Math.sqrt(g*g+d*d+a*a);if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/b;c[0]=g*b;c[1]=d*b;c[2]=a*b;return c},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);return d},dist:function(a,b){var g=b[0]-a[0],c=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(g*g+c*c+a*a)},dist2:function(a,b){var g=b[0]-a[0],c=b[1]-a[1];a=b[2]-a[2];return g*g+c*c+a*a}},n=null,d=new e(4);l.unproject=function(a,b,c,e,f){f||(f=a);n||(n=w.create());var g=n;d[0]=2*(a[0]-
e[0])/e[2]-1;d[1]=2*(a[1]-e[1])/e[3]-1;d[2]=2*a[2]-1;d[3]=1;w.multiply(c,b,g);if(!w.inverse(g))return null;w.multiplyVec4(g,d);if(0===d[3])return null;f[0]=d[0]/d[3];f[1]=d[1]/d[3];f[2]=d[2]/d[3];return f};var c=l.createFrom(1,0,0),b=l.createFrom(0,1,0),k=l.createFrom(0,0,1);l.rotationTo=function(a,d,e){e||(e=t.create());var g=l.dot(a,d),f=l.create();if(1<=g)t.set(p,e);else if(-.999999>g)l.cross(c,a,f),1E-6>f.length&&l.cross(b,a,f),1E-6>f.length&&l.cross(k,a,f),l.normalize(f),t.fromAxisAngle(f,Math.PI,
e);else{var g=Math.sqrt(2*(1+g)),h=1/g;l.cross(a,d,f);e[0]=f[0]*h;e[1]=f[1]*h;e[2]=f[2]*h;e[3]=.5*g;t.normalize(e)}1<e[3]?e[3]=1:-1>e[3]&&(e[3]=-1);return e};var q=l.create(),u=l.create();l.project=function(a,b,c,d){d||(d=a);l.direction(b,c,q);l.subtract(a,b,u);a=l.dot(q,u);l.scale(q,a,d);l.add(d,b,d)};l.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var x={create:function(a){var b=new e(9);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8]):b[0]=
b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=0;return b},createFrom:function(a,b,c,d,f,k,p,h,l){var g=new e(9);g[0]=a;g[1]=b;g[2]=c;g[3]=d;g[4]=f;g[5]=k;g[6]=p;g[7]=h;g[8]=l;return g},determinant:function(a){var b=a[3],g=a[4],c=a[5],d=a[6],e=a[7],f=a[8];return a[0]*(f*g-c*e)+a[1]*(-f*b+c*d)+a[2]*(e*b-g*d)},inverse:function(a,b){var g=a[0],c=a[1],d=a[2],e=a[3],f=a[4],k=a[5],p=a[6],h=a[7];a=a[8];var r=a*f-k*h,l=-a*e+k*p,m=h*e-f*p,n=g*r+c*l+d*m;if(!n)return null;n=1/n;b||(b=x.create());b[0]=r*n;b[1]=(-a*
c+d*h)*n;b[2]=(k*c-d*f)*n;b[3]=l*n;b[4]=(a*g-d*p)*n;b[5]=(-k*g+d*e)*n;b[6]=m*n;b[7]=(-h*g+c*p)*n;b[8]=(f*g-c*e)*n;return b},multiply:function(a,b,c){c||(c=a);var g=a[0],d=a[1],e=a[2],f=a[3],k=a[4],p=a[5],h=a[6],r=a[7];a=a[8];var l=b[0],m=b[1],n=b[2],v=b[3],z=b[4],q=b[5],t=b[6],x=b[7];b=b[8];c[0]=l*g+m*f+n*h;c[1]=l*d+m*k+n*r;c[2]=l*e+m*p+n*a;c[3]=v*g+z*f+q*h;c[4]=v*d+z*k+q*r;c[5]=v*e+z*p+q*a;c[6]=t*g+x*f+b*h;c[7]=t*d+x*k+b*r;c[8]=t*e+x*p+b*a;return c},add:function(a,b,c){c||(c=a);c[0]=a[0]+b[0];c[1]=
a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];c[4]=a[4]+b[4];c[5]=a[5]+b[5];c[6]=a[6]+b[6];c[7]=a[7]+b[7];c[8]=a[8]+b[8];return c},subtract:function(a,b,c){c||(c=a);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];c[4]=a[4]-b[4];c[5]=a[5]-b[5];c[6]=a[6]-b[6];c[7]=a[7]-b[7];c[8]=a[8]-b[8];return c},multiplyVec2:function(a,b,c){c||(c=b);var g=b[0];b=b[1];c[0]=g*a[0]+b*a[3]+a[6];c[1]=g*a[1]+b*a[4]+a[7];return c},multiplyVec3:function(a,b,c){c||(c=b);var g=b[0],d=b[1];b=b[2];c[0]=g*a[0]+d*a[3]+b*
a[6];c[1]=g*a[1]+d*a[4]+b*a[7];c[2]=g*a[2]+d*a[5]+b*a[8];return c},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},identity:function(a){a||(a=x.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(!b||a===b){b=a[1];var g=a[2],c=a[5];a[1]=a[3];a[2]=a[6];a[3]=b;a[5]=a[7];a[6]=g;a[7]=c;return a}b[0]=a[0];b[1]=a[3];b[2]=a[6];b[3]=a[1];b[4]=a[4];b[5]=a[7];b[6]=a[2];b[7]=a[5];b[8]=
a[8];return b},toMat4:function(a,b){b||(b=w.create());b[15]=1;b[14]=0;b[13]=0;b[12]=0;b[11]=0;b[10]=a[8];b[9]=a[7];b[8]=a[6];b[7]=0;b[6]=a[5];b[5]=a[4];b[4]=a[3];b[3]=0;b[2]=a[2];b[1]=a[1];b[0]=a[0];return b},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},w={create:function(a){var b=new e(16);4===arguments.length?(b[0]=arguments[0],b[1]=arguments[1],b[2]=arguments[2],b[3]=arguments[3],b[4]=arguments[4],b[5]=arguments[5],b[6]=arguments[6],
b[7]=arguments[7],b[8]=arguments[8],b[9]=arguments[9],b[10]=arguments[10],b[11]=arguments[11],b[12]=arguments[12],b[13]=arguments[13],b[14]=arguments[14],b[15]=arguments[15]):a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b},createFrom:function(a,b,c,d,f,k,p,h,l,m,n,v,q,t,x,w){var g=new e(16);g[0]=a;g[1]=b;g[2]=c;g[3]=d;g[4]=f;g[5]=k;g[6]=p;g[7]=h;g[8]=l;g[9]=m;
g[10]=n;g[11]=v;g[12]=q;g[13]=t;g[14]=x;g[15]=w;return g},createFromMatrixRowMajor:function(a){var b=new e(16);b[0]=a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},createFromMatrix:function(a){var b=new e(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=
a[15];return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},setRowMajor:function(a,b){b[0]=a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},identity:function(a){a||(a=w.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=
1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,b){if(!b||a===b){b=a[1];var c=a[2],g=a[3],d=a[6],e=a[7],f=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=b;a[6]=a[9];a[7]=a[13];a[8]=c;a[9]=d;a[11]=a[14];a[12]=g;a[13]=e;a[14]=f;return a}b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b},determinant:function(a){var b=
a[0],c=a[1],g=a[2],d=a[3],e=a[4],f=a[5],k=a[6],p=a[7],h=a[8],l=a[9],m=a[10],n=a[11],v=a[12],q=a[13],t=a[14];a=a[15];return v*l*k*d-h*q*k*d-v*f*m*d+e*q*m*d+h*f*t*d-e*l*t*d-v*l*g*p+h*q*g*p+v*c*m*p-b*q*m*p-h*c*t*p+b*l*t*p+v*f*g*n-e*q*g*n-v*c*k*n+b*q*k*n+e*c*t*n-b*f*t*n-h*f*g*a+e*l*g*a+h*c*k*a-b*l*k*a-e*c*m*a+b*f*m*a},inverse:function(a,b){b||(b=a);var c=a[0],g=a[1],d=a[2],e=a[3],f=a[4],k=a[5],p=a[6],h=a[7],l=a[8],r=a[9],m=a[10],n=a[11],v=a[12],q=a[13],t=a[14];a=a[15];var x=c*k-g*f,w=c*p-d*f,u=c*h-e*
f,N=g*p-d*k,Y=g*h-e*k,aa=d*h-e*p,S=l*q-r*v,Z=l*t-m*v,da=l*a-n*v,V=r*t-m*q,la=r*a-n*q,ia=m*a-n*t,ha=x*ia-w*la+u*V+N*da-Y*Z+aa*S;if(!ha)return null;ha=1/ha;b[0]=(k*ia-p*la+h*V)*ha;b[1]=(-g*ia+d*la-e*V)*ha;b[2]=(q*aa-t*Y+a*N)*ha;b[3]=(-r*aa+m*Y-n*N)*ha;b[4]=(-f*ia+p*da-h*Z)*ha;b[5]=(c*ia-d*da+e*Z)*ha;b[6]=(-v*aa+t*u-a*w)*ha;b[7]=(l*aa-m*u+n*w)*ha;b[8]=(f*la-k*da+h*S)*ha;b[9]=(-c*la+g*da-e*S)*ha;b[10]=(v*Y-q*u+a*x)*ha;b[11]=(-l*Y+r*u-n*x)*ha;b[12]=(-f*V+k*Z-p*S)*ha;b[13]=(c*V-g*Z+d*S)*ha;b[14]=(-v*N+
q*w-t*x)*ha;b[15]=(l*N-r*w+m*x)*ha;return b},toRotationMat:function(a,b){b||(b=w.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},toMat3:function(a,b){b||(b=x.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b},toInverseMat3:function(a,b){var c=a[0],g=a[1],d=a[2],e=a[4],f=a[5],k=a[6],p=a[8],h=a[9];a=a[10];var l=a*
f-k*h,r=-a*e+k*p,m=h*e-f*p,n=c*l+g*r+d*m;if(!n)return null;n=1/n;b||(b=x.create());b[0]=l*n;b[1]=(-a*g+d*h)*n;b[2]=(k*g-d*f)*n;b[3]=r*n;b[4]=(a*c-d*p)*n;b[5]=(-k*c+d*e)*n;b[6]=m*n;b[7]=(-h*c+g*p)*n;b[8]=(f*c-g*e)*n;return b},multiply:function(a,b,c){c||(c=a);var g=a[0],d=a[1],e=a[2],f=a[3],k=a[4],p=a[5],h=a[6],l=a[7],r=a[8],m=a[9],n=a[10],v=a[11],z=a[12],q=a[13],t=a[14];a=a[15];var x=b[0],w=b[1],u=b[2],Y=b[3],aa=b[4],S=b[5],Z=b[6],da=b[7],V=b[8],la=b[9],ia=b[10],ha=b[11],pa=b[12],va=b[13],Da=b[14];
b=b[15];c[0]=x*g+w*k+u*r+Y*z;c[1]=x*d+w*p+u*m+Y*q;c[2]=x*e+w*h+u*n+Y*t;c[3]=x*f+w*l+u*v+Y*a;c[4]=aa*g+S*k+Z*r+da*z;c[5]=aa*d+S*p+Z*m+da*q;c[6]=aa*e+S*h+Z*n+da*t;c[7]=aa*f+S*l+Z*v+da*a;c[8]=V*g+la*k+ia*r+ha*z;c[9]=V*d+la*p+ia*m+ha*q;c[10]=V*e+la*h+ia*n+ha*t;c[11]=V*f+la*l+ia*v+ha*a;c[12]=pa*g+va*k+Da*r+b*z;c[13]=pa*d+va*p+Da*m+b*q;c[14]=pa*e+va*h+Da*n+b*t;c[15]=pa*f+va*l+Da*v+b*a;return c},multiplyVec3:function(a,b,c){c||(c=b);var g=b[0],d=b[1];b=b[2];c[0]=a[0]*g+a[4]*d+a[8]*b+a[12];c[1]=a[1]*g+a[5]*
d+a[9]*b+a[13];c[2]=a[2]*g+a[6]*d+a[10]*b+a[14];return c},multiplyVec4:function(a,b,c){c||(c=b);var g=b[0],d=b[1],e=b[2];b=b[3];c[0]=a[0]*g+a[4]*d+a[8]*e+a[12]*b;c[1]=a[1]*g+a[5]*d+a[9]*e+a[13]*b;c[2]=a[2]*g+a[6]*d+a[10]*e+a[14]*b;c[3]=a[3]*g+a[7]*d+a[11]*e+a[15]*b;return c},translate:function(a,b,c){var g=b[0],d=b[1];b=b[2];var e,f,k,p,h,l,r,m,n,v,q,z;if(!c||a===c)return a[12]=a[0]*g+a[4]*d+a[8]*b+a[12],a[13]=a[1]*g+a[5]*d+a[9]*b+a[13],a[14]=a[2]*g+a[6]*d+a[10]*b+a[14],a[15]=a[3]*g+a[7]*d+a[11]*
b+a[15],a;e=a[0];f=a[1];k=a[2];p=a[3];h=a[4];l=a[5];r=a[6];m=a[7];n=a[8];v=a[9];q=a[10];z=a[11];c[0]=e;c[1]=f;c[2]=k;c[3]=p;c[4]=h;c[5]=l;c[6]=r;c[7]=m;c[8]=n;c[9]=v;c[10]=q;c[11]=z;c[12]=e*g+h*d+n*b+a[12];c[13]=f*g+l*d+v*b+a[13];c[14]=k*g+r*d+q*b+a[14];c[15]=p*g+m*d+z*b+a[15];return c},scale:function(a,b,c){var g=b[0],d=b[1];b=b[2];if(!c||a===c)return a[0]*=g,a[1]*=g,a[2]*=g,a[3]*=g,a[4]*=d,a[5]*=d,a[6]*=d,a[7]*=d,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a;c[0]=a[0]*g;c[1]=a[1]*g;c[2]=a[2]*g;c[3]=a[3]*
g;c[4]=a[4]*d;c[5]=a[5]*d;c[6]=a[6]*d;c[7]=a[7]*d;c[8]=a[8]*b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},maxScale:function(a){return Math.max(Math.max(Math.sqrt(a[0]*a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))},rotate:function(a,b,c,d){var g=c[0],e=c[1];c=c[2];var f=Math.sqrt(g*g+e*e+c*c),k,p,h,l,r,m,n,v,q,z,t,x,y,w,u,aa,S,Z,da,V;if(!f)return null;1!==f&&(f=1/f,g*=f,e*=f,c*=f);
k=Math.sin(b);p=Math.cos(b);h=1-p;b=a[0];f=a[1];l=a[2];r=a[3];m=a[4];n=a[5];v=a[6];q=a[7];z=a[8];t=a[9];x=a[10];y=a[11];w=g*g*h+p;u=e*g*h+c*k;aa=c*g*h-e*k;S=g*e*h-c*k;Z=e*e*h+p;da=c*e*h+g*k;V=g*c*h+e*k;g=e*c*h-g*k;e=c*c*h+p;d?a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[0]=b*w+m*u+z*aa;d[1]=f*w+n*u+t*aa;d[2]=l*w+v*u+x*aa;d[3]=r*w+q*u+y*aa;d[4]=b*S+m*Z+z*da;d[5]=f*S+n*Z+t*da;d[6]=l*S+v*Z+x*da;d[7]=r*S+q*Z+y*da;d[8]=b*V+m*g+z*e;d[9]=f*V+n*g+t*e;d[10]=l*V+v*g+x*e;d[11]=r*V+q*g+y*e;
return d},rotateX:function(a,b,c){var g=Math.sin(b);b=Math.cos(b);var d=a[4],e=a[5],f=a[6],k=a[7],p=a[8],h=a[9],l=a[10],r=a[11];c?a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[4]=d*b+p*g;c[5]=e*b+h*g;c[6]=f*b+l*g;c[7]=k*b+r*g;c[8]=d*-g+p*b;c[9]=e*-g+h*b;c[10]=f*-g+l*b;c[11]=k*-g+r*b;return c},rotateY:function(a,b,c){var g=Math.sin(b);b=Math.cos(b);var d=a[0],e=a[1],f=a[2],k=a[3],p=a[8],h=a[9],l=a[10],r=a[11];c?a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=
a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=d*b+p*-g;c[1]=e*b+h*-g;c[2]=f*b+l*-g;c[3]=k*b+r*-g;c[8]=d*g+p*b;c[9]=e*g+h*b;c[10]=f*g+l*b;c[11]=k*g+r*b;return c},rotateZ:function(a,b,c){var g=Math.sin(b);b=Math.cos(b);var d=a[0],e=a[1],f=a[2],k=a[3],p=a[4],h=a[5],l=a[6],r=a[7];c?a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=d*b+p*g;c[1]=e*b+h*g;c[2]=f*b+l*g;c[3]=k*b+r*g;c[4]=d*-g+p*b;c[5]=e*-g+h*b;c[6]=f*-g+
l*b;c[7]=k*-g+r*b;return c},frustum:function(a,b,c,d,e,f,k){k||(k=w.create());var g=b-a,p=d-c,h=f-e;k[0]=2*e/g;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=2*e/p;k[6]=0;k[7]=0;k[8]=(b+a)/g;k[9]=(d+c)/p;k[10]=-(f+e)/h;k[11]=-1;k[12]=0;k[13]=0;k[14]=-(f*e*2)/h;k[15]=0;return k},perspective:function(a,b,c,d,e){a=c*Math.tan(a*Math.PI/360);b*=a;return w.frustum(-b,b,-a,a,c,d,e)},ortho:function(a,b,c,d,e,f,k){k||(k=w.create());var g=b-a,p=d-c,h=f-e;k[0]=2/g;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=2/p;k[6]=0;k[7]=0;k[8]=0;
k[9]=0;k[10]=-2/h;k[11]=0;k[12]=-(a+b)/g;k[13]=-(d+c)/p;k[14]=-(f+e)/h;k[15]=1;return k},lookAt:function(a,b,c,d){d||(d=w.create());var g,e,f,k,p,h,l,m,r=a[0],n=a[1];a=a[2];f=c[0];k=c[1];e=c[2];l=b[0];c=b[1];g=b[2];if(r===l&&n===c&&a===g)return w.identity(d);b=r-l;c=n-c;l=a-g;m=1/Math.sqrt(b*b+c*c+l*l);b*=m;c*=m;l*=m;g=k*l-e*c;e=e*b-f*l;f=f*c-k*b;(m=Math.sqrt(g*g+e*e+f*f))?(m=1/m,g*=m,e*=m,f*=m):f=e=g=0;k=c*f-l*e;p=l*g-b*f;h=b*e-c*g;(m=Math.sqrt(k*k+p*p+h*h))?(m=1/m,k*=m,p*=m,h*=m):h=p=k=0;d[0]=g;
d[1]=k;d[2]=b;d[3]=0;d[4]=e;d[5]=p;d[6]=c;d[7]=0;d[8]=f;d[9]=h;d[10]=l;d[11]=0;d[12]=-(g*r+e*n+f*a);d[13]=-(k*r+p*n+h*a);d[14]=-(b*r+c*n+l*a);d[15]=1;return d},fromRotationTranslation:function(a,b,c){c||(c=w.create());var g=a[0],d=a[1],e=a[2],f=a[3],k=g+g,p=d+d,h=e+e;a=g*k;var l=g*p,g=g*h,m=d*p,d=d*h,e=e*h,k=f*k,p=f*p,f=f*h;c[0]=1-(m+e);c[1]=l+f;c[2]=g-p;c[3]=0;c[4]=l-f;c[5]=1-(a+e);c[6]=d+k;c[7]=0;c[8]=g+p;c[9]=d-k;c[10]=1-(a+m);c[11]=0;c[12]=b[0];c[13]=b[1];c[14]=b[2];c[15]=1;return c},str:function(a){return"["+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}},t={create:function(a){var b=new e(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,d){var g=new e(4);g[0]=a;g[1]=b;g[2]=c;g[3]=d;return g},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=t.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}},
p=t.identity();t.calculateW=function(a,b){var c=a[0],g=a[1],d=a[2];if(!b||a===b)return a[3]=-Math.sqrt(Math.abs(1-c*c-g*g-d*d)),a;b[0]=c;b[1]=g;b[2]=d;b[3]=-Math.sqrt(Math.abs(1-c*c-g*g-d*d));return b};t.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};t.inverse=function(a,b){var c=a[0],g=a[1],d=a[2],e=a[3],c=(c=c*c+g*g+d*d+e*e)?1/c:0;if(!b||a===b)return a[0]*=-c,a[1]*=-c,a[2]*=-c,a[3]*=c,a;b[0]=-a[0]*c;b[1]=-a[1]*c;b[2]=-a[2]*c;b[3]=a[3]*c;return b};t.conjugate=function(a,b){if(!b||
a===b)return a[0]*=-1,a[1]*=-1,a[2]*=-1,a;b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b};t.length=function(a){var b=a[0],c=a[1],g=a[2];a=a[3];return Math.sqrt(b*b+c*c+g*g+a*a)};t.normalize=function(a,b){b||(b=a);var c=a[0],g=a[1],d=a[2];a=a[3];var e=Math.sqrt(c*c+g*g+d*d+a*a);if(0===e)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;e=1/e;b[0]=c*e;b[1]=g*e;b[2]=d*e;b[3]=a*e;return b};t.add=function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a[3]+=b[3],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=
a[2]+b[2];c[3]=a[3]+b[3];return c};t.multiply=function(a,b,c){c||(c=a);var g=a[0],d=a[1],e=a[2];a=a[3];var f=b[0],k=b[1],p=b[2];b=b[3];c[0]=g*b+a*f+d*p-e*k;c[1]=d*b+a*k+e*f-g*p;c[2]=e*b+a*p+g*k-d*f;c[3]=a*b-g*f-d*k-e*p;return c};t.multiplyVec3=function(a,b,c){c||(c=b);var g=b[0],d=b[1],e=b[2];b=a[0];var f=a[1],k=a[2];a=a[3];var p=a*g+f*e-k*d,h=a*d+k*g-b*e,l=a*e+b*d-f*g,g=-b*g-f*d-k*e;c[0]=p*a+g*-b+h*-k-l*-f;c[1]=h*a+g*-f+l*-b-p*-k;c[2]=l*a+g*-k+p*-f-h*-b;return c};t.scale=function(a,b,c){if(!c||a===
c)return a[0]*=b,a[1]*=b,a[2]*=b,a[3]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};t.toMat3=function(a,b){b||(b=x.create());var c=a[0],g=a[1],d=a[2],e=a[3],f=c+c,k=g+g,p=d+d;a=c*f;var h=c*k,c=c*p,l=g*k,g=g*p,d=d*p,f=e*f,k=e*k,e=e*p;b[0]=1-(l+d);b[1]=h+e;b[2]=c-k;b[3]=h-e;b[4]=1-(a+d);b[5]=g+f;b[6]=c+k;b[7]=g-f;b[8]=1-(a+l);return b};t.toMat4=function(a,b){b||(b=w.create());var c=a[0],g=a[1],d=a[2],e=a[3],f=c+c,k=g+g,p=d+d;a=c*f;var h=c*k,c=c*p,l=g*k,g=g*p,d=d*p,f=e*f,k=e*k,e=e*p;
b[0]=1-(l+d);b[1]=h+e;b[2]=c-k;b[3]=0;b[4]=h-e;b[5]=1-(a+d);b[6]=g+f;b[7]=0;b[8]=c+k;b[9]=g-f;b[10]=1-(a+l);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};t.slerp=function(a,b,c,d){d||(d=a);var g=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3],e,f;if(1<=Math.abs(g))return d!==a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]),d;e=Math.acos(g);f=Math.sqrt(1-g*g);if(.001>Math.abs(f))return d[0]=.5*a[0]+.5*b[0],d[1]=.5*a[1]+.5*b[1],d[2]=.5*a[2]+.5*b[2],d[3]=.5*a[3]+.5*b[3],d;g=Math.sin((1-c)*e)/f;c=Math.sin(c*
e)/f;d[0]=a[0]*g+b[0]*c;d[1]=a[1]*g+b[1]*c;d[2]=a[2]*g+b[2]*c;d[3]=a[3]*g+b[3]*c;return d};t.fromRotationMatrix=function(a,b){b||(b=t.create());var c=a[0]+a[4]+a[8],g;if(0<c)g=Math.sqrt(c+1),b[3]=.5*g,g=.5/g,b[0]=(a[7]-a[5])*g,b[1]=(a[2]-a[6])*g,b[2]=(a[3]-a[1])*g;else{g=t.fromRotationMatrix.s_iNext=t.fromRotationMatrix.s_iNext||[1,2,0];c=0;a[4]>a[0]&&(c=1);a[8]>a[3*c+c]&&(c=2);var d=g[c],e=g[d];g=Math.sqrt(a[3*c+c]-a[3*d+d]-a[3*e+e]+1);b[c]=.5*g;g=.5/g;b[3]=(a[3*e+d]-a[3*d+e])*g;b[d]=(a[3*d+c]+a[3*
c+d])*g;b[e]=(a[3*e+c]+a[3*c+e])*g}return b};x.toQuat4=t.fromRotationMatrix;(function(){var a=x.create();t.fromAxes=function(b,c,g,d){a[0]=c[0];a[3]=c[1];a[6]=c[2];a[1]=g[0];a[4]=g[1];a[7]=g[2];a[2]=b[0];a[5]=b[1];a[8]=b[2];return t.fromRotationMatrix(a,d)}})();t.identity=function(a){a||(a=t.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};t.fromAngleAxis=function(a,b,c){c||(c=t.create());a*=.5;var g=Math.sin(a);c[3]=Math.cos(a);c[0]=g*b[0];c[1]=g*b[1];c[2]=g*b[2];return c};t.toAngleAxis=function(a,
b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<c?(b[3]=2*Math.acos(a[3]),c=f.invsqrt(c),b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c):(b[3]=0,b[0]=1,b[1]=0,b[2]=0);return b};t.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var v={create:function(a){var b=new e(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,d){var g=new e(4);g[0]=a;g[1]=b;g[2]=c;g[3]=d;return g},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},
identity:function(a){a||(a=v.create());a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,b){if(!b||a===b)return b=a[1],a[1]=a[2],a[2]=b,a;b[0]=a[0];b[1]=a[2];b[2]=a[1];b[3]=a[3];return b},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},inverse:function(a,b){b||(b=a);var c=a[0],d=a[1],g=a[2];a=a[3];var e=c*a-g*d;if(!e)return null;e=1/e;b[0]=a*e;b[1]=-d*e;b[2]=-g*e;b[3]=c*e;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],g=a[1],e=a[2];a=a[3];c[0]=d*b[0]+g*b[2];c[1]=d*b[1]+g*b[3];
c[2]=e*b[0]+a*b[2];c[3]=e*b[1]+a*b[3];return c},rotate:function(a,b,c){c||(c=a);var d=a[0],g=a[1],e=a[2];a=a[3];var f=Math.sin(b);b=Math.cos(b);c[0]=d*b+g*f;c[1]=d*-f+g*b;c[2]=e*b+a*f;c[3]=e*-f+a*b;return c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];b=b[1];c[0]=d*a[0]+b*a[1];c[1]=d*a[2]+b*a[3];return c},scale:function(a,b,c){c||(c=a);var d=a[1],g=a[2],e=a[3],f=b[0];b=b[1];c[0]=a[0]*f;c[1]=d*b;c[2]=g*f;c[3]=e*b;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};m=m?
"":"d";a["glMath"+m]=f;a["vec2"+m]={create:function(a){var b=new e(2);a?(b[0]=a[0],b[1]=a[1]):(b[0]=0,b[1]=0);return b},createFrom:function(a,b){var c=new e(2);c[0]=a;c[1]=b;return c},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];return c},subtract:function(a,b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];return c},scale:function(a,b,c){c||(c=
a);c[0]=a[0]*b;c[1]=a[1]*b;return c},dist:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)},dist2:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a},set:function(a,b){b[0]=a[0];b[1]=a[1];return b},set2:function(a,b,c){c[0]=a;c[1]=b;return c},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];return b},normalize:function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1];0<c?(c=Math.sqrt(c),b[0]=a[0]/c,b[1]=a[1]/c):b[0]=b[1]=0;return b},cross:function(a,b,c){a=a[0]*b[1]-a[1]*b[0];if(!c)return a;
c[0]=c[1]=0;c[2]=a;return c},length:function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0];a=a[1]-b[1];b=d*d+a*a;if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/Math.sqrt(b);c[0]=d*b;c[1]=a*b;return c},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);return d},str:function(a){return"["+a[0]+", "+a[1]+"]"}};a["vec3"+m]=l;a["vec4"+m]={create:function(a){var b=new e(4);a?(b[0]=a[0],
b[1]=a[1],b[2]=a[2],b[3]=a[3]):(b[0]=0,b[1]=0,b[2]=0,b[3]=0);return b},createFrom:function(a,b,c,d){var g=new e(4);g[0]=a;g[1]=b;g[2]=c;g[3]=d;return g},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c},subtract:function(a,b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];c[3]=a[3]*b[3];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/
b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];c[3]=a[3]/b[3];return c},scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},set4:function(a,b,c,d,e){e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-
a[1]);d[2]=a[2]+c*(b[2]-a[2]);d[3]=a[3]+c*(b[3]-a[3]);return d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};a["mat2"+m]=v;a["mat3"+m]=x;a["mat4"+m]=w;a["quat4"+m]=t});return a})},"esri/geometry/support/jsonUtils":function(){define(["../Point","../Polyline","../Polygon","../Multipoint","../Extent"],function(a,f,m,h,e){function l(d){if(!d)return null;if(d){if(void 0!==d.x&&void 0!==d.y)return a.fromJSON(d);if(void 0!==d.paths)return f.fromJSON(d);if(void 0!==d.rings)return m.fromJSON(d);
if(void 0!==d.points)return h.fromJSON(d);if(void 0!==d.xmin&&void 0!==d.ymin&&void 0!==d.xmax&&void 0!==d.ymax)return e.fromJSON(d)}return null}var n={esriGeometryPoint:a,esriGeometryPolyline:f,esriGeometryPolygon:m,esriGeometryEnvelope:e,esriGeometryMultipoint:h};return{fromJSON:l,fromJson:function(a){try{throw Error("fromJson is deprecated, use fromJSON instead");}catch(c){console.warn(c.stack)}return l(a)},getJsonType:function(d){return d instanceof a?"esriGeometryPoint":d instanceof f?"esriGeometryPolyline":
d instanceof m?"esriGeometryPolygon":d instanceof e?"esriGeometryEnvelope":d instanceof h?"esriGeometryMultipoint":null},getGeometryType:function(a){return a&&n[a]||null}}})},"esri/geometry/Polyline":function(){define("dojo/_base/lang ../core/lang ./SpatialReference ./Geometry ./Point ./Extent ./support/zmUtils".split(" "),function(a,f,m,h,e,l,n){var d=h.createSubclass({declaredClass:"esri.geometry.Polyline",type:"polyline",getDefaults:function(a){return{paths:[]}},normalizeCtorArgs:function(a,b){var c=
null,d,e,f=null;a&&!Array.isArray(a)?(c=a.paths?a.paths:null,b||(a.spatialReference?b=a.spatialReference:a.paths||(b=a)),d=a.hasZ,e=a.hasM):c=a;c=c||[];b=b||m.WGS84;c.length&&c[0]&&null!=c[0][0]&&"number"==typeof c[0][0]&&(c=[c]);if(f=c[0]&&c[0][0])void 0===d&&void 0===e?(d=2<f.length,e=!1):void 0===d?d=!e&&3<f.length:void 0===e&&(e=!d&&3<f.length);return{paths:c,spatialReference:b,hasZ:d,hasM:e}},_path:0,properties:{cache:{dependsOn:["hasM","hasZ","paths"]},extent:{dependsOn:["cache"],readOnly:!0,
get:function(){function a(a){return function(b,c){return void 0===b?c:void 0===c?b:a(b,c)}}var b=this.paths,d=b.length;if(!d||!b[0].length)return null;var e,f,h,m,n,p,v,g,r,z,y,A,F=p=b[0][0][0],B=v=b[0][0][1],E,C,G=a(Math.min),L=a(Math.max),U=this.spatialReference,P=[],H,K,J,R,M,ea,I,N,Y=this.hasZ,aa=this.hasM,S=Y?3:2;for(z=0;z<d;z++){e=b[z];H=K=e[0]&&e[0][0];J=R=e[0]&&e[0][1];A=e.length;I=N=M=ea=void 0;for(y=0;y<A;y++)f=e[y],h=f[0],m=f[1],F=G(F,h),B=G(B,m),p=L(p,h),v=L(v,m),H=G(H,h),J=G(J,m),K=L(K,
h),R=L(R,m),Y&&2<f.length&&(n=f[2],E=G(E,n),g=L(g,n),M=G(M,n),ea=L(ea,n)),aa&&f.length>S&&(f=f[S],C=G(C,n),r=L(r,n),I=G(I,f),N=L(N,f));P.push(new l({xmin:H,ymin:J,zmin:M,mmin:I,xmax:K,ymax:R,zmax:ea,mmax:N,spatialReference:U?U.clone():null}))}b=new l({xmin:F,ymin:B,xmax:p,ymax:v,spatialReference:U?U.toJSON():null});Y&&(b.zmin=E,b.zmax=g);aa&&(b.mmin=C,b.mmax=r);b.cache._partwise=1<P.length?P:null;return b}},paths:null},addPath:function(a){this.clearCache();this._path=this.paths.length;this.paths[this._path]=
[];a.forEach(this._addPoint,this);return this},clone:function(){var c=new d;c.spatialReference=this.spatialReference;c.paths=a.clone(this.paths);c.hasZ=this.hasZ;c.hasM=this.hasM;return c},getPoint:function(a,b){if(this._validateInputs(a,b)){a=this.paths[a][b];b=this.hasZ;var c=this.hasM;return b&&c?new e(a[0],a[1],a[2],a[3],this.spatialReference):b?new e(a[0],a[1],a[2],void 0,this.spatialReference):c?new e(a[0],a[1],void 0,a[2],this.spatialReference):new e(a[0],a[1],this.spatialReference)}},insertPoint:function(a,
b,d){if(this._validateInputs(a)&&f.isDefined(b)&&0<=b&&b<=this.paths[a].length)return this.clearCache(),n.updateSupportFromPoint(this,d),Array.isArray(d)||(d=d.toArray()),this.paths[a].splice(b,0,d),this},removePath:function(a){if(this._validateInputs(a,null)){this.clearCache();a=this.paths.splice(a,1)[0];var b,c=a.length,d=this.spatialReference;for(b=0;b<c;b++)a[b]=new e(a[b],d);return a}},removePoint:function(a,b){if(this._validateInputs(a,b))return this.clearCache(),new e(this.paths[a].splice(b,
1)[0],this.spatialReference)},setPoint:function(a,b,d){if(this._validateInputs(a,b))return this.clearCache(),n.updateSupportFromPoint(this,d),Array.isArray(d)||(d=d.toArray()),this.paths[a][b]=d,this},toJSON:function(){var a=this.spatialReference,a={paths:this.paths,spatialReference:a&&a.toJSON()};this.hasZ&&(a.hasZ=!0);this.hasM&&(a.hasM=!0);return a},_initPathPointsToArray:function(a){for(var b=0;b<a.paths.length;b++)a.paths[b]=a.paths[b].map(function(b){n.updateSupportFromPoint(a,b,!0);Array.isArray(b)||
(a.spatialReference||(a.spatialReference=b.spatialReference),b=b.toArray());return b});return a},_addPoint:function(a){Array.isArray(a)?this.paths[this._path].push(a):this.paths[this._path].push(a.toArray());n.updateSupportFromPoint(this,a)},_insertPoints:function(a,b){this.clearCache();this._path=b;this.paths[this._path]||(this.paths[this._path]=[]);a.forEach(this._addPoint,this)},_validateInputs:function(a,b){return null!==a&&void 0!==a&&(0>a||a>=this.paths.length)||null!==b&&void 0!==a&&(0>b||
b>=this.paths[a].length)?!1:!0}});return d})},"esri/geometry/support/zmUtils":function(){define([],function(){return{updateSupportFromPoint:function(a,f,m){var h=a.hasZ,e=a.hasM;Array.isArray(f)?4!==f.length||e||h?3===f.length&&m&&!e?(h=!0,e=!1):3===f.length&&e&&h&&(h=e=!1):h=e=!0:(h=!h&&f.hasZ&&(!e||f.hasM),e=!e&&f.hasM&&(!h||f.hasZ));a.hasZ=h;a.hasM=e}}})},"esri/geometry/Polygon":function(){define("dojo/_base/lang ../core/lang ./SpatialReference ./Geometry ./Point ./Extent ./support/coordsUtils ./support/mathUtils ./support/webMercatorUtils ./support/zmUtils".split(" "),
function(a,f,m,h,e,l,n,d,c,b){var k=function(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}},q=k(Math.min),u=k(Math.max),x=h.createSubclass({declaredClass:"esri.geometry.Polygon",type:"polygon",getDefaults:function(a){return{rings:[]}},normalizeCtorArgs:function(a,b){var c=null,d,g,e=null;a&&!Array.isArray(a)?(c=a.rings?a.rings:null,b||(a.spatialReference?b=a.spatialReference:a.rings||(b=a)),d=a.hasZ,g=a.hasM):c=a;c=c||[];b=b||m.WGS84;c.length&&c[0]&&null!=c[0][0]&&"number"==typeof c[0][0]&&
(c=[c]);if(e=c[0]&&c[0][0])void 0===d&&void 0===g?(d=2<e.length,g=!1):void 0===d?d=!g&&3<e.length:void 0===g&&(g=!d&&3<e.length);return{rings:c,spatialReference:b,hasZ:d,hasM:g}},_ring:0,properties:{cache:{dependsOn:["hasM","hasZ","rings"]},centroid:{readOnly:!0,dependsOn:["cache"],get:function(a){var b=n.centroid([],this.rings,this.hasZ);if(isNaN(b[0])||isNaN(b[1])||this.hasZ&&isNaN(b[2]))return null;a=a||new e;a.x=b[0];a.y=b[1];a.spatialReference=this.spatialReference;this.hasZ&&(a.z=b[2]);return a}},
extent:{dependsOn:["cache"],readOnly:!0,get:function(){var a=this.rings,b=a.length;if(!b||!a[0].length)return null;var c,d,g,e,f,k,h,m,n,x,C,G=f=a[0][0][0],L=k=a[0][0][1],U,P,H=this.spatialReference,K=[],J,R,M,ea,I,N,Y,aa,S=this.hasZ,Z=this.hasM,da=S?3:2;for(n=0;n<b;n++){c=a[n];J=R=c[0]&&c[0][0];M=ea=c[0]&&c[0][1];C=c.length;Y=aa=I=N=void 0;for(x=0;x<C;x++)d=c[x],g=d[0],e=d[1],G=q(G,g),L=q(L,e),f=u(f,g),k=u(k,e),J=q(J,g),M=q(M,e),R=u(R,g),ea=u(ea,e),S&&2<d.length&&(g=d[2],U=q(U,g),h=u(h,g),I=q(I,
g),N=u(N,g)),Z&&d.length>da&&(d=d[da],P=q(U,d),m=u(h,d),Y=q(I,d),aa=u(N,d));K.push(new l({xmin:J,ymin:M,zmin:I,mmin:Y,xmax:R,ymax:ea,zmax:N,mmax:aa,spatialReference:H}))}a=new l;a.xmin=G;a.ymin=L;a.xmax=f;a.ymax=k;a.spatialReference=H;S&&(a.zmin=U,a.zmax=h);Z&&(a.mmin=P,a.mmax=m);a.cache._partwise=1<K.length?K:null;return a}},isSelfIntersecting:{dependsOn:["cache"],readOnly:!0,get:function(){var a=this.rings,b=a.length,c,e,g,f,k,h,l,m,n;for(f=0;f<b;f++){c=a[f];for(e=0;e<c.length-1;e++)for(h=[[c[e][0],
c[e][1]],[c[e+1][0],c[e+1][1]]],g=f+1;g<b;g++)for(k=0;k<a[g].length-1;k++)if(l=[[a[g][k][0],a[g][k][1]],[a[g][k+1][0],a[g][k+1][1]]],(m=d._getLineIntersection2(h,l))&&!(m[0]===h[0][0]&&m[1]===h[0][1]||m[0]===l[0][0]&&m[1]===l[0][1]||m[0]===h[1][0]&&m[1]===h[1][1]||m[0]===l[1][0]&&m[1]===l[1][1]))return!0;k=c.length;if(!(4>=k))for(e=0;e<k-3;e++)for(n=k-1,0===e&&(n=k-2),h=[[c[e][0],c[e][1]],[c[e+1][0],c[e+1][1]]],g=e+2;g<n;g++)if(l=[[c[g][0],c[g][1]],[c[g+1][0],c[g+1][1]]],(m=d._getLineIntersection2(h,
l))&&!(m[0]===h[0][0]&&m[1]===h[0][1]||m[0]===l[0][0]&&m[1]===l[0][1]||m[0]===h[1][0]&&m[1]===h[1][1]||m[0]===l[1][0]&&m[1]===l[1][1]))return!0}return!1}},rings:null},addRing:function(a){if(a){this.clearCache();var b=this.rings,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{var d=[];b[c]=d;b=0;for(c=a.length;b<c;b++)d[b]=a[b].toArray()}return this}},clone:function(){var b=new x;b.spatialReference=this.spatialReference;b.rings=a.clone(this.rings);b.hasZ=this.hasZ;b.hasM=this.hasM;return b},
contains:function(a){if(!a)return!1;c.canProject(a,this.spatialReference)&&(a=c.project(a,this.spatialReference));return n.contains(this.rings,n.fromGeom(a))},isClockwise:function(a){var b=0,c=0,d=0,g,e=a.length,f,k,h,l=this.hasZ,m=this.hasM;for(g=0;g<e;g++)f=a[g],k=a[(g+1)%e],Array.isArray(f)?(b+=f[0]*k[1]-k[0]*f[1],h=2,2<f.length&&2<k.length&&l&&(c+=f[0]*k[2]-k[0]*f[2],h=3),f.length>h&&k.length>h&&m&&(d+=f[0]*k[h]-k[0]*f[h])):(b+=f.x*k.y-k.x*f.y,f.hasZ&&k.hasZ&&(c+=f.x*k.z-k.x*f.z),f.hasM&&k.hasM&&
(d+=f.x*k.m-k.x*f.m));return 0>=b&&0>=c&&0>=d},getPoint:function(a,b){if(this._validateInputs(a,b)){a=this.rings[a][b];b=this.hasZ;var c=this.hasM;return b&&!c?new e(a[0],a[1],a[2],void 0,this.spatialReference):c&&!b?new e(a[0],a[1],void 0,a[2],this.spatialReference):b&&c?new e(a[0],a[1],a[2],a[3],this.spatialReference):new e(a[0],a[1],this.spatialReference)}},insertPoint:function(a,c,d){if(this._validateInputs(a)&&f.isDefined(c)&&0<=c&&c<=this.rings[a].length)return this.clearCache(),b.updateSupportFromPoint(this,
d),Array.isArray(d)||(d=d.toArray()),this.rings[a].splice(c,0,d),this},removePoint:function(a,b){if(this._validateInputs(a,b))return this.clearCache(),new e(this.rings[a].splice(b,1)[0],this.spatialReference)},removeRing:function(a){if(this._validateInputs(a,null)){this.clearCache();a=this.rings.splice(a,1)[0];var b,c=a.length,d=this.spatialReference;for(b=0;b<c;b++)a[b]=new e(a[b],d);return a}},setPoint:function(a,c,d){if(this._validateInputs(a,c))return this.clearCache(),b.updateSupportFromPoint(this,
d),Array.isArray(d)||(d=d.toArray()),this.rings[a][c]=d,this},toJSON:function(){var a=this.spatialReference,a={rings:this.rings,spatialReference:a&&a.toJSON()};this.hasZ&&(a.hasZ=!0);this.hasM&&(a.hasM=!0);return a},_insertPoints:function(a,b){this.clearCache();this._ring=b;this.rings[this._ring]||(this.rings[this._ring]=[]);a.forEach(this._addPoint,this)},_validateInputs:function(a,b){return null!==a&&void 0!==a&&(0>a||a>=this.rings.length)||null!==b&&void 0!==a&&(0>b||b>=this.rings[a].length)?!1:
!0}});x.createEllipse=function(a){var b=a.center.x,c=a.center.y,d=a.center.z,g=a.center.m,e=a.longAxis,f=a.shortAxis,k=a.numberOfPoints;a=a.map;var h,l,m,n=[],q=2*Math.PI/k;for(l=0;l<k;l++)h=Math.cos(l*q),m=Math.sin(l*q),h=a.toMap({x:e*h+b,y:f*m+c}),null==d||h.hasZ||(h.z=d),null==g||h.hasM||(h.m=g),n.push(h);n.push(n[0]);return new x({rings:[n],spatialReference:a.spatialReference})};x.createCircle=function(a){return x.createEllipse({center:a.center,longAxis:a.r,shortAxis:a.r,numberOfPoints:a.numberOfPoints,
map:a.map})};x.fromExtent=function(a){var b=a.clone().normalize();a=a.spatialReference;var c=!1,d=!1;b.map(function(a){a.hasZ&&(c=!0);a.hasM&&(d=!0)});b={rings:b.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(c&&a.hasZ)for(var g=(a.zmax-a.zmin)/2,e=0;e<b.length;e++)b[e].push(g);if(d&&a.hasM)for(a=(a.mmax-a.mmin)/2,e=0;e<b.length;e++)b[e].push(a);return b}),spatialReference:a?a.toJSON():null};c&&(b.hasZ=!0);d&&(b.hasM=!0);return new x(b)};
return x})},"esri/geometry/support/coordsUtils":function(){define([],function(){var a=function(a,e,f){var h=f[0];f=f[1];for(var d=0,c,b,k,l,m=0,x=e.length;m<x;m++)d++,d===x&&(d=0),c=e[m][0],b=e[d][0],k=e[m][1],l=e[d][1],(k<f&&l>=f||l<f&&k>=f)&&c+(f-k)/(l-k)*(b-c)<h&&(a=!a);return a},f=function(a,e,f){for(var h=0,d=0,c=0,b,k,l,m,x,w,t,p,v,g=0,r=0,z=0,y=e.length-1;z<y;z++)b=e[z],k=b[0],l=b[1],m=b[2],x=e[z+1],w=x[0],t=x[1],p=x[2],v=k*t-w*l,g+=v,h+=(k+w)*v,d+=(l+t)*v,f&&2<b.length&&2<x.length&&(v=k*p-
w*m,c+=(m+p)*v,r+=v);0<g&&(g*=-1);0<r&&(r*=-1);g?(a[0]=h,a[1]=d,a[2]=.5*g,f?(a[3]=c,a[4]=.5*r):a.length=3):a.length=0;return a},m=function(a,e){for(var f=0,h=0,d=0,c=0,b=e?[0,0,0]:[0,0],k=e?[0,0,0]:[0,0],m,u,x,w=0,t=a.length;w<t-1;w++)if(m=a[w],u=a[w+1],m&&u){b[0]=m[0];b[0]=m[1];k[0]=u[0];k[0]=u[1];e&&2<m.length&&2<u.length&&(b[2]=m[2],k[2]=u[2]);x=k[0]-b[0];var p=k[1]-b[1],v=0;1<b.length&&1<k.length&&(v=b[2]-k[2]);if(x=Math.sqrt(x*x+p*p+v*v))f+=x,p=m[0]+.5*(u[0]-m[0]),v=m[1]+.5*(u[1]-m[1]),m=2<m.length&&
2<u.length?[p,v,m[2]+.5*(u[2]-m[2])]:[p,v],h+=x*m[0],d+=x*m[1],e&&2<m.length&&(c+=x*m[2])}return 0<f?e?[h/f,d/f,c/f]:[h/f,d/f]:a.length?a[0]:null};return{fromGeom:function(a){if(!a)return null;if(Array.isArray(a))return a;var e=a.hasZ,f=a.hasM;if("point"===a.type)return f&&e?[a.x,a.y,a.z,a.m]:e?[a.x,a.y,a.z]:f?[a.x,a.y,a.m]:[a.x,a.y];if("polygon"===a.type)return a.rings.slice(0);if("polyline"===a.type)return a.path.slice(0);if("multipoint"===a.type)return a.points.slice(0);if("extent"===a.type){a=
a.clone().normalize();if(!a)return null;e=f=!1;a.map(function(a){a.hasZ&&(e=!0);a.hasM&&(f=!0)});return a.map(function(a){var d=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(e&&a.hasZ)for(var c=.5*(a.zmax-a.zmin),b=0;b<d.length;b++)d[b].push(c);if(f&&a.hasM)for(a=.5*(a.mmax-a.mmin),b=0;b<d.length;b++)d[b].push(a);return d})}return null},contains:function(f,e){if(!f)return!1;if(!Array.isArray(f[0][0]))return a(!1,f,e);for(var h=!1,m=0,d=f.length;m<d;m++)h=a(h,
f[m],e);return h},centroid:function(a,e,l){for(var h=[],d,c=0,b=e.length;c<b;c++)d=f([],e[c],l),d.length&&h.push(d);h.sort(function(a,b){var c=a[2]-b[2];0===c&&l&&(c=a[4]-b[4]);return c});a.length=l?3:2;if(h.length)e=6*h[0][2],a[0]=h[0][0]/e,a[1]=h[0][1]/e,l&&(e=6*h[0][4],a[2]=0!==e?h[0][3]/e:0);else if(h=e[0]&&e[0].length?m(e[0]):null)a[0]=h[0],a[1]=h[1],l&&2<h.length&&(a[2]=h[2]);return a},isClockwise:function(a){for(var e=0,f=0,h=f+1,d=a.length;f<d;f++,h+=1%d)e+=a[f][0]*a[h][1]-a[h][0]*a[f][1];
return 0>=.5*e}}})},"esri/geometry/Multipoint":function(){define("dojo/_base/lang ./SpatialReference ./Geometry ./Point ./Extent ./support/zmUtils".split(" "),function(a,f,m,h,e,l){var n=m.createSubclass({declaredClass:"esri.geometry.Multipoint",type:"multipoint",getDefaults:function(a){return{points:[]}},normalizeCtorArgs:function(a,c){var b=null,d,e,h=null;a&&!Array.isArray(a)?a.wkid?c=a:(b=a.points||null,c=a.spatialReference||null,d=a.hasZ,e=a.hasM):b=a;b=b||[];c=c||f.WGS84;if(h=b[0])void 0===
d&&void 0===e?(d=2<h.length,e=!1):void 0===d?d=3<h.length:void 0===e&&(e=3<h.length);return{points:b,spatialReference:c,hasZ:d,hasM:e}},properties:{cache:{dependsOn:["points","hasZ","hasM"]},extent:{dependsOn:["cache"],get:function(a){function c(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}if(!this.points.length)return null;a=a||new e;var b=this.points,d=this.hasZ,f=this.hasM,h=b[0],l=c(Math.min),m=c(Math.max),n=r=h[0],p=z=h[1],v,g,r,z,y,A,F,B,E,C,G=d?3:2;E=0;for(C=b.length;E<C;E++)h=
b[E],F=h[0],B=h[1],n=l(n,F),p=l(p,B),r=m(r,F),z=m(z,B),d&&2<h.length&&(F=h[2],v=l(v,F),y=m(y,F)),f&&h.length>G&&(h=h[G],g=l(g,h),A=m(A,h));a.xmin=n;a.ymin=p;a.xmax=r;a.ymax=z;a.spatialReference=this.spatialReference;d?(a.zmin=v,a.zmax=y):(a.zmin=null,a.zmax=null);f?(a.mmin=g,a.mmax=A):(a.mmin=null,a.mmax=null);return a}},points:null},addPoint:function(a){this.clearCache();l.updateSupportFromPoint(this,a);Array.isArray(a)?this.points.push(a):this.points.push(a.toArray());return this},clone:function(){var d=
{points:a.clone(this.points),spatialReference:this.spatialReference};this.hasZ&&(d.hasZ=!0);this.hasM&&(d.hasM=!0);return new n(d)},getPoint:function(a){if(this._validateInputs(a)){a=this.points[a];var c,b,d=2;this.hasZ&&(c=a[2],d=3);this.hasM&&(b=a[d]);return new h({x:a[0],y:a[1],z:c,m:b,spatialReference:this.spatialReference})}},removePoint:function(a){if(this._validateInputs(a))return this.clearCache(),new h(this.points.splice(a,1)[0],this.spatialReference)},setPoint:function(a,c){if(this._validateInputs(a))return this.clearCache(),
l.updateSupportFromPoint(c),this.points[a]=c.toArray(),this},toJSON:function(){var d=this.spatialReference,d={points:a.clone(this.points),spatialReference:d&&d.toJSON()};this.hasZ&&(d.hasZ=!0);this.hasM&&(d.hasM=!0);return d},_pointsToArrays:function(a){for(var c=0;c<a.points.length;c++){var b=a.points[c];l.updateSupportFromPoint(a,b,!0);Array.isArray(b)||(a.spatialReference||(a.spatialReference=b.spatialReference),a.points[c]=b.toArray())}return a},_validateInputs:function(a){return null!=a&&0<=
a&&a<this.points.length}});return n})},"esri/layers/graphics/controllers/AutoController2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/requireUtils ../../../Graphic ../../../core/Accessor ../../../core/Collection ../../../core/Promise ../../../tasks/QueryTask ../../../tasks/support/StatisticDefinition".split(" "),function(a,f,m,h,e,l,n,d,c,b,k,q){var u;(function(a){a[a.Snapshot=
0]="Snapshot";a[a.OnDemand=1]="OnDemand"})(u||(u={}));f=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;a.controllerModulePaths=(c={},c[u.Snapshot]="./SnapshotController",c[u.OnDemand]="./OnDemandController2D",c);a.maxPointCountForAuto=4E3;a.maxRecordCountForAuto=2E3;a.maxVertexCountForAuto=25E4;return a;var c}m(c,b);c.prototype.initialize=function(){var a=this,b=this.layer.then(function(){return a._figureOutMode().then(function(b){return a._createController(b)})}).then(function(b){return a._set("activeController",
b)});this.addResolvingPromise(b)};c.prototype.destroy=function(){this.activeController&&(this.activeController.destroy(),this._set("activeController",null))};Object.defineProperty(c.prototype,"countThresholdForAuto",{get:function(){var a=this.layer.geometryType,b;"polyline"===a||"polygon"===a||"multipoint"===a?b=this.maxRecordCountForAuto:"point"===a&&(b=this.maxPointCountForAuto);return b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"updating",{get:function(){return!1===this.isFulfilled()||
!0===this.get("activeController.updating")},enumerable:!0,configurable:!0});c.prototype._figureOutMode=function(){return this._isStatisticsSupported()?this._checkByStatistics():this._checkByCount()};c.prototype._isStatisticsSupported=function(){return/(https?:)?\/\/services.*\.arcgis\.com/i.test(this.layer.source.parsedUrl.path)};c.prototype._checkByStatistics=function(){var a=this,b=this.layer,c=b.source.parsedUrl.path,b=b.createQuery();b.outStatistics=[new q({statisticType:"exceedslimit",maxPointCount:this.maxPointCountForAuto,
maxRecordCount:this.maxRecordCountForAuto,maxVertexCount:this.maxVertexCountForAuto,outStatisticFieldName:"exceedslimit"})];return(new k({url:c+"/query"})).execute(b).then(function(b){b=b&&b.features&&b.features[0];if(0===(b&&b.attributes&&b.attributes.exceedslimit)){b=a.layer;var c=b.maxRecordCount;if(b.get("capabilities.query.supportsPagination")||c>=a.countThresholdForAuto)return u.Snapshot}return u.OnDemand})};c.prototype._checkByCount=function(){var a=this,b=this.layer;return b.queryFeatureCount().then(function(c){return c<=
a.countThresholdForAuto&&c<=b.maxRecordCount?u.Snapshot:u.OnDemand})};c.prototype._createController=function(b){var c=this;return l.when(a,this.controllerModulePaths[b]).then(function(a){return new a({layer:c.layer,layerView:c.layerView,graphics:c.graphics})}).otherwise(function(a){throw Error("Module path not found for controller type: "+(b===u.Snapshot?"snapshot":"on demand"));})};return c}(e.declared(d,b));h([e.property()],f.prototype,"activeController",void 0);h([e.property({dependsOn:["layer.geometryType"]})],
f.prototype,"countThresholdForAuto",null);h([e.property()],f.prototype,"controllerModulePaths",void 0);h([e.property({type:c.ofType(n)})],f.prototype,"graphics",void 0);h([e.property()],f.prototype,"layer",void 0);h([e.property()],f.prototype,"layerView",void 0);h([e.property({dependsOn:["activeController.updating"]})],f.prototype,"updating",null);h([e.aliasOf("activeController.update")],f.prototype,"update",void 0);return f=h([e.subclass("esri.layers.graphics.controllers.AutoController2D")],f)})},
"esri/Graphic":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/accessorSupport/decorators dojo/_base/lang ./core/lang ./core/JSONSupport ./PopupTemplate ./geometry/support/jsonUtils ./symbols/support/jsonUtils".split(" "),function(a,f,m,h,e,l,n,d,c,b,k){var q=0;a=u=function(a){function b(b,c,d,g){b=a.call(this,b,c,d,g)||this;b.layer=null;b.popupTemplate=null;Object.defineProperty(b,"uid",{value:q++});return b}m(b,a);b.prototype.normalizeCtorArgs=
function(a,b,c,d){return a&&!a.declaredClass?a:{geometry:a,symbol:b,attributes:c,popupTemplate:d}};Object.defineProperty(b.prototype,"attributes",{set:function(a){var b=this._get("attributes");b!==a&&(this._set("attributes",a),this._notifyLayer("attributes",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"geometry",{set:function(a){var b=this._get("geometry");b!==a&&(this._set("geometry",a),this._notifyLayer("geometry",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"symbol",{set:function(a){var b=this._get("symbol");b!==a&&(this._set("symbol",a),this._notifyLayer("symbol",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"visible",{set:function(a){var b=this._get("visible");b!==a&&(this._set("visible",a),this._notifyLayer("visible",b,a))},enumerable:!0,configurable:!0});b.prototype.getAttribute=function(a){return this.attributes&&this.attributes[a]};b.prototype.setAttribute=function(a,b){if(this.attributes){var c=this.getAttribute(a);
this.attributes[a]=b;this._notifyLayer("attributes",c,b,a)}else this.attributes=(c={},c[a]=b,c),this._notifyLayer("attributes",void 0,b,a)};b.prototype.getEffectivePopupTemplate=function(){return this.popupTemplate||this.layer&&this.layer.popupTemplate};b.prototype.toJSON=function(){return{geometry:this.geometry&&this.geometry.toJSON(),symbol:this.symbol&&this.symbol.toJSON(),attributes:l.mixin({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}};b.prototype.clone=function(){return new u({attributes:n.clone(this.attributes),
geometry:this.geometry&&this.geometry.clone()||null,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),symbol:this.symbol&&this.symbol.clone()||null,visible:this.visible})};b.prototype._notifyLayer=function(a,b,c,d){this.layer&&(a={graphic:this,property:a,oldValue:b,newValue:c},d&&(a.attributeName=d),this.layer.graphicChanged(a))};return b}(e.declared(d));h([e.property({value:null})],a.prototype,"attributes",null);h([e.property({value:null,json:{read:b.fromJSON}})],a.prototype,"geometry",
null);h([e.property()],a.prototype,"layer",void 0);h([e.property({type:c})],a.prototype,"popupTemplate",void 0);h([e.property({value:null,json:{read:k.read}})],a.prototype,"symbol",null);h([e.property({value:!0,set:function(a){}})],a.prototype,"visible",null);a=u=h([e.subclass("esri.Graphic")],a);var u;return a})},"esri/PopupTemplate":function(){define(["./core/JSONSupport","./core/kebabDictionary","./core/Collection","./core/lang","./support/Action"],function(a,f,m,h,e){var l=f({richtext:"rich-text",
textarea:"text-area",textbox:"text-box"}),n=f({shortDate:"short-date",shortDateLE:"short-date-le",longDate:"long-date",dayShortMonthYear:"day-short-month-year",longMonthDayYear:"long-month-day-year",shortDateLongTime:"short-date-long-time",shortDateLELongTime:"short-date-le-long-time",shortDateShortTime:"short-date-short-time",shortDateLEShortTime:"short-date-le-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLongTime24:"short-date-long-time-24",
shortDateLELongTime24:"short-date-le-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year"}),d=f({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"}),c=a.createSubclass({properties:{actions:{type:m.ofType(e)},content:{value:null,json:{read:{source:["description","popupElements","mediaInfos","showAttachments"]}}},expressionInfos:{value:null},fieldInfos:{value:null},overwriteActions:{value:!1},title:{value:""},relatedRecordsInfo:{value:null}},
declaredClass:"esri.PopupTemplate",actions:null,content:"",expressionInfos:null,fieldInfos:null,_fieldInfosReader:function(a){return this._readFieldInfos(a)},overwriteActions:!1,title:"",relatedRecordsInfo:null,_relatedRecordsInfoReader:function(a){return a?h.clone(a):a},_dateFormatKebabDict:n,clone:function(){var a=this.actions;a&&(a=h.clone(a.toArray()));return new c({actions:a||[],content:Array.isArray(this.content)?h.clone(this.content):this.content,fieldInfos:this.fieldInfos?h.clone(this.fieldInfos):
null,overwriteActions:this.overwriteActions,relatedRecordsInfo:this.relatedRecordsInfo?h.clone(this.relatedRecordsInfo):null,title:this.title})},toJSON:function(){var a={showAttachments:!1,title:this.title};this.expressionInfos&&(a.expressionInfos=h.clone(this.expressionInfos));this.fieldInfos&&(a.fieldInfos=this._writeFieldInfos(h.clone(this.fieldInfos)));this.relatedRecordsInfo&&(a.relatedRecordsInfo=h.clone(this.relatedRecordsInfo));var c=this.content;"string"===typeof c?a.description=c:Array.isArray(c)&&
(a.popupElements=h.clone(c),a.popupElements.forEach(function(b){"attachments"!==b.type||a.showAttachments?"media"!==b.type||a.mediaInfos?"text"!==b.type||a.description?"fields"!==b.type||a.fieldInfos||(b.fieldInfos&&(a.fieldInfos=this._writeFieldInfos(h.clone(b.fieldInfos))),delete b.fieldInfos):(b.text&&(a.description=b.text),delete b.text):(b.mediaInfos&&(a.mediaInfos=h.clone(b.mediaInfos),a.mediaInfos.forEach(function(a){a.type=d.toJSON(a.type)})),delete b.mediaInfos):a.showAttachments=!0;return b}.bind(this)));
return a},_contentReader:function(a,c){a=c.description;var b=[],d=c.popupElements;d&&d.length?b=d.map(function(a){"text"!==a.type||a.text?"media"===a.type&&(a.mediaInfos||c.mediaInfos)&&(a.mediaInfos||(a.mediaInfos=c.mediaInfos),a.mediaInfos=this._readMediaInfos(a.mediaInfos)):a.text=c.description;return a}.bind(this)):(c.description?b.push({type:"text",text:c.description}):b.push({type:"fields"}),c.mediaInfos&&c.mediaInfos.length&&b.push({type:"media",mediaInfos:this._readMediaInfos(c.mediaInfos)}),
c.showAttachments&&b.push({type:"attachments",displayType:"list"}));b.length&&(a=b);return a},_readFieldInfos:function(a){a&&a.forEach(function(a){var b=a.format&&a.format.dateFormat,c=a.stringFieldOption;b&&(a.format.dateFormat=n.fromJSON(b));c&&(a.stringFieldOption=l.fromJSON(c))});return a},_writeFieldInfos:function(a){a.forEach(function(a){var b=a.format&&a.format.dateFormat,c=a.stringFieldOption;b&&(a.format.dateFormat=n.toJSON(b));c&&(a.stringFieldOption=l.toJSON(c));a.format||delete a.format});
return a},_readMediaInfos:function(a){a.forEach(function(a){a.type=d.fromJSON(a.type)});return a}});return c})},"esri/support/Action":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Identifiable ../core/accessorSupport/decorators".split(" "),function(a,f,m,h,e,l,n){a=d=function(a){function b(b){b=a.call(this)||this;b.className="";b.temporary=!1;b.image="";b.id="";b.title="";b.visible=!0;return b}m(b,a);b.prototype.clone=
function(){return new d({className:this.className,image:this.image,id:this.id,title:this.title,visible:this.visible})};return b}(n.declared(e,l));h([n.property()],a.prototype,"className",void 0);h([n.property()],a.prototype,"temporary",void 0);h([n.property()],a.prototype,"image",void 0);h([n.property()],a.prototype,"id",void 0);h([n.property()],a.prototype,"title",void 0);h([n.property()],a.prototype,"visible",void 0);a=d=h([n.subclass("esri.support.Action")],a);var d;return a})},"esri/symbols/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/Warning ../Symbol3D ../SimpleLineSymbol ../SimpleMarkerSymbol ../PictureMarkerSymbol ../PictureFillSymbol ../SimpleFillSymbol ../TextSymbol ../PointSymbol3D ../LineSymbol3D ../PolygonSymbol3D ../MeshSymbol3D ../LabelSymbol3D ../WebStyleSymbol ../callouts/LineCallout3D ./symbolConversion".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t,p,v,g){Object.defineProperty(f,"__esModule",{value:!0});var r={esriSMS:n,esriPMS:d,esriTS:k,esriSLS:l,esriSFS:b,esriPFS:c,PointSymbol3D:q,LineSymbol3D:u,PolygonSymbol3D:x,MeshSymbol3D:w,LabelSymbol3D:t,styleSymbolReference:p};f.read=function(a,b,c){if(b=a?r[a.type]||null:null)return b=new b,b.read(a,c),b;c&&c.messages&&a&&c.messages.push(new h("symbol:unsupported","Symbols of type '"+(a.type||"unknown")+"' are not supported",{definition:a,context:c}));return null};
f.write=function(a,b,c){if(!a)return null;if(!c||"web-scene"!==c.origin||a.isInstanceOf(e)||a.isInstanceOf(p))return a.write(b,c);var d=g.to3D(a);if(d.symbol)return d.symbol.write(b,c);c.messages&&c.messages.push(new m("symbol:unsupported","Symbols of type '"+a.declaredClass+"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView",{symbol:a,context:c,error:d.error}));return null};f.fromJSON=function(a,b){var c=a?r[a.type]||null:null;return c?c.fromJSON(a,
b):null};f.readCallout3D=function(a,b){if(!a||!a.type)return null;var c=null;switch(a.type){case "line":c=new v}c&&c.read(a,b);return c}})},"esri/symbols/Symbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Logger ../core/collectionUtils ../core/Warning ../core/urlUtils ./Symbol ./Symbol3DLayer ./IconSymbol3DLayer ./ObjectSymbol3DLayer ./LineSymbol3DLayer ./PathSymbol3DLayer ./FillSymbol3DLayer ./ExtrudeSymbol3DLayer ./TextSymbol3DLayer ./support/Thumbnail ./support/StyleOrigin ../portal/Portal ../core/accessorSupport/decorators".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t,p,v,g,r,z,y){var A={icon:q,object:u,line:x,path:w,fill:t,extrude:p,text:v},F=e.ofType(k),B=l.getLogger("esri.symbols.Symbol3D");a=function(a){function b(b){b=a.call(this)||this;b.styleOrigin=null;b.thumbnail=null;b.type=null;b._set("symbolLayers",b._createSymbolLayersCollection());return b}m(b,a);Object.defineProperty(b.prototype,"symbolLayers",{set:function(a){var b=this._get("symbolLayers");b?(b.removeAll(),b.addMany(a)):(b=this._createSymbolLayersCollection(a),
this._set("symbolLayers",b))},enumerable:!0,configurable:!0});b.prototype.readSymbolLayers=function(a,b,c){b=this._createSymbolLayersCollection();for(var g=0;g<a.length;g++){var e=a[g],f=k.typeJSONDictionary.read(e.type),h=A[f];h?(e=new h,e.read(a[g],c),b.add(e)):(B.warn("Unknown symbol layer type: "+f),c&&c.messages&&c.messages.push(new d("symbol-layer:unsupported","Symbol layers of type '"+(f||"unknown")+"' are not supported",{definition:e,context:c})))}return b};b.prototype.readStyleOrigin=function(a,
b,g){if(a.styleUrl&&a.name)return b=c.read(a.styleUrl,g),new r({styleUrl:b,name:a.name});if(a.styleName&&a.name)return new r({portal:g&&g.portal||z.getDefault(),styleName:a.styleName,name:a.name});g&&g.messages&&g.messages.push(new d("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:g,definition:a}))};b.prototype.writeStyleOrigin=function(a,b,g,e){a.styleUrl&&a.name?(g=c.write(a.styleUrl,e),b.styleOrigin={styleUrl:g,name:a.name}):
a.styleName&&a.name&&(a.portal&&e&&e.portal&&!c.hasSamePortal(a.portal.restUrl,e.portal.restUrl)?e&&e.messages&&e.messages.push(new d("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):b.styleOrigin={styleName:a.styleName,name:a.name})};b.prototype.normalizeCtorArgs=function(a){return a instanceof k?{symbolLayers:this._createSymbolLayersCollection([a])}:Array.isArray(a)?{symbolLayers:this._createSymbolLayersCollection(a)}:
a};b.prototype._createSymbolLayersCollection=function(a){var b=this;a=new F(a);a.on("before-add",function(a){return b._onSymbolLayersBeforeAdd(a)});return a};b.prototype._onSymbolLayersBeforeAdd=function(a){0>this._allowedLayerTypes.indexOf(a.item.type)&&(B.error("Symbol layer of type '"+a.item.type+"' is not allowed for symbol of type '"+this.type+"'"),a.preventDefault())};return b}(y.declared(b));h([y.property({json:{write:!1}})],a.prototype,"color",void 0);h([y.property({type:F,json:{write:!0}}),
y.cast(n.castForReferenceSetter)],a.prototype,"symbolLayers",null);h([y.reader("symbolLayers")],a.prototype,"readSymbolLayers",null);h([y.property({type:r})],a.prototype,"styleOrigin",void 0);h([y.reader("styleOrigin")],a.prototype,"readStyleOrigin",null);h([y.writer("styleOrigin")],a.prototype,"writeStyleOrigin",null);h([y.property({type:g.default,json:{read:!1}})],a.prototype,"thumbnail",void 0);h([y.property({type:String,readOnly:!0,json:{read:!1}})],a.prototype,"type",void 0);return a=h([y.subclass("esri.symbols.Symbol3D")],
a)})},"esri/symbols/Symbol":function(){define(["../core/lang","../core/kebabDictionary","../core/JSONSupport","../Color"],function(a,f,m,h){var e=f({esriSMS:"simple-marker-symbol",esriPMS:"picture-marker-symbol",esriSLS:"simple-line-symbol",esriSFS:"simple-fill-symbol",esriPFS:"picture-fill-symbol",esriTS:"text-symbol",esriSHD:"shield-label-symbol",PointSymbol3D:"point-symbol-3d",LineSymbol3D:"line-symbol-3d",PolygonSymbol3D:"polygon-symbol-3d",MeshSymbol3D:"mesh-symbol-3d",LabelSymbol3D:"label-symbol-3d"}),
l=0;return m.createSubclass({declaredClass:"esri.symbols.Symbol",constructor:function(){this.id="sym"+l++},properties:{type:{type:String,value:null,json:{read:e.fromJSON,write:{ignoreOrigin:!0,writer:function(a,d){d.type=e.toJSON(this.type)}}}},color:{type:h,value:new h([0,0,0,1]),json:{read:function(e){return e&&a.isDefined(e[0])?[e[0],e[1],e[2],e[3]/255]:e},write:!0}}}})})},"esri/Color":function(){define(["./core/declare","dojo/colors"],function(a,f){var m=a([f],{declaredClass:"esri.Color",toJSON:function(){return[this.r,
this.g,this.b,1<this.a?this.a:Math.round(255*this.a)]},clone:function(){return new m(this.toRgba())}});m.toJSON=function(a){return a&&[a.r,a.g,a.b,1<a.a?a.a:Math.round(255*a.a)]};m.fromJSON=function(a){return a&&new m([a[0],a[1],a[2],a[3]/255])};m.toUnitRGB=function(a){return[a.r/255,a.g/255,a.b/255]};m.toUnitRGBA=function(a){return[a.r/255,a.g/255,a.b/255,null!=a.a?a.a:1]};var h="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(a=0;a<h.length;a++)m[h[a]]=f[h[a]];m.named.rebeccapurple=
[102,51,153];return m})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(a,f,m,h){var e={};f.setObject("dojo.colors",e);var l=function(a,c,b){0>b&&++b;1<b&&--b;var d=6*b;return 1>d?a+(c-a)*d:1>2*b?c:2>3*b?a+(c-a)*(2/3-b)*6:a};a.colorFromRgb=m.fromRgb=function(a,c){var b=a.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(b){a=b[2].split(/\s*,\s*/);var d=a.length,b=b[1];if("rgb"==b&&3==d||"rgba"==b&&4==d)return b=a[0],"%"==b.charAt(b.length-
1)?(b=h.map(a,function(a){return 2.56*parseFloat(a)}),4==d&&(b[3]=a[3]),m.fromArray(b,c)):m.fromArray(a,c);if("hsl"==b&&3==d||"hsla"==b&&4==d){var b=(parseFloat(a[0])%360+360)%360/360,e=parseFloat(a[1])/100,f=parseFloat(a[2])/100,e=.5>=f?f*(e+1):f+e-f*e,f=2*f-e,b=[256*l(f,e,b+1/3),256*l(f,e,b),256*l(f,e,b-1/3),1];4==d&&(b[3]=a[3]);return m.fromArray(b,c)}}return null};var n=function(a,c,b){a=Number(a);return isNaN(a)?b:a<c?c:a>b?b:a};m.prototype.sanitize=function(){this.r=Math.round(n(this.r,0,255));
this.g=Math.round(n(this.g,0,255));this.b=Math.round(n(this.b,0,255));this.a=n(this.a,0,1);return this};e.makeGrey=m.makeGrey=function(a,c){return m.fromArray([a,a,a,c])};f.mixin(m.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,
80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,
206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,
240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,
0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,
232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,
250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return m})},"esri/symbols/Symbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/kebabDictionary ./support/Symbol3DMaterial ./support/ElevationInfo ../core/accessorSupport/decorators".split(" "),
function(a,f,m,h,e,l,n,d,c){a=l({Icon:"icon",Object:"object",Line:"line",Path:"path",Fill:"fill",Extrude:"extrude",Text:"text"});e=function(a){function b(b){b=a.call(this)||this;b.enabled=!0;b.material=null;b.type=null;return b}m(b,a);b.prototype.writeEnabled=function(a,b){a||(b.enabled=a)};return b}(c.declared(e));h([c.property()],e.prototype,"enabled",void 0);h([c.writer("enabled")],e.prototype,"writeEnabled",null);h([c.property({type:d,json:{read:!1,write:!1}})],e.prototype,"elevationInfo",void 0);
h([c.property({type:n.default,json:{write:!0}})],e.prototype,"material",void 0);h([c.property({type:String,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:a.write}}})],e.prototype,"type",void 0);e=h([c.subclass("esri.symbols.Symbol3DLayer")],e);(e||(e={})).typeJSONDictionary=a;return e})},"esri/symbols/support/Symbol3DMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ./materialUtils ../../core/accessorSupport/decorators".split(" "),
function(a,f,m,h,e,l,n){Object.defineProperty(f,"__esModule",{value:!0});a=d=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}m(b,a);b.prototype.clone=function(){return new d({color:this.color?this.color.clone():null,colorMixMode:this.colorMixMode})};return b}(n.declared(e));h([n.property(l.colorAndTransparencyProperty)],a.prototype,"color",void 0);h([n.property({type:String,json:{read:!0,write:!0}})],a.prototype,"colorMixMode",void 0);a=d=h([n.subclass("esri.symbols.support.Symbol3DMaterial")],
a);f.Symbol3DMaterial=a;f.default=a;var d})},"esri/symbols/support/materialUtils":function(){define(["require","exports","../../Color","../../core/screenUtils"],function(a,f,m,h){function e(a){return Math.max(0,Math.min(Math.round(100*(1-a)),100))}function l(a){return Math.max(0,Math.min(1-a/100,1))}function n(a,c){a=null!=c.transparency?l(c.transparency):1;if((c=c.color)&&Array.isArray(c))return new m([c[0]||0,c[1]||0,c[2]||0,a])}function d(a,d){d.color=[c(a.r),c(a.g),c(a.b)];a=e(a.a);0!==a&&(d.transparency=
a)}function c(a){return Math.max(0,Math.min(Math.round(a),255))}Object.defineProperty(f,"__esModule",{value:!0});f.opacityToTransparency=e;f.transparencyToOpacity=l;f.readColorAndTransparency=n;f.writeColorAndTransparency=d;f.colorAndTransparencyProperty={type:m,json:{read:{source:["color","transparency"],reader:n},write:{writer:d}}};f.screenSizeProperty={type:Number,cast:h.toPt,json:{write:!0}}})},"esri/core/screenUtils":function(){define(["require","exports"],function(a,f){function m(a){return a?
72*a/f.DPI:0}Object.defineProperty(f,"__esModule",{value:!0});var h=/^(\d+(\.\d+)?)\s*((px)|(pt))?$/i;f.DPI=96;f.pt2px=function(a){return a?a/72*f.DPI:0};f.px2pt=m;f.toPt=function(a){if("string"===typeof a){if(h.test(a)){a=a.match(h);var e=Number(a[1]);return"px"===(a[3]&&a[3].toLowerCase())?m(e):e}console.warn("screenUtils.toPt: input not recognized!");return null}return a}})},"esri/symbols/support/ElevationInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/JSONSupport ../../core/kebabDictionary".split(" "),
function(a,f,m,h,e,l,n){a=n({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"});f=d=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}m(b,a);b.prototype.clone=function(){return new d({value:this.value})};return b}(e.declared(l));h([e.property({type:Number,json:{write:!0}})],f.prototype,"value",void 0);f=d=h([e.subclass("esri.layers.support.FeatureExpression")],f);l=c=function(a){function b(){return null!==
a&&a.apply(this,arguments)||this}m(b,a);b.prototype.write=function(a,b){return this.offset||this.mode||this.featureExpression?this.inherited(arguments):null};b.prototype.clone=function(){return new c({mode:this.mode,offset:this.offset,featureExpression:this.featureExpression?this.featureExpression.clone():void 0})};return b}(e.declared(l));h([e.property({type:f,json:{write:!0}})],l.prototype,"featureExpression",void 0);h([e.property({type:String,json:{read:a.read,write:a.write}})],l.prototype,"mode",
void 0);h([e.property({type:Number,json:{write:!0}})],l.prototype,"offset",void 0);l=c=h([e.subclass("esri.layers.support.ElevationInfo")],l);var d,c;return l})},"esri/symbols/IconSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ../core/urlUtils ../core/accessorSupport/decorators ./Symbol3DLayer ./support/Symbol3DOutline ./support/Symbol3DMaterial ./support/Symbol3DResource ./support/materialUtils".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q){a=e({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right"},{ignoreUnknown:!0});k=u=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}m(b,a);b.prototype.readHref=function(a,b,c){return a?l.read(a,c):b.dataURI};b.prototype.writeHref=function(a,b,c,d){a&&(l.isDataProtocol(a)?b.dataURI=a:b.href=l.write(a,d))};b.prototype.clone=function(){return new u({href:this.href,
primitive:this.primitive})};return b}(n.declared(k.default));h([n.property({json:{write:!0,read:{source:["href","dataURI"]}}})],k.prototype,"href",void 0);h([n.reader("href")],k.prototype,"readHref",null);h([n.writer("href")],k.prototype,"writeHref",null);k=u=h([n.subclass("esri.symbols.support.IconSymbol3DLayerResource")],k);d=x=function(a){function b(b){b=a.call(this)||this;b.material=null;b.resource=null;b.type="icon";b.size=void 0;b.anchor=void 0;b.outline=void 0;return b}m(b,a);b.prototype.clone=
function(){return new x({anchor:this.anchor,enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone(),resource:this.resource&&this.resource.clone(),size:this.size})};return b}(n.declared(d));h([n.property({type:b.default})],d.prototype,"material",void 0);h([n.property({type:k,json:{write:!0}})],d.prototype,"resource",void 0);h([n.property()],d.prototype,"type",void 0);h([n.property(q.screenSizeProperty)],
d.prototype,"size",void 0);h([n.property({type:String,json:{read:a.read,write:a.write}})],d.prototype,"anchor",void 0);h([n.property({type:c.default,json:{write:!0}})],d.prototype,"outline",void 0);d=x=h([n.subclass("esri.symbols.IconSymbol3DLayer")],d);var u,x;return d})},"esri/symbols/support/Symbol3DOutline":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../Color ./materialUtils ../../core/accessorSupport/decorators".split(" "),
function(a,f,m,h,e,l,n,d){Object.defineProperty(f,"__esModule",{value:!0});a=c=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.color=new l([0,0,0,1]);b.size=1;return b}m(b,a);b.prototype.clone=function(){return new c({color:this.color?this.color.clone():null,size:this.size})};return b}(d.declared(e));h([d.property(n.colorAndTransparencyProperty)],a.prototype,"color",void 0);h([d.property(n.screenSizeProperty)],a.prototype,"size",void 0);a=c=h([d.subclass("esri.symbols.support.Symbol3DOutline")],
a);f.Symbol3DOutline=a;f.default=a;var c})},"esri/symbols/support/Symbol3DResource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/urlUtils ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators".split(" "),function(a,f,m,h,e,l,n,d){Object.defineProperty(f,"__esModule",{value:!0});var c=n({invertedCone:"inverted-cone"});a=b=function(a){function d(){return null!==a&&a.apply(this,arguments)||
this}m(d,a);d.prototype.readHref=function(a,b,c){return e.read(a,c)};d.prototype.writeHref=function(a,b,c,d){a&&(b.href=e.write(a,d))};d.prototype.readPrimitive=function(a){return c.fromJSON(a)};d.prototype.writePrimitive=function(a,b){b.primitive=c.toJSON(a)};d.prototype.clone=function(){return new b({href:this.href,primitive:this.primitive})};return d}(d.declared(l));h([d.property({json:{write:!0}})],a.prototype,"href",void 0);h([d.reader("href")],a.prototype,"readHref",null);h([d.writer("href")],
a.prototype,"writeHref",null);h([d.property({json:{write:!0}})],a.prototype,"primitive",void 0);h([d.reader("primitive")],a.prototype,"readPrimitive",null);h([d.writer("primitive")],a.prototype,"writePrimitive",null);a=b=h([d.subclass("esri.symbols.support.Symbol3DResource")],a);f.Symbol3DResource=a;f.default=a;var b})},"esri/symbols/ObjectSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ./Symbol3DLayer ./support/Symbol3DMaterial ./support/Symbol3DResource ../core/accessorSupport/decorators".split(" "),
function(a,f,m,h,e,l,n,d,c){a=e({center:"center",bottom:"bottom",origin:"origin"},{ignoreUnknown:!0});l=b=function(a){function c(b){b=a.call(this)||this;b.material=null;b.resource=null;b.type="object";b.width=void 0;b.height=void 0;b.depth=void 0;b.anchor=void 0;b.heading=void 0;b.tilt=void 0;b.roll=void 0;return b}m(c,a);c.prototype.clone=function(){return new b({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,depth:this.depth,enabled:this.enabled,elevationInfo:this.elevationInfo&&
this.elevationInfo.clone(),height:this.height,material:this.material&&this.material.clone(),resource:this.resource&&this.resource.clone(),width:this.width})};Object.defineProperty(c.prototype,"isPrimitive",{get:function(){return!this.resource||"string"!==typeof this.resource.href},enumerable:!0,configurable:!0});return c}(c.declared(l));h([c.property({type:n.default})],l.prototype,"material",void 0);h([c.property({type:d.default,json:{write:!0}})],l.prototype,"resource",void 0);h([c.property()],l.prototype,
"type",void 0);h([c.property({json:{write:!0}})],l.prototype,"width",void 0);h([c.property({json:{write:!0}})],l.prototype,"height",void 0);h([c.property({json:{write:!0}})],l.prototype,"depth",void 0);h([c.property({type:String,json:{read:a.read,write:a.write}})],l.prototype,"anchor",void 0);h([c.property({json:{write:!0}})],l.prototype,"heading",void 0);h([c.property({json:{write:!0}})],l.prototype,"tilt",void 0);h([c.property({json:{write:!0}})],l.prototype,"roll",void 0);h([c.property({readOnly:!0,
dependsOn:["resource","resource.href"]})],l.prototype,"isPrimitive",null);l=b=h([c.subclass("esri.symbols.ObjectSymbol3DLayer")],l);var b;return l})},"esri/symbols/LineSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Symbol3DLayer ./support/materialUtils ../core/accessorSupport/decorators".split(" "),function(a,f,m,h,e,l,n){a=d=function(a){function b(b){b=a.call(this)||this;b.material=null;b.type="line";b.size=1;return b}m(b,
a);b.prototype.clone=function(){return new d({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})};return b}(n.declared(e));h([n.property()],a.prototype,"material",void 0);h([n.property()],a.prototype,"type",void 0);h([n.property(l.screenSizeProperty)],a.prototype,"size",void 0);a=d=h([n.subclass("esri.symbols.LineSymbol3DLayer")],a);var d;return a})},"esri/symbols/PathSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Symbol3DLayer ../core/accessorSupport/decorators".split(" "),
function(a,f,m,h,e,l){a=n=function(a){function c(b){b=a.call(this)||this;b.material=null;b.type="path";b.size=void 0;return b}m(c,a);c.prototype.readSize=function(a,c){return a||c.width||0};c.prototype.clone=function(){return new n({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})};return c}(l.declared(e));h([l.property()],a.prototype,"material",void 0);h([l.property()],a.prototype,"type",void 0);h([l.property({json:{write:!0}})],
a.prototype,"size",void 0);h([l.reader("size",["size","width"])],a.prototype,"readSize",null);a=n=h([l.subclass("esri.symbols.PathSymbol3DLayer")],a);var n;return a})},"esri/symbols/FillSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Symbol3DLayer ./support/Symbol3DOutline ../core/accessorSupport/decorators".split(" "),function(a,f,m,h,e,l,n){a=d=function(a){function b(b){b=a.call(this)||this;b.type="fill";b.material=null;
b.outline=null;return b}m(b,a);b.prototype.clone=function(){return new d({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone()})};return b}(n.declared(e));h([n.property()],a.prototype,"type",void 0);h([n.property()],a.prototype,"material",void 0);h([n.property({type:l.default,json:{write:!0}})],a.prototype,"outline",void 0);a=d=h([n.subclass("esri.symbols.FillSymbol3DLayer")],a);var d;
return a})},"esri/symbols/ExtrudeSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Symbol3DLayer ../core/accessorSupport/decorators".split(" "),function(a,f,m,h,e,l){a=n=function(a){function c(b){b=a.call(this)||this;b.type="extrude";b.size=void 0;b.material=null;return b}m(c,a);c.prototype.clone=function(){return new n({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&
this.material.clone(),size:this.size})};return c}(l.declared(e));h([l.property()],a.prototype,"type",void 0);h([l.property({json:{write:!0}})],a.prototype,"size",void 0);h([l.property()],a.prototype,"material",void 0);a=n=h([l.subclass("esri.symbols.ExtrudeSymbol3DLayer")],a);var n;return a})},"esri/symbols/TextSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ./Symbol3DLayer ./support/Symbol3DHalo ./support/materialUtils ../core/accessorSupport/decorators".split(" "),
function(a,f,m,h,e,l,n,d,c){a=b=function(a){function c(b){b=a.call(this)||this;b.font=null;b.halo=null;b.material=null;b.size=void 0;b.text=void 0;b.type="text";return b}m(c,a);c.prototype.writeFont=function(a,b){a&&(b.font=e.clone(a))};c.prototype.clone=function(){return new b({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),font:this.font&&e.clone(this.font),halo:this.halo&&e.clone(this.halo),material:this.material&&this.material.clone(),size:this.size,text:this.text})};
return c}(c.declared(l));h([c.property()],a.prototype,"font",void 0);h([c.writer("font")],a.prototype,"writeFont",null);h([c.property({type:n.default,json:{write:!0}})],a.prototype,"halo",void 0);h([c.property()],a.prototype,"material",void 0);h([c.property(d.screenSizeProperty)],a.prototype,"size",void 0);h([c.property({json:{write:!0}})],a.prototype,"text",void 0);h([c.property()],a.prototype,"type",void 0);a=b=h([c.subclass("esri.symbols.TextSymbol3DLayer")],a);var b;return a})},"esri/symbols/support/Symbol3DHalo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ./materialUtils ../../core/accessorSupport/decorators".split(" "),
function(a,f,m,h,e,l,n,d,c){Object.defineProperty(f,"__esModule",{value:!0});a=b=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.color=new e([0,0,0,1]);b.size=0;return b}m(c,a);c.prototype.clone=function(){return new b({color:n.clone(this.color),size:this.size})};return c}(c.declared(l));h([c.property(d.colorAndTransparencyProperty)],a.prototype,"color",void 0);h([c.property(d.screenSizeProperty)],a.prototype,"size",void 0);a=b=h([c.subclass("esri.symbols.support.Symbol3DHalo")],
a);f.Symbol3DHalo=a;f.default=a;var b})},"esri/symbols/support/Thumbnail":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor".split(" "),function(a,f,m,h,e,l){Object.defineProperty(f,"__esModule",{value:!0});a=n=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}m(c,a);c.prototype.clone=function(){return new n({url:this.url})};return c}(e.declared(l));h([e.property({type:String})],
a.prototype,"url",void 0);a=n=h([e.subclass("esri.symbols.support.Thumbnail")],a);f.Thumbnail=a;f.default=a;var n})},"esri/symbols/support/StyleOrigin":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../portal/Portal".split(" "),function(a,f,m,h,e,l,n){a=d=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.portal=null;return b}m(b,a);b.prototype.clone=
function(){return new d({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};return b}(e.declared(l));h([e.property({type:String})],a.prototype,"name",void 0);h([e.property({type:String})],a.prototype,"styleUrl",void 0);h([e.property({type:String})],a.prototype,"styleName",void 0);h([e.property({type:n})],a.prototype,"portal",void 0);a=d=h([e.subclass("esri.symbols.support.StyleOrigin")],a);var d;return a})},"esri/symbols/SimpleLineSymbol":function(){define(["../core/declare",
"dojo/_base/lang","../core/lang","../core/screenUtils","./LineSymbol"],function(a,f,m,h,e){var l={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dash-dot",STYLE_DASHDOTDOT:"long-dash-dot-dot",STYLE_NULL:"none",STYLE_SHORTDASH:"short-dash",STYLE_SHORTDOT:"short-dot",STYLE_SHORTDASHDOT:"short-dash-dot",STYLE_SHORTDASHDOTDOT:"short-dash-dot-dot",STYLE_LONGDASH:"long-dash",STYLE_LONGDASHDOT:"long-dash-dot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",
JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},n={color:[0,0,0,1],style:l.STYLE_SOLID,width:.75,cap:l.CAP_BUTT,join:l.JOIN_MITER,miterLimit:7.5},d=a(e,{declaredClass:"esri.symbols.SimpleLineSymbol",properties:{type:"simple-line-symbol",style:{value:l.STYLE_SOLID,json:{read:function(a,b){return m.valueOf(this._jsonStyles,a)||void 0},write:function(a,b){b.style=this._jsonStyles[a]}}},cap:{value:l.CAP_BUTT,json:{read:!1,write:!1}},join:{value:l.JOIN_MITER,json:{read:!1,write:!1}},miterLimit:{value:7.5,cast:h.toPt,
json:{read:!1,write:!1}}},_jsonStyles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot","dash-dot":"esriSLSDashDot","long-dash-dot-dot":"esriSLSDashDotDot",none:"esriSLSNull","inside-frame":"esriSLSInsideFrame","short-dash":"esriSLSShortDash","short-dot":"esriSLSShortDot","short-dash-dot":"esriSLSShortDashDot","short-dash-dot-dot":"esriSLSShortDashDotDot","long-dash":"esriSLSLongDash","long-dash-dot":"esriSLSLongDashDot"},getDefaults:function(){return f.mixin(this.inherited(arguments),n)},
normalizeCtorArgs:function(a,b,d,e,f,l){if(a&&"string"!==typeof a)return a;var c={};null!=a&&(c.style=a);null!=b&&(c.color=b);null!=d&&(c.width=h.toPt(d));null!=e&&(c.cap=e);null!=f&&(c.join=f);null!=l&&(c.miterLimit=h.toPt(l));return c},clone:function(){return new d({color:m.clone(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit})}});f.mixin(d,l);d.defaultProps=n;return d})},"esri/symbols/LineSymbol":function(){define(["../core/declare","../core/screenUtils",
"./Symbol"],function(a,f,m){return a(m,{declaredClass:"esri.symbols.LineSymbol",properties:{color:{},type:"simple-line-symbol",width:{value:.75,cast:f.toPt,json:{write:!0}}}})})},"esri/symbols/SimpleMarkerSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(a,f,m,h,e,l){var n={style:"circle",color:[255,255,255,.25],outline:new l,size:12,angle:0,xoffset:0,yoffset:0},d=a(e,{declaredClass:"esri.symbols.SimpleMarkerSymbol",
properties:{color:{json:{write:function(a,b){a&&"x"!==this.style&&"cross"!==this.style&&(b.color=a.toJSON())}}},type:"simple-marker-symbol",size:{value:12},style:{type:String,value:"circle",json:{read:function(a){return m.valueOf(this._styles,a)},write:function(a,b){b.style=this._styles[a]}}},path:{type:String,value:null,set:function(a){this.style="path";this._set("path",a)},json:{write:!0}},outline:{type:l,json:{write:!0}}},_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",
x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},getDefaults:function(){return f.mixin(this.inherited(arguments),n)},normalizeCtorArgs:function(a,b,d,e){if(a&&"string"!==typeof a)return a;var c={};a&&(c.style=a);null!=b&&(c.size=h.toPt(b));d&&(c.outline=d);e&&(c.color=e);return c},clone:function(){return new d({angle:this.angle,color:m.clone(this.color),outline:this.outline&&this.outline.clone(),size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})},_setDim:function(a,
b,d){this._targetWidth=h.toPt(a);this._targetHeight=h.toPt(b);this._spikeSize=h.toPt(d)}});f.mixin(d,{STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"});d.defaultProps=n;return d})},"esri/symbols/MarkerSymbol":function(){define(["../core/declare","../core/screenUtils","./Symbol"],function(a,f,m){return a(m,{declaredClass:"esri.symbols.MarkerSymbol",properties:{angle:{value:0,json:{read:function(a){return a&&
-1*a},write:function(a,e){e.angle=a&&-1*a}}},type:{},xoffset:{value:0,cast:f.toPt,json:{write:!0}},yoffset:{value:0,cast:f.toPt,json:{write:!0}},size:{value:9,cast:function(a){return"auto"===a?a:f.toPt(a)},json:{write:!0}}}})})},"esri/symbols/PictureMarkerSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ./MarkerSymbol ./support/urlUtils".split(" "),function(a,f,m,h,e,l){var n={width:12,height:12,angle:0,xoffset:0,yoffset:0},d=a(e,{declaredClass:"esri.symbols.PictureMarkerSymbol",
properties:{color:{json:{write:!1}},type:"picture-marker-symbol",url:l.urlPropertyDefinition,source:l.sourcePropertyDefinition,height:{json:{read:{source:["height","size"],reader:function(a,b){return b.size||a}},write:!0},cast:h.toPt},width:{json:{read:{source:["width","size"],reader:function(a,b){return b.size||a}},write:!0},cast:h.toPt},size:{json:{write:!1}}},getDefaults:function(){return f.mixin(this.inherited(arguments),n)},normalizeCtorArgs:function(a,b,d){if(a&&"string"!==typeof a&&null==a.imageData)return a;
var c={};a&&(c.url=a);null!=b&&(c.width=h.toPt(b));null!=d&&(c.height=h.toPt(d));return c},clone:function(){var a=new d({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});a._set("source",m.clone(this.source));return a}});d.defaultProps=n;return d})},"esri/symbols/support/urlUtils":function(){define(["require","exports","../../core/urlUtils"],function(a,f,m){function h(a,c,b){return c.imageData?m.makeData({mediaType:c.contentType||"image/png",
isBase64:!0,data:c.imageData}):e(c.url,b)}function e(a,c){return!c||"service"!==c.origin&&"portal-item"!==c.origin||!c.layer||"feature"!==c.layer.type&&"stream"!==c.layer.type||m.isAbsolute(a)||!c.layer.parsedUrl?m.read(a,c):m.join(c.layer.parsedUrl.path,"images",a)}function l(a,c,b,e){m.isDataProtocol(a)?(a=m.dataComponents(a),c.contentType=a.mediaType,c.imageData=a.data,b&&b.imageData===c.imageData&&b.url&&(c.url=n(b.url,e))):c.url=n(a,e)}function n(a,c){return m.write(a,c)}Object.defineProperty(f,
"__esModule",{value:!0});f.readImageDataOrUrl=h;f.read=e;f.writeImageDataAndUrl=l;f.write=n;f.urlPropertyDefinition={json:{read:{source:["imageData","url"],reader:h},write:{writer:function(a,c,b,e){l(a,c,this.source,e)}}}};f.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader:function(a,c,b){a={};c.imageData&&(a.imageData=c.imageData);c.contentType&&(a.contentType=c.contentType);c.url&&(a.url=e(c.url,b));return a}}}}})},"esri/symbols/PictureFillSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ./FillSymbol ./support/urlUtils".split(" "),
function(a,f,m,h,e,l){var n={xscale:1,yscale:1,xoffset:0,yoffset:0,width:12,height:12},d=a(e,{declaredClass:"esri.symbols.PictureFillSymbol",properties:{type:"picture-fill-symbol",url:l.urlPropertyDefinition,xscale:{value:1,json:{write:!0}},yscale:{value:1,json:{write:!0}},width:{value:12,cast:h.toPt,json:{write:!0}},height:{value:12,cast:h.toPt,json:{write:!0}},xoffset:{value:0,cast:h.toPt,json:{write:!0}},yoffset:{value:0,cast:h.toPt,json:{write:!0}},source:l.sourcePropertyDefinition},getDefaults:function(){return f.mixin(this.inherited(arguments),
n)},normalizeCtorArgs:function(a,b,d,e){if(a&&"string"!==typeof a&&null==a.imageData)return a;var c={};a&&(c.url=a);b&&(c.outline=b);null!=d&&(c.width=h.toPt(d));null!=e&&(c.height=h.toPt(e));return c},clone:function(){var a=new d({color:m.clone(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});a._set("source",m.clone(this.source));return a}});d.defaultProps=n;return d})},
"esri/symbols/FillSymbol":function(){define(["../core/declare","./Symbol","./SimpleLineSymbol"],function(a,f,m){return a(f,{declaredClass:"esri.symbols.FillSymbol",properties:{outline:{type:m,json:{write:!0}},type:null}})})},"esri/symbols/SimpleFillSymbol":function(){define(["../core/declare","dojo/_base/lang","../core/lang","./FillSymbol","./SimpleLineSymbol"],function(a,f,m,h,e){var l={style:"solid",outline:new e,color:[0,0,0,.25]},n=a(h,{declaredClass:"esri.symbols.SimpleFillSymbol",properties:{color:{},
type:"simple-fill-symbol",style:{value:"solid",type:String,json:{read:function(a){return m.valueOf(this._styles,a)||void 0},write:function(a,c){c.style=this._styles[a]}}}},_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical","forward-diagonal":"esriSFSForwardDiagonal","backward-diagonal":"esriSFSBackwardDiagonal",cross:"esriSFSCross","diagonal-cross":"esriSFSDiagonalCross"},getDefaults:function(){return f.mixin(this.inherited(arguments),l)},normalizeCtorArgs:function(a,
c,b){if(a&&"string"!==typeof a)return a;var d={};a&&(d.style=a);c&&(d.outline=c);b&&(d.color=b);return d},clone:function(){return new n({color:m.clone(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}});f.mixin(n,{STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forward-diagonal",STYLE_BACKWARD_DIAGONAL:"backward-diagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonal-cross"});n.defaultProps=l;return n})},
"esri/symbols/TextSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ../Color ./Symbol ./Font".split(" "),function(a,f,m,h,e,l,n){var d={x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:{},angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},c=a(l,{declaredClass:"esri.symbols.TextSymbol",properties:{backgroundColor:{type:e,json:{write:!0}},borderLineColor:{type:e,json:{write:!0}},borderLineSize:{type:Number,json:{write:!0}},color:{},font:{type:n,
json:{write:!0}},horizontalAlignment:{value:"center",json:{write:!0}},kerning:{value:!0,json:{write:!0}},haloColor:{type:e,json:{write:!0}},haloSize:{type:Number,cast:h.toPt,json:{write:!0}},rightToLeft:{json:{write:!0}},rotated:{value:!1,json:{write:!0}},text:{type:String,json:{write:!0}},type:"text-symbol",verticalAlignment:{type:String,json:{write:!0}},xoffset:{value:0,type:Number,cast:h.toPt,json:{write:!0}},yoffset:{value:0,type:Number,cast:h.toPt,json:{write:!0}},angle:{type:Number,value:0,
json:{read:function(a){return a&&-1*a},write:function(a,c){c.angle=a&&-1*a}}},width:{json:{write:!0}}},getDefaults:function(){return f.mixin(this.inherited(arguments),d)},normalizeCtorArgs:function(a,c,d){if(a&&"string"!==typeof a)return a;var b={};a&&(b.text=a);c&&(b.font=c);d&&(b.color=d);return b},clone:function(){return new c({angle:this.angle,backgroundColor:m.clone(this.backgroundColor),borderLineColor:m.clone(this.borderLineColor),borderLineSize:this.borderLineSize,color:m.clone(this.color),
font:this.font&&this.font.clone(),haloColor:m.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}});f.mixin(c,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});
c.defaultProps=d;return c})},"esri/symbols/Font":function(){define(["dojo/_base/lang","../core/JSONSupport","../core/lang","../core/screenUtils"],function(a,f,m,h){var e={style:"normal",variant:"normal",weight:"normal",size:9,family:"serif",decoration:"none"},l=f.createSubclass({declaredClass:"esri.symbols.Font",properties:{decoration:{},family:{},size:{cast:h.toPt},style:{},variant:{},weight:{}},getDefaults:function(){return e},normalizeCtorArgs:function(a,d,c,b,e){if(a&&"string"!==typeof a)return a;
var f={};null!=a&&(f.size=h.toPt(a));null!=d&&(f.style=d);null!=c&&(f.variant=c);null!=b&&(f.weight=b);e&&(f.family=e);return f},toJSON:function(){return m.fixJson({size:this.size,style:this.style,variant:this.variant,decoration:this.decoration,weight:this.weight,family:this.family})},clone:function(){return new l({decoration:this.decoration,family:this.family,size:this.size,style:this.style,variant:this.variant,weight:this.weight})}});l.defaultProps=e;a.mixin(l,{STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",
STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});return l})},"esri/symbols/PointSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ./Symbol3D ./support/Symbol3DVerticalOffset ./callouts/calloutUtils ../core/accessorSupport/decorators".split(" "),function(a,f,m,h,e,l,n,d,c){a=b=function(a){function c(b){b=
a.call(this)||this;b.verticalOffset=null;b.callout=null;b.type="point-symbol-3d";return b}m(c,a);c.prototype.supportsCallout=function(){if(1!==(this.symbolLayers?this.symbolLayers.length:0))return!1;switch(this.symbolLayers.getItemAt(0).type){case "icon":case "text":case "object":return!0}return!1};c.prototype.hasVisibleCallout=function(){return d.hasVisibleCallout(this)};c.prototype.hasVisibleVerticalOffset=function(){return d.hasVisibleVerticalOffset(this)};c.prototype.clone=function(){return new b({verticalOffset:e.clone(this.verticalOffset),
callout:e.clone(this.callout),styleOrigin:e.clone(this.styleOrigin),symbolLayers:e.clone(this.symbolLayers),thumbnail:e.clone(this.thumbnail)})};return c}(c.declared(l));h([c.property({type:n.default,json:{write:!0}})],a.prototype,"verticalOffset",void 0);h([c.property(d.calloutProperty)],a.prototype,"callout",void 0);h([c.property()],a.prototype,"type",void 0);h([c.shared(["icon","object","text"])],a.prototype,"_allowedLayerTypes",void 0);a=b=h([c.subclass("esri.symbols.PointSymbol3D")],a);var b;
return a})},"esri/symbols/support/Symbol3DVerticalOffset":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./materialUtils".split(" "),function(a,f,m,h,e,l,n){Object.defineProperty(f,"__esModule",{value:!0});a=d=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.screenLength=0;b.minWorldLength=0;return b}m(b,a);b.prototype.writeMinWorldLength=function(a,
b,c){a&&(b[c]=a)};b.prototype.clone=function(){return new d({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})};return b}(l.declared(e));h([l.property(n.screenSizeProperty)],a.prototype,"screenLength",void 0);h([l.property({type:Number,json:{write:!0}})],a.prototype,"minWorldLength",void 0);h([l.writer("minWorldLength")],a.prototype,"writeMinWorldLength",null);h([l.property({type:Number,json:{write:!0}})],a.prototype,"maxWorldLength",void 0);a=
d=h([l.subclass("esri.symbols.support.Symbol3DVerticalOffset")],a);f.Symbol3DVerticalOffset=a;f.default=a;var d})},"esri/symbols/callouts/calloutUtils":function(){define("require exports ../../core/Logger ../../core/accessorSupport/ensureType ./Callout3D ./LineCallout3D".split(" "),function(a,f,m,h,e,l){function n(a){if(!a)return!1;a=a.verticalOffset;return!a||0>=a.screenLength||0>=a.maxWorldLength?!1:!0}function d(a,c){void 0===c&&(c=null);if(!h.requiresType(e,a))return a;switch(a.type){case "line":case null:case void 0:return h.ensureType(l,
a)}b.error("calloutUtils#cast","Trying to assign invalid value type to property of type esri/symbols/callouts/Callout3D");return c}function c(a,b,c){if(!a)return a;switch(a.type){case "line":return b=new l,b.read(a,c),b}}Object.defineProperty(f,"__esModule",{value:!0});var b=m.getLogger("esri.symbols.Callout3D");f.hasVisibleVerticalOffset=n;f.hasVisibleCallout=function(a){if(!a||!a.supportsCallout||!a.supportsCallout())return!1;var b=a.callout;return b&&b.visible?n(a)?!0:!1:!1};f.isCalloutSupport=
function(a){return"point-symbol-3d"===a.type||"label-symbol-3d"===a.type};f.cast=d;f.read=c;f.calloutProperty={type:e,cast:function(a){return d(a,this.callout)},json:{read:c,write:!0}}})},"esri/symbols/callouts/Callout3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/_base/lang ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(a,f,m,h,e,l,n){a=function(a){function c(b){b=a.call(this)||this;b.visible=
!0;return b}m(c,a);c.prototype.normalizeCtorArgs=function(a){a&&a.type&&(a=e.mixin({},a),delete a.type);return a};c.prototype.clone=function(){};return c}(n.declared(l));h([n.property({type:String,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],a.prototype,"type",void 0);h([n.property({readOnly:!0})],a.prototype,"visible",void 0);return a=h([n.subclass("esri.symbols.callouts.Callout3D")],a)})},"esri/symbols/callouts/LineCallout3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators ./Callout3D ../support/materialUtils ./LineCallout3DBorder".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k){a=q=function(a){function b(b){b=a.call(this)||this;b.type="line";b.color=new e([0,0,0,1]);b.size=n.px2pt(1);b.border=null;return b}m(b,a);Object.defineProperty(b.prototype,"visible",{get:function(){return 0<this.size&&0<this.color.a},enumerable:!0,configurable:!0});b.prototype.clone=function(){return new q({color:l.clone(this.color),size:this.size,border:l.clone(this.border)})};return b}(d.declared(c));h([d.property({type:String})],a.prototype,"type",void 0);h([d.property(b.colorAndTransparencyProperty)],
a.prototype,"color",void 0);h([d.property(b.screenSizeProperty)],a.prototype,"size",void 0);h([d.property({type:k.default,json:{write:!0}})],a.prototype,"border",void 0);h([d.property({dependsOn:["size","color"],readOnly:!0})],a.prototype,"visible",null);a=q=h([d.subclass("esri.symbols.callouts.LineCallout3D")],a);var q;return a})},"esri/symbols/callouts/LineCallout3DBorder":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../support/materialUtils".split(" "),
function(a,f,m,h,e,l,n,d,c){Object.defineProperty(f,"__esModule",{value:!0});a=b=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.color=new e("white");return b}m(c,a);c.prototype.clone=function(){return new b({color:n.clone(this.color)})};return c}(d.declared(l));h([d.property(c.colorAndTransparencyProperty)],a.prototype,"color",void 0);a=b=h([d.subclass("esri.symbols.support.LineCallout3DBorder")],a);f.LineCallout3DBorder=a;f.default=a;var b})},"esri/symbols/LineSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ./Symbol3D ../core/accessorSupport/decorators".split(" "),
function(a,f,m,h,e,l,n){a=d=function(a){function b(b){b=a.call(this)||this;b.type="line-symbol-3d";return b}m(b,a);b.prototype.clone=function(){return new d({styleOrigin:e.clone(this.styleOrigin),symbolLayers:e.clone(this.symbolLayers),thumbnail:e.clone(this.thumbnail)})};return b}(n.declared(l));h([n.property()],a.prototype,"type",void 0);h([n.shared(["line","path","text"])],a.prototype,"_allowedLayerTypes",void 0);a=d=h([n.subclass("esri.symbols.LineSymbol3D")],a);var d;return a})},"esri/symbols/PolygonSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ./Symbol3D ../core/accessorSupport/decorators".split(" "),
function(a,f,m,h,e,l,n){a=d=function(a){function b(b){b=a.call(this)||this;b.type="polygon-symbol-3d";return b}m(b,a);b.prototype.clone=function(){return new d({styleOrigin:e.clone(this.styleOrigin),symbolLayers:e.clone(this.symbolLayers),thumbnail:e.clone(this.thumbnail)})};b.fromJSON=function(a){var b=new d;b.read(a);if(2===b.symbolLayers.length&&"fill"===b.symbolLayers.getItemAt(0).type&&"line"===b.symbolLayers.getItemAt(1).type){var c=b.symbolLayers.getItemAt(0),e=b.symbolLayers.getItemAt(1);
!e.enabled||a.symbolLayers&&a.symbolLayers[1]&&!1===a.symbolLayers[1].enable||(c.outline={size:e.size,color:e.material.color});b.symbolLayers.removeAt(1)}return b};return b}(n.declared(l));h([n.property()],a.prototype,"type",void 0);h([n.shared("extrude fill line icon object text".split(" "))],a.prototype,"_allowedLayerTypes",void 0);a=d=h([n.subclass("esri.symbols.PolygonSymbol3D")],a);var d;return a})},"esri/symbols/MeshSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ./Symbol3D ../core/accessorSupport/decorators".split(" "),
function(a,f,m,h,e,l,n){a=d=function(a){function b(b){b=a.call(this)||this;b.type="mesh-symbol-3d";return b}m(b,a);b.prototype.clone=function(){return new d({styleOrigin:e.clone(this.styleOrigin),symbolLayers:e.clone(this.symbolLayers),thumbnail:e.clone(this.thumbnail)})};return b}(n.declared(l));h([n.property()],a.prototype,"type",void 0);h([n.shared(["fill"])],a.prototype,"_allowedLayerTypes",void 0);a=d=h([n.subclass("esri.symbols.MeshSymbol3D")],a);var d;return a})},"esri/symbols/LabelSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ./Symbol3D ./support/Symbol3DVerticalOffset ./callouts/calloutUtils ../core/accessorSupport/decorators".split(" "),
function(a,f,m,h,e,l,n,d,c){a=b=function(a){function c(b){b=a.call(this)||this;b.verticalOffset=null;b.callout=null;b.type="label-symbol-3d";return b}m(c,a);c.prototype.supportsCallout=function(){return!0};c.prototype.hasVisibleCallout=function(){return d.hasVisibleCallout(this)};c.prototype.hasVisibleVerticalOffset=function(){return d.hasVisibleVerticalOffset(this)};c.prototype.clone=function(){return new b({styleOrigin:e.clone(this.styleOrigin),symbolLayers:e.clone(this.symbolLayers),thumbnail:e.clone(this.thumbnail),
callout:e.clone(this.callout),verticalOffset:e.clone(this.verticalOffset)})};return c}(c.declared(l));h([c.property({type:n.default,json:{write:!0}})],a.prototype,"verticalOffset",void 0);h([c.property(d.calloutProperty)],a.prototype,"callout",void 0);h([c.property()],a.prototype,"type",void 0);h([c.shared(["text"])],a.prototype,"_allowedLayerTypes",void 0);a=b=h([c.subclass("esri.symbols.LabelSymbol3D")],a);var b;return a})},"esri/symbols/WebStyleSymbol":function(){define("require exports ../core/tsSupport/extendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/urlUtils ../core/Logger ../core/requireUtils ./Symbol ../portal/Portal".split(" "),
function(a,f,m,h,e,l,n,d,c,b){var k=n.getLogger("esri.symbols.WebStyleSymbol");f=q=function(b){function c(a){a=b.call(this,a)||this;a.styleName=null;a.portal=null;a.styleUrl=null;a.name=null;a.type="web-style-symbol";return a}m(c,b);c.prototype._readStyleUrl=function(a,b,c){return l.read(a,c)};c.prototype._writeStyleUrl=function(a,b,c,d){b.styleUrl=l.write(a,d)};c.prototype._writeType=function(a,b,c,d){b.type="styleSymbolReference"};c.prototype.read=function(a,b){this.portal=b?b.portal:void 0;this.inherited(arguments,
[a,b]);return this};c.prototype.clone=function(){return new q({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};c.prototype.fetchSymbol=function(){var b=this;return d.when(a,"./support/symbolUtils").then(function(a){a=a.fetchStyleSymbol(b,{portal:b.portal});a.otherwise(function(a){k.error("#fetchSymbol()","Failed to create symbol from style",a)});return a})};return c}(e.declared(c));h([e.property({json:{write:!1}})],f.prototype,"color",void 0);h([e.property({type:String,
json:{write:!0}})],f.prototype,"styleName",void 0);h([e.property({type:b,json:{write:!1}})],f.prototype,"portal",void 0);h([e.property({type:String,json:{write:!0}})],f.prototype,"styleUrl",void 0);h([e.reader("styleUrl")],f.prototype,"_readStyleUrl",null);h([e.writer("styleUrl")],f.prototype,"_writeStyleUrl",null);h([e.property({type:String,json:{write:!0}})],f.prototype,"name",void 0);h([e.property({type:String,readOnly:!0,json:{read:!1}})],f.prototype,"type",void 0);h([e.writer("type")],f.prototype,
"_writeType",null);f=q=h([e.subclass("esri.symbols.WebStyleSymbol")],f);var q;return f})},"esri/symbols/support/symbolConversion":function(){define("require exports dojo/_base/lang ../../core/lang ../../core/Error ../Font ../SimpleLineSymbol ../SimpleMarkerSymbol ../PictureMarkerSymbol ../SimpleFillSymbol ../TextSymbol ../WebStyleSymbol ../Symbol3D ../LineSymbol3D ../PointSymbol3D ../PolygonSymbol3D ../LabelSymbol3D ../LineSymbol3DLayer ../IconSymbol3DLayer ../FillSymbol3DLayer ../TextSymbol3DLayer ../../Color".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t,p,v,g,r,z,y){function A(a){var b=a.color?a.color.clone():new y([255,255,255]),d,e,f;a instanceof c?(a.color&&0===a.color.r&&0===a.color.g&&0===a.color.b&&(b=new y([255,255,255])),d={href:a.url},e=a.width<=a.height?a.height:a.width):(d=a.style,d in F?d=F[d]:(console.log(d+' cannot be mapped to Icon symbol. Fallback to "circle"'),d="circle"),d={primitive:d},e=a.size,a.outline&&a.outline.color&&0<a.outline.width&&(f={size:a.outline.width,color:a.outline.color.clone()}));
return new w(new g({size:e,screenOffset:[a.xoffset,a.yoffset],resource:d,material:{color:b},outline:f}))}Object.defineProperty(f,"__esModule",{value:!0});var F={};F[d.STYLE_CIRCLE]="circle";F[d.STYLE_CROSS]="cross";F[d.STYLE_DIAMOND]="kite";F[d.STYLE_SQUARE]="square";F[d.STYLE_X]="x";f.to3D=function(a,g,f,y){void 0===g&&(g=!1);void 0===f&&(f=!1);void 0===y&&(y=!0);if(!a)return{symbol:null};if(a instanceof u||a instanceof q)y=a.clone();else if(a instanceof n)y=new x(new v({size:a.width||1,material:{color:a.color?
a.color.clone():[255,255,255]}}));else if(a instanceof d)y=A(a);else if(a instanceof c)y=A(a);else if(a instanceof b)y=new r({material:{color:a.color?a.color.clone():[255,255,255]}}),a.outline&&a.outline.color&&(y.outline={size:a.outline.width||0,color:a.outline.color}),y=new t(y);else if(a instanceof k){var B;switch(a.verticalAlignment){case "top":B="top";break;case "middle":B="center";break;case "bottom":B="bottom";break;default:B="center"}switch(a.horizontalAlignment){case "left":B+="Left";break;
case "center":B+="Center";break;case "right":B+="Right";break;default:B+="Center"}var F=m.clone(l.defaultProps);a.font&&m.mixin(F,a.font);var E;E=a.haloColor;var C=a.haloSize;E=E&&0<C?{color:h.clone(E),size:C}:null;y=new (y?p:w)(new z({size:F.size,font:{family:F.family,weight:F.weight,style:F.style},halo:E,material:{color:a.color.clone()},placement:B,screenOffset:[a.xoffset,a.yoffset],text:a.text}))}else return{error:new e("symbol-conversion:unsupported-2d-symbol","Unsupported 2D symbol of tyoe '"+
(a.type||a.declaredClass)+"'",{symbol:a})};g&&(y.id=a.id);if(f&&y.isInstanceOf(u))for(a=0;a<y.symbolLayers.length;++a)y.symbolLayers.getItemAt(a)._ignoreDrivers=!0;return{symbol:y}}})},"esri/tasks/QueryTask":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/accessorSupport/decorators dojo/_base/lang ../request ./Task ./support/FeatureSet ./support/Query ../geometry/Extent ../geometry/support/normalizeUtils".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u){a=function(a){function c(b){b=a.call(this,b)||this;b.gdbVersion=null;b.source=null;return b}m(c,a);c.prototype.execute=function(a,b){var c=this;return u.normalizeCentralMeridian(a.geometry?[a.geometry]:[]).then(function(g){g=c._encode(n.mixin({},c.parsedUrl.query,{f:"json"},a.toJSON({geometry:g&&g[0]})));if(c.source){var e={source:c.source.toJSON()};g.layer=JSON.stringify(e)}c.gdbVersion&&(g.gdbVersion=c.gdbVersion);g={query:g,callbackParamName:"callback"};if(c.requestOptions||
b)g=n.mixin({},c.requestOptions,b,g);return d(c.parsedUrl.path+"/query",g)}).then(function(b){return a.returnJSON?b.data:c._handleExecuteResponse(b)})};c.prototype.executeRelationshipQuery=function(a,b){a=this._encode(n.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);a={query:a,callbackParamName:"callback"};if(this.requestOptions||b)a=n.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/queryRelatedRecords",a).then(this._handleExecuteRelationshipQueryResponse)};
c.prototype.executeForIds=function(a,b){var c=this;return u.normalizeCentralMeridian(a.geometry?[a.geometry]:[]).then(function(g){g=c._encode(n.mixin({},c.parsedUrl.query,{f:"json",returnIdsOnly:!0},a.toJSON({geometry:g&&g[0]})));if(c.source){var e={source:c.source.toJSON()};g.layer=JSON.stringify(e)}c.gdbVersion&&(g.gdbVersion=c.gdbVersion);g={query:g,callbackParamName:"callback"};if(c.requestOptions||b)g=n.mixin({},c.requestOptions,b,g);return d(c.parsedUrl.path+"/query",g)}).then(this._handleExecuteForIdsResponse)};
c.prototype.executeForCount=function(a,b){var c=this;return u.normalizeCentralMeridian(a.geometry?[a.geometry]:[]).then(function(g){g=c._encode(n.mixin({},c.parsedUrl.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},a.toJSON({geometry:g&&g[0]})));if(c.source){var e={source:c.source.toJSON()};g.layer=JSON.stringify(e)}c.gdbVersion&&(g.gdbVersion=c.gdbVersion);g={query:g,callbackParamName:"callback"};if(c.requestOptions||b)g=n.mixin({},c.requestOptions,b,g);return d(c.parsedUrl.path+"/query",g)}).then(this._handleExecuteForCountResponse)};
c.prototype.executeForExtent=function(a,b){var c=this;return u.normalizeCentralMeridian(a.geometry?[a.geometry]:[]).then(function(g){g=c._encode(n.mixin({},c.parsedUrl.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},a.toJSON({geometry:g&&g[0]})));if(c.source){var e={source:c.source.toJSON()};g.layer=JSON.stringify(e)}c.gdbVersion&&(g.gdbVersion=c.gdbVersion);g={query:g,callbackParamName:"callback"};if(c.requestOptions||b)g=n.mixin({},c.requestOptions,b,g);return d(c.parsedUrl.path+"/query",
g)}).then(this._handleExecuteForExtentResponse)};c.prototype._handleExecuteResponse=function(a){return b.fromJSON(a.data)};c.prototype._handleExecuteRelationshipQueryResponse=function(a){a=a.data;var c=a.geometryType,d=a.spatialReference,g={};a.relatedRecordGroups.forEach(function(a){var e=b.fromJSON({geometryType:c,spatialReference:d,features:a.relatedRecords});if(null!=a.objectId)g[a.objectId]=e;else for(var f in a)a.hasOwnProperty(f)&&"relatedRecords"!==f&&(g[a[f]]=e)});return g};c.prototype._handleExecuteForIdsResponse=
function(a){return a.data.objectIds};c.prototype._handleExecuteForCountResponse=function(a){a=a.data;var b=a.features,c=a.objectIds;if(c)a=c.length;else{if(b)throw Error("Unable to perform query. Please check your parameters.");a=a.count}return a};c.prototype._handleExecuteForExtentResponse=function(a){a=a.data;if(a.hasOwnProperty("extent"))a.extent=q.fromJSON(a.extent);else{if(a.features)throw Error("Layer does not support extent calculation.");if(a.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");
}return a};return c}(l.declared(c));h([l.property()],a.prototype,"gdbVersion",void 0);h([l.property()],a.prototype,"source",void 0);h([e(0,l.cast(k))],a.prototype,"execute",null);h([e(0,l.cast(k))],a.prototype,"executeForIds",null);h([e(0,l.cast(k))],a.prototype,"executeForCount",null);h([e(0,l.cast(k))],a.prototype,"executeForExtent",null);return a=h([l.subclass("esri.tasks.QueryTask")],a)})},"esri/tasks/Task":function(){define(["dojo/_base/lang","../core/Accessor","../core/urlUtils"],function(a,
f,m){return f.createSubclass({declaredClass:"esri.tasks.Task",normalizeCtorArgs:function(f,e){if("string"!==typeof f)return f;var h={};f&&(h.url=f);e&&a.mixin(h,e);return h},properties:{normalization:{value:!0},parsedUrl:{value:null,readOnly:!0,dependsOn:["url"],get:function(){return this._parseUrl(this.url)}},requestOptions:{value:null},url:{value:null,type:String}},_parseUrl:function(a){return a?m.urlToObject(a):null},_useSSL:function(){var a=this.parsedUrl,e=/^http:/i;this.url&&this.set("url",
this.url.replace(e,"https:"));a&&a.path&&(a.path=a.path.replace(e,"https:"))},_encode:function(f,e,l){var h,d,c={},b,k;for(b in f)if("declaredClass"!==b&&(h=f[b],d=typeof h,null!==h&&void 0!==h&&"function"!==d))if(a.isArray(h))for(c[b]=[],k=h.length,d=0;d<k;d++)c[b][d]=this._encode(h[d]);else"object"===d?h.toJSON&&(d=h.toJSON(l&&l[b]),"esri.tasks.support.FeatureSet"===h.declaredClass&&d.spatialReference&&(d.sr=d.spatialReference,delete d.spatialReference),c[b]=e?d:JSON.stringify(d)):c[b]=h;return c}})})},
"esri/tasks/support/FeatureSet":function(){define("../../core/kebabDictionary ../../core/JSONSupport ../../core/lang ../../Graphic ../../layers/support/Field ../../geometry/SpatialReference ../../geometry/support/graphicsUtils ../../geometry/support/jsonUtils dojo/_base/lang".split(" "),function(a,f,m,h,e,l,n,d,c){a=a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent"});return f.createSubclass({declaredClass:"esri.tasks.support.FeatureSet",
getDefaults:function(){return c.mixin(this.inherited(arguments),{features:[]})},properties:{displayFieldName:null,exceededTransferLimit:null,features:{value:null,json:{read:function(a,c){var b=l.fromJSON(c.spatialReference);a=a.map(function(a){var c=h.fromJSON(a);a=a.geometry&&a.geometry.spatialReference;c.geometry&&!a&&(c.geometry.spatialReference=b);return c});c.transform&&this._hydrate(c.transform,c.geometryType,a);return a}}},fields:{value:null,type:[e]},geometryType:{value:null,json:{read:a.fromJSON}},
spatialReference:{type:l}},toJSON:function(a){var b={hasZ:this.hasZ,hasM:this.hasM};this.displayFieldName&&(b.displayFieldName=this.displayFieldName);this.fields&&(b.fields=this.fields.map(function(a){return a.toJSON()}));this.spatialReference?b.spatialReference=this.spatialReference.toJSON():this.features[0]&&this.features[0].geometry&&(b.spatialReference=this.features[0].geometry.spatialReference.toJSON());this.features[0]&&(this.features[0].geometry&&(b.geometryType=d.getJsonType(this.features[0].geometry)),
b.features=n._encodeGraphics(this.features,a));b.exceededTransferLimit=this.exceededTransferLimit;b.transform=this.transform;return m.fixJson(b)},quantize:function(a){var b=a.translate[0],c=a.translate[1],d=a.scale[0],e=a.scale[1],f=this.features,h=function(a,b,c){var d,g,e,f,k,h,p=[];d=0;for(g=a.length;d<g;d++)if(e=a[d],0<d){if(h=b(e[0]),e=c(e[1]),h!==f||e!==k)p.push([h-f,e-k]),f=h,k=e}else f=b(e[0]),k=c(e[1]),p.push([f,k]);return 0<p.length?p:null},p=function(a,b,c){if("point"===a)return function(a){a.x=
b(a.x);a.y=c(a.y);return a};if("polyline"===a||"polygon"===a)return function(a){var d,g,e,f,k;e=a.rings||a.paths;k=[];d=0;for(g=e.length;d<g;d++)f=e[d],(f=h(f,b,c))&&k.push(f);return 0<k.length?(a.rings?a.rings=k:a.paths=k,a):null};if("multipoint"===a)return function(a){var d;d=h(a.points,b,c);return 0<d.length?(a.points=d,a):null};if("extent"===a)return function(a){return a}}(this.geometryType,function(a){return Math.round((a-b)/d)},function(a){return Math.round((c-a)/e)}),l,g;l=0;for(g=f.length;l<
g;l++)p(f[l].geometry)||(f.splice(l,1),l--,g--);this.transform=a;return this},_hydrate:function(a,c,d){if(a){var b=a.translate[0],e=a.translate[1],f=a.scale[0],k=a.scale[1],h=function(a,b,c){if("esriGeometryPoint"===a)return function(a){a.x=b(a.x);a.y=c(a.y)};if("esriGeometryPolyline"===a||"esriGeometryPolygon"===a)return function(a){a=a.rings||a.paths;var d,g,e,f,k,h,p,l;d=0;for(g=a.length;d<g;d++)for(k=a[d],e=0,f=k.length;e<f;e++)h=k[e],0<e?(p+=h[0],l+=h[1]):(p=h[0],l=h[1]),h[0]=b(p),h[1]=c(l)};
if("esriGeometryEnvelope"===a)return function(a){a.xmin=b(a.xmin);a.ymin=c(a.ymin);a.xmax=b(a.xmax);a.ymax=c(a.ymax)};if("esriGeometryMultipoint"===a)return function(a){a=a.points;var d,g,e,f,k;d=0;for(g=a.length;d<g;d++)e=a[d],0<d?(f+=e[0],k+=e[1]):(f=e[0],k=e[1]),e[0]=b(f),e[1]=c(k)}}(c,function(a){return a*f+b},function(a){return e-a*k});a=0;for(c=d.length;a<c;a++)d[a].geometry&&h(d[a].geometry)}}})})},"esri/layers/support/Field":function(){define(["../../core/kebabDictionary","../../core/JSONSupport",
"./CodedValueDomain","./RangeDomain"],function(a,f,m,h){var e=a({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"}),l=f.createSubclass({declaredClass:"esri.layers.support.Field",
properties:{alias:null,domain:{value:null,json:{read:function(a,d){d=a&&a.type;return"range"===d?new h(a):"codedValue"===d?new m(a):null}}},editable:!1,length:-1,name:null,nullable:!0,type:{json:{read:e.fromJSON}}},clone:function(){return l.fromJSON(this.toJSON())},toJSON:function(){return{alias:this.alias,domain:this.domain&&this.domain.toJSON(),editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:e.toJSON(this.type)}}});return l})},"esri/layers/support/CodedValueDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain ../../core/lang".split(" "),
function(a,f,m,h,e,l,n){a=function(a){function c(b){b=a.call(this,b)||this;b.codedValues=null;b.type="coded-value";return b}m(c,a);c.prototype.writeCodedValues=function(a,c){var b=null;a&&(b=a.map(function(a){return n.fixJson(n.clone(a))}));c.codedValues=b};c.prototype.getName=function(a){var b=null;if(this.codedValues){var c=String(a);this.codedValues.some(function(a){String(a.code)===c&&(b=a.name);return!!b})}return b};return c}(e.declared(l));h([e.property({json:{write:!0}})],a.prototype,"codedValues",
void 0);h([e.writer("codedValues")],a.prototype,"writeCodedValues",null);h([e.property()],a.prototype,"type",void 0);return a=h([e.subclass("esri.layers.support.CodedValueDomain")],a)})},"esri/layers/support/Domain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/JSONSupport ../../core/kebabDictionary".split(" "),function(a,f,m,h,e,l,n){var d=n({codedValue:"coded-value"});a=function(a){function b(b){b=
a.call(this,b)||this;b.name=null;b.type=null;return b}m(b,a);b.prototype.writeType=function(a,b){b.type=d.toJSON(a)};return b}(e.declared(l));h([e.property({json:{write:!0}})],a.prototype,"name",void 0);h([e.property({json:{read:d.fromJSON,write:!0}})],a.prototype,"type",void 0);h([e.writer("type")],a.prototype,"writeType",null);return a=h([e.subclass("esri.layers.support.Domain")],a)})},"esri/layers/support/RangeDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),
function(a,f,m,h,e,l){a=function(a){function d(c){c=a.call(this,c)||this;c.maxValue=null;c.minValue=null;c.type="range";return c}m(d,a);return d}(e.declared(l));h([e.property({json:{read:{source:"range",reader:function(a,d){return d.range&&d.range[1]}},write:{target:"range",writer:function(a,d,c){d[c]=[this.minValue,a]}}}})],a.prototype,"maxValue",void 0);h([e.property({json:{read:{source:"range",reader:function(a,d){return d.range&&d.range[0]}},write:{target:"range",writer:function(a,d,c){d[c]=[a,
this.maxValue]}}}})],a.prototype,"minValue",void 0);h([e.property()],a.prototype,"type",void 0);return a=h([e.subclass("esri.layers.support.RangeDomain")],a)})},"esri/geometry/support/graphicsUtils":function(){define(["require","exports","dojo/_base/array","../Extent"],function(a,f,m,h){Object.defineProperty(f,"__esModule",{value:!0});f.graphicsExtent=function(a){var e=a[0].geometry,f=e.extent,d=e;null===f&&(f=new h(d.x,d.y,d.x,d.y,e.spatialReference));for(var c=1;c<a.length;c++){var d=e=a[c].geometry,
b=e.extent;null===b&&(b=new h(d.x,d.y,d.x,d.y,e.spatialReference));f=f.clone().union(b)}return 0>f.width&&0>f.height?null:f};f.getGeometries=function(a){return m.map(a,function(a){return a.geometry})};f._encodeGraphics=function(a,f){var e=[];m.forEach(a,function(a,c){a=a.toJSON();var b={};if(a.geometry){var d=f&&f[c];b.geometry=d&&d.toJSON()||a.geometry}a.attributes&&(b.attributes=a.attributes);e[c]=b});return e}})},"esri/tasks/support/Query":function(){define(["../../core/Accessor","../../core/kebabDictionary",
"../../core/lang","../../geometry/support/jsonUtils","dojo/_base/array"],function(a,f,m,h,e){var l=f({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),n=f({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",
esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),d=f({upperLeft:"upper-left",lowerLeft:"lower-left"});return a.createSubclass({declaredClass:"esri.tasks.support.Query",properties:{spatialRelationship:"intersects",text:null,where:"",geometry:null,geometryPrecision:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,returnDistinctValues:!1,returnJSON:!1,maxAllowableOffset:null,multipatchOption:null,
num:null,start:null,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,distance:null,units:"meters",resultOffset:null,resultRecordCount:null,quantizationParameters:null,sqlFormat:null},toJSON:function(a){var b={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:l.toJSON(this.spatialRelationship),maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision,returnZ:this.returnZ,
returnM:this.returnM,sqlFormat:this.sqlFormat},c=a&&a.geometry||this.geometry,f=this.objectIds,u=this.outFields,x=this.outSpatialReference,w=this.groupByFieldsForStatistics,t=this.orderByFields,p=this.outStatistics;a=this.distance;c&&(b.geometry=c,b.geometryType=h.getJsonType(c),b.inSR=c.spatialReference.wkid||JSON.stringify(c.spatialReference.toJSON()));f&&(b.objectIds=f.join(","));u&&(b.outFields=u.join(","));this.returnDistinctValues&&(b.returnDistinctValues=!0);w&&(b.groupByFieldsForStatistics=
w.join(","));t&&(b.orderByFields=t.join(","));if(p){var v=[];e.forEach(p,function(a){v.push(a.toJSON())});b.outStatistics=JSON.stringify(v)}x?b.outSR=x.wkid||JSON.stringify(x.toJSON()):c&&(b.outSR=c.spatialReference.wkid||JSON.stringify(c.spatialReference.toJSON()));c=this.timeExtent;b.time=c?c.toJSON().join(","):null;(c=this.relationParam)&&b.spatialRel===l.toJSON("relation")&&(b.relationParam=c);a&&(b.distance=this.distance,b.units=n.toJSON(this.units));this.hasOwnProperty("start")&&(b.resultOffset=
this.start,b.resultRecordCount=10,""===b.where&&(b.where="1\x3d1"));this.hasOwnProperty("num")&&(b.resultRecordCount=this.num);b.pixelSize=this.pixelSize?JSON.stringify(this.pixelSize.toJSON()):null;b.multipatchOption=this.multipatchOption;this.quantizationParameters&&(a=m.clone(this.quantizationParameters),a.originPosition&&(a.originPosition=d.toJSON(a.originPosition)),b.quantizationParameters=JSON.stringify(a));b._ts=this._ts;return b}})})},"esri/geometry/support/normalizeUtils":function(){define("dojo/_base/array dojo/Deferred ../../config ../../tasks/GeometryService ../Polyline ../Polygon ./webMercatorUtils ./spatialReferenceUtils ./jsonUtils".split(" "),
function(a,f,m,h,e,l,n,d,c){function b(a,b){return Math.ceil((a-b)/(2*b))}function k(a,b){var c=a.paths||a.rings,d,g,e=c.length,f;for(d=0;d<e;d++)for(f=c[d].length,g=0;g<f;g++){var k=a.getPoint(d,g);a.setPoint(d,g,k.clone().offset(b,0))}return a}function q(b,c){if(!(b instanceof e||b instanceof l))throw console.error("straightLineDensify: the input geometry is neither polyline nor polygon"),Error("straightLineDensify: the input geometry is neither polyline nor polygon");var d=b instanceof e,g=[],
f;a.forEach(d?b.paths:b.rings,function(a){g.push(f=[]);f.push([a[0][0],a[0][1]]);var b,d,e,k,h,p,l,m,n,v,r,q;for(h=0;h<a.length-1;h++){b=a[h][0];d=a[h][1];e=a[h+1][0];k=a[h+1][1];l=Math.sqrt((e-b)*(e-b)+(k-d)*(k-d));m=(k-d)/l;n=(e-b)/l;v=l/c;if(1<v){for(p=1;p<=v-1;p++)q=p*c,r=n*q+b,q=m*q+d,f.push([r,q]);p=(l+Math.floor(v-1)*c)/2;r=n*p+b;q=m*p+d;f.push([r,q])}f.push([e,k])}});return d?new e({paths:g,spatialReference:b.spatialReference}):new l({rings:g,spatialReference:b.spatialReference})}function u(a,
b,c){b&&(a=q(a,1E6),a=n.webMercatorToGeographic(a,!0));c&&(a=k(a,c));return a}function x(a,c,d){var g=a.x||a[0],e;g>c?(e=b(g,c),a.x?a=a.clone().offset(-2*e*c,0):a[0]=g+-2*e*c):g<d&&(e=b(g,d),a.x?a=a.clone().offset(-2*e*d,0):a[0]=g+-2*e*d);return a}function w(c,d){var g=-1;a.forEach(d.cutIndexes,function(e,f){var k=d.geometries[f];a.forEach(k.rings||k.paths,function(c,d){a.some(c,function(a){if(!(180>a[0])){a=0;var g,e=c.length,f;for(g=0;g<e;g++)f=c[g][0],a=f>a?f:a;a=Number(a.toFixed(9));a=-360*b(a,
180);e=c.length;for(g=0;g<e;g++)f=k.getPoint(d,g),k.setPoint(d,g,f.clone().offset(a,0))}return!0})});e===g?k.rings?a.forEach(k.rings,function(a){c[e]=c[e].addRing(a)}):a.forEach(k.paths,function(a){c[e]=c[e].addPath(a)}):(g=e,c[e]=k)});return c}function t(a){for(var b=[],c=0,d=0,e=Math.min,f=Math.max,k=0;k<a.length;k++){for(var h=a[k],p=null,l=0;l<h.length;l++)p=h[l],b.push(p),0===l?d=c=p[0]:(c=e(c,p[0]),d=f(d,p[0]));p&&b.push([(c+d)/2,0])}return b}var p;return{_straightLineDensify:q,normalizeCentralMeridian:function(v,
g){var r=new f;g||(p||(p=new h({url:m.geometryServiceUrl})),g=p);var q=[],t=[],A,F,B,E,C,G,L,U,P=0;a.forEach(v,function(g){if(g)if(A||(A=g.spatialReference,F=d.getInfo(A),E=(B=A.isWebMercator)?2.0037508342788905E7:180,C=B?-2.0037508342788905E7:-180,G=B?102100:4326,L=new e({paths:[[[E,C],[E,E]]],spatialReference:{wkid:G}}),U=new e({paths:[[[C,C],[C,E]]],spatialReference:{wkid:G}})),F){var f=c.fromJSON(g.toJSON()),h=g.extent;"point"===g.type?q.push(x(f,E,C)):"multipoint"===g.type?(f.points=a.map(f.points,
function(a){return x(a,E,C)}),q.push(f)):"extent"===g.type?(f=h.clone()._normalize(null,null,F),q.push(f.rings?new l(f):f)):h?(g=2*b(h.xmin,C)*E,f=0===g?f:k(f,g),h=h.clone().offset(g,0),h.intersects(L)&&h.xmax!==E?(P=h.xmax>P?h.xmax:P,f=u(f,B),t.push(f),q.push("cut")):h.intersects(U)&&h.xmin!==C?(P=2*h.xmax*E>P?2*h.xmax*E:P,f=u(f,B,360),t.push(f),q.push("cut")):q.push(f)):q.push(f)}else q.push(g);else q.push(g)});for(var H=new e,K=b(P,E),J=-90,R=K;0<K;){var M=-180+360*K;H.addPath([[M,J],[M,-1*J]]);
J*=-1;K--}0<t.length&&0<R?g?g.cut(t,H).then(function(b){t=w(t,b);var c=[];a.forEach(q,function(a,b){"cut"===a&&(a=t.shift(),v[b].rings&&1<v[b].rings.length&&a.rings.length>=v[b].rings.length?(q[b]="simplify",c.push(a)):q[b]=!0===B?n.geographicToWebMercator(a):a)});0<c.length?g.simplify(c).then(function(b){a.forEach(q,function(a,c){"simplify"===a&&(q[c]=!0===B?n.geographicToWebMercator(b.shift()):b.shift())});r.resolve(q)}).otherwise(function(a){r.reject(a)}):r.resolve(q)}).otherwise(function(a){r.reject(a)}):
r.reject(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):(a.forEach(q,function(a,b){"cut"===a&&(a=t.shift(),q[b]=!0===B?n.geographicToWebMercator(a):a)}),r.resolve(q));return r.promise},getDenormalizedExtent:function(a){if(!a)return null;var b=a.extent;if(!b)return null;var c=a.spatialReference&&d.getInfo(a.spatialReference);if(!c)return b;var e=c.valid[0],c=c.valid[1],f=b.width,k=b.xmax,h=b.xmin;if("extent"===a.type||0===f||f<=c||f>2*c||k<e||h>c)return b;
var p;switch(a.type){case "polygon":if(1<a.rings.length)p=t(a.rings);else return b;break;case "polyline":if(1<a.paths.length)p=t(a.paths);else return b;break;case "multipoint":p=a.points}a=Math.min;for(var e=Math.max,l=b.clone(),m=0;m<p.length;m++){var n=p[m][0];0>n?(n+=c,h=e(n,h)):(n-=c,k=a(n,k))}l.xmin=k;l.xmax=h;return l.width<f?(l.xmin-=c,l.xmax-=c,l):b}}})},"esri/tasks/GeometryService":function(){define("../core/kebabDictionary ../core/accessorSupport/ensureType ../geometry/Extent ../geometry/Multipoint ../geometry/Polyline ../geometry/Polygon ../geometry/support/jsonUtils ../request ./Task ./support/ProjectParameters dojo/_base/lang".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k){var q=a({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"}),u=f.ensureType(b);a=c.createSubclass({declaredClass:"esri.tasks.GeometryService",areasAndLengths:function(a,b){a={query:k.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),callbackParamName:"callback"};if(this.requestOptions||b)a=k.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/areasAndLengths",a).then(function(a){return a.data})},autoComplete:function(a,
b,c){var e=a[0].spatialReference;a={query:k.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),polygons:JSON.stringify(this._encodeGeometries(a).geometries),polylines:JSON.stringify(this._encodeGeometries(b).geometries)}),callbackParamName:"callback"};if(this.requestOptions||c)a=k.mixin({},this.requestOptions,c,a);return d(this.parsedUrl.path+"/autoComplete",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new l({spatialReference:e,rings:a.rings})})})},buffer:function(a,
b){var c=k.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),e=a.outSpatialReference||a.geometries[0].spatialReference;a={query:c,callbackParamName:"callback"};if(this.requestOptions||b)a=k.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/buffer",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new l({spatialReference:e,rings:a.rings})})})},cut:function(a,b,c){var e=a[0].spatialReference,f=a.map(function(a){return a.toJSON()});a={query:k.mixin({},this.parsedUrl.query,
{f:"json",sr:JSON.stringify(e.toJSON()),target:JSON.stringify({geometryType:n.getJsonType(a[0]),geometries:f}),cutter:JSON.stringify(b.toJSON())}),callbackParamName:"callback"};if(this.requestOptions||c)a=k.mixin({},this.requestOptions,c,a);return d(this.parsedUrl.path+"/cut",a).then(function(a){a=a.data;return{cutIndexes:a.cutIndexes,geometries:(a.geometries||[]).map(function(a){return n.fromJSON(a).set("spatialReference",e)})}})},convexHull:function(a,b){var c=a[0].spatialReference;a={query:k.mixin({},
this.parsedUrl.query,{f:"json",sr:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),callbackParamName:"callback"};if(this.requestOptions||b)a=k.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/convexHull",a).then(function(a){return n.fromJSON(a.data.geometry).set("spatialReference",c)})},densify:function(a,b){var c=k.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),e=a.geometries[0].spatialReference;a={query:c,callbackParamName:"callback"};if(this.requestOptions||
b)a=k.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/densify",a).then(function(a){return(a.data.geometries||[]).map(function(a){return n.fromJSON(a).set("spatialReference",e)})})},difference:function(a,b,c){var e=a[0].spatialReference;a={query:k.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),geometry:JSON.stringify({geometryType:n.getJsonType(b),geometry:b.toJSON()})}),callbackParamName:"callback"};if(this.requestOptions||
c)a=k.mixin({},this.requestOptions,c,a);return d(this.parsedUrl.path+"/difference",a).then(function(a){return(a.data.geometries||[]).map(function(a){return n.fromJSON(a).set("spatialReference",e)})})},distance:function(a,b){a={query:k.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),callbackParamName:"callback"};if(this.requestOptions||b)a=k.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/distance",a).then(this._handleDistanceResponse)},fromGeoCoordinateString:function(a,b){var c=
{};k.isObject(a.sr)?c.sr=a.sr.wkid||JSON.stringify(a.sr.toJSON()):c.sr=a.sr;c.strings=JSON.stringify(a.strings);c.conversionType=q.toJSON(a.conversionType||"mgrs");c.conversionMode=a.conversionMode;a={query:k.mixin({},this.parsedUrl.query,{f:"json"},c),callbackParamName:"callback"};if(this.requestOptions||b)a=k.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/fromGeoCoordinateString",a).then(this._handleFromGeoCoordinateResponse)},generalize:function(a,b){var c=k.mixin({},this.parsedUrl.query,
{f:"json"},a.toJSON()),e=a.geometries[0].spatialReference;a={query:c,callbackParamName:"callback"};if(this.requestOptions||b)a=k.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/generalize",a).then(function(a){return(a.data.geometries||[]).map(function(a){return n.fromJSON(a).set("spatialReference",e)})})},intersect:function(a,b,c){var e=a[0].spatialReference;a={query:k.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),
geometry:JSON.stringify({geometryType:n.getJsonType(b),geometry:b.toJSON()})}),callbackParamName:"callback"};if(this.requestOptions||c)a=k.mixin({},this.requestOptions,c,a);return d(this.parsedUrl.path+"/intersect",a).then(function(a){return(a.data.geometries||[]).map(function(a){return n.fromJSON(a).set("spatialReference",e)})})},lengths:function(a,b){a={query:k.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),callbackParamName:"callback"};if(this.requestOptions||b)a=k.mixin({},this.requestOptions,
b,a);return d(this.parsedUrl.path+"/lengths",a).then(function(a){return a.data})},labelPoints:function(a,b){var c=a.map(function(a){return a.toJSON()}),e=a[0].spatialReference;a={query:k.mixin({},this.parsedUrl.query,{f:"json",sr:e.wkid?e.wkid:JSON.stringify(e.toJSON()),polygons:JSON.stringify(c)}),callbackParamName:"callback"};if(this.requestOptions||b)a=k.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/labelPoints",a).then(function(a){return(a.data.labelPoints||[]).map(function(a){return n.fromJSON(a).set("spatialReference",
e)})})},offset:function(a,b){var c=k.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),e=a.geometries[0].spatialReference;a={query:c,callbackParamName:"callback"};if(this.requestOptions||b)a=k.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/offset",a).then(function(a){return(a.data.geometries||[]).map(function(a){return n.fromJSON(a).set("spatialReference",e)})})},project:function(a,b){a=u(a);var c=k.mixin({},a.toJSON(),this.parsedUrl.query,{f:"json"}),e=a.outSpatialReference,
f=n.getJsonType(a.geometries[0]),g=this._decodeGeometries;a={query:c,callbackParamName:"callback"};if(this.requestOptions||b)a=k.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/project",a).then(function(a){return g(a.data,f,e)})},relation:function(a,b){a={query:k.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),callbackParamName:"callback"};if(this.requestOptions||b)a=k.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/relation",a).then(this._handleRelationResponse)},
reshape:function(a,b,c){var e=a.spatialReference;a={query:k.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),target:JSON.stringify({geometryType:n.getJsonType(a),geometry:a.toJSON()}),reshaper:JSON.stringify(b.toJSON())}),callbackParamName:"callback"};if(this.requestOptions||c)a=k.mixin({},this.requestOptions,c,a);return d(this.parsedUrl.path+"/reshape",a).then(function(a){return n.fromJSON(a.data.geometry).set("spatialReference",e)})},simplify:function(a,b){var c=a[0].spatialReference,
e=k.mixin({},this.parsedUrl.query,{f:"json",sr:c.wkid?c.wkid:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),f=n.getJsonType(a[0]),g=this._decodeGeometries;a={query:e,callbackParamName:"callback"};if(this.requestOptions||b)a=k.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/simplify",a).then(function(a){return g(a.data,f,c)})},toGeoCoordinateString:function(a,b){var c={};k.isObject(a.sr)?c.sr=a.sr.wkid||JSON.stringify(a.sr.toJSON()):c.sr=a.sr;c.coordinates=
JSON.stringify(a.coordinates);c.conversionType=q.toJSON(a.conversionType||"mgrs");c.conversionMode=a.conversionMode;c.numOfDigits=a.numOfDigits;c.rounding=a.rounding;c.addSpaces=a.addSpaces;a={query:k.mixin({},this.parsedUrl.query,{f:"json"},c),callbackParamName:"callback"};if(this.requestOptions||b)a=k.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/toGeoCoordinateString",a).then(this._handleToGeoCoordinateResponse)},trimExtend:function(a,b){var c=k.mixin({},this.parsedUrl.query,
{f:"json"},a.toJSON()),f=a.sr;a={query:c,callbackParamName:"callback"};if(this.requestOptions||b)a=k.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/trimExtend",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new e({spatialReference:f,paths:a.paths})})})},union:function(a,b){var c=a[0].spatialReference;a={query:k.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(c.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),callbackParamName:"callback"};
if(this.requestOptions||b)a=k.mixin({},this.requestOptions,b,a);return d(this.parsedUrl.path+"/union",a).then(function(a){return n.fromJSON(a.data.geometry).set("spatialReference",c)})},_handleRelationResponse:function(a){return a.data.relations},_handleDistanceResponse:function(a){return(a=a.data)&&a.distance},_handleToGeoCoordinateResponse:function(a){return a.data.strings},_handleFromGeoCoordinateResponse:function(a){return a.data.coordinates},_encodeGeometries:function(a){var b=[],c,d=a.length;
for(c=0;c<d;c++)b.push(a[c].toJSON());return{geometryType:n.getJsonType(a[0]),geometries:b}},_decodeGeometries:function(a,b,c){var d=n.getGeometryType(b);a=a.geometries;var e=[],g={spatialReference:c.toJSON()},f=k.mixin;a.forEach(function(a,b){e[b]=new d(f(a,g))});return e},_toProjectGeometry:function(a){var b=a.spatialReference.toJSON();return a instanceof m?new l({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:b}):new e({paths:[[].concat(a.points)],
spatialReference:b})},_fromProjectedGeometry:function(a,b,c){return"extent"===b?(a=a.rings[0],new m(a[0][0],a[0][1],a[2][0],a[2][1],c)):new h({points:a.paths[0],spatialReference:c.toJSON()})}});k.mixin(a,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,
UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,
UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,
UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",
UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});return a})},"esri/tasks/support/ProjectParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/lang ../../geometry/support/jsonUtils ../../core/JSONSupport ../../core/Logger".split(" "),function(a,f,m,h,e,l,n,d,c){var b=c.getLogger("esri.tasks.support.ProjectParameters");
a=function(a){function c(b){b=a.call(this)||this;b.geometries=null;b.outSpatialReference=null;b.transformation=null;b.transformForward=null;return b}m(c,a);Object.defineProperty(c.prototype,"outSR",{get:function(){b.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");return this.outSpatialReference},set:function(a){b.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");this.outSpatialReference=a},enumerable:!0,configurable:!0});c.prototype.toJSON=
function(){var a=this.geometries.map(function(a){return a.toJSON()}),b=this.geometries[0],c={};c.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());c.inSR=b.spatialReference.wkid||JSON.stringify(b.spatialReference.toJSON());c.geometries=JSON.stringify({geometryType:n.getJsonType(b),geometries:a});this.transformation&&(c.transformation=this.transformation.wkid||JSON.stringify(this.transformation));l.isDefined(this.transformForward)&&(c.transformForward=this.transformForward);
return c};return c}(e.declared(d));h([e.property()],a.prototype,"geometries",void 0);h([e.property({json:{read:{source:"outSR"}}})],a.prototype,"outSpatialReference",void 0);h([e.property({json:{read:!1}})],a.prototype,"outSR",null);h([e.property()],a.prototype,"transformation",void 0);h([e.property()],a.prototype,"transformForward",void 0);return a=h([e.subclass("esri.tasks.support.ProjectParameters")],a)})},"esri/tasks/support/StatisticDefinition":function(){define(["../../core/Accessor"],function(a){return a.createSubclass({declaredClass:"esri.tasks.support.StatisticDefinition",
properties:{maxPointCount:null,maxRecordCount:null,maxVertexCount:null,onStatisticField:null,outStatisticFieldName:null,statisticType:null},toJSON:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}})})},"esri/layers/graphics/controllers/OnDemandController2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/Accessor ../../../core/Evented ../../../core/HandleRegistry ../../../core/Promise ../../../geometry/Extent ./support/TileSet ../../../views/2d/tiling/TileQueue ../../../views/2d/tiling/TileStrategy ../../../views/2d/tiling/TileInfoView ../../../views/2d/tiling/TileKey ../../support/GraphicsManager ../../support/TileInfo".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t,p){var v=function(){function a(){this.key=new w(0,0,0,0)}a.prototype.dispose=function(){};return a}();a=function(a){function c(b){var c=a.call(this)||this;c._handles=new d;c._pendingQueries=new Map;c._tileRequests=new Map;c.layer=b.layer;c.layerView=b.layerView;c.graphics=b.graphics;c._tileInfo=p.create({spatialReference:c.layerView.view.spatialReference,size:512});c._tileInfoView=new x(c._tileInfo);c._tileQueue=new q({tileInfoView:c._tileInfoView,process:function(a){return c._fetchTile(a)}});
c._tileSet=new k({layer:c.layer,tileInfo:c._tileInfo});c._graphicsManager=new t({graphics:c.graphics,objectIdField:c.layer.objectIdField});c._tileStrategy=new u({cachePolicy:"purge",acquireTile:function(a){return c._acquireTile(a)},releaseTile:function(a){return c._releaseTile(a)},tileInfoView:c._tileInfoView});c._handles.add([c.layer.watch("definitionExpression",function(){return c._refresh()}),c.layer.on("edits",function(a){return c._editsHandler(a)})],"layer");return c}m(c,a);c.prototype.destroy=
function(){var a=this;this._pendingQueries.forEach(function(a){a.isFulfilled()||a.cancel()});this._tileStrategy.tiles.forEach(function(b){return a._releaseTile(b)});this._handles.destroy();this._graphicsManager.destroy();this._tileStrategy.destroy();this._tileQueue.clear();this._tileRequests.clear()};Object.defineProperty(c.prototype,"graphics",{set:function(a){var b=this,c=this._get("graphics");c!==a&&(this._handles.remove("graphics"),c&&c.forEach(function(a){return a.layer=null}),a&&(a.forEach(function(a){return a.layer=
b.layer}),this._handles.add([a.on("after-add",function(a){return a.item.layer=b.layer}),a.on("after-remove",function(a){return a.item.layer=null})],"graphics")),this._set("graphics",a))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"updating",{get:function(){return 0<this._tileQueue.length},enumerable:!0,configurable:!0});c.prototype.update=function(a){var b=this;this._tileQueue.pause();this._tileQueue.state=a.state;this._tileStrategy.update(a);this._graphicsManager.removeAll();
this._tileStrategy.tiles.forEach(function(a){a.featureSet&&b._graphicsManager.add(a.featureSet.features,a.intentId)});this._tileQueue.resume();this.notifyChange("updating")};c.prototype._acquireTile=function(a){var b=this,c=new v;c.key.set(a);a=this._tileQueue.push(c.key).then(function(a){c.attached=!0;c.featureSet=a.featureSet;c.intentId=a.intentId;b._graphicsManager.removeIntent(c.intentId);b.layerView.requestUpdate()});this._tileRequests.set(c,a);this.notifyChange("updating");return c};c.prototype._releaseTile=
function(a){if(this._tileRequests.has(a)){var b=this._tileRequests.get(a);b.isFulfilled()||b.cancel();this._tileRequests.delete(a);this.layerView.requestUpdate()}};c.prototype._fetchTile=function(a){var b=this,c=this._graphicsManager.createIntentToAdd();a=this._tileSet.fetch(a).then(function(a){return{featureSet:a,intentId:c}});a.otherwise(function(){return b._graphicsManager.removeIntent(c)});return a};c.prototype._refresh=function(){var a=this;this._tileQueue.reset();this._tileStrategy.tiles.forEach(function(b){var c=
a._graphicsManager.createIntentToAdd(),d=a._tileSet.fetch(b.key).then(function(d){a._graphicsManager.remove(b.featureSet.features);b.intentId=c;b.featureSet=d;a._graphicsManager.add(b.featureSet.features,b.intentId);return b});d.always(function(){return a._graphicsManager.removeIntent(c)});return d});this.notifyChange("updating")};c.prototype._editsHandler=function(a){var b=this,c=function(a){return a.objectId},d=a.deletedFeatures.map(c);this._graphicsManager.delete(d);a=a.addedFeatures.concat(a.updatedFeatures).map(c);
if(a.length){c=this.layer.createQuery();c.objectIds=a;c.outSpatialReference=this._tileInfo.spatialReference;var g=this._graphicsManager.createIntentToAdd(a);a=this.layer.queryFeatures(c);this._pendingQueries.set(g,a);this.notifyChange("updating");a.then(function(a){return b._refetchHandler(a,g)}).always(function(){b._graphicsManager.removeIntent(g);b._pendingQueries.delete(g);b.notifyChange("updating")})}};c.prototype._refetchHandler=function(a,c){var d=this,g=a.features;if(g){var e=this._tileInfo.spatialReference;
a=function(a){var c=a.key.extent,f=new b({xmin:c[0],ymin:c[1],xmax:c[2],ymax:c[3],spatialReference:e});g.forEach(function(b){b.geometry&&f.intersects(b.geometry)&&d._addFeatureToTile(b,a)})};for(var f=0,k=this._tileStrategy.tiles;f<k.length;f++)a(k[f]);this._graphicsManager.add(g,c)}};c.prototype._addFeatureToTile=function(a,b){var c=b.featureSet.features||[],d=this.layer.objectIdField,g=a.attributes&&a.attributes[d],e;c.some(function(a){(a.attributes&&a.attributes[d])===g&&(e=a);return!!e});e?(e.geometry=
a.geometry,e.attributes=a.attributes):c.push(a);b.featureSet.features=c};return c}(e.declared(l,c,n));h([e.property()],a.prototype,"graphics",null);h([e.property()],a.prototype,"layer",void 0);h([e.property()],a.prototype,"layerView",void 0);h([e.property()],a.prototype,"updating",null);return a=h([e.subclass("esri.layers.graphics.controllers.OnDemandController2D")],a)})},"esri/layers/graphics/controllers/support/TileSet":function(){define(["require","exports","../../../../geometry/Extent"],function(a,
f,m){return function(){function a(a){this.layer=a.layer;this.tileInfo=a.tileInfo}a.prototype.fetch=function(a){return this._queryTile(a)};a.prototype._queryTile=function(a){return this.layer.queryFeatures(this._createQuery(a))};a.prototype._createQuery=function(a){this.tileInfo.updateTileInfo(a);var e=this.tileInfo.spatialReference,f=a.extent,d=f[0],c=f[1],b=f[2],f=f[3],k=this.layer.createQuery();k.geometry=new m({xmin:d,ymin:c,xmax:b,ymax:f,spatialReference:e});k.outSpatialReference=e;this._setResolutionParams(k,
a);return k};a.prototype._setResolutionParams=function(a,f){var e=this.layer,d=e.geometryType;if("polyline"===d||"polygon"===d)f=this.tileInfo.lodAt(f.level).resolution,"polyline"===d&&(a.maxAllowableOffset=f),e.get("capabilities.query.supportsQuantization")&&(a.quantizationParameters={mode:"view",originPosition:"upperLeft",tolerance:f,extent:e.fullExtent})};return a}()})},"esri/views/2d/tiling/TileQueue":function(){define(["require","exports","../../../core/QueueProcessor"],function(a,f,m){function h(a,
c){a.length=0;c.forEach(function(b){return a.push(b)});return a}var e=new Set,l=[],n=new Map;return function(){function a(a){var b=this;this.tileInfoView=a.tileInfoView;this._queue=new m({concurrency:6,process:a.process,peeker:function(a){return b._peek(a)}})}Object.defineProperty(a.prototype,"length",{get:function(){return this._queue.length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._queue.clear()};a.prototype.find=function(a,b){return this._queue.find(a)};a.prototype.has=
function(a){return this._queue.has(a)};a.prototype.pause=function(){return this._queue.pause()};a.prototype.push=function(a){return this._queue.push(a)};a.prototype.reset=function(){return this._queue.reset()};a.prototype.resume=function(){return this._queue.resume()};a.prototype._peek=function(a){var b=this;if(!this.state)return a[0];var c=this.tileInfoView,d=Number.NEGATIVE_INFINITY,f=Number.POSITIVE_INFINITY;a.forEach(function(a){var c=b.tileInfoView.getTileScale(a);n.has(c)||(n.set(c,[]),d=Math.max(c,
d),f=Math.min(c,f));n.get(c).push(a);e.add(c)});var m=this.state.scale;n.has(m)||(h(l,e),l.sort(),m=l.reduce(function(a,b,c,d){return Math.abs(b-m)<Math.abs(a-m)?b:a},l[0]));m=Math.min(m,d);m=Math.max(m,f);a=n.get(m);var w=c.getClosestInfoForScale(m),t=w.getColumnForX(this.state.center[0]),p=w.getRowForY(this.state.center[1]);a.sort(function(a,b){var c=w.denormalizeCol(a.col,a.world),d=w.denormalizeCol(b.col,b.world);return Math.sqrt((t-c)*(t-c)+(p-a.row)*(p-a.row))-Math.sqrt((t-d)*(t-d)+(p-b.row)*
(p-b.row))});e.clear();n.clear();return a[0]};return a}()})},"esri/core/QueueProcessor":function(){define(["require","exports","dojo/Deferred","./Queue"],function(a,f,m,h){var e={};return function(){function a(a){this._apiPromises=new Map;this._resolvingPromises=new Map;this._isPaused=!1;this.concurrency=1;a.concurrency&&(this.concurrency=a.concurrency);this._queue=new h(a.peeker?{peeker:a.peeker}:void 0);this.process=a.process}Object.defineProperty(a.prototype,"length",{get:function(){return this._resolvingPromises.size+
this._queue.length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._queue.clear();var a=[];this._resolvingPromises.forEach(function(d){return a.push(d)});this._resolvingPromises.clear();a.forEach(function(a){return a.cancel()});a.length=0;this._apiPromises.forEach(function(d){return a.push(d)});this._apiPromises.clear();a.forEach(function(a){return a.cancel()});this._isPaused=!1};a.prototype.find=function(a,d){var c=this,b=void 0;this._apiPromises.forEach(function(e,f){a.call(d,
f)&&(b=c._apiPromises.get(f).promise)});return b};a.prototype.has=function(a){return this._apiPromises.has(a)};a.prototype.pause=function(){this._isPaused=!0};a.prototype.push=function(a){var d=this;if(this._apiPromises.has(a))return this._apiPromises.get(a).promise;var c=new m(function(b){d._resolvingPromises.has(a)?d._resolvingPromises.get(a).cancel(b):(d._remove(a),d._scheduleNext())});this._add(a,c);this._scheduleNext();return c.promise};a.prototype.reset=function(){var a=[];this._resolvingPromises.forEach(function(d){return a.push(d)});
this._resolvingPromises.clear();a.forEach(function(a){return a.cancel(e)})};a.prototype.resume=function(){this._isPaused=!1;this._scheduleNext()};a.prototype._scheduleNext=function(){this._isPaused||this._next()};a.prototype._next=function(){this._resolvingPromises.size!==this.concurrency&&this._process(this._queue.pop())};a.prototype._process=function(a){var d=this;if(null!=a){var c=this._apiPromises.get(a),b=this.process(a);b&&"function"===typeof b.then?(this._resolvingPromises.set(a,b),b.then(function(b){c.resolve(b);
d._remove(a);d._scheduleNext()},function(b){b===e?d._process(a):(c.reject(b),d._remove(a),d._scheduleNext())})):(c.resolve(b),this._remove(a),this._scheduleNext())}};a.prototype._add=function(a,d){this._apiPromises.set(a,d);this._queue.push(a)};a.prototype._remove=function(a){this._queue.remove(a);this._apiPromises.delete(a);this._resolvingPromises.delete(a)};return a}()})},"esri/core/Queue":function(){define(["require","exports"],function(a,f){return function(){function a(a){this._items=[];this._itemSet=
new Set;this._peeker=function(a){return a[0]};this._length=0;a&&a.peeker&&(this._peeker=a.peeker)}Object.defineProperty(a.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};a.prototype.peek=function(){if(0!==this._length)return this._peeker(this._items)};a.prototype.push=function(a){this.contains(a)||this._add(a)};a.prototype.contains=function(a){return 0<this._length&&this._itemSet.has(a)};
a.prototype.pop=function(){if(0!==this._length){var a=this.peek();this._remove(a);return a}};a.prototype.remove=function(a){this.contains(a)&&this._remove(a)};a.prototype._add=function(a){this._items.push(a);this._itemSet.add(a);this._length++};a.prototype._remove=function(a){this._itemSet.delete(a);this._items.splice(this._items.indexOf(a),1);this._length--};return a}()})},"esri/views/2d/tiling/TileStrategy":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./TileKey"],
function(a,f,m,h){var e=new h(0,0,0,0),l=new Map,n=[],d=[];return function(){function a(a){this._previousResolution=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.tileIndex=new Map;this.tiles=[];this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;a.cachePolicy&&(this.cachePolicy=a.cachePolicy)}a.prototype.destroy=function(){this.tileIndex.clear()};a.prototype.update=function(a){var b=this,c=this.tileIndex,f=this.tileInfoView.getTileCoverage(a.state);
if(f){var h=f.spans,m=f.lodInfo,t=m.level,p=a.state.resolution,v=!a.stationary&&p>this._previousResolution;this._previousResolution=p;this.tiles.length=0;l.clear();var g=0,r=0;if(0<h.length)for(var z=0;z<h.length;z++){a=h[z];for(var y=a.row,A=a.colTo,F=a.colFrom;F<=A;F++)g++,a=e.set(t,y,m.normalizeCol(F),m.getWorldForColumn(F)).id,c.has(a)?(p=c.get(a),p.attached?(l.set(a,p),r++):p.attached||v||this._addParentTile(a,l)):(p=this.acquireTile(e),this.tileIndex.set(a,p),v||this._addParentTile(a,l))}var B=
r===g;d.length=0;n.length=0;c.forEach(function(a,c){e.set(c);if(!l.has(c)){var g=b.tileInfoView.intersects(f,e);!g||!v&&B?"purge"===b.cachePolicy?n.push(c):(e.level>t||!g)&&n.push(c):a.attached?d.push(c):v&&n.push(c)}});for(h=0;h<d.length;h++)a=d[h],(p=c.get(a))&&p.attached&&l.set(a,p);for(h=0;h<n.length;h++)a=n[h],p=c.get(a),this.releaseTile(p),c["delete"](a);l.forEach(function(a){return b.tiles.push(a)});d.length=0;n.length=0;l.clear()}};a.prototype._addParentTile=function(a,c){for(var b=null;a=
this.tileInfoView.getTileParentId(a);)if(this.tileIndex.has(a)&&(b=this.tileIndex.get(a))&&b.attached){c.has(b.key.id)||c.set(b.key.id,b);break}};return a}()})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(a,f,m){a=function(){function a(a,f,h,d){"string"===typeof a?(a=a.split("/"),f=a[1],h=a[2],d=a[3],this.level=+a[0],this.row=+f,this.col=+h,this.world=+d||0):a&&"object"===typeof a?(this.level=a.level||0,this.row=a.row||0,this.col=a.col||
0,this.world=a.world||0):(this.level=+a||0,this.row=+f||0,this.col=+h||0,this.world=+d||0)}a.from=function(e,f,h,d){return a.pool.acquire(e,f,h,d)};a.getId=function(a,f,h,d){return"object"===typeof a?a.level+"/"+a.row+"/"+a.col+"/"+a.world:a+"/"+f+"/"+h+"/"+d};Object.defineProperty(a.prototype,"id",{get:function(){return a.getId(this)},enumerable:!0,configurable:!0});a.prototype.equals=function(a){return this.level===a.level&&this.row===a.row&&this.col===a.col&&this.world===a.world};a.prototype.release=
function(){this.world=this.col=this.row=this.level=0};a.prototype.set=function(a,f,h,d){var c=typeof a;"object"===c?(this.level=a.level||0,this.row=a.row||0,this.col=a.col||0,this.world=a.world||0):"string"===c?(a=a.split("/"),f=a[1],h=a[2],d=a[3],this.level=parseFloat(a[0]),this.row=parseFloat(f),this.col=parseFloat(h),this.world=parseFloat(d)):(this.level=a,this.row=f,this.col=h,this.world=d);return this};a.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};
return a}();a.pool=new m(a,!0,null,25,50);return a})},"esri/views/2d/tiling/TileInfoView":function(){define("require exports ./LODInfo ./TileKey ./TileSpan ./TileCoverage".split(" "),function(a,f,m,h,e,l){var n=function(){function a(a,c,d,e,f,h,l,p){this.x=a;this.ymin=c;this.ymax=d;this.invM=e;this.leftAdjust=f;this.rightAdjust=h;this.leftBound=l;this.rightBound=p}a.create=function(b,c){b[1]>c[1]&&(p=[c,b],b=p[0],c=p[1]);p=b[0];b=b[1];var d=c[0];c=c[1];var e=d-p,f=c-b,f=0!==f?e/f:0,k=(Math.ceil(b)-
b)*f,h=(Math.floor(b)-b)*f;return new a(p,Math.floor(b),Math.ceil(c),f,0>e?k:h,0>e?h:k,0>e?d:p,0>e?p:d);var p};a.prototype.incrRow=function(){this.x+=this.invM};a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return a}(),d=[[0,0],[0,0],[0,0],[0,0]];return function(){function a(a,c){var b=this;this.tileInfo=a;this.fullExtent=c;this.scales=[];this._lodInfos=null;this._infoByScale=
{};this._infoByLevel={};var d=a.lods.slice();d.sort(function(a,b){return b.scale-a.scale});var e=this._lodInfos=d.map(function(b){return m.create(a,b,c)});d.forEach(function(a,c){b._infoByLevel[a.level]=e[c];b._infoByScale[a.scale]=e[c];b.scales[c]=a.scale},this);this._wrap=a.spatialReference.isWrappable}a.prototype.getTileBounds=function(a,c){var b=this._infoByLevel[c.level];return b?b.getTileBounds(a,c):a};a.prototype.getTileCoords=function(a,c){var b=this._infoByLevel[c.level];return b?b.getTileCoords(a,
c):a};a.prototype.getTileCoverage=function(a){var b=this.getClosestInfoForScale(a.scale),c=l.pool.acquire(b),f=this._wrap,h;h=Infinity;var m=-Infinity,t,p,v=c.spans;d[0][0]=d[0][1]=d[1][1]=d[3][0]=0;d[1][0]=d[2][0]=a.size[0];d[2][1]=d[3][1]=a.size[1];for(var g=0;g<d.length;g++){var r=d[g];a.toMap(r,r);r[0]=b.getColumnForX(r[0]);r[1]=b.getRowForY(r[1])}a=[];r=3;for(g=0;4>g;g++){if(d[g][1]!==d[r][1]){var z=n.create(d[g],d[r]);h=Math.min(z.ymin,h);m=Math.max(z.ymax,m);void 0===a[z.ymin]&&(a[z.ymin]=
[]);a[z.ymin].push(z)}r=g}if(null==h||null==m||100<m-h)return null;for(r=[];h<m;){null!=a[h]&&(r=r.concat(a[h]));t=Infinity;p=-Infinity;for(g=r.length-1;0<=g;g--)z=r[g],t=Math.min(t,z.getLeftCol()),p=Math.max(p,z.getRightCol());t=Math.floor(t);p=Math.floor(p);if(h>=b.first[1]&&h<=b.last[1])if(f)if(b.size[0]<b.worldSize[0])for(z=Math.floor(p/b.worldSize[0]),g=Math.floor(t/b.worldSize[0]);g<=z;g++)v.push(new e(h,Math.max(b.getFirstColumnForWorld(g),t),Math.min(b.getLastColumnForWorld(g),p)));else v.push(new e(h,
t,p));else t>b.last[0]||p<b.first[0]||(t=Math.max(t,b.first[0]),p=Math.min(p,b.last[0]),v.push(new e(h,t,p)));h+=1;for(g=r.length-1;0<=g;g--)z=r[g],z.ymax>=h?z.incrRow():r.splice(g,1)}return c};a.prototype.getTileIdAtParent=function(a,c){c=h.pool.acquire(c);var b=this._infoByLevel[c.level];if(a.resolution<b.resolution)throw Error("Cannot calculate parent tile. destination LOD's resolution "+a.resolution+" is not a parent resolution of "+b.resolution);return a.resolution===b.resolution?c.id:h.getId(a.level,
Math.floor(c.row*b.resolution/a.resolution+.01),Math.floor(c.col*b.resolution/a.resolution+.01),c.world)};a.prototype.getTileParentId=function(a){a=h.pool.acquire(a);var b=this._lodInfos.indexOf(this._infoByLevel[a.level])-1;if(0>b)return h.pool.release(a),null;b=this.getTileIdAtParent(this._lodInfos[b],a);h.pool.release(a);return b};a.prototype.getTileResolution=function(a){return(a=this._infoByLevel[a.level])?a.resolution:-1};a.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?
a.scale:-1};a.prototype.intersects=function(a,c){var b=h.pool.acquire(c);c=this._infoByLevel[b.level];var d=a.lodInfo;if(d.resolution>c.resolution){var e=h.pool.acquire(this.getTileIdAtParent(d,b)),f=d.denormalizeCol(e.col,e.world);c=a.spans.some(function(a){return a.row===e.row&&a.colFrom<=f&&a.colTo>=f});h.pool.release(b);h.pool.release(e);return c}if(d.resolution<c.resolution){var k=a.spans.reduce(function(a,b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=
Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,-Infinity]);a=k[0];var p=k[1],l=k[2],k=k[3],g=c.denormalizeCol(b.col,b.world),m=d.getColumnForX(c.getXForColumn(g)),n=d.getRowForY(c.getYForRow(b.row)),g=d.getColumnForX(c.getXForColumn(g+1))-1;c=d.getRowForY(c.getYForRow(b.row+1))-1;h.pool.release(b);return!(m>k||g<l||n>p||c<a)}var y=d.denormalizeCol(b.col,b.world);c=a.spans.some(function(a){return a.row===b.row&&a.colFrom<=y&&a.colTo>=y});h.pool.release(b);return c};a.prototype.getClosestInfoForScale=
function(a){var b=this.scales;this._infoByScale[a]||(a=b.reduce(function(b,c,d,e){return Math.abs(c-a)<Math.abs(b-a)?c:b},b[0]));return this._infoByScale[a]};return a}()})},"esri/views/2d/tiling/LODInfo":function(){define(["require","exports","./TileKey","../../../geometry/support/spatialReferenceUtils"],function(a,f,m,h){function e(a,e,d){a[0]=e;a[1]=d;return a}return function(){function a(a,d,c,b,e,f,h,l,m,t,p,v){this.level=a;this.resolution=d;this.scale=c;this.origin=b;this.first=e;this.last=f;
this.size=h;this.norm=l;this.worldStart=m;this.worldEnd=t;this.worldSize=p;this.wrap=v}a.create=function(f,d,c){var b=h.getInfo(f.spatialReference),k=[f.origin.x,f.origin.y],l=[f.size[0]*d.resolution,f.size[1]*d.resolution],m=[-Infinity,-Infinity],n=[Infinity,Infinity],w=[Infinity,Infinity];c&&(e(m,Math.max(0,Math.floor((c.xmin-k[0])/l[0])),Math.max(0,Math.floor((k[1]-c.ymax)/l[1]))),e(n,Math.max(0,Math.floor((c.xmax-k[0])/l[0])),Math.max(0,Math.floor((k[1]-c.ymin)/l[1]))),e(w,n[0]-m[0]+1,n[1]-m[1]+
1));var t;b?(f=[Math.ceil(Math.round(2*b.origin[1]/d.resolution)/f.size[0]),w[1]],b=[Math.floor((b.origin[0]-k[0])/l[0]),m[1]],c=[f[0]-b[0]-1,n[1]],t=!0):(b=m,c=n,f=w,t=!1);return new a(d.level,d.resolution,d.scale,k,m,n,w,l,b,c,f,t)};a.prototype.normalizeCol=function(a){if(!this.wrap)return a;var d=this.worldSize[0];return 0>a?d-1-Math.abs((a+1)%d):a%d};a.prototype.denormalizeCol=function(a,d){return this.wrap?this.worldSize[0]*d+a:a};a.prototype.getWorldForColumn=function(a){return this.wrap?Math.floor(a/
this.worldSize[0]):0};a.prototype.getFirstColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]};a.prototype.getLastColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]+this.size[0]-1};a.prototype.getColumnForX=function(a){return(a-this.origin[0])/this.norm[0]};a.prototype.getXForColumn=function(a){return this.origin[0]+a*this.norm[0]};a.prototype.getRowForY=function(a){return(this.origin[1]-a)/this.norm[1]};a.prototype.getYForRow=function(a){return this.origin[1]-a*this.norm[1]};
a.prototype.getTileBounds=function(a,d){d=m.pool.acquire(d);var c=this.getXForColumn(this.denormalizeCol(d.col,d.world)),b=this.getYForRow(d.row+1),e=this.getXForColumn(this.denormalizeCol(d.col,d.world)+1),f=this.getYForRow(d.row);a[0]=c;a[1]=b;a[2]=e;a[3]=f;m.pool.release(d);return a};a.prototype.getTileCoords=function(a,d){d=m.pool.acquire(d);e(a,this.getXForColumn(this.denormalizeCol(d.col,d.world)),this.getYForRow(d.row));m.pool.release(d);return a};return a}()})},"esri/views/2d/tiling/TileSpan":function(){define(["require",
"exports","../../../core/ObjectPool"],function(a,f,m){a=function(){return function(a,e,f){this.row=a;this.colFrom=e;this.colTo=f}}();a.pool=new m(a,!0);return a})},"esri/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ObjectPool","../../../core/ArrayPool","./TileSpan"],function(a,f,m,h,e){a=function(){function a(a){this.lodInfo=a;this.spans=h.acquire()}a.prototype.release=function(){for(var a=0,d=this.spans;a<d.length;a++)e.pool.release(d[a]);h.release(this.spans)};
a.prototype.forEach=function(a,d){var c=this.spans,b=this.lodInfo,e=b.level;if(0!==c.length)for(var f=0;f<c.length;f++)for(var h=c[f],l=h.row,m=h.colTo,h=h.colFrom;h<=m;h++)a.call(d,e,l,b.normalizeCol(h),b.getWorldForColumn(h))};return a}();a.pool=new m(a,!0);return a})},"esri/layers/support/GraphicsManager":function(){define(["../../core/Accessor"],function(a){var f=0;return a.createSubclass({constructor:function(){this._deletedGraphicsIndex=new Set;this._intentsIndex=new Map},destroy:function(){this.removeAll();
this._intentsIndex=this._deletedGraphicsIndex=null},properties:{graphics:null,indexById:{value:null,dependsOn:["graphics","objectIdField"],get:function(){return this._createIndexById(this.graphics&&this.graphics.toArray(),this.objectIdField)}},numGraphics:{value:0,dependsOn:["indexById"],get:function(){return this.indexById?this.indexById.size:0}},objectIdField:null},_intentsIndex:null,_oldIndex:null,_deletedGraphicsIndex:null,beginPagedUpdate:function(){this._oldIndex=this.indexById;this.indexById=
null;this.notifyChange("numGraphics")},addPage:function(a,f){this.add(a,f)},revertPagedUpdate:function(){var a=this._removeLeftOnly(this.indexById,this._oldIndex);this.indexById=this._oldIndex;this._oldIndex=null;this.graphics.removeMany(a);this.notifyChange("numGraphics")},endPagedUpdate:function(){var a=this._removeLeftOnly(this._oldIndex,this.indexById);this._oldIndex=null;this.graphics.removeMany(a);this.notifyChange("numGraphics")},findGraphic:function(a){return(a=this.indexById&&this.indexById.get(a))&&
a.graphic},removeAll:function(){this.indexById=this._oldIndex=null;this.graphics.removeAll();this.notifyChange("numGraphics")},add:function(a,f){a&&a.length&&(this.indexById=this.indexById||new Map,a=this._updateAndExtractNew(a,this.indexById,this._oldIndex,f),this.graphics.removeMany(a.toRemove),this.graphics.addMany(a.toAdd),this.notifyChange("numGraphics"))},remove:function(a){this._remove(a,!1)},delete:function(a){this._remove(a,!0)},isDeleted:function(a){return this._deletedGraphicsIndex.has(a)},
createIntentToAdd:function(a){a&&this._intentsIndex.forEach(function(e,f){a.forEach(function(a){e.ignoredIds.add(a)})},this);var h=f++;this._intentsIndex.set(h,{ignoredIds:new Set});return h},findIntent:function(a){return this._intentsIndex.get(a)},removeIntent:function(a){this._intentsIndex.delete(a)},_createIndexById:function(a,f){var e;if(a&&a.length&&f){var h,m,d;e=new Map;for(h=0;m=a[h];h++)d=m.attributes&&m.attributes[f],null!=d&&e.set(d,{graphic:m,refCount:1})}return e},_updateAndExtractNew:function(a,
f,e,l){var h=[],d=[],c=a?a.length:0,b=this.objectIdField,k=this.findIntent(l);for(l=0;l<c;l++){var m=a[l],u=m.attributes&&m.attributes[b];if(null!=u){var x=e&&e.get(u);(x=f.get(u)||x)?k&&k.ignoredIds.has(u)||(f.set(u,{graphic:m,refCount:x.refCount+1}),d.push(x.graphic),h.push(m)):this.isDeleted(u)||(f.set(u,{graphic:m,refCount:1}),h.push(m))}else h.push(m)}return{toRemove:d,toAdd:h}},_remove:function(a,f){a=a||[];a="object"===typeof a[0]?a.map(function(a){return a.attributes&&a.attributes[this.objectIdField]}.bind(this)):
a;var e=this._extractGraphics(a,this._oldIndex),h=this._extractGraphics(a,this.indexById);a.forEach(function(a){f&&this._deletedGraphicsIndex.add(a);this._removeFromIndex(a,this._oldIndex,f);this._removeFromIndex(a,this.indexById,f)}.bind(this));this.graphics.removeMany(e.concat(h));this.notifyChange("numGraphics")},_removeFromIndex:function(a,f,e){if(f&&f.has(a))if(e)f.delete(a);else{e=f.get(a);var h=e.refCount-1;0===h?f.delete(a):e.refCount=h}},_removeLeftOnly:function(a,f){var e=[];a&&a.forEach(function(h,
m){var d=h.graphic;!d||f&&f.has(m)||(--h.refCount,0===h.refCount&&a.delete(m),e.push(d))});return e},_extractGraphics:function(a,f){return a&&f?a.map(function(a){return(a=f.get(a))&&a.graphic}):[]}})})},"esri/layers/graphics/controllers/SnapshotController":function(){define("dojo/_base/lang dojo/promise/all ../../support/GraphicsManager ../../../core/Accessor ../../../core/Promise ../../../core/Evented ../../../core/HandleRegistry ../../../geometry/support/scaleUtils".split(" "),function(a,f,m,h,
e,l,n,d){return h.createSubclass([e,l],{declaredClass:"esri.layers.graphics.controllers.SnapshotController",constructor:function(){this._handles=new n;this._pendingQueries=new Map},initialize:function(){this.addResolvingPromise(f([this.layer,this.layerView]));this.then(this._init.bind(this))},destroy:function(){this.cancelQuery();this._gManager&&(this._gManager.destroy(),this._gManager=null);this._handles.destroy();this._pendingQueries=this._handles=null},_cancelErrorMsg:"SnapshotController: query cancelled",
_featureResolution:{value:1,scale:3780},_gManager:null,_handles:null,_maxFeatures:{point:16E3,multipoint:8E3,polyline:4E3,polygon:4E3,multipatch:4E3},_source:null,_started:!1,properties:{_pendingQueries:null,updating:{value:!1,dependsOn:["_pendingQueries"],get:function(){return!!(this._pendingQueries&&0<this._pendingQueries.size)}},graphics:{value:null,set:function(a){this._get("graphics")!==a&&(this._handles.remove("graphics"),a&&(this._collectionChanged({added:a.toArray()}),this._handles.add(a.on("change",
this._collectionChanged.bind(this)),"graphics")),this._set("graphics",a))}},extent:{},hasAllFeatures:!1,hasFeatures:!1,layer:null,layerView:null,maxPageSize:null,pageSize:null,paginationEnabled:!1},update:function(a){this.startup()},startup:function(){this._started||(this._started=!0,this._resolutionParams=this._getResolutionParams(),this._queryFeatures())},refresh:function(){this.isResolved()&&this._started&&this._queryFeatures()},cancelQuery:function(){this._pendingQueries&&(this._pendingQueries.forEach(function(a,
b){a.isFulfilled()||a.cancel(Error(this._cancelErrorMsg))}.bind(this)),this._pendingQueries.clear(),this.notifyChange("updating"))},_init:function(){var a=this.layer;this.paginationEnabled=!!a.get("capabilities.query.supportsPagination");this._source=a.source;this.pageSize=null==this.maxPageSize?a.maxRecordCount:Math.min(a.maxRecordCount,this.maxPageSize);this._gManager=new m({graphics:this.graphics,objectIdField:a.objectIdField});this._setupStateWatchers()},_getResolutionParams:function(){var a=
this.layer,b=a.get("capabilities.query.supportsQuantization"),e;if("polyline"===a.geometryType||"polygon"===a.geometryType){var f=d.getUnitValue(this.layerView.view.spatialReference);null!=f&&(e=this._featureResolution.scale,f=this._featureResolution.value/f,e=a.maxScale?a.maxScale:a.minScale?Math.min(e,a.minScale):Math.min(e,d.getScale(this.layerView.view,a.fullExtent)),e*=f/this._featureResolution.scale)}return e?{maxAllowableOffset:b?null:e,quantizationParameters:b?{mode:"view",originPosition:"upperLeft",
tolerance:e,extent:a.fullExtent}:null}:null},_setupStateWatchers:function(){this._handles.add([this.watch("extent",this.refresh.bind(this)),this.layer.watch("definitionExpression",this.refresh.bind(this)),this.layer.on("edits",this._editsHandler.bind(this))])},_createQueryParams:function(){var c=this.layerView,b=this.layer.createQuery();b.outSpatialReference=c.view.spatialReference;b.geometry=this.extent;a.mixin(b,this._resolutionParams);this.paginationEnabled&&(b.start=0,b.num=this.pageSize);return b},
_queryFeatures:function(){this.cancelQuery();this.hasAllFeatures=this.hasFeatures=!1;this._gManager.beginPagedUpdate();this.emit("query-start");this._executeQuery(this._createQueryParams())},_executeQuery:function(a){var b=this._source.queryFeatures(a),c=this._gManager.createIntentToAdd();this._querySetup(c,b);b.then(this._processFeatureSet.bind(this,a,c)).otherwise(this._queryError.bind(this,c)).always(this._queryTeardown.bind(this,c))},_processFeatureSet:function(a,b,d){var c=d.exceededTransferLimit,
e=d.features,f=this._maxFeatures[this.layer.geometryType]||0,h=e?e.length:0,k=this._gManager.numGraphics+h,p=k>=f;p&&(f=k-f)&&e.splice(h-f,f);a=c&&this.paginationEnabled&&!p?this._queryNextPage(a):!1;e&&this._gManager.addPage(e,b);this.hasFeatures=!0;a||(this._gManager.endPagedUpdate(),this.hasAllFeatures=!c,this.emit("query-end",{success:!0}));return d},_queryNextPage:function(a){a.start+=this.pageSize;this._executeQuery(a);return!0},_queryError:function(a,b){b&&"cancel"===b.dojoType&&!this.hasFeatures?
this._gManager.revertPagedUpdate():this._gManager.endPagedUpdate();this.emit("query-end",{success:!1})},_querySetup:function(a,b){this._pendingQueries.set(a,b);this.notifyChange("updating")},_queryTeardown:function(a){this._gManager.removeIntent(a);this._pendingQueries.delete(a);this.notifyChange("updating")},_collectionChanged:function(a){var b,c,d;if(d=a.added)for(b=0;c=d[b];b++)c.layer=this.layer;if(d=a.removed)for(b=0;c=d[b];b++)c.layer=null},_editsHandler:function(a){var b=function(a){return a.objectId},
c=a.deletedFeatures.map(b);this._gManager.delete(c);a=a.addedFeatures.concat(a.updatedFeatures).map(b);a.length&&(b=this._createQueryParams(),b.objectIds=a,b=this._source.queryFeatures(b),a=this._gManager.createIntentToAdd(a),this._querySetup(a,b),b.then(this._processRefetch.bind(this,a)).otherwise(this._refetchError.bind(this,a)).always(this._queryTeardown.bind(this,a)))},_processRefetch:function(a,b){(b=b.features)&&this._gManager.add(b,a)},_refetchError:function(a,b){}})})},"esri/layers/graphics/sources/FeatureLayerSource":function(){define("dojo/_base/lang ../../../core/Accessor ../../../core/Promise ../../../core/urlUtils ../../../core/Error ../../../request ../../../tasks/QueryTask".split(" "),
function(a,f,m,h,e,l,n){return f.createSubclass([m],{getDefaults:function(d){var c=this.inherited(arguments),b=d.layer;b&&(c=a.mixin(c,{url:b.url,layerId:b.layerId,gdbVersion:b.gdbVersion}));return c},initialize:function(){this.addResolvingPromise(this._fetchService())},properties:{layer:{},layerId:{},gdbVersion:{},parsedUrl:{dependsOn:["url","layerId"],get:function(){var a=this.url?h.urlToObject(this.url):null;null!=this.layerId&&null!=a&&(a.path=h.join(a.path,this.layerId.toString()));return a}},
queryTask:{dependsOn:["parsedUrl","gdbVersion"],get:function(){return new n({url:this.parsedUrl.path,gdbVersion:this.gdbVersion})}},url:{}},applyEdits:function(a){var c=a.addFeatures.map(this._serializeFeature.bind(this)),b=a.updateFeatures.map(this._serializeFeature.bind(this));a=this._getFeatureIds(a.deleteFeatures);c={f:"json",adds:c.length?JSON.stringify(c):null,updates:b.length?JSON.stringify(b):null,deletes:a.length?a.join(","):null};return l(this.parsedUrl.path+"/applyEdits",{query:c,method:"post",
responseType:"json",callbackParamName:"callback"}).then(this._createEditsResult.bind(this))},queryFeatures:function(a){return this.queryTask.execute(a)},queryObjectIds:function(a){return this.queryTask.executeForIds(a)},queryFeatureCount:function(a){return this.queryTask.executeForCount(a)},queryExtent:function(a){return this.queryTask.executeForExtent(a)},_updateUrl:function(a){a&&(this.url=this.url.replace(/^http:/i,"https:"))},_fetchService:function(){return null==this.layerId?l(this.url,{query:{f:"json"},
responseType:"json",callbackParamName:"callback"}).then(function(a){this._updateUrl(a.ssl);(a=a.data)&&a.layers&&a.layers[0]&&(this.layerId=a.layers[0].id);return this._fetchServiceLayer()}.bind(this)):this._fetchServiceLayer()},_fetchServiceLayer:function(){return l(this.parsedUrl.path,{query:a.mixin({f:"json"},this.parsedUrl.query),responseType:"json",callbackParamName:"callback"}).then(function(a){this._updateUrl(a.ssl);this.layerDefinition=a.data}.bind(this))},_serializeFeature:function(a){var c=
a.geometry;a=a.attributes;return{geometry:c&&c.toJSON(),attributes:a}},_getFeatureIds:function(a){var c=this.layer.objectIdField,b=a[0],d=!(!b||null==b.objectId),e=!(!b||!b.attributes);return a.map(function(a){var b=null;d?b=a.objectId:e&&(b=a.attributes&&a.attributes[c]);return b},this)},_createEditsResult:function(a){var c={};a=a.data;c.addFeatureResults=a.addResults?a.addResults.map(this._createFeatureEditResult.bind(this)):[];c.updateFeatureResults=a.updateResults?a.updateResults.map(this._createFeatureEditResult.bind(this)):
[];c.deleteFeatureResults=a.deleteResults?a.deleteResults.map(this._createFeatureEditResult.bind(this)):[];return c},_createFeatureEditResult:function(a){var c=a.success?null:a.error||{};return{objectId:a.objectId,globalId:a.globalId,error:c?new e("feature-layer-source:edit-failure",c.description,{code:c.code}):null}}})})},"esri/layers/graphics/sources/MemorySource":function(){define("../../../core/Collection ../../../core/Promise ../../../core/promiseUtils ../../../core/Error ../../../tasks/support/FeatureSet ../../../Graphic ../QueryEngine".split(" "),
function(a,f,m,h,e,l,n){return a.ofType(l).createSubclass([f],{properties:{layer:{value:null},_queryEngine:{value:null,dependsOn:["layer.loaded"],get:function(){return this.get("layer.loaded")?new n({features:this,objectIdField:this.layer.objectIdField}):null}}},queryFeatures:function(a){return this._queryEngine?this._queryEngine.queryFeatures(a).then(function(a){var b=new e;b.features=a;return b}):this._rejectQuery("Not ready to execute query")},queryObjectIds:function(a){return this._queryEngine?
this._queryEngine.queryObjectIds(a):this._rejectQuery("Not ready to execute query")},queryFeatureCount:function(a){return this._queryEngine?this._queryEngine.queryFeatureCount(a):this._rejectQuery("Not ready to execute query")},queryExtent:function(a){return this._queryEngine?this._queryEngine.queryExtent(a):this._rejectQuery("Not ready to execute query")},_rejectQuery:function(a){return m.reject(new h("MemorySource",a))}})})},"esri/layers/graphics/QueryEngine":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/Error ../../core/promiseUtils ../../geometry/support/graphicsUtils".split(" "),
function(a,f,m,h,e,l,n,d,c){a=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.features=null;b.objectIdField=null;return b}m(b,a);b.prototype.queryFeatures=function(a){if(this.features)if(a)if(this._isSupportedQuery(a)){var b=this._createFilters(a);a=b.length?this._executeQuery(a,b):this._rejectQuery("Invalid query")}else a=this._rejectQuery("Unsupported query");else a=this._returnAllFeatures();else a=this._rejectQuery("Engine not initialized");return a};b.prototype.queryObjectIds=
function(a){return this.objectIdField?this.queryFeatures(a).then(this._getObjectIds.bind(this)):this._rejectQuery("Unsupported query")};b.prototype.queryFeatureCount=function(a){return this.queryFeatures(a).then(function(a){return a.length})};b.prototype.queryExtent=function(a){var b=this;return this.queryFeatures(a).then(function(a){return{count:a.length,extent:b._getExtent(a)}})};b.prototype._returnAllFeatures=function(){return d.resolve(this.features.toArray())};b.prototype._executeQuery=function(a,
b){var c=this,e=this.features.filter(function(d){return b.every(function(b){return b.call(c,d,a)})});return d.resolve(e.toArray())};b.prototype._isSupportedQuery=function(a){var b=!0;if(null!=a.distance||null!=a.geometryPrecision||a.groupByFieldsForStatistics&&a.groupByFieldsForStatistics.length||null!=a.maxAllowableOffset||a.multipatchOption||null!=a.num||a.orderByFields&&a.orderByFields.length||a.outFields&&a.outFields.length||a.outSpatialReference||a.outStatistics&&a.outStatistics.length||a.pixelSize||
a.quantizationParameters||a.relationParam||a.returnDistinctValues||null!=a.start||a.text||a.timeExtent||a.where||a.objectIds&&a.objectIds.length&&!this.objectIdField)b=!1;return b};b.prototype._createFilters=function(a){var b=[];a.objectIds&&a.objectIds.length&&b.push(this._createObjectIdFilter());a.geometry&&"extent"===a.geometry.type&&"intersects"===a.spatialRelationship&&b.push(this._createExtentFilter());return b};b.prototype._createExtentFilter=function(){return function(a,b){a=a.geometry;b=
b.geometry;return a&&b.intersects(a)}};b.prototype._createObjectIdFilter=function(){var a=this;return function(b,c){b=b.attributes;return-1<c.objectIds.indexOf(b&&b[a.objectIdField])}};b.prototype._rejectQuery=function(a){return d.reject(new n(this.declaredClass,a))};b.prototype._getObjectIds=function(a){var b=this.objectIdField,c=[];a.forEach(function(a){a=(a=a.attributes)&&a[b];null!=a&&c.push(a)});return c};b.prototype._getExtent=function(a){return a.length?c.graphicsExtent(a):null};return b}(e.declared(l));
h([e.property()],a.prototype,"features",void 0);h([e.property()],a.prototype,"objectIdField",void 0);return a=h([e.subclass("esri.layers.graphics.QueryEngine")],a)})},"esri/layers/TileLayer":function(){define("dojo/_base/lang dojo/io-query ../request ../core/urlUtils ../core/promiseUtils ../geometry/SpatialReference ./TiledLayer ./mixins/ArcGISMapService ./mixins/ArcGISCachedService ./mixins/OperationalLayer ./mixins/PortalLayer ./support/arcgisLayers ./support/arcgisLayerUrl".split(" "),function(a,
f,m,h,e,l,n,d,c,b,k,q,u){return n.createSubclass([d,c,b,k],{declaredClass:"esri.layers.TileLayer",_mapsWithAttribution:"Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" "),
_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_attributionServices:["services.arcgisonline.com/arcgis/rest/services","servicesdev.arcgisonline.com/arcgis/rest/services","servicesqa.arcgisonline.com/arcgis/rest/services"],normalizeCtorArgs:function(b,c){return"string"===typeof b?a.mixin({},{url:b},c):b},load:function(){this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service","Map Service"]}).always(this._fetchService.bind(this)))},
properties:{operationalLayerType:{get:function(){if(this.capabilities)return-1!==this.capabilities.indexOf("Map")?"ArcGISTiledMapServiceLayer":"ArcGISTiledImageServiceLayer";var a=this.url||this.portalItem&&this.portalItem.url;return a&&/\/ImageServer(\/|\/?$)/i.test(a)?"ArcGISTiledImageServiceLayer":"ArcGISTiledMapServiceLayer"}},attributionDataUrl:{dependsOn:["parsedUrl"],get:function(){return this._getDefaultAttribution(this._getMapName(this.parsedUrl.path.toLowerCase()))}},popupTemplates:null,
tileServers:{dependsOn:["parsedUrl"],value:null,cast:function(a){return Array.isArray(a)?a.map(function(a){return h.urlToObject(a).path}):null},get:function(){return this._getDefaultTileServers(this.parsedUrl.path)}},type:{value:"tile",json:{read:!1}},spatialReference:{json:{read:{source:["spatialReference","tileInfo"],reader:function(a,b){return(a=a||b.tileInfo&&b.tileInfo.spatialReference)&&l.fromJSON(a)}}}}},getTileUrl:function(a,b,c){var d=this.tileServers,e=this.parsedUrl.query?f.objectToQuery(this.parsedUrl.query):
"";this.token&&(e=e+(e?"\x26":"")+"token\x3d"+encodeURIComponent(this.token));this.resampling&&!this.tilemapCache&&this.supportsBlankTile&&(e=e+(e?"\x26":"")+"blankTile\x3dfalse");this.refreshTimestamp&&(e=e+(e?"\x26":"")+"_ts\x3d"+this.refreshTimestamp);return(d&&d.length?d[b%d.length]:this.parsedUrl.path)+"/tile/"+a+"/"+b+"/"+c+(e?"?"+e:"")},_fetchService:function(){return e.resolve().then(function(){return this.resourceInfo||m(this.parsedUrl.path,{query:a.mixin({f:"json"},this.parsedUrl.query),
responseType:"json",callbackParamName:"callback"})}.bind(this)).then(function(a){a.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));this.read(a.data,{origin:"service",url:this.parsedUrl});if(10.1===this.version&&!u.isHostedAgolService(this.url))return q.fetchServerVersion(this.url).then(function(a){this.read({currentVersion:a})}.bind(this)).otherwise(function(){})}.bind(this))},_getMapName:function(a){return(a=a.match(/^(?:https?:)?\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i))&&
a[2]},_getDefaultAttribution:function(a){if(a){var b;a=a.toLowerCase();for(var c=0,d=this._mapsWithAttribution.length;c<d;c++)if(b=this._mapsWithAttribution[c],-1<b.toLowerCase().indexOf(a))return h.makeAbsolute("//static.arcgis.com/attribution/"+b)}},_getDefaultTileServers:function(a){var b=-1!==a.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i),c=-1!==a.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i);return b||c?[a,a.replace(b?/server\.arcgisonline/i:/services\.arcgisonline/i,b?"services.arcgisonline":
"server.arcgisonline")]:[]}})})},"esri/layers/support/arcgisLayers":function(){define("require exports dojo/_base/lang dojo/when ./arcgisLayerUrl ../../core/promiseUtils ../../core/requireUtils ../../request ../../core/Error ./arcgisLayerUrl".split(" "),function(a,f,m,h,e,l,n,d,c,b){function k(a,b){return a.sublayerIds.map(function(c){return new a.Constructor(m.mixin({},b,{layerId:c,sublayerTitleMode:"service-name"}))})}function q(d){var e=b.parse(d);if(!e)return l.reject(new c("arcgis-layers:url-mismatch",
"The url '${url}' is not a valid arcgis resource",{url:d}));var g=e.serverType,f=e.sublayer,k={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"};switch(g){case "MapServer":g=null!=f?"FeatureLayer":x(d).then(function(a){return a?"TileLayer":"MapImageLayer"});break;case "ImageServer":g=t(d).then(function(a){var b=a.tileInfo&&a.tileInfo.format;return a.tileInfo?b&&"LERC"===b.toUpperCase()&&a.cacheType&&"elevation"===a.cacheType.toLowerCase()?"ElevationLayer":
"TileLayer":"ImageryLayer"});break;case "SceneServer":g=t(e.url.path).then(function(a){var b={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer"};return a&&Array.isArray(a.layers)&&0<a.layers.length&&(a=a.layers[0].layerType,null!=b[a])?b[a]:"SceneLayer"});break;default:g=k[g]}var p={FeatureLayer:!0,SceneLayer:!0},m={parsedUrl:e,Constructor:null,sublayerIds:null},q;return h(g).then(function(a){q=a;if(p[a]&&null==f)return u(d).then(function(a){1!==
a.length&&(m.sublayerIds=a)})}).then(function(){return n.when(a,"../"+q)}).then(function(a){m.Constructor=a;return m})}function u(a){return t(a).then(function(a){return a&&Array.isArray(a.layers)?a.layers.map(function(a){return a.id}).reverse():[]})}function x(a){return t(a).then(function(a){return a.tileInfo})}function w(a,b){a=a.Constructor.prototype.declaredClass;return"esri.layers.FeatureLayer"===a||"esri.layers.StreamLayer"===a?m.mixin({returnZ:!0,outFields:["*"]},b):b}function t(a){return d(a,
{responseType:"json",callbackParamName:"callback",query:{f:"json"}}).then(function(a){return a.data})}Object.defineProperty(f,"__esModule",{value:!0});f.fromUrl=function(b){return q(b.url).then(function(c){var d=w(c,m.mixin({},b.properties,{url:b.url}));return c.sublayerIds?n.when(a,"../GroupLayer").then(function(a){var b=new a({title:c.parsedUrl.title});k(c,d).forEach(function(a){return b.add(a)});return l.resolve(b)}):l.resolve(new c.Constructor(d))})};f.fetchServerVersion=function(a){if(!e.test(a))return l.reject();
a=a.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return d(a,{query:{f:"json"},responseType:"json",callbackParamName:"callback"}).then(function(a){return a.data&&a.data.currentVersion?a.data.currentVersion:l.reject()})}})},"esri/layers/FeatureLayer":function(){define("require dojo/_base/lang dojo/io-query ../Graphic ../PopupTemplate ../request ../core/kebabDictionary ../core/MultiOriginJSONSupport ../core/Collection ../core/Error ../core/Logger ../core/lang ../core/HandleRegistry ../core/promiseUtils ../core/requireUtils ../core/urlUtils ../geometry/Extent ../geometry/SpatialReference ../geometry/support/normalizeUtils ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/support/jsonUtils ../symbols/support/ElevationInfo ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/support/arcadeUtils ../renderers/support/jsonUtils ../renderers/support/styleUtils ../tasks/support/FeatureSet ../tasks/support/Query ./Layer ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/ScaleRangeLayer ./mixins/ArcGISService ./graphics/sources/MemorySource ./support/Field ./support/fieldUtils ./support/FeatureType ./support/FeatureTemplate ./support/LabelClass ./support/labelingInfo ./support/arcgisLayerUrl ./support/commonProperties".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t,p,v,g,r,z,y,A,F,B,E,C,G,L,U,P,H,K,J,R,M,ea,I,N,Y,aa,S,Z,da,V){n=n({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});var la=k.getLogger("esri.layers.FeatureLayer");k=function(a,b){a=U.fromJSON(b.featureSet);return new ea({layer:this,items:a&&a.features||[]})};var ia=H.createSubclass([K,J,R,M,d],{declaredClass:"esri.layers.FeatureLayer",viewModulePaths:{"2d":"../views/2d/layers/FeatureLayerView2D",
"3d":"../views/3d/layers/FeatureLayerView3D"},constructor:function(){this._handles=new u},normalizeCtorArgs:function(a,b){return"string"===typeof a?f.mixin({},{url:a},b):a},load:function(){var a;a=this.source&&(Array.isArray(this.source)||this.source.isInstanceOf&&this.source.isInstanceOf(c));a=this.portalItem&&a?x.resolve():this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]}).always(function(){if(this.url&&null==this.layerId&&/FeatureServer\/*$/i.test(this.url))return this._fetchFirstLayerId().then(function(a){null!=
a&&(this.layerId=a)}.bind(this))}.bind(this)).then(function(){if(!this.url&&!this._hasMemorySource())throw new b("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.createGraphicsSource().then(this._initLayerProperties.bind(this))}.bind(this));this.addResolvingPromise(a)},_handles:null,properties:{advancedQueryCapabilities:{json:{origins:{service:{read:{source:["advancedQueryCapabilities","supportsStatistics","supportsAdvancedQueries"],
reader:function(a,b){return this._readAdvancedQueryCapabilities(b)}}}},read:{source:["layerDefinition.supportsAdvancedQueries","layerDefinition.supportsStatistics"],reader:function(a,b){return this._readAdvancedQueryCapabilities(b.layerDefinition)}}}},featureReduction:{json:{origins:{webScene:{read:{source:"layerDefinition.featureReduction"},write:{target:"layerDefinition.featureReduction"}}}}},allowGeometryUpdates:{json:{origins:{service:{read:{reader:function(a){return this._readAllowGeometryUpdates(a)}}}},
read:{source:"layerDefinition.allowGeometryUpdates",reader:function(a){return this._readAllowGeometryUpdates(a)}}}},allRenderers:{readOnly:!0,dependsOn:["loaded","renderer","fields"],get:function(){return this._getAllRenderers(this.renderer)}},capabilities:{json:{origins:{service:{read:{source:"advancedQueryCapabilities supportsStatistics supportsAdvancedQueries hasAttachments hasM hasZ supportsCalculate supportsTruncate supportsValidateSql supportsCoordinatesQuantization useStandardizedQueries ownershipBasedAccessControlForFeatures allowGeometryUpdates supportsApplyEditsWithGlobalIds supportsRollbackOnFailureParameter allowUpdateWithoutMValues supportsAttachmentsByUploadId".split(" "),
reader:function(a,b){return this._readCapabilities(a,b)}}}},read:{source:"layerDefinition.capabilities layerDefinition.advancedQueryCapabilities layerDefinition.supportsStatistics layerDefinition.supportsAdvancedQueries layerDefinition.hasAttachments layerDefinition.hasM layerDefinition.hasZ layerDefinition.supportsCalculate layerDefinition.supportsTruncate layerDefinition.supportsValidateSql layerDefinition.supportsCoordinatesQuantization layerDefinition.useStandardizedQueries layerDefinition.ownershipBasedAccessControlForFeatures layerDefinition.allowGeometryUpdates layerDefinition.supportsApplyEditsWithGlobalIds layerDefinition.supportsRollbackOnFailureParameter layerDefinition.allowUpdateWithoutMValues layerDefinition.supportsAttachmentsByUploadId".split(" "),
reader:function(a,b){return this._readCapabilities(b.layerDefinition.capabilities,b.layerDefinition)}}},dependsOn:["loaded"],get:function(){var a=this._get("capabilities");!a&&this.loaded&&this._hasMemorySource()&&(a={data:{supportsAttachment:!1,supportsM:!1,supportsZ:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!0,supportsDelete:!0,supportsEditing:!0,supportsQuery:!0,supportsUpdate:!0},query:{supportsStatistics:!1,supportsCentroid:!1,supportsDistance:!1,
supportsDistinct:!1,supportsExtent:!0,supportsGeometryProperties:!1,supportsOrderBy:!1,supportsPagination:!1,supportsQuantization:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsQueryByOthers:!1},queryRelated:{supportsPagination:!1,supportsCount:!1,supportsOrderBy:!1},editing:{supportsGeometryUpdate:!0,supportsGlobalId:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,
supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}});return a}},copyright:{value:null,json:{origins:{service:{read:{source:"copyrightText"}}},read:{source:"layerDefinition.copyrightText"}}},displayField:{value:null,json:{origins:{service:{read:{source:"displayField"}}},read:{source:"layerDefinition.displayField"}}},definitionExpression:{value:null,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}},
defaultSymbol:{json:{read:A.read}},elevationInfo:{type:F,value:null,json:{origins:{service:{read:{source:"elevationInfo"},write:{target:"elevationInfo",enabled:!1}}},read:{source:"layerDefinition.elevationInfo"},write:{target:"layerDefinition.elevationInfo"}}},fields:{value:null,type:[I],json:{origins:{service:{read:!0}},read:{source:"layerDefinition.fields"}}},fullExtent:{value:null,type:p,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}},gdbVersion:null,generalizeForScale:4E3,
geometryType:{json:{origins:{service:{read:n.fromJSON}},read:{source:"layerDefinition.geometryType",reader:n.fromJSON}}},hasAttachments:{value:!1,readOnly:!0,get:function(){return!this._hasMemorySource()&&this._get("hasAttachments")},json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasAttachments"}}},hasM:{value:!1,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}},hasZ:{value:!1,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}},id:{json:{origins:{service:{read:!1},
portalItem:{read:!1}}}},isTable:{value:!1,readOnly:!0,json:{origins:{service:{read:{source:"type",reader:function(a){return"Table"===a}}}},read:{source:"layerDefinition.type",reader:function(a){return"Table"===a}}}},labelsVisible:{value:!1,json:{read:{source:["showLabels"],reader:function(a,b){return!!b.showLabels}},write:function(a,b){b.showLabels=!!a}}},labelingInfo:{value:null,type:[S],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:Z.reader},write:{target:"drawingInfo.labelingInfo",
enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:Z.reader},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}},layerId:{json:{origins:{service:{read:{source:["id"],reader:function(a,b){return b.id}}}},read:!1}},legendEnabled:{value:!0,json:{read:{source:["showLegend"],reader:function(a,b){return null!=b.showLegend?b.showLegend:!0}},write:function(a,b){b.showLegend=!!a}}},maxRecordCount:{value:null,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.maxRecordCount"}}},
minScale:{json:{origins:{service:{read:{source:["minScale","effectiveMinScale"],reader:function(a,b){return b.effectiveMinScale||a}},write:{target:["minScale"],enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},maxScale:{json:{origins:{service:{read:{source:["maxScale","effectiveMaxScale"],reader:function(a,b){return b.effectiveMaxScale||a}},write:{target:"maxScale",enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},
objectIdField:{json:{origins:{service:{read:{source:["objectIdField","fields"],reader:function(a,b){return this._readObjectIdField(b)}}}},read:{source:["layerDefinition.objectIdField","layerDefinition.fields"],reader:function(a,b){return this._readObjectIdField(b.layerDefinition)}}}},operationalLayerType:"ArcGISFeatureLayer",outFields:{value:null,dependsOn:["requiredFields"],get:function(){var a=this._get("outFields"),b=this.requiredFields;a?-1===a.indexOf("*")&&b.forEach(function(b){-1===a.indexOf(b)&&
a.push(b)}):a=b;this.loaded&&(a=a.filter(function(a){return"*"===a||!!this.getField(a)},this),a=a.map(function(a){return"*"===a?a:this.getField(a).name},this));return a},set:function(a){var b=this.requiredFields;a?-1===a.indexOf("*")&&b.forEach(function(b){-1===a.indexOf(b)&&a.push(b)}):a=b;this.loaded&&(a=a.filter(function(a){return"*"===a||!!this.getField(a)},this),a=a.map(function(a){return"*"===a?a:this.getField(a).name},this));this._set("outFields",a)}},parsedUrl:{dependsOn:["layerId"],get:function(){var a=
this.url?t.urlToObject(this.url):null;null!=this.layerId&&null!=a&&(a.path=t.join(a.path,this.layerId.toString()));return a}},popupEnabled:{value:!0,json:{read:{source:["disablePopup"],reader:function(a,b){return null!=b.disablePopup?!b.disablePopup:!0}},write:function(a,b){a||(b.disablePopup=!0)}}},popupTemplate:{value:null,type:e,json:{read:{source:["popupInfo"],reader:function(a,b){return b.popupInfo?e.fromJSON(b.popupInfo):null}},write:function(a,b){a&&(b.popupInfo=a.toJSON())}}},relationships:null,
renderer:{set:function(a){var b=this._getAllRenderers(a);N.fixRendererFields(b,this.fields);this._set("renderer",a)},json:{origins:{service:{read:{source:["drawingInfo.renderer","defaultSymbol","type"],reader:function(a,b,c){return this._readRenderer(null,b,c)}},write:{target:"drawingInfo.renderer",enabled:!1}}},read:{source:["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol","layerDefinition.type"],reader:function(a,b,c){return this._readRenderer(null,b.layerDefinition,c)}},write:{target:"layerDefinition.drawingInfo.renderer"}}},
requiredFields:{dependsOn:["allRenderers"],get:function(){var a=this.timeInfo,b=[this.objectIdField,this.typeIdField,this.editFieldsInfo&&this.editFieldsInfo.creatorField,a&&a.startTimeField,a&&a.endTimeField,this.trackIdField],c=N.rendererFields,d=[];this.allRenderers.forEach(function(a){c.forEach(function(c){b.push(f.getObject(c,!1,a))});a.valueExpression&&(d=d.concat(C.extractFieldNames(a.valueExpression)));a.visualVariables&&a.visualVariables.forEach(function(a){N.visualVariableFields.forEach(function(c){b.push(a[c])});
a.valueExpression&&(d=d.concat(C.extractFieldNames(a.valueExpression)))},this)},this);b=b.concat(d);b=b.concat(this.dataAttributes);return b.filter(function(a,b,c){return!!a&&c.indexOf(a)===b&&"function"!==typeof a})}},returnM:!1,returnZ:!1,screenSizePerspectiveEnabled:V.screenSizePerspectiveEnabled,source:{json:{origins:{portalItem:{read:{source:["featureSet"],reader:k}},webMap:{read:{source:["featureSet"],reader:k}}}},cast:function(a){return a&&(Array.isArray(a)||a.isInstanceOf&&a.isInstanceOf(c))?
new ea({layer:this,items:a}):a},set:function(a){var b=this._get("source");b!==a&&(b&&b.isInstanceOf&&b.isInstanceOf(ea)&&this._resetMemorySource(b),a&&a.isInstanceOf&&a.isInstanceOf(ea)&&this._initMemorySource(a),this._set("source",a))}},supportsCoordinatesQuantization:!1,serviceDefinitionExpression:{json:{origins:{service:{read:{source:["definitionExpression"],reader:function(a,b){return b.definitionExpression}}}}}},spatialReference:{json:{origins:{service:{read:{source:"extent",reader:function(a){if(a&&
a.spatialReference)return v.fromJSON(a.spatialReference)}}}},read:{source:"layerDefinition.extent",reader:function(a){if(a&&a.spatialReference)return v.fromJSON(a.spatialReference)}}}},templates:{type:[aa],json:{read:function(a,b){var c=b.editFieldsInfo;b=c&&c.creatorField;c=c&&c.editorField;a=a&&a.map(function(a){return aa.fromJSON(a)});this._fixTemplates(a,b);this._fixTemplates(a,c);return a}}},title:{json:{origins:{portalItem:{read:{source:["layerDefinition.title","layerDefinition.name","title"],
reader:function(a,b){a=b.layerDefinition&&b.layerDefinition.name;b=b.title||b.layerDefinition&&b.layerDefinition.title;if(a)return this._readTitleFromName(a);if("item-title"===this.sublayerTitleMode&&b)return b}}},service:{read:{source:"name",reader:function(a,b){return this._readTitleFromName(a)}}}}}},sublayerTitleMode:{type:String,value:"item-title"},trackIdField:{json:{read:{source:["timeInfo.trackIdField"],reader:function(a,b){return b.timeInfo.trackIdField}}}},type:{value:"feature",json:{read:!1}},
typeIdField:{json:{origins:{service:{read:function(a,b){return this._readTypeIdField(a,b)}}},read:{source:"layerDefinition.typeIdField",reader:function(a,b){return this._readTypeIdField(a,b.layerDefinition)}}}},types:{json:{origins:{service:{read:function(a,b){return this._readTypes(a,b)}}},read:{source:"layerDefinition.types",reader:function(a,b){return this._readTypes(a,b.layerDefinition)}}}},url:{set:function(a){var b=t.urlToObject(a),c=da.parse(b.path);c&&null!=c.sublayer&&(null==this.layerId&&
(this.layerId=c.sublayer),b=m.objectToQuery(b.query),a=c.url.path,b&&(a=a+"?"+b));this._set("url",a)},json:{write:function(a,b){a&&t.isProtocolRelative(a)&&(a="https:"+a);a&&(a=t.normalize(a),b.url=a);null!=this.layerId&&(a=t.urlToObject(a))&&(b.url=t.join(a.path,""+this.layerId),a.query&&Object.keys(a.query)&&(b.url+="?"+m.objectToQuery(a.query)))}}},userIsAdmin:!1,version:{json:{origins:{service:{read:{source:"currentVersion capabilities drawingInfo hasAttachments htmlPopupType relationships timeInfo typeIdField types".split(" "),
reader:function(a,b){return this._readVersion(b)}}},portalItem:{read:!1}},read:{source:"layerDefinition.currentVersion layerDefinition.capabilities layerDefinition.drawingInfo layerDefinition.hasAttachments layerDefinition.htmlPopupType layerDefinition.typeIdField layerDefinition.types".split(" "),reader:function(a,b){return this._readVersion(b.layerDefinition)}}}},visible:{json:{origins:{portalItem:{read:{source:["visibility","layerDefinition.defaultVisibility"],reader:function(a,b){if(b.layerDefinition&&
null!=b.layerDefinition.defaultVisibility)return!!b.layerDefinition.defaultVisibility;if(null!=b.visibility)return!!b.visibility}},write:{target:"layerDefinition.defaultVisibility"}}}}}},applyEdits:function(a){return this.load().then(function(){return this.source.applyEdits?this._processApplyEditsParams(a).then(function(a){return this.source.applyEdits(a).then(function(a){var b=function(a){return a.filter(function(a){return!a.error}).map(function(a){return q.clone(a)})},b={addedFeatures:b(a.addFeatureResults),
updatedFeatures:b(a.updateFeatureResults),deletedFeatures:b(a.deleteFeatureResults)};(b.addedFeatures.length||b.updatedFeatures.length||b.deletedFeatures.length)&&this.emit("edits",b);return a}.bind(this))}.bind(this)):x.reject(new b("FeatureLayer","Layer source does not support applyEdits capability"))}.bind(this))},createGraphicsSource:function(){return this._hasMemorySource()?(this.emit("graphics-source-create",{graphicsSource:this.source}),x.resolve(this.source)):w.when(a,"./graphics/sources/FeatureLayerSource").then(function(a){return new a({layer:this})}.bind(this)).then(function(a){this.emit("graphics-source-create",
{graphicsSource:a});return a}.bind(this))},createGraphicsController:function(b){var d=b.layerView,g=c.ofType(h),e=this.source,k=e&&e.isInstanceOf&&e.isInstanceOf(c),p=f.mixin(b.options||{},{layer:this,layerView:d,graphics:k?e:new g});return w.when(a,k?"./graphics/controllers/MemoryController":"2d"===d.view.type?"./graphics/controllers/AutoController2D":"./graphics/controllers/SnapshotController").then(function(a){return new a(p)}.bind(this)).then(function(a){this.emit("graphics-controller-create",
{graphicsController:a});return a}.bind(this))},createQuery:function(){var a=new P,b=this.get("capabilities.data");a.returnGeometry=!0;a.returnZ=b&&b.supportsZ&&this.returnZ||null;a.returnM=b&&b.supportsM&&this.returnM||null;a.outFields=this.outFields;a.where=this.definitionExpression||"1\x3d1";a.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null;return a},getFieldDomain:function(a,b){var c,d;b=(b=b&&b.feature)&&b.attributes;var g=this.typeIdField&&b&&b[this.typeIdField];null!=g&&
this.types&&this.types.some(function(b){return b.id==g?((c=b.domains&&b.domains[a])&&"inherited"===c.type&&(c=this._getLayerDomain(a),d=!0),!0):!1},this);d||c||(c=this._getLayerDomain(a));return c},getField:function(a,b){return N.getField(a,b||this.fields)},graphicChanged:function(a){this.emit("graphic-update",a)},queryFeatures:function(a){var c=this;return this.load().then(function(){a=a||c.createQuery();return c.source.queryFeatures?c.source.queryFeatures(a):x.reject(new b("FeatureLayer","Layer source does not support queryFeatures capability"))}).then(function(b){if(a.returnJSON)return b;
if(b&&b.features){var d=c.popupTemplate;b.features.forEach(function(a){a.popupTemplate=d;a.layer=c})}return b})},queryObjectIds:function(a){var c=this;return this.load().then(function(){a=a||c.createQuery();return c.source.queryObjectIds?c.source.queryObjectIds(a):x.reject(new b("FeatureLayer","Layer source does not support queryObjectIds capability"))})},queryFeatureCount:function(a){var c=this;return this.load().then(function(){a=a||c.createQuery();return c.source.queryFeatureCount?c.source.queryFeatureCount(a):
x.reject(new b("FeatureLayer","Layer source does not support queryFeatureCount capability"))})},queryExtent:function(a){var c=this;return this.load().then(function(){a=a||c.createQuery();return c.source.queryExtent?c.source.queryExtent(a):x.reject(new b("FeatureLayer","Layer source does not support queryExtent capability"))})},read:function(a,b){switch(b&&b.origin){case "web-map":this.inherited(arguments,[{outFields:["*"]},b]);break;case "web-scene":this.inherited(arguments,[{mode:ia.MODE_SNAPSHOT,
returnZ:!0,outFields:["*"]},b])}var c=a.featureCollection;if(c){var d=c.layers;d&&1===d.length&&(this.inherited(arguments,[d[0],b]),null!=c.showLegend&&this.inherited(arguments,[{showLegend:c.showLegend},b]))}this.inherited(arguments,[a,b]);return this},write:function(a,c){if(c&&"web-scene"===c.origin&&c.messages){if(!this.url)return c.messages.push(new b("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' require a url to a service to be written to web scenes",
{layer:this})),null;if(this.isTable)return c.messages.push(new b("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' using a Table source cannot written to web scenes",{layer:this})),null}return this.inherited(arguments)},_getLayerDomain:function(a){var b;this.fields&&this.fields.some(function(c){c.name===a&&(b=c.domain);return!!b});return b},_fetchFirstLayerId:function(){return l(this.url,{query:{f:"json"},callbackParamName:"callback",responseType:"json"}).then(function(a){if(a.data&&
Array.isArray(a.data.layers)&&0<a.data.layers.length)return a.data.layers[0].id})},_initLayerProperties:function(a){this.source||(this.source=a);a.url&&(this.url=a.url);a.layerDefinition&&this.read(a.layerDefinition,{origin:"service",url:this.parsedUrl});this._verifySource();this._verifyFields();this._addSymbolUrlTokens();N.fixRendererFields(this._getAllRenderers(this.renderer),this.fields);this.watch("token",function(){this._addSymbolUrlTokens()}.bind(this));return L.loadStyleRenderer(this,{origin:"service"})},
_findUrlBasedSymbols:function(){var a=this.renderer;if(!a)return[];var b=[];a.symbol&&b.push(a.symbol);a.defaultSymbol&&b.push(a.defaultSymbol);(a=a.classBreakInfos||a.uniqueValueInfos)&&a.forEach(function(a){a.symbol&&b.push(a.symbol)});return b.filter(function(a){return!!a.url})},_addSymbolUrlTokens:function(){var a=this.token;!this._hasMemorySource()&&a&&this._findUrlBasedSymbols().forEach(function(b){var c=b.url;if(c&&-1!==c.search(/https?\:/i)&&!/[?&]token=/.test(c)){var d=-1===c.indexOf("?")?
"?":"\x26";b.url=c+d+"token\x3d"+a}})},_getAllRenderers:function(a){var b=[];a&&[a,a.trackRenderer,a.observationRenderer,a.latestObservationRenderer].forEach(function(a){a&&(b.push(a),a.rendererInfos&&a.rendererInfos.forEach(function(a){a.renderer&&b.push(a.renderer)}))});return b},_verifyFields:function(){var a=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+a+")");this.isTable||this._hasMemorySource()||
-1!==a.search(/\/FeatureServer\//i)||this.fields&&this.fields.some(function(a){return"geometry"===a.type})||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+a+")")},_fixTemplates:function(a,b){a&&a.forEach(function(a){(a=a.prototype&&a.prototype.attributes)&&b&&delete a[b]})},_verifySource:function(){if(this._hasMemorySource()){if(this.url)throw new b("feature-layer:mixed-source-and-url",
"FeatureLayer cannot be created with both an in-memory source and a url");var a=["geometryType","fields","objectIdField"];if(!a.every(function(a){return this.hasOwnProperty(a)},this))throw new b("feature-layer:missing-property","FeatureLayer created as feature collection requires properties: "+a.join(),{requiredProperties:a});}else{if(this.isTable)throw new b("feature-layer:source-type-not-supported","The table feature service type is not yet supported",{sourceType:"Table"});if(!this.url)throw new b("feature-layer:source-or-url-required",
"FeatureLayer requires either a url, a valid portal item or a source");}},_initMemorySource:function(a){a.forEach(function(a){a.layer=this}.bind(this));this._handles.add([a.on("after-add",function(a){a.item.layer=this}.bind(this)),a.on("after-remove",function(a){a.item.layer=null}.bind(this))],"fl-source")},_resetMemorySource:function(a){a.forEach(function(a){a.layer=null}.bind(this));this._handles.remove("fl-source")},_hasMemorySource:function(){return!(this.url||!this.source)},_readTitleFromName:function(a){var b=
this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?da.titleFromUrlAndName(this.url,a):a;if(a=a||this.url&&da.parse(this.url).title)return"item-title-and-service-name"===this.sublayerTitleMode&&b&&(a=b+" - "+a),da.cleanTitle(a)},_readAdvancedQueryCapabilities:function(a){return a.advancedQueryCapabilities||{supportsPagination:!1,supportsQueryWithDistance:!1,supportsReturningQueryExtent:!1,supportsStatistics:a.supportsStatistics,supportsOrderBy:a.supportsAdvancedQueries,
supportsDistinct:a.supportsAdvancedQueries}},_readAllowGeometryUpdates:function(a){return null==a?!0:a},_readCapabilities:function(a,b){return{data:this._readDataCapabilities(b),operations:this._readOperationsCapabilities(a,b),query:this._readQueryCapabilities(b),queryRelated:this._readQueryRelatedCapabilities(b),editing:this._readEditingCapabilities(b)}},_readBoolean:function(a,b,c){return!(a&&a.hasOwnProperty(b)?!a[b]:!c)},_readDataCapabilities:function(a){return{supportsAttachment:this._readBoolean(a,
"hasAttachments",!1),supportsM:this._readBoolean(a,"hasM",!1),supportsZ:this._readBoolean(a,"hasZ",!1)}},_readOperationsCapabilities:function(a,b){a=a?a.toLowerCase().split(",").map(function(a){return a.trim()}):[];var c=-1!==a.indexOf("editing"),d=c&&-1!==a.indexOf("create"),g=c&&-1!==a.indexOf("delete"),e=c&&-1!==a.indexOf("update");!c||d||g||e||(d=g=e=!0);return{supportsCalculate:this._readBoolean(b,"supportsCalculate",!1),supportsTruncate:this._readBoolean(b,"supportsTruncate",!1),supportsValidateSql:this._readBoolean(b,
"supportsValidateSql",!1),supportsAdd:d,supportsDelete:g,supportsEditing:c,supportsQuery:-1!==a.indexOf("query"),supportsUpdate:e}},_readQueryCapabilities:function(a){var b=a.advancedQueryCapabilities,c=a.ownershipBasedAccessControlForFeatures;return{supportsStatistics:this._readBoolean(b,"supportsStatistics",a.supportsStatistics),supportsCentroid:this._readBoolean(b,"supportsReturningGeometryCentroid",!1),supportsDistance:this._readBoolean(b,"supportsQueryWithDistance",!1),supportsDistinct:this._readBoolean(b,
"supportsDistinct",a.supportsAdvancedQueries),supportsExtent:this._readBoolean(b,"supportsReturningQueryExtent",!1),supportsGeometryProperties:this._readBoolean(b,"supportsReturningGeometryProperties",!1),supportsOrderBy:this._readBoolean(b,"supportsOrderBy",a.supportsAdvancedQueries),supportsPagination:this._readBoolean(b,"supportsPagination",!1),supportsQuantization:this._readBoolean(a,"supportsCoordinatesQuantization",!1),supportsResultType:this._readBoolean(b,"supportsQueryWithResultType",!1),
supportsSqlExpression:this._readBoolean(b,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:this._readBoolean(a,"useStandardizedQueries",!1),supportsQueryByOthers:this._readBoolean(c,"allowOthersToQuery",!0)}},_readQueryRelatedCapabilities:function(a){a=a.advancedQueryCapabilities;var b=this._readBoolean(a,"supportsAdvancedQueryRelated",!1);return{supportsPagination:this._readBoolean(a,"supportsQueryRelatedPagination",!1),supportsCount:b,supportsOrderBy:b}},_readEditingCapabilities:function(a){var b=
a.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:this._readBoolean(a,"allowGeometryUpdates",!0),supportsGlobalId:this._readBoolean(a,"supportsApplyEditsWithGlobalIds",!1),supportsRollbackOnFailure:this._readBoolean(a,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:this._readBoolean(a,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:this._readBoolean(a,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:this._readBoolean(b,"allowAnonymousToDelete",
!0),supportsDeleteByOthers:this._readBoolean(b,"allowOthersToDelete",!0),supportsUpdateByAnonymous:this._readBoolean(b,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:this._readBoolean(b,"allowOthersToUpdate",!0)}},_readObjectIdField:function(a){if(a.objectIdField)return a.objectIdField;if(a.fields)for(var b=0;b<a.fields.length;b++){var c=a.fields[b];if("esriFieldTypeOID"===c.type)return c.name}},_readRenderer:function(a,b,c){var d;if(a=b.drawingInfo&&b.drawingInfo.renderer||void 0)(a=G.read(a,
b,c)||void 0)||la.error("Failed to create renderer",{rendererDefinition:b.drawingInfo.renderer,layer:this,context:c});else if(b.defaultSymbol)A.read(b.defaultSymbol,b,c),b.types&&b.types.length?(a=new E({defaultSymbol:d,field:b.typeIdField}),b.types.forEach(function(b){a.addUniqueValueInfo(b.id,A.read(b.symbol,b,c))})):a=new B({symbol:d});else if("Table"!==b.type){switch(b.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":d=new r;break;case "esriGeometryPolyline":d=new z;break;
case "esriGeometryPolygon":d=new y}a=d&&new B({symbol:d})}return a},_readTypeIdField:function(a,b){a&&(b=this.getField(a,b.fields))&&(a=b.name);return a},_readTypes:function(a,b){var c=(b=b.editFieldsInfo)&&b.creatorField,d=b&&b.editorField;return a&&a.map(function(a){a=new Y(a);this._fixTemplates(a.templates,c);this._fixTemplates(a.templates,d);return a},this)},_readVersion:function(a){return a.currentVersion?a.currentVersion:a.hasOwnProperty("capabilities")||a.hasOwnProperty("drawingInfo")||a.hasOwnProperty("hasAttachments")||
a.hasOwnProperty("htmlPopupType")||a.hasOwnProperty("relationships")||a.hasOwnProperty("timeInfo")||a.hasOwnProperty("typeIdField")||a.hasOwnProperty("types")?10:9.3},_processApplyEditsParams:function(a){if(!a)return x.reject(new b("feature-layer:missing-parameters","'addFeatures', 'updateFeatures' or 'deleteFeatures' parameter is required"));a=f.mixin({},a);a.addFeatures=a.addFeatures||[];a.updateFeatures=a.updateFeatures||[];a.deleteFeatures=a.deleteFeatures||[];if(a.addFeatures.length||a.updateFeatures.length||
a.deleteFeatures.length){var c=function(a){var b=new h;b.geometry=a.geometry;b.attributes=a.attributes;return b};a.addFeatures=a.addFeatures.map(c);a.updateFeatures=a.updateFeatures.map(c);return this._normalizeGeometries(a).then(function(a){return x.resolve(a)})}return x.reject(new b("feature-layer:missing-parameters","'addFeatures', 'updateFeatures' or 'deleteFeatures' parameter is required"))},_normalizeGeometries:function(a){var b=a.addFeatures,c=a.updateFeatures,d=b.concat(c).map(function(a){return a.geometry});
return g.normalizeCentralMeridian(d).then(function(d){var g=b.length,e=c.length;d.slice(0,g).forEach(function(b,c){a.addFeatures[c].geometry=b});d.slice(g,g+e).forEach(function(b,c){a.updateFeatures[c].geometry=b});return a})}});return ia})},"esri/renderers/SimpleRenderer":function(){define(["../core/declare","../core/lang","../symbols/support/jsonUtils","./Renderer"],function(a,f,m,h){var e=a(h,{declaredClass:"esri.renderers.SimpleRenderer",properties:{description:{value:null,json:{write:!0}},label:{value:null,
json:{write:!0}},symbol:{value:null,json:{read:m.read,write:function(a,e,d,c){e.symbol=m.write(a,{},c)}}},type:"simple"},getSymbol:function(a,e){return this.symbol},clone:function(){return new e({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:f.clone(this.visualVariables),authoringInfo:f.clone(this.authoringInfo)})}});return e})},"esri/renderers/Renderer":function(){define("../core/declare ../core/Accessor ../core/JSONSupport ../core/kebabDictionary ../core/screenUtils ../core/lang ../core/Error dojo/_base/lang ../Color ./support/utils ./support/arcadeUtils".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k){var q=h({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),u=h({widthAndDepth:"width-and-depth"}),x=h({classedSize:"classed-size",classedColor:"classed-color",univariateColorSize:"univariate-color-size"}),w=h({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),t=h({percentTotal:"percent-of-total"}),
p=Math.PI;return a([f,m],{declaredClass:"esri.renderers.Renderer",properties:{authoringInfo:{value:null,json:{read:function(a,b){a&&(a=l.clone(a),a.type&&(a.type=x.fromJSON(a.type)),a.classificationMethod&&(a.classificationMethod=w.fromJSON(a.classificationMethod)),a.visualVariables&&a.visualVariables.forEach(function(a){a.type&&(a.type=q.fromJSON(a.type));a.style&&(a.style=t.fromJSON(a.style))}));return a},write:function(a,b){a&&(a=l.clone(a),a.type&&(a.type=x.toJSON(a.type)),a.classificationMethod&&
(a.classificationMethod=w.toJSON(a.classificationMethod)),a.visualVariables&&a.visualVariables.forEach(function(a){a.type&&(a.type=q.toJSON(a.type));a.style&&(a.style=t.toJSON(a.style))}));b.authoringInfo=a}}},requiredFields:{dependsOn:["visualVariables"],get:function(){var a=Object.create(null);this.collectRequiredFields(a);return Object.keys(a)}},type:{readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}},visualVariables:{json:{read:{source:["visualVariables","rotationType","rotationExpression"],
reader:function(a,b){return this._readVariables(a,b)}},write:function(a,b,c,d){var g=[];a.forEach(function(a,b){"size"===a.type?g.push(this._writeSizeInfo(a,d,b)):"color"===a.type?g.push(this._writeColorInfo(a,d,b)):"opacity"===a.type?g.push(this._writeOpacityInfo(a,d,b)):"rotation"===a.type&&g.push(this._writeRotationInfo(a,d,b))},this);b.visualVariables=g}}}},constructor:function(){this._cache={}},_rotationRE:/^\[([^\]]+)\]$/i,_viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,_visualVariablesSetter:function(a){var b=
this._cache;this.visualVariables&&this.visualVariables.forEach(function(a,c){b.hasOwnProperty(c)&&(b[c]=null)},this);a&&a.some(function(a){return!!a.target})&&a.sort(function(a,b){return a.target===b.target?0:a.target?1:-1});a&&a.forEach(function(a,c){"color"===a.type?b[c]=this._processColorInfo(a):"opacity"===a.type?b[c]=this._processOpacityInfo(a):"size"===a.type?b[c]=this._processSizeInfo(a):"rotation"===a.type&&(b[c]=this._processRotationInfo(a))},this);this._set("visualVariables",a)},getSymbol:function(a,
b){},getVisualVariableValues:function(a,b){var c=this.visualVariables,g;c&&(g=c.map(function(c){var g,e=c.type,f=e+"Info";b=d.mixin({},b);b[f]=c;switch(e){case "size":g=this.getSize(a,b);break;case "color":g=this.getColor(a,b);break;case "opacity":g=this.getOpacity(a,b);break;case "rotation":g=this.getRotationAngle(a,b)}return{variable:c,value:g}},this).filter(function(a){return null!=a.value},this));return g},hasVisualVariables:function(a,b){return a?!!this.getVisualVariablesForType(a,b):!!(this.getVisualVariablesForType("size",
b)||this.getVisualVariablesForType("color",b)||this.getVisualVariablesForType("opacity",b)||this.getVisualVariablesForType("rotation",b))},getVisualVariablesForType:function(a,b){var c=this.visualVariables,d;c&&(d=c.filter(function(c){return c.type===a&&("string"===typeof b?c.target===b:!1===b?!c.target:!0)}))&&0===d.length&&(d=void 0);return d},getSize:function(a,b){var c=this._getVarInfo(b&&b.sizeInfo,"size"),d=c.variable,c=this._cache[c.cacheKey],g=null;if(d)var e=d.minSize,g=d.maxSize,e="object"===
typeof e&&e?this._getSize(a,e,c&&c.minSize,b):e,g="object"===typeof g&&g?this._getSize(a,g,c&&c.maxSize,b):g,g=this._getSize(a,d,c&&c.root,b,[e,g]);return g},getSizeRangeAtScale:function(a,b){var c;a=this._getVarInfo(a,"size");var d=this._cache[a.cacheKey],g={scale:b};if((a=a.variable)&&b){b=a.minSize;var e=a.maxSize;a="object"===typeof b&&b?this._getSize({},b,d&&d.minSize,g):b;d="object"===typeof e&&e?this._getSize({},e,d&&d.maxSize,g):e;if(null!=a||null!=d)a>d&&(c=d,d=a,a=c),c={minSize:a,maxSize:d}}return c},
getColor:function(a,b){var c=this._getVarInfo(b&&b.colorInfo,"color");return this._getColorComponent(a,c.variable,this._cache[c.cacheKey],b)},getOpacity:function(a,b){var c=this._getVarInfo(b&&b.opacityInfo,"opacity");return this._getColorComponent(a,c.variable,this._cache[c.cacheKey],b,!0)},getRotationAngle:function(a,b){var c=this._getVarInfo(b&&b.rotationInfo,"rotation"),g=c.variable,e=this._cache[c.cacheKey],f=g.axis||"heading",c="heading"===f&&"arithmetic"===g.rotationType?90:0,f="heading"===
f&&"arithmetic"===g.rotationType?-1:1,g=g.field,e=e&&e.compiledFunc,h=a.attributes,p=0;if(g||e)e?p=k.executeFunction(e,k.createExecContext(a,k.getViewInfo(b))):d.isFunction(g)?p=g.apply(this,arguments):h&&(p=h[g]||0),p="number"!==typeof p||isNaN(p)?null:c+f*p;return p},collectRequiredFields:function(a){var b=[];this.visualVariables&&(b=b.concat(this.visualVariables));b.forEach(function(b){b&&b.field&&(a[b.field]=!0);b&&b.normalizationField&&(a[b.normalizationField]=!0)})},_getVarInfo:function(a,b){var c;
a&&a.type===b&&this.visualVariables?(c=this.visualVariables.indexOf(a),a=this.visualVariables[c]):this.visualVariables&&(a=(a=this.getVisualVariablesForType(b))&&a[0],c=this.visualVariables.indexOf(a));return{variable:a,cacheKey:c}},_readSizeInfo:function(a){a.axis&&(a.axis=u.fromJSON(a.axis));return a},_readColorInfo:function(a){a&&(a.colors&&a.colors.forEach(function(b,e){d.isArray(b)?a.colors[e]=c.fromJSON(b):a.colors[e]=new c(b)}),a.stops&&a.stops.forEach(function(b,e){b.color&&d.isArray(b.color)?
a.stops[e].color=c.fromJSON(b.color):b.color&&(a.stops[e].color=new c(b.color))}));return a},_readOpacityInfo:function(a){var b;a&&(b=d.mixin({},a),b.transparencyValues&&(b.opacityValues=b.transparencyValues.map(function(a){return 1-a/100}),delete b.transparencyValues),b.stops&&(b.stops=b.stops.map(function(a){a=d.mixin({},a);a.opacity=1-a.transparency/100;delete a.transparency;return a})));return b},_readVariables:function(a,b){a&&(a=a.map(function(a){a=l.clone(a);a.type=q.fromJSON(a.type);"size"===
a.type?a=this._readSizeInfo(a):"color"===a.type?a=this._readColorInfo(a):"opacity"===a.type&&(a=this._readOpacityInfo(a));return a},this));var c=b.rotationType;if(b=b.rotationExpression)c={type:"rotation",rotationType:c},(b=b.match(this._rotationRE))&&b[1]&&(c.field=b[1],a||(a=[]),a.push(c));return a},_createCache:function(a){var b=a&&a.valueExpression,c=k.createSyntaxTree(b),c=k.createFunction(c),d=!(!a||!a.expression)||this._viewScaleRE.test(b);return{ipData:this._interpolateData(a),hasExpr:!!b,
compiledFunc:c,isScaleDriven:d}},_processColorInfo:function(a){a&&(a.colors&&a.colors.forEach(function(b,d){b instanceof c||(a.colors[d]=new c(b))}),a.stops&&a.stops.forEach(function(b,d){!b.color||b.color instanceof c||(a.stops[d].color=new c(b.color))}),this._sortStops(a.stops));return this._createCache(a)},_processOpacityInfo:function(a){this._sortStops(a&&a.stops);return this._createCache(a)},_processSizeInfo:function(a){a.stops&&Array.isArray(a.stops)?a.stops=this._processSizeInfoStops(a.stops):
(a.minSize=a.minSize&&this._processSizeInfoSize(a.minSize),a.maxSize=a.maxSize&&this._processSizeInfoSize(a.maxSize));return{root:this._createCache(a),minSize:this._createCache(a.minSize),maxSize:this._createCache(a.maxSize)}},_processSizeInfoSize:function(a){"object"===typeof a?a.stops=this._processSizeInfoStops(a.stops):a=e.toPt(a);return a},_processSizeInfoStops:function(a){a&&Array.isArray(a)&&(a.forEach(function(a){a.size=e.toPt(a.size)}),this._sortStops(a));return a},_sortStops:function(a){a&&
Array.isArray(a)&&a.sort(function(a,b){return a.value-b.value})},_processRotationInfo:function(a){return this._createCache(a)},_getSize:function(a,c,e,f,h){var g=a.attributes,l=c.field,m=c.stops,n=0,v=e&&e.hasExpr,q=e&&e.compiledFunc,r=e&&e.ipData,t=e&&e.isScaleDriven,x="number"===typeof a,u=x?a:null;if(l||t||v){var y=f&&f.scale,z=h?h[0]:c.minSize,w=h?h[1]:c.maxSize,M=c.minDataValue,ea=c.maxDataValue,I=c.valueUnit||"unknown",N=c.valueRepresentation,n=c.scaleBy,Y=c.normalizationField,aa=g?parseFloat(g[Y]):
void 0,S=f&&f.shape;t?u=null==y?this._getAverageValue(c):y:"number"!==typeof u&&(v?u=k.executeFunction(q,k.createExecContext(a,k.getViewInfo(f))):d.isFunction(l)?u=l.apply(this,arguments):g&&(u=g[l]));if(null==u||Y&&!x&&(isNaN(aa)||0===aa))return null;isNaN(aa)||x||(u/=aa);if(m)w=this._lookupData(u,r),u=w[0],z=w[1],u===z?n=m[u].size:(u=m[u].size,m=m[z].size,n=u+(m-u)*w[2]);else if(null!=z&&null!=w&&null!=M&&null!=ea)u<=M?n=z:u>=ea?n=w:(m=(u-M)/(ea-M),"area"===n&&S?(z=(u="circle"===S)?p*Math.pow(z/
2,2):z*z,m=z+m*((u?p*Math.pow(w/2,2):w*w)-z),n=u?2*Math.sqrt(m/p):Math.sqrt(m)):n=z+m*(w-z));else if("unknown"===I)null!=z&&null!=M?(z&&M?(m=u/M,n="circle"===S?2*Math.sqrt(m*Math.pow(z/2,2)):"square"===S||"diamond"===S||"image"===S?Math.sqrt(m*Math.pow(z,2)):m*z):n=u+(z||M),n=n<z?z:n,null!=w&&n>w&&(n=w)):n=u;else{m=(f&&f.resolution?f.resolution:1)*b.meterIn[I];if("area"===N)n=Math.sqrt(u/p)/m,n*=2;else if(n=u/m,"radius"===N||"distance"===N)n*=2;null!=z&&n<z&&(n=z);null!=w&&n>w&&(n=w)}}else c&&(n=
m&&m[0]&&m[0].size,null==n&&(n=c.minSize));return n=isNaN(n)?0:n},_getAverageValue:function(a){var b=a.stops,c;b?(c=b[0].value,a=b[b.length-1].value):(c=a.minDataValue||0,a=a.maxDataValue||0);return(c+a)/2},_getColorComponent:function(a,b,c,e,f,h){var g=a.attributes,p=b&&b.field,l="number"===typeof a,m=l?a:null,n=c&&c.hasExpr,v=c&&c.compiledFunc,q=c&&c.ipData,r;if(p||n){var t=b.normalizationField,u=g?parseFloat(g[t]):void 0;"number"!==typeof m&&(n?m=k.executeFunction(v,k.createExecContext(a,k.getViewInfo(e))):
d.isFunction(p)?m=p.apply(this,arguments):g&&(m=g[p]));null==m||t&&!l&&(isNaN(u)||0===u)||(isNaN(u)||l||(m/=u),r=f?this._getOpacity(m,b,q):this._getColor(m,b,q))}else b&&(g=b.stops,f?(r=g&&g[0]&&g[0].opacity,null==r&&(r=b.opacityValues&&b.opacityValues[0])):r=g&&g[0]&&g[0].color||b.colors&&b.colors[0]);h&&(h.data=m,h.value=r);return h||r},_interpolateData:function(a){var b;if(a)if(a.colors||a.opacityValues){var c=(a.colors||a.opacityValues).length,d=a.minDataValue,e=(a.maxDataValue-d)/(c-1);b=[];
for(a=0;a<c;a++)b[a]=d+a*e}else a.stops&&(b=a.stops.map(function(a){return a.value}));return b},_getOpacity:function(a,b,c){a=this._lookupData(a,c);var d;b=b||this.opacityInfo;a&&(c=a[0],d=a[1],c===d?d=this._getOpacValue(b,c):(c=this._getOpacValue(b,c),b=this._getOpacValue(b,d),d=c+(b-c)*a[2]));return d},_getOpacValue:function(a,b){return a.opacityValues?a.opacityValues[b]:a.stops[b].opacity},_getColor:function(a,b,d){a=this._lookupData(a,d);var g;b=b||this.colorInfo;a&&(g=a[0],d=a[1],g=g===d?this._getColorObj(b,
g):c.blendColors(this._getColorObj(b,g),this._getColorObj(b,d),a[2]),g=new c(g));return g},_getColorObj:function(a,b){return a.colors?a.colors[b]:a.stops[b].color},_lookupData:function(a,b){var c;if(b){var d=0,g=b.length-1;b.some(function(b,c){if(a<b)return g=c,!0;d=c;return!1});c=[d,g,(a-b[d])/(b[g]-b[d])]}return c},_processForContext:function(a,b,c){b&&"web-scene"===b.origin?(b.messages&&(a.expression&&b.messages.push(new n("property:unsupported",a.type+"VisualVariable.expression is not supported in Web Scene. Please remove this property to save the Web Scene.",
{instance:this,propertyName:c+".expression",context:b})),a.valueExpression&&b.messages.push(new n("property:unsupported",a.type+"VisualVariable.valueExpression is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:c+".valueExpression",context:b})),a.valueExpressionTitle&&b.messages.push(new n("property:unsupported",a.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",
{instance:this,propertyName:c+".valueExpressionTitle",context:b}))),delete a.expression,delete a.valueExpression,delete a.valueExpressionTitle):"size"===a.type&&this._convertExpressionToArcade(a)},_writeRotationInfo:function(a,b,c){a&&(a=d.mixin({},a),this._processForContext(a,b,"visualVariables["+c+"]"),a.type=q.toJSON(a.type),a=l.fixJson(a,!0));return a},_convertExpressionToArcade:function(a){a&&a.expression&&(a.valueExpression="$view.scale")},_writeSizeInfo:function(a,b,c){if(a){a=d.mixin({},a);
this._processForContext(a,b,"string"===typeof c?c:"visualVariables["+c+"]");var g=a.minSize,e=a.maxSize;g&&(a.minSize="number"===typeof g?g:this._writeSizeInfo(g,b,"visualVariables["+c+"].minSize"));e&&(a.maxSize="number"===typeof e?e:this._writeSizeInfo(e,b,"visualVariables["+c+"].maxSize"));b=a.legendOptions;c=a.axis;a.type=q.toJSON(a.type);c&&(a.axis=u.toJSON(c));b&&(a.legendOptions=d.mixin({},b),b=b.customValues)&&(a.legendOptions.customValues=b.slice(0));a.stops&&(a.stops=a.stops.map(function(a){a=
d.mixin({},a);null===a.label&&delete a.label;return a}));a=l.fixJson(a,!0)}return a},_writeColorInfo:function(a,b,e){a&&(a=d.mixin({},a),this._processForContext(a,b,"visualVariables["+e+"]"),a.type=q.toJSON(a.type),a.colors&&(a.colors=a.colors.map(function(a){return c.toJSON(a)})),a.stops&&(a.stops=a.stops.map(function(a){a=d.mixin({},a);a.color&&(a.color=c.toJSON(a.color));null===a.label&&delete a.label;return a})),a.legendOptions&&(a.legendOptions=d.mixin({},a.legendOptions)),a=l.fixJson(a,!0));
return a},_writeOpacityInfo:function(a,b,c){var e;a&&(e=d.mixin({},a),this._processForContext(e,b,"visualVariables["+c+"]"),e.type=q.toJSON(e.type),e.opacityValues&&(e.transparencyValues=e.opacityValues.map(function(a){return 100*(1-a)}),delete e.opacityValues),e.stops&&(e.stops=e.stops.map(function(a){a=d.mixin({},a);a.transparency=100*(1-a.opacity);delete a.opacity;null===a.label&&delete a.label;return a})),e.legendOptions&&(e.legendOptions=d.mixin({},e.legendOptions)),e=l.fixJson(e,!0));return e}})})},
"esri/renderers/support/utils":function(){define("dojo/_base/lang dojo/_base/array dojo/date/locale ../../Color ../../core/numberUtils dojo/i18n!../nls/smartMapping dojo/i18n!dojo/cldr/nls/gregorian".split(" "),function(a,f,m,h,e,l,n){function d(a){return a&&f.map(a,function(a){return new h(a)})}function c(a,b,c){var d="";0===b?d=k.lt+" ":b===c&&(d=k.gt+" ");return d+a}var b={},k={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%"},q={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},
u={millisecond:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},second:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},minute:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},hour:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},day:{selector:"date",dateOptions:{formatLength:"long"}},month:{selector:"date",dateOptions:{formatLength:"long"}},year:{selector:"date",dateOptions:{selector:"year"}}},x={formatLength:"short",
fullYear:!0},w={formatLength:"short"};a.mixin(b,{meterIn:{inches:39.3701,feet:3.28084,yards:1.09361,miles:6.21371E-4,"nautical-miles":5.39957E-4,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:.001,"decimal-degrees":180/20015077},timelineDateFormatOptions:{selector:"date",dateOptions:{formatLength:"short",fullYear:!0}},formatDate:function(b,c){var d=[];null==b||b instanceof Date||(b=new Date(b));c=c||{};c=a.mixin({},c);var e=c.selector?c.selector.toLowerCase():null,h=!e||-1<e.indexOf("time"),
e=!e||-1<e.indexOf("date");h&&(c.timeOptions=c.timeOptions||w,c.timeOptions&&(c.timeOptions=a.mixin({},c.timeOptions),c.timeOptions.selector=c.timeOptions.selector||"time",d.push(c.timeOptions)));e&&(c.dateOptions=c.dateOptions||x,c.dateOptions&&(c.dateOptions=a.mixin({},c.dateOptions),c.dateOptions.selector=c.dateOptions.selector||"date",d.push(c.dateOptions)));d&&d.length?(d=f.map(d,function(a){return m.format(b,a)}),c=1==d.length?d[0]:n["dateTimeFormat-medium"].replace(/\'/g,"").replace(/\{(\d+)\}/g,
function(a,b){return d[b]})):c=m.format(b);return c},createColorStops:function(a){var d=a.values,h=a.colors,g=a.labelIndexes,k=a.isDate,l=a.dateFormatOptions;a=[];return a=f.map(d,function(a,p){var m=null;if(!g||-1<f.indexOf(g,p)){var n;(n=k?b.formatDate(a,l):e.format(a))&&(m=c(n,p,d.length-1))}return{value:a,color:h[p],label:m}})},updateColorStops:function(a){var d=a.stops,h=a.changes,g=a.isDate,k=a.dateFormatOptions,l=[],m,n=f.map(d,function(a){return a.value});f.forEach(h,function(a){l.push(a.index);
n[a.index]=a.value});m=e.round(n,{indexes:l});f.forEach(d,function(a,f){a.value=n[f];if(null!=a.label){var h,p=null;(h=g?b.formatDate(m[f],k):e.format(m[f]))&&(p=c(h,f,d.length-1));a.label=p}})},createClassBreakLabel:function(a){var b=a.minValue,c=a.maxValue,d=a.isFirstBreak?"":k.gt+" ";a="percent-of-total"===a.normalizationType?k.pct:"";b=null==b?"":e.format(b);c=null==c?"":e.format(c);return d+b+a+" "+l.minToMax+" "+c+a},setLabelsForClassBreaks:function(a){var c=a.classBreaks,d=a.classificationMethod,
g=a.normalizationType,h=[];c&&c.length&&("standard-deviation"===d?console.log("setLabelsForClassBreaks: cannot set labels for class breaks generated using 'standard-deviation' method."):a.round?(h.push(c[0].minValue),f.forEach(c,function(a){h.push(a.maxValue)}),h=e.round(h),f.forEach(c,function(a,c){a.label=b.createClassBreakLabel({minValue:0===c?h[0]:h[c],maxValue:h[c+1],isFirstBreak:0===c,normalizationType:g})})):f.forEach(c,function(a,c){a.label=b.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,
isFirstBreak:0===c,normalizationType:g})}))},updateClassBreak:function(a){var c=a.classBreaks,d=a.normalizationType,e=a.change,f=e.index,e=e.value,h=-1,k=-1,l=c.length;"standard-deviation"===a.classificationMethod?console.log("updateClassBreak: cannot update labels for class breaks generated using 'standard-deviation' method."):(0===f?h=f:f===l?k=f-1:(k=f-1,h=f),-1<h&&h<l&&(a=c[h],a.minValue=e,a.label=b.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===h,normalizationType:d})),
-1<k&&k<l&&(a=c[k],a.maxValue=e,a.label=b.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===k,normalizationType:d})))},calculateDateFormatInterval:function(a){var b,c,d=a.length,e,h,k,l,m,n,t=Infinity,u;a=f.map(a,function(a){return new Date(a)});for(b=0;b<d-1;b++){e=a[b];k=[];m=Infinity;n="";for(c=b+1;c<d;c++)h=a[c],h=e.getFullYear()!==h.getFullYear()&&"year"||e.getMonth()!==h.getMonth()&&"month"||e.getDate()!==h.getDate()&&"day"||e.getHours()!==h.getHours()&&"hour"||
e.getMinutes()!==h.getMinutes()&&"minute"||e.getSeconds()!==h.getSeconds()&&"second"||"millisecond",l=q[h],l<m&&(m=l,n=h),k.push(h);m<t&&(t=m,u=n)}return u},createUniqueValueLabel:function(a){var c=a.value,d=a.fieldInfo,g=a.domain;a=a.dateFormatInterval;var f=String(c);(g=g&&g.codedValues?g.getName(c):null)?f=g:"number"===typeof c&&(f=d&&"date"===d.type?b.formatDate(c,a&&u[a]):e.format(c));return f},cloneColorVariable:function(b){var c;b&&(c=a.mixin({},b),c.colors=d(c.colors),c.stops=c.stops&&f.map(c.stops,
function(b){b=a.mixin({},b);b.color&&(b.color=new h(b.color));return b}),c.legendOptions&&(c.legendOptions=a.mixin({},c.legendOptions)));return c},cloneOpacityVariable:function(b){var c;if(b){c=a.mixin({},b);if(b=c.opacityValues)c.opacityValues=b.slice(0);if(b=c.stops)c.stops=f.map(b,function(b){return a.mixin({},b)});if(b=c.legendOptions)c.legendOptions=a.mixin({},b)}return c},cloneSizeVariable:function(c){var d;c&&(d=a.mixin({},c),d.stops&&(d.stops=f.map(d.stops,function(b){return a.mixin({},b)})),
(c=d.minSize)&&"object"===typeof c&&(d.minSize=b.cloneSizeVariable(c)),(c=d.maxSize)&&"object"===typeof c&&(d.maxSize=b.cloneSizeVariable(c)),c=d.legendOptions)&&(d.legendOptions=a.mixin({},c),c=c.customValues)&&(d.legendOptions.customValues=c.slice(0));return d}});return b})},"esri/core/numberUtils":function(){define(["dojo/number","dojo/i18n!dojo/cldr/nls/number"],function(a,f){function m(a,c){return a-c}var h=/^-?(\d+)(\.(\d+))?$/i,e=new RegExp("\\"+f.decimal+"0+$","g"),l=/(\d)0*$/g,n={numDigits:function(a){var c=
String(a),b=c.match(h);a={integer:0,fractional:0};b&&b[1]?(a.integer=b[1].split("").length,a.fractional=b[3]?b[3].split("").length:0):-1<c.toLowerCase().indexOf("e")&&(b=c.split("e"),c=b[0],b=b[1],c&&b&&(c=Number(c),b=Number(b),(a=0<b)||(b=Math.abs(b)),c=n.numDigits(c),a?(c.integer+=b,c.fractional=b>c.fractional?0:c.fractional-b):(c.fractional+=b,c.integer=b>c.integer?1:c.integer-b),a=c));return a},percentChange:function(a,c,b,e){var d={previous:null,next:null},f;null!=b&&(f=a-b,d.previous=Math.floor(Math.abs(100*
(c-b-f)/f)));null!=e&&(f=e-a,d.next=Math.floor(Math.abs(100*(e-c-f)/f)));return d},round:function(a,c){a=a.slice(0);var b,d,e,f,h,l,t,p,v=c&&null!=c.tolerance?c.tolerance:2,g=c&&c.indexes,r=c&&null!=c.strictBounds?c.strictBounds:!1;if(g)g.sort(m);else for(g=[],h=0;h<a.length;h++)g.push(h);for(h=0;h<g.length;h++)if(p=g[h],c=a[p],b=0===p?null:a[p-1],d=p===a.length-1?null:a[p+1],e=n.numDigits(c),e=e.fractional){l=0;for(t=!1;l<=e&&!t;){f=c;t=l;var z=void 0,y=void 0,z=Number(f.toFixed(t));z<f?y=z+1/Math.pow(10,
t):(y=z,z-=1/Math.pow(10,t));z=Number(z.toFixed(t));y=Number(y.toFixed(t));f=[z,y];f=r&&0===h?f[1]:f[0];t=v;var z=n.percentChange(c,f,b,d),A=y=void 0,y=void 0,y=null==z.previous||z.previous<=t,A=null==z.next||z.next<=t;t=y=y&&A||z.previous+z.next<=2*t;l++}t&&(a[p]=f)}return a},format:function(d,c){c=c||{places:20,round:-1};(d=a.format(d,c))&&(d=d.replace(l,"$1").replace(e,""));return d}};return n})},"esri/renderers/support/arcadeUtils":function(){define(["require","exports","dojo/_base/lang","../../arcade/arcade",
"../../arcade/Dictionary"],function(a,f,m,h,e){function l(a){var b;try{b=a?h.parseScript(a):null}catch(k){b=null}return b}Object.defineProperty(f,"__esModule",{value:!0});var n=/^\$feature\./i,d={vars:{$feature:"any",$view:"any"}};f.createSyntaxTree=l;f.createFunction=function(a,b){b=b||m.clone(d);a="string"===typeof a?l(a):a;var c;try{c=a?h.compileScript(a,b):null}catch(q){c=null}return c};f.createExecContext=function(a,b){return{vars:{$feature:h.constructFeature(a),$view:b&&b.view},spatialReference:b&&
b.sr}};f.evalSyntaxTree=function(a,b){var c;try{c=h.executeScript(a,b,b.spatialReference)}catch(q){c=null}return c};f.executeFunction=function(a,b){var c;try{c=a?a(b,b.spatialReference):null}catch(q){c=null}return c};f.extractFieldNames=function(a){if(!a)return[];a="string"===typeof a?l(a):a;var b=[];h.extractFieldLiterals(a).forEach(function(a){n.test(a)&&(a=a.replace(n,""),b.push(a))});b.sort();return b.filter(function(a,c){return 0===c||b[c-1]!==a})};f.dependsOnView=function(a){return h.referencesMember(a,
"$view")};f.getViewInfo=function(a){if(a&&a.viewingMode&&null!=a.scale&&a.spatialReference)return{view:new e({viewingMode:a.viewingMode,scale:a.scale}),sr:a.spatialReference}}})},"esri/arcade/arcade":function(){define("require exports ./arcadeRuntime ./parser ./Feature ./arcadeCompiler dojo/has".split(" "),function(a,f,m,h,e,l,n){Object.defineProperty(f,"__esModule",{value:!0});f.compileScript=function(a,c){return n("csp-restrictions")?function(b,c){return m.executeScript(a,b,c)}:l.compileScript(a,
c)};f.constructFeature=function(a){return e.fromFeature(a)};f.parseScript=function(a){return h.parseScript(a)};f.validateScript=function(a,c){return h.validateScript(a,c,"simple")};f.scriptCheck=function(a,c,b){return h.scriptCheck(a,c,b,"full")};f.parseAndExecuteScript=function(a,c,b){return m.executeScript(h.parseScript(a),c,b)};f.executeScript=function(a,c,b){return m.executeScript(a,c,b)};f.referencesMember=function(a,c){return m.referencesMember(a,c)};f.referencesFunction=function(a,c){return m.referencesFunction(a,
c)};f.extractFieldLiterals=function(a,c){void 0===c&&(c=!1);return h.extractFieldLiterals(a,c)}})},"esri/arcade/arcadeRuntime":function(){define("require exports ../geometry/Polygon ../Graphic ../geometry/Polyline ../geometry/Point ../geometry/Extent ../geometry/Multipoint ../geometry/SpatialReference ./languageUtils ./treeAnalysis ./Dictionary ./Feature ./FunctionWrapper ./functions/date ./functions/string ./functions/maths ./functions/geometry ./functions/stats ./ImmutablePathArray ./ImmutablePointArray ../geometry/Geometry".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t,p,v,g,r,z,y){function A(a,b){for(var c=[],d=0;d<b.arguments.length;d++)c.push(B(a,b.arguments[d]));return c}function F(a,b,c){try{return c(a,b,A(a,b))}catch(ia){throw ia;}}function B(a,c){try{switch(c.type){case "EmptyStatement":return b.voidOperation;case "VariableDeclarator":var d=null===c.init?null:B(a,c.init);d===b.voidOperation&&(d=null);var e=c.id.name.toLowerCase();null!==a.localScope?a.localScope[e]={value:d,valueset:!0,node:c.init}:a.globalScope[e]=
{value:d,valueset:!0,node:c.init};return b.voidOperation;case "VariableDeclaration":for(var g=0;g<c.declarations.length;g++)B(a,c.declarations[g]);return b.voidOperation;case "BlockStatement":var f;a:{for(var h=b.voidOperation,g=0;g<c.body.length;g++)if(h=B(a,c.body[g]),h instanceof b.ReturnResult||h===b.breakResult||h===b.continueResult){f=h;break a}f=h}return f;case "FunctionDeclaration":var p=c.id.name.toLowerCase();a.globalScope[p]={valueset:!0,node:null,value:new x(c,a)};return b.voidOperation;
case "ReturnStatement":var l;if(null===c.argument)l=new b.ReturnResult(b.voidOperation);else{var m=B(a,c.argument);l=new b.ReturnResult(m)}return l;case "IfStatement":var n;if("AssignmentExpression"===c.test.type||"UpdateExpression"===c.test.type)throw Error(k.nodeErrorMessage(c.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var v=B(a,c.test);if(!0===v)n=B(a,c.consequent);else if(!1===v)n=null!==c.alternate?B(a,c.alternate):b.voidOperation;else throw Error(k.nodeErrorMessage(c,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));
return n;case "ExpressionStatement":var r;if("AssignmentExpression"===c.expression.type||"UpdateExpression"===c.expression.type)r=B(a,c.expression);else{var t=B(a,c.expression);r=t===b.voidOperation?b.voidOperation:new b.ImplicitResult(t)}return r;case "AssignmentExpression":var w;var y=B(a,c.right),g=null,z="";if("MemberExpression"===c.left.type){g=B(a,c.left.object);z=!0===c.left.computed?B(a,c.left.property):c.left.property.name;if(b.isArray(g))if(b.isNumber(z)){0>z&&(z=g.length+z);if(0>z||z>g.length)throw Error("Assignment outside of array bounds");
if(z===g.length&&"\x3d"!==c.operator)throw Error("Invalid Parameter");g[z]=C(y,c.operator,g[z],c)}else throw Error("Invalid Parameter");else if(g instanceof q){if(!1===b.isString(z))throw Error("Dictionary accessor must be a string");if(!0===g.hasField(z))g.setField(z,C(y,c.operator,g.field(z),c));else{if("\x3d"!==c.operator)throw Error("Invalid Parameter");g.setField(z,C(y,c.operator,null,c))}}else if(g instanceof u){if(!1===b.isString(z))throw Error("Feature accessor must be a string");if(!0===
g.hasField(z))g.setField(z,C(y,c.operator,g.field(z),c));else{if("\x3d"!==c.operator)throw Error("Invalid Parameter");g.setField(z,C(y,c.operator,null,c))}}else{if(b.isImmutableArray(g))throw Error("Array is Immutable");throw Error("Invalid Parameter");}w=b.voidOperation}else if(g=c.left.name.toLowerCase(),null!==a.localScope&&void 0!==a.localScope[g])a.localScope[g]={value:C(y,c.operator,a.localScope[g].value,c),valueset:!0,node:c.right},w=b.voidOperation;else if(void 0!==a.globalScope[g])a.globalScope[g]=
{value:C(y,c.operator,a.globalScope[g].value,c),valueset:!0,node:c.right},w=b.voidOperation;else throw Error("Variable not recognised");return w;case "UpdateExpression":var da;var V,g=null,z="";if("MemberExpression"===c.argument.type){g=B(a,c.argument.object);z=!0===c.argument.computed?B(a,c.argument.property):c.argument.property.name;if(b.isArray(g))if(b.isNumber(z)){0>z&&(z=g.length+z);if(0>z||z>=g.length)throw Error("Assignment outside of array bounds");V=b.toNumber(g[z]);g[z]="++"===c.operator?
V+1:V-1}else throw Error("Invalid Parameter");else if(g instanceof q){if(!1===b.isString(z))throw Error("Dictionary accessor must be a string");if(!0===g.hasField(z))V=b.toNumber(g.field(z)),g.setField(z,"++"===c.operator?V+1:V-1);else throw Error("Invalid Parameter");}else if(g instanceof u){if(!1===b.isString(z))throw Error("Feature accessor must be a string");if(!0===g.hasField(z))V=b.toNumber(g.field(z)),g.setField(z,"++"===c.operator?V+1:V-1);else throw Error("Invalid Parameter");}else{if(b.isImmutableArray(g))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}da=!1===c.prefix?V:"++"===c.operator?V+1:V-1}else if(g=c.argument.name.toLowerCase(),null!==a.localScope&&void 0!==a.localScope[g])V=b.toNumber(a.localScope[g].value),a.localScope[g]={value:"++"===c.operator?V+1:V-1,valueset:!0,node:c},da=!1===c.prefix?V:"++"===c.operator?V+1:V-1;else if(void 0!==a.globalScope[g])V=b.toNumber(a.globalScope[g].value),a.globalScope[g]={value:"++"===c.operator?V+1:V-1,valueset:!0,node:c},da=!1===c.prefix?V:"++"===c.operator?V+1:V-1;
else throw Error("Variable not recognised");return da;case "BreakStatement":return b.breakResult;case "ContinueStatement":return b.continueResult;case "ForStatement":null!==c.init&&B(a,c.init);z={testResult:!0,lastAction:b.voidOperation};do b:{w=a;y=c;da=z;if(null!==y.test){da.testResult=B(w,y.test);if(!1===da.testResult)break b;if(!0!==da.testResult)throw Error(k.nodeErrorMessage(y,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}da.lastAction=B(w,y.body);da.lastAction===b.breakResult?da.testResult=
!1:da.lastAction instanceof b.ReturnResult?da.testResult=!1:null!==y.update&&B(w,y.update)}while(!0===z.testResult);g=z.lastAction instanceof b.ReturnResult?z.lastAction:b.voidOperation;return g;case "ForInStatement":return E(a,c);case "Identifier":var A;var F;try{var G=c.name.toLowerCase();if(null!==a.localScope&&void 0!==a.localScope[G])F=a.localScope[G],!0!==F.valueset&&(F.value=B(a,F.node),F.valueset=!0),A=F.value;else if(void 0!==a.globalScope[G])F=a.globalScope[G],!0!==F.valueset&&(F.value=
B(a,F.node),F.valueset=!0),A=F.value;else throw Error(k.nodeErrorMessage(c,"RUNTIME","VARIABLENOTFOUND"));}catch(Ba){throw Ba;}return A;case "MemberExpression":return L(a,c);case "Literal":return c.value;case "ThisExpression":throw Error(k.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTED"));case "CallExpression":return K(a,c);case "UnaryExpression":return U(a,c);case "BinaryExpression":return P(a,c);case "LogicalExpression":return H(a,c);case "ConditionalExpression":throw Error(k.nodeErrorMessage(c,"RUNTIME",
"NOTSUPPORTED"));case "ArrayExpression":try{for(g=[],z=0;z<c.elements.length;z++){var ea=B(a,c.elements[z]);if(b.isFunctionParameter(ea))throw Error(k.nodeErrorMessage(c,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));ea===b.voidOperation?g.push(null):g.push(ea)}}catch(Ba){throw Ba;}return g;case "ObjectExpression":g={};for(z=0;z<c.properties.length;z++){var I=B(a,c.properties[z]);if(b.isFunctionParameter(I.value))throw Error("Illegal Argument");if(!1===b.isString(I.key))throw Error("Illegal Argument");g[I.key.toString()]=
I.value===b.voidOperation?null:I.value}var N=new q(g);N.immutable=!1;return N;case "Property":return{key:"Identifier"===c.key.type?c.key.name:B(a,c.key),value:B(a,c.value)};case "Array":throw Error(k.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTED"));default:throw Error(k.nodeErrorMessage(c,"RUNTIME","UNREOGNISED"));}}catch(Ba){throw Ba;}}function E(a,c){var d=B(a,c.right);"VariableDeclaration"===c.left.type&&B(a,c.left);var e=null,g="VariableDeclaration"===c.left.type?c.left.declarations[0].id.name:c.left.name;
null!==a.localScope&&void 0!==a.localScope[g]&&(e=a.localScope[g]);null===e&&void 0!==a.globalScope[g]&&(e=a.globalScope[g]);if(null===e)throw Error(k.nodeErrorMessage(c,"RUNTIME","VARIABLENOTDECLARED"));if(b.isArray(d)||b.isString(d)){for(var d=d.length,f=0;f<d&&(e.value=f,g=B(a,c.body),g!==b.breakResult);f++)if(g instanceof b.ReturnResult)return g;return b.voidOperation}if(b.isImmutableArray(d)){for(f=0;f<d.length()&&(e.value=f,g=B(a,c.body),g!==b.breakResult);f++)if(g instanceof b.ReturnResult)return g;
return b.voidOperation}if(d instanceof q||d instanceof u)for(d=d.keys(),f=0;f<d.length&&(e.value=d[f],g=B(a,c.body),g!==b.breakResult);f++){if(g instanceof b.ReturnResult)return g}else return b.voidOperation}function C(a,c,d,e){switch(c){case "\x3d":return a===b.voidOperation?null:a;case "/\x3d":return b.toNumber(d)/b.toNumber(a);case "*\x3d":return b.toNumber(d)*b.toNumber(a);case "-\x3d":return b.toNumber(d)-b.toNumber(a);case "+\x3d":return b.isString(d)||b.isString(a)?b.toString(d)+b.toString(a):
b.toNumber(d)+b.toNumber(a);case "%\x3d":return b.toNumber(d)%b.toNumber(a);default:throw Error(k.nodeErrorMessage(e,"RUNTIME","OPERATORNOTRECOGNISED"));}}function G(a,c,d,e){c=c.toLowerCase();switch(c){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return c=a.spatialReference._arcadeCacheId,void 0===c&&(d=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(d=!1),d&&(S++,c=a.spatialReference._arcadeCacheId=S)),a=new q({wkt:a.spatialReference.wkt,
wkid:a.spatialReference.wkid}),void 0!==c&&(a._arcadeCacheId="SPREF"+c.toString()),a}switch(a.type){case "extent":switch(c){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=a[c],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(c){case "rings":return c=b.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===c&&(S++,c=S,b.isVersion4?a.cache._arcadeCacheId=c:a.setCacheValue("_arcadeCacheId",c)),a=new r(a.rings,
a.spatialReference,!0===a.hasZ,!0===a.hasM,c);case "type":return"Polygon"}break;case "point":switch(c){case "x":case "y":case "z":case "m":return void 0!==a[c]?a[c]:null;case "type":return"Point"}break;case "polyline":switch(c){case "paths":return c=b.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===c&&(S++,c=S,b.isVersion4?a.cache._arcadeCacheId=c:a.setCacheValue("_arcadeCacheId",c)),a=new r(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,c);case "type":return"Polyline"}break;
case "multipoint":switch(c){case "points":return c=b.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===c&&(S++,c=S,b.isVersion4?a.cache._arcadeCacheId=c:a.setCacheValue("_arcadeCacheId",c)),a=new z(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,c,1);case "type":return"Multipoint"}}throw Error(k.nodeErrorMessage(e,"RUNTIME","PROPERTYNOTFOUND"));}function L(a,c){try{var d=B(a,c.object);if(null===d)throw Error(k.nodeErrorMessage(c,"RUNTIME","NOTFOUND"));if(!1===c.computed){if(d instanceof
q||d instanceof u)return d.field(c.property.name);if(d instanceof y)return G(d,c.property.name,a,c);throw Error(k.nodeErrorMessage(c,"RUNTIME","INVALIDTYPE"));}var e=B(a,c.property);if(d instanceof q||d instanceof u){if(b.isString(e))return d.field(e)}else if(d instanceof y){if(b.isString(e))return G(d,e,a,c)}else if(b.isArray(d)){if(b.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=d.length+e);if(e>=d.length||0>e)throw Error(k.nodeErrorMessage(c,"RUNTIME","OUTOFBOUNDS"));return d[e]}}else if(b.isString(d)){if(b.isNumber(e)&&
isFinite(e)&&Math.floor(e)===e){0>e&&(e=d.length+e);if(e>=d.length||0>e)throw Error(k.nodeErrorMessage(c,"RUNTIME","OUTOFBOUNDS"));return d[e]}}else if(b.isImmutableArray(d)&&b.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=d.length()+e);if(e>=d.length()||0>e)throw Error(k.nodeErrorMessage(c,"RUNTIME","OUTOFBOUNDS"));return d.get(e)}throw Error(k.nodeErrorMessage(c,"RUNTIME","INVALIDTYPE"));}catch(ha){throw ha;}}function U(a,c){try{var d=B(a,c.argument);if(b.isBoolean(d)){if("!"===c.operator)return!d;
if("-"===c.operator)return-1*b.toNumber(d);if("+"===c.operator)return 1*b.toNumber(d);throw Error(k.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===c.operator)return-1*b.toNumber(d);if("+"===c.operator)return 1*b.toNumber(d);throw Error(k.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(ia){throw ia;}}function P(a,c){try{var d=[B(a,c.left),B(a,c.right)],e=d[0],g=d[1];switch(c.operator){case "\x3d\x3d":return b.equalityTest(e,g);case "\x3d":return b.equalityTest(e,
g);case "!\x3d":return!b.equalityTest(e,g);case "\x3c":return b.greaterThanLessThan(e,g,c.operator);case "\x3e":return b.greaterThanLessThan(e,g,c.operator);case "\x3c\x3d":return b.greaterThanLessThan(e,g,c.operator);case "\x3e\x3d":return b.greaterThanLessThan(e,g,c.operator);case "+":return b.isString(e)||b.isString(g)?b.toString(e)+b.toString(g):b.toNumber(e)+b.toNumber(g);case "-":return b.toNumber(e)-b.toNumber(g);case "*":return b.toNumber(e)*b.toNumber(g);case "/":return b.toNumber(e)/b.toNumber(g);
case "%":return b.toNumber(e)%b.toNumber(g);default:throw Error(k.nodeErrorMessage(c,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(pa){throw pa;}}function H(a,c){try{if("AssignmentExpression"===c.left.type||"UpdateExpression"===c.left.type)throw Error(k.nodeErrorMessage(c.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===c.right.type||"UpdateExpression"===c.right.type)throw Error(k.nodeErrorMessage(c.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var d=B(a,c.left);
if(b.isBoolean(d))switch(c.operator){case "||":if(!0===d)return d;var e=B(a,c.right);if(b.isBoolean(e))return e;throw Error(k.nodeErrorMessage(c,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===d)return d;e=B(a,c.right);if(b.isBoolean(e))return e;throw Error(k.nodeErrorMessage(c,"RUNTIME","ONLYORORAND"));default:throw Error(k.nodeErrorMessage(c,"RUNTIME","ONLYORORAND"));}else throw Error(k.nodeErrorMessage(c,"RUNTIME","ONLYBOOLEAN"));}catch(ha){throw ha;}}function K(a,c){try{if("Identifier"!==c.callee.type)throw Error(k.nodeErrorMessage(c,
"RUNTIME","ONLYNODESSUPPORTED"));if(null!==a.localScope&&void 0!==a.localScope[c.callee.name.toLowerCase()]){var d=a.localScope[c.callee.name.toLowerCase()];if(d.value instanceof b.NativeFunction)return d.value.fn(a,c);if(d.value instanceof x)return N(a,c,d.value.definition);throw Error(k.nodeErrorMessage(c,"RUNTIME","NOTAFUNCTION"));}if(void 0!==a.globalScope[c.callee.name.toLowerCase()]){d=a.globalScope[c.callee.name.toLowerCase()];if(d.value instanceof b.NativeFunction)return d.value.fn(a,c);if(d.value instanceof
x)return N(a,c,d.value.definition);throw Error(k.nodeErrorMessage(c,"RUNTIME","NOTAFUNCTION"));}throw Error(k.nodeErrorMessage(c,"RUNTIME","NOTFOUND"));}catch(ia){throw ia;}}function J(a){return null==a?"":b.isArray(a)||b.isImmutableArray(a)?"Array":b.isDate(a)?"Date":b.isString(a)?"String":b.isBoolean(a)?"Boolean":b.isNumber(a)?"Number":a instanceof q?"Dictionary":a instanceof u?"Feature":a instanceof l?"Point":a instanceof m?"Polygon":a instanceof e?"Polyline":a instanceof d?"Multipoint":a instanceof
n?"Extent":b.isFunctionParameter(a)?"Function":a===b.voidOperation?"":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function R(a,c,d,e){try{var g=B(a,c.arguments[d]);if(b.equalityTest(g,e))return B(a,c.arguments[d+1]);var f=c.arguments.length-d;return 1===f?B(a,c.arguments[d]):2===f?null:3===f?B(a,c.arguments[d+2]):R(a,c,d+2,e)}catch(va){throw va;}}function M(a,c,d,e){try{if(!0===e)return B(a,c.arguments[d+1]);if(3===c.arguments.length-d)return B(a,c.arguments[d+2]);var g=B(a,c.arguments[d+
2]);if(!1===b.isBoolean(g))throw Error("WHEN needs boolean test conditions");return M(a,c,d+2,g)}catch(pa){throw pa;}}function ea(a,b){var c=a.length,d=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var e=ea(a.slice(0,d),b);a=ea(a.slice(d,c),b);for(c=[];0<e.length||0<a.length;)0<e.length&&0<a.length?(d=b(e[0],a[0]),isNaN(d)&&(d=0),0>=d?(c.push(e[0]),e=e.slice(1)):(c.push(a[0]),a=a.slice(1))):0<e.length?(c.push(e[0]),e=e.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function I(a,
c,d){try{var e=a.body;if(d.length!==a.params.length)throw Error("Invalid Parameter calls to function.");for(var g=0;g<d.length;g++)c.localScope[a.params[g].name.toLowerCase()]={d:null,value:d[g],valueset:!0,node:null};var f=B(c,e);if(f instanceof b.ReturnResult)return f.value;if(f===b.breakResult)throw Error("Cannot Break from a Function");if(f===b.continueResult)throw Error("Cannot Continue from a Function");return f instanceof b.ImplicitResult?f.value:f}catch(va){throw va;}}function N(a,b,c){return F(a,
b,function(b,d,e){b={spatialReference:a.spatialReference,applicationCache:void 0===a.applicationCache?null:a.applicationCache,globalScope:a.globalScope,depthCounter:a.depthCounter+1,console:a.console,localScope:{}};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return I(c,b,e)})}function Y(a){return function(){var b={applicationCache:void 0===a.context.applicationCache?null:a.context.applicationCache,spatialReference:a.context.spatialReference,console:a.context.console,localScope:{},
depthCounter:a.context.depthCounter+1,globalScope:a.context.globalScope};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return I(a.definition,b,arguments)}}function aa(a){console.log(a)}Object.defineProperty(f,"__esModule",{value:!0});var S=0,Z={};w.registerFunctions(Z,F);t.registerFunctions(Z,F);p.registerFunctions(Z,F);v.registerFunctions(Z,F);g.registerFunctions(Z,F);Z["typeof"]=function(a,c){return F(a,c,function(a,c,d){b.pcCheck(d,1,1);a=J(d[0]);if("Unrecognised Type"===
a)throw Error("Unrecognised Type");return a})};Z.iif=function(a,c){try{b.pcCheck(null===c.arguments?[]:c.arguments,3,3);var d=B(a,c.arguments[0]);if(!1===b.isBoolean(d))throw Error("IF Function must have a boolean test condition");return!0===d?B(a,c.arguments[1]):B(a,c.arguments[2])}catch(ia){throw ia;}};Z.decode=function(a,b){try{if(2>b.arguments.length)throw Error("Missing Parameters");if(2===b.arguments.length)return B(a,b.arguments[1]);if(0===(b.arguments.length-1)%2)throw Error("Must have a default value result.");
var c=B(a,b.arguments[0]);return R(a,b,1,c)}catch(ia){throw ia;}};Z.when=function(a,c){try{if(3>c.arguments.length)throw Error("Missing Parameters");if(0===c.arguments.length%2)throw Error("Must have a default value result.");var d=B(a,c.arguments[0]);if(!1===b.isBoolean(d))throw Error("WHEN needs boolean test conditions");return M(a,c,0,d)}catch(ia){throw ia;}};Z.top=function(a,c){return F(a,c,function(a,c,d){b.pcCheck(d,2,2);if(b.isArray(d[0]))return b.toNumber(d[1])>=d[0].length?d[0].slice(0):
d[0].slice(0,b.toNumber(d[1]));if(b.isImmutableArray(d[0]))return b.toNumber(d[1])>=d[0].length()?d[0].slice(0):d[0].slice(0,b.toNumber(d[1]));throw Error("Top cannot accept this parameter type");})};Z.first=function(a,c){return F(a,c,function(a,c,d){b.pcCheck(d,1,1);return b.isArray(d[0])?0===d[0].length?null:d[0][0]:b.isImmutableArray(d[0])?0===d[0].length()?null:d[0].get(0):null})};Z.sort=function(a,c){return F(a,c,function(a,c,d){b.pcCheck(d,1,2);a=d[0];b.isImmutableArray(a)&&(a=a.toArray());
if(!1===b.isArray(a))throw Error("Illegal Argument");if(1<d.length){if(!1===b.isFunctionParameter(d[1]))throw Error("Illegal Argument");var e=Y(d[1]);a=ea(a,function(a,b){return e(a,b)})}else{if(0===a.length)return[];d={};for(c=0;c<a.length;c++){var g=J(a[c]);""!==g&&(d[g]=!0)}if(!0===d.Array||!0===d.Dictionary||!0===d.Feature||!0===d.Point||!0===d.Polygon||!0===d.Polyline||!0===d.Multipoint||!0===d.Extent||!0===d.Function)return a.slice(0);c=0;var g="",f;for(f in d)c++,g=f;a=1<c||"String"===g?ea(a,
function(a,c){if(null===a||void 0===a||a===b.voidOperation)return null===c||void 0===c||c===b.voidOperation?0:1;if(null===c||void 0===c||c===b.voidOperation)return-1;a=b.toString(a);c=b.toString(c);return a<c?-1:a===c?0:1}):"Number"===g?ea(a,function(a,b){return a-b}):"Boolean"===g?ea(a,function(a,b){return a===b?0:b?-1:1}):"Date"===g?ea(a,function(a,b){return b-a}):a.slice(0)}return a})};f.functionHelper={fixSpatialReference:b.fixSpatialReference,parseArguments:A,standardFunction:F};f.executeScript=
function(a,d,e){e||(e=new c(102100));var g=d.vars,f=d.customfunctions,k={};g||(g={});f||(f={});var p=new q({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});p.immutable=!1;k.textformatting={value:p,valueset:!0,node:null};k.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};k.pi={value:Math.PI,valueset:!0,node:null};for(var l in Z)k[l]={value:new b.NativeFunction(Z[l]),valueset:!0,node:null};for(l in f)k[l]={value:new b.NativeFunction(f[l]),"native":!0,
valueset:!0,node:null};for(l in g)k[l]=g[l]instanceof h?{value:new u(g[l]),valueset:!0,node:null}:{value:g[l],valueset:!0,node:null};a=B({spatialReference:e,globalScope:k,localScope:null,console:d.console?d.console:aa,depthCounter:1,applicationCache:void 0===d.applicationCache?null:d.applicationCache},a.body[0].body);a instanceof b.ReturnResult&&(a=a.value);a instanceof b.ImplicitResult&&(a=a.value);a===b.voidOperation&&(a=null);if(a===b.breakResult)throw Error("Cannot return BREAK");if(a===b.continueResult)throw Error("Cannot return CONTINUE");
if(a instanceof x)throw Error("Cannot return FUNCTION");if(a instanceof b.NativeFunction)throw Error("Cannot return FUNCTION");return a};f.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return k.findFieldLiterals(a,b)};f.validateScript=function(a,b){return k.validateScript(a,b,"simple")};f.referencesMember=function(a,b){return k.referencesMember(a,b)};f.referencesFunction=function(a,b){return k.referencesFunction(a,b)}})},"esri/arcade/languageUtils":function(){define("require exports ../geometry/Geometry ../moment dojo/number ./ImmutableArray ../kernel ./ImmutablePointArray ./ImmutablePathArray dojo/_base/array ../geometry/Point ../geometry/Polyline ../geometry/Polygon ../geometry/Extent ../geometry/Multipoint ./FunctionWrapper".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t){function p(a,b,c){if(""===b||null===b||void 0===b||b===c||b===c)return a;do a=a.replace(b,c);while(-1!==a.indexOf(b));return a}function v(a){return a instanceof R||a instanceof t||a instanceof M}function g(a){return"string"===typeof a||a instanceof String}function r(a){return"boolean"===typeof a}function z(a){return"number"===typeof a}function y(a){return a instanceof Array}function A(a){return a instanceof Date}function F(a,b){if(!1===isNaN(a)){if(void 0===
b||null===b||""===b)return a.toString();b=p(b,"\u2030","");b=p(b,"\u00a4","");return e.format(a,{pattern:b})}return a.toString()}function B(a,b){a=h(a);return void 0===b||null===b||""===b?a.format():a.format(E(b))}function E(a){return a.replace(/(LTS)|L|l/g,function(a){return"["+a+"]"})}function C(a,b,c){switch(c){case "\x3e":return a>b;case "\x3c":return a<b;case "\x3e\x3d":return a>=b;case "\x3c\x3d":return a<=b}return!1}function G(a,b){if(a===b||null===a&&b===f.voidOperation||null===b&&a===f.voidOperation)return!0;
if(A(a)&&A(b))return a.getTime()===b.getTime();if(a instanceof c||a instanceof d)return a.equalityTest(b);if(a instanceof k&&b instanceof k){var e=void 0,g=void 0;f.isVersion4?(e=a.cache._arcadeCacheId,g=b.cache._arcadeCacheId):(e=a.getCacheValue("_arcadeCacheId"),g=b.getCacheValue("_arcadeCacheId"));if(void 0!==e&&null!==e)return e===g}return void 0!==a&&void 0!==b&&null!==a&&null!==b&&"object"===typeof a&&"object"===typeof b&&(a._arcadeCacheId===b._arcadeCacheId&&void 0!==a._arcadeCacheId&&null!==
a._arcadeCacheId||a._underlyingGraphic===b._underlyingGraphic&&void 0!==a._underlyingGraphic&&null!==a._underlyingGraphic)?!0:!1}function L(a,b){if(g(a))return a;if(null===a)return"";if(z(a))return F(a,b);if(r(a))return a.toString();if(A(a))return B(a,b);if(a instanceof m)return JSON.stringify(a.toJSON());if(y(a)){b=[];for(var c=0;c<a.length;c++)b[c]=P(a[c]);return"["+b.join(",")+"]"}if(a instanceof l){b=[];for(c=0;c<a.length();c++)b[c]=P(a.get(c));return"["+b.join(",")+"]"}return null!==a&&"object"===
typeof a&&void 0!==a.castToText?a.castToText():v(a)?"object, Function":""}function U(a,b){if(g(a))return a;if(null===a)return"";if(z(a))return F(a,b);if(r(a))return a.toString();if(A(a))return B(a,b);if(a instanceof m)return JSON.stringify(a.toJSON());if(y(a)){b=[];for(var c=0;c<a.length;c++)b[c]=P(a[c]);return"["+b.join(",")+"]"}if(a instanceof l){b=[];for(c=0;c<a.length();c++)b[c]=P(a.get(c));return"["+b.join(",")+"]"}return null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():v(a)?
"object, Function":""}function P(a){if(null!==a){if(r(a)||z(a)||g(a))return JSON.stringify(a);if(a instanceof m||a instanceof l||a instanceof Array)return U(a);if(a instanceof Date)return JSON.stringify(B(a,""));if(null!==a&&"object"===typeof a&&void 0!==a.castToText)return a.castToText()}return"null"}function H(a,b){return z(a)?a:null===a||""===a?0:A(a)?NaN:r(a)?a?1:0:y(a)||""===a||void 0===a?NaN:void 0!==b&&g(a)?(b=p(b,"\u2030",""),b=p(b,"\u00a4",""),e.parse(a,{pattern:b})):a===f.voidOperation?
0:Number(a)}function K(a,c){var d;b.some(c.fields,function(b){b.name===a&&(d=b.domain);return!!d});return d}Object.defineProperty(f,"__esModule",{value:!0});a=function(){return function(a){this.value=a}}();var J=function(){return function(a){this.value=a}}(),R=function(){return function(a){this.fn=a}}(),M=function(){return function(a){this.fn=a}}();f.NativeFunction=R;f.ImplicitResult=J;f.ReturnResult=a;f.SizzleFunction=M;f.isVersion4=0===n.version.indexOf("4.");f.voidOperation={type:"VOID"};f.breakResult=
{type:"BREAK"};f.continueResult={type:"CONTINUE"};f.multiReplace=p;f.isFunctionParameter=v;f.isSimpleType=function(a){return g(a)||z(a)||A(a)||r(a)||null===a||a===f.voidOperation||"number"===typeof a?!0:!1};f.defaultUndefined=function(a,b){return void 0===a?b:a};f.isString=g;f.isBoolean=r;f.isNumber=z;f.isArray=y;f.isFeatureCursor=function(a){return a&&void 0!==a.isFeatureCursor};f.isImmutableArray=function(a){return a instanceof l};f.isDate=A;f.pcCheck=function(a,b,c){if(a.length<b||a.length>c)throw Error("Function called with wrong number of Parameters");
};f.generateUUID=function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"===b?c:c&3|8).toString(16)})};f.formatNumber=F;f.formatDate=B;f.standardiseDateFormat=E;f.greaterThanLessThan=function(a,b,c){if(null===a){if(null===b||b===f.voidOperation)return C(null,null,c);if(z(b))return C(0,b,c);if(g(b)||r(b))return C(0,H(b),c);if(A(b))return C(0,b.getTime(),c)}if(a===f.voidOperation){if(null===
b||b===f.voidOperation)return C(null,null,c);if(z(b))return C(0,b,c);if(g(b)||r(b))return C(0,H(b),c);if(A(b))return C(0,b.getTime(),c)}else if(z(a)){if(z(b))return C(a,b,c);if(r(b))return C(a,H(b),c);if(null===b||b===f.voidOperation)return C(a,0,c);if(g(b))return C(a,H(b),c);if(A(b))return C(a,b.getTime(),c)}else if(g(a)){if(g(b))return C(L(a),L(b),c);if(A(b))return C(H(a),b.getTime(),c);if(z(b))return C(H(a),b,c);if(null===b||b===f.voidOperation)return C(H(a),0,c);if(r(b))return C(H(a),H(b),c)}else if(A(a)){if(A(b))return C(a,
b,c);if(null===b||b===f.voidOperation)return C(a.getTime(),0,c);if(z(b))return C(a.getTime(),b,c);if(r(b)||g(b))return C(a.getTime(),H(b),c)}else if(r(a)){if(r(b))return C(a,b,c);if(z(b))return C(H(a),H(b),c);if(A(b))return C(H(a),b.getTime(),c);if(null===b||b===f.voidOperation)return C(H(a),0,c);if(g(b))return C(H(a),H(b),c)}return!G(a,b)||"\x3c\x3d"!==c&&"\x3e\x3d"!==c?!1:!0};f.equalityTest=G;f.toString=L;f.toNumberArray=function(a){var b=[];if(!1===y(a))return null;if(a instanceof l){for(var c=
0;c<a.length();c++)b[c]=H(a.get(c));return b}for(c=0;c<a.length;c++)b[c]=H(a[c]);return b};f.toStringExplicit=U;f.toNumber=H;f.toDate=function(a,b){return A(a)?a:g(a)&&(a=h(a,[void 0===b||null===b||""===b?h.ISO_8601:b]),a.isValid())?a.toDate():null};f.toDateM=function(a,b){return A(a)?h(a):g(a)&&(a=h(a,[void 0===b||null===b||""===b?h.ISO_8601:b]),a.isValid())?a:null};f.toBoolean=function(a){if(r(a))return a;if(g(a)){if(a=a.toLowerCase(),"true"===a)return!0}else if(z(a))return 0===a||isNaN(a)?!1:!0;
return!1};f.fixSpatialReference=function(a,b){if(null===a||void 0===a)return null;if(null===a.spatialReference||void 0===a.spatialReference)a.spatialReference=b;return a};f.fixNullGeometry=function(a){return null===a?null:a instanceof k?"NaN"===a.x||null===a.x||isNaN(a.x)?null:a:a instanceof u?0===a.rings.length?null:a:a instanceof q?0===a.paths.length?null:a:a instanceof w?0===a.points.length?null:a:a instanceof x?"NaN"===a.xmin||null===a.xmin||isNaN(a.xmin)?null:a:null};f.getDomainValue=function(a,
b){if(!a||!a.domain)return null;var c=null;b="string"===a.field.type||"esriFieldTypeString"===a.field.type?L(b):H(b);for(var d=0;d<a.domain.codedValues.length;d++){var e=a.domain.codedValues[d];e.code===b&&(c=e)}return null===c?null:c.name};f.getDomainCode=function(a,b){if(!a||!a.domain)return null;var c=null;b=L(b);for(var d=0;d<a.domain.codedValues.length;d++){var e=a.domain.codedValues[d];e.name===b&&(c=e)}return null===c?null:c.code};f.getDomain=function(a,c,d,e){void 0===d&&(d=null);if(!c||!c.fields)return null;
for(var g=null,f=0;f<c.fields.length;f++){var h=c.fields[f];h.name.toLowerCase()===a.toString().toLowerCase()&&(g=h)}if(null===g)return null;var k,p;e||(e=d&&c.typeIdField&&d._field(c.typeIdField));null!=e&&b.some(c.types,function(a){return a.id===e?((k=a.domains&&a.domains[g.name])&&"inherited"===k.type&&(k=K(g.name,c),p=!0),!0):!1});p||k||(k=K(a,c));return{field:g,domain:k}}})},"esri/moment":function(){define(["require","exports","./plugins/moment!"],function(a,f,m){return m})},"esri/plugins/moment":function(){define(["require",
"exports","dojo/_base/kernel","moment/moment"],function(a,f,m,h){Object.defineProperty(f,"__esModule",{value:!0});var e={ar:1,"ar-dz":1,"ar-kw":1,"ar-ly":1,"ar-ma":1,"ar-sa":1,"ar-tn":1,bs:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,"en-ie":1,"en-nz":1,es:1,"es-do":1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,sr:1,"sr-cyrl":1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1};f.load=
function(a,f,d){a=m.locale;var c=a in e;if(!c){var b=a.split("-");1<b.length&&b[0]in e&&(a=b[0],c=!0)}c?f(["moment/locale/"+a],function(){d(h)}):d(h)}})},"moment/moment":function(){(function(a,f){"object"===typeof exports&&"undefined"!==typeof module?module.exports=f():"function"===typeof define&&define.amd?define(f):a.moment=f()})(this,function(){function a(){return Sb.apply(null,arguments)}function f(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function m(a){return null!=
a&&"[object Object]"===Object.prototype.toString.call(a)}function h(a){return void 0===a}function e(a){return"number"===typeof a||"[object Number]"===Object.prototype.toString.call(a)}function l(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function n(a,b){var c=[],d;for(d=0;d<a.length;++d)c.push(b(a[d],d));return c}function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function c(a,b){for(var c in b)d(b,c)&&(a[c]=b[c]);d(b,"toString")&&(a.toString=b.toString);
d(b,"valueOf")&&(a.valueOf=b.valueOf);return a}function b(a,b,c,d){return Ka(a,b,c,d,!0).utc()}function k(a){null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1});return a._pf}function q(a){if(null==a._isValid){var b=k(a),c=ec.call(b.parsedDateParts,function(a){return null!=a}),c=!isNaN(a._d.getTime())&&0>b.overflow&&!b.empty&&
!b.invalidMonth&&!b.invalidWeekday&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);a._strict&&(c=c&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(a))return c;a._isValid=c}return a._isValid}function u(a){var d=b(NaN);null!=a?c(k(d),a):k(d).userInvalidated=!0;return d}function x(a,b){var c,d,e;h(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject);h(b._i)||(a._i=b._i);h(b._f)||(a._f=b._f);h(b._l)||
(a._l=b._l);h(b._strict)||(a._strict=b._strict);h(b._tzm)||(a._tzm=b._tzm);h(b._isUTC)||(a._isUTC=b._isUTC);h(b._offset)||(a._offset=b._offset);h(b._pf)||(a._pf=k(b));h(b._locale)||(a._locale=b._locale);if(0<Fb.length)for(c=0;c<Fb.length;c++)d=Fb[c],e=b[d],h(e)||(a[d]=e);return a}function w(b){x(this,b);this._d=new Date(null!=b._d?b._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===Gb&&(Gb=!0,a.updateOffset(this),Gb=!1)}function t(a){return a instanceof w||null!=a&&null!=a._isAMomentObject}
function p(a){return 0>a?Math.ceil(a)||0:Math.floor(a)}function v(a){a=+a;var b=0;0!==a&&isFinite(a)&&(b=p(a));return b}function g(a,b,c){var d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),g=0,f;for(f=0;f<d;f++)(c&&a[f]!==b[f]||!c&&v(a[f])!==v(b[f]))&&g++;return g+e}function r(b){!1===a.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function z(b,d){var e=!0;return c(function(){null!=a.deprecationHandler&&a.deprecationHandler(null,
b);if(e){for(var c=[],g,f=0;f<arguments.length;f++){g="";if("object"===typeof arguments[f]){g+="\n["+f+"] ";for(var h in arguments[0])g+=h+": "+arguments[0][h]+", ";g=g.slice(0,-2)}else g=arguments[f];c.push(g)}r(b+"\nArguments: "+Array.prototype.slice.call(c).join("")+"\n"+Error().stack);e=!1}return d.apply(this,arguments)},d)}function y(b,c){null!=a.deprecationHandler&&a.deprecationHandler(b,c);Tb[b]||(r(c),Tb[b]=!0)}function A(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}
function F(a,b){var e=c({},a),g;for(g in b)d(b,g)&&(m(a[g])&&m(b[g])?(e[g]={},c(e[g],a[g]),c(e[g],b[g])):null!=b[g]?e[g]=b[g]:delete e[g]);for(g in a)d(a,g)&&!d(b,g)&&m(a[g])&&(e[g]=c({},e[g]));return e}function B(a){null!=a&&this.set(a)}function E(a,b){var c=a.toLowerCase();ob[c]=ob[c+"s"]=ob[b]=a}function C(a){return"string"===typeof a?ob[a]||ob[a.toLowerCase()]:void 0}function G(a){var b={},c,e;for(e in a)d(a,e)&&(c=C(e))&&(b[c]=a[e]);return b}function L(a){var b=[],c;for(c in a)b.push({unit:c,
priority:Ca[c]});b.sort(function(a,b){return a.priority-b.priority});return b}function U(b,c){return function(d){if(null!=d){if(this.isValid())this._d["set"+(this._isUTC?"UTC":"")+b](d);a.updateOffset(this,c);return this}return P(this,b)}}function P(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function H(a,b,c){var d=""+Math.abs(a);return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,b-d.length)).toString().substr(1)+d}function K(a,b,c,d){var e=d;"string"===typeof d&&(e=function(){return this[d]()});
a&&(mb[a]=e);b&&(mb[b[0]]=function(){return H(e.apply(this,arguments),b[1],b[2])});c&&(mb[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function J(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function R(a){var b=a.match(Ub),c,d;c=0;for(d=b.length;c<d;c++)b[c]=mb[b[c]]?mb[b[c]]:J(b[c]);return function(c){var e="",g;for(g=0;g<d;g++)e+=A(b[g])?b[g].call(c,a):b[g];return e}}function M(a,b){if(!a.isValid())return a.localeData().invalidDate();
b=ea(b,a.localeData());Hb[b]=Hb[b]||R(b);return Hb[b](a)}function ea(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(wb.lastIndex=0;0<=d&&wb.test(a);)a=a.replace(wb,c),wb.lastIndex=0,--d;return a}function I(a,b,c){Ib[a]=A(b)?b:function(a,d){return a&&c?c:b}}function N(a,b){return d(Ib,a)?Ib[a](b._strict,b._locale):new RegExp(Y(a))}function Y(a){return aa(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function aa(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,
"\\$\x26")}function S(a,b){var c,d=b;"string"===typeof a&&(a=[a]);e(b)&&(d=function(a,c){c[b]=v(a)});for(c=0;c<a.length;c++)Jb[a[c]]=d}function Z(a,b){S(a,function(a,c,d,e){d._w=d._w||{};b(a,d._w,d,e)})}function da(a,b){return(new Date(Date.UTC(a,b+1,0))).getUTCDate()}function V(a,b){var c;if(!a.isValid())return a;if("string"===typeof b)if(/^\d+$/.test(b))b=v(b);else if(b=a.localeData().monthsParse(b),!e(b))return a;c=Math.min(a.date(),da(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);
return a}function la(b){return null!=b?(V(this,b),a.updateOffset(this,!0),this):P(this,"Month")}function ia(){function a(a,b){return b.length-a.length}var c=[],d=[],e=[],g,f;for(g=0;12>g;g++)f=b([2E3,g]),c.push(this.monthsShort(f,"")),d.push(this.months(f,"")),e.push(this.months(f,"")),e.push(this.monthsShort(f,""));c.sort(a);d.sort(a);e.sort(a);for(g=0;12>g;g++)c[g]=aa(c[g]),d[g]=aa(d[g]);for(g=0;24>g;g++)e[g]=aa(e[g]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+e.join("|")+")","i");
this._monthsStrictRegex=new RegExp("^("+d.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+c.join("|")+")","i")}function ha(a){return 0===a%4&&0!==a%100||0===a%400}function pa(a,b,c,d,e,g,f){b=new Date(a,b,c,d,e,g,f);100>a&&0<=a&&isFinite(b.getFullYear())&&b.setFullYear(a);return b}function va(a){var b=new Date(Date.UTC.apply(null,arguments));100>a&&0<=a&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a);return b}function Da(a,b,c){c=7+b-c;return-((7+va(a,0,c).getUTCDay()-b)%7)+c-1}
function xa(a,b,c,d,e){c=(7+c-d)%7;d=Da(a,d,e);d=1+7*(b-1)+c+d;0>=d?(b=a-1,a=(ha(b)?366:365)+d):d>(ha(a)?366:365)?(b=a+1,a=d-(ha(a)?366:365)):(b=a,a=d);return{year:b,dayOfYear:a}}function Ha(a,b,c){var d=Da(a.year(),b,c),d=Math.floor((a.dayOfYear()-d-1)/7)+1;1>d?(a=a.year()-1,b=d+oa(a,b,c)):d>oa(a.year(),b,c)?(b=d-oa(a.year(),b,c),a=a.year()+1):(a=a.year(),b=d);return{week:b,year:a}}function oa(a,b,c){var d=Da(a,b,c);b=Da(a+1,b,c);return((ha(a)?366:365)-d+b)/7}function hb(a,c,d){var e,g;a=a.toLocaleLowerCase();
if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],e=0;7>e;++e)g=b([2E3,1]).day(e),this._minWeekdaysParse[e]=this.weekdaysMin(g,"").toLocaleLowerCase(),this._shortWeekdaysParse[e]=this.weekdaysShort(g,"").toLocaleLowerCase(),this._weekdaysParse[e]=this.weekdays(g,"").toLocaleLowerCase();if(d)c="dddd"===c?Aa.call(this._weekdaysParse,a):"ddd"===c?Aa.call(this._shortWeekdaysParse,a):Aa.call(this._minWeekdaysParse,a);else if("dddd"===c){c=Aa.call(this._weekdaysParse,
a);if(-1!==c)return c;c=Aa.call(this._shortWeekdaysParse,a);if(-1!==c)return c;c=Aa.call(this._minWeekdaysParse,a)}else if("ddd"===c){c=Aa.call(this._shortWeekdaysParse,a);if(-1!==c)return c;c=Aa.call(this._weekdaysParse,a);if(-1!==c)return c;c=Aa.call(this._minWeekdaysParse,a)}else{c=Aa.call(this._minWeekdaysParse,a);if(-1!==c)return c;c=Aa.call(this._weekdaysParse,a);if(-1!==c)return c;c=Aa.call(this._shortWeekdaysParse,a)}return-1!==c?c:null}function Ra(){function a(a,b){return b.length-a.length}
var c=[],d=[],e=[],g=[],f,h,k,p;for(f=0;7>f;f++)h=b([2E3,1]).day(f),k=this.weekdaysMin(h,""),p=this.weekdaysShort(h,""),h=this.weekdays(h,""),c.push(k),d.push(p),e.push(h),g.push(k),g.push(p),g.push(h);c.sort(a);d.sort(a);e.sort(a);g.sort(a);for(f=0;7>f;f++)d[f]=aa(d[f]),e[f]=aa(e[f]),g[f]=aa(g[f]);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+g.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+e.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+
d.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+c.join("|")+")","i")}function Na(){return this.hours()%12||12}function ta(a,b){K(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function ya(a,b){return b._meridiemParse}function Ga(a){return a?a.toLowerCase().replace("_","-"):a}function ib(a){var b=null;if(!ua[a]&&"undefined"!==typeof module&&module&&module.exports)try{b=xb._abbr,require("./locale/"+a),Ia(b)}catch(Pc){}return ua[a]}function Ia(a,
b){a&&(a=h(b)?Ea(a):Ja(a,b))&&(xb=a);return xb._abbr}function Ja(a,b){if(null!==b){var c=Vb;b.abbr=a;if(null!=ua[a])y("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),c=ua[a]._config;else if(null!=b.parentLocale)if(null!=ua[b.parentLocale])c=ua[b.parentLocale]._config;else return pb[b.parentLocale]||
(pb[b.parentLocale]=[]),pb[b.parentLocale].push({name:a,config:b}),null;ua[a]=new B(F(c,b));pb[a]&&pb[a].forEach(function(a){Ja(a.name,a.config)});Ia(a);return ua[a]}delete ua[a];return null}function Ea(a){var b;a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr);if(!a)return xb;if(!f(a)){if(b=ib(a))return b;a=[a]}a:{b=0;for(var c,d,e,h;b<a.length;){h=Ga(a[b]).split("-");c=h.length;for(d=(d=Ga(a[b+1]))?d.split("-"):null;0<c;){if(e=ib(h.slice(0,c).join("-"))){a=e;break a}if(d&&d.length>=c&&g(h,d,!0)>=
c-1)break;c--}b++}a=null}return a}function Fa(a){var b;(b=a._a)&&-2===k(a).overflow&&(b=0>b[Xa]||11<b[Xa]?Xa:1>b[Ta]||b[Ta]>da(b[Oa],b[Xa])?Ta:0>b[wa]||24<b[wa]||24===b[wa]&&(0!==b[Pa]||0!==b[Ya]||0!==b[jb])?wa:0>b[Pa]||59<b[Pa]?Pa:0>b[Ya]||59<b[Ya]?Ya:0>b[jb]||999<b[jb]?jb:-1,k(a)._overflowDayOfYear&&(b<Oa||b>Ta)&&(b=Ta),k(a)._overflowWeeks&&-1===b&&(b=fc),k(a)._overflowWeekday&&-1===b&&(b=gc),k(a).overflow=b);return a}function Qa(a){var b,c;b=a._i;var d=hc.exec(b)||ic.exec(b),e,g,f,h;if(d){k(a).iso=
!0;b=0;for(c=yb.length;b<c;b++)if(yb[b][1].exec(d[1])){g=yb[b][0];e=!1!==yb[b][2];break}if(null==g)a._isValid=!1;else{if(d[3]){b=0;for(c=Kb.length;b<c;b++)if(Kb[b][1].exec(d[3])){f=(d[2]||" ")+Kb[b][0];break}if(null==f){a._isValid=!1;return}}if(e||null==f){if(d[4])if(jc.exec(d[4]))h="Z";else{a._isValid=!1;return}a._f=g+(f||"")+(h||"");za(a)}else a._isValid=!1}}else a._isValid=!1}function $a(a){var b,c,d,e,g={" GMT":" +0000"," EDT":" -0400"," EST":" -0500"," CDT":" -0500"," CST":" -0600"," MDT":" -0600",
" MST":" -0700"," PDT":" -0700"," PST":" -0800"},f;b=a._i.replace(/\([^\)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s|\s$/g,"");if(b=kc.exec(b)){c=b[1]?"ddd"+(5===b[1].length?", ":" "):"";d="D MMM "+(10<b[2].length?"YYYY ":"YY ");e="HH:mm"+(b[4]?":ss":"");if(b[1]){var h="Sun Mon Tue Wed Thu Fri Sat".split(" ")[(new Date(b[2])).getDay()];if(b[1].substr(0,3)!==h){k(a).weekdayMismatch=!0;a._isValid=!1;return}}switch(b[5].length){case 2:0===f?g=" +0000":(f="YXWVUTSRQPONZABCDEFGHIKLM".indexOf(b[5][1].toUpperCase())-
12,g=(0>f?" -":" +")+(""+f).replace(/^-?/,"0").match(/..$/)[0]+"00");break;case 4:g=g[b[5]];break;default:g=g[" GMT"]}b[5]=g;a._i=b.splice(1).join("");a._f=c+d+e+" ZZ";za(a);k(a).rfc2822=!0}else a._isValid=!1}function Sa(b){var c=lc.exec(b._i);null!==c?b._d=new Date(+c[1]):(Qa(b),!1===b._isValid&&(delete b._isValid,$a(b),!1===b._isValid&&(delete b._isValid,a.createFromInputFallback(b))))}function Ba(a,b,c){return null!=a?a:null!=b?b:c}function T(b){var c,d=[],e;if(!b._d){e=new Date(a.now());e=b._useUTC?
[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()];if(b._w&&null==b._a[Ta]&&null==b._a[Xa]){var g,f,h,p,l,m;g=b._w;if(null!=g.GG||null!=g.W||null!=g.E){if(l=1,m=4,f=Ba(g.GG,b._a[Oa],Ha(ba(),1,4).year),h=Ba(g.W,1),p=Ba(g.E,1),1>p||7<p)c=!0}else if(l=b._locale._week.dow,m=b._locale._week.doy,h=Ha(ba(),l,m),f=Ba(g.gg,b._a[Oa],h.year),h=Ba(g.w,h.week),null!=g.d){if(p=g.d,0>p||6<p)c=!0}else if(null!=g.e){if(p=g.e+l,0>g.e||6<g.e)c=!0}else p=l;1>h||h>oa(f,l,m)?
k(b)._overflowWeeks=!0:null!=c?k(b)._overflowWeekday=!0:(c=xa(f,h,p,l,m),b._a[Oa]=c.year,b._dayOfYear=c.dayOfYear)}if(null!=b._dayOfYear){c=Ba(b._a[Oa],e[Oa]);if(b._dayOfYear>(ha(c)?366:365)||0===b._dayOfYear)k(b)._overflowDayOfYear=!0;c=va(c,0,b._dayOfYear);b._a[Xa]=c.getUTCMonth();b._a[Ta]=c.getUTCDate()}for(c=0;3>c&&null==b._a[c];++c)b._a[c]=d[c]=e[c];for(;7>c;c++)b._a[c]=d[c]=null==b._a[c]?2===c?1:0:b._a[c];24===b._a[wa]&&0===b._a[Pa]&&0===b._a[Ya]&&0===b._a[jb]&&(b._nextDay=!0,b._a[wa]=0);b._d=
(b._useUTC?va:pa).apply(null,d);null!=b._tzm&&b._d.setUTCMinutes(b._d.getUTCMinutes()-b._tzm);b._nextDay&&(b._a[wa]=24)}}function za(b){if(b._f===a.ISO_8601)Qa(b);else if(b._f===a.RFC_2822)$a(b);else{b._a=[];k(b).empty=!0;var c=""+b._i,e,g,f,h,p,l=c.length,m=0;f=ea(b._f,b._locale).match(Ub)||[];for(e=0;e<f.length;e++){h=f[e];if(g=(c.match(N(h,b))||[])[0])p=c.substr(0,c.indexOf(g)),0<p.length&&k(b).unusedInput.push(p),c=c.slice(c.indexOf(g)+g.length),m+=g.length;if(mb[h]){if(g?k(b).empty=!1:k(b).unusedTokens.push(h),
p=b,null!=g&&d(Jb,h))Jb[h](g,p._a,p,h)}else b._strict&&!g&&k(b).unusedTokens.push(h)}k(b).charsLeftOver=l-m;0<c.length&&k(b).unusedInput.push(c);12>=b._a[wa]&&!0===k(b).bigHour&&0<b._a[wa]&&(k(b).bigHour=void 0);k(b).parsedDateParts=b._a.slice(0);k(b).meridiem=b._meridiem;c=b._a;e=wa;l=b._locale;f=b._a[wa];m=b._meridiem;null!=m&&(null!=l.meridiemHour?f=l.meridiemHour(f,m):null!=l.isPM&&((l=l.isPM(m))&&12>f&&(f+=12),l||12!==f||(f=0)));c[e]=f;T(b);Fa(b)}}function sa(a){if(!a._d){var b=G(a._i);a._a=
n([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)});T(a)}}function ga(a){var b=a._i,d=a._f;a._locale=a._locale||Ea(a._l);if(null===b||void 0===d&&""===b)return u({nullInput:!0});"string"===typeof b&&(a._i=b=a._locale.preparse(b));if(t(b))return new w(Fa(b));if(l(b))a._d=b;else if(f(d)){var e,g,h;if(0===a._f.length)k(a).invalidFormat=!0,a._d=new Date(NaN);else{for(b=0;b<a._f.length;b++)if(d=0,e=x({},a),null!=a._useUTC&&(e._useUTC=a._useUTC),
e._f=a._f[b],za(e),q(e)&&(d+=k(e).charsLeftOver,d+=10*k(e).unusedTokens.length,k(e).score=d,null==h||d<h))h=d,g=e;c(a,g||e)}}else d?za(a):Ma(a);q(a)||(a._d=null);return a}function Ma(b){var c=b._i;h(c)?b._d=new Date(a.now()):l(c)?b._d=new Date(c.valueOf()):"string"===typeof c?Sa(b):f(c)?(b._a=n(c.slice(0),function(a){return parseInt(a,10)}),T(b)):m(c)?sa(b):e(c)?b._d=new Date(c):a.createFromInputFallback(b)}function Ka(a,b,c,d,e){var g={};if(!0===c||!1===c)d=c,c=void 0;var h;if(h=m(a))a:{h=a;for(var k in h){h=
!1;break a}h=!0}if(h||f(a)&&0===a.length)a=void 0;g._isAMomentObject=!0;g._useUTC=g._isUTC=e;g._l=c;g._i=a;g._f=b;g._strict=d;a=new w(Fa(ga(g)));a._nextDay&&(a.add(1,"d"),a._nextDay=void 0);return a}function ba(a,b,c,d){return Ka(a,b,c,d,!1)}function bb(a,b){var c,d;1===b.length&&f(b[0])&&(b=b[0]);if(!b.length)return ba();c=b[0];for(d=1;d<b.length;++d)if(!b[d].isValid()||b[d][a](c))c=b[d];return c}function Q(a){for(var b in a)if(-1===qb.indexOf(b)||null!=a[b]&&isNaN(a[b]))return!1;b=!1;for(var c=
0;c<qb.length;++c)if(a[qb[c]]){if(b)return!1;parseFloat(a[qb[c]])!==v(a[qb[c]])&&(b=!0)}return!0}function ka(a){a=G(a);var b=a.year||0,c=a.quarter||0,d=a.month||0,e=a.week||0,g=a.day||0,f=a.hour||0,h=a.minute||0,k=a.second||0,p=a.millisecond||0;this._isValid=Q(a);this._milliseconds=+p+1E3*k+6E4*h+36E5*f;this._days=+g+7*e;this._months=+d+3*c+12*b;this._data={};this._locale=Ea();this._bubble()}function D(a){return a instanceof ka}function fa(a){return 0>a?-1*Math.round(-1*a):Math.round(a)}function ja(a,
b){K(a,0,0,function(){var a=this.utcOffset(),c="+";0>a&&(a=-a,c="-");return c+H(~~(a/60),2)+b+H(~~a%60,2)})}function ma(a,b){a=(b||"").match(a);if(null===a)return null;a=((a[a.length-1]||[])+"").match(mc)||["-",0,0];b=+(60*a[1])+v(a[2]);return 0===b?0:"+"===a[0]?b:-b}function X(b,c){return c._isUTC?(c=c.clone(),b=(t(b)||l(b)?b.valueOf():ba(b).valueOf())-c.valueOf(),c._d.setTime(c._d.valueOf()+b),a.updateOffset(c,!1),c):ba(b).local()}function ca(){return this.isValid()?this._isUTC&&0===this._offset:
!1}function O(a,b){var c=a,g=null;D(a)?c={ms:a._milliseconds,d:a._days,M:a._months}:e(a)?(c={},b?c[b]=a:c.milliseconds=a):(g=nc.exec(a))?(c="-"===g[1]?-1:1,c={y:0,d:v(g[Ta])*c,h:v(g[wa])*c,m:v(g[Pa])*c,s:v(g[Ya])*c,ms:v(fa(1E3*g[jb]))*c}):(g=oc.exec(a))?(c="-"===g[1]?-1:1,c={y:Wa(g[2],c),M:Wa(g[3],c),w:Wa(g[4],c),d:Wa(g[5],c),h:Wa(g[6],c),m:Wa(g[7],c),s:Wa(g[8],c)}):null==c?c={}:"object"===typeof c&&("from"in c||"to"in c)&&(g=ba(c.from),c=ba(c.to),g.isValid()&&c.isValid()?(c=X(c,g),g.isBefore(c)?
c=nb(g,c):(c=nb(c,g),c.milliseconds=-c.milliseconds,c.months=-c.months),g=c):g={milliseconds:0,months:0},c={},c.ms=g.milliseconds,c.M=g.months);c=new ka(c);D(a)&&d(a,"_locale")&&(c._locale=a._locale);return c}function Wa(a,b){a=a&&parseFloat(a.replace(",","."));return(isNaN(a)?0:a)*b}function nb(a,b){var c={milliseconds:0,months:0};c.months=b.month()-a.month()+12*(b.year()-a.year());a.clone().add(c.months,"M").isAfter(b)&&--c.months;c.milliseconds=+b-+a.clone().add(c.months,"M");return c}function lb(a,
b){return function(c,d){var e;null===d||isNaN(+d)||(y(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),e=c,c=d,d=e);c=O("string"===typeof c?+c:c,d);ub(this,c,a);return this}}function ub(b,c,d,e){var g=c._milliseconds,f=fa(c._days);c=fa(c._months);if(b.isValid()){e=null==e?!0:e;g&&b._d.setTime(b._d.valueOf()+g*d);if(f&&(g=P(b,"Date")+f*d,b.isValid()))b._d["set"+(b._isUTC?"UTC":
"")+"Date"](g);c&&V(b,P(b,"Month")+c*d);e&&a.updateOffset(b,f||c)}}function Va(a){if(void 0===a)return this._locale._abbr;a=Ea(a);null!=a&&(this._locale=a);return this}function sb(){return this._locale}function cb(a,b){K(0,[a,a.length],0,b)}function vb(a,b,c,d,e){var g;if(null==a)return Ha(this,d,e).year;g=oa(a,d,e);b>g&&(b=g);a=xa(a,b,c,d,e);a=va(a.year,0,a.dayOfYear);this.year(a.getUTCFullYear());this.month(a.getUTCMonth());this.date(a.getUTCDate());return this}function Ob(a,b){b[jb]=v(1E3*("0."+
a))}function kb(a){return a}function fb(a,c,d,e){var g=Ea();c=b().set(e,c);return g[d](c,a)}function Pb(a,b,c){e(a)&&(b=a,a=void 0);a=a||"";if(null!=b)return fb(a,b,c,"month");var d=[];for(b=0;12>b;b++)d[b]=fb(a,b,c,"month");return d}function Eb(a,b,c,d){"boolean"!==typeof a&&(c=b=a,a=!1);e(b)&&(c=b,b=void 0);b=b||"";var g=Ea();a=a?g._week.dow:0;if(null!=c)return fb(b,(c+a)%7,d,"day");g=[];for(c=0;7>c;c++)g[c]=fb(b,(c+a)%7,d,"day");return g}function Qb(a,b,c,d){b=O(b,c);a._milliseconds+=d*b._milliseconds;
a._days+=d*b._days;a._months+=d*b._months;return a._bubble()}function Rb(a){return 0>a?Math.floor(a):Math.ceil(a)}function ab(a){return function(){return this.as(a)}}function gb(a){return function(){return this.isValid()?this._data[a]:NaN}}function dc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function tb(){if(!this.isValid())return this.localeData().invalidDate();var a=Lb(this._milliseconds)/1E3,b=Lb(this._days),c=Lb(this._months),d,e;d=p(a/60);e=p(d/60);a%=60;d%=60;var g=p(c/12),c=c%12,f=this.asSeconds();
return f?(0>f?"-":"")+"P"+(g?g+"Y":"")+(c?c+"M":"")+(b?b+"D":"")+(e||d||a?"T":"")+(e?e+"H":"")+(d?d+"M":"")+(a?a+"S":""):"P0D"}var Sb,ec=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;d<c;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1},Fb=a.momentProperties=[],Gb=!1,Tb={};a.suppressDeprecationWarnings=!1;a.deprecationHandler=null;var pc=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)d(a,b)&&c.push(b);return c},ob={},Ca={},Ub=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
wb=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Hb={},mb={},Wb=/\d/,La=/\d\d/,Xb=/\d{3}/,Mb=/\d{4}/,zb=/[+-]?\d{6}/,ra=/\d\d?/,Yb=/\d\d\d\d?/,Zb=/\d\d\d\d\d\d?/,Ab=/\d{1,3}/,Nb=/\d{1,4}/,Bb=/[+-]?\d{1,6}/,qc=/\d+/,Cb=/[+-]?\d+/,rc=/Z|[+-]\d\d:?\d\d/gi,Db=/Z|[+-]\d\d(?::?\d\d)?/gi,rb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Ib={},Jb={},Oa=0,Xa=1,Ta=2,wa=3,Pa=4,Ya=5,jb=6,fc=7,gc=8,Aa=Array.prototype.indexOf?Array.prototype.indexOf:
function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1};K("M",["MM",2],"Mo",function(){return this.month()+1});K("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)});K("MMMM",0,0,function(a){return this.localeData().months(this,a)});E("month","M");Ca.month=8;I("M",ra);I("MM",ra,La);I("MMM",function(a,b){return b.monthsShortRegex(a)});I("MMMM",function(a,b){return b.monthsRegex(a)});S(["M","MM"],function(a,b){b[Xa]=v(a)-1});S(["MMM","MMMM"],function(a,b,c,d){d=
c._locale.monthsParse(a,d,c._strict);null!=d?b[Xa]=d:k(c).invalidMonth=a});var $b=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;K("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a});K(0,["YY",2],0,function(){return this.year()%100});K(0,["YYYY",4],0,"year");K(0,["YYYYY",5],0,"year");K(0,["YYYYYY",6,!0],0,"year");E("year","y");Ca.year=1;I("Y",Cb);I("YY",ra,La);I("YYYY",Nb,Mb);I("YYYYY",Bb,zb);I("YYYYYY",Bb,zb);S(["YYYYY","YYYYYY"],Oa);S("YYYY",function(b,c){c[Oa]=2===b.length?a.parseTwoDigitYear(b):
v(b)});S("YY",function(b,c){c[Oa]=a.parseTwoDigitYear(b)});S("Y",function(a,b){b[Oa]=parseInt(a,10)});a.parseTwoDigitYear=function(a){return v(a)+(68<v(a)?1900:2E3)};var ac=U("FullYear",!0);K("w",["ww",2],"wo","week");K("W",["WW",2],"Wo","isoWeek");E("week","w");E("isoWeek","W");Ca.week=5;Ca.isoWeek=5;I("w",ra);I("ww",ra,La);I("W",ra);I("WW",ra,La);Z(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=v(a)});K("d",0,"do","day");K("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)});
K("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)});K("dddd",0,0,function(a){return this.localeData().weekdays(this,a)});K("e",0,0,"weekday");K("E",0,0,"isoWeekday");E("day","d");E("weekday","e");E("isoWeekday","E");Ca.day=11;Ca.weekday=11;Ca.isoWeekday=11;I("d",ra);I("e",ra);I("E",ra);I("dd",function(a,b){return b.weekdaysMinRegex(a)});I("ddd",function(a,b){return b.weekdaysShortRegex(a)});I("dddd",function(a,b){return b.weekdaysRegex(a)});Z(["dd","ddd","dddd"],function(a,b,
c,d){d=c._locale.weekdaysParse(a,d,c._strict);null!=d?b.d=d:k(c).invalidWeekday=a});Z(["d","e","E"],function(a,b,c,d){b[d]=v(a)});K("H",["HH",2],0,"hour");K("h",["hh",2],0,Na);K("k",["kk",2],0,function(){return this.hours()||24});K("hmm",0,0,function(){return""+Na.apply(this)+H(this.minutes(),2)});K("hmmss",0,0,function(){return""+Na.apply(this)+H(this.minutes(),2)+H(this.seconds(),2)});K("Hmm",0,0,function(){return""+this.hours()+H(this.minutes(),2)});K("Hmmss",0,0,function(){return""+this.hours()+
H(this.minutes(),2)+H(this.seconds(),2)});ta("a",!0);ta("A",!1);E("hour","h");Ca.hour=13;I("a",ya);I("A",ya);I("H",ra);I("h",ra);I("k",ra);I("HH",ra,La);I("hh",ra,La);I("kk",ra,La);I("hmm",Yb);I("hmmss",Zb);I("Hmm",Yb);I("Hmmss",Zb);S(["H","HH"],wa);S(["k","kk"],function(a,b,c){a=v(a);b[wa]=24===a?0:a});S(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a);c._meridiem=a});S(["h","hh"],function(a,b,c){b[wa]=v(a);k(c).bigHour=!0});S("hmm",function(a,b,c){var d=a.length-2;b[wa]=v(a.substr(0,d));b[Pa]=
v(a.substr(d));k(c).bigHour=!0});S("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[wa]=v(a.substr(0,d));b[Pa]=v(a.substr(d,2));b[Ya]=v(a.substr(e));k(c).bigHour=!0});S("Hmm",function(a,b,c){c=a.length-2;b[wa]=v(a.substr(0,c));b[Pa]=v(a.substr(c))});S("Hmmss",function(a,b,c){c=a.length-4;var d=a.length-2;b[wa]=v(a.substr(0,c));b[Pa]=v(a.substr(c,2));b[Ya]=v(a.substr(d))});var sc=U("Hours",!0),Vb={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",
lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),
monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),meridiemParse:/[ap]\.?m?\.?/i},ua={},pb={},xb,hc=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ic=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
jc=/Z|[+-]\d\d(?::?\d\d)?/,yb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Kb=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",
/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],lc=/^\/?Date\((\-?\d+)/i,kc=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;a.createFromInputFallback=z("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",
function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});a.ISO_8601=function(){};a.RFC_2822=function(){};var tc=z("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=ba.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:u()}),uc=z("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=ba.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?
this:a:u()}),qb="year quarter month week day hour minute second millisecond".split(" ");ja("Z",":");ja("ZZ","");I("Z",Db);I("ZZ",Db);S(["Z","ZZ"],function(a,b,c){c._useUTC=!0;c._tzm=ma(Db,a)});var mc=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var nc=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,oc=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;O.fn=ka.prototype;O.invalid=function(){return O(NaN)};
var vc=lb(1,"add"),wc=lb(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";a.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var bc=z("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});K(0,["gg",2],0,function(){return this.weekYear()%100});K(0,["GG",2],0,function(){return this.isoWeekYear()%100});cb("gggg","weekYear");cb("ggggg","weekYear");
cb("GGGG","isoWeekYear");cb("GGGGG","isoWeekYear");E("weekYear","gg");E("isoWeekYear","GG");Ca.weekYear=1;Ca.isoWeekYear=1;I("G",Cb);I("g",Cb);I("GG",ra,La);I("gg",ra,La);I("GGGG",Nb,Mb);I("gggg",Nb,Mb);I("GGGGG",Bb,zb);I("ggggg",Bb,zb);Z(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=v(a)});Z(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)});K("Q",0,"Qo","quarter");E("quarter","Q");Ca.quarter=7;I("Q",Wb);S("Q",function(a,b){b[Xa]=3*(v(a)-1)});K("D",["DD",2],"Do","date");
E("date","D");Ca.date=9;I("D",ra);I("DD",ra,La);I("Do",function(a,b){return a?b._dayOfMonthOrdinalParse||b._ordinalParse:b._dayOfMonthOrdinalParseLenient});S(["D","DD"],Ta);S("Do",function(a,b){b[Ta]=v(a.match(ra)[0],10)});var cc=U("Date",!0);K("DDD",["DDDD",3],"DDDo","dayOfYear");E("dayOfYear","DDD");Ca.dayOfYear=4;I("DDD",Ab);I("DDDD",Xb);S(["DDD","DDDD"],function(a,b,c){c._dayOfYear=v(a)});K("m",["mm",2],0,"minute");E("minute","m");Ca.minute=14;I("m",ra);I("mm",ra,La);S(["m","mm"],Pa);var xc=U("Minutes",
!1);K("s",["ss",2],0,"second");E("second","s");Ca.second=15;I("s",ra);I("ss",ra,La);S(["s","ss"],Ya);var yc=U("Seconds",!1);K("S",0,0,function(){return~~(this.millisecond()/100)});K(0,["SS",2],0,function(){return~~(this.millisecond()/10)});K(0,["SSS",3],0,"millisecond");K(0,["SSSS",4],0,function(){return 10*this.millisecond()});K(0,["SSSSS",5],0,function(){return 100*this.millisecond()});K(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});K(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});
K(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});K(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});E("millisecond","ms");Ca.millisecond=16;I("S",Ab,Wb);I("SS",Ab,La);I("SSS",Ab,Xb);var db;for(db="SSSS";9>=db.length;db+="S")I(db,qc);for(db="S";9>=db.length;db+="S")S(db,Ob);var zc=U("Milliseconds",!1);K("z",0,0,"zoneAbbr");K("zz",0,0,"zoneName");var W=w.prototype;W.add=vc;W.calendar=function(b,c){b=b||ba();var d=X(b,this).startOf("day"),d=a.calendarFormat(this,d)||"sameElse";
c=c&&(A(c[d])?c[d].call(this,b):c[d]);return this.format(c||this.localeData().calendar(d,this,ba(b)))};W.clone=function(){return new w(this)};W.diff=function(a,b,c){var d;if(!this.isValid())return NaN;a=X(a,this);if(!a.isValid())return NaN;d=6E4*(a.utcOffset()-this.utcOffset());b=C(b);if("year"===b||"month"===b||"quarter"===b){d=12*(a.year()-this.year())+(a.month()-this.month());var e=this.clone().add(d,"months"),g;0>a-e?(g=this.clone().add(d-1,"months"),a=(a-e)/(e-g)):(g=this.clone().add(d+1,"months"),
a=(a-e)/(g-e));a=-(d+a)||0;"quarter"===b?a/=3:"year"===b&&(a/=12)}else a=this-a,a="second"===b?a/1E3:"minute"===b?a/6E4:"hour"===b?a/36E5:"day"===b?(a-d)/864E5:"week"===b?(a-d)/6048E5:a;return c?a:p(a)};W.endOf=function(a){a=C(a);if(void 0===a||"millisecond"===a)return this;"date"===a&&(a="day");return this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")};W.format=function(b){b||(b=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);b=M(this,b);return this.localeData().postformat(b)};W.from=
function(a,b){return this.isValid()&&(t(a)&&a.isValid()||ba(a).isValid())?O({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};W.fromNow=function(a){return this.from(ba(),a)};W.to=function(a,b){return this.isValid()&&(t(a)&&a.isValid()||ba(a).isValid())?O({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};W.toNow=function(a){return this.to(ba(),a)};W.get=function(a){a=C(a);return A(this[a])?this[a]():this};W.invalidAt=function(){return k(this).overflow};
W.isAfter=function(a,b){a=t(a)?a:ba(a);if(!this.isValid()||!a.isValid())return!1;b=C(h(b)?"millisecond":b);return"millisecond"===b?this.valueOf()>a.valueOf():a.valueOf()<this.clone().startOf(b).valueOf()};W.isBefore=function(a,b){a=t(a)?a:ba(a);if(!this.isValid()||!a.isValid())return!1;b=C(h(b)?"millisecond":b);return"millisecond"===b?this.valueOf()<a.valueOf():this.clone().endOf(b).valueOf()<a.valueOf()};W.isBetween=function(a,b,c,d){d=d||"()";return("("===d[0]?this.isAfter(a,c):!this.isBefore(a,
c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))};W.isSame=function(a,b){a=t(a)?a:ba(a);if(!this.isValid()||!a.isValid())return!1;b=C(b||"millisecond");if("millisecond"===b)return this.valueOf()===a.valueOf();a=a.valueOf();return this.clone().startOf(b).valueOf()<=a&&a<=this.clone().endOf(b).valueOf()};W.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)};W.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)};W.isValid=function(){return q(this)};W.lang=
bc;W.locale=Va;W.localeData=sb;W.max=uc;W.min=tc;W.parsingFlags=function(){return c({},k(this))};W.set=function(a,b){if("object"===typeof a){a=G(a);b=L(a);for(var c=0;c<b.length;c++)this[b[c].unit](a[b[c].unit])}else if(a=C(a),A(this[a]))return this[a](b);return this};W.startOf=function(a){a=C(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":case "date":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===
a&&this.weekday(0);"isoWeek"===a&&this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this};W.subtract=wc;W.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};W.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};W.toDate=function(){return new Date(this.valueOf())};W.toISOString=
function(){if(!this.isValid())return null;var a=this.clone().utc();return 0>a.year()||9999<a.year()?M(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):A(Date.prototype.toISOString)?this.toDate().toISOString():M(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")};W.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b="";this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",b="Z");var a="["+a+'("]',c=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY";return this.format(a+
c+"-MM-DD[T]HH:mm:ss.SSS"+(b+'[")]'))};W.toJSON=function(){return this.isValid()?this.toISOString():null};W.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};W.unix=function(){return Math.floor(this.valueOf()/1E3)};W.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};W.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};W.year=ac;W.isLeapYear=function(){return ha(this.year())};
W.weekYear=function(a){return vb.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};W.isoWeekYear=function(a){return vb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)};W.quarter=W.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)};W.month=la;W.daysInMonth=function(){return da(this.year(),this.month())};W.week=W.weeks=function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")};
W.isoWeek=W.isoWeeks=function(a){var b=Ha(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")};W.weeksInYear=function(){var a=this.localeData()._week;return oa(this.year(),a.dow,a.doy)};W.isoWeeksInYear=function(){return oa(this.year(),1,4)};W.date=cc;W.day=W.days=function(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=a){var c=this.localeData();"string"===typeof a&&(isNaN(a)?(a=c.weekdaysParse(a),a="number"===typeof a?a:null):a=parseInt(a,
10));return this.add(a-b,"d")}return b};W.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")};W.isoWeekday=function(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=this.localeData();a="string"===typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a;return this.day(this.day()%7?a:a-7)}return this.day()||7};W.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/
864E5)+1;return null==a?b:this.add(a-b,"d")};W.hour=W.hours=sc;W.minute=W.minutes=xc;W.second=W.seconds=yc;W.millisecond=W.milliseconds=zc;W.utcOffset=function(b,c,d){var e=this._offset||0,g;if(!this.isValid())return null!=b?this:NaN;if(null!=b){if("string"===typeof b){if(b=ma(Db,b),null===b)return this}else 16>Math.abs(b)&&!d&&(b*=60);!this._isUTC&&c&&(g=15*-Math.round(this._d.getTimezoneOffset()/15));this._offset=b;this._isUTC=!0;null!=g&&this.add(g,"m");e!==b&&(!c||this._changeInProgress?ub(this,
O(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?e:15*-Math.round(this._d.getTimezoneOffset()/15)};W.utc=function(a){return this.utcOffset(0,a)};W.local=function(a){this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};W.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var a=
ma(rc,this._i);null!=a?this.utcOffset(a):this.utcOffset(0,!0)}return this};W.hasAlignedHourOffset=function(a){if(!this.isValid())return!1;a=a?ba(a).utcOffset():0;return 0===(this.utcOffset()-a)%60};W.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};W.isLocal=function(){return this.isValid()?!this._isUTC:!1};W.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};W.isUtc=ca;W.isUTC=ca;W.zoneAbbr=function(){return this._isUTC?
"UTC":""};W.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};W.dates=z("dates accessor is deprecated. Use date instead.",cc);W.months=z("months accessor is deprecated. Use month instead",la);W.years=z("years accessor is deprecated. Use year instead",ac);W.zone=z("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(a,b){return null!=a?("string"!==typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()});W.isDSTShifted=
z("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!h(this._isDSTShifted))return this._isDSTShifted;var a={};x(a,this);a=ga(a);if(a._a){var c=a._isUTC?b(a._a):ba(a._a);this._isDSTShifted=this.isValid()&&0<g(a._a,c.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var qa=B.prototype;qa.calendar=function(a,b,c){a=this._calendar[a]||this._calendar.sameElse;return A(a)?a.call(b,c):a};qa.longDateFormat=function(a){var b=
this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];if(b||!c)return b;this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)});return this._longDateFormat[a]};qa.invalidDate=function(){return this._invalidDate};qa.ordinal=function(a){return this._ordinal.replace("%d",a)};qa.preparse=kb;qa.postformat=kb;qa.relativeTime=function(a,b,c,d){var e=this._relativeTime[c];return A(e)?e(a,b,c,d):e.replace(/%d/i,a)};qa.pastFuture=function(a,b){a=this._relativeTime[0<a?
"future":"past"];return A(a)?a(b):a.replace(/%s/i,b)};qa.set=function(a){var b,c;for(c in a)b=a[c],A(b)?this[c]=b:this["_"+c]=b;this._config=a;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};qa.months=function(a,b){return a?f(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||$b).test(b)?"format":"standalone"][a.month()]:f(this._months)?this._months:this._months.standalone};qa.monthsShort=
function(a,b){return a?f(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[$b.test(b)?"format":"standalone"][a.month()]:f(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};qa.monthsParse=function(a,c,d){var e,g;if(this._monthsParseExact){a:{a=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],e=0;12>e;++e)g=b([2E3,e]),this._shortMonthsParse[e]=this.monthsShort(g,"").toLocaleLowerCase(),this._longMonthsParse[e]=
this.months(g,"").toLocaleLowerCase();if(d)c="MMM"===c?Aa.call(this._shortMonthsParse,a):Aa.call(this._longMonthsParse,a);else if("MMM"===c){c=Aa.call(this._shortMonthsParse,a);if(-1!==c)break a;c=Aa.call(this._longMonthsParse,a)}else{c=Aa.call(this._longMonthsParse,a);if(-1!==c)break a;c=Aa.call(this._shortMonthsParse,a)}c=-1!==c?c:null}return c}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(e=0;12>e;e++)if(g=b([2E3,e]),d&&!this._longMonthsParse[e]&&
(this._longMonthsParse[e]=new RegExp("^"+this.months(g,"").replace(".","")+"$","i"),this._shortMonthsParse[e]=new RegExp("^"+this.monthsShort(g,"").replace(".","")+"$","i")),d||this._monthsParse[e]||(g="^"+this.months(g,"")+"|^"+this.monthsShort(g,""),this._monthsParse[e]=new RegExp(g.replace(".",""),"i")),d&&"MMMM"===c&&this._longMonthsParse[e].test(a)||d&&"MMM"===c&&this._shortMonthsParse[e].test(a)||!d&&this._monthsParse[e].test(a))return e};qa.monthsRegex=function(a){if(this._monthsParseExact)return d(this,
"_monthsRegex")||ia.call(this),a?this._monthsStrictRegex:this._monthsRegex;d(this,"_monthsRegex")||(this._monthsRegex=rb);return this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex};qa.monthsShortRegex=function(a){if(this._monthsParseExact)return d(this,"_monthsRegex")||ia.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex;d(this,"_monthsShortRegex")||(this._monthsShortRegex=rb);return this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex};
qa.week=function(a){return Ha(a,this._week.dow,this._week.doy).week};qa.firstDayOfYear=function(){return this._week.doy};qa.firstDayOfWeek=function(){return this._week.dow};qa.weekdays=function(a,b){return a?f(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]:f(this._weekdays)?this._weekdays:this._weekdays.standalone};qa.weekdaysMin=function(a){return a?this._weekdaysMin[a.day()]:this._weekdaysMin};qa.weekdaysShort=function(a){return a?
this._weekdaysShort[a.day()]:this._weekdaysShort};qa.weekdaysParse=function(a,c,d){var e,g;if(this._weekdaysParseExact)return hb.call(this,a,c,d);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(e=0;7>e;e++)if(g=b([2E3,1]).day(e),d&&!this._fullWeekdaysParse[e]&&(this._fullWeekdaysParse[e]=new RegExp("^"+this.weekdays(g,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[e]=new RegExp("^"+this.weekdaysShort(g,"").replace(".",
".?")+"$","i"),this._minWeekdaysParse[e]=new RegExp("^"+this.weekdaysMin(g,"").replace(".",".?")+"$","i")),this._weekdaysParse[e]||(g="^"+this.weekdays(g,"")+"|^"+this.weekdaysShort(g,"")+"|^"+this.weekdaysMin(g,""),this._weekdaysParse[e]=new RegExp(g.replace(".",""),"i")),d&&"dddd"===c&&this._fullWeekdaysParse[e].test(a)||d&&"ddd"===c&&this._shortWeekdaysParse[e].test(a)||d&&"dd"===c&&this._minWeekdaysParse[e].test(a)||!d&&this._weekdaysParse[e].test(a))return e};qa.weekdaysRegex=function(a){if(this._weekdaysParseExact)return d(this,
"_weekdaysRegex")||Ra.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex;d(this,"_weekdaysRegex")||(this._weekdaysRegex=rb);return this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex};qa.weekdaysShortRegex=function(a){if(this._weekdaysParseExact)return d(this,"_weekdaysRegex")||Ra.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;d(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=rb);return this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:
this._weekdaysShortRegex};qa.weekdaysMinRegex=function(a){if(this._weekdaysParseExact)return d(this,"_weekdaysRegex")||Ra.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;d(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=rb);return this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};qa.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)};qa.meridiem=function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"};Ia("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,
ordinal:function(a){var b=a%10,b=1===v(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});a.lang=z("moment.lang is deprecated. Use moment.locale instead.",Ia);a.langData=z("moment.langData is deprecated. Use moment.localeData instead.",Ea);var Za=Math.abs,Ac=ab("ms"),Bc=ab("s"),Cc=ab("m"),Dc=ab("h"),Ec=ab("d"),Fc=ab("w"),Gc=ab("M"),Hc=ab("y"),Ic=gb("milliseconds"),Jc=gb("seconds"),Kc=gb("minutes"),Lc=gb("hours"),Mc=gb("days"),Nc=gb("months"),Oc=gb("years"),eb=Math.round,Ua={ss:44,
s:45,m:45,h:22,d:26,M:11},Lb=Math.abs,na=ka.prototype;na.isValid=function(){return this._isValid};na.abs=function(){var a=this._data;this._milliseconds=Za(this._milliseconds);this._days=Za(this._days);this._months=Za(this._months);a.milliseconds=Za(a.milliseconds);a.seconds=Za(a.seconds);a.minutes=Za(a.minutes);a.hours=Za(a.hours);a.months=Za(a.months);a.years=Za(a.years);return this};na.add=function(a,b){return Qb(this,a,b,1)};na.subtract=function(a,b){return Qb(this,a,b,-1)};na.as=function(a){if(!this.isValid())return NaN;
var b,c=this._milliseconds;a=C(a);if("month"===a||"year"===a)return b=this._days+c/864E5,b=this._months+4800*b/146097,"month"===a?b:b/12;b=this._days+Math.round(146097*this._months/4800);switch(a){case "week":return b/7+c/6048E5;case "day":return b+c/864E5;case "hour":return 24*b+c/36E5;case "minute":return 1440*b+c/6E4;case "second":return 86400*b+c/1E3;case "millisecond":return Math.floor(864E5*b)+c;default:throw Error("Unknown unit "+a);}};na.asMilliseconds=Ac;na.asSeconds=Bc;na.asMinutes=Cc;na.asHours=
Dc;na.asDays=Ec;na.asWeeks=Fc;na.asMonths=Gc;na.asYears=Hc;na.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*v(this._months/12):NaN};na._bubble=function(){var a=this._milliseconds,b=this._days,c=this._months,d=this._data;0<=a&&0<=b&&0<=c||0>=a&&0>=b&&0>=c||(a+=864E5*Rb(146097*c/4800+b),c=b=0);d.milliseconds=a%1E3;a=p(a/1E3);d.seconds=a%60;a=p(a/60);d.minutes=a%60;a=p(a/60);d.hours=a%24;b+=p(a/24);a=p(4800*b/146097);c+=a;b-=Rb(146097*a/4800);
a=p(c/12);d.days=b;d.months=c%12;d.years=a;return this};na.get=function(a){a=C(a);return this.isValid()?this[a+"s"]():NaN};na.milliseconds=Ic;na.seconds=Jc;na.minutes=Kc;na.hours=Lc;na.days=Mc;na.weeks=function(){return p(this.days()/7)};na.months=Nc;na.years=Oc;na.humanize=function(a){if(!this.isValid())return this.localeData().invalidDate();var b=this.localeData(),c;c=!a;var d=O(this).abs(),e=eb(d.as("s")),g=eb(d.as("m")),f=eb(d.as("h")),h=eb(d.as("d")),k=eb(d.as("M")),d=eb(d.as("y")),e=e<=Ua.ss&&
["s",e]||e<Ua.s&&["ss",e]||1>=g&&["m"]||g<Ua.m&&["mm",g]||1>=f&&["h"]||f<Ua.h&&["hh",f]||1>=h&&["d"]||h<Ua.d&&["dd",h]||1>=k&&["M"]||k<Ua.M&&["MM",k]||1>=d&&["y"]||["yy",d];e[2]=c;e[3]=0<+this;e[4]=b;c=dc.apply(null,e);a&&(c=b.pastFuture(+this,c));return b.postformat(c)};na.toISOString=tb;na.toString=tb;na.toJSON=tb;na.locale=Va;na.localeData=sb;na.toIsoString=z("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",tb);na.lang=bc;K("X",0,0,"unix");K("x",0,0,"valueOf");
I("x",Cb);I("X",/[+-]?\d+(\.\d{1,3})?/);S("X",function(a,b,c){c._d=new Date(1E3*parseFloat(a,10))});S("x",function(a,b,c){c._d=new Date(v(a))});a.version="2.18.1";Sb=ba;a.fn=W;a.min=function(){var a=[].slice.call(arguments,0);return bb("isBefore",a)};a.max=function(){var a=[].slice.call(arguments,0);return bb("isAfter",a)};a.now=function(){return Date.now?Date.now():+new Date};a.utc=b;a.unix=function(a){return ba(1E3*a)};a.months=function(a,b){return Pb(a,b,"months")};a.isDate=l;a.locale=Ia;a.invalid=
u;a.duration=O;a.isMoment=t;a.weekdays=function(a,b,c){return Eb(a,b,c,"weekdays")};a.parseZone=function(){return ba.apply(null,arguments).parseZone()};a.localeData=Ea;a.isDuration=D;a.monthsShort=function(a,b){return Pb(a,b,"monthsShort")};a.weekdaysMin=function(a,b,c){return Eb(a,b,c,"weekdaysMin")};a.defineLocale=Ja;a.updateLocale=function(a,b){if(null!=b){var c=Vb;null!=ua[a]&&(c=ua[a]._config);b=F(c,b);b=new B(b);b.parentLocale=ua[a];ua[a]=b;Ia(a)}else null!=ua[a]&&(null!=ua[a].parentLocale?
ua[a]=ua[a].parentLocale:null!=ua[a]&&delete ua[a]);return ua[a]};a.locales=function(){return pc(ua)};a.weekdaysShort=function(a,b,c){return Eb(a,b,c,"weekdaysShort")};a.normalizeUnits=C;a.relativeTimeRounding=function(a){return void 0===a?eb:"function"===typeof a?(eb=a,!0):!1};a.relativeTimeThreshold=function(a,b){if(void 0===Ua[a])return!1;if(void 0===b)return Ua[a];Ua[a]=b;"s"===a&&(Ua.ss=b-1);return!0};a.calendarFormat=function(a,b){a=a.diff(b,"days",!0);return-6>a?"sameElse":-1>a?"lastWeek":
0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse"};a.prototype=W;return a})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(a,f){return function(){function a(a){void 0===a&&(a=[]);this._elements=a}a.prototype.length=function(){return this._elements.length};a.prototype.get=function(a){return this._elements[a]};a.prototype.toArray=function(){for(var a=[],e=0;e<this.length();e++)a.push(this.get(e));return a};return a}()})},"esri/arcade/ImmutablePointArray":function(){define("require exports ../core/tsSupport/extendsHelper ./ImmutableArray ../geometry/Point ../kernel".split(" "),
function(a,f,m,h,e,l){var n=0===l.version.indexOf("4.");return function(a){function c(b,c,d,e,f,h){b=a.call(this,b)||this;b._lazyPt=[];b._hasZ=!1;b._hasM=!1;b._spRef=c;b._hasZ=d;b._hasM=e;b._cacheId=f;b._partId=h;return b}m(c,a);c.prototype.get=function(a){if(void 0===this._lazyPt[a]){var b=this._elements[a];if(void 0===b)return;var c=this._hasZ,d=this._hasM,f=null,f=c&&!d?new e(b[0],b[1],b[2],void 0,this._spRef):d&&c?new e(b[0],b[1],void 0,b[2],this._spRef):c&&d?new e(b[0],b[1],b[2],b[3],this._spRef):
new e(b[0],b[1],this._spRef);n?f.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+a.toString():f.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+"-"+a.toString());this._lazyPt[a]=f}return this._lazyPt[a]};c.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof c?!1:a.getUniqueHash()===this.getUniqueHash()};c.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return c}(h)})},
"esri/arcade/ImmutablePathArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","./ImmutablePointArray"],function(a,f,m,h,e){return function(a){function f(d,c,b,e,f){d=a.call(this,d)||this;d._lazyPath=[];d._hasZ=!1;d._hasM=!1;d._hasZ=b;d._hasM=e;d._spRef=c;d._cacheId=f;return d}m(f,a);f.prototype.get=function(a){if(void 0===this._lazyPath[a]){var c=this._elements[a];if(void 0===c)return;this._lazyPath[a]=new e(c,this._spRef,this._hasZ,this._hasM,this._cacheId,
a)}return this._lazyPath[a]};f.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof f?!1:a.getUniqueHash()===this.getUniqueHash()};f.prototype.getUniqueHash=function(){return this._cacheId.toString()};return f}(h)})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(a,f){return function(){return function(a,f){this.context=this.definition=null;this.definition=a;this.context=f}}()})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],
function(a,f){function m(a,b,c,d){void 0!==a.fmin&&(a.min=a.fmin);void 0!==a.fmax&&(a.max=a.fmax);return"0"!==a.min&&c.length<Number(a.min)||"*"!==a.max&&c.length>Number(a.max)?-2:1}function h(a,b,c){if(null!==c.localScope&&void 0!==c.localScope[a.toLowerCase()]){var d=c.localScope[a.toLowerCase()];if("FormulaFunction"===d.type||"any"===d.type)return void 0===d.signature&&(d.signature={min:"0",max:"*"}),m(d.signature,a,b,c)}return void 0!==c.globalScope[a.toLowerCase()]&&(d=c.globalScope[a.toLowerCase()],
"FormulaFunction"===d.type||"any"===d.type)?(void 0===d.signature&&(d.signature={min:"0",max:"*"}),m(d.signature,a,b,c)):-1}function e(a,b){void 0===b&&(b=!0);var c=u(a,"SYNTAX","UNREOGNISED");try{switch(a.type){case "VariableDeclarator":return null!==a.init&&"FunctionExpression"===a.init.type?u(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==a.id.type?u(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==a.init?e(a.init,!1):"";case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)if(c=
e(a.declarations[d],b),""!==c)return c;return"";case "ForInStatement":c=e(a.left,b);if(""!==c)break;if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return u(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return u(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return u(a,"SYNTAX","LEFTNOTVAR");c=e(a.right,b);if(""!==c)break;c=e(a.body,b);if(""!==c)break;return"";case "ForStatement":if(null!==a.test&&(c=e(a.test,b),""!==c))break;if(null!==a.init&&
(c=e(a.init,b),""!==c))break;if(null!==a.update&&(c=e(a.update,b),""!==c))break;if(null!==a.body&&(c=e(a.body,b),""!==c))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":c=e(a.test,b);if(""!==c)break;if(null!==a.consequent&&(c=e(a.consequent,!1),""!==c))break;if(null!==a.alternate&&(c=e(a.alternate,!1),""!==c))break;return"";case "BlockStatement":for(var f=[],d=0;d<a.body.length;d++)"EmptyStatement"!==a.body[d].type&&
f.push(a.body[d]);a.body=f;for(d=0;d<a.body.length;d++)if(c=e(a.body[d],b),""!==c)return c;return"";case "FunctionDeclaration":return!1===b?u(a,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==a.id.type?u(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):e(a.body,!1);case "ReturnStatement":return null!==a.argument?e(a.argument,b):"";case "UpdateExpression":return"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?u(a,"SYNTAX","ASSIGNMENTTOVARSONLY"):e(a.argument,b);case "AssignmentExpression":if("Identifier"!==
a.left.type&&"MemberExpression"!==a.left.type)return u(a,"SYNTAX","ASSIGNMENTTOVARSONLY");c=e(a.left,b);if(""!==c)break;switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return u(a,"SYNTAX","OPERATORNOTRECOGNISED")}return e(a.right,!1);case "ExpressionStatement":return e(a.expression,!1);case "Identifier":c="";break;case "MemberExpression":c=e(a.object,b);if(""!==c)break;return!0===a.computed?e(a.property,b):"";case "Literal":return"";case "ThisExpression":return u(a,
"SYNTAX","NOTSUPPORTED");case "CallExpression":if("Identifier"!==a.callee.type)return u(a,"SYNTAX","ONLYNODESSUPPORTED");c="";for(d=0;d<a.arguments.length;d++)if(c=e(a.arguments[d],b),""!==c)return c;return"";case "UnaryExpression":c=e(a.argument,b);break;case "BinaryExpression":c=e(a.left,b);if(""!==c)break;c=e(a.right,b);if(""!==c)break;switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:return u(a,
"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":c=e(a.left,b);if(""!==c)break;c=e(a.right);if(""!==c)break;switch(a.operator){case "\x26\x26":case "||":break;default:return u(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return u(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":c="";for(d=0;d<a.elements.length&&(c=e(a.elements[d],b),""===c);d++);break;case "Array":return u(a,"SYNTAX","NOTSUPPORTED");case "ObjectExpression":c="";for(d=0;d<a.properties.length&&
(c="",null!==a.properties[d].key&&("Literal"!==a.properties[d].key.type&&"Identifier"!==a.properties[d].key.type&&(c=u(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[d].key.type&&(f=a.properties[d].key.value,"string"===typeof f||f instanceof String||(c=u(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")))),""===c&&(c=e(a.properties[d],b)),""===c);d++);break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return u(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&
(c=e(a.key,b),""!==c))break;c=e(a.value,b)}return c}catch(y){throw y;}}function l(a,c){var d=u(a,"SYNTAX","UNREOGNISED"),e=null,f="";try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type)return u(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");null!==c.localScope?void 0!==c.localScope[a.id.name.toLowerCase()]&&a.id.name.toLowerCase():void 0!==c.globalScope[a.id.name.toLowerCase()]&&a.id.name.toLowerCase();var p=null===a.init?"":l(a.init,c);if(""!==p)return p;null===
c.localScope?c.globalScope[a.id.name.toLowerCase()]={type:"any"}:c.localScope[a.id.name.toLowerCase()]={type:"any"};return"";case "FunctionDeclaration":e=b(a.id.name.toLowerCase(),a,c);f=k(a,c);if(""!==f)return f;if(null!==c.localScope)return u(a,"SYNTAX","GLOBALFUNCTIONSONLY");e.isnative=!1;c.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[e]};return"";case "VariableDeclaration":for(var d="",m=0;m<a.declarations.length&&(d=l(a.declarations[m],c),""===d);m++);break;case "IfStatement":d=
l(a.test,c);if(""!==d)break;if("AssignmentExpression"===a.test.type||"UpdateExpression"===a.test.type)return u(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==a.consequent&&(d=l(a.consequent,c),""!==d))break;if(null!==a.alternate&&(d=l(a.alternate,c),""!==d))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(m=0;m<a.body.length;m++)if(d=l(a.body[m],c),""!==d)return d;return"";case "ReturnStatement":return null!==a.argument?l(a.argument,c):"";case "ForInStatement":if("VariableDeclaration"===
a.left.type){if(1<a.left.declarations.length)return u(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return u(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return u(a,"SYNTAX","LEFTNOTVAR");d=l(a.left,c);if(""!==d)break;d=l(a.right,c);if(""!==d)break;d=l(a.body,c);if(""!==d)break;return"";case "ForStatement":if(null!==a.init&&(d=l(a.init,c),""!==d))break;if(null!==a.test&&(d=l(a.test,c),""!==d))break;if(null!==a.body&&(d=l(a.body,c),""!==d))break;if(null!==a.update&&
(d=l(a.update,c),""!==d))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type)return u(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var n=!1;if("MemberExpression"===a.argument.type)return l(a.argument,c);null!==c.localScope&&void 0!==c.localScope[a.argument.name.toLowerCase()]&&(n=!0);void 0!==c.globalScope[a.argument.name.toLowerCase()]&&(n=!0);return!1===n?"Identifier "+a.argument.name+
" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return u(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var q=l(a.right,c);if(""!==q)return q;n=!1;if("MemberExpression"===a.left.type)return q=l(a.left,c),""!==q?q:"";null!==c.localScope&&void 0!==c.localScope[a.left.name.toLowerCase()]&&(n=!0);void 0!==c.globalScope[a.left.name.toLowerCase()]&&(n=!0);return!1===n?"Identifier "+a.left.name+" has not been declared.":"";case "ExpressionStatement":return l(a.expression,
c);case "Identifier":var v=a.name.toLowerCase();if(null!==c.localScope&&void 0!==c.localScope[v])return"";d=void 0!==c.globalScope[v]?"":u(a,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":d=l(a.object,c);if(""!==d)break;return!0===a.computed?l(a.property,c):"";case "Literal":return"";case "ThisExpression":d=u(a,"SYNTAX","NOTSUPPORTED");break;case "CallExpression":if("Identifier"!==a.callee.type)return u(a,"SYNTAX","ONLYNODESSUPPORTED");d="";for(m=0;m<a.arguments.length;m++)if(d=l(a.arguments[m],
c),""!==d)return d;var t=h(a.callee.name,a.arguments,c);-1===t&&(d=u(a,"SYNTAX","NOTFOUND"));-2===t&&(d=u(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":d=l(a.argument,c);break;case "BinaryExpression":d=l(a.left,c);if(""!==d)break;d=l(a.right,c);if(""!==d)break;return"";case "LogicalExpression":d=l(a.left,c);if(""!==d)break;if("AssignmentExpression"===a.left.type||"UpdateExpression"===a.left.type)return u(a.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");d=l(a.right,c);if(""!==d)break;
return"AssignmentExpression"===a.right.type||"UpdateExpression"===a.right.type?u(a.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return u(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":d="";for(m=0;m<a.elements.length&&(d=l(a.elements[m],c),""===d);m++);break;case "ObjectExpression":d="";for(m=0;m<a.properties.length;m++){d="";if(null!==a.properties[m].key&&("Literal"!==a.properties[m].key.type&&"Identifier"!==a.properties[m].key.type&&(d=u(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),
"Literal"===a.properties[m].key.type)){var x=a.properties[m].key.value;"string"===typeof x||x instanceof String||(d=u(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===d&&(d=l(a.properties[m],c));if(""!==d)break}break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return u(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(d=l(a.key,c),""!==d))break;d=l(a.value,c);break;case "Array":return u(a,"SYNTAX","NOTSUPPORTED")}return d}catch(L){throw L;}}function n(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==
a.init?n(a.init,b):c;case "FunctionDeclaration":return n(a.body,b);case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)if(n(a.declarations[d],b))return!0;return c;case "IfStatement":return n(a.test,b)||null!==a.consequent&&n(a.consequent,b)||null!==a.alternate&&n(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(d=0;d<a.body.length;d++)if(n(a.body[d],b))return!0;return c;case "ReturnStatement":return null!==a.argument?n(a.argument,b):c;case "UpdateExpression":return n(a.argument,
b);case "AssignmentExpression":return(c=n(a.right,b))?c:n(a.left,b);case "ExpressionStatement":return n(a.expression,b);case "ForInStatement":return(c=n(a.left,b))||(c=n(a.right,b))?c:c=n(a.body,b);case "ForStatement":if(null!==a.init&&(c=n(a.init,b))||null!==a.test&&(c=n(a.test,b))||null!==a.body&&(c=n(a.body,b)))return c;null!==a.update&&(c=n(a.update,b));return c;case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return b.toLowerCase()===
a.name.toLowerCase();case "MemberExpression":if(c=n(a.object,b))return c;!0===a.computed&&(c=n(a.property,b));return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(d=0;d<a.arguments.length;d++)n(a.arguments[d],b)&&(c=!0);return c;case "ArrayExpression":for(d=0;d<a.elements.length;d++)n(a.elements[d],b)&&(c=!0);return c;case "UnaryExpression":return n(a.argument,b);case "BinaryExpression":return(c=n(a.left,b))?c:c=n(a.right,b);case "LogicalExpression":return(c=n(a.left,
b))?c:c=n(a.right,b);case "ObjectExpression":for(d=0;d<a.properties.length;d++)n(a.properties[d],b)&&(c=!0);return c;case "Property":return c=n(a.value,b);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(z){throw z;}}function d(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==a.init?d(a.init,b):c;case "FunctionDeclaration":return d(a.body,b);case "VariableDeclaration":for(var e=0;e<a.declarations.length;e++)if(d(a.declarations[e],b))return!0;
return c;case "IfStatement":return d(a.test,b)||null!==a.consequent&&d(a.consequent,b)||null!==a.alternate&&d(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(e=0;e<a.body.length;e++)if(d(a.body[e],b))return!0;return c;case "ReturnStatement":return null!==a.argument?d(a.argument,b):c;case "UpdateExpression":return d(a.argument,b);case "AssignmentExpression":return d(a.left,b)?!0:d(a.right,b);case "ExpressionStatement":return d(a.expression,b);case "ForInStatement":return(c=
d(a.left,b))||(c=d(a.right,b))?c:c=d(a.body,b);case "ForStatement":if(null!==a.init&&(c=d(a.init,b))||null!==a.test&&(c=d(a.test,b))||null!==a.body&&(c=d(a.body,b)))return c;null!==a.update&&(c=d(a.update,b));return c;case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return c;case "MemberExpression":if(c=d(a.object,b))return c;!0===a.computed&&(c=d(a.property,b));return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":if(a.callee.name.toLowerCase()===
b.toLowerCase())return!0;for(e=0;e<a.arguments.length;e++)d(a.arguments[e],b)&&(c=!0);return c;case "ArrayExpression":for(e=0;e<a.elements.length;e++)d(a.elements[e],b)&&(c=!0);return c;case "UnaryExpression":return d(a.argument,b);case "BinaryExpression":return(c=d(a.left,b))?c:c=d(a.right,b);case "LogicalExpression":return(c=d(a.left,b))?c:c=d(a.right,b);case "ConditionalExpression":return c;case "ObjectExpression":for(e=0;e<a.properties.length;e++)d(a.properties[e],b)&&(c=!0);return c;case "Property":return c=
d(a.value,b);case "Array":return c;default:return c}}catch(z){throw z;}}function c(a,b){var d=[],e;try{switch(a.type){case "VariableDeclarator":return null!==a.init?c(a.init,b):d;case "FunctionDeclaration":return c(a.body,b);case "VariableDeclaration":for(var f=0;f<a.declarations.length;f++)e=c(a.declarations[f],b),d=d.concat(e);return d;case "ForInStatement":return e=c(a.left,b),d=d.concat(e),e=c(a.right,b),d=d.concat(e),e=c(a.body,b),d=d.concat(e);case "ForStatement":return null!==a.init&&(e=c(a.init,
b),d=d.concat(e)),null!==a.test&&(e=c(a.test,b),d=d.concat(e)),null!==a.body&&(e=c(a.body,b),d=d.concat(e)),null!==a.update&&(e=c(a.update,b),d=d.concat(e)),d;case "IfStatement":return e=c(a.test,b),d=d.concat(e),null!==a.consequent&&(e=c(a.consequent,b),d=d.concat(e)),null!==a.alternate&&(e=c(a.alternate,b),d=d.concat(e)),d;case "EmptyStatement":return d;case "BlockStatement":for(f=0;f<a.body.length;f++)e=c(a.body[f],b),d=d.concat(e);return d;case "ReturnStatement":return null!==a.argument?c(a.argument,
b):d;case "UpdateExpression":return c(a.argument,b);case "AssignmentExpression":return d=c(a.left,b),d=d.concat(c(a.right,b));case "ExpressionStatement":return c(a.expression,b);case "BreakStatement":return d;case "ContinueStatement":return d;case "Compound":return d;case "Identifier":return d;case "MemberExpression":if("Identifier"!==a.object.type)return d;if(!1===a.computed)d.push(a.object.name.toLowerCase()+"."+a.property.name.toLowerCase());else try{"Literal"===a.property.type&&"string"===typeof a.property.value&&
d.push(a.object.name.toLowerCase()+"."+a.property.value.toString().toLowerCase())}catch(y){}return d;case "Literal":return d;case "ThisExpression":return d;case "CallExpression":for(f=0;f<a.arguments.length;f++)e=c(a.arguments[f],b),d=d.concat(e);return d;case "ArrayExpression":for(f=0;f<a.elements.length;f++)e=c(a.elements[f],b),d=d.concat(e);return d;case "UnaryExpression":return c(a.argument,b);case "ObjectExpression":for(f=0;f<a.properties.length;f++)e=c(a.properties[f],b),d=d.concat(e);return d;
case "Property":return c(a.value,b);case "BinaryExpression":return e=c(a.left,b),d=d.concat(e),e=c(a.right,b),d=d.concat(e);case "LogicalExpression":return e=c(a.left,b),d=d.concat(e),e=c(a.right,b),d=d.concat(e);case "ConditionalExpression":return d;case "Array":return d;default:return d}}catch(y){throw y;}}function b(a,b,c){c=[];if(void 0!==b.params&&null!==b.params)for(var d=0;d<b.params.length;d++)c.push("any");return{name:a,"return":"any",params:c}}function k(a,b){b={globalScope:b.globalScope,
localScope:{}};for(var c=0;c<a.params.length;c++)b.localScope[a.params[c].name.toLowerCase()]={type:"any"};return l(a.body,b)}function q(a,b,c,d){var e={};if(void 0===a||null===a)a={};if(void 0===c||null===c)c={};e.infinity={type:"any"};e.textformatting={type:"any"};e.pi={type:"any"};for(var g in b)if("simple"!==d||"simple"===d&&"a"===b[g].av)e[g]={type:"FormulaFunction",signature:b[g]};for(b=0;b<c.length;b++)g=c[b],e[g.name]={type:"FormulaFunction",signature:g};for(g in a)e[g]=a[g],e[g].type="any";
return e}function u(a,b,c){var d="";switch(b){case "SYNTAX":d="Syntax Error: ";break;case "RUNTIME":d="Runtime Error: ";break;default:d="Syntax Error: "}try{switch(a.type){case "IfStatement":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=" Assignments not be made in logical tests";
break;case "ASSIGNMENTTOVARSONLY":d+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":d+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(c){case "GLOBALFUNCTIONSONLY":d+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":d+=" Function Definition must have an identifier"}break;case "VariableDeclaration":d+=" Only 1 variable can be declared at a time";break;case "VariableDeclarator":switch(c){case "FUNCTIONVARIABLEDECLARATOR":d+=
" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":d+=" Variable Definition must have an identifier"}break;case "Identifier":d+=" Identifier Not Found. ";d+=a.name;break;case "ObjectExpression":switch(c){case "OBJECTPROPERTYMUSTBESTRING":d+=" Property name must be a string"}break;case "ForStatement":switch(c){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;case "ForInStatement":switch(c){case "ONLY1VAR":d+=" Can only declare 1 var for use with IN";
break;case "CANNOTDECLAREVAL":d+=" Can only declare value for use with IN";break;case "LEFTNOVAR":d+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":d+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":d+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(c){case "PROPERTYNOTFOUND":d+="Cannot find member property. ";d+=!1===a.computed?a.property.name:"";break;case "OUTOFBOUNDS":d+="Out of Bounds. ";d+=!1===a.computed?
a.property.name:"";break;case "NOTFOUND":d+="Cannot call member method on null. ";d+=!1===a.computed?a.property.name:"";break;case "INVALIDTYPE":d+="Cannot call member property on object of this type. ",d+=!1===a.computed?a.property.name:""}break;case "Property":switch(c){case "ONLYLITERAL":d+="Property names must be literals or identifiers"}break;case "Literal":break;case "ThisExpression":d+="THIS construct is not supported.";case "CallExpression":switch(c){case "WRONGSIGNATURE":d+="Function signature does not match: ";
d+=a.callee.name;break;case "ONLYNODESUPPORTED":d+="Functions must be declared.";d+=a.callee.name;break;case "NOTAFUNCTION":d+="Not a Function: ";d+=a.callee.name;break;case "NOTFOUND":d+="Function Not Found: "+a.callee.name}break;case "UnaryExpression":switch(c){case "NOTSUPPORTEDUNARYOPERATOR":d+="Operator "+a.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":d+="Unary operator "+a.operator+" cannot be used with this argument."}case "BinaryExpression":switch(c){case "OPERATORNOTRECOGNISED":d+=
"Binary Operator not recognised "+a.operator}break;case "LogicalExpression":switch(c){case "ONLYBOOLEAN":d+="Operator "+a.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":d+="Logical Expression "+a.operator+" being applied to parameters that are not boolean."}case "ConditionalExpression":d+="Conditional statements not supported.";break;case "ArrayExpression":switch(c){case "FUNCTIONCONTEXTILLEGAL":d+=" Cannot Put Function inside Array."}break;case "Array":d+=
"Expression contains unrecognised array structure.";break;default:d+="Expression contains unrecognised code structures."}}catch(z){throw z;}return d}function x(a,b,c){return{line:a.loc.start.line,character:a.loc.start.column,reason:u(a,b,c)}}function w(a,b,c,d,e){void 0===e&&(e=!0);b={globalScope:b.globalScope,localScope:{}};for(e=0;e<a.params.length;e++)b.localScope[a.params[e].name.toLowerCase()]={type:"any"};t(a.body,b,c,d,!1)}function t(a,c,d,e,f){void 0===f&&(f=!0);if(null===a)throw Error("Unnexpexted Expression Syntax");
u(a,"SYNTAX","UNREOGNISED");var g=null;try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type){e.push(x(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==a.id.type?e.push(x(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(null!==c.localScope?void 0!==c.localScope[a.id.name.toLowerCase()]&&a.id.name.toLowerCase():void 0!==c.globalScope[a.id.name.toLowerCase()]&&a.id.name.toLowerCase(),null===c.localScope?c.globalScope[a.id.name.toLowerCase()]={type:"any"}:
c.localScope[a.id.name.toLowerCase()]={type:"any"});null===a.init?"":t(a.init,c,d,e,f);break;case "FunctionDeclaration":!1===f&&e.push(x(a,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==a.id.type&&e.push(x(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));g=b("",a,c);w(a,c,d,e,f);null!==c.localScope&&e.push(x(a,"SYNTAX","GLOBALFUNCTIONSONLY"));g.isnative=!1;"Identifier"===a.id.type&&(c.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[g]});break;case "VariableDeclaration":for(var k=
0;k<a.declarations.length;k++)t(a.declarations[k],c,d,e,f);break;case "IfStatement":null!==a.test&&(t(a.test,c,d,e,f),"AssignmentExpression"!==a.test.type&&"UpdateExpression"!==a.test.type||e.push(x(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==a.consequent&&t(a.consequent,c,d,e,f);null!==a.alternate&&t(a.alternate,c,d,e,f);break;case "EmptyStatement":break;case "BlockStatement":if(null!==a.body)for(k=0;k<a.body.length;k++)t(a.body[k],c,d,e,f);break;case "ReturnStatement":null!==
a.argument&&t(a.argument,c,d,e,f);break;case "ForInStatement":"VariableDeclaration"===a.left.type?(1<a.left.declarations.length&&e.push(x(a,"SYNTAX","ONLY1VAR")),null!==a.left.declarations[0].init&&e.push(x(a,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==a.left.type&&e.push(x(a,"SYNTAX","LEFTNOTVAR"));t(a.left,c,d,e,f);t(a.right,c,d,e,f);t(a.body,c,d,e,f);break;case "ForStatement":null!==a.init&&t(a.init,c,d,e,f);null!==a.test&&t(a.test,c,d,e,f);null!==a.body&&t(a.body,c,d,e,f);null!==a.update&&t(a.update,
c,d,e,f);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?e.push(x(a,"SYNTAX","ASSIGNMENTTOVARSONLY")):("Identifier"===a.argument.type&&(g=!1,!1===d&&(null!==c.localScope&&void 0!==c.localScope[a.argument.name.toLowerCase()]&&(g=!0),void 0!==c.globalScope[a.argument.name.toLowerCase()]&&(g=!0),!1===g&&e.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+
a.argument.name+" has not been declared."}))),"MemberExpression"===a.argument.type&&t(a.argument,c,d,e,f));break;case "AssignmentExpression":"Identifier"!==a.left.type&&"MemberExpression"!==a.left.type&&e.push(x(a,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:e.push(x(a,"SYNTAX","OPERATORNOTRECOGNISED"))}t(a.right,c,d,e,f);g=!1;"Identifier"===a.left.type&&(null!==c.localScope&&void 0!==c.localScope[a.left.name.toLowerCase()]&&
(g=!0),void 0!==c.globalScope[a.left.name.toLowerCase()]&&(g=!0),!1===d&&!1===g&&e.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.argument.name+" has not been declared."}));"MemberExpression"===a.left.type&&t(a.left,c,d,e,f);break;case "ExpressionStatement":t(a.expression,c,d,e,f);break;case "Identifier":var l=a.name.toLowerCase();if(null!==c.localScope&&void 0!==c.localScope[l])break;void 0===c.globalScope[l]&&!1===d&&e.push(x(a,"SYNTAX","VARIABLENOTFOUND"));
break;case "MemberExpression":t(a.object,c,d,e,f);!0===a.computed&&t(a.property,c,d,e,f);break;case "Literal":return"";case "ThisExpression":e.push(x(a,"SYNTAX","NOTSUPPORTED"));break;case "CallExpression":"Identifier"!==a.callee.type&&e.push(x(a,"SYNTAX","ONLYNODESSUPPORTED"));for(k=0;k<a.arguments.length;k++)t(a.arguments[k],c,d,e,f);var m=h(a.callee.name,a.arguments,c);!1===d&&-1===m&&e.push(x(a,"SYNTAX","NOTFOUND"));-2===m&&e.push(x(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":t(a.argument,
c,d,e,f);break;case "BinaryExpression":t(a.left,c,d,e,f);t(a.right,c,d,e,f);switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:e.push(x(a,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(a.operator){case "\x26\x26":case "||":break;default:e.push(x(a,"SYNTAX","OPERATORNOTRECOGNISED"))}t(a.left,c,d,e,f);"AssignmentExpression"!==a.left.type&&"UpdateExpression"!==a.left.type||
e.push(x(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));t(a.right,c,d,e,f);"AssignmentExpression"!==a.right.type&&"UpdateExpression"!==a.right.type||e.push(x(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":e.push(x(a,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(k=0;k<a.elements.length;k++)t(a.elements[k],c,d,e,f);break;case "Array":e.push(x(a,"SYNTAX","NOTSUPPORTED"));case "ObjectExpression":for(k=0;k<a.properties.length;k++)t(a.properties[k],
c,d,e,f);break;case "Property":"Literal"!==a.key.type&&"Identifier"!==a.key.type&&e.push(x(a,"SYNTAX","ONLYLITERAL"));"Literal"===a.key.type&&t(a.key,c,d,e,f);t(a.value,c,d,e,f);break;default:e.push(x(a,"SYNTAX","UNRECOGNISED"))}}catch(E){e.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Unnexpected Syntax"})}}Object.defineProperty(f,"__esModule",{value:!0});f.functionDecls={concatenate:{min:"0",max:"*",av:"a"},split:{min:"2",max:"4",av:"a"},guid:{min:"0",max:"1",
av:"a"},today:{min:"0",max:"0",av:"a"},now:{min:"0",max:"0",av:"a"},timestamp:{min:"0",max:"0",av:"a"},day:{min:"1",max:"1",av:"a"},month:{min:"1",max:"1",av:"a"},year:{min:"1",max:"1",av:"a"},hour:{min:"1",max:"1",av:"a"},second:{min:"1",max:"1",av:"a"},millisecond:{min:"1",max:"1",av:"a"},minute:{min:"1",max:"1",av:"a"},weekday:{min:"1",max:"1",av:"a"},toutc:{min:"1",max:"1",av:"a"},tolocal:{min:"1",max:"1",av:"a"},date:{min:"0",max:"7",av:"a"},datediff:{min:"2",max:"3",av:"a"},dateadd:{min:"2",
max:"3",av:"a"},trim:{min:"1",max:"1",av:"a"},text:{min:"1",max:"2",av:"a"},left:{min:"2",max:"2",av:"a"},right:{min:"2",max:"2",av:"a"},mid:{min:"2",max:"3",av:"a"},upper:{min:"1",max:"1",av:"a"},proper:{min:"1",max:"2",av:"a"},lower:{min:"1",max:"1",av:"a"},find:{min:"2",max:"3",av:"a"},iif:{min:"3",max:"3",av:"a"},decode:{min:"2",max:"*",av:"a"},when:{min:"2",max:"*",av:"a"},defaultvalue:{min:"2",max:"2",av:"a"},isempty:{min:"1",max:"1",av:"a"},maplayer:{min:"2",max:"3",av:"f"},domaincode:{min:"3",
max:"4",av:"a"},domainname:{min:"2",max:"4",av:"a"},polygon:{min:"1",max:"1",av:"a"},point:{min:"1",max:"1",av:"a"},polyline:{min:"1",max:"1",av:"a"},extent:{min:"1",max:"1",av:"a"},multipoint:{min:"1",max:"1",av:"a"},geometry:{min:"1",max:"1",av:"a"},featurelayer:{min:"1",max:"3",av:"f"},featurecollection:{min:"1",max:"1",av:"f"},buffer:{min:"2",max:"4",av:"f"},area:{min:"1",max:"2",av:"f"},sumarea:{min:"1",max:"2",av:"f"},length:{min:"1",max:"2",av:"f"},sumlength:{min:"1",max:"2",av:"f"},count:{min:"0",
max:"*",av:"a"},filter:{min:"2",max:"2",av:"f"},envelopeintersects:{min:"2",max:"2",av:"f"},intersects:{min:"2",max:"2",av:"f"},contains:{min:"2",max:"2",av:"f"},overlaps:{min:"2",max:"2",av:"f"},within:{min:"2",max:"2",av:"f"},touches:{min:"2",max:"2",av:"f"},crosses:{min:"2",max:"2",av:"f"},union:{min:"1",max:"2",av:"f",fmin:1},difference:{min:"2",max:"2",av:"f",fmin:2,fmax:3},intersection:{min:"2",max:"2",av:"f",fmin:2,fmax:3},symmetricdifference:{min:"2",max:"2",av:"f",fmin:2,fmax:3},number:{min:"1",
max:"2",av:"a"},acos:{min:"1",max:"1",av:"a"},asin:{min:"1",max:"1",av:"a"},atan:{min:"1",max:"1",av:"a"},atan2:{min:"2",max:"2",av:"a"},ceil:{min:"1",max:"2",av:"a"},floor:{min:"1",max:"2",av:"a"},round:{min:"1",max:"2",av:"a"},cos:{min:"1",max:"1",av:"a"},exp:{min:"1",max:"1",av:"a"},log:{min:"1",max:"1",av:"a"},min:{min:"0",max:"*",av:"a"},console:{min:"0",max:"*",av:"a"},max:{min:"0",max:"*",av:"a"},pow:{min:"2",max:"2",av:"a"},random:{min:"0",max:"0",av:"a"},sqrt:{min:"1",max:"1",av:"a"},sin:{min:"1",
max:"1",av:"a"},tan:{min:"1",max:"1",av:"a"},abs:{min:"1",max:"1",av:"a"},isnan:{min:"1",max:"1",av:"a"},stdev:{min:"0",max:"*",av:"a"},average:{min:"0",max:"*",av:"a"},mean:{min:"0",max:"*",av:"a"},sum:{min:"0",max:"*",av:"a"},variance:{min:"0",max:"*",av:"a"},distinct:{min:"0",max:"*",av:"a"},addfield:{min:"3",max:"3",av:"f"},removefield:{min:"2",max:"2",av:"f"},aggregate:{min:"3",max:"3",av:"f"},dissolve:{min:"2",max:"3",av:"f"},changeshape:{min:"2",max:"4",av:"f"},first:{min:"1",max:"1",av:"a"},
top:{min:"2",max:"2",av:"a"},orderby:{min:"2",max:"2",av:"f"},"boolean":{min:"1",max:"1",av:"a"},dictionary:{min:"0",max:"*",av:"a"},servicearea:{min:"2",max:"*",av:"f"},equals:{min:"2",max:"2",av:"a"},"typeof":{min:"1",max:"1",av:"a"},reverse:{min:"1",max:"1",av:"a"},replace:{min:"3",max:"4",av:"a"},sort:{min:"1",max:"2",av:"a"},feature:{min:"1",max:"*",av:"a"},haskey:{min:"2",max:"2",av:"a"},indexof:{min:"2",max:"2",av:"a"},centroid:{min:"1",max:"1",av:"f"},multiparttosinglepart:{min:"1",max:"1",
av:"f"}};f.checkFunctionSignature=m;f.findFunction=h;f.validateLanguageNode=e;f.testValidityOfExpression=l;f.referencesMemberImpl=n;f.referencesMember=function(a,b){return!0===n(a.body[0].body,b.toLowerCase())?!0:!1};f.referencesFunctionImpl=d;f.referencesFunction=function(a,b){return!0===d(a.body[0].body,b)?!0:!1};f.findFieldLiteralsImpl=c;f.findFieldLiterals=function(a,b){return c(a.body[0].body,b)};f.extractFunctionDeclaration=b;f.validateFunction=k;f.constructGlobalScope=q;f.validateScript=function(a,
b,c){void 0===c&&(c="full");b={globalScope:q(b.vars,f.functionDecls,b.customFunctions,c),localScope:null};return l(a.body[0].body,b)};f.validateLanguage=function(a){return"BlockStatement"!==a.body[0].body.type?"Invalid formula content.":e(a.body[0].body)};f.nodeErrorMessage=u;f.makeError=x;f.extractAllIssuesInFunction=w;f.extractAllIssues=t;f.checkScript=function(a,b,c,d){void 0===d&&(d="full");var e=[];if("BlockStatement"!==a.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===
b||void 0===b)b={vars:{},customFunctions:[]};b={globalScope:q(b.vars,f.functionDecls,b.customFunctions,d),localScope:null};try{t(a.body[0].body,b,c,e)}catch(y){}return e}})},"esri/arcade/Dictionary":function(){define(["require","exports","./languageUtils","../geometry/Geometry","./ImmutableArray"],function(a,f,m,h,e){return function(){function a(e){this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=e instanceof a?e.attributes:void 0===e?{}:null===e?{}:e}a.prototype.field=function(a){var d=
a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===d)return this.attributes[c];throw Error("Field not Found");};a.prototype.setField=function(a,d){if(this.immutable)throw Error("Dictionary is Immutable");var c=a.toLowerCase();if(void 0===this.attributes[a])for(var b in this.attributes)if(b.toLowerCase()===c){this.attributes[b]=d;return}this.attributes[a]=d};a.prototype.hasField=function(a){var d=a.toLowerCase();if(void 0!==this.attributes[a])return!0;
for(var c in this.attributes)if(c.toLowerCase()===d)return!0;return!1};a.prototype.keys=function(){var a=[],d;for(d in this.attributes)a.push(d);return a=a.sort()};a.prototype.castToText=function(){var a="",d;for(d in this.attributes){""!==a&&(a+=",");var c=this.attributes[d];null==c?c="null":m.isBoolean(c)||m.isNumber(c)||m.isString(c)?a+=JSON.stringify(d)+":"+JSON.stringify(c):c instanceof h?a+=JSON.stringify(d)+":"+m.toStringExplicit(c):c instanceof e?a+=JSON.stringify(d)+":"+m.toStringExplicit(c):
c instanceof Array?a+=JSON.stringify(d)+":"+m.toStringExplicit(c):c instanceof Date?a+=JSON.stringify(d)+":"+JSON.stringify(c):null!==c&&"object"===typeof c&&void 0!==c.castToText&&(a+=JSON.stringify(d)+":"+c.castToText())}return"{"+a+"}"};return a}()})},"esri/arcade/Feature":function(){define("require exports dojo/_base/lang ../geometry/Geometry ../Graphic ../geometry/support/jsonUtils ./Dictionary ./languageUtils ./ImmutableArray ../geometry/Point".split(" "),function(a,f,m,h,e,l,n,d,c,b){return function(){function a(b,
c,d){this._layer=this.attributes=this.geometry=null;this.immutable=this._datesfixed=!0;b instanceof a?(this.attributes=b.attributes,this.geometry=b.geometry,b._layer&&(this._layer=b._layer)):b instanceof e?(this.geometry=b.geometry,this.attributes=void 0===b.attributes?{}:null===b.attributes?{}:b.attributes,b._layer?(this._layer=b._layer,this._datesfixed=!1):b.layer&&(this._layer=b.layer,this._datesfixed=!1)):b instanceof n?(this.attributes=b.field("attributes"),null!==this.attributes&&(this.attributes=
this.attributes instanceof n?this.attributes.attributes:null),this.geometry=b.field("geometry"),null!==this.geometry&&(this.geometry instanceof n?this.geometry=a.parseGeometryFromDictionary(this.geometry):this.geometry instanceof h||(this.geometry=null))):(c instanceof h||null===c?(this.geometry=c,this.attributes=void 0===b?{}:null===b?{}:b):"string"===typeof b?(b=JSON.parse(b),null!==b.geometry&&void 0!==b.geometry&&(this.geometry=l.fromJSON(b.geometry)),this.attributes=void 0===b.attributes?{}:
null===b.attributes?{}:b.attributes):(void 0===b?this.attributes={}:null===b&&(this.attributes={}),this.geometry=null),void 0!==d&&(this._layer=d))}a.prototype.castToText=function(){var a="",b;for(b in this.attributes){""!==a&&(a+=",");var e=this.attributes[b];null==e?e="null":d.isBoolean(e)||d.isNumber(e)||d.isString(e)?a+=JSON.stringify(b)+":"+JSON.stringify(e):e instanceof h?a+=JSON.stringify(b)+":"+d.toStringExplicit(e):e instanceof c?a+=JSON.stringify(b)+":"+d.toStringExplicit(e):e instanceof
Array?a+=JSON.stringify(b)+":"+d.toStringExplicit(e):e instanceof Date?a+=JSON.stringify(b)+":"+JSON.stringify(e):null!==e&&"object"===typeof e&&void 0!==e.castToText&&(a+=JSON.stringify(b)+":"+e.castToText())}return'{"geometry":'+(null===this.geometry?"null":d.toStringExplicit(this.geometry))+',"attributes":{'+a+"}}"};a.prototype._fixDates=function(){for(var a=[],b=0;b<this._layer.fields.length;b++){var c=this._layer.fields[b];"date"!==c.type&&"esriFieldTypeDate"!==c.type||a.push(c.name)}0<a.length&&
this._fixDateFields(a);this._datesfixed=!0};a.prototype._fixDateFields=function(a){this.attributes=m.mixin({},this.attributes);for(var b=0;b<a.length;b++){var c=this.attributes[a[b]];if(null!==c)if(void 0===c)for(var d in this.attributes){if(d.toLowerCase()===a[b]){c=this.attributes[d];null===c||c instanceof Date||(this.attributes[d]=new Date(c));break}}else c instanceof Date||(this.attributes[a[b]]=new Date(c))}};a.prototype.field=function(a){!1===this._datesfixed&&this._fixDates();var b=a.toLowerCase();
a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];if(this._hasFieldDefinition(b))return null;throw Error("Field not Found");};a.prototype._hasFieldDefinition=function(a){if(null===this._layer)return!1;for(var b=0;b<this._layer.fields.length;b++)if(this._layer.fields[b].name.toLowerCase()===a)return!0;return!1};a.prototype._field=function(a){!1===this._datesfixed&&this._fixDates();var b=a.toLowerCase();a=this.attributes[a];if(void 0!==
a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];return null};a.prototype.setField=function(a,b){if(this.immutable)throw Error("Feature is Immutable");if(!1===d.isSimpleType(b))throw Error("Illegal Value Assignment to Feature");var c=a.toLowerCase();if(void 0===this.attributes[a])for(var e in this.attributes)if(e.toLowerCase()===c){this.attributes[e]=b;return}this.attributes[a]=b};a.prototype.hasField=function(a){var b=a.toLowerCase();if(void 0!==this.attributes[a])return!0;
for(var c in this.attributes)if(c.toLowerCase()===b)return!0;return this._hasFieldDefinition(b)?!0:!1};a.prototype.keys=function(){var a=[],b={},c;for(c in this.attributes)a.push(c),b[c.toLowerCase()]=1;if(null!==this._layer)for(c=0;c<this._layer.fields.length;c++){var d=this._layer.fields[c];1!==b[d.name.toLowerCase()]&&a.push(d.name)}return a=a.sort()};a.fromFeature=function(b){return new a(b)};a.parseGeometryFromDictionary=function(b){b=a.convertDictionaryToJson(b,!0);void 0!==b.spatialreference&&
(b.spatialReference=b.spatialreference,delete b.spatialreference);void 0!==b.rings&&(b.rings=this.fixPathArrays(b.rings,!0===b.hasZ,!0===b.hasM));void 0!==b.paths&&(b.paths=this.fixPathArrays(b.paths,!0===b.hasZ,!0===b.hasM));void 0!==b.points&&(b.points=this.fixPointArrays(b.points,!0===b.hasZ,!0===b.hasM));return l.fromJSON(b)};a.fixPathArrays=function(a,b,d){var e=[];if(a instanceof Array)for(var f=0;f<a.length;f++)e.push(this.fixPointArrays(a[f],b,d));else if(a instanceof c)for(f=0;f<a.length();f++)e.push(this.fixPointArrays(a.get(f),
b,d));return e};a.fixPointArrays=function(a,d,e){var f=[];if(a instanceof Array)for(var h=0;h<a.length;h++){var k=a[h];k instanceof b?d&&e?f.push([k.x,k.y,k.z,k.m]):d?f.push([k.x,k.y,k.z]):e?f.push([k.x,k.y,k.m]):f.push([k.x,k.y]):f.push(k)}else if(a instanceof c)for(h=0;h<a.length();h++)k=a.get(h),k instanceof b?d&&e?f.push([k.x,k.y,k.z,k.m]):d?f.push([k.x,k.y,k.z]):e?f.push([k.x,k.y,k.m]):f.push([k.x,k.y]):f.push(k);return f};a.convertDictionaryToJson=function(b,c){void 0===c&&(c=!1);var d={},e;
for(e in b.attributes){var f=b.attributes[e];f instanceof n&&(f=a.convertDictionaryToJson(f));c?d[e.toLowerCase()]=f:d[e]=f}return d};a.parseAttributesFromDictionary=function(a){var b={},c;for(c in a.attributes){var e=a.attributes[c];if(d.isSimpleType(e))b[c]=e;else throw Error("Illegal Argument");}return b};a.fromJson=function(b){var c=null;null!==b.geometry&&void 0!==b.geometry&&(c=l.fromJSON(b.geometry));var e={};if(null!==b.attributes&&void 0!==b.attributes)for(var f in b.attributes){var h=b.attributes[f];
if(d.isString(h)||d.isNumber(h)||d.isBoolean(h)||d.isDate(h))e[f]=h;else throw Error("Illegal Argument");}return new a(e,c)};a.prototype.domainValueLookup=function(a,b,c){if(null===this._layer||!this._layer.fields)return null;c=d.getDomain(a,this._layer,this,c);if(void 0===b)try{b=this.field(a)}catch(w){return null}return d.getDomainValue(c,b)};a.prototype.domainCodeLookup=function(a,b,c){if(null===this._layer||!this._layer.fields)return null;a=d.getDomain(a,this._layer,this,c);return d.getDomainCode(a,
b)};return a}()})},"esri/arcade/functions/date":function(){define(["require","exports","../../moment","../languageUtils"],function(a,f,m,h){function e(a){return null===a?a:isNaN(a.getTime())?null:a}Object.defineProperty(f,"__esModule",{value:!0});f.registerFunctions=function(a,f){a.today=function(a,c){return f(a,c,function(a,c,d){h.pcCheck(d,0,0);a=new Date;a.setHours(0,0,0,0);return a})};a.now=function(a,c){return f(a,c,function(a,c,d){h.pcCheck(d,0,0);return new Date})};a.timestamp=function(a,c){return f(a,
c,function(a,c,d){h.pcCheck(d,0,0);a=new Date;return a=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};a.toutc=function(a,c){return f(a,c,function(a,c,d){h.pcCheck(d,1,1);a=h.toDate(d[0]);return null===a?null:new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};a.tolocal=function(a,c){return f(a,c,function(a,c,d){h.pcCheck(d,
1,1);a=h.toDate(d[0]);return null===a?null:m.utc([a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()]).toDate()})};a.day=function(a,c){return f(a,c,function(a,c,d){h.pcCheck(d,1,1);a=h.toDate(d[0]);return null===a?NaN:a.getDate()})};a.month=function(a,c){return f(a,c,function(a,c,d){h.pcCheck(d,1,1);a=h.toDate(d[0]);return null===a?NaN:a.getMonth()})};a.year=function(a,c){return f(a,c,function(a,c,d){h.pcCheck(d,1,1);a=h.toDate(d[0]);return null===
a?NaN:a.getFullYear()})};a.hour=function(a,c){return f(a,c,function(a,c,d){h.pcCheck(d,1,1);a=h.toDate(d[0]);return null===a?NaN:a.getHours()})};a.second=function(a,c){return f(a,c,function(a,c,d){h.pcCheck(d,1,1);a=h.toDate(d[0]);return null===a?NaN:a.getSeconds()})};a.millisecond=function(a,c){return f(a,c,function(a,c,d){h.pcCheck(d,1,1);a=h.toDate(d[0]);return null===a?NaN:a.getMilliseconds()})};a.minute=function(a,c){return f(a,c,function(a,c,d){h.pcCheck(d,1,1);a=h.toDate(d[0]);return null===
a?NaN:a.getMinutes()})};a.weekday=function(a,c){return f(a,c,function(a,c,d){h.pcCheck(d,1,1);a=h.toDate(d[0]);return null===a?NaN:a.getDay()})};a.date=function(a,c){return f(a,c,function(a,c,d){h.pcCheck(d,0,7);if(3===d.length)return e(new Date(h.toNumber(d[0]),h.toNumber(d[1]),h.toNumber(d[2]),0,0,0,0));if(4===d.length)return e(new Date(h.toNumber(d[0]),h.toNumber(d[1]),h.toNumber(d[2]),h.toNumber(d[3]),0,0,0));if(5===d.length)return e(new Date(h.toNumber(d[0]),h.toNumber(d[1]),h.toNumber(d[2]),
h.toNumber(d[3]),h.toNumber(d[4]),0,0));if(6===d.length)return e(new Date(h.toNumber(d[0]),h.toNumber(d[1]),h.toNumber(d[2]),h.toNumber(d[3]),h.toNumber(d[4]),h.toNumber(d[5]),0));if(7===d.length)return e(new Date(h.toNumber(d[0]),h.toNumber(d[1]),h.toNumber(d[2]),h.toNumber(d[3]),h.toNumber(d[4]),h.toNumber(d[5]),h.toNumber(d[6])));if(2===d.length){a=h.toString(d[1]);if(""===a)return null;a=h.standardiseDateFormat(a);d=m(h.toString(d[0]),a,!0);return!0===d.isValid()?d.toDate():null}if(1===d.length){if(h.isString(d[0])&&
""===d[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;a=h.toNumber(d[0]);return!1===isNaN(a)?e(new Date(a)):h.toDate(d[0])}if(0===d.length)return new Date})};a.datediff=function(a,c){return f(a,c,function(a,c,d){h.pcCheck(d,2,3);a=h.toDateM(d[0]);c=h.toDateM(d[1]);if(null===a||null===c)return NaN;switch(h.toString(d[2]).toLowerCase()){case "days":case "day":case "d":return a.diff(c,"days",!0);case "months":case "month":return a.diff(c,"months",!0);case "minutes":case "minute":case "m":return"M"===
d[2]?a.diff(c,"months",!0):a.diff(c,"minutes",!0);case "seconds":case "second":case "s":return a.diff(c,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return a.diff(c);case "hours":case "hour":case "h":return a.diff(c,"hours",!0);case "years":case "year":case "y":return a.diff(c,"years",!0);default:return a.diff(c)}})};a.dateadd=function(a,c){return f(a,c,function(a,c,d){h.pcCheck(d,2,3);a=h.toDateM(d[0]);if(null===a)return null;c="milliseconds";switch(h.toString(d[2]).toLowerCase()){case "days":case "day":case "d":c=
"days";break;case "months":case "month":c="months";break;case "minutes":case "minute":case "m":c="M"===d[2]?"months":"minutes";break;case "seconds":case "second":case "s":c="seconds";break;case "milliseconds":case "millisecond":case "ms":c="milliseconds";break;case "hours":case "hour":case "h":c="hours";break;case "years":case "year":case "y":c="years"}a.add(h.toNumber(d[1]),c);return a.toDate()})}}})},"esri/arcade/functions/string":function(){define(["require","exports","../languageUtils","../Feature"],
function(a,f,m,h){Object.defineProperty(f,"__esModule",{value:!0});f.registerFunctions=function(a,f){a.trim=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,1,1);return m.toString(d[0]).trim()})};a.upper=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,1,1);return m.toString(d[0]).toUpperCase()})};a.proper=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,1,2);a=1;2===d.length&&"firstword"===m.toString(d[1]).toLowerCase()&&(a=2);b=/\s/;d=m.toString(d[0]);for(var c="",e=!0,f=0;f<d.length;f++){var h=
d[f];b.test(h)?1===a&&(e=!0):h.toUpperCase()!==h.toLowerCase()&&(e?(h=h.toUpperCase(),e=!1):h=h.toLowerCase());c+=h}return c})};a.lower=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,1,1);return m.toString(d[0]).toLowerCase()})};a.guid=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,0,1);if(0<d.length)switch(m.toString(d[0]).toLowerCase()){case "digits":return m.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return m.generateUUID();
case "digits-hyphen-parentheses":return"("+m.generateUUID()+")"}return"{"+m.generateUUID()+"}"})};a.console=function(a,d){return f(a,d,function(c,b,d){0!==d.length&&(1===d.length?a.console(m.toString(d[0])):a.console(m.toString(d)));return m.voidOperation})};a.mid=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,2,3);a=m.toNumber(d[1]);if(isNaN(a))return"";0>a&&(a=0);if(2===d.length)return m.toString(d[0]).substr(a);b=m.toNumber(d[2]);if(isNaN(b))return"";0>b&&(b=0);return m.toString(d[0]).substr(a,
b)})};a.find=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,2,3);a=0;if(2<d.length){a=m.toNumber(m.defaultUndefined(d[2],0));if(isNaN(a))return-1;0>a&&(a=0)}return m.toString(d[1]).indexOf(m.toString(d[0]),a)})};a.left=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,2,2);a=m.toNumber(d[1]);if(isNaN(a))return"";0>a&&(a=0);return m.toString(d[0]).substr(0,a)})};a.right=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,2,2);a=m.toNumber(d[1]);if(isNaN(a))return"";0>a&&(a=0);return m.toString(d[0]).substr(-1*
a,a)})};a.split=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,2,4);a=m.toNumber(m.defaultUndefined(d[2],-1));b=m.toBoolean(m.defaultUndefined(d[3],!1));-1===a||null===a||!0===b?d=m.toString(d[0]).split(m.toString(d[1])):(isNaN(a)&&(a=-1),-1>a&&(a=-1),d=m.toString(d[0]).split(m.toString(d[1]),a));if(!1===b)return d;b=[];for(var c=0;c<d.length&&!(-1!==a&&b.length>=a);c++)""!==d[c]&&void 0!==d[c]&&b.push(d[c]);return b})};a.text=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,1,2);return m.toStringExplicit(d[0],
d[1])})};a.concatenate=function(a,d){return f(a,d,function(a,b,d){a=[];if(1>d.length)return"";if(m.isArray(d[0])){b=m.defaultUndefined(d[2],"");for(var c=0;c<d[0].length;c++)a[c]=m.toStringExplicit(d[0][c],b);return 1<d.length?a.join(d[1]):a.join("")}if(m.isImmutableArray(d[0])){b=m.defaultUndefined(d[2],"");for(c=0;c<d[0].length();c++)a[c]=m.toStringExplicit(d[0].get(c),b);return 1<d.length?a.join(d[1]):a.join("")}for(c=0;c<d.length;c++)a[c]=m.toStringExplicit(d[c]);return a.join("")})};a.reverse=
function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,1,1);if(m.isArray(d[0]))return a=d[0].slice(0),a.reverse(),a;if(m.isImmutableArray(d[0]))return a=d[0].toArray().slice(0),a.reverse(),a;throw Error("Invalid Parameter");})};a.replace=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,3,4);a=m.toString(d[0]);b=m.toString(d[1]);var c=m.toString(d[2]);return(4===d.length?m.toBoolean(d[3]):1)?m.multiReplace(a,b,c):a.replace(b,c)})};a.domainname=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,
2,4);if(d[0]instanceof h)return d[0].domainValueLookup(m.toString(d[1]),d[2],void 0===d[3]?void 0:m.toNumber(d[3]));throw Error("Invalid Parameter");})};a.domaincode=function(a,d){return f(a,d,function(a,b,d){m.pcCheck(d,3,4);if(d[0]instanceof h)return d[0].domainCodeLookup(m.toString(d[1]),d[2],void 0===d[3]?void 0:m.toNumber(d[3]));throw Error("Invalid Parameter");})}}})},"esri/arcade/functions/maths":function(){define(["require","exports","../languageUtils","dojo/number"],function(a,f,m,h){function e(a,
e,d){if("undefined"===typeof d||0===+d)return Math[a](e);e=+e;d=+d;if(isNaN(e)||"number"!==typeof d||0!==d%1)return NaN;e=e.toString().split("e");e=Math[a](+(e[0]+"e"+(e[1]?+e[1]-d:-d)));e=e.toString().split("e");return+(e[0]+"e"+(e[1]?+e[1]+d:d))}Object.defineProperty(f,"__esModule",{value:!0});f.registerFunctions=function(a,f){a.number=function(a,c){return f(a,c,function(a,c,d){m.pcCheck(d,1,2);a=d[0];return m.isNumber(a)?a:null===a?0:m.isDate(a)||m.isBoolean(a)?Number(a):m.isArray(a)?NaN:""===
a||void 0===a?Number(a):m.isString(a)?void 0!==d[1]?(d=m.multiReplace(d[1],"\u2030",""),d=m.multiReplace(d,"\u00a4",""),h.parse(a,{pattern:d})):Number(a.trim()):Number(a)})};a.abs=function(a,c){return f(a,c,function(a,c,d){m.pcCheck(d,1,1);return Math.abs(m.toNumber(d[0]))})};a.acos=function(a,c){return f(a,c,function(a,c,d){m.pcCheck(d,1,1);return Math.acos(m.toNumber(d[0]))})};a.asin=function(a,c){return f(a,c,function(a,c,d){m.pcCheck(d,1,1);return Math.asin(m.toNumber(d[0]))})};a.atan=function(a,
c){return f(a,c,function(a,c,d){m.pcCheck(d,1,1);return Math.atan(m.toNumber(d[0]))})};a.atan2=function(a,c){return f(a,c,function(a,c,d){m.pcCheck(d,2,2);return Math.atan2(m.toNumber(d[0]),m.toNumber(d[1]))})};a.ceil=function(a,c){return f(a,c,function(a,c,d){m.pcCheck(d,1,2);return 2===d.length?(a=m.toNumber(d[1]),isNaN(a)&&(a=0),e("ceil",m.toNumber(d[0]),-1*a)):Math.ceil(m.toNumber(d[0]))})};a.round=function(a,c){return f(a,c,function(a,c,d){m.pcCheck(d,1,2);return 2===d.length?(a=m.toNumber(d[1]),
isNaN(a)&&(a=0),e("round",m.toNumber(d[0]),-1*a)):Math.round(m.toNumber(d[0]))})};a.floor=function(a,c){return f(a,c,function(a,c,d){m.pcCheck(d,1,2);return 2===d.length?(a=m.toNumber(d[1]),isNaN(a)&&(a=0),e("floor",m.toNumber(d[0]),-1*a)):Math.floor(m.toNumber(d[0]))})};a.cos=function(a,c){return f(a,c,function(a,c,d){m.pcCheck(d,1,1);return Math.cos(m.toNumber(d[0]))})};a.isnan=function(a,c){return f(a,c,function(a,c,d){m.pcCheck(d,1,1);return"number"===typeof d[0]&&isNaN(d[0])})};a.exp=function(a,
c){return f(a,c,function(a,c,d){m.pcCheck(d,1,1);return Math.exp(m.toNumber(d[0]))})};a.log=function(a,c){return f(a,c,function(a,c,d){m.pcCheck(d,1,1);return Math.log(m.toNumber(d[0]))})};a.pow=function(a,c){return f(a,c,function(a,c,d){m.pcCheck(d,2,2);return Math.pow(m.toNumber(d[0]),m.toNumber(d[1]))})};a.random=function(a,c){return f(a,c,function(a,c,d){m.pcCheck(d,0,0);return Math.random()})};a.sin=function(a,c){return f(a,c,function(a,c,d){m.pcCheck(d,1,1);return Math.sin(m.toNumber(d[0]))})};
a.sqrt=function(a,c){return f(a,c,function(a,c,d){m.pcCheck(d,1,1);return Math.sqrt(m.toNumber(d[0]))})};a.tan=function(a,c){return f(a,c,function(a,c,d){m.pcCheck(d,1,1);return Math.tan(m.toNumber(d[0]))})};a.defaultvalue=function(a,c){return f(a,c,function(a,c,d){m.pcCheck(d,2,2);return null===d[0]||""===d[0]||void 0===d[0]?d[1]:d[0]})};a.isempty=function(a,c){return f(a,c,function(a,c,d){m.pcCheck(d,1,1);return null===d[0]||""===d[0]||void 0===d[0]?!0:!1})};a["boolean"]=function(a,c){return f(a,
c,function(a,c,d){m.pcCheck(d,1,1);return m.toBoolean(d[0])})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../../geometry/Geometry ../../geometry/Polygon ../../geometry/Polyline ../../geometry/Point ../../geometry/Extent ../../geometry/Multipoint ../../geometry/support/jsonUtils ../languageUtils ../Dictionary ../Feature".split(" "),function(a,f,m,h,e,l,n,d,c,b,k,q){Object.defineProperty(f,"__esModule",{value:!0});f.registerFunctions=function(a,f){a.polygon=function(a,d){return f(a,
d,function(d,e,f){b.pcCheck(f,1,1);d=null;if(f[0]instanceof k){if(d=b.fixSpatialReference(q.parseGeometryFromDictionary(f[0]),a.spatialReference),!1===d instanceof h)throw Error("Illegal Parameter");}else d=f[0]instanceof h?c.fromJSON(f[0].toJSON()):b.fixSpatialReference(new h(JSON.parse(f[0])),a.spatialReference);if(null!==d&&!1===d.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return b.fixNullGeometry(d)})};
a.polyline=function(a,d){return f(a,d,function(d,f,g){b.pcCheck(g,1,1);d=null;if(g[0]instanceof k){if(d=b.fixSpatialReference(q.parseGeometryFromDictionary(g[0]),a.spatialReference),!1===d instanceof e)throw Error("Illegal Parameter");}else d=g[0]instanceof e?c.fromJSON(g[0].toJSON()):b.fixSpatialReference(new e(JSON.parse(g[0])),a.spatialReference);if(null!==d&&!1===d.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return b.fixNullGeometry(d)})};a.point=function(a,d){return f(a,d,function(d,e,f){b.pcCheck(f,1,1);d=null;if(f[0]instanceof k){if(d=b.fixSpatialReference(q.parseGeometryFromDictionary(f[0]),a.spatialReference),!1===d instanceof l)throw Error("Illegal Parameter");}else d=f[0]instanceof l?c.fromJSON(f[0].toJSON()):b.fixSpatialReference(new l(JSON.parse(f[0])),a.spatialReference);if(null!==d&&!1===d.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return b.fixNullGeometry(d)})};a.multipoint=function(a,e){return f(a,e,function(e,f,g){b.pcCheck(g,1,1);e=null;if(g[0]instanceof k){if(e=b.fixSpatialReference(q.parseGeometryFromDictionary(g[0]),a.spatialReference),!1===e instanceof d)throw Error("Illegal Parameter");}else e=g[0]instanceof d?c.fromJSON(g[0].toJSON()):b.fixSpatialReference(new d(JSON.parse(g[0])),a.spatialReference);if(null!==e&&!1===e.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return b.fixNullGeometry(e)})};a.extent=function(a,m){return f(a,m,function(f,m,g){b.pcCheck(g,1,1);f=null;g[0]instanceof k?f=b.fixSpatialReference(q.parseGeometryFromDictionary(g[0]),a.spatialReference):g[0]instanceof l?(f={xmin:g[0].x,ymin:g[0].y,xmax:g[0].x,ymax:g[0].y,spatialReference:g[0].spatialReference.toJSON()},g[0].hasZ?(f.zmin=g[0].z,f.zmax=g[0].z):g[0].hasM&&(f.mmin=g[0].m,f.mmax=g[0].m),f=c.fromJSON(f)):f=g[0]instanceof h?c.fromJSON(g[0].extent.toJSON()):g[0]instanceof e?c.fromJSON(g[0].extent.toJSON()):
g[0]instanceof d?c.fromJSON(g[0].extent.toJSON()):g[0]instanceof n?c.fromJSON(g[0].toJSON()):b.fixSpatialReference(new n(JSON.parse(g[0])),a.spatialReference);if(null!==f&&!1===f.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return b.fixNullGeometry(f)})};a.geometry=function(a,d){return f(a,d,function(d,e,f){b.pcCheck(f,1,1);d=null;d=f[0]instanceof q?b.fixSpatialReference(f[0].geometry,a.spatialReference):
f[0]instanceof k?b.fixSpatialReference(q.parseGeometryFromDictionary(f[0]),a.spatialReference):b.fixSpatialReference(c.fromJSON(JSON.parse(f[0])),a.spatialReference);if(null!==d&&!1===d.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return b.fixNullGeometry(d)})};a.feature=function(a,c){return f(a,c,function(c,d,e){if(0===e.length)throw Error("Missing Parameters");c=null;if(1===e.length)if(b.isString(e[0]))c=
q.fromJson(JSON.parse(e[0]));else if(e[0]instanceof q)c=new q(e[0]);else if(e[0]instanceof m)c=new q(null,e[0]);else if(e[0]instanceof k)c=e[0].hasField("geometry")?e[0].field("geometry"):null,d=e[0].hasField("attributes")?e[0].field("attributes"):null,null!==c&&c instanceof k&&(c=q.parseGeometryFromDictionary(c)),null!==d&&(d=q.parseAttributesFromDictionary(d)),c=new q(d,c);else throw Error("Illegal Argument");else{if(2===e.length){d=c=null;if(null!==e[0])if(e[0]instanceof m)c=e[0];else if(c instanceof
k)c=q.parseGeometryFromDictionary(e[0]);else throw Error("Illegal Argument");if(null!==e[1])if(e[1]instanceof k)d=q.parseAttributesFromDictionary(e[1]);else throw Error("Illegal Argument");}else{c=null;d={};if(null!==e[0])if(e[0]instanceof m)c=e[0];else if(c instanceof k)c=q.parseGeometryFromDictionary(e[0]);else throw Error("Illegal Argument");for(var f=1;f<e.length;f+=2){var g=b.toString(e[f]),h=e[f+1];if(null===h||void 0===h||b.isString(h)||isNaN(h)||b.isDate(h)||b.isNumber(h)||b.isBoolean(h)){if(b.isFunctionParameter(h)||
!1===b.isSimpleType(h))throw Error("Illegal Argument");d[g]=h===b.voidOperation?null:h}else throw Error("Illegal Argument");}}c=new q(d,c)}c.geometry=b.fixSpatialReference(c.geometry,a.spatialReference);c.immutable=!1;return c})};a.dictionary=function(a,c){return f(a,c,function(a,c,d){if(0===d.length)throw Error("Missing Parameters");if(0!==d.length%2)throw Error("Missing Parameters");a={};for(c=0;c<d.length;c+=2){var e=b.toString(d[c]),f=d[c+1];if(null===f||void 0===f||b.isString(f)||isNaN(f)||b.isDate(f)||
b.isNumber(f)||b.isBoolean(f)||b.isArray(f)||b.isImmutableArray(f)){if(b.isFunctionParameter(f))throw Error("Illegal Argument");a[e]=f===b.voidOperation?null:f}else throw Error("Illegal Argument");}d=new k(a);d.immutable=!1;return d})};a.haskey=function(a,c){return f(a,c,function(a,c,d){b.pcCheck(d,2,2);a=b.toString(d[1]);if(d[0]instanceof q||d[0]instanceof k)return d[0].hasField(a);throw Error("Illegal Argument");})};a.indexof=function(a,c){return f(a,c,function(a,c,d){b.pcCheck(d,2,2);a=d[1];if(b.isArray(d[0])){for(c=
0;c<d[0].length;c++)if(b.equalityTest(a,d[0][c]))return c;return-1}if(b.isImmutableArray(d[0])){var e=d[0].length();for(c=0;c<e;c++)if(b.equalityTest(a,d[0].get(c)))return c;return-1}throw Error("Illegal Argument");})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../languageUtils","./fieldStats"],function(a,f,m,h){function e(a,e,d,c){if(1===c.length){if(m.isArray(c[0]))return h.calculateStat(a,c[0],-1);if(m.isImmutableArray(c[0]))return h.calculateStat(a,c[0].toArray(),
-1)}return h.calculateStat(a,c,-1)}Object.defineProperty(f,"__esModule",{value:!0});f.registerFunctions=function(a,f){a.stdev=function(a,c){return f(a,c,function(a,c,d){return e("stdev",a,c,d)})};a.variance=function(a,c){return f(a,c,function(a,c,d){return e("variance",a,c,d)})};a.average=function(a,c){return f(a,c,function(a,c,d){return e("mean",a,c,d)})};a.mean=function(a,c){return f(a,c,function(a,c,d){return e("mean",a,c,d)})};a.sum=function(a,c){return f(a,c,function(a,c,d){return e("sum",a,
c,d)})};a.min=function(a,c){return f(a,c,function(a,c,d){return e("min",a,c,d)})};a.max=function(a,c){return f(a,c,function(a,c,d){return e("max",a,c,d)})};a.distinct=function(a,c){return f(a,c,function(a,c,d){return e("distinct",a,c,d)})};a.count=function(a,c){return f(a,c,function(a,c,d){m.pcCheck(d,1,1);if(m.isArray(d[0])||m.isString(d[0]))return d[0].length;if(m.isImmutableArray(d[0]))return d[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require",
"exports","../languageUtils"],function(a,f,m){function h(a){for(var e=0,d=0;d<a.length;d++)e+=a[d];return e/a.length}function e(a){for(var e=h(a),d=0,c=0;c<a.length;c++)d+=Math.pow(e-a[c],2);return d/a.length}Object.defineProperty(f,"__esModule",{value:!0});f.decodeStatType=function(a){switch(a.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";
case "count":return"count"}return""};f.calculateStat=function(a,f,d){void 0===d&&(d=1E3);switch(a.toLowerCase()){case "distinct":a:{a=d;d=[];for(var c={},b=[],k=0;k<f.length;k++){if(void 0!==f[k]&&null!==f[k]&&f[k]!==m.voidOperation){var l=f[k];if(m.isNumber(l)||m.isString(l))void 0===c[l]&&(d.push(l),c[l]=1);else{for(var n=!1,x=0;x<b.length;x++)!0===m.equalityTest(b[x],l)&&(n=!0);!1===n&&(b.push(l),d.push(l))}}if(d.length>=a&&-1!==a){f=d;break a}}f=d}return f;case "avg":case "mean":return h(m.toNumberArray(f));
case "min":return Math.min.apply(Math,m.toNumberArray(f));case "sum":f=m.toNumberArray(f);for(d=a=0;d<f.length;d++)a+=f[d];return a;case "max":return Math.max.apply(Math,m.toNumberArray(f));case "stdev":case "stddev":return Math.sqrt(e(m.toNumberArray(f)));case "var":case "variance":return e(m.toNumberArray(f));case "count":return f.length}return 0}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/esprima"],function(a,f,m,h){Object.defineProperty(f,"__esModule",
{value:!0});f.parseScript=function(a){a=h.parse("function _() { "+a+"\n}");if(null===a.body||void 0===a.body)throw Error("No formula provided.");if(0===a.body.length)throw Error("No formula provided.");if(0===a.body.length)throw Error("No formula provided.");if("BlockStatement"!==a.body[0].body.type)throw Error("Invalid formula content.");var e=m.validateLanguage(a);if(""!==e)throw Error(e);return a};f.scriptCheck=function(a,f,n,d){var c=[];try{var b=h.parse("function _() { "+a+"\n}",{tolerant:!0,
loc:!0}),e=b.errors;if(0<e.length)for(var l=0;l<e.length;l++)c.push({line:e[l].lineNumber,character:e[l].column,reason:e[l].description});var u=m.checkScript(b,f,n,d);for(f=0;f<u.length;f++)c.push(u[f])}catch(x){try{"Unexpected token }"===x.description&&(x.index=("function _() { "+a+"\n}").length-1)?c.push({line:x.lineNumber,character:x.column,reason:"Unexpected end of script"}):c.push({line:x.lineNumber,character:x.column,reason:x.description})}catch(w){}}return c};f.extractFieldLiterals=function(a,
f){void 0===f&&(f=!1);return m.findFieldLiterals(a,f)};f.validateScript=function(a,f,h){void 0===h&&(h="full");return m.validateScript(a,f,h)};f.referencesMember=function(a,f){return m.referencesMember(a,f)};f.referencesFunction=function(a,f){return m.referencesFunction(a,f)}})},"esri/arcade/lib/esprima":function(){(function(a,f){"function"===typeof define&&define.amd?define(["exports"],f):"undefined"!==typeof exports?f(exports):f(a.esprima={})})(this,function(a){function f(a,b){if(!a)throw Error("ASSERT: "+
b);}function m(a){return 48<=a&&57>=a}function h(a){return 0<="0123456789abcdefABCDEF".indexOf(a)}function e(a){return 0<="01234567".indexOf(a)}function l(a){return 10===a||13===a||8232===a||8233===a}function n(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||92===a||128<=a&&bb.NonAsciiIdentifierStart.test(String.fromCharCode(a))}function d(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||48<=a&&57>=a||92===a||128<=a&&bb.NonAsciiIdentifierPart.test(String.fromCharCode(a))}function c(a){a=
a.toLowerCase();switch(a.length){case 2:return"if"===a||"in"===a;case 3:return"var"===a||"for"===a;case 4:return"else"===a;case 5:return"break"===a;case 6:return"return"===a;case 8:return"function"===a.toLowerCase()||"continue"===a;default:return!1}}function b(a,b,c,d,e){f("number"===typeof c,"Comment must have valid position");ca.lastCommentStart>=c||(ca.lastCommentStart=c,a={type:a,value:b},O.range&&(a.range=[c,d]),O.loc&&(a.loc=e),O.comments.push(a),O.attachComment&&(O.leadingComments.push(a),
O.trailingComments.push(a)))}function k(a){var c,d,e;c=D-a;for(d={start:{line:fa,column:D-ja-a}};D<ma;)if(e=Q.charCodeAt(D),++D,l(e)){O.comments&&(a=Q.slice(c+a,D-1),d.end={line:fa,column:D-ja-1},b("Line",a,c,D-1,d));13===e&&10===Q.charCodeAt(D)&&++D;++fa;ja=D;return}O.comments&&(a=Q.slice(c+a,D),d.end={line:fa,column:D-ja},b("Line",a,c,D,d))}function q(){var a,c;for(c=0===D;D<ma;)if(a=Q.charCodeAt(D),32===a||9===a||11===a||12===a||160===a||5760<=a&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,
8199,8200,8201,8202,8239,8287,12288,65279].indexOf(a))++D;else if(l(a))++D,13===a&&10===Q.charCodeAt(D)&&++D,++fa,ja=D,c=!0;else if(47===a)if(a=Q.charCodeAt(D+1),47===a)++D,++D,k(2),c=!0;else if(42===a){++D;++D;a:{var d=a=void 0,e=void 0,e=void 0;O.comments&&(a=D-2,d={start:{line:fa,column:D-ja-2}});for(;D<ma;)if(e=Q.charCodeAt(D),l(e))13===e&&10===Q.charCodeAt(D+1)&&++D,++fa,++D,ja=D,D>=ma&&J();else{if(42===e&&47===Q.charCodeAt(D+1)){++D;++D;O.comments&&(e=Q.slice(a+2,D-2),d.end={line:fa,column:D-
ja},b("Block",e,a,D,d));break a}++D}J()}}else break;else if(c&&45===a)if(45===Q.charCodeAt(D+1)&&62===Q.charCodeAt(D+2))D+=3,k(3);else break;else if(60===a)if("!--"===Q.slice(D+1,D+4))++D,++D,++D,++D,k(4);else break;else break}function u(a){var b,c,d=0;b="u"===a?4:2;for(a=0;a<b;++a)if(D<ma&&h(Q[D]))c=Q[D++],d=16*d+"0123456789abcdef".indexOf(c.toLowerCase());else return"";return String.fromCharCode(d)}function x(){var a,b;a=Q.charCodeAt(D++);b=String.fromCharCode(a);92===a&&(117!==Q.charCodeAt(D)&&
J(),++D,(a=u("u"))&&"\\"!==a&&n(a.charCodeAt(0))||J(),b=a);for(;D<ma;){a=Q.charCodeAt(D);if(!d(a))break;++D;b+=String.fromCharCode(a);92===a&&(b=b.substr(0,b.length-1),117!==Q.charCodeAt(D)&&J(),++D,(a=u("u"))&&"\\"!==a&&d(a.charCodeAt(0))||J(),b+=a)}return b}function w(){var a=D,b=Q.charCodeAt(D),c,d=Q[D];switch(b){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++D,O.tokenize&&(40===b?O.openParenToken=O.tokens.length:123===b&&(O.openCurlyToken=
O.tokens.length)),{type:T.Punctuator,value:String.fromCharCode(b),lineNumber:fa,lineStart:ja,start:a,end:D};default:if(c=Q.charCodeAt(D+1),61===c)switch(b){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return D+=2,{type:T.Punctuator,value:String.fromCharCode(b)+String.fromCharCode(c),lineNumber:fa,lineStart:ja,start:a,end:D};case 33:case 61:return D+=2,61===Q.charCodeAt(D)&&++D,{type:T.Punctuator,value:Q.slice(a,D),lineNumber:fa,lineStart:ja,start:a,end:D}}}b=Q.substr(D,
4);if("\x3e\x3e\x3e\x3d"===b)return D+=4,{type:T.Punctuator,value:b,lineNumber:fa,lineStart:ja,start:a,end:D};b=b.substr(0,3);if("\x3e\x3e\x3e"===b||"\x3c\x3c\x3d"===b||"\x3e\x3e\x3d"===b)return D+=3,{type:T.Punctuator,value:b,lineNumber:fa,lineStart:ja,start:a,end:D};b=b.substr(0,2);if(d===b[1]&&0<="+-\x3c\x3e\x26|".indexOf(d)||"\x3d\x3e"===b)return D+=2,{type:T.Punctuator,value:b,lineNumber:fa,lineStart:ja,start:a,end:D};if(0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(d))return++D,{type:T.Punctuator,value:d,
lineNumber:fa,lineStart:ja,start:a,end:D};J()}function t(){var a,b,c;c=Q[D];f(m(c.charCodeAt(0))||"."===c,"Numeric literal must start with a decimal digit or a decimal point");b=D;a="";if("."!==c){a=Q[D++];c=Q[D];if("0"===a){if("x"===c||"X"===c){++D;for(a="";D<ma&&h(Q[D]);)a+=Q[D++];0===a.length&&J();n(Q.charCodeAt(D))&&J();return{type:T.NumericLiteral,value:parseInt("0x"+a,16),lineNumber:fa,lineStart:ja,start:b,end:D}}if("b"===c||"B"===c){++D;for(c="";D<ma;){a=Q[D];if("0"!==a&&"1"!==a)break;c+=Q[D++]}0===
c.length&&J();D<ma&&(a=Q.charCodeAt(D),(n(a)||m(a))&&J());return{type:T.NumericLiteral,value:parseInt(c,2),lineNumber:fa,lineStart:ja,start:b,end:D}}if("o"===c||"O"===c||e(c)){e(c)?(c=!0,a="0"+Q[D++]):(c=!1,++D,a="");for(;D<ma&&e(Q[D]);)a+=Q[D++];c||0!==a.length||J();(n(Q.charCodeAt(D))||m(Q.charCodeAt(D)))&&J();return{type:T.NumericLiteral,value:parseInt(a,8),octal:c,lineNumber:fa,lineStart:ja,start:b,end:D}}c&&m(c.charCodeAt(0))&&J()}for(;m(Q.charCodeAt(D));)a+=Q[D++];c=Q[D]}if("."===c){for(a+=
Q[D++];m(Q.charCodeAt(D));)a+=Q[D++];c=Q[D]}if("e"===c||"E"===c){a+=Q[D++];c=Q[D];if("+"===c||"-"===c)a+=Q[D++];if(m(Q.charCodeAt(D)))for(;m(Q.charCodeAt(D));)a+=Q[D++];else J()}n(Q.charCodeAt(D))&&J();return{type:T.NumericLiteral,value:parseFloat(a),lineNumber:fa,lineStart:ja,start:b,end:D}}function p(){X=null;q();P("Regular Expression language structures not supported")}function v(){q();p()}function g(){var a;a=O.tokens[O.tokens.length-1];if(!a)return v();if("Punctuator"===a.type){if("]"===a.value)return w();
if(")"===a.value)return a=O.tokens[O.openParenToken-1],!a||"Keyword"!==a.type||"if"!==a.value.toLowerCase()&&"while"!==a.value.toLowerCase()&&"for"!==a.value.toLowerCase()&&"with"!==a.value.toLowerCase()?w():v();if("}"===a.value){if(O.tokens[O.openCurlyToken-3]&&"Keyword"===O.tokens[O.openCurlyToken-3].type){if(a=O.tokens[O.openCurlyToken-4],!a)return w()}else if(O.tokens[O.openCurlyToken-4]&&"Keyword"===O.tokens[O.openCurlyToken-4].type){if(a=O.tokens[O.openCurlyToken-5],!a)return v()}else return w();
if(0<=sa.indexOf(a.value))return w()}return v()}return"Keyword"===a.type&&"this"!==a.value?v():w()}function r(){var a;q();if(D>=ma)return{type:T.EOF,lineNumber:fa,lineStart:ja,start:D,end:D};a=Q.charCodeAt(D);if(n(a)){var b;a=D;if(92===Q.charCodeAt(D))b=x();else a:{var k;for(b=D++;D<ma;){k=Q.charCodeAt(D);if(92===k){D=b;b=x();break a}if(d(k))++D;else break}b=Q.slice(b,D)}return{type:1===b.length?T.Identifier:c(b)?T.Keyword:"null"===b.toLowerCase()?T.NullLiteral:"true"===b.toLowerCase()||"false"===
b.toLowerCase()?T.BooleanLiteral:T.Identifier,value:b,lineNumber:fa,lineStart:ja,start:a,end:D}}if(40===a||41===a||59===a)return w();if(39===a||34===a){var p="",r,v,y;k=!1;var z,B;z=fa;B=ja;a=Q[D];f("'"===a||'"'===a,"String literal must starts with a quote");b=D;for(++D;D<ma;)if(r=Q[D++],r===a){a="";break}else if("\\"===r)if((r=Q[D++])&&l(r.charCodeAt(0)))++fa,"\r"===r&&"\n"===Q[D]&&++D,ja=D;else switch(r){case "u":case "x":if("{"===Q[D]){++D;v=r=void 0;r=Q[D];v=0;for("}"===r&&J();D<ma;){r=Q[D++];
if(!h(r))break;v=16*v+"0123456789abcdef".indexOf(r.toLowerCase())}(1114111<v||"}"!==r)&&J();r=65535>=v?String.fromCharCode(v):String.fromCharCode((v-65536>>10)+55296,(v-65536&1023)+56320);p+=r}else y=D,(v=u(r))?p+=v:(D=y,p+=r);break;case "n":p+="\n";break;case "r":p+="\r";break;case "t":p+="\t";break;case "b":p+="\b";break;case "f":p+="\f";break;case "v":p+="\x0B";break;default:e(r)?(v="01234567".indexOf(r),0!==v&&(k=!0),D<ma&&e(Q[D])&&(k=!0,v=8*v+"01234567".indexOf(Q[D++]),0<="0123".indexOf(r)&&
D<ma&&e(Q[D])&&(v=8*v+"01234567".indexOf(Q[D++]))),p+=String.fromCharCode(v)):p+=r}else if(l(r.charCodeAt(0)))break;else p+=r;""!==a&&J();return{type:T.StringLiteral,value:p,octal:k,startLineNumber:z,startLineStart:B,lineNumber:fa,lineStart:ja,start:b,end:D}}return 46===a?m(Q.charCodeAt(D+1))?t():w():m(a)?t():O.tokenize&&47===a?g():w()}function z(){var a,b,c;q();a={start:{line:fa,column:D-ja}};b=r();a.end={line:fa,column:D-ja};b.type!==T.EOF&&(c=Q.slice(b.start,b.end),a={type:za[b.type],value:c,range:[b.start,
b.end],loc:a},b.regex&&(a.regex={pattern:b.regex.pattern,flags:b.regex.flags}),O.tokens.push(a));return b}function y(){var a;a=X;D=a.end;fa=a.lineNumber;ja=a.lineStart;X="undefined"!==typeof O.tokens?z():r();D=a.end;fa=a.lineNumber;ja=a.lineStart;return a}function A(){var a,b,c;a=D;b=fa;c=ja;X="undefined"!==typeof O.tokens?z():r();D=a;fa=b;ja=c}function F(){this.line=fa;this.column=D-ja}function B(){this.start=new F;this.end=null}function E(a){this.start=a.type===T.StringLiteral?{line:a.startLineNumber,
column:a.start-a.startLineStart}:{line:a.lineNumber,column:a.start-a.lineStart};this.end=null}function C(){D=X.start;X.type===T.StringLiteral?(fa=X.startLineNumber,ja=X.startLineStart):(fa=X.lineNumber,ja=X.lineStart);O.range&&(this.range=[D,0]);O.loc&&(this.loc=new B)}function G(a){O.range&&(this.range=[a.start,0]);O.loc&&(this.loc=new E(a))}function L(){var a,b,c,d;a=D;b=fa;c=ja;q();d=fa!==b;D=a;fa=b;ja=c;return d}function U(a,b,c){var d=Error("Line "+a+": "+c);d.index=b;d.lineNumber=a;d.column=
b-ja+1;d.description=c;return d}function P(a){var b,c;b=Array.prototype.slice.call(arguments,1);c=a.replace(/%(\d)/g,function(a,c){f(c<b.length,"Message reference must be in range");return b[c]});throw U(fa,D,c);}function H(a){var b,c;b=Array.prototype.slice.call(arguments,1);c=a.replace(/%(\d)/g,function(a,c){f(c<b.length,"Message reference must be in range");return b[c]});c=U(fa,D,c);if(O.errors)O.errors.push(c);else throw c;}function K(a,b){var c=ba.UnexpectedToken;a&&(c=b?b:a.type===T.EOF?ba.UnexpectedEOS:
a.type===T.Identifier?ba.UnexpectedIdentifier:a.type===T.NumericLiteral?ba.UnexpectedNumber:a.type===T.StringLiteral?ba.UnexpectedString:ba.UnexpectedToken);c=c.replace("%0",a?a.value:"ILLEGAL");return a&&"number"===typeof a.lineNumber?U(a.lineNumber,a.start,c):U(fa,D,c)}function J(a,b){throw K(a,b);}function R(a,b){a=K(a,b);if(O.errors)O.errors.push(a);else throw a;}function M(a){var b=y();b.type===T.Punctuator&&b.value===a||J(b)}function ea(){var a;O.errors?(a=X,a.type===T.Punctuator&&","===a.value?
y():a.type===T.Punctuator&&";"===a.value?(y(),R(a)):R(a,ba.UnexpectedToken)):M(",")}function I(a){var b=y();b.type===T.Keyword&&b.value.toLowerCase()===a.toLowerCase()||J(b)}function N(a){return X.type===T.Punctuator&&X.value===a}function Y(a){return X.type===T.Keyword&&X.value.toLowerCase()===a.toLowerCase()}function aa(){var a;59===Q.charCodeAt(D)||N(";")?y():(a=fa,q(),fa===a&&(X.type===T.EOF||N("}")||J(X)))}function S(a){return a.type===ga.Identifier||a.type===ga.MemberExpression}function Z(a,
b){var c,d=new C;b=ka;c=Ea();ka=b;return d.finishFunctionExpression(null,a,[],c)}function da(){var a,b;a=ka;ka=!0;b=Qa();b=Z(b.params);ka=a;return b}function V(){var a,b=new C;a=y();return a.type===T.StringLiteral||a.type===T.NumericLiteral?(ka&&a.octal&&R(a,ba.StrictOctalLiteral),b.finishLiteral(a)):b.finishIdentifier(a.value)}function la(){var a,b,c,d=new C;a=X;if(a.type===T.Identifier)return b=V(),"get"!==a.value||N(":")||N("(")?"set"!==a.value||N(":")||N("(")?N(":")?(y(),a=ta(),d.finishProperty("init",
b,a,!1,!1)):N("(")?(a=da(),d.finishProperty("init",b,a,!0,!1)):d.finishProperty("init",b,b,!1,!0):(b=V(),M("("),a=X,a.type!==T.Identifier?(M(")"),R(a),a=Z([])):(c=[Ga()],M(")"),a=Z(c,a)),d.finishProperty("set",b,a,!1,!1)):(b=V(),M("("),M(")"),a=Z([]),d.finishProperty("get",b,a,!1,!1));if(a.type===T.EOF||a.type===T.Punctuator)J(a);else{b=V();if(N(":"))return y(),a=ta(),d.finishProperty("init",b,a,!1,!1);if(N("("))return a=da(),d.finishProperty("init",b,a,!0,!1);J(y())}}function ia(a){var b=[],c,d,
e={},f=String,g=new C;for(!0!==a&&M("{");!N("}");)a=la(),c=a.key.type===ga.Identifier?a.key.name:f(a.key.value),d="init"===a.kind?Ka.Data:"get"===a.kind?Ka.Get:Ka.Set,c="$"+c,Object.prototype.hasOwnProperty.call(e,c)?(e[c]===Ka.Data?ka&&d===Ka.Data?H(ba.StrictDuplicateProperty):d!==Ka.Data&&H(ba.AccessorDataProperty):d===Ka.Data?H(ba.AccessorDataProperty):e[c]&d&&H(ba.AccessorGetSet),e[c]|=d):e[c]=d,b.push(a),N("}")||ea();M("}");return g.finishObjectExpression(b)}function ha(){var a,b,c,d;if(N("("))return M("("),
N(")")?(y(),b=Ma.ArrowParameterPlaceHolder):(++ca.parenthesisCount,b=ya(),M(")")),b;if(N("[")){b=[];var e=new C;for(M("[");!N("]");)N(",")?(y(),b.push(null)):(b.push(ta()),N("]")||M(","));y();return e.finishArrayExpression(b)}if(N("{"))return ia();a=X.type;d=new C;if(a===T.Identifier)c=d.finishIdentifier(y().value);else if(a===T.StringLiteral||a===T.NumericLiteral)ka&&X.octal&&R(X,ba.StrictOctalLiteral),c=d.finishLiteral(y());else if(a===T.Keyword){if(Y("function")){d=null;var f;c=[];var g=[],h,k=
new C;I("function");N("(")||(d=Ga());f=Qa(b);c=f.params;g=f.defaults;a=f.stricted;b=f.firstRestricted;f.message&&(e=f.message);h=ka;f=Ea();ka&&b&&J(b,e);ka&&a&&R(a,e);ka=h;return k.finishFunctionExpression(d,c,g,f)}Y("this")?(y(),c=d.finishThisExpression()):J(y())}else a===T.BooleanLiteral?(b=y(),b.value="true"===b.value.toLowerCase(),c=d.finishLiteral(b)):a===T.NullLiteral?(b=y(),b.value=null,c=d.finishLiteral(b)):N("/")||N("/\x3d")?(c="undefined"!==typeof O.tokens?d.finishLiteral(v()):d.finishLiteral(p()),
A()):J(y());return c}function pa(){var a=[];M("(");if(!N(")"))for(;D<ma;){a.push(ta());if(N(")"))break;ea()}M(")");return a}function va(){M(".");var a,b=new C;a=y();a.type===T.Identifier||a.type===T.Keyword||a.type===T.BooleanLiteral||a.type===T.NullLiteral||J(a);return b.finishIdentifier(a.value)}function Da(){var a;M("[");a=ya();M("]");return a}function xa(){var a,b,c=new C;I("new");var d;f(ca.allowIn,"callee of new expression always allow in keyword.");d=X;for(a=Y("new")?xa():ha();;)if(N("["))b=
Da(),a=(new G(d)).finishMemberExpression("[",a,b);else if(N("."))b=va(),a=(new G(d)).finishMemberExpression(".",a,b);else break;b=N("(")?pa():[];return c.finishNewExpression(a,b)}function Ha(){var a,b,c=X,d,e=ca.allowIn;b=X;ca.allowIn=!0;for(a=Y("new")?xa():ha();;)if(N("."))d=va(),a=(new G(b)).finishMemberExpression(".",a,d);else if(N("("))d=pa(),a=(new G(b)).finishCallExpression(a,d);else if(N("["))d=Da(),a=(new G(b)).finishMemberExpression("[",a,d);else break;ca.allowIn=e;X.type!==T.Punctuator||
!N("++")&&!N("--")||L()||(S(a)||H(ba.InvalidLHSInAssignment),b=y(),a=(new G(c)).finishPostfixExpression(b.value,a));return a}function oa(){var a,b,c;X.type!==T.Punctuator&&X.type!==T.Keyword?b=Ha():N("++")||N("--")?(c=X,a=y(),b=oa(),S(b)||H(ba.InvalidLHSInAssignment),b=(new G(c)).finishUnaryExpression(a.value,b)):N("+")||N("-")||N("~")||N("!")?(c=X,a=y(),b=oa(),b=(new G(c)).finishUnaryExpression(a.value,b)):Y("delete")||Y("void")||Y("typeof")?(c=X,a=y(),b=oa(),b=(new G(c)).finishUnaryExpression(a.value,
b),ka&&"delete"===b.operator&&b.argument.type===ga.Identifier&&H(ba.StrictDelete)):b=Ha();return b}function hb(a,b){var c=0;if(a.type!==T.Punctuator&&a.type!==T.Keyword)return 0;switch(a.value){case "||":c=1;break;case "\x26\x26":c=2;break;case "|":c=3;break;case "^":c=4;break;case "\x26":c=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":c=6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":c=7;break;case "in":c=b?7:0;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":c=
8;break;case "+":case "-":c=9;break;case "*":case "/":case "%":c=11}return c}function Ra(){var a,b,c,d,e,f;a=X;b=oa();if(b===Ma.ArrowParameterPlaceHolder)return b;c=X;d=hb(c,ca.allowIn);if(0===d)return b;c.prec=d;y();a=[a,X];f=oa();for(e=[b,c,f];0<(d=hb(X,ca.allowIn));){for(;2<e.length&&d<=e[e.length-2].prec;)f=e.pop(),c=e.pop().value,b=e.pop(),a.pop(),b=(new G(a[a.length-1])).finishBinaryExpression(c,b,f),e.push(b);c=y();c.prec=d;e.push(c);a.push(X);b=oa();e.push(b)}d=e.length-1;b=e[d];for(a.pop();1<
d;)b=(new G(a.pop())).finishBinaryExpression(e[d-1].value,e[d-2],b),d-=2;return b}function Na(a){var b,c,d,e,f,g,h;e=[];f=[];g=0;h={paramSet:{}};b=0;for(c=a.length;b<c;b+=1)if(d=a[b],d.type===ga.Identifier)e.push(d),f.push(null),Fa(h,d,d.name);else if(d.type===ga.AssignmentExpression)e.push(d.left),f.push(d.right),++g,Fa(h,d.left,d.left.name);else return null;h.message===ba.StrictParamDupe&&(a=ka?h.stricted:h.firstRestricted,J(a,h.message));0===g&&(f=[]);return{params:e,defaults:f,rest:null,stricted:h.stricted,
firstRestricted:h.firstRestricted,message:h.message}}function ta(){var a,b,c,d,e;a=ca.parenthesisCount;b=e=X;var f,g;g=X;c=Ra();c!==Ma.ArrowParameterPlaceHolder&&N("?")&&(y(),f=ca.allowIn,ca.allowIn=!0,b=ta(),ca.allowIn=f,M(":"),f=ta(),c=(new G(g)).finishConditionalExpression(c,b,f));if(c===Ma.ArrowParameterPlaceHolder||N("\x3d\x3e"))if(ca.parenthesisCount===a||ca.parenthesisCount===a+1)if(c.type===ga.Identifier?d=Na([c]):c.type===ga.AssignmentExpression?d=Na([c]):c.type===ga.SequenceExpression?d=
Na(c.expressions):c===Ma.ArrowParameterPlaceHolder&&(d=Na([])),d)return a=d,e=new G(e),M("\x3d\x3e"),d=ka,c=N("{")?Ea():ta(),ka&&a.firstRestricted&&J(a.firstRestricted,a.message),ka&&a.stricted&&R(a.stricted,a.message),ka=d,e.finishArrowFunctionExpression(a.params,a.defaults,c,c.type!==ga.BlockStatement);X.type!==T.Punctuator?a=!1:(a=X.value,a="\x3d"===a||"*\x3d"===a||"/\x3d"===a||"%\x3d"===a||"+\x3d"===a||"-\x3d"===a||"\x3c\x3c\x3d"===a||"\x3e\x3e\x3d"===a||"\x3e\x3e\x3e\x3d"===a||"\x26\x3d"===a||
"^\x3d"===a||"|\x3d"===a);a&&(S(c)||H(ba.InvalidLHSInAssignment),b=y(),a=ta(),c=(new G(e)).finishAssignmentExpression(b.value,c,a));return c}function ya(){var a,b=X;a=ta();if(N(",")){for(a=[a];D<ma&&N(",");)y(),a.push(ta());a=(new G(b)).finishSequenceExpression(a)}return a}function Ga(){var a,b=new C;a=y();a.type!==T.Identifier&&J(a);return b.finishIdentifier(a.value)}function ib(a){var b=null,c,d=new C;c=Ga();"const"===a?(M("\x3d"),b=ta()):N("\x3d")&&(y(),b=ta());return d.finishVariableDeclarator(c,
b)}function Ia(a){var b=[];do{b.push(ib(a));if(!N(","))break;y()}while(D<ma);return b}function Ja(a){var b=X.type,c,d;b===T.EOF&&J(X);if(b===T.Punctuator&&"{"===X.value){if(a){M("{");var e=X;a=D;c=fa;d=ja;y();b=N(":");X=e;D=a;fa=c;ja=d;if((X.type===T.Identifier||X.type===T.StringLiteral)&&b)return ia(!0);a=new C;for(c=[];D<ma&&!N("}");){d=Sa();if("undefined"===typeof d)break;c.push(d)}M("}");return a.finishBlockStatement(c)}return ia()}a=new C;if(b===T.Punctuator)switch(X.value){case ";":return a=
new C,M(";"),a.finishEmptyStatement();case "(":return c=ya(),aa(),a.finishExpressionStatement(c)}else if(b===T.Keyword)switch(X.value.toLowerCase()){case "break":return c=null,I("break"),59===Q.charCodeAt(D)?(y(),ca.inIteration||ca.inSwitch||P(ba.IllegalBreak),a=a.finishBreakStatement(null)):L()?(ca.inIteration||ca.inSwitch||P(ba.IllegalBreak),a=a.finishBreakStatement(null)):(X.type===T.Identifier&&(c=Ga(),d="$"+c.name,Object.prototype.hasOwnProperty.call(ca.labelSet,d)||P(ba.UnknownLabel,c.name)),
aa(),null!==c||ca.inIteration||ca.inSwitch||P(ba.IllegalBreak),a=a.finishBreakStatement(c)),a;case "continue":return c=null,I("continue"),59===Q.charCodeAt(D)?(y(),ca.inIteration||P(ba.IllegalContinue),a=a.finishContinueStatement(null)):L()?(ca.inIteration||P(ba.IllegalContinue),a=a.finishContinueStatement(null)):(X.type===T.Identifier&&(c=Ga(),d="$"+c.name,Object.prototype.hasOwnProperty.call(ca.labelSet,d)||P(ba.UnknownLabel,c.name)),aa(),null!==c||ca.inIteration||P(ba.IllegalContinue),a=a.finishContinueStatement(c)),
a;case "for":var f,g,h;g=ca.allowIn;f=b=e=null;I("for");M("(");if(N(";"))y();else{if(Y("var")){ca.allowIn=!1;var k=new C;f=y();h=Ia();f=k.finishVariableDeclaration(h,f.value);ca.allowIn=g;1===f.declarations.length&&Y("in")&&(y(),c=f,d=ya(),f=null)}else ca.allowIn=!1,f=ya(),ca.allowIn=g,Y("in")&&(S(f)||H(ba.InvalidLHSInForIn),y(),c=f,d=ya(),f=null);"undefined"===typeof c&&M(";")}"undefined"===typeof c&&(N(";")||(b=ya()),M(";"),N(")")||(e=ya()));M(")");h=ca.inIteration;ca.inIteration=!0;g=Ja(!0);ca.inIteration=
h;return"undefined"===typeof c?a.finishForStatement(f,b,e,g):a.finishForInStatement(c,d,g);case "function":return $a(a);case "if":return I("if"),M("("),c=ya(),M(")"),d=Ja(!0),Y("else")?(y(),b=Ja(!0)):b=null,a.finishIfStatement(c,d,b);case "return":return c=null,I("return"),ca.inFunctionBody||H(ba.IllegalReturn),32===Q.charCodeAt(D)&&n(Q.charCodeAt(D+1))?(c=ya(),aa(),a=a.finishReturnStatement(c)):L()?a=a.finishReturnStatement(null):(N(";")||N("}")||X.type===T.EOF||(c=ya()),aa(),a=a.finishReturnStatement(c)),
a;case "var":return I("var"),c=Ia(),aa(),a.finishVariableDeclaration(c,"var")}c=ya();if(c.type===ga.Identifier&&N(":"))return y(),b="$"+c.name,Object.prototype.hasOwnProperty.call(ca.labelSet,b)&&P(ba.Redeclaration,"Label",c.name),ca.labelSet[b]=!0,d=Ja(!1),delete ca.labelSet[b],a.finishLabeledStatement(c,d);aa();return a.finishExpressionStatement(c)}function Ea(){var a,b=[],c,d,e,f,g,h=new C;for(M("{");D<ma&&X.type===T.StringLiteral;){c=X;a=Sa();b.push(a);if(a.expression.type!==ga.Literal)break;
a=Q.slice(c.start+1,c.end-1);"use strict"===a?(ka=!0,d&&R(d,ba.StrictOctalLiteral)):!d&&c.octal&&(d=c)}c=ca.labelSet;d=ca.inIteration;e=ca.inSwitch;f=ca.inFunctionBody;g=ca.parenthesizedCount;ca.labelSet={};ca.inIteration=!1;ca.inSwitch=!1;ca.inFunctionBody=!0;for(ca.parenthesizedCount=0;D<ma&&!N("}");){a=Sa();if("undefined"===typeof a)break;b.push(a)}M("}");ca.labelSet=c;ca.inIteration=d;ca.inSwitch=e;ca.inFunctionBody=f;ca.parenthesizedCount=g;return h.finishBlockStatement(b)}function Fa(a,b,c){c=
"$"+c;ka?Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.stricted=b,a.message=ba.StrictParamDupe):!a.firstRestricted&&Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.firstRestricted=b,a.message=ba.StrictParamDupe);a.paramSet[c]=!0}function Qa(a){a={params:[],defaultCount:0,defaults:[],firstRestricted:a};M("(");if(!N(")"))for(a.paramSet={};D<ma;){var b=a,c=void 0,d=void 0,e=void 0,c=X,d=Ga();Fa(b,c,c.value);N("\x3d")&&(y(),e=ta(),++b.defaultCount);b.params.push(d);b.defaults.push(e);
if(N(")"))break;M(",")}M(")");0===a.defaultCount&&(a.defaults=[]);return{params:a.params,defaults:a.defaults,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function $a(){var a,b=[],c=[],d,e,f,g,h,k=new C;I("function");a=Ga();d=Qa(f);b=d.params;c=d.defaults;e=d.stricted;f=d.firstRestricted;d.message&&(g=d.message);h=ka;d=Ea();ka&&f&&J(f,g);ka&&e&&R(e,g);ka=h;return k.finishFunctionDeclaration(a,b,c,d)}function Sa(){if(X.type===T.Keyword)return"function"===X.value.toLowerCase()?
$a():Ja(!1);if(X.type!==T.EOF)return Ja(!1)}function Ba(){var a,b,c,d=[];for(a=0;a<O.tokens.length;++a)b=O.tokens[a],c={type:b.type,value:b.value},b.regex&&(c.regex={pattern:b.regex.pattern,flags:b.regex.flags}),O.range&&(c.range=b.range),O.loc&&(c.loc=b.loc),d.push(c);O.tokens=d}var T,za,sa,ga,Ma,Ka,ba,bb,Q,ka,D,fa,ja,ma,X,ca,O;T={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};za={};za[T.BooleanLiteral]="Boolean";za[T.EOF]=
"\x3cend\x3e";za[T.Identifier]="Identifier";za[T.Keyword]="Keyword";za[T.NullLiteral]="Null";za[T.NumericLiteral]="Numeric";za[T.Punctuator]="Punctuator";za[T.StringLiteral]="String";za[T.RegularExpression]="RegularExpression";sa="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ");
ga={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"};Ma={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}};
Ka={Data:1,Get:2,Set:4};ba={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",
MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",
StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",
AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};bb={NonAsciiIdentifierStart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/,
NonAsciiIdentifierPart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/};
G.prototype=C.prototype={processComment:function(){var a,b,c,d=O.bottomRightStack,e,f,g=d[d.length-1];if(!(this.type===ga.Program&&0<this.body.length)){if(0<O.trailingComments.length){c=[];for(e=O.trailingComments.length-1;0<=e;--e)f=O.trailingComments[e],f.range[0]>=this.range[1]&&(c.unshift(f),O.trailingComments.splice(e,1));O.trailingComments=[]}else g&&g.trailingComments&&g.trailingComments[0].range[0]>=this.range[1]&&(c=g.trailingComments,delete g.trailingComments);if(g)for(;g&&g.range[0]>=this.range[0];)a=
g,g=d.pop();if(a)a.leadingComments&&a.leadingComments[a.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=a.leadingComments,a.leadingComments=void 0);else if(0<O.leadingComments.length)for(b=[],e=O.leadingComments.length-1;0<=e;--e)f=O.leadingComments[e],f.range[1]<=this.range[0]&&(b.unshift(f),O.leadingComments.splice(e,1));b&&0<b.length&&(this.leadingComments=b);c&&0<c.length&&(this.trailingComments=c);d.push(this)}},finish:function(){O.range&&(this.range[1]=D);O.loc&&(this.loc.end=
new F,O.source&&(this.loc.source=O.source));O.attachComment&&this.processComment()},finishArrayExpression:function(a){this.type=ga.ArrayExpression;this.elements=a;this.finish();return this},finishAssignmentExpression:function(a,b,c){this.type=ga.AssignmentExpression;this.operator=a;this.left=b;this.right=c;this.finish();return this},finishBinaryExpression:function(a,b,c){this.type="||"===a||"\x26\x26"===a?ga.LogicalExpression:ga.BinaryExpression;this.operator=a;this.left=b;this.right=c;this.finish();
return this},finishBlockStatement:function(a){this.type=ga.BlockStatement;this.body=a;this.finish();return this},finishBreakStatement:function(a){this.type=ga.BreakStatement;this.label=a;this.finish();return this},finishCallExpression:function(a,b){this.type=ga.CallExpression;this.callee=a;this.arguments=b;this.finish();return this},finishConditionalExpression:function(a,b,c){this.type=ga.ConditionalExpression;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishContinueStatement:function(a){this.type=
ga.ContinueStatement;this.label=a;this.finish();return this},finishEmptyStatement:function(){this.type=ga.EmptyStatement;this.finish();return this},finishExpressionStatement:function(a){this.type=ga.ExpressionStatement;this.expression=a;this.finish();return this},finishForStatement:function(a,b,c,d){this.type=ga.ForStatement;this.init=a;this.test=b;this.update=c;this.body=d;this.finish();return this},finishForInStatement:function(a,b,c){this.type=ga.ForInStatement;this.left=a;this.right=b;this.body=
c;this.each=!1;this.finish();return this},finishFunctionDeclaration:function(a,b,c,d){this.type=ga.FunctionDeclaration;this.id=a;this.params=b;this.defaults=c;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishFunctionExpression:function(a,b,c,d){this.type=ga.FunctionExpression;this.id=a;this.params=b;this.defaults=c;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishIdentifier:function(a){this.type=ga.Identifier;
this.name=a;this.finish();return this},finishIfStatement:function(a,b,c){this.type=ga.IfStatement;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishLiteral:function(a){this.type=ga.Literal;this.value=a.value;this.raw=Q.slice(a.start,a.end);a.regex&&(this.regex=a.regex);this.finish();return this},finishMemberExpression:function(a,b,c){this.type=ga.MemberExpression;this.computed="["===a;this.object=b;this.property=c;this.finish();return this},finishObjectExpression:function(a){this.type=
ga.ObjectExpression;this.properties=a;this.finish();return this},finishPostfixExpression:function(a,b){this.type=ga.UpdateExpression;this.operator=a;this.argument=b;this.prefix=!1;this.finish();return this},finishProgram:function(a){this.type=ga.Program;this.body=a;this.finish();return this},finishProperty:function(a,b,c,d,e){this.type=ga.Property;this.key=b;this.value=c;this.kind=a;this.method=d;this.shorthand=e;this.finish();return this},finishReturnStatement:function(a){this.type=ga.ReturnStatement;
this.argument=a;this.finish();return this},finishUnaryExpression:function(a,b){this.type="++"===a||"--"===a?ga.UpdateExpression:ga.UnaryExpression;this.operator=a;this.argument=b;this.prefix=!0;this.finish();return this},finishVariableDeclaration:function(a,b){this.type=ga.VariableDeclaration;this.declarations=a;this.kind=b;this.finish();return this},finishVariableDeclarator:function(a,b){this.type=ga.VariableDeclarator;this.id=a;this.init=b;this.finish();return this}};a.version="2.0.0-dev";a.tokenize=
function(a,b){var c,d;c=String;"string"===typeof a||a instanceof String||(a=c(a));Q=a;D=0;fa=0<Q.length?1:0;ja=0;ma=Q.length;X=null;ca={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};O={};b=b||{};b.tokens=!0;O.tokens=[];O.tokenize=!0;O.openParenToken=-1;O.openCurlyToken=-1;O.range="boolean"===typeof b.range&&b.range;O.loc="boolean"===typeof b.loc&&b.loc;"boolean"===typeof b.comment&&b.comment&&(O.comments=[]);"boolean"===typeof b.tolerant&&b.tolerant&&(O.errors=
[]);try{A();if(X.type===T.EOF)return O.tokens;for(y();X.type!==T.EOF;)try{y()}catch(Va){if(O.errors){O.errors.push(Va);break}else throw Va;}Ba();d=O.tokens;"undefined"!==typeof O.comments&&(d.comments=O.comments);"undefined"!==typeof O.errors&&(d.errors=O.errors)}catch(Va){throw Va;}finally{O={}}return d};a.parse=function(a,b){var c,d;d=String;"string"===typeof a||a instanceof String||(a=d(a));Q=a;D=0;fa=0<Q.length?1:0;ja=0;ma=Q.length;X=null;ca={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,
inIteration:!1,inSwitch:!1,lastCommentStart:-1};O={};"undefined"!==typeof b&&(O.range="boolean"===typeof b.range&&b.range,O.loc="boolean"===typeof b.loc&&b.loc,O.attachComment="boolean"===typeof b.attachComment&&b.attachComment,O.loc&&null!==b.source&&void 0!==b.source&&(O.source=d(b.source)),"boolean"===typeof b.tokens&&b.tokens&&(O.tokens=[]),"boolean"===typeof b.comment&&b.comment&&(O.comments=[]),"boolean"===typeof b.tolerant&&b.tolerant&&(O.errors=[]),O.attachComment&&(O.range=!0,O.comments=
[],O.bottomRightStack=[],O.trailingComments=[],O.leadingComments=[]));try{var e;q();A();e=new C;ka=!1;var f;a=[];for(var g,h,k;D<ma;){g=X;if(g.type!==T.StringLiteral)break;f=Sa();a.push(f);if(f.expression.type!==ga.Literal)break;h=Q.slice(g.start+1,g.end-1);"use strict"===h?(ka=!0,k&&R(k,ba.StrictOctalLiteral)):!k&&g.octal&&(k=g)}for(;D<ma;){f=Sa();if("undefined"===typeof f)break;a.push(f)}c=e.finishProgram(a);"undefined"!==typeof O.comments&&(c.comments=O.comments);"undefined"!==typeof O.tokens&&
(Ba(),c.tokens=O.tokens);"undefined"!==typeof O.errors&&(c.errors=O.errors)}catch(kb){throw kb;}finally{O={}}return c};a.Syntax=function(){var a,b={};"function"===typeof Object.create&&(b=Object.create(null));for(a in ga)ga.hasOwnProperty(a)&&(b[a]=ga[a]);"function"===typeof Object.freeze&&Object.freeze(b);return b}()})},"esri/arcade/arcadeCompiler":function(){define("require exports ../geometry/Polygon ../Graphic ../geometry/Polyline ../geometry/Point ../geometry/Extent ../geometry/Multipoint ../geometry/SpatialReference ./languageUtils ./treeAnalysis ./Dictionary ./Feature ./functions/date ./functions/string ./functions/maths ./functions/geometry ./functions/stats ./ImmutablePathArray ./ImmutablePointArray ../geometry/Geometry".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t,p,v,g,r,z){function y(a,b,c){try{return c(a,null,b)}catch(ia){throw ia;}}function A(a,b){try{switch(b.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return G(a,b);case "VariableDeclaration":for(var c=[],d=0;d<b.declarations.length;d++)c.push(A(a,b.declarations[d]));return c.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return C(a,b);case "FunctionDeclaration":var d=b.id.name.toLowerCase(),e={applicationCache:void 0===
a.applicationCache?null:a.applicationCache,spatialReference:a.spatialReference,console:a.console,symbols:a.symbols,localScope:{_SymbolsMap:{}},depthCounter:a.depthCounter+1,globalScope:a.globalScope};if(64<e.depthCounter)throw Error("Exceeded maximum function depth");for(var f="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; var lscope \x3d [];\n ",g=0;g<b.params.length;g++){var h=b.params[g].name.toLowerCase(),l=R(h,a);e.localScope._SymbolsMap[h]=
l;f+="lscope['"+l+"']\x3darguments["+g.toString()+"];\n"}f+=C(e,b.body)+"\n return lastStatement; }, runtimeCtx))";f+="\n lastStatement \x3d lc.voidOperation; \n";void 0!==a.globalScope[d]?c="gscope['"+d+"']\x3d"+f:void 0!==a.globalScope._SymbolsMap[d]?c="gscope['"+a.globalScope._SymbolsMap[d]+"']\x3d"+f:(l=R(d,a),a.globalScope._SymbolsMap[d]=l,c="gscope['"+l+"']\x3d"+f);return c;case "ReturnStatement":var m;m=null===b.argument?"return lc.voidOperation;":"return "+A(a,b.argument)+";";return m;case "IfStatement":if("AssignmentExpression"===
b.test.type||"UpdateExpression"===b.test.type)throw Error(k.nodeErrorMessage(b.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var p=A(a,b.test),n=M(a),t="var "+n+" \x3d "+p+";\n if ("+n+" \x3d\x3d\x3d true) {\n"+E(a,b.consequent)+"\n }\n",t=null!==b.alternate?t+("else if ("+n+"\x3d\x3d\x3dfalse)   { \n"+E(a,b.alternate)+"}\n"):t+("else if ("+n+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return t+="else { lang.error({type: '"+b.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";
case "ExpressionStatement":var r;r="AssignmentExpression"===b.expression.type?"lastStatement \x3d lc.voidOperation; "+A(a,b.expression)+" \n ":"lastStatement \x3d "+A(a,b.expression)+";";return r;case "AssignmentExpression":return B(a,b);case "UpdateExpression":return F(a,b);case "BreakStatement":return"break;";case "ContinueStatement":return"continue;";case "ForStatement":c="lastStatement \x3d lc.voidOperation; \n";null!==b.init&&(c+=A(a,b.init));var v=M(a),q=M(a),c=c+("var "+v+" \x3d true;")+"\n do { ";
null!==b.update&&(c+=" if ("+v+"\x3d\x3d\x3dfalse) {\n "+A(a,b.update)+"  \n}\n "+v+"\x3dfalse; \n");null!==b.test&&(c+="var "+q+" \x3d "+A(a,b.test)+";",c+="if ("+q+"\x3d\x3d\x3dfalse) { break; } else if ("+q+"!\x3d\x3dtrue) { lang.error({type: '"+b.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");c+=A(a,b.body);null!==b.update&&(c+="\n "+A(a,b.update));return c+("\n"+v+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation;");case "ForInStatement":var u=M(a),y=M(a),
x=M(a),w="var "+u+" \x3d "+A(a,b.right)+";\n";"VariableDeclaration"===b.left.type&&(w+=A(a,b.left));var z="VariableDeclaration"===b.left.type?b.left.declarations[0].id.name:b.left.name,z=z.toLowerCase(),c="";null!==a.localScope&&(void 0!==a.localScope[z]?c="lscope['"+z+"']":void 0!==a.localScope._SymbolsMap[z]&&(c="lscope['"+a.localScope._SymbolsMap[z]+"']"));""===c&&(void 0!==a.globalScope[z]?c="gscope['"+z+"']":void 0!==a.globalScope._SymbolsMap[z]&&(c="gscope['"+a.globalScope._SymbolsMap[z]+"']"));
w=w+("if ("+u+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n ")+("else if (lc.isArray("+u+") || lc.isString("+u+")) {")+("var "+y+"\x3d"+u+".length; \n")+("for(var "+x+"\x3d0; "+x+"\x3c"+y+"; "+x+"++) {\n");w+=c+"\x3d"+x+";\n";w+=A(a,b.body);w+="\n}\n";w+=" lastStatement \x3d lc.voidOperation; \n";w+=" \n}\n";w+="else if (lc.isImmutableArray("+u+")) {";w=w+("var "+y+"\x3d"+u+".length(); \n")+("for(var "+x+"\x3d0; "+x+"\x3c"+y+"; "+x+"++) {\n");w+=c+"\x3d"+x+";\n";w+=A(a,b.body);w+=
"\n}\n";w+=" lastStatement \x3d lc.voidOperation; \n";w+=" \n}\n";w+="else if (( "+u+" instanceof lang.Dictionary) || ( "+u+" instanceof lang.Feature)) {";w=w+("var "+y+"\x3d"+u+".keys(); \n")+("for(var "+x+"\x3d0; "+x+"\x3c"+y+".length; "+x+"++) {\n");w+=c+"\x3d"+y+"["+x+"];\n";w+=A(a,b.body);w+="\n}\n";w+=" lastStatement \x3d lc.voidOperation; \n";w+=" \n}\n";return w+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return U(a,b);case "MemberExpression":var da;try{c=void 0,c=
!0===b.computed?A(a,b.property):"'"+b.property.name+"'",da="lang.member("+A(a,b.object)+","+c+")"}catch(sa){throw sa;}return da;case "Literal":return null===b.value||void 0===b.value?"null":JSON.stringify(b.value);case "ThisExpression":throw Error(k.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==b.callee.type)throw Error(k.nodeErrorMessage(b,"RUNTIME","ONLYNODESSUPPORTED"));var V=b.callee.name.toLowerCase(),c="";null!==a.localScope&&(void 0!==a.localScope[V]?
c="lscope['"+V+"']":void 0!==a.localScope._SymbolsMap[V]&&(c="lscope['"+a.localScope._SymbolsMap[V]+"']"));""===c&&(void 0!==a.globalScope[V]?c="gscope['"+V+"']":void 0!==a.globalScope._SymbolsMap[V]&&(c="gscope['"+a.globalScope._SymbolsMap[V]+"']"));if(""!==c)for(d="[",e=0;e<b.arguments.length;e++)0<e&&(d+=", "),d+=A(a,b.arguments[e]);else throw Error(k.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));}catch(sa){throw sa;}return"lang.callfunc("+c+","+(d+"]")+",runtimeCtx)";case "UnaryExpression":var L;
try{L="lang.unary("+A(a,b.argument)+",'"+b.operator+"')"}catch(sa){throw sa;}return L;case "BinaryExpression":var H;try{H="lang.binary("+A(a,b.left)+","+A(a,b.right)+",'"+b.operator+"')"}catch(sa){throw sa;}return H;case "LogicalExpression":var J;try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw Error(k.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type)throw Error(k.nodeErrorMessage(b.right,
"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===b.operator||"||"===b.operator)J="(lang.logicalCheck("+A(a,b.left)+") "+b.operator+" lang.logicalCheck("+A(a,b.right)+"))";else throw Error(k.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));}catch(sa){throw sa;}return J;case "ConditionalExpression":throw Error(k.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{c=[];for(d=0;d<b.elements.length;d++)"Literal"===b.elements[d].type?c.push(A(a,b.elements[d])):
c.push("lang.aCheck("+A(a,b.elements[d])+",'ArrayExpression')");f="["+c.join(",")+"]"}catch(sa){throw sa;}return f;case "ObjectExpression":c="lang.dictionary([";for(d=0;d<b.properties.length;d++){var g=b.properties[d],K="Identifier"===g.key.type?"'"+g.key.name+"'":A(a,g.key),P=A(a,g.value);0<d&&(c+=",");c+="lang.strCheck("+K+",'ObjectExpression'),lang.aCheck("+P+", 'ObjectExpression')"}return c+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(k.nodeErrorMessage(b,"RUNTIME",
"NOTSUPPORTED"));default:throw Error(k.nodeErrorMessage(b,"RUNTIME","UNREOGNISED"));}}catch(sa){throw sa;}}function F(a,b){var c=null,d="";if("MemberExpression"===b.argument.type)return c=A(a,b.argument.object),d=!0===b.argument.computed?A(a,b.argument.property):"'"+b.argument.property.name+"'","lang.memberupdate("+c+","+d+",'"+b.operator+"',"+b.prefix+")";c=b.argument.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lang.update(lscope, '"+c+"','"+b.operator+"',"+b.prefix+
")";if(void 0!==a.localScope._SymbolsMap[c])return"lang.update(lscope, '"+a.localScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")"}if(void 0!==a.globalScope[c])return"lang.update(gscope, '"+c+"','"+b.operator+"',"+b.prefix+")";if(void 0!==a.globalScope._SymbolsMap[c])return"lang.update(gscope, '"+a.globalScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")";throw Error("Variable not recognised");}function B(a,b){var c=A(a,b.right),d=null,e="";if("MemberExpression"===b.left.type)return d=A(a,
b.left.object),e=!0===b.left.computed?A(a,b.left.property):"'"+b.left.property.name+"'","lang.assignmember("+d+","+e+",'"+b.operator+"',"+c+");";d=b.left.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[d])return"lscope['"+d+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+d+"']); ";if(void 0!==a.localScope._SymbolsMap[d])return"lscope['"+a.localScope._SymbolsMap[d]+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+a.localScope._SymbolsMap[d]+"']); "}if(void 0!==a.globalScope[d])return"gscope['"+
d+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+d+"']); ";if(void 0!==a.globalScope._SymbolsMap[d])return"gscope['"+a.globalScope._SymbolsMap[d]+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+a.globalScope._SymbolsMap[d]+"']); ";throw Error("Variable not recognised");}function E(a,b){return"BlockStatement"===b.type?A(a,b):"ReturnStatement"===b.type?A(a,b):"BreakStatement"===b.type?A(a,b):"ContinueStatement"===b.type?A(a,b):"UpdateExpression"===b.type?"lastStatement \x3d "+A(a,b)+";":
"ExpressionStatement"===b.type?A(a,b):"ObjectExpression"===b.type?"lastStatement \x3d "+A(a,b)+";":A(a,b)}function C(a,b){for(var c="",d=0;d<b.body.length;d++)c="ReturnStatement"===b.body[d].type?c+(A(a,b.body[d])+" \n"):"BreakStatement"===b.body[d].type?c+(A(a,b.body[d])+" \n"):"ContinueStatement"===b.body[d].type?c+(A(a,b.body[d])+" \n"):"UpdateExpression"===b.body[d].type?c+("lastStatement \x3d "+A(a,b.body[d])+"; \n"):"ObjectExpression"===b.body[d].type?c+("lastStatement \x3d "+A(a,b.body[d])+
"; \n"):c+(A(a,b.body[d])+" \n");return c}function G(a,c){var d=null===c.init?null:A(a,c.init);d===b.voidOperation&&(d=null);c=c.id.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lscope['"+c+"']\x3d"+d+";";if(void 0!==a.localScope._SymbolsMap[c])return"lscope['"+a.localScope._SymbolsMap[c]+"']\x3d"+d+";";var e=R(c,a);a.localScope._SymbolsMap[c]=e;return"lscope['"+e+"']\x3d"+d+";"}if(void 0!==a.globalScope[c])return"gscope['"+c+"']\x3d"+d+";";if(void 0!==a.globalScope._SymbolsMap[c])return"gscope['"+
a.globalScope._SymbolsMap[c]+"']\x3d"+d+";";e=R(c,a);a.globalScope._SymbolsMap[c]=e;return"gscope['"+e+"']\x3d"+d+";"}function L(a,c,d){c=c.toLowerCase();switch(c){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return c=a.spatialReference._arcadeCacheId,void 0===c&&(d=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(d=!1),d&&(N++,c=a.spatialReference._arcadeCacheId=N)),a=new q({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),
void 0!==c&&(a._arcadeCacheId="SPREF"+c.toString()),a}switch(a.type){case "extent":switch(c){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=a[c],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(c){case "rings":return c=b.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===c&&(N++,c=N,b.isVersion4?a.cache._arcadeCacheId=c:a.setCacheValue("_arcadeCacheId",c)),a=new g(a.rings,a.spatialReference,
!0===a.hasZ,!0===a.hasM,c);case "type":return"Polygon"}break;case "point":switch(c){case "x":case "y":case "z":case "m":return void 0!==a[c]?a[c]:null;case "type":return"Point"}break;case "polyline":switch(c){case "paths":return c=b.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===c&&(N++,c=N,b.isVersion4?a.cache._arcadeCacheId=c:a.setCacheValue("_arcadeCacheId",c)),a=new g(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,c);case "type":return"Polyline"}break;case "multipoint":switch(c){case "points":return c=
b.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===c&&(N++,c=N,b.isVersion4?a.cache._arcadeCacheId=c:a.setCacheValue("_arcadeCacheId",c)),a=new r(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,c,1);case "type":return"Multipoint"}}throw Error(k.nodeErrorMessage(d,"RUNTIME","PROPERTYNOTFOUND"));}function U(a,b){try{var c=b.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lscope['"+c+"']";if(void 0!==a.localScope._SymbolsMap[c])return"lscope['"+
a.localScope._SymbolsMap[c]+"']"}if(void 0!==a.globalScope[c])return"gscope['"+c+"']";if(void 0!==a.globalScope._SymbolsMap[c])return"gscope['"+a.globalScope._SymbolsMap[c]+"']";throw Error(k.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(ia){throw ia;}}function P(a){return null===a?"":b.isArray(a)||b.isImmutableArray(a)?"Array":b.isDate(a)?"Date":b.isString(a)?"String":b.isBoolean(a)?"Boolean":b.isNumber(a)?"Number":a instanceof q?"Dictionary":a instanceof u?"Feature":a instanceof l?"Point":
a instanceof m?"Polygon":a instanceof e?"Polyline":a instanceof d?"Multipoint":a instanceof n?"Extent":b.isFunctionParameter(a)?"Function":a===b.voidOperation?"":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function H(a,c,d,e){try{if(b.equalityTest(c[d],e))return c[d+1];var f=c.length-d;return 1===f?c[d]:2===f?null:3===f?c[d+2]:H(a,c,d+2,e)}catch(pa){throw pa;}}function K(a,c,d,e){try{if(!0===e)return c[d+1];if(3===c.length-d)return c[d+2];var f=c[d+2];if(!1===b.isBoolean(f))throw Error("WHEN needs boolean test conditions");
return K(a,c,d+2,f)}catch(pa){throw pa;}}function J(a,b){var c=a.length,d=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var e=J(a.slice(0,d),b);a=J(a.slice(d,c),b);for(c=[];0<e.length||0<a.length;)0<e.length&&0<a.length?(d=b(e[0],a[0]),isNaN(d)&&(d=0),0>=d?(c.push(e[0]),e=e.slice(1)):(c.push(a[0]),a=a.slice(1))):0<e.length?(c.push(e[0]),e=e.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function R(a,b){b.symbols.symbolCounter++;return"_T"+b.symbols.symbolCounter.toString()}function M(a){a.symbols.symbolCounter++;
return"_Tvar"+a.symbols.symbolCounter.toString()}function ea(a,b,c){var d={};a||(a={});c||(c={});d._SymbolsMap={};d.textformatting=1;d.infinity=1;d.pi=1;for(var e in b)d[e]=1;for(e in c)d[e]=1;for(e in a)d[e]=1;return d}function I(a){console.log(a)}Object.defineProperty(f,"__esModule",{value:!0});var N=0,Y={};x.registerFunctions(Y,y);w.registerFunctions(Y,y);t.registerFunctions(Y,y);p.registerFunctions(Y,y);v.registerFunctions(Y,y);Y["typeof"]=function(a,c){return y(a,c,function(a,c,d){b.pcCheck(d,
1,1);a=P(d[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};Y.iif=function(a,c){try{return y(a,c,function(a,c,d){b.pcCheck(d,3,3);if(!1===b.isBoolean(d[0]))throw Error("IF Function must have a boolean test condition");return d[0]?d[1]:d[2]})}catch(la){throw la;}};Y.decode=function(a,b){try{return y(a,b,function(b,c,d){if(2>d.length)throw Error("Missing Parameters");if(2===d.length)return d[1];if(0===(d.length-1)%2)throw Error("Must have a default value result.");return H(a,
d,1,d[0])})}catch(la){throw la;}};Y.when=function(a,c){try{return y(a,c,function(c,d,e){if(3>e.length)throw Error("Missing Parameters");if(0===e.length%2)throw Error("Must have a default value result.");c=e[0];if(!1===b.isBoolean(c))throw Error("WHEN needs boolean test conditions");return K(a,e,0,c)})}catch(la){throw la;}};Y.top=function(a,c){return y(a,c,function(a,c,d){b.pcCheck(d,2,2);if(b.isArray(d[0]))return b.toNumber(d[1])>=d[0].length?d[0].slice(0):d[0].slice(0,b.toNumber(d[1]));if(b.isImmutableArray(d[0]))return b.toNumber(d[1])>=
d[0].length()?d[0].slice(0):d[0].slice(0,b.toNumber(d[1]));throw Error("Top cannot accept this parameter type");})};Y.first=function(a,c){return y(a,c,function(a,c,d){b.pcCheck(d,1,1);return b.isArray(d[0])?0===d[0].length?null:d[0][0]:b.isImmutableArray(d[0])?0===d[0].length()?null:d[0].get(0):null})};Y.sort=function(a,c){return y(a,c,function(a,c,d){b.pcCheck(d,1,2);c=d[0];b.isImmutableArray(c)&&(c=c.toArray());if(!1===b.isArray(c))throw Error("Illegal Argument");if(1<d.length){if(!1===b.isFunctionParameter(d[1]))throw Error("Illegal Argument");
c=J(c,function(b,c){return Z.callfunc(d[1],[b,c],a)})}else{if(0===c.length)return[];for(var e={},f=0;f<c.length;f++){var g=P(c[f]);""!==g&&(e[g]=!0)}if(!0===e.Array||!0===e.Dictionary||!0===e.Feature||!0===e.Point||!0===e.Polygon||!0===e.Polyline||!0===e.Multipoint||!0===e.Extent||!0===e.Function)return c.slice(0);var f=0,g="",h;for(h in e)f++,g=h;c=1<f||"String"===g?J(c,function(a,c){if(null===a||void 0===a||a===b.voidOperation)return null===c||void 0===c||c===b.voidOperation?0:1;if(null===c||void 0===
c||c===b.voidOperation)return-1;a=b.toString(a);c=b.toString(c);return a<c?-1:a===c?0:1}):"Number"===g?J(c,function(a,b){return a-b}):"Boolean"===g?J(c,function(a,b){return a===b?0:b?-1:1}):"Date"===g?J(c,function(a,b){return b-a}):c.slice(0)}return c})};for(var aa in Y)Y[aa]=new b.NativeFunction(Y[aa]);var S=function(){};S.prototype=Y;f.functionHelper={fixSpatialReference:b.fixSpatialReference,parseArguments:function(a,b){for(var c=[],d=0;d<b.arguments.length;d++)c.push(A(a,b.arguments[d]));return c},
standardFunction:y};f.executeScript=function(a,b,c){return a(b,c)};f.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return k.findFieldLiterals(a,b)};f.validateScript=function(a,b){return k.validateScript(a,b,"simple")};f.referencesMember=function(a,b){return k.referencesMember(a,b)};f.referencesFunction=function(a,b){return k.referencesFunction(a,b)};var Z={error:function(a,b,c){throw Error(k.nodeErrorMessage(a,b,c));},functionDepthchecker:function(a,b){return function(){b.depthCounte++;if(64<
b.depthCounter)throw Error("Exceeded maximum function depth");var c=a.apply(this,arguments);b.depthCounte--;return c}},aCheck:function(a,c){if(b.isFunctionParameter(a))throw Error(k.nodeErrorMessage({type:c},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return a===b.voidOperation?null:a},Dictionary:q,Feature:u,dictionary:function(a){for(var c={},d=0;d<a.length;d+=2){if(b.isFunctionParameter(a[d+1]))throw Error("Illegal Argument");if(!1===b.isString(a[d]))throw Error("Illegal Argument");c[a[d].toString()]=
a[d+1]===b.voidOperation?null:a[d+1]}a=new q(c);a.immutable=!1;return a},strCheck:function(a,c){if(!1===b.isString(a))throw Error("Illegal Argument");return a},unary:function(a,c){if(b.isBoolean(a)){if("!"===c)return!a;if("-"===c)return-1*b.toNumber(a);if("+"===c)return 1*b.toNumber(a);throw Error(k.nodeErrorMessage({type:"UnaryExpression"},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===c)return-1*b.toNumber(a);if("+"===c)return 1*b.toNumber(a);throw Error(k.nodeErrorMessage({type:"UnaryExpression"},
"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(a){if(!1===b.isBoolean(a))throw Error(k.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));return a},logical:function(a,c,d){if(b.isBoolean(a)&&b.isBoolean(c))switch(d){case "||":return a||c;case "\x26\x26":return a&&c;default:throw Error(k.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));}else throw Error(k.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));},binary:function(a,c,d){switch(d){case "\x3d\x3d":return b.equalityTest(a,
c);case "\x3d":return b.equalityTest(a,c);case "!\x3d":return!b.equalityTest(a,c);case "\x3c":return b.greaterThanLessThan(a,c,d);case "\x3e":return b.greaterThanLessThan(a,c,d);case "\x3c\x3d":return b.greaterThanLessThan(a,c,d);case "\x3e\x3d":return b.greaterThanLessThan(a,c,d);case "+":return b.isString(a)||b.isString(c)?b.toString(a)+b.toString(c):b.toNumber(a)+b.toNumber(c);case "-":return b.toNumber(a)-b.toNumber(c);case "*":return b.toNumber(a)*b.toNumber(c);case "/":return b.toNumber(a)/
b.toNumber(c);case "%":return b.toNumber(a)%b.toNumber(c);default:throw Error(k.nodeErrorMessage({type:"BinaryExpression"},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(a,c,d){switch(c){case "\x3d":return a===b.voidOperation?null:a;case "/\x3d":return b.toNumber(d)/b.toNumber(a);case "*\x3d":return b.toNumber(d)*b.toNumber(a);case "-\x3d":return b.toNumber(d)-b.toNumber(a);case "+\x3d":return b.isString(d)||b.isString(a)?b.toString(d)+b.toString(a):b.toNumber(d)+b.toNumber(a);case "%\x3d":return b.toNumber(d)%
b.toNumber(a);default:throw Error(k.nodeErrorMessage("AssignmentExpression","RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(a,c,d,e){var f=b.toNumber(a[c]);a[c]="++"===d?f+1:f-1;return!1===e?f:"++"===d?f+1:f-1},memberupdate:function(a,c,d,e){var f;if(b.isArray(a))if(b.isNumber(c)){0>c&&(c=a.length+c);if(0>c||c>=a.length)throw Error("Assignment outside of array bounds");f=b.toNumber(a[c]);a[c]="++"===d?f+1:f-1}else throw Error("Invalid Parameter");else if(a instanceof q){if(!1===b.isString(c))throw Error("Dictionary accessor must be a string");
if(!0===a.hasField(c))f=b.toNumber(a.field(c)),a.setField(c,"++"===d?f+1:f-1);else throw Error("Invalid Parameter");}else if(a instanceof u){if(!1===b.isString(c))throw Error("Feature accessor must be a string");if(!0===a.hasField(c))f=b.toNumber(a.field(c)),a.setField(c,"++"===d?f+1:f-1);else throw Error("Invalid Parameter");}else{if(b.isImmutableArray(a))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===e?f:"++"===d?f+1:f-1},assignmember:function(a,c,d,e){if(b.isArray(a))if(b.isNumber(c)){0>
c&&(c=a.length+c);if(0>c||c>a.length)throw Error("Assignment outside of array bounds");if(c===a.length&&"\x3d"!==d)throw Error("Invalid Parameter");a[c]=this.assign(e,d,a[c])}else throw Error("Invalid Parameter");else if(a instanceof q){if(!1===b.isString(c))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(c))a.setField(c,this.assign(e,d,a.field(c)));else{if("\x3d"!==d)throw Error("Invalid Parameter");a.setField(c,this.assign(e,d,null))}}else if(a instanceof u){if(!1===b.isString(c))throw Error("Feature accessor must be a string");
if(!0===a.hasField(c))a.setField(c,this.assign(e,d,a.field(c)));else{if("\x3d"!==d)throw Error("Invalid Parameter");a.setField(c,this.assign(e,d,null))}}else{if(b.isImmutableArray(a))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(a,c){if(null===a)throw Error(k.nodeErrorMessage("MemberExpression","RUNTIME","NOTFOUND"));if(a instanceof q||a instanceof u){if(b.isString(c))return a.field(c)}else if(a instanceof z){if(b.isString(c))return L(a,c,"MemberExpression")}else if(b.isArray(a)){if(b.isNumber(c)&&
isFinite(c)&&Math.floor(c)===c){0>c&&(c=a.length+c);if(c>=a.length||0>c)throw Error(k.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return a[c]}}else if(b.isString(a)){if(b.isNumber(c)&&isFinite(c)&&Math.floor(c)===c){0>c&&(c=a.length+c);if(c>=a.length||0>c)throw Error(k.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return a[c]}}else if(b.isImmutableArray(a)&&b.isNumber(c)&&isFinite(c)&&Math.floor(c)===c){0>c&&(c=a.length()+c);if(c>=a.length()||0>c)throw Error(k.nodeErrorMessage("MemberExpression",
"RUNTIME","OUTOFBOUNDS"));return a.get(c)}throw Error(k.nodeErrorMessage("MemberExpression","RUNTIME","INVALIDTYPE"));},callfunc:function(a,c,d){return a instanceof b.NativeFunction?a.fn(d,c):a instanceof b.SizzleFunction?a.fn.apply(this,c):a.apply(this,c)}};f.compileScript=function(a,d){void 0===d&&(d=null);null===d&&(d={vars:{},customfunctions:{}});d={globalScope:ea(d.vars,Y,d.customfunctions),localScope:null,console:I,symbols:{symbolCounter:0}};a=A(d,a.body[0].body);""===a&&(a="lc.voidOperation;");
d={lc:b,lang:Z,postProcess:function(a){a instanceof b.ReturnResult&&(a=a.value);a instanceof b.ImplicitResult&&(a=a.value);a===b.voidOperation&&(a=null);if(a===b.breakResult)throw Error("Cannot return BREAK");if(a===b.continueResult)throw Error("Cannot return CONTINUE");if(b.isFunctionParameter(a))throw Error("Cannot return FUNCTION");return a},prepare:function(a,b){b||(b=new c(102100));var d=a.vars,e=a.customfunctions,f=new S;d||(d={});e||(e={});var g=new q({newline:"\n",tab:"\t",singlequote:"'",
doublequote:'"',forwardslash:"/",backwardslash:"\\"});g.immutable=!1;f._SymbolsMap={textformatting:1,infinity:1,pi:1};f.textformatting=g;f.infinity=Number.POSITIVE_INFINITY;f.pi=Math.PI;for(var k in e)f[k]=e[k],f._SymbolsMap[k]=1;for(k in d)f._SymbolsMap[k]=1,f[k]=d[k]instanceof h?new u(d[k]):d[k];return{spatialReference:b,globalScope:f,localScope:null,console:a.console?a.console:I,symbols:{symbolCounter:0},depthCounter:1,applicationCache:void 0===a.applicationCache?null:a.applicationCache}}};return(new Function("context",
"spatialReference","var runtimeCtx\x3dthis.prepare(context, spatialReference);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+a+"\n return lastStatement; } \n return this.postProcess(mainBody());")).bind(d)}})},"esri/renderers/UniqueValueRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/lang ../core/urlUtils ../core/Logger ../core/Error ../core/arrayUtils ../portal/Portal ../symbols/WebStyleSymbol ../symbols/support/jsonUtils ../symbols/support/symbolUtils ./Renderer ./support/arcadeUtils ./support/diffUtils".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t,p){var v=d.getLogger("esri.renderers.UniqueValueRenderer");a=g=function(a){function d(c){c=a.call(this)||this;c._valueInfoMap={};c._isDefaultSymbolDerived=!1;c.type="uniqueValue";c.field=null;c.field2=null;c.field3=null;c.valueExpression=null;c.valueExpressionTitle=null;c.legendOptions=null;c.defaultLabel=null;c.fieldDelimiter=null;c.portal=null;c.styleOrigin=null;c.diff={uniqueValueInfos:function(a,c){if(a||c){if(!a||!c)return{type:"complete",oldValue:a,newValue:c};
for(var d=!1,e={type:"collection",added:[],removed:[],changed:[],unchanged:[]},f=function(f){var g=b.find(a,function(a){return a.value===c[f].value});g?p.diff(g,c[f])?e.changed.push({type:"complete",oldValue:g,newValue:c[f]}):e.unchanged.push({oldValue:g,newValue:c[f]}):e.added.push(c[f]);d=!0},g=0;g<c.length;g++)f(g);f=function(f){b.find(c,function(b){return b.value===a[f].value})||(e.removed.push(a[f]),d=!0)};for(g=0;g<a.length;g++)f(g);return d?e:void 0}}};c._set("uniqueValueInfos",[]);return c}
m(d,a);d.prototype.writeValueExpression=function(a,b,d,e){e&&"web-scene"===e.origin?a&&e.messages&&e.messages.push(new c("property:unsupported",this.declaredClass+".valueExpression is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:"valueExpression",context:e})):b.valueExpression=a};d.prototype.writeValueExpressionTitle=function(a,b,d,e){e&&"web-scene"===e.origin?a&&e.messages&&e.messages.push(new c("property:unsupported",this.declaredClass+
".valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:"valueExpressionTitle",context:e})):b.valueExpressionTitle=a};Object.defineProperty(d.prototype,"compiledFunc",{get:function(){return t.createFunction(this.valueExpression)},enumerable:!0,configurable:!0});d.prototype.readLegendOptions=function(a){return l.clone(a)};d.prototype.writeLegendOptions=function(a,b,d,e){e&&"web-scene"===e.origin?a&&e.messages&&e.messages.push(new c("property:unsupported",
this.declaredClass+".legendOptions is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:"legendOptions",context:e})):b.legendOptions=l.clone(a)};Object.defineProperty(d.prototype,"defaultSymbol",{set:function(a){this._isDefaultSymbolDerived=!1;this._set("defaultSymbol",a)},enumerable:!0,configurable:!0});d.prototype.readDefaultSymbol=function(a,b,c){return u.read(a,b,c)};d.prototype.writeDefaultSymbol=function(a,b,c,d){!this._isDefaultSymbolDerived&&
(a=u.write(a,{},d))&&(b.defaultSymbol=a)};d.prototype.readPortal=function(a,b,c){return c.portal||k.getDefault()};d.prototype.readStyleOrigin=function(a,b,c){if(b.styleName)return Object.freeze({styleName:b.styleName});if(b.styleUrl)return a=n.read(b.styleUrl,c),Object.freeze({styleUrl:a})};d.prototype.writeStyleOrigin=function(a,b,c,d){a.styleName?b.styleName=a.styleName:a.styleUrl&&(b.styleUrl=n.write(a.styleUrl,d))};Object.defineProperty(d.prototype,"uniqueValueInfos",{set:function(a){this.styleOrigin?
v.error("#uniqueValueInfos\x3d","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",a.slice(0)),this._updateValueInfoMap())},enumerable:!0,configurable:!0});d.prototype.readUniqueValueInfos=function(a,b,c){if(Array.isArray(a))return a.map(function(a){a=l.clone(a);a.symbol=u.read(a.symbol,b,c);return a})};d.prototype.writeUniqueValueInfos=function(a,b,c,d){this.styleOrigin||(b.uniqueValueInfos=(this.uniqueValueInfos||[]).map(function(a){a=
l.clone(a);a.symbol&&(a.symbol=u.write(a.symbol,{},d));a.value+="";return l.fixJson(a)}))};d.prototype.addUniqueValueInfo=function(a,b){this.styleOrigin?v.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(a="object"===typeof a?a:{value:a,symbol:b},this.uniqueValueInfos.push(a),this._valueInfoMap[a.value+""]=a)};d.prototype.removeUniqueValueInfo=function(a){if(this.styleOrigin)v.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");
else for(var b=0;b<this.uniqueValueInfos.length;b++)if(this.uniqueValueInfos[b].value+""===a+""){delete this._valueInfoMap[a];this.uniqueValueInfos.splice(b,1);break}};d.prototype.getUniqueValueInfo=function(a,b){var c=this.field,d=a.attributes;if(this.valueExpression)c=t.executeFunction(this.compiledFunc,t.createExecContext(a,t.getViewInfo(b)));else if(this.field2){a=this.field2;b=this.field3;var e=[];c&&e.push(d[c]);a&&e.push(d[a]);b&&e.push(d[b]);c=e.join(this.fieldDelimiter||"")}else c=c&&"function"===
typeof c?c(a):d[c];return this._valueInfoMap[c+""]};d.prototype.getSymbol=function(a,b){return(a=this.getUniqueValueInfo(a,b))&&a.symbol||this.defaultSymbol};d.prototype.clone=function(){var a=new g({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:l.clone(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:l.clone(this.visualVariables),legendOptions:l.clone(this.legendOptions),
authoringInfo:l.clone(this.authoringInfo)});this._isDefaultSymbolDerived&&(a._isDefaultSymbolDerived=!0);a._set("portal",this.portal);var b=l.clone(this.uniqueValueInfos);this.styleOrigin&&(a._set("styleOrigin",Object.freeze(l.clone(this.styleOrigin))),Object.freeze(b));a._set("uniqueValueInfos",b);a._updateValueInfoMap();return a};d.prototype.collectRequiredFields=function(a){this.inherited(arguments);[this.field,this.field2,this.field3].forEach(function(b){b&&(a[b]=!0)})};d.prototype.populateFromStyle=
function(){var a=this;return x.fetchStyle(this.styleOrigin,{portal:this.portal}).then(function(b){var c=[];a._valueInfoMap={};b&&b.data&&Array.isArray(b.data.items)&&b.data.items.forEach(function(d){var e=new q({styleUrl:b.styleUrl,styleName:b.styleName,portal:a.portal,name:d.name});a.defaultSymbol||d.name!==b.data.defaultItem||(a.defaultSymbol=e,a._isDefaultSymbolDerived=!0);e={value:d.name,symbol:e};c.push(e);a._valueInfoMap[d.name]=e});a._set("uniqueValueInfos",Object.freeze(c));!a.defaultSymbol&&
a.uniqueValueInfos.length&&(a.defaultSymbol=a.uniqueValueInfos[0].symbol,a._isDefaultSymbolDerived=!0);return a})};d.prototype._updateValueInfoMap=function(){var a=this;this._valueInfoMap={};this.uniqueValueInfos.forEach(function(b){return a._valueInfoMap[b.value+""]=b})};d.fromPortalStyle=function(a,b){var c=new g(b&&b.properties);c._set("styleOrigin",Object.freeze({styleName:a}));c._set("portal",b&&b.portal||k.getDefault());b=c.populateFromStyle();b.otherwise(function(b){v.error("#fromPortalStyle('"+
a+"'[, ...])","Failed to create unique value renderer from style name",b)});return b};d.fromStyleUrl=function(a,b){b=new g(b&&b.properties);b._set("styleOrigin",Object.freeze({styleUrl:a}));b=b.populateFromStyle();b.otherwise(function(b){v.error("#fromStyleUrl('"+a+"'[, ...])","Failed to create unique value renderer from style URL",b)});return b};return d}(e.declared(w));h([e.property()],a.prototype,"type",void 0);h([e.property({json:{read:{source:"field1"},write:{target:"field1"}}})],a.prototype,
"field",void 0);h([e.property({json:{write:!0}})],a.prototype,"field2",void 0);h([e.property({json:{write:!0}})],a.prototype,"field3",void 0);h([e.property({json:{write:!0}})],a.prototype,"valueExpression",void 0);h([e.writer("valueExpression")],a.prototype,"writeValueExpression",null);h([e.property({json:{write:!0}})],a.prototype,"valueExpressionTitle",void 0);h([e.writer("valueExpressionTitle")],a.prototype,"writeValueExpressionTitle",null);h([e.property({dependsOn:["valueExpression"]})],a.prototype,
"compiledFunc",null);h([e.property({json:{write:!0}})],a.prototype,"legendOptions",void 0);h([e.reader("legendOptions")],a.prototype,"readLegendOptions",null);h([e.writer("legendOptions")],a.prototype,"writeLegendOptions",null);h([e.property({json:{write:!0}})],a.prototype,"defaultLabel",void 0);h([e.property()],a.prototype,"defaultSymbol",null);h([e.reader("defaultSymbol")],a.prototype,"readDefaultSymbol",null);h([e.writer("defaultSymbol")],a.prototype,"writeDefaultSymbol",null);h([e.property({json:{write:!0}})],
a.prototype,"fieldDelimiter",void 0);h([e.property({type:k,readOnly:!0})],a.prototype,"portal",void 0);h([e.reader("portal",["styleName"])],a.prototype,"readPortal",null);h([e.property({readOnly:!0,json:{write:!0}})],a.prototype,"styleOrigin",void 0);h([e.reader("styleOrigin",["styleName","styleUrl"])],a.prototype,"readStyleOrigin",null);h([e.writer("styleOrigin")],a.prototype,"writeStyleOrigin",null);h([e.property()],a.prototype,"uniqueValueInfos",null);h([e.reader("uniqueValueInfos")],a.prototype,
"readUniqueValueInfos",null);h([e.writer("uniqueValueInfos")],a.prototype,"writeUniqueValueInfos",null);h([e.property({dependsOn:["field","field2","field3"],readOnly:!0})],a.prototype,"requiredFields",void 0);a=g=h([e.subclass("esri.renderers.UniqueValueRenderer")],a);var g;return a})},"esri/core/arrayUtils":function(){define([],function(){function a(a,f){return-1===a.indexOf(f)}function f(a,f,e){return!a.some(f.bind(null,e))}return{findIndex:function(a,f,e){for(var h=a.length,m,d=0;d<h;d++)if(m=
a[d],f.call(e,m,d,a))return d;return-1},find:function(a,f,e){for(var h=a.length,m,d=0;d<h;d++)if(m=a[d],f.call(e,m,d,a))return m},equals:function(a,f,e){if(!a&&!f)return!0;if(!a||!f||a.length!=f.length)return!1;if(e)for(var h=0;h<a.length;h++){if(!e(a[h],f[h]))return!1}else for(e=0;e<a.length;e++)if(a[e]!==f[e])return!1;return!0},difference:function(m,h,e){var l;e?(l=h.filter(f.bind(null,m,e)),m=m.filter(f.bind(null,h,e))):(l=h.filter(a.bind(null,m)),m=m.filter(a.bind(null,h)));return{added:l,removed:m}},
range:function(a,f){null==f&&(f=a,a=0);for(var e=Array(f-a),h=a;h<f;h++)e[h-a]=h;return e},constant:function(a,f){for(var e=Array(a),h=0;h<a;h++)e[h]=f;return e},binaryIndexOf:function(a,f,e){for(var h=a.length,m=0,d=h-1;m<d;){var c=m+Math.floor((d-m)/2);f>a[c]?m=c+1:d=c}d=a[m];return e?f>=a[h-1]?-1:d===f?m:m-1:d===f?m:-1}}})},"esri/symbols/support/symbolUtils":function(){define("require exports dojo/_base/lang ../Symbol3D ./jsonUtils ./Thumbnail ./StyleOrigin ../../core/urlUtils ../../core/promiseUtils ../../core/Error ../../core/sniff ../../request ../../portal/Portal ../../portal/PortalQueryParams".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u,x){function w(a,b){a=d.normalize(d.makeAbsolute(a,b));b=a.lastIndexOf("/");return-1===b?{url:a,base:a,filename:null}:{url:a,base:a.slice(0,b),filename:a.slice(b+1)}}function t(a,b){v(a,function(a){return d.makeAbsolute(a,b)})}function p(a,b){a.symbolLayers&&a.symbolLayers.forEach(b)}function v(a,b){p(a,function(a){(a=a.resource)&&a.href&&(a.href=b(a.href))})}function g(a,b){a=m.clone(a);t(a,b);return e.fromJSON(a)}function r(a,b){var c=w(a,b&&b.url&&b.url.path);
return B(c.url).then(function(b){return{reference:{styleUrl:a},data:b.data,base:c.base,filename:c.filename,styleUrl:a}})}function z(a,b){b=b.portal||u.getDefault();var d,e=b.url+" - "+a;return E[e]?c.resolve(E[e]):y(a,b).then(function(a){d=a;return a.fetchData()}).then(function(b){b={data:b,base:d.itemUrl,filename:"data",styleName:a};return E[e]=b})}function y(a,c){return c.load().then(function(){if(!c.stylesGroupQuery)throw new b("layer-templates:styles-group-query-missing","The styles group query needs to be configured in the portal to query styles");
var a=new x({disableExtraQuery:!0,query:c.stylesGroupQuery});return c.queryGroups(a)}).then(function(c){c=c.results;if(!c||!Array.isArray(c)||0===c.length)throw new b("layer-templates:styles-missing","The styles group does not contain any styles");c=c[0];var d=new x({disableExtraQuery:!0,query:'typekeywords:"'+a+'"'});return c.queryItems(d)}).then(function(c){c=c.results;if(!c||!Array.isArray(c)||0===c.length)throw new b("layer-templates:style-missing","The style '${styleName}' is not part of the styles group",
{styleName:a});return c[0].load()})}function A(a,d){return a.styleUrl?r(a.styleUrl,d):a.styleName?z(a.styleName,d):c.reject(new b("layer-templates:style-url-and-name-missing","Either styleUrl or styleName is required in layerDefinition"))}function F(a,e,f){for(var k=function(b){if(b.name===e){var c=w(b.webRef,a.base);return{value:B(c.url).then(function(k){if((k=g(k.data,c.base))&&k.isInstanceOf(h)){if(b.thumbnail)if(b.thumbnail.href){var m=d.makeAbsolute(b.thumbnail.href,a.base);k.thumbnail=new l.default({url:m})}else b.thumbnail.imageData&&
(k.thumbnail=new l.default({url:"data:image/png;base64,"+b.thumbnail.imageData}));a.styleUrl?k.styleOrigin=new n({portal:f.portal,styleUrl:a.styleUrl,name:e}):a.styleName&&(k.styleOrigin=new n({portal:f.portal,styleName:a.styleName,name:e}))}return k})}}},m=0,p=a.data.items;m<p.length;m++){var t=k(p[m]);if("object"===typeof t)return t.value}return c.reject(new b("layer-templates:symbol-name-not-found","The symbol name '${symbolName}' could not be found",{symbolName:e}))}function B(a){var b={responseType:"json"};
/\.json$/.test(a)||(b.query={f:"json"});return q(d.normalize(a),b)}Object.defineProperty(f,"__esModule",{value:!0});f.getIconHref=function(a,b){b=b.resource.href;return!k("esri-canvas-svg-support")&&a.styleOrigin&&C.test(b)?b.replace(C,"/resource/png/$1.png"):b};f.fetchStyleFromUrl=r;var E={};f.fetchStyle=A;f.fetchStyleSymbol=function(a,d){return a.name?A(a,d).then(function(b){return F(b,a.name,d)}):c.reject(new b("layer-templates:style-symbol-reference-name-missing","Missing name in style symbol reference"))};
f.fetchSymbolFromStyle=F;f.fetchSymbolSet=function(a){var d=a.data;if(!d.symbolSetUrl)return c.reject(new b("layer-templates:symbol-set-url-missing","Style does not provide symbol set URL",{style:d}));var e=w(d.symbolSetUrl,a.base);return B(e.url).then(function(a){a=a.data;if(0===a.length||!a[0].name)throw new b("layer-templates:symbol-set-missing-data","Invalid syntax or missing data in symbol set",{style:d});for(var c={},f=0;f<a.length;f++){var h=g(a[f],e.base);c[a[f].name]=h;a[f].name===d.defaultItem&&
(c.defaultSymbol=h)}c.defaultSymbol||(c.defaultSymbol=c[a[0].name]);return c})};f.createSymbol=function(a,b){return a?g(a,b&&b.url&&b.url.path):null};f.styleNameFromItem=function(a){var b=0;for(a=a.typeKeywords;b<a.length;b++){var c=a[b];if(/^Esri.*Style$/.test(c))return c}};f.isVolumetricSymbol=function(a){return(a=a&&a.symbolLayers)?a.some(function(a){a=a.type;return"object"===a||"path"===a||"extrude"===a}):!1};var C=/\/resource\/(.*?)\.svg$/})},"esri/renderers/support/diffUtils":function(){define("require exports dojo/_base/lang ../../core/Accessor ../../core/Collection ../../core/accessorSupport/utils".split(" "),
function(a,f,m,h,e,l){function n(a){return a instanceof e?Object.keys(a.items):a instanceof h?l.getProperties(a).keys():a?Object.keys(a):[]}function d(a,b){return a instanceof e?a.items[b]:a[b]}function c(a,b){return Array.isArray(a)&&Array.isArray(b)?a.length!==b.length:!1}function b(a){return a?a.declaredClass:null}function k(a,e){var f=a.diff;if(f&&m.isFunction(f))return f(a,e);var h=n(a),l=n(e);if(0!==h.length||0!==l.length){if(!h.length||!l.length||c(a,e))return{type:"complete",oldValue:a,newValue:e};
var v=l.filter(function(a){return-1===h.indexOf(a)}),g=h.filter(function(a){return-1===l.indexOf(a)}),v=h.filter(function(b){return-1<l.indexOf(b)&&d(a,b)!==d(e,b)}).concat(v,g).sort();if((g=b(a))&&-1<q.indexOf(g)&&v.length)return{type:"complete",oldValue:a,newValue:e};var r,u;for(u in v){var g=v[u],x=d(a,g),A=d(e,g),F=void 0;m.isFunction(x)||m.isFunction(A)||x===A||null==x&&null==A||!(F=f&&f[g]&&m.isFunction(f[g])?f[g](x,A):"object"===typeof x&&"object"===typeof A&&b(x)===b(A)?k(x,A):{type:"complete",
oldValue:x,newValue:A})||(r=r||{type:"partial",diff:{}},r.diff[g]=F)}return r}}Object.defineProperty(f,"__esModule",{value:!0});var q=["esri.Color","esri.portal.Portal"];f.diff=function(a,c){if(!m.isFunction(a)&&!m.isFunction(c)&&(a||c))return!a||!c||"object"===typeof a&&"object"===typeof a&&b(a)!==b(c)?{type:"complete",oldValue:a,newValue:c}:k(a,c)}})},"esri/renderers/support/jsonUtils":function(){define(["../../core/Warning","../SimpleRenderer","../UniqueValueRenderer","../ClassBreaksRenderer"],
function(a,f,m,h){var e={simple:f,uniqueValue:m,classBreaks:h},l={fromJson:function(a){try{throw Error("fromJson is deprecated, use fromJSON instead");}catch(d){console.warn(d.stack)}return l.fromJSON(a)},read:function(f,d,c){if(f&&(f.styleName||f.styleUrl)&&"uniqueValue"!==f.type)return c&&c.messages&&c.messages.push(new a("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+f.type+"'",{definition:f,context:c})),null;if(d=f?e[f.type]||null:null)return d=
new d,d.read(f,c),d;c&&c.messages&&f&&c.messages.push(new a("renderer:unsupported","Renderers of type '"+(f.type||"unknown")+"' are not supported",{definition:f,context:c}));return null},fromJSON:function(a){var d=a?e[a.type]||null:null;return d?d.fromJSON(a):null}};return l})},"esri/renderers/ClassBreaksRenderer":function(){define("../core/declare ../core/lang ../core/kebabDictionary ../core/Error dojo/_base/array dojo/_base/lang ../symbols/support/jsonUtils ./Renderer ./support/arcadeUtils".split(" "),
function(a,f,m,h,e,l,n,d,c){var b=m({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),k=m({esriClassifyNaturalBreaks:"natural-breaks",esriClassifyEqualInterval:"equal-interval",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyGeometricalInterval:"geometrical-interval"}),q=a(d,{declaredClass:"esri.renderers.ClassBreaksRenderer",properties:{backgroundFillSymbol:{value:null,json:{read:n.read,write:function(a,
b,c,d){if(a=n.write(a,{},d))b.backgroundFillSymbol=a}}},classBreakInfos:{set:function(a){a&&a.forEach(this._processCBInfo,this);this._set("classBreakInfos",a)},json:{read:{source:["classBreakInfos","minValue"],reader:function(a,b,c){var d=b.minValue;if(a&&Array.isArray(a)){var e=a[0]&&null!=a[0].classMaxValue;return a.map(function(a){a=f.clone(a);if(e){var g=a.classMaxValue;a.minValue=d;d=a.maxValue=g}a.symbol=n.read(a.symbol,b,c);return a})}return a}},write:function(a,b,c,d){a=this.classBreakInfos||
[];c=a[0]&&a[0].minValue;b.minValue=-Infinity===c?-Number.MAX_VALUE:c;b.classBreakInfos=e.map(a,function(a){a=f.clone(a);a.symbol&&(a.symbol=n.write(a.symbol,{},d));a.classMaxValue=Infinity===a.maxValue?Number.MAX_VALUE:a.maxValue;delete a.minValue;delete a.maxValue;return f.fixJson(a)})}}},classificationMethod:{value:null,json:{read:k.fromJSON,write:function(a,b){if(a=k.toJSON(a))b.classificationMethod=a}}},defaultLabel:{value:null,json:{write:!0}},defaultSymbol:{value:null,json:{read:n.read,write:function(a,
b,c,d){if(a=n.write(a,{},d))b.defaultSymbol=a}}},valueExpression:{value:null,json:{write:function(a,b,c,d){d&&"web-scene"===d.origin?a&&d.messages&&d.messages.push(new h("property:unsupported",this.declaredClass+".valueExpression is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:"valueExpression",context:d})):b.valueExpression=a}}},valueExpressionTitle:{value:null,json:{write:function(a,b,c,d){d&&"web-scene"===d.origin?a&&d.messages&&d.messages.push(new h("property:unsupported",
this.declaredClass+".valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:"valueExpressionTitle",context:d})):b.valueExpressionTitle=a}}},compiledFunc:{dependsOn:["valueExpression"],get:function(){return c.createFunction(this.valueExpression)}},legendOptions:{value:null,json:{read:function(a){return f.clone(a)},write:function(a,b,c,d){d&&"web-scene"===d.origin?a&&d.messages&&d.messages.push(new h("property:unsupported",
this.declaredClass+".legendOptions is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:"legendOptions",context:d})):b.legendOptions=f.clone(a)}}},field:{value:null,json:{write:!0}},isMaxInclusive:!0,normalizationField:{value:null,json:{write:!0}},normalizationTotal:{value:null,json:{write:!0}},normalizationType:{value:null,dependsOn:["normalizationField","normalizationTotal"],get:function(){var a=this._get("normalizationType"),b=!!this.normalizationField,
c=null!=this.normalizationTotal;if(b||c)a=b&&"field"||c&&"percent-of-total",b&&c&&console.warn("warning: both normalizationField and normalizationTotal are set!");else if("field"===a||"percent-of-total"===a)a=null;return a},json:{read:b.fromJSON,write:function(a,c){if(a=b.toJSON(a))c.normalizationType=a}}},requiredFields:{dependsOn:["field","normalizationField"]},type:"classBreaks"},constructor:function(){this.classBreakInfos=[]},addClassBreakInfo:function(a,b,c){a=l.isObject(a)?a:{minValue:a,maxValue:b,
symbol:c};this.classBreakInfos.push(a);this._processCBInfo(a)},removeClassBreakInfo:function(a,b){var c,d,e=this.classBreakInfos.length;for(d=0;d<e;d++)if(c=[this.classBreakInfos[d].minValue,this.classBreakInfos[d].maxValue],c[0]==a&&c[1]==b){this.classBreakInfos.splice(d,1);break}},getBreakIndex:function(a,b){var d=this.field,e=a.attributes,f=this.classBreakInfos.length,h=this.isMaxInclusive;if(this.valueExpression)a=c.executeFunction(this.compiledFunc,c.createExecContext(a,c.getViewInfo(b)));else if(l.isFunction(d))a=
d(a);else if(a=parseFloat(e[d]),b=this.normalizationType)if(d=parseFloat(this.normalizationTotal),e=parseFloat(e[this.normalizationField]),"log"===b)a=Math.log(a)*Math.LOG10E;else if("percent-of-total"===b&&!isNaN(d))a=a/d*100;else if("field"===b&&!isNaN(e)){if(isNaN(a)||isNaN(e))return-1;a/=e}if(null!=a&&!isNaN(a)&&"number"===typeof a)for(e=0;e<f;e++)if(b=[this.classBreakInfos[e].minValue,this.classBreakInfos[e].maxValue],b[0]<=a&&(h?a<=b[1]:a<b[1]))return e;return-1},getClassBreakInfo:function(a,
b){a=this.getBreakIndex(a,b);return-1!==a?this.classBreakInfos[a]:null},getSymbol:function(a,b){a=this.getBreakIndex(a,b);return-1<a?this.classBreakInfos[a].symbol:this.defaultSymbol},clone:function(){return new q({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),classificationMethod:this.classificationMethod,defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,
classBreakInfos:f.clone(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:f.clone(this.visualVariables),legendOptions:f.clone(this.legendOptions),authoringInfo:f.clone(this.authoringInfo)})},collectRequiredFields:function(a){this.inherited(arguments);[this.field,this.normalizationField].forEach(function(b){b&&(a[b]=!0)})},_processCBInfo:function(a){var b=
a.symbol;b&&!b.declaredClass&&(a.symbol=n.fromJSON(b))}});return q})},"esri/renderers/support/styleUtils":function(){define(["require","exports","../../core/promiseUtils","../../core/Warning"],function(a,f,m,h){Object.defineProperty(f,"__esModule",{value:!0});f.loadStyleRenderer=function(a,f){var e=a&&a.getAtOrigin&&a.getAtOrigin("renderer",f.origin);return e&&"uniqueValue"===e.type&&e.styleOrigin?e.populateFromStyle().otherwise(function(d){f&&f.messages&&f.messages.push(new h("renderer:style-reference",
"Failed to create unique value renderer from style reference: "+d.message,{error:d,context:f}));a.clear("renderer",f.origin)}).then(function(){return null}):m.resolve(null)}})},"esri/layers/support/fieldUtils":function(){define(["require","exports","dojo/_base/lang"],function(a,f,m){function h(a,f,d){if(a)for(var c=0;c<a.length;c++){var b=a[c],h=m.getObject(b,!1,f);(h=h&&"function"!==typeof h&&e(h,d))&&m.setObject(b,h.name,f)}}function e(a,e){if(null!=e){a=a.toLowerCase();for(var d=0;d<e.length;d++){var c=
e[d];if(c&&c.name.toLowerCase()===a)return c}}return null}Object.defineProperty(f,"__esModule",{value:!0});f.fixRendererFields=function(a,e){if(null!=a&&null!=e){var d=0;for(a=Array.isArray(a)?a:[a];d<a.length;d++){var c=a[d];h(f.rendererFields,c,e);if(c.visualVariables)for(var b=0,c=c.visualVariables;b<c.length;b++)h(f.visualVariableFields,c[b],e)}}};f.getField=e;f.rendererFields="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" ");
f.visualVariableFields=["field","normalizationField"]})},"esri/layers/support/FeatureType":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/JSONSupport ./InheritedDomain ./RangeDomain ./CodedValueDomain ./FeatureTemplate ../../core/lang".split(" "),function(a,f,m,h,e,l,n,d,c,b,k){a=function(a){function e(b){b=a.call(this,b)||this;b.id=null;b.name=null;b.domains=null;b.templates=null;return b}
m(e,a);e.prototype.readDomains=function(a){var b={},e;for(e in a)if(a.hasOwnProperty(e)){var f=a[e];switch(f.type){case "range":b[e]=d.fromJSON(f);break;case "codedValue":b[e]=c.fromJSON(f);break;case "inherited":b[e]=n.fromJSON(f)}}return b};e.prototype.writeDomains=function(a,b){var c={},d;for(d in a)a.hasOwnProperty(d)&&(c[d]=a[d]&&a[d].toJSON());k.fixJson(c);b.domains=c};e.prototype.readTemplates=function(a){return a&&a.map(function(a){return new b(a)})};e.prototype.writeTemplates=function(a,
b){b.templates=a&&a.map(function(a){return a.toJSON()})};return e}(e.declared(l));h([e.property({json:{write:!0}})],a.prototype,"id",void 0);h([e.property({json:{write:!0}})],a.prototype,"name",void 0);h([e.property({json:{write:!0}})],a.prototype,"domains",void 0);h([e.reader("domains")],a.prototype,"readDomains",null);h([e.writer("domains")],a.prototype,"writeDomains",null);h([e.property({json:{write:!0}})],a.prototype,"templates",void 0);h([e.reader("templates")],a.prototype,"readTemplates",null);
h([e.writer("templates")],a.prototype,"writeTemplates",null);return a=h([e.subclass("esri.layers.support.FeatureType")],a)})},"esri/layers/support/InheritedDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),function(a,f,m,h,e,l){a=function(a){function d(c){c=a.call(this,c)||this;c.type="inherited";return c}m(d,a);return d}(e.declared(l));h([e.property()],a.prototype,"type",
void 0);return a=h([e.subclass("esri.layers.support.InheritedDomain")],a)})},"esri/layers/support/FeatureTemplate":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang".split(" "),function(a,f,m,h,e,l,n,d){var c=n({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",
esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});a=function(a){function b(b){b=a.call(this,b)||this;
b.name=null;b.description=null;b.drawingTool=null;b.prototype=null;b.thumbnail=null;return b}m(b,a);b.prototype.writeDrawingTool=function(a,b){b.drawingTool=c.toJSON(a)};b.prototype.writePrototype=function(a,b){b.prototype=d.fixJson(d.clone(a),!0)};b.prototype.writeThumbnail=function(a,b){b.thumbnail=d.fixJson(d.clone(a))};return b}(e.declared(l));h([e.property({json:{write:!0}})],a.prototype,"name",void 0);h([e.property({json:{write:!0}})],a.prototype,"description",void 0);h([e.property({json:{read:c.fromJSON,
write:!0}})],a.prototype,"drawingTool",void 0);h([e.writer("drawingTool")],a.prototype,"writeDrawingTool",null);h([e.property({json:{write:!0}})],a.prototype,"prototype",void 0);h([e.writer("prototype")],a.prototype,"writePrototype",null);h([e.property({json:{write:!0}})],a.prototype,"thumbnail",void 0);h([e.writer("thumbnail")],a.prototype,"writeThumbnail",null);return a=h([e.subclass("esri.layers.support.FeatureTemplate")],a)})},"esri/layers/support/LabelClass":function(){define("../../core/JSONSupport ../../core/lang ../../core/kebabDictionary dojo/_base/lang dojo/number ../../PopupTemplate ../../widgets/Popup/PopupRendererViewModel ../../renderers/support/arcadeUtils ../../symbols/support/jsonUtils".split(" "),
function(a,f,m,h,e,l,n,d,c){var b=/__begin__/ig,k=/__end__/ig,q=/^__begin__/i,u=/__end__$/i,x=m({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",
esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",
esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"}),w=a.createSubclass({declaredClass:"esri.layers.support.LabelClass",properties:{name:{value:null,json:{write:!0}},labelExpression:{value:null,json:{write:!0}},labelExpressionInfo:{value:null,
json:{write:function(a,b,c,d){a=f.fixJson(a&&h.clone(a));b.labelExpressionInfo=this._processLabelExpressionInfo(a)}}},labelPlacement:{value:null,json:{read:function(a,b){return x.fromJSON(a)},write:function(a,b){if(a=x.toJSON(a))b.labelPlacement=a}}},maxScale:{value:0,json:{write:function(a,b){if(a||this.minScale)b.maxScale=a}}},minScale:{value:0,json:{write:function(a,b){if(a||this.maxScale)b.minScale=a}}},requiredFields:{readOnly:!0,dependsOn:["labelExpression","labelExpressionInfo","where"],get:function(){var a=
Object.create(null);this._collectRequiredFields(a);return Object.keys(a)}},symbol:{value:null,json:{read:c.read,write:function(a,b,d,e){b.symbol=c.write(a,{},e)}}},useCodedValues:{value:null,json:{write:!0}},where:{value:null,json:{write:!0}}},getLabelExpression:function(){var a={expression:"",type:"none"};this.labelExpressionInfo?this.labelExpressionInfo.value?(a.expression=this.labelExpressionInfo.value,a.type="conventional"):this.labelExpressionInfo.expression&&(a.expression=this.labelExpressionInfo.expression,
a.type="arcade"):this._validateLabelExpression(this.labelExpression)&&(a.expression=this._convertLabelExpression(this.labelExpression),a.type="conventional");return a},getOptions:function(){var a={},b=this.labelExpressionInfo;if(b){var c=b.expression;c&&!b.value&&(a.hasArcadeExpression=!0,a.compiledArcadeFunc=d.createFunction(c))}return a},clone:function(){return new w({labelExpression:this.labelExpression,labelExpressionInfo:h.clone(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,
minScale:this.minScale,name:this.name,symbol:this.symbol.clone(),where:this.where,useCodedValues:this.useCodedValues})},_collectRequiredFields:function(a){this._collectLabelExpressionRequiredFields(this.getLabelExpression(),a);this._collectWhereRequiredFields(this.where,a)},_validateLabelExpression:function(a){return/^(\s*\[[^\]]+\]\s*)+$/i.test(a)},_convertLabelExpression:function(a){return a.replace(/\[/g,"{").replace(/\]/g,"}")},_collectWhereRequiredFields:function(a,b){null!=a&&(a=a.split(" "),
3===a.length&&(b[a[0]]=!0),7===a.length&&(b[a[0]]=!0,b[a[4]]=!0))},_collectLabelExpressionRequiredFields:function(a,b){"arcade"===a.type?d.extractFieldNames(a.expression).forEach(function(a){b[a]=!0}):(a=a.expression.match(/{[^}]*}/g))&&a.forEach(function(a){b[a.slice(1,-1)]=!0})},_processLabelExpressionInfo:function(a){a&&a.value&&(a.expression=this._convertTemplatedStringToArcade(a.value));return a},_convertTemplatedStringToArcade:function(a){var c;a&&(c=h.replace(a,function(a,b){return'__begin__$feature["'+
b+'"]__end__'}),c=q.test(c)?c.replace(q,""):'"'+c,c=u.test(c)?c.replace(u,""):c+'"',c=c.replace(b,'" + ').replace(k,' + "'));return c}});w.evaluateWhere=function(a,b){var c=function(a,b,c){switch(b){case "\x3d":return a==c?!0:!1;case "\x3c\x3e":return a!=c?!0:!1;case "\x3e":return a>c?!0:!1;case "\x3e\x3d":return a>=c?!0:!1;case "\x3c":return a<c?!0:!1;case "\x3c\x3d":return a<=c?!0:!1}return!1};try{if(null==a)return!0;var d=a.split(" ");if(3===d.length)return c(b[d[0]],d[1],d[2]);if(7===d.length){var e=
c(b[d[0]],d[1],d[2]),f=d[3],h=c(b[d[4]],d[5],d[6]);switch(f){case "AND":return e&&h;case "OR":return e||h}}return!1}catch(A){console.log("Error.: can't parse \x3d "+a)}};w.buildLabelText=function(a,b,c,e){var f="";if(e&&e.hasArcadeExpression)e.compiledArcadeFunc&&(a=d.createExecContext(b),a=d.executeFunction(e.compiledArcadeFunc,a),null!=a&&(f=a.toString()));else var g=b&&b.attributes||{},f=a.replace(/{[^}]*}/g,function(a){return w.formatField(a.slice(1,-1),a,g,c,e)});return f};w.formatField=function(a,
b,c,d,k){var g=a.toLowerCase();for(a=0;a<d.length;a++)if(d[a].name.toLowerCase()===g){b=c[d[a].name];var m=d[a].domain;if(m&&h.isObject(m)){if("codedValue"==m.type)for(c=0;c<m.codedValues.length;c++)m.codedValues[c].code==b&&(b=m.codedValues[c].name);else"range"==m.type&&m.minValue<=b&&b<=m.maxValue&&(b=m.name);break}m=d[a].type;"date"==m?(m=k&&k.dateFormat||"shortDate",m=l.prototype._dateFormatKebabDict.fromJSON(m),(m="DateFormat"+n.prototype._dateFormats[m])&&(b=f.substitute({myKey:b},"{myKey:"+
m+"}"))):("integer"==m||"small-integer"==m||"long"==m||"double"==m)&&k&&k.numberFormat&&k.numberFormat.digitSeparator&&k.numberFormat.places&&(b=e.format(b,{places:k.numberFormat.places}))}return null==b?"":b};return w})},"esri/widgets/Popup/PopupRendererViewModel":function(){define("../Widget ../../core/Accessor ../../core/Error ../../core/HandleRegistry ../../core/lang ../../core/urlUtils ../../core/promiseUtils ../../core/watchUtils ../../request ../../tasks/support/StatisticDefinition ../../tasks/support/Query ../../tasks/QueryTask ../../renderers/support/arcadeUtils dojo/_base/lang dojo/promise/all dojo/i18n!dojo/cldr/nls/number dojox/html/entities".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t,p){var v=/\'/g,g=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/ig,r=/^\s*expression\//i,z=/(\{([^\{\r\n]+)\})/g,y={attachments:"attachments",fields:"fields",media:"media",text:"text"},A={"short-date":"(datePattern: 'M/d/y', selector: 'date')","short-date-le":"(datePattern: 'd/M/y', selector: 'date')","long-month-day-year":"(datePattern: 'MMMM d, y', selector: 'date')","day-short-month-year":"(datePattern: 'd MMM y', selector: 'date')","long-date":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",
"short-date-short-time":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-le-short-time":"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-short-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","short-date-le-short-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')","short-date-long-time":"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",
"short-date-le-long-time":"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-long-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')","short-date-le-long-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-year":"(datePattern: 'MMMM y', selector: 'date')","short-month-year":"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"};return f.createSubclass({declaredClass:"esri.widgets.Popup.PopupRendererViewModel",
properties:{content:{readOnly:!0},contentEnabled:!0,contentTypes:{readOnly:!0},formattedAttributes:{readOnly:!0},graphic:{},title:{readOnly:!0},waitingForContent:{readOnly:!0}},constructor:function(){this._handles=new h},initialize:function(){this._handles.add([d.init(this,"graphic",function(a){this._updateGraphic(a,this.contentEnabled)}.bind(this)),d.init(this,"contentEnabled",function(a){this._updateGraphic(this.graphic,a)}.bind(this))])},destroy:function(){this._handles.destroy();this._handles=
null;this._clearRelatedInfo();this._cancelPromises();this.graphic=null;this._set("title",null);this._set("content",null);this._set("waitingForContent",null)},content:null,contentEnabled:!0,contentTypes:y,formattedAttributes:null,graphic:null,title:"",waitingForContent:!1,_handles:null,_contentPromise:null,_contentElementPromises:null,_relatedRecordsPromise:null,_relatedRecordsQueryPromises:[],_relatedRecordsLayerPromises:[],_relatedLayersInfo:null,_relatedInfo:null,_dateFormats:A,_addValuesToHref:function(a,
b,c,d){b=this._trimString(b);return e.substitute(b&&0===b.indexOf("${")?c:d,a)},_cancelPromises:function(){this._contentElementPromises&&(this._contentElementPromises.forEach(function(a){a.cancel()},this),this._contentElementPromises=null);this._contentPromise&&(this._contentPromise.cancel(),this._contentPromise=null);this._relatedRecordsQueryPromises.forEach(function(a){a.cancel()});this._relatedRecordsQueryPromises.length=0;this._relatedRecordsLayerPromises.length&&(this._relatedRecordsLayerPromises.forEach(function(a){a.cancel()}),
this._relatedRecordsLayerPromises.length=0);this._relatedRecordsPromise&&(this._relatedRecordsPromise.cancel(),this._relatedRecordsPromise=null)},_clearRelatedInfo:function(){this._relatedInfo=this._relatedLayersInfo=null},_compileContent:function(b,c){var d=b.content;if(d&&(d.nodeName||d&&d&&"function"===typeof d.postMixInProperties&&"function"===typeof d.buildRendering&&"function"===typeof d.postCreate&&"function"===typeof d.startup||d&&d.isInstanceOf&&d.isInstanceOf(a)))return d;if("string"===
typeof d)return this._compileText(b,{type:y.text,text:d}).text;if(Array.isArray(d))return d.map(function(a,d){d=(d=c&&c[d])&&d.value;switch(a.type){case y.attachments:return this._proxyAttachments(a,d);case y.fields:return this._compileFields(b,a);case y.media:return this._compileMedia(b,a);case y.text:return this._compileText(b,a)}},this);if(d)try{throw new m(this.declaredClass+"::invalid content type.");}catch(C){console.warn(C.stack)}},_compileFields:function(a,b){b=x.clone(b);var c=(a=a.template)&&
a.expressionInfos;a=a&&x.clone(a.fieldInfos);var d=[];(b.fieldInfos||a).forEach(function(a){var b=a.fieldName.toLowerCase();if(!a.hasOwnProperty("visible")||a.visible)b=this._isExpressionField(b)?this._getExpressionInfo(c,b):null,a.label=b?b.title:a.label,d.push(a)},this);b.fieldInfos=d;return b},_compileMedia:function(a,b){b=x.clone(b);var c=b.mediaInfos,d=a.attributes,f=a.layer,g=this.formattedAttributes.global,h=a.substOptions,k,l;c&&(k=[],c.forEach(function(b){l=0;var c=b.value;switch(b.type){case "image":var m=
c.sourceURL,m=m&&this._trimString(e.substitute(d,this._fixTokens(m,f)));l=!!m;break;case "pie-chart":case "line-chart":case "column-chart":case "bar-chart":var p,m=c.normalizeField;c.fields=c.fields.map(function(a){return(p=this._getLayerFieldInfo(f,a))?p.name:a},this);m&&(p=this._getLayerFieldInfo(f,m),c.normalizeField=p?p.name:m);l=c.fields.some(function(a){return e.isDefined(d[a])||-1!==a.indexOf("relationships/")&&this._relatedInfo},this);break;default:return}if(l){b=x.clone(b);var c=b.value,
m=b.title?this._processFieldsInLinks(this._fixTokens(b.title,f),d):"",n=b.caption?this._processFieldsInLinks(this._fixTokens(b.caption,f),d):"";b.title=m?this._trimString(e.substitute(g,m,h)):"";b.caption=n?this._trimString(e.substitute(g,n,h)):"";if("image"===b.type)c.sourceURL=e.substitute(d,this._fixTokens(c.sourceURL,f)),c.linkURL&&(c.linkURL=this._trimString(e.substitute(d,this._fixTokens(c.linkURL,f))));else{var r,v=(m=a.template)&&m.fieldInfos;c.fields.forEach(function(a,b){if(-1!==a.indexOf("relationships/"))a=
this._getRelatedChartInfos(f,v,a,c,d,h),Array.isArray(a)?c.fields=a:c.fields[b]=a;else{var e=d[a],e=void 0===e?null:e;r=d[c.normalizeField]||0;e&&r&&(e/=r);var g=v&&this._getFieldInfo(v,a);c.fields[b]={y:e,tooltip:(g&&g.label||a)+":"+this._formatValue(e,{fieldInfos:v,fieldName:a,layer:f,substOptions:h,preventPlacesFormatting:!!r})}}},this)}k.push(b)}},this));b.mediaInfos=k;return b},_compileText:function(a,b){if((b=x.clone(b))&&b.text){var c=a.attributes,d=this.formattedAttributes.global,f=a.substOptions;
a=this._processFieldsInLinks(this._fixTokens(b.text,a.layer),c);b.text=this._trimString(e.substitute(d,a,f))}return b},_compileTitle:function(a){var b="",c=a.title,d=a.layer,f=a.attributes,g=a.substOptions,h=this.formattedAttributes.global;c&&("function"===typeof c&&(c=c.call(null,{graphic:a.graphic})),"string"===typeof c&&-1===c.indexOf("{relationships/")&&(a=this._processFieldsInLinks(this._fixTokens(c,d),f),b=this._trimString(e.substitute(h,a,g))));return b},_getExpressionInfo:function(a,b){if(this._isExpressionField(b)){b=
b.replace(r,"");b=b.toLowerCase();var c;a.some(function(a){a.name.toLowerCase()===b&&(c=a);return!!c});return c}},_createGraphicInfo:function(a,b){var c=a.getEffectivePopupTemplate(),d=c&&c.title,e=c&&c.content,f=a.layer,g=f&&f._getDateOpts&&f._getDateOpts().properties,h=x.clone(a.attributes)||{};return{graphic:a,template:c,title:d,content:e,contentEnabled:b,layer:f,attributes:h,properties:g,substOptions:{dateFormat:{properties:g,formatter:"DateFormat"+A["short-date-short-time"]}}}},_fixTokens:function(a,
b){return a.replace(z,function(a,c,d){return(a=this._getLayerFieldInfo(b,d))?"{"+a.name+"}":c}.bind(this))},_encodeAttributes:function(a){var b=x.clone(a)||{};Object.keys(b).forEach(function(a){var c=b[a];"string"===typeof c&&(c=encodeURIComponent(c).replace(v,"\x26apos;"),b[a]=c)});return b},_formatAttributesToFieldInfos:function(a,b,c,d,e){a.forEach(function(f){var g=f.fieldName,h=this._getLayerFieldInfo(b,g);h&&(g=f.fieldName=h.name);e[g]=this._formatValue(e[g],{fieldInfos:a,fieldName:g,layer:b,
substOptions:c});d&&f.format&&f.format.dateFormat&&(f=d.indexOf(g),-1<f&&d.splice(f,1))},this)},_formatAttributes:function(a,b,c,d,f,g,h,k){var l=x.clone(f);h&&h.forEach(function(a){var b="expression/"+a.name;a=k[a.name];a=u.executeFunction(a&&a.compiledFunc,u.createExecContext(g));"string"===typeof a&&(a=p.encode(a));l[b]=a});this._relatedInfo&&Object.keys(this._relatedInfo).forEach(function(a){var b=this._relatedInfo[a];a=this._relatedLayersInfo[a];b&&(b.relatedFeatures.forEach(this._relatedFeaturesAttributes.bind(this,
a,f,l)),b.relatedStatsFeatures.forEach(this._relatedStatsAttributes.bind(this,a,f,l)))},this);a&&this._formatAttributesToFieldInfos(a,b,c,d,l);if(b){var m=b.typeIdField;Object.keys(f).forEach(function(a){if(-1===a.indexOf("relationships/")){var c=f[a];if(e.isDefined(c)){var d=this._getDomainName(b,g,a,c);e.isDefined(d)?l[a]=d:a===m&&(c=this._getTypeName(b,g,c),e.isDefined(c)&&(l[a]=c))}}},this)}return l},_formatValue:function(a,b){var c=b.fieldInfos,d=b.fieldName,f=b.substOptions,c=c&&this._getFieldInfo(c,
d),g=x.clone(c),c=b.preventPlacesFormatting;(b=this._getLayerFieldInfo(b.layer,d))&&"date"===b.type&&(b=g.format||{},b.dateFormat=b.dateFormat||"short-date-short-time",g.format=b);b=g&&g.format;d="number"===typeof a&&f.dateFormat.properties&&-1===f.dateFormat.properties.indexOf(d)&&(!b||!b.dateFormat);if(!e.isDefined(a)||!g||!e.isDefined(b))return d?this._forceLTR(a):a;var h="",k=[],g=b.hasOwnProperty("places")||b.hasOwnProperty("digitSeparator"),l=b.hasOwnProperty("digitSeparator")?b.digitSeparator:
!0;if(g)h="NumberFormat",e.isDefined(b.places)&&(!c||0<b.places)&&(k.push("places: "+Number(b.places)),h+="("+k.join(",")+")");else if(b.dateFormat)h="DateFormat"+A[b.dateFormat]||A["short-date-short-time"];else return d?this._forceLTR(a):a;a=e.substitute({myKey:a},"{myKey:"+h+"}",f)||"";g&&!l&&t.group&&(a=a.replace(new RegExp("\\"+t.group,"g"),""));return d?this._forceLTR(a):a},_forceLTR:function(a){return"\x26lrm;"+a},_getDomainName:function(a,b,c,d){return(a=a.getDomain&&a.getDomain(c,{feature:b}))&&
a.codedValues?a.getName(d):null},_getFieldInfo:function(a,b){b=b.toLowerCase();for(var c,d=0;d<a.length;d++){var e=a[d];if(e.fieldName&&e.fieldName.toLowerCase()===b){c=e;break}}return c},_getLayerFieldInfo:function(a,b){return b&&a&&a.getField?a.getField(b):null},_getTypeName:function(a,b){return(a=a.getType&&a.getType(b))&&a.name},_processFieldsInLinks:function(a,b){var c=this._encodeAttributes(b);a&&(a=a.replace(g,function(a,d){return this._addValuesToHref(a,d,b,c)}.bind(this)));return a},_proxyAttachments:function(a,
b){a=x.clone(a);b&&!(b instanceof m)&&b.attachmentInfos&&b.attachmentInfos.length&&(b=b.attachmentInfos.map(function(a){a.url=l.addProxy(a.url);return a},this),a.attachmentInfos=b);return a},_queryAttachments:function(a){var b=a.layer;if(!b)return n.resolve();"scene"===b.type&&b.companionFeatureLayer&&(b=b.companionFeatureLayer);var c=a.attributes;a=b&&b.objectIdField;c=c&&a&&c[a];if(a&&b.get("capabilities.data.supportsAttachment")&&c)return this._queryAttachmentInfos(b,c)},_queryAttachmentInfos:function(a,
b){var d=a.url+"/"+a.layerId+"/"+b+"/attachments",e=a.token||"";return c(d,{query:{f:"json",token:e},callbackParamName:"callback"}).then(function(a){a=a.data;a.attachmentInfos.forEach(function(a){a.url=d+"/"+a.id;e&&(a.url+="?token\x3d"+e);a.objectId=b});return a})},_queryContentElements:function(a){var b=a.content;if(!Array.isArray(b))return n.resolve();var c=[],d={};b.forEach(function(b,e){b.type===y.attachments&&(b=this._queryAttachments(a))&&(d[e]=b,c.push(b))},this);this._contentElementPromises=
c;return 0===c.length?n.resolve():n.eachAlways(d).always(function(a){this._contentElementPromises=null;return a}.bind(this))},_trimString:function(a){return(a||"").trim()},_getContent:function(a){var b=a.template,b=b&&b.content;"function"===typeof b&&(b=b.call(null,{graphic:a.graphic}));return b&&"function"===typeof b.then?b:n.resolve(b)},_updateContent:function(a){if(!a.contentEnabled)return n.resolve();var b=this._getContent(a).then(function(b){a.content=b;return this._queryContentElements(a)}.bind(this)).then(function(b){this._set("content",
this._compileContent(a,b))}.bind(this)).otherwise(function(a){console.log(this.declaredClass+"::error loading template",a)}.bind(this)).then(function(){this._contentPromise=null}.bind(this));return this._contentPromise=b},_isExpressionField:function(a){return r.test(a)},_compileExpressions:function(a){if(a){var b={};a.forEach(function(a){b[a.name]={compiledFunc:u.createFunction(a.expression)}});return b}},_createFormattedAttributes:function(a){var b=a.graphic,c=a.attributes,d=a.layer,e=a.template,
f=e&&e.fieldInfos,g=e&&e.expressionInfos,h=this._compileExpressions(g),k=a.substOptions,l=a.properties,m={global:this._formatAttributes(f,d,k,l,c,b,g,h),content:[]};a=e&&e.content;Array.isArray(a)&&a.forEach(function(a,e){a.type===y.fields&&a.fieldInfos&&(m.content[e]=this._formatAttributes(a.fieldInfos,d,k,l,c,b,g,h))},this);return m},_queryGraphicInfo:function(a,b){var c=this._createGraphicInfo(a,b);return this._checkForRelatedRecords(c).then(function(){this._set("formattedAttributes",this._createFormattedAttributes(c));
this._set("title",this._compileTitle(c));return this._updateContent(c)}.bind(this))},_updateGraphic:function(a,b){this._handles&&(this._clearRelatedInfo(),this._cancelPromises(),this._set("title",""),this._set("content",null),this._set("formattedAttributes",null),this._set("waitingForContent",!1),a&&(this._set("waitingForContent",!0),this._relatedRecordsPromise=this._queryGraphicInfo(a,b).always(function(){this._relatedRecordsPromise=null;this._relatedRecordsLayerPromises.length=0;this._relatedRecordsQueryPromises.length=
0;this._set("waitingForContent",!1)}.bind(this))))},_getAllFieldInfos:function(a){var b=[],c=a.template,d=c&&c.fieldInfos;a=a.contentEnabled;d&&(b=b.concat(d));a&&(c=c&&c.content,Array.isArray(c)&&c.forEach(function(a){b=b.concat(a&&a.fieldInfos)},this));return b},_checkForRelatedRecords:function(a){var b=this._getAllFieldInfos(a).filter(function(a){return a&&a.fieldName&&-1!==a.fieldName.indexOf("relationships/")},this);return a.layer&&b&&0<b.length?this._getRelatedRecords({graphic:a.graphic,fieldsInfo:b}):
n.resolve()},_relatedFeaturesAttributes:function(a,b,c,d){Object.keys(d.attributes).forEach(function(e){if("esriRelCardinalityOneToOne"===a.relation.cardinality){var f=this._toRelatedFieldName([a.relation.id,e]);b[f]=c[f]=d.attributes[e]}},this)},_relatedStatsAttributes:function(a,b,c,d){Object.keys(d.attributes).forEach(function(e){var f=this._toRelatedFieldName([a.relation.id,e]);b[f]=c[f]=d.attributes[e]},this)},_getRelatedChartInfos:function(a,b,c,d,e,f){var g,h,k,l,m,p;g=[];p=this._fromRelatedFieldName(c);
m=p[0];h=this._relatedInfo[m];m=this._relatedLayersInfo[m];h&&h.relatedFeatures.forEach(function(h){var m=h.attributes,n;Object.keys(m).forEach(function(h){if(h===p[1]){n={};l=m[h];d.normalizeField&&(k=-1!==d.normalizeField.indexOf("relationships/")?m[this._fromRelatedFieldName(d.normalizeField)[1]]:e[d.normalizeField]);l&&k&&(l/=k);if(d.tooltipField)if(-1!==d.tooltipField.indexOf("relationships/"))h=this._fromRelatedFieldName(d.tooltipField)[1],h=m[h],n.tooltip=h+": "+this._formatValue(l,{fieldInfos:b,
fieldName:h,layer:a,substOptions:f,preventPlacesFormatting:!!k});else{if(h=this._getLayerFieldInfo(a,c))c=h.name;n.tooltip=c+": "+this._formatValue(l,{fieldInfos:b,fieldName:d.tooltipField,layer:a,substOptions:f,preventPlacesFormatting:!!k})}else n.tooltip=l;n.y=l;g.push(n)}},this)},this);return"esriRelCardinalityOneToMany"===m.relation.cardinality||"esriRelCardinalityManyToMany"===m.relation.cardinality?g:g[0]},_getRelatedRecords:function(a){var b=a.graphic;return this._relatedLayersInfo?this._queryRelatedLayers(b).then(function(a){this._setRelatedRecords(a);
return a}.bind(this)):this._getRelatedLayersInfo(a).then(function(a){Object.keys(a).forEach(function(b){a[b]&&(this._relatedLayersInfo[b].relatedLayerInfo=a[b].data)},this);return this._queryRelatedLayers(b).then(function(a){this._setRelatedRecords(a);return a}.bind(this))}.bind(this))},_getRelatedLayersInfo:function(a){var d=a.fieldsInfo,e,f={};e=a.graphic.layer;this._relatedLayersInfo||(this._relatedLayersInfo={});d.forEach(function(a){var c,d,f;c=this._fromRelatedFieldName(a.fieldName);d=c[0];
c=c[1];if(d){if(!this._relatedLayersInfo[d]){var g=e&&e.relationships;g&&g.some(function(a){if(a.id==d)return f=a,!0});f&&(this._relatedLayersInfo[d]={relation:f,relatedFields:[],outStatistics:[]})}this._relatedLayersInfo[d]&&(this._relatedLayersInfo[d].relatedFields.push(c),a.statisticType&&(a=new b({statisticType:a.statisticType,onStatisticField:c,outStatisticFieldName:c}),this._relatedLayersInfo[d].outStatistics.push(a)))}},this);Object.keys(this._relatedLayersInfo).forEach(function(a){var b;this._relatedLayersInfo[a]&&
(b=this._relatedLayersInfo[a].relation,b=e.url+"/"+b.relatedTableId,this._relatedLayersInfo[a].relatedLayerUrl=b,f[a]=c(b,{query:{f:"json"},callbackParamName:"callback"}))},this);Object.keys(f).forEach(function(a){this._relatedRecordsLayerPromises.push(f[a])},this);return w(f)},_queryRelatedLayers:function(a){var b={};Object.keys(this._relatedLayersInfo).forEach(function(c){b[c]=this._queryRelatedLayer({graphic:a,relatedInfo:this._relatedLayersInfo[c]})},this);return w(b)},_queryRelatedLayer:function(a){var b,
c,d,e,f,g,h,l,m;b=a.graphic;c=b.layer.layerId;h=a.relatedInfo;a=h.relatedLayerInfo;l=h.relatedLayerUrl;m=h.relation;a&&a.relationships&&a.relationships.some(function(a){if(a.relatedTableId===parseInt(c,10))return d=a,!0});d&&(a.fields.some(function(a){if(a.name===d.keyField)return e=-1!==["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"].indexOf(a.type)?"number":"string",!0}),f="string"===e?d.keyField+"\x3d'"+b.attributes[m.keyField]+"'":d.keyField+"\x3d"+
b.attributes[m.keyField],f=new k({where:f,outFields:h.relatedFields}),h.outStatistics&&0<h.outStatistics.length&&a.supportsStatistics&&(g=new k({where:f.where,outFields:f.outFields,outStatistics:h.outStatistics})),a=new q({url:l}),f=[a.execute(f)],g&&f.push(a.execute(g)));this._relatedRecordsQueryPromises=this._relatedRecordsQueryPromises.concat(f);return w(f)},_setRelatedRecords:function(a){this._relatedInfo=[];Object.keys(a).forEach(function(b){if(a[b]){var c=a[b];this._relatedInfo[b]={relatedFeatures:c[0].features};
e.isDefined(c[1])&&(this._relatedInfo[b].relatedStatsFeatures=c[1].features)}},this)},_fromRelatedFieldName:function(a){return-1!==a.indexOf("relationships/")?a.split("/").slice(1):[]},_toRelatedFieldName:function(a){return a&&0<a.length?"relationships/"+a[0]+"/"+a[1]:""}})})},"esri/widgets/Widget":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Accessor ../core/Evented ../core/HandleRegistry ../core/Logger ../core/watchUtils dojo/_base/lang dojo/dom ./libs/maquette/maquette ../core/Collection".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u,x){var w=c.getLogger("esri.widgets.Widget"),t=0;a=function(a){function c(b,c){b=a.call(this)||this;b._attached=!1;b.className="";b.destroyed=!1;b.domNode=null;b.visible=!0;b._projector=u.createProjector({});b._handles=new d;b.render=b.render.bind(b);return b}m(c,a);c.prototype.normalizeCtorArgs=function(a,b){a=k.mixin({},a);b&&(a.container=b);return a};c.prototype.initialize=function(){var a=this;this._handles.add(this._renderableProps.map(function(c){return b.init(a,
c,function(a,b){var d=this;x.isCollection(b)&&this._handles.remove(this.declaredClass+":"+c+"-collection-change-event-listener");x.isCollection(a)&&(a=a.on("change",function(){return d.scheduleRender()}),this._handles.add(a,this.declaredClass+":"+c+"-collection-change-event-listener"));this.scheduleRender()})}));this._delegatedEventNames.length&&this._handles.add(b.init(this,"viewModel",function(){a._get("viewModel")&&a._handles.remove("delegated-events");a._delegatedEventNames.map(function(b){return a.viewModel.on(b,
function(c){a.emit(b,c)})})}),"delegated-events");this.postInitialize();this._handles.add(b.whenOnce(this,"container",function(b){return a._attach(b)}))};c.prototype.postInitialize=function(){};c.prototype.destroy=function(){this.destroyed||(this.viewModel&&this.viewModel.destroy(),this._detach(this.container),this._handles.destroy(),this._set("destroyed",!0))};c.prototype.startup=function(){w.warn("Widget.startup() is deprecated and no longer needed")};Object.defineProperty(c.prototype,"container",
{set:function(a){this._get("container")||this._set("container",a)},enumerable:!0,configurable:!0});c.prototype.castContainer=function(a){return q.byId(a)};Object.defineProperty(c.prototype,"id",{get:function(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+t++},set:function(a){a&&this._set("id",a)},enumerable:!0,configurable:!0});c.prototype.scheduleRender=function(){this._projector.scheduleRender()};c.prototype.on=function(a,b){var c=this.inherited(arguments);
this._handles.add(c);return c};c.prototype.own=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments));this._handles.add(a)};c.prototype.renderNow=function(){this._projector.renderNow()};c.prototype._attach=function(a){a&&(this._projector.merge(a,this.render),this._attached=!0)};c.prototype._detach=function(a){a&&this._attached&&(this._projector.detach(this.render),a.parentNode&&a.parentNode.removeChild(a),this._attached=!1)};return c}(e.declared(l,n));h([e.shared([])],a.prototype,
"_renderableProps",void 0);h([e.shared([])],a.prototype,"_delegatedEventNames",void 0);h([e.property({value:null})],a.prototype,"container",null);h([e.cast("container")],a.prototype,"castContainer",null);h([e.property({readOnly:!0})],a.prototype,"destroyed",void 0);h([e.property({aliasOf:"container"})],a.prototype,"domNode",void 0);h([e.property({dependsOn:["container"]})],a.prototype,"id",null);h([e.property()],a.prototype,"viewModel",void 0);h([e.property()],a.prototype,"visible",void 0);return a=
h([e.subclass("esri.widgets.Widget")],a)})},"esri/widgets/libs/maquette/maquette":function(){(function(a,f){"function"===typeof define&&define.amd?define(["exports"],f):"object"===typeof exports&&"string"!==typeof exports.nodeName?f(exports):f(a.maquette={})})(this,function(a){var f=[],m=function(a,b){var c={};Object.keys(a).forEach(function(b){c[b]=a[b]});b&&Object.keys(b).forEach(function(a){c[a]=b[a]});return c},h=function(a,b){return a.vnodeSelector!==b.vnodeSelector?!1:a.properties&&b.properties?
a.properties.key!==b.properties.key?!1:a.properties.bind===b.properties.bind:!a.properties&&!b.properties},e=function(a){return{vnodeSelector:"",properties:void 0,children:void 0,text:a.toString(),domNode:null}},l=function(a,b,c){for(var d=0,f=b.length;d<f;d++){var g=b[d];Array.isArray(g)?l(a,g,c):null!==g&&void 0!==g&&(g.hasOwnProperty("vnodeSelector")||(g=e(g)),c.push(g))}},n=function(){throw Error("Provide a transitions object to the projectionOptions to do animations");},d={namespace:void 0,eventHandlerInterceptor:void 0,
styleApplyer:function(a,b,c){a.style[b]=c},transitions:{enter:n,exit:n}},c=function(a){if("string"!==typeof a)throw Error("Style values must be strings");},b=function(a,b,d){if(b)for(var e=d.eventHandlerInterceptor,f=Object.keys(b),g=f.length,h=function(g){g=f[g];var h=b[g];if("className"===g)throw Error('Property "className" is not supported, use "class".');if("class"===g)h.split(/\s+/).forEach(function(b){return a.classList.add(b)});else if("classes"===g){var k=Object.keys(h),l=k.length;for(g=0;g<
l;g++){var m=k[g];h[m]&&a.classList.add(m)}}else if("styles"===g)for(k=Object.keys(h),l=k.length,g=0;g<l;g++){var m=k[g],p=h[m];p&&(c(p),d.styleApplyer(a,m,p))}else"key"!==g&&null!==h&&void 0!==h&&(k=typeof h,"function"===k?0===g.lastIndexOf("on",0)&&(e&&(h=e(g,h,a,b)),"oninput"===g&&function(){var a=h;h=function(b){b.target["oninput-value"]=b.target.value;a.apply(this,[b])}}(),a[g]=h):"string"===k&&"value"!==g&&"innerHTML"!==g?"http://www.w3.org/2000/svg"===d.namespace&&"href"===g?a.setAttributeNS("http://www.w3.org/1999/xlink",
g,h):a.setAttribute(g,h):a[g]=h)},k=0;k<g;k++)h(k)},k=function(a,b){var c=a.domNode;if(a.properties){var d=a.properties.exitAnimation;if(d){c.style.pointerEvents="none";var e=function(){c.parentNode&&c.parentNode.removeChild(c)};"function"===typeof d?d(c,e,a.properties):b.exit(a.domNode,a.properties,d,e);return}}c.parentNode&&c.parentNode.removeChild(c)},q=function(a,b,c,d){var e=a[b];if(""!==e.vnodeSelector){var f=e.properties;if(!(f&&(void 0===f.key?f.bind:f.key)))for(f=0;f<a.length;f++)if(f!==
b&&h(a[f],e)){if("added"===d)throw Error(c.vnodeSelector+" had a "+e.vnodeSelector+" child added, but there is now more than one. You must add unique key properties to make them distinguishable.");throw Error(c.vnodeSelector+" had a "+e.vnodeSelector+" child removed, but there were more than one. You must add unique key properties to make them distinguishable.");}}},u,x,w=function(a,c,d){var e=c.children;if(e)for(var f=0;f<e.length;f++)u(e[f],a,void 0,d);c.text&&(a.textContent=c.text);b(a,c.properties,
d);c.properties&&c.properties.afterCreate&&c.properties.afterCreate.apply(c.properties.bind||c.properties,[a,d,c.vnodeSelector,c.properties,c.children])};u=function(a,b,c,d){var e,f,g,h=0,k=a.vnodeSelector;if(""===k)e=a.domNode=document.createTextNode(a.text),void 0!==c?b.insertBefore(e,c):b.appendChild(e);else{for(f=0;f<=k.length;++f)if(g=k.charAt(f),f===k.length||"."===g||"#"===g)g=k.charAt(h-1),h=k.slice(h,f),"."===g?e.classList.add(h):"#"===g?e.id=h:("svg"===h&&(d=m(d,{namespace:"http://www.w3.org/2000/svg"})),
void 0!==d.namespace?e=a.domNode=document.createElementNS(d.namespace,h):(e=a.domNode=document.createElement(h),"input"===h&&a.properties&&void 0!==a.properties.type&&e.setAttribute("type",a.properties.type)),void 0!==c?b.insertBefore(e,c):b.appendChild(e)),h=f+1;w(e,a,d)}};x=function(a,b,d){var e=a.domNode;if(a===b)return!1;var g=!1;if(""===b.vnodeSelector){if(b.text!==a.text)return a=document.createTextNode(b.text),e.parentNode.replaceChild(a,e),b.domNode=a,!0}else{0===b.vnodeSelector.lastIndexOf("svg",
0)&&(d=m(d,{namespace:"http://www.w3.org/2000/svg"}));a.text!==b.text&&(g=!0,void 0===b.text?e.removeChild(e.firstChild):e.textContent=b.text);var l;l=a.children;var p=b.children,n=d;if(l===p)l=!1;else{l=l||f;for(var p=p||f,t=l.length,v=p.length,w=n.transitions,G=0,L=0,U=!1;L<v;){var P=G<t?l[G]:void 0,H=p[L];if(void 0!==P&&h(P,H))U=x(P,H,n)||U,G++;else{b:{var P=l,K=H;if(""!==K.vnodeSelector)for(var J=G+1;J<P.length;J++)if(h(P[J],K)){P=J;break b}P=-1}if(0<=P){for(;G<P;G++)k(l[G],w),q(l,G,b,"removed");
U=x(l[P],H,n)||U;G=P+1}else u(H,e,G<t?l[G].domNode:void 0,n),P=w,H.properties&&(K=H.properties.enterAnimation)&&("function"===typeof K?K(H.domNode,H.properties):P.enter(H.domNode,H.properties,K)),q(p,L,b,"added")}L++}if(t>G)for(;G<t;G++)k(l[G],w),q(l,G,b,"removed");l=U}g=l||g;l=a.properties;p=b.properties;n=d;if(p){U=!1;t=Object.keys(p);v=t.length;for(w=0;w<v;w++)if(H=t[w],L=p[H],G=l[H],"class"===H){if(G!==L)throw Error('"class" property may not be updated. Use the "classes" property for conditional css classes.');
}else if("classes"===H)for(P=e.classList,K=Object.keys(L),J=K.length,H=0;H<J;H++){var R=K[H],M=!!L[R];M!==!!G[R]&&(U=!0,M?P.add(R):P.remove(R))}else if("styles"===H)for(P=Object.keys(L),K=P.length,H=0;H<K;H++)J=P[H],R=L[J],R!==G[J]&&(U=!0,R?(c(R),n.styleApplyer(e,J,R)):n.styleApplyer(e,J,""));else if(L||"string"!==typeof G||(L=""),"value"===H)P=e[H],P!==L&&(e["oninput-value"]?P===e["oninput-value"]:L!==G)&&(e[H]=L,e["oninput-value"]=void 0),L!==G&&(U=!0);else if(L!==G){U=typeof L;if("function"===
U)throw Error("Functions may not be updated on subsequent renders (property: "+H+"). Hint: declare event handler functions outside the render() function.");"string"===U&&"innerHTML"!==H?"http://www.w3.org/2000/svg"===n.namespace&&"href"===H?e.setAttributeNS("http://www.w3.org/1999/xlink",H,L):"role"===H&&""===L?e.removeAttribute(H):e.setAttribute(H,L):e[H]!==L&&(e[H]=L);U=!0}l=U}else l=void 0;g=l||g;b.properties&&b.properties.afterUpdate&&b.properties.afterUpdate.apply(b.properties.bind||b.properties,
[e,d,b.vnodeSelector,b.properties,b.children])}g&&b.properties&&b.properties.updateAnimation&&b.properties.updateAnimation(e,b.properties,a.properties);b.domNode=a.domNode;return!1};var t=function(a,b){return{update:function(c){if(a.vnodeSelector!==c.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");x(a,c,b);a=c},domNode:a.domNode}};a.h=function(a){var b=arguments[1];if("string"!==typeof a)throw Error();
var c=1;!b||b.hasOwnProperty("vnodeSelector")||Array.isArray(b)||"object"!==typeof b?b=void 0:c=2;var d,f,h=arguments.length;if(h===c+1){var k=arguments[c];"string"===typeof k?d=k:void 0!==k&&null!==k&&1===k.length&&"string"===typeof k[0]&&(d=k[0])}if(void 0===d)for(f=[];c<h;c++)k=arguments[c],null!==k&&void 0!==k&&(Array.isArray(k)?l(a,k,f):k.hasOwnProperty("vnodeSelector")?f.push(k):f.push(e(k)));return{vnodeSelector:a,properties:b,children:f,text:""===d?void 0:d,domNode:null}};a.dom={create:function(a,
b){b=m(d,b);u(a,document.createElement("div"),void 0,b);return t(a,b)},append:function(a,b,c){c=m(d,c);u(b,a,void 0,c);return t(b,c)},insertBefore:function(a,b,c){c=m(d,c);u(b,a.parentNode,a,c);return t(b,c)},merge:function(a,b,c){c=m(d,c);b.domNode=a;w(a,b,c);return t(b,c)},replace:function(a,b,c){c=m(d,c);u(b,a.parentNode,a,c);a.parentNode.removeChild(a);return t(b,c)}};a.createCache=function(){var a,b;return{invalidate:function(){a=b=void 0},result:function(c,d){if(a)for(var e=0;e<c.length;e++)a[e]!==
c[e]&&(b=void 0);b||(b=d(),a=c);return b}}};a.createMapping=function(a,b,c){var d=[],e=[];return{results:e,map:function(f){for(var g=f.map(a),h=e.slice(),k=0,l=0;l<f.length;l++){var m=f[l],p=g[l];if(p===d[k])e[l]=h[k],c(m,h[k],l),k++;else{for(var n=!1,r=1;r<d.length+1;r++){var q=(k+r)%d.length;if(d[q]===p){e[l]=h[q];c(f[l],h[q],l);k=q+1;n=!0;break}}n||(e[l]=b(m,l))}}e.length=f.length;d=g}}};a.createProjector=function(b){var c,e=m(d,b);e.eventHandlerInterceptor=function(a,b,d,e){return function(){c.scheduleRender();
return b.apply(e.bind||this,arguments)}};var f=!0,h,k=!1,l=[],p=[],n=function(){h=void 0;if(f){f=!1;for(var a=0;a<l.length;a++){var b=p[a]();l[a].update(b)}f=!0}};return c={renderNow:n,scheduleRender:function(){h||k||(h=requestAnimationFrame(n))},stop:function(){h&&(cancelAnimationFrame(h),h=void 0);k=!0},resume:function(){k=!1;f=!0;c.scheduleRender()},append:function(b,c){l.push(a.dom.append(b,c(),e));p.push(c)},insertBefore:function(b,c){l.push(a.dom.insertBefore(b,c(),e));p.push(c)},merge:function(b,
c){l.push(a.dom.merge(b,c(),e));p.push(c)},replace:function(b,c){l.push(a.dom.replace(b,c(),e));p.push(c)},detach:function(a){for(var b=0;b<p.length;b++)if(p[b]===a)return p.splice(b,1),l.splice(b,1)[0];throw Error("renderMaquetteFunction was not found");}}}})},"dojox/html/entities":function(){define(["dojo/_base/lang"],function(a){var f=a.getObject("dojox.html.entities",!0),m=function(a,f){var e,d;if(f._encCache&&f._encCache.regexp&&f._encCache.mapper&&f.length==f._encCache.length)e=f._encCache.mapper,
d=f._encCache.regexp;else{e={};d=["["];var c;for(c=0;c<f.length;c++)e[f[c][0]]="\x26"+f[c][1]+";",d.push(f[c][0]);d.push("]");d=new RegExp(d.join(""),"g");f._encCache={mapper:e,regexp:d,length:f.length}}return a=a.replace(d,function(a){return e[a]})},h=function(a,f){var e,d;if(f._decCache&&f._decCache.regexp&&f._decCache.mapper&&f.length==f._decCache.length)e=f._decCache.mapper,d=f._decCache.regexp;else{e={};d=["("];var c;for(c=0;c<f.length;c++){var b="\x26"+f[c][1]+";";c&&d.push("|");e[b]=f[c][0];
d.push(b)}d.push(")");d=new RegExp(d.join(""),"g");f._decCache={mapper:e,regexp:d,length:f.length}}return a=a.replace(d,function(a){return e[a]})};f.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],["\u00a0","nbsp"]];f.latin=[["\u00a1","iexcl"],["\u00a2","cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4","curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae",
"reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],
["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],
["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1","ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],
["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9",
"Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],
["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],
["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286",
"sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665","hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153","oelig"],["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c",
"zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039","lsaquo"],["\u203a","rsaquo"]];f.encode=function(a,h){a&&(h?a=m(a,h):(a=m(a,f.html),a=m(a,f.latin)));return a};f.decode=function(a,l){a&&(l?a=h(a,l):(a=h(a,f.html),a=h(a,f.latin)));return a};return f})},"esri/layers/support/labelingInfo":function(){define(["require",
"exports","./LabelClass"],function(a,f,m){Object.defineProperty(f,"__esModule",{value:!0});var h=/\[([^\[\]]+)\]/ig;f.reader=function(a,f,n){var d=this;return a?a.map(function(a){var b=new m;b.read(a,n);if(b.labelExpression){var c=f.fields||f.layerDefinition&&f.layerDefinition.fields||d.fields;b.labelExpression=b.labelExpression.replace(h,function(a,b){a:if(c){a=b.toLowerCase();for(var d=0;d<c.length;d++){var e=c[d].name;if(e.toLowerCase()===a){b=e;break a}}}return"["+b+"]"})}return b}):null}})},
"esri/layers/support/commonProperties":function(){define(["require","exports","../../core/accessorSupport/write","../../core/accessorSupport/utils","../../core/accessorSupport/PropertyOrigin"],function(a,f,m,h,e){Object.defineProperty(f,"__esModule",{value:!0});f.screenSizePerspectiveEnabled={type:Boolean,value:!0,json:{origins:{webScene:{read:{source:["id","url","layerType"],reader:function(a,f){if(null==f.screenSizePerspective&&"defaults"===this.originOf("screenSizePerspectiveEnabled"))h.getProperties(this).store.set("screenSizePerspectiveEnabled",
!1,e.OriginId.DEFAULTS);else return f.screenSizePerspective}},write:{ignoreOrigin:!0,target:"screenSizePerspective",writer:function(a,e,d,c){"defaults"===this.originOf("screenSizePerspectiveEnabled")&&a?e[d]=a:m.willPropertyWrite(this,"screenSizePerspectiveEnabled",{},c)&&(e[d]=a)}}}}}}})},"esri/plugins/popupManager":function(){define(["../views/PopupManager"],function(a){return{add:function(f,m){f.popupManager||(f.popupManager=new a(m),f.popupManager.view=f)},remove:function(a){var f=a.popupManager;
f&&(f.destroy(),a.popupManager=null)}}})},"esri/views/PopupManager":function(){define("require ../core/promiseUtils dojo/_base/array dojo/on dojo/Deferred dojo/promise/all ../layers/support/layerUtils ../geometry/support/scaleUtils ../geometry/Extent ../tasks/support/Query ../layers/GroupLayer ../core/Accessor".split(" "),function(a,f,m,h,e,l,n,d,c,b,k,q){var u;return q.createSubclass({declaredClass:"esri.views.PopupManager",properties:{map:{dependsOn:["view.map"],readOnly:!0}},constructor:function(){this._featureLayersCache=
{}},destroy:function(){this._featureLayersCache={};this.view=null},_clickHandle:null,_featureLayersCache:null,enabled:!1,_enabledSetter:function(a){this._clickHandle&&(a?this._clickHandle.resume():this._clickHandle.pause());this._set("enabled",a)},_mapGetter:function(){return this.get("view.map")||null},view:null,_viewSetter:function(a){this._clickHandle&&(this._clickHandle.remove(),this._clickHandle=null);a&&(this._clickHandle=h.pausable(a,"click",this._clickHandler.bind(this)),this.enabled||this._clickHandle.pause());
this._set("view",a)},getMapLayer:function(a){var b;if(a&&(b=a.findLayerById())&&(a=b.id,this._featureLayersCache[a])){var c=a.lastIndexOf("_");-1<c&&(a=a.substring(0,c),b=this.map.findLayerById(a))}return b},_closePopup:function(){var a=this.get("view.popup");a&&(a.clear(),a.close())},_showPopup:function(a,h){function l(a){return g.allLayerViews.find(function(b){return b.layer===a})}function p(a){if(null==a)return!1;var b=l(a);return null==b?!1:a.loaded&&!b.suspended&&(a.popupEnabled&&a.popupTemplate||
"graphics"===a.type||b.getPopupData)}function n(a){return(a=l(a))&&a.hasDraped}var g=this.view,q=g.popup,w=this,x=[],u="3d"===g.type;m.forEach(this.map.layers.toArray(),function(a){a.isInstanceOf(k)?m.forEach(a.layers.toArray(),function(a){!p(a)||u&&!n(a)||x.push(a)}):!p(a)||u&&!n(a)||x.push(a)});0<g.graphics.length&&x.push(g.graphics);!h||h.popupTemplate||p(h.layer)||(h=null);if(x.length||h){var F=[],B=!!h,E=w._calculateClickTolerance(x),C=a.mapPoint;if(C){var G=1;g.state&&(G=g.state.resolution);
var L=g.basemapTerrain;L&&L.overlayManager&&(G=L.overlayManager.overlayPixelSizeInMapUnits(C));E*=G;L&&!L.spatialReference.equals(g.spatialReference)&&(E*=d.getUnitValueForSR(L.spatialReference)/d.getUnitValueForSR(g.spatialReference));var L=C.clone().offset(-E,-E),C=C.clone().offset(E,E),U=new c(Math.min(L.x,C.x),Math.min(L.y,C.y),Math.max(L.x,C.x),Math.max(L.y,C.y),g.spatialReference),C=function(c){var d;if("imagery"===c.type){d=new b;d.geometry=a.mapPoint;var e=l(c),g={rasterAttributeTableFieldPrefix:"Raster.",
returnDomainValues:!0};g.layerView=e;d=c.queryVisibleRasters(d,g).then(function(a){B=B||0<a.length;return a})}else if("csv"===c.type||!w._featureLayersCache[c.id]&&"function"!==typeof c.queryFeatures){if("map-image"===c.type)return e=l(c),e.getPopupData(U);var g=[],k;"esri.core.Collection\x3cesri.Graphic\x3e"===c.declaredClass?(e=c,k=!0):"graphics"===c.type?(e=c.graphics,k=!0):(e=(e=l(c))&&e.loadedGraphics,k=!1);e&&(g=e.filter(function(a){return a&&(!k||a.popupTemplate)&&a.visible&&U.intersects(a.geometry)}).toArray());
0<g.length&&(B=!0,d="scene"===c.type?w._fetchSceneAttributes(c,g):f.resolve(g))}else e=c.createQuery(),e.geometry=U,d=c.queryFeatures(e).then(function(a){a=a.features;if(h&&h.layer===c&&c.objectIdField){var b=c.objectIdField,d=h.attributes[b];a=a.filter(function(a){return a.attributes[b]!==d})}B=B||0<a.length;return a});return d};if(u&&!h||!u)var F=x.map(C).filter(function(a){return!!a}),P=function(a){return a.reduce(function(a,b){return a.concat(b.items?P(b.items):b)},[])},F=P(F);h&&(h.layer&&"scene"===
h.layer.type?F.unshift(this._fetchSceneAttributes(h.layer,[h])):h.getEffectivePopupTemplate()&&(C=new e,F.unshift(C.resolve([h]))));m.some(F,function(a){return!a.isFulfilled()})||B?F.length&&q.open({promises:F,location:a.mapPoint}):w._closePopup()}else w._closePopup()}else w._closePopup()},_fetchSceneAttributes:function(a,b){return this.view.whenLayerView(a).then(function(c){var d=this._getOutFields(a.popupTemplate),e=b.map(function(a){return c.whenGraphicAttributes(a,d).otherwise(function(){return a})});
return f.eachAlways(e)}.bind(this)).then(function(a){return a.map(function(a){return a.value})})},_getSubLayerFeatureLayers:function(b,c){var d=c||new e,f=[];c=b.length;var k=Math.floor(this.view.extent.width/this.view.width),g=this.view.scale,q=!1,w=this,x=0;a:for(;x<c;x++){var A=b[x],F=A.dynamicLayerInfos||A.layerInfos;if(F){var B=null;A._params&&(A._params.layers||A._params.dynamicLayers)&&(B=A.visibleLayers);for(var B=n._getVisibleLayers(F,B),E=n._getLayersForScale(g,F),C=F.length,G=0;G<C;G++){var L=
F[G],U=L.id,P=A.popupTemplates[U];if(!L.subLayerIds&&P&&P.popupTemplate&&-1<m.indexOf(B,U)&&-1<m.indexOf(E,U)){if(!u){q=!0;break a}var H=A.id+"_"+U,K=this._featureLayersCache[H];K&&K.loadError||(K||((K=P.layerUrl)||(K=L.source?this._getLayerUrl(A.url,"/dynamicLayer"):this._getLayerUrl(A.url,U)),K=new u(K,{id:H,drawMode:!1,mode:u.MODE_SELECTION,outFields:this._getOutFields(P.popupTemplate),resourceInfo:P.resourceInfo,source:L.source}),this._featureLayersCache[H]=K),K.setDefinitionExpression(A.layerDefinitions&&
A.layerDefinitions[U]),K.setGDBVersion(A.gdbVersion),K.popupTemplate=P.popupTemplate,K.setMaxAllowableOffset(k),K.setUseMapTime(!!A.useMapTime),A.layerDrawingOptions&&A.layerDrawingOptions[U]&&A.layerDrawingOptions[U].renderer&&K.setRenderer(A.layerDrawingOptions[U].renderer),f.push(K))}}}}if(q){var J=new e;a(["../layers/FeatureLayer"],function(a){u=a;J.resolve()});J.then(function(){w._getSubLayerFeatureLayers(b,d)})}else{var R=[];m.forEach(f,function(a){if(!a.loaded){var b=new e;h.once(a,"load, error",
function(){b.resolve()});R.push(b.promise)}});R.length?l(R).then(function(){f=m.filter(f,function(a){return!a.loadError&&a.isVisibleAtScale(g)});d.resolve(f)}):(f=m.filter(f,function(a){return a.isVisibleAtScale(g)}),d.resolve(f))}return d.promise},_getLayerUrl:function(a,b){var c=a.indexOf("?");return-1===c?a+"/"+b:a.substring(0,c)+"/"+b+a.substring(c)},_getOutFields:function(a){var b;"esri.PopupTemplate"===a.declaredClass&&a.fieldInfos?(b=[],m.forEach(a.fieldInfos,function(a){var c=a.fieldName&&
a.fieldName.toLowerCase();c&&"shape"!==c&&0!==c.indexOf("relationships/")&&b.push(a.fieldName)})):b=["*"];return b},_calculateClickTolerance:function(a){var b=6;m.forEach(a,function(a){if(a=a.renderer)"simple"===a.type?((a=a.symbol)&&a.xoffset&&(b=Math.max(b,Math.abs(a.xoffset))),a&&a.yoffset&&(b=Math.max(b,Math.abs(a.yoffset)))):"uniqueValue"!==a.type&&"classBreaks"!==a.type||m.forEach(a.uniqueValueInfos||a.classBreakInfos,function(a){(a=a.symbol)&&a.xoffset&&(b=Math.max(b,Math.abs(a.xoffset)));
a&&a.yoffset&&(b=Math.max(b,Math.abs(a.yoffset)))})});return b},_clickHandler:function(a){function b(a){return c.allLayerViews.find(function(b){return b.layer===a})}var c=this.view,d=a.screenPoint,e=this;if(0===a.button&&c.popup&&c.ready){var f="3d"===c.type,h=c.map.allLayers.some(function(a){if(a.isInstanceOf(k))return!1;var c;null==a?c=!1:(c=b(a),c=null==c?!1:a.loaded&&!c.suspended&&(a.popupEnabled&&a.popupTemplate||"graphics"===a.type||c.getPopupData));c&&!(c=!f)&&(c=(a=b(a))&&a.hasDraped);return c?
!0:!1});null!=d?this.view.hitTest(d.x,d.y).then(function(b){h||0<b.results.length?e._showPopup(a,0<b.results.length?b.results[0].graphic:null):e._closePopup()}):e._showPopup(a)}}})})},"esri/layers/support/layerUtils":function(){define(["dojo/_base/array"],function(a){return{_serializeLayerDefinitions:function(f){var m=[],h=!1,e=/[:;]/;if(f&&(a.forEach(f,function(a,d){a&&(m.push([d,a]),!h&&e.test(a)&&(h=!0))}),0<m.length)){var l;h?(l={},a.forEach(m,function(a){l[a[0]]=a[1]}),l=JSON.stringify(l)):(l=
[],a.forEach(m,function(a){l.push(a[0]+":"+a[1])}),l=l.join(";"));return l}return null},_serializeTimeOptions:function(f,m){if(f){var h=[];a.forEach(f,function(e,f){e&&(e=e.toJSON(),m&&-1!==a.indexOf(m,f)&&(e.useTime=!1),h.push('"'+f+'":'+JSON.stringify(e)))});if(h.length)return"{"+h.join(",")+"}"}},_getVisibleLayers:function(f,m){var h=[],e,l;if(!f)return h;if(m)for(h=m.concat(),l=0;l<f.length;l++)m=f[l],e=a.indexOf(f,m.id),m.subLayerIds&&-1<e&&(h.splice(e,1),h=h.concat(m.subLayerIds));else h=this._getDefaultVisibleLayers(f);
return h},_getDefaultVisibleLayers:function(f){var m=[],h;if(!f)return m;for(h=0;h<f.length;h++)0<=f[h].parentLayerId&&-1===a.indexOf(m,f[h].parentLayerId)&&a.some(f,function(a){return a.id===f[h].parentLayerId})||f[h].defaultVisibility&&m.push(f[h].id);return m},_getLayersForScale:function(f,m){var h=[];if(0<f&&m){var e;for(e=0;e<m.length;e++)if(!(0<=m[e].parentLayerId&&-1===a.indexOf(h,m[e].parentLayerId)&&a.some(m,function(a){return a.id===m[e].parentLayerId}))&&0<=m[e].id){var l=!0,n=m[e].maxScale,
d=m[e].minScale;if(0<n||0<d)0<n&&0<d?l=n<=f&&f<=d:0<n?l=n<=f:0<d&&(l=f<=d);l&&h.push(m[e].id)}}return h}}})},"esri/layers/GroupLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Layer ../core/MultiOriginJSONSupport ./mixins/PortalLayer ./mixins/OperationalLayer ../support/LayersMixin ../core/accessorSupport/utils ../core/accessorSupport/decorators".split(" "),function(a,f,m,h,e,l,n,d,c,b,k){a=function(a){function c(b){b=a.call(this)||
this;b._visibilityHandles={};b.fullExtent=void 0;b.operationalLayerType="GroupLayer";b.spatialReference=void 0;b.type="group";b._visibilityWatcher=b._visibilityWatcher.bind(b);return b}m(c,a);c.prototype.initialize=function(){this._enforceVisibility(this.visibilityMode,this.visible);this.watch("visible",this._visibleWatcher.bind(this),!0)};c.prototype._writeLayers=function(a,b,c,d){var e=[];if(!a)return e;a.forEach(function(a){a.write&&(a=a.write(null,d))&&a.layerType&&e.push(a)});b.layers=e};Object.defineProperty(c.prototype,
"visibilityMode",{set:function(a){var b=this._get("visibilityMode")!==a;this._set("visibilityMode",a);b&&this._enforceVisibility(a,this.visible)},enumerable:!0,configurable:!0});c.prototype.load=function(){this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]}));return this};c.prototype.layerAdded=function(a,b){a.visible&&"exclusive"===this.visibilityMode?this._turnOffOtherLayers(a):"inherited"===this.visibilityMode&&(a.visible=this.visible);
this._visibilityHandles[a.uid]=a.watch("visible",this._visibilityWatcher,!0)};c.prototype.layerRemoved=function(a,b){if(b=this._visibilityHandles[a.uid])b.remove(),delete this._visibilityHandles[a.uid];this._enforceVisibility(this.visibilityMode,this.visible)};c.prototype._turnOffOtherLayers=function(a){this.layers.forEach(function(b){b!==a&&(b.visible=!1)})};c.prototype._enforceVisibility=function(a,c){if(b.getProperties(this).initialized){var d=this.layers,e=d.find(function(a){return a.visible});
switch(a){case "exclusive":d.length&&!e&&(e=d.getItemAt(0),e.visible=!0);this._turnOffOtherLayers(e);break;case "inherited":d.forEach(function(a){a.visible=c})}}};c.prototype._visibleWatcher=function(a){"inherited"===this.visibilityMode&&this.layers.forEach(function(b){b.visible=a})};c.prototype._visibilityWatcher=function(a,b,c,d){switch(this.visibilityMode){case "exclusive":a?this._turnOffOtherLayers(d):this._isAnyLayerVisible()||(d.visible=!0);break;case "inherited":d.visible=this.visible}};c.prototype._isAnyLayerVisible=
function(){return this.layers.some(function(a){return a.visible})};return c}(k.declared(e,c,l,d,n));h([k.shared({"2d":"../views/layers/GroupLayerView","3d":"../views/layers/GroupLayerView"})],a.prototype,"viewModulePaths",void 0);h([k.property()],a.prototype,"fullExtent",void 0);h([k.property({json:{read:!1,write:{ignoreOrigin:!0}}})],a.prototype,"layers",void 0);h([k.writer("layers")],a.prototype,"_writeLayers",null);h([k.property()],a.prototype,"operationalLayerType",void 0);h([k.property({json:{write:!1}})],
a.prototype,"portalItem",void 0);h([k.property()],a.prototype,"spatialReference",void 0);h([k.property({json:{read:!1},readOnly:!0,value:"group"})],a.prototype,"type",void 0);h([k.property({json:{read:!1,write:!1}})],a.prototype,"url",void 0);h([k.property({value:"independent",json:{write:!0}})],a.prototype,"visibilityMode",null);return a=h([k.subclass("esri.layers.GroupLayer")],a)})},"esri/portal/support/layersCreator":function(){define("require exports dojo/has ../../core/promiseUtils ../../core/requireUtils ../PortalItem ./portalLayers ../../layers/Layer ../../renderers/support/styleUtils ./mapNotesUtils".split(" "),
function(a,f,m,h,e,l,n,d,c,b){function k(b,d,f){var g,k;return e.when(a,"../../layers/"+d).then(function(a){var d={};b.itemId&&(d.portalItem={id:b.itemId,portal:f.context.portal});k=g=new a(d);k.read(b,f.context);return c.loadStyleRenderer(k,f.context).then(function(){return h.resolve(g)})})}function q(a,b){return u(a,b).then(function(c){return k(a,c,b)})}function u(a,c){var d=c.context,e=x(d),f=a.layerType||a.type;!f&&c&&c.defaultLayerType&&(f=c.defaultLayerType);c=e[f]||"UnknownLayer";if("Feature Collection"===
a.type){if(a.itemId)return(new l({id:a.itemId,portal:d&&d.portal})).load().then(n.selectLayerClassPath).then(function(a){return a.className})}else"ArcGISFeatureLayer"===f&&b.isMapNotesLayer(a)&&(c="MapNotesLayer");return h.resolve(c)}function x(a){switch(a.origin){case "web-scene":switch(a.layerContainerType){case "basemap":a=g;break;case "ground":a=v;break;default:a=p}break;default:switch(a.layerContainerType){case "basemap":a=z;break;default:a=r}}return a}function w(a,b,c){return b&&b.filter?c.then(function(a){var c=
b.filter(a);return void 0===c?h.resolve(a):c instanceof d?h.resolve(c):c}):c}function t(a,b,c){if(!b)return[];for(var d=[],e=[],f=0;f<b.length;f++){var g=b[f],k=q(g,c);d.push(k);e.push(null);if("GroupLayer"===g.layerType&&g.layers&&Array.isArray(g.layers)&&0<g.layers.length){g=g.layers.map(function(a){return q(a,c)});d.push.apply(d,g);for(var l=0;l<g.length;l++)e.push(k)}}var m={};return d.map(function(b,d){var f=function(a,b){m[b.id]=d;var c=a.findIndex(function(a){if(!a.id)return!1;a=m[a.id];return void 0===
a?!1:d<a});0>c&&(c=void 0);a.add(b,c)};return w(a,c,b).then(function(b){if(null===e[d])f(a,b);else return e[d].then(function(a){f(a.layers,b);return h.resolve(b)});return h.resolve(b)})})}Object.defineProperty(f,"__esModule",{value:!0});var p={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",
ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",DefaultTileLayer:"TileLayer"},v={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer"},g={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",DefaultTileLayer:"TileLayer",
VectorTileLayer:"VectorTileLayer"},r={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",GeoRSS:"GeoRSSLayer",
KML:"UnsupportedLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"},z={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",bingLayer:"UnsupportedLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"};f.createLayer=q;f.processLayer=w;f.populateLayers=t;
f.populateOperationalLayers=function(a,b,c){return t(a,b,c)}})},"esri/portal/support/portalLayers":function(){define("require exports dojo/_base/lang ../PortalItem ../../core/promiseUtils ../../core/requireUtils ../../request ../../core/Collection ../../core/Error ./mapNotesUtils".split(" "),function(a,f,m,h,e,l,n,d,c,b){function k(a){switch(a.type){case "Map Service":return u(a);case "Feature Service":return x(a);case "Feature Collection":return t(a);case "Scene Service":return w(a);case "Image Service":return p(a);
case "Stream Service":return{className:"StreamLayer"};case "Vector Tile Service":return{className:"VectorTileLayer"};case "WMTS":return{className:"WebTileLayer"};case "WMS":return{className:"WMSLayer"};default:return e.reject(new c("portal:unknown-item-type","Unknown item type '${type}'",{type:a.type}))}}function q(b){return l.when(a,"../../layers/"+b.className).then(function(a){return{constructor:a,properties:b.properties}})}function u(a){return v(a).then(function(a){return a?{className:"TileLayer"}:
{className:"MapImageLayer"}})}function x(a){return g(a).then(function(a){if(a){var b={returnZ:!0,outFields:["*"]};null!=a.id&&(b.layerId=a.id);return{className:"FeatureLayer",properties:b}}return{className:"GroupLayer"}})}function w(a){return g(a).then(function(b){if(b){var c={},d=void 0;null!=b.id?(c.layerId=b.id,d=a.url+"/layers/"+b.id):d=a.url;if(Array.isArray(a.typeKeywords)&&0<a.typeKeywords.length){b={IntegratedMesh:"IntegratedMeshLayer","3DObject":"SceneLayer",Point:"SceneLayer",PointCloud:"PointCloudLayer"};
for(var e=0,f=Object.keys(b);e<f.length;e++){var g=f[e];if(-1!==a.typeKeywords.indexOf(g))return{className:b[g]}}}return r(d).then(function(a){var b="SceneLayer";null!=a&&"IntegratedMesh"===a.layerType?b="IntegratedMeshLayer":null!=a&&"PointCloud"===a.layerType&&(b="PointCloudLayer");return{className:b,properties:c}})}return{className:"GroupLayer"}})}function t(a){return a.load().then(function(){return a.fetchData()}).then(function(a){if(a&&Array.isArray(a.layers)){if(b.isMapNotesLayer(a))return{className:"MapNotesLayer"};
if(1===a.layers.length)return{className:"FeatureLayer"}}return{className:"GroupLayer"}})}function p(a){return v(a).then(function(b){var c=new d(a.typeKeywords);return b?c.find(function(a){return"elevation 3d layer"===a.toLowerCase()})?{className:"ElevationLayer"}:{className:"TileLayer"}:{className:"ImageryLayer"}})}function v(a){return r(a.url).then(function(a){return a.tileInfo})}function g(a){return!a.url||a.url.match(/\/\d+$/)?e.resolve({}):a.load().then(function(){return a.fetchData()}).then(function(b){return b&&
Array.isArray(b.layers)?1===b.layers.length?{id:b.layers[0].id}:!1:r(a.url).then(function(a){return a&&Array.isArray(a.layers)?1===a.layers.length?{id:a.layers[0].id}:!1:{}})})}function r(a){return n(a,{responseType:"json",callbackParamName:"callback",query:{f:"json"}}).then(function(a){return a.data})}Object.defineProperty(f,"__esModule",{value:!0});f.fromItem=function(a){!a.portalItem||a.portalItem instanceof h||a.portalItem.constructor&&a.portalItem.constructor._meta||(a=m.mixin({},a,{portalItem:new h(a.portalItem)}));
return a.portalItem.load().then(k).then(q).then(function(b){var c=m.mixin({portalItem:a.portalItem},b.properties);b=b.constructor;"esri.layers.FeatureLayer"===b.declaredClass&&(c.returnZ=!0,c.outFields=["*"]);return e.resolve(new b(c))})};f.selectLayerClassPath=k})},"esri/portal/support/mapNotesUtils":function(){define(["require","exports"],function(a,f){Object.defineProperty(f,"__esModule",{value:!0});f.isMapNotesLayer=function(a){var f=["TITLE","DESCRIPTION","IMAGE_URL","IMAGE_LINK_URL"];if((a=
a.layers||a.featureCollection&&a.featureCollection.layers)&&Array.isArray(a))return a=a[0],a.layerDefinition.fields&&a.layerDefinition.fields.forEach(function(a){a=f.indexOf(a.name);-1<a&&f.splice(a,1)}),f.length?!1:!0}})},"esri/views/layers/LayerView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/Evented ../../core/Identifiable ../../core/Promise ../../core/HandleRegistry ../../core/Logger".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k){a=function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;c.handles=new b;c.parent=null;c.view=null;return c}m(c,a);c.prototype.initialize=function(){var a=this;this.addResolvingPromise(this.layer);this.otherwise(function(b){if("layerview:create-error"!==b.name){var c=a.layer&&a.layer.id||"no id",d=a.layer&&a.layer.title||"no title";k.getLogger(a.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+d+"', id: '"+c+"')",b)}})};
c.prototype.destroy=function(){this.layer=this.view=this.parent=null};Object.defineProperty(c.prototype,"layer",{get:function(){return this._get("layer")},set:function(a){this.handles.remove("layer");a&&this.handles.add(a.on("refresh",this.refresh.bind(this)),"layer");this._set("layer",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"updating",{get:function(){return!this.suspended&&
this.isUpdating()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(a){void 0===a?this._clearOverride("visible"):this._override("visible",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"fullOpacity",{get:function(){var a=this.get("layer.opacity"),a=null!=a?a:1,b=this.get("parent.fullOpacity");return a*(null!=b?b:1)},enumerable:!0,configurable:!0});c.prototype.refresh=function(){};c.prototype.canResume=
function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1};c.prototype.isUpdating=function(){return!1};return c}(e.declared(l,n,d,c));h([e.property({value:null})],a.prototype,"layer",null);h([e.property()],a.prototype,"parent",void 0);h([e.property({readOnly:!0,dependsOn:["view","visible","layer.loaded","parent.suspended"]})],a.prototype,"suspended",null);h([e.property({type:Boolean,dependsOn:["suspended"],readOnly:!0})],a.prototype,"updating",
null);h([e.property()],a.prototype,"view",void 0);h([e.property({dependsOn:["layer.visible"]})],a.prototype,"visible",null);h([e.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],a.prototype,"fullOpacity",null);return a=h([e.subclass("esri.views.layers.LayerView")],a)})},"esri/views/View":function(){define("dojo/_base/lang ../Graphic ../core/Accessor ../core/Collection ../core/CollectionFlattener ../core/Evented ../core/HandleRegistry ../core/Promise ../core/watchUtils ../core/promiseUtils ../core/Scheduler ../geometry/Extent ../geometry/HeightModelInfo ../geometry/SpatialReference ./BreakpointsOwner ./LayerViewManager ./BasemapView ./GroundView ./support/DefaultsFromMap".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k,q,u,x,w,t,p,v,g){return m.createSubclass([d,l,w],{declaredClass:"esri.views.View",properties:{allLayerViews:{readOnly:!0},basemapView:{},animation:{},resizing:{},interacting:{},graphics:{type:h.ofType(f)},groundView:{},defaultsFromMap:g,heightModelInfo:{type:u,dependsOn:["defaultsFromMap.heightModelInfo"]},initialExtent:{readOnly:!0,type:q,dependsOn:["defaultsFromMap.extent"]},initialExtentRequired:{},layerViews:{type:h},map:{},ready:{readOnly:!0,dependsOn:"map spatialReference width height initialExtentRequired initialExtent defaultsFromMap.isSpatialReferenceDone heightModelInfo defaultsFromMap.isHeightModelInfoDone map.loaded".split(" ")},
size:{readOnly:!0,dependsOn:["width","height"],get:function(){return[this.width,this.height]}},spatialReference:{type:x,dependsOn:["defaultsFromMap.spatialReference"]},stationary:{dependsOn:["animation","interacting","resizing"]},type:{},updating:{},padding:{},width:{},height:{}},constructor:function(a){this._viewHandles=new n;this._viewHandles.add(this.watch("ready",function(a,b){this._currentSpatialReference=a?this.spatialReference:null;this.notifyChange("spatialReference");!a&&b&&this.layerViewManager.empty()}.bind(this)));
this.allLayerViews=new e({root:this,rootCollectionNames:["basemapView.baseLayerViews","groundView.layerViews","layerViews","basemapView.referenceLayerViews"],getChildrenFunction:function(a){return a.layerViews}});this.defaultsFromMap=new g({view:this})},getDefaults:function(){return a.mixin(this.inherited(arguments),{layerViews:[],graphics:[],padding:{left:0,top:0,right:0,bottom:0}})},initialize:function(){var a=this.validate().then(function(){this._isValid=!0;this.notifyChange("ready");return c.whenOnce(this,
"ready")}.bind(this));this.addResolvingPromise(a);this.basemapView=new p({view:this});this.groundView=new v({view:this});this.layerViewManager=new t({view:this});this._resetInitialViewPropertiesFromContent()},destroy:function(){this.destroyed||(this.basemapView.destroy(),this.groundView.destroy(),this.destroyLayerViews(),this.defaultsFromMap.destroy(),this.defaultsFromMap=null,this._viewHandles.destroy(),this.map=null)},destroyLayerViews:function(){this.layerViewManager.destroy()},_viewHandles:null,
_isValid:!1,_readyCycleForced:!1,_userSpatialReference:null,_currentSpatialReference:null,_userHeightModelInfo:null,animation:null,basemapView:null,groundView:null,graphics:null,_graphicsSetter:function(a){this._graphicsView&&(this._graphicsView.graphics=a);this._set("graphics",a)},heightModelInfo:null,_heightModelInfoGetter:function(){return this.getHeightModelInfoWithOverride()},_heightModelInfoSetter:function(a){this.setHeightModelInfoOverride(a)},interacting:!1,layerViews:null,map:null,_mapSetter:function(a){var b=
this._get("map");a!==b&&(a&&a.load&&a.load(),this._forceReadyCycle(),this._resetInitialViewPropertiesFromContent(),this._set("map",a))},padding:null,_readyGetter:function(){return!!(this._isValid&&!this._readyCycleForced&&this.map&&0!==this.width&&0!==this.height&&this.spatialReference&&(!this.map.load||this.map.loaded)&&(this._currentSpatialReference||!this.initialExtentRequired||this.initialExtent||this.defaultsFromMap&&this.defaultsFromMap.isSpatialReferenceDone)&&(this.heightModelInfo||this.defaultsFromMap&&
this.defaultsFromMap.isHeightModelInfoDone)&&this.defaultsFromMap&&this.defaultsFromMap.isTileInfoDone&&this.isSpatialReferenceSupported(this.spatialReference))},spatialReference:null,_spatialReferenceGetter:function(){return this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null},_spatialReferenceSetter:function(a){this._userSpatialReference=a;this._set("spatialReference",a)},stationary:!0,_stationaryGetter:function(){return!this.animation&&!this.interacting&&
!this.resizing},type:null,updating:!1,initialExtentRequired:!0,initialExtent:null,_initialExtentGetter:function(){return this.defaultsFromMap&&this.defaultsFromMap.extent},whenLayerView:function(a){return this.layerViewManager.whenLayerView(a)},getDefaultSpatialReference:function(){return this.get("defaultsFromMap.spatialReference")},getDefaultHeightModelInfo:function(){return this.get("defaultsFromMap.heightModelInfo")},getHeightModelInfoWithOverride:function(){return this._userHeightModelInfo||
this.getDefaultHeightModelInfo()||null},setHeightModelInfoOverride:function(a){this._userHeightModelInfo=a;this.notifyChange("heightModelInfo")},validate:function(){return b.resolve()},isSpatialReferenceSupported:function(){return!0},isHeightModelInfoRequired:function(){return!1},isTileInfoRequired:function(){return!1},_resetInitialViewPropertiesFromContent:function(){if(this.defaultsFromMap){var a=this.defaultsFromMap.start.bind(this.defaultsFromMap);this.defaultsFromMap.reset();this._currentSpatialReference=
null;this.notifyChange("spatialReference");this._viewHandles.remove("defaultsFromMap");this._viewHandles.add([c.watch(this,"spatialReference",a),c.watch(this,"initialExtentRequired",a),k.schedule(a)],"defaultsFromMap")}},_forceReadyCycle:function(){this.ready&&(this._readyCycleForced=!0,c.whenFalseOnce(this,"ready",function(){this._readyCycleForced=!1;this.notifyChange("ready")}.bind(this)),this.notifyChange("ready"))}})})},"esri/geometry/HeightModelInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/kebabDictionary ../core/accessorSupport/decorators ./support/scaleUtils".split(" "),
function(a,f,m,h,e,l,n,d){a=l({gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"});l=l({meter:"meter",foot:"foot",foot_us:"foot-us",foot_clarke:"foot-clarke",yard_clarke:"yard-clarke",link_clarke:"link-clarke",yard_sears:"yard-sears",foot_sears:"foot-sears",chain_sears:"chain-sears",chain_benoit_1895_b:"chain-benoit-1895-b",yard_indian:"yard-indian",yard_indian_1937:"yard-indian-1937",foot_gold_coast:"foot-gold-coast",chain_sears_1922_truncated:"chain-sears-1922-truncated",
"50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});e=c=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.ellipsoid=null;return b}m(b,a);b.prototype.clone=function(){return new c({heightModel:this.heightModel,heightUnit:this.heightUnit,ellipsoid:this.ellipsoid})};b.deriveUnitFromSR=function(a,b){a=a.clone();a.heightUnit=d.getVerticalUnitStringForSR(b);return a};b.fromJSON=function(a){if(!a)return null;var b=new c;b.read(a);return b};return b}(n.declared(e));
h([n.property({json:{read:a.read,write:a.write}})],e.prototype,"heightModel",void 0);h([n.property({json:{read:l.read,write:l.write}})],e.prototype,"heightUnit",void 0);h([n.property({json:{write:!0}})],e.prototype,"ellipsoid",void 0);e=c=h([n.subclass("esri.HeightModelInfo")],e);var c;return e})},"esri/views/BreakpointsOwner":function(){define("../core/Accessor ../core/ArrayPool ../core/HandleRegistry ../core/watchUtils dojo/_base/lang dojo/dom-class".split(" "),function(a,f,m,h,e,l){var n={widthBreakpoint:{getValue:function(a){var b=
a.viewSize[0];a=a.breakpoints;var c=this.values;return b<=a.xsmall?c.xsmall:b<=a.small?c.small:b<=a.medium?c.medium:b<=a.large?c.large:c.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},
heightBreakpoint:{getValue:function(a){var b=a.viewSize[1];a=a.breakpoints;var c=this.values;return b<=a.xsmall?c.xsmall:b<=a.small?c.small:b<=a.medium?c.medium:b<=a.large?c.large:c.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},
orientation:{getValue:function(a){a=a.viewSize;var b=this.values;return a[1]>=a[0]?b.portrait:b.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},d={xsmall:544,small:768,medium:992,large:1200};return a.createSubclass({properties:{breakpoints:{},orientation:{},widthBreakpoint:{},heightBreakpoint:{}},constructor:function(){this._breakpointsHandles=new m},getDefaults:function(){return e.mixin(this.inherited(arguments),
{breakpoints:d})},initialize:function(){this._breakpointsHandles.add(h.init(this,"size",this._updateClassNames))},destroy:function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=this.view=null)},_breakpointsHandles:null,_breakpointsSetter:function(a){var b=this._get("breakpoints");if(a!==b){var b=(b=a)&&b.xsmall<b.small&&b.small<b.medium&&b.medium<b.large,c;b||(c=JSON.stringify(d,null,2),console.warn("provided breakpoints are not valid, using defaults:"+
c));a=b?a:d;this._set("breakpoints",e.mixin({},a))}},_updateClassNames:function(){if(this.container){var a=f.acquire(),b=f.acquire(),d=!1,e,h,l;for(e in n)h=this[e],l=n[e].getValue({viewSize:this.size,breakpoints:this.breakpoints}),h!==l&&(d=!0,this[e]=l,b.push(n[e].valueToClassName[h]),a.push(n[e].valueToClassName[l]));d&&(this._applyClassNameChanges(a,b),f.release(a),f.release(b))}},_applyClassNameChanges:function(a,b){var c=this.container;c&&(l.remove(c,b),l.add(c,a))},_removeActiveClassNames:function(){var a=
this.container,b;if(a)for(b in n)l.remove(a,n[b].valueToClassName[this[b]])}})})},"esri/views/LayerViewManager":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Accessor ../core/Error ../core/HandleRegistry ../core/Scheduler ../core/promiseUtils ../core/watchUtils ./LayerViewFactory".split(" "),function(a,f,m,h,e,l,n,d,c,b,k,q){a=function(a){function e(){var b=a.call(this)||this;b._promisesMap=new Map;
b._layerViewsMap=new Map;b._handles=new d;b.factory=new q;b.ready=!1;b.layersToLayerViews=function(){var a=new Map;a.set("view.map.basemap.baseLayers","view.basemapView.baseLayerViews");a.set("view.map.ground.layers","view.groundView.layerViews");a.set("view.map.layers","view.layerViews");a.set("view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews");return a}();b._doWork=b._doWork.bind(b);b.refresh=b.refresh.bind(b);b._handles.add(k.init(b,"view.ready",function(a){return b.ready=
a}));b._handles.add(b.watch(["view.map.basemap","view.map.ground","view.map.layers","ready"],b.refresh),"watcher");return b}m(e,a);e.prototype.destroy=function(){this._handles&&(this.empty(),this.view=null,this.factory.destroy(),this.factory=null,this._handles.destroy(),this._map=this._layerViewsMap=this._promisesMap=this._handles=null)};e.prototype.empty=function(){this._layerViewsMap.forEach(this._disposeLayerView,this);this._promisesMap.forEach(function(a){return a.cancel()});this._layerViewsMap.clear();
this._promisesMap.clear();this._refreshCollections()};e.prototype.refresh=function(){var a=this._handles;a.remove("refresh");a.add(c.schedule(this._doWork),"refresh")};e.prototype.whenLayerView=function(a){this.refresh();this._doWork();return this._promisesMap.has(a)?this._promisesMap.get(a):b.reject(new n("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:a}))};e.prototype._doWork=function(){var a=this,b=this._handles,c=this.get("view.map");this._map!==c&&(this.empty(),
this._map=c);if(b.has("refresh")){b.remove("refresh");b.remove("collection-change");this.factory.paused=!this.ready;var d=this._map&&this._map.allLayers;d&&(d.forEach(this._createLayerView,this),this._refreshCollections(),this._promisesMap.forEach(function(b,c){d.includes(c)||a._disposeLayerView(a._layerViewsMap.get(c),c)}),b.add(d.on("change",this.refresh),"collection-change"))}};e.prototype._refreshCollections=function(){var a=this;this.layersToLayerViews.forEach(function(b,c){a._populateLayerViewsOwners(a.get(c),
a.get(b),a.view)})};e.prototype._populateLayerViewsOwners=function(a,b,c){var d=this;if(a&&b){var e=0;a.forEach(function(a){var f=d._layerViewsMap.get(a);f&&(f.layer=a,f.parent=c,b.getItemAt(e)!==f&&b.splice(e,0,f),a.layers&&d._populateLayerViewsOwners(a.layers,f.layerViews,f),e+=1)});e<b.length&&b.splice(e,b.length)}else b&&b.removeAll()};e.prototype._createLayerView=function(a){var c=this,d=this.view,e=this.factory,f=this._layerViewsMap,h=this._promisesMap;f.has(a)?a.load():h.has(a)||(e=e.create(d,
a).then(function(e){if(!c._map||!c._map.allLayers.some(function(b){return a===b}))throw new n("view:no-layerview-for-layer","The layer has been removed from the map",{layer:a});f.set(a,e);c._refreshCollections();a.emit("layerview-create",{view:d,layerView:e});d.emit("layerview-create",{layer:a,layerView:e});return b.resolve(e)}),h.set(a,e),e.always(this.refresh))};e.prototype._disposeLayerView=function(a,b){if(this._promisesMap.has(b)&&(this._promisesMap.get(b).cancel(),this._promisesMap.delete(b),
a)){b=a.layer;var c=a.view;this.factory.dispose(a);a.layer=a.parent=a.view=null;this._layerViewsMap.delete(b);b.emit("layerview-destroy",{view:c,layerView:a});c.emit("layerview-destroy",{layer:b,layerView:a})}};return e}(e.declared(l));h([e.property()],a.prototype,"ready",void 0);h([e.property()],a.prototype,"view",void 0);return a=h([e.subclass("esri.views.LayerViewManager")],a)})},"esri/views/LayerViewFactory":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators dojo/Deferred dojo/when ../core/Accessor ../core/Collection ../core/Error ../core/watchUtils".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k){a=function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;b.creationRequests=new c;b.paused=!0;return b}m(d,a);d.prototype.initialize=function(){var a=this;k.whenFalse(this,"paused",function(){a.creationRequests.toArray().forEach(a._processRequest,a)},!0)};d.prototype.destroy=function(){this.creationRequests.drain(function(a){return a.deferred.cancel(void 0)})};Object.defineProperty(d.prototype,"working",{get:function(){return 0<this.creationRequests.length},
enumerable:!0,configurable:!0});d.prototype.create=function(a,c){var d=this.getLayerViewPromise(c);if(d)return d;var e=this.creationRequests,f={deferred:new l(function(){var a=new b("cancelled:layerview-create","layerview creation cancelled",{layer:c});e.remove(f);f.creationPromise&&f.creationPromise.cancel(a);return a}),view:a,layer:c,started:!1,creationPromise:null};e.push(f);this.paused||this._processRequest(f);return f.deferred.promise};d.prototype.dispose=function(a){a.layer.destroyLayerView(a)};
d.prototype.getLayerViewPromise=function(a){var b=this.creationRequests&&this.creationRequests.find(function(b){return b.layer===a});return b&&b.deferred.promise};d.prototype._processRequest=function(a){var c=this;if(!a.started){a.started=!0;var d=a.deferred,e=a.layer,f=a.view;e.load().then(function(b){if(!d.isCanceled())return a.creationPromise=b.createLayerView(f),a.creationPromise}).then(function(b){return d.isCanceled()?b:a.creationPromise=n(b)}).otherwise(function(a){d.isCanceled()||d.reject(new b("layerview:create-error",
"layerview creation failed",{layer:e,error:a}))}).then(function(b){c.creationRequests&&c.creationRequests.remove(a);d.isFulfilled()?b&&c.dispose(b):d.resolve(b);return b})}};return d}(e.declared(d));h([e.property()],a.prototype,"creationRequests",void 0);h([e.property()],a.prototype,"paused",void 0);h([e.property()],a.prototype,"view",void 0);h([e.property({dependsOn:["paused","creationRequests.length"],readOnly:!0})],a.prototype,"working",null);return a=h([e.subclass("esri.views.LayerViewFactory")],
a)})},"esri/views/BasemapView":function(){define(["../core/Accessor","../core/Collection","../core/watchUtils"],function(a,f,m){return a.createSubclass({declaredClass:"esri.views.BasemapView",properties:{view:{},baseLayerViews:{type:f},referenceLayerViews:{type:f}},constructor:function(){this._loadingHdl=m.init(this,"view.map.basemap",this._loadBasemap)},getDefaults:function(){return{baseLayerViews:[],referenceLayerViews:[]}},destroy:function(){this.view=null;this._loadingHdl&&(this._loadingHdl.remove(),
this._loadingHdl=null)},_suspendedGetter:function(){return this.view?this.view.suspended:!0},_loadBasemap:function(a){a&&a.load()}})})},"esri/views/GroundView":function(){define(["../core/Accessor","../core/Collection"],function(a,f){return a.createSubclass({declaredClass:"esri.views.GroundView",properties:{view:{},layerViews:{type:f},suspended:{get:function(){return this.view?this.view.suspended:!0}}},getDefaults:function(){return{layerViews:[]}},destroy:function(){this.view=null}})})},"esri/views/support/DefaultsFromMap":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators dojo/_base/lang ../../core/lang ../../core/watchUtils ../../core/Accessor ../../core/HandleRegistry ../../geometry/HeightModelInfo".split(" "),
function(a,f,m,h,e,l,n,d,c,b,k){function q(a){switch(a.type){case "elevation":case "integrated-mesh":case "point-cloud":case "scene":return!0;default:return void 0!==a.hasZ}}a=x=function(a){function c(c){c=a.call(this)||this;c.isSpatialReferenceDone=!1;c.isHeightModelInfoDone=!1;c.isTileInfoDone=!1;c.spatialReference=null;c.extent=null;c.heightModelInfo=null;c.mapCollectionPaths=x.DefaultMapCollectionPaths.slice();c.tileInfo=null;c._handles=new b;c._waitTask=null;c._isStarted=!1;return c}m(c,a);c.prototype.normalizeCtorArgs=
function(a){a=l.mixin({},a);this._set("view",a.view);delete a.view;return a};c.prototype.initialize=function(){var a=this;this.watch("mapCollectionPaths",function(){a._isStarted&&(a.reset(),a.start())})};c.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null,this._isStarted=!1);this._cancelLoading()};c.prototype.reset=function(){this._handles.removeAll();this._isStarted=!1;this._set("isSpatialReferenceDone",!1);this._set("isHeightModelInfoDone",!1);this._set("isTileInfoDone",
!1);this._set("spatialReference",null);this._set("extent",null);this._set("heightModelInfo",null);this._set("tileInfo",null)};c.prototype.start=function(){this._handles.removeAll();this._isStarted=!0;for(var a=this._updateLayerChange.bind(this),b=0,c=this.mapCollectionPaths;b<c.length;b++)this._handles.add(d.on(this.view,"map."+c[b],"change",a,a,a))};c.prototype.supportedSpatialReferenceForLayer=function(a){if(a.spatialReference&&this.view.isSpatialReferenceSupported(a.spatialReference,a))return a.spatialReference};
c.prototype._ownerNameFromCollectionName=function(a){var b=a.lastIndexOf(".");return-1===b?"view":"view."+a.slice(0,b)};c.prototype._ensureLoadedOwnersFromCollectionName=function(a){a=this._ownerNameFromCollectionName(a).split(".");for(var b,c=0;c<a.length;c++){b=this.get(a.slice(0,c+1).join("."));if(!b)break;if(b.load&&!b.isFulfilled())return{owner:null,loading:b.load()}}return{owner:b}};c.prototype._cancelLoading=function(){this._waitTask=null};c.prototype._updateWhen=function(a){var b=this,c=!0,
d=!1,e=a.always(function(){c?d=!0:e===b._waitTask&&b._update()}),c=!1;d||(this._waitTask=e);return d};c.prototype._updateLayerChange=function(){this.isSpatialReferenceDone&&!this.spatialReference&&this._set("isSpatialReferenceDone",!1);this._update()};c.prototype._update=function(){var a=this;this._cancelLoading();if(!this.isSpatialReferenceDone){var b=this._processMapCollections(function(b){return a._processSpatialReferenceSource(b)});b||this._set("isSpatialReferenceDone",!0);this.isSpatialReferenceDone&&
!this.spatialReference&&this.defaultSpatialReference&&this._set("spatialReference",this.defaultSpatialReference)}null==this.heightModelInfo&&(b=!1,this.view.isHeightModelInfoRequired()&&(b=this._processMapCollections(function(b){return a._processHeightModelInfoSource(b)},function(a){return null!=a.layers||q(a)||void 0!==a.heightModelInfo})),b||this._set("isHeightModelInfoDone",!0));null==this.tileInfo&&(b=!1,this.view.isTileInfoRequired()&&(b=this._deriveTileInfo()),b||this._set("isTileInfoDone",
!0))};c.prototype._processMapCollections=function(a,b){for(var c=0,d=this.mapCollectionPaths;c<d.length;c++){var e="map."+d[c],f=this._ensureLoadedOwnersFromCollectionName(e);if(f.loading&&!this._updateWhen(f.loading))return!0;f=f.owner;if(!(!f||f.isRejected&&f.isRejected())&&(e=this.view.get(e))&&this._processMapCollection(e,a,b))return!0}return!1};c.prototype._processMapCollection=function(a,b,c){for(var d=0;d<a.length;d++){var e=a.getItemAt(d),f=null!=c&&!c(e);if(!f&&e.load&&!e.isFulfilled()&&
!this._updateWhen(e.load())||!f&&(!e.load||e.isResolved())&&(b(e)||e.layers&&this._processMapCollection(e.layers,b)))return!0}return!1};c.prototype._processSpatialReferenceSource=function(a){var b=a.fullExtent;a=this.supportedSpatialReferenceForLayer(a);!a&&this.extent||!b||this._set("extent",b);return a?(this._set("spatialReference",a),this._set("isSpatialReferenceDone",!0),!0):!1};c.prototype._processHeightModelInfoSource=function(a){a=a.heightModelInfo?a.heightModelInfo:(null!=a.hasZ?a.hasZ:q(a))?
n.clone(u):null;return a?(this._set("heightModelInfo",a),this._set("isHeightModelInfoDone",!0),!0):!1};c.prototype._deriveTileInfo=function(){if(!this.isSpatialReferenceDone)return!0;var a=this.get("view.map");if(!a)return!0;var b=a.basemap,c=b&&b.get("baseLayers.0"),a=a.get("layers.0"),d=!1,e=null;b?b.loaded?c?c.loaded?e=c.tileInfo:(this._updateWhen(c.load()),d=!0):a?a.loaded?e=a.tileInfo:(this._updateWhen(a.load()),d=!0):d=!0:(this._updateWhen(b.load()),d=!0):a&&(a.loaded?e=a.tileInfo:(this._updateWhen(a.load()),
d=!0));e&&!e.spatialReference.equals(this.spatialReference)&&(e=null);d||this._set("tileInfo",e);return d};return c}(e.declared(c));a.DefaultMapCollectionPaths=["basemap.baseLayers","layers","ground.layers","basemap.referenceLayers"];h([e.property({readOnly:!0})],a.prototype,"isSpatialReferenceDone",void 0);h([e.property({readOnly:!0})],a.prototype,"isHeightModelInfoDone",void 0);h([e.property({readOnly:!0})],a.prototype,"isTileInfoDone",void 0);h([e.property({readOnly:!0})],a.prototype,"view",void 0);
h([e.property({readOnly:!0})],a.prototype,"spatialReference",void 0);h([e.property({readOnly:!0})],a.prototype,"extent",void 0);h([e.property({readOnly:!0})],a.prototype,"heightModelInfo",void 0);h([e.property()],a.prototype,"mapCollectionPaths",void 0);h([e.property()],a.prototype,"defaultSpatialReference",void 0);h([e.property({readOnly:!0})],a.prototype,"tileInfo",void 0);a=x=h([e.subclass("esri.views.support.DefaultsFromMap")],a);var u=new k({heightModel:"gravity-related-height"}),x;return a})},
"esri/views/ViewAnimation":function(){define("../core/declare dojo/Deferred ../core/Accessor ../core/Promise ../core/Scheduler ../core/Error".split(" "),function(a,f,m,h,e,l){var n={RUNNING:"running",FINISHED:"finished",STOPPED:"stopped"};a=a([m,h],{declaredClass:"esri.views.ViewAnimation",properties:{state:{value:null},target:{value:null}},constructor:function(){this._dfd=new f;this.addResolvingPromise(this._dfd.promise)},initialize:function(){this.state=n.RUNNING},stop:function(){this.state!==n.STOPPED&&
this.state!==n.FINISHED&&(this.state=n.STOPPED,e.schedule(this._dfd.reject.bind(this._dfd,new l("ViewAnimation stopped"))))},finish:function(){this.state!==n.STOPPED&&this.state!==n.FINISHED&&(this.state=n.FINISHED,e.schedule(this._dfd.resolve))}});a.State=n;return a})},"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\r\n/\x3e\x3c/span\x3e\r\n',
"url:dijit/form/templates/TextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',"url:dijit/templates/Tooltip.html":'\x3cdiv class\x3d"dijitTooltip dijitTooltipLeft" id\x3d"dojoTooltip" data-dojo-attach-event\x3d"mouseenter:onMouseEnter,mouseleave:onMouseLeave"\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipConnector" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point\x3d"containerNode" role\x3d\'alert\'\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:dijit/form/templates/ValidationTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"*now":function(a){a(['dojo/i18n!*preload*dojo/nls/dojo*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])},"*noref":1}});require.boot&&require.apply(null,require.boot);